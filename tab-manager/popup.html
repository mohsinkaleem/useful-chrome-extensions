<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tab Manager</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <h1 class="title">Tab Manager</h1>
      <div class="header-stats">
        <span id="tab-count">0 tabs</span>
        <span class="stat-sep">â€¢</span>
        <span id="window-count">0 windows</span>
        <span class="stat-sep">â€¢</span>
        <span id="memory-usage" title="Estimated memory">--</span>
      </div>
    </header>

    <!-- Search & Filters Section (Compact) -->
    <div class="search-section-compact">
      <input 
        type="text" 
        id="search-input" 
        class="search-input" 
        placeholder="Search tabs..."
      />
      <div class="filter-chips-compact">
        <label class="filter-chip-icon" title="Filter audible tabs">
          <input type="checkbox" id="filter-audible" />
          <span class="filter-icon">ğŸ”Š</span>
        </label>
        <label class="filter-chip-icon" title="Filter pinned tabs">
          <input type="checkbox" id="filter-pinned" />
          <span class="filter-icon">ğŸ“Œ</span>
        </label>
        <label class="filter-chip-icon" title="Highlight duplicate tabs">
          <input type="checkbox" id="filter-duplicates" />
          <span class="filter-icon">âš ï¸</span>
        </label>
      </div>
      <div class="view-controls">
        <button id="view-list" class="view-btn active" title="List view">â˜°</button>
        <button id="view-compact" class="view-btn" title="Compact view">â‰¡</button>
        <button id="view-grid" class="view-btn" title="Grid view">â–¦</button>
      </div>
    </div>

    <!-- Collapsible Panels Section -->
    <div class="panels-container">
      <!-- Combined Overview & Actions (Ultra Compact) -->
      <div class="combined-overview" id="resource-overview">
        <div class="stats-row">
          <div class="stat-group">
            <span class="stat-mini" title="Memory usage">ğŸ’¾ <strong id="overview-memory">--</strong></span>
            <span class="stat-mini" title="Heavy tabs">âš ï¸ <strong id="overview-heavy-tabs">--</strong></span>
            <button id="view-resource-details" class="link-btn" title="View detailed resource monitor">Details â†’</button>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-group">
            <span class="stat-mini" title="Active tabs">â–¶ <strong id="active-count">0</strong></span>
            <span class="stat-mini" title="Hibernated tabs">ğŸ’¤ <strong id="discarded-count">0</strong></span>
            <span class="stat-mini" title="Pinned tabs">ğŸ“Œ <strong id="pinned-count">0</strong></span>
            <span class="stat-mini" title="Duplicate tabs">ğŸ“‘ <strong id="duplicate-count">0</strong></span>
          </div>
          <div class="action-buttons-mini">
            <button id="action-hibernate-inactive" class="btn-icon" title="Hibernate inactive tabs">ğŸ’¤</button>
            <button id="action-close-duplicates" class="btn-icon" title="Close duplicate tabs">ğŸ—‘ï¸</button>
          </div>
        </div>
      </div>

      <!-- Media Controls (only shown when media tabs exist) -->
      <details class="panel" id="media-section">
        <summary class="panel-header">
          <span class="panel-icon">ğŸ”Š</span>
          <span>Media Tabs</span>
          <span class="panel-badge" id="media-badge">0</span>
        </summary>
        <div class="panel-content">
          <div id="media-tabs" class="media-tabs-list"></div>
        </div>
      </details>

      <!-- Quick Actions Panel -->
      <div class="quick-actions-bar">
        <button id="action-close-selected" class="action-btn compact" disabled>âœ• Close</button>
        <button id="action-bookmark-selected" class="action-btn compact" disabled>â˜… Bookmark</button>
        <button id="action-group-selected" class="action-btn compact" disabled>â–¤ Group</button>
        <button id="action-save-session" class="action-btn compact">ğŸ’¾ Save Session</button>
      </div>
    </div>

    <!-- Main Tabs Container (scrollable area) -->
    <div id="tabs-container" class="tabs-container">
      <!-- Windows and tabs will be dynamically inserted here -->
    </div>

    <!-- Session Manager (Modal) -->
    <div id="session-modal" class="modal hidden">
      <div class="modal-content">
        <h2>Session Manager</h2>
        <div id="sessions-list"></div>
        <div class="modal-actions">
          <input type="text" id="session-name" placeholder="Session name..." />
          <button id="save-session-btn">Save Current Session</button>
          <button id="close-modal-btn">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="dist/popup/popup.js"></script>
</body>
</html>
