{"version":3,"file":"background.js","sources":["node_modules/dexie/dist/dexie.js","node_modules/dexie/import-wrapper.mjs","src/db.js","src/enrichment.js","node_modules/flexsearch/dist/flexsearch.bundle.module.min.mjs","src/search.js","background-new.js"],"sourcesContent":["/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 4.2.1, Sat Oct 04 2025\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Dexie = factory());\n})(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n    var extendStatics = function(d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    function __extends(d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    }\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n            if (ar || !(i in from)) {\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n                ar[i] = from[i];\n            }\n        }\n        return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var _global = typeof globalThis !== 'undefined' ? globalThis :\n        typeof self !== 'undefined' ? self :\n            typeof window !== 'undefined' ? window :\n                global;\n\n    var keys = Object.keys;\n    var isArray = Array.isArray;\n    if (typeof Promise !== 'undefined' && !_global.Promise) {\n        _global.Promise = Promise;\n    }\n    function extend(obj, extension) {\n        if (typeof extension !== 'object')\n            return obj;\n        keys(extension).forEach(function (key) {\n            obj[key] = extension[key];\n        });\n        return obj;\n    }\n    var getProto = Object.getPrototypeOf;\n    var _hasOwn = {}.hasOwnProperty;\n    function hasOwn(obj, prop) {\n        return _hasOwn.call(obj, prop);\n    }\n    function props(proto, extension) {\n        if (typeof extension === 'function')\n            extension = extension(getProto(proto));\n        (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {\n            setProp(proto, key, extension[key]);\n        });\n    }\n    var defineProperty = Object.defineProperty;\n    function setProp(obj, prop, functionOrGetSet, options) {\n        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n            { value: functionOrGetSet, configurable: true, writable: true }, options));\n    }\n    function derive(Child) {\n        return {\n            from: function (Parent) {\n                Child.prototype = Object.create(Parent.prototype);\n                setProp(Child.prototype, \"constructor\", Child);\n                return {\n                    extend: props.bind(null, Child.prototype)\n                };\n            }\n        };\n    }\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    function getPropertyDescriptor(obj, prop) {\n        var pd = getOwnPropertyDescriptor(obj, prop);\n        var proto;\n        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n    }\n    var _slice = [].slice;\n    function slice(args, start, end) {\n        return _slice.call(args, start, end);\n    }\n    function override(origFunc, overridedFactory) {\n        return overridedFactory(origFunc);\n    }\n    function assert(b) {\n        if (!b)\n            throw new Error(\"Assertion Failed\");\n    }\n    function asap$1(fn) {\n        if (_global.setImmediate)\n            setImmediate(fn);\n        else\n            setTimeout(fn, 0);\n    }\n    function arrayToObject(array, extractor) {\n        return array.reduce(function (result, item, i) {\n            var nameAndValue = extractor(item, i);\n            if (nameAndValue)\n                result[nameAndValue[0]] = nameAndValue[1];\n            return result;\n        }, {});\n    }\n    function getByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string' && hasOwn(obj, keyPath))\n            return obj[keyPath];\n        if (!keyPath)\n            return obj;\n        if (typeof keyPath !== 'string') {\n            var rv = [];\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                var val = getByKeyPath(obj, keyPath[i]);\n                rv.push(val);\n            }\n            return rv;\n        }\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var innerObj = obj[keyPath.substr(0, period)];\n            return innerObj == null ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n        }\n        return undefined;\n    }\n    function setByKeyPath(obj, keyPath, value) {\n        if (!obj || keyPath === undefined)\n            return;\n        if ('isFrozen' in Object && Object.isFrozen(obj))\n            return;\n        if (typeof keyPath !== 'string' && 'length' in keyPath) {\n            assert(typeof value !== 'string' && 'length' in value);\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                setByKeyPath(obj, keyPath[i], value[i]);\n            }\n        }\n        else {\n            var period = keyPath.indexOf('.');\n            if (period !== -1) {\n                var currentKeyPath = keyPath.substr(0, period);\n                var remainingKeyPath = keyPath.substr(period + 1);\n                if (remainingKeyPath === \"\")\n                    if (value === undefined) {\n                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                            obj.splice(currentKeyPath, 1);\n                        else\n                            delete obj[currentKeyPath];\n                    }\n                    else\n                        obj[currentKeyPath] = value;\n                else {\n                    var innerObj = obj[currentKeyPath];\n                    if (!innerObj || !hasOwn(obj, currentKeyPath))\n                        innerObj = (obj[currentKeyPath] = {});\n                    setByKeyPath(innerObj, remainingKeyPath, value);\n                }\n            }\n            else {\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                        obj.splice(keyPath, 1);\n                    else\n                        delete obj[keyPath];\n                }\n                else\n                    obj[keyPath] = value;\n            }\n        }\n    }\n    function delByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string')\n            setByKeyPath(obj, keyPath, undefined);\n        else if ('length' in keyPath)\n            [].map.call(keyPath, function (kp) {\n                setByKeyPath(obj, kp, undefined);\n            });\n    }\n    function shallowClone(obj) {\n        var rv = {};\n        for (var m in obj) {\n            if (hasOwn(obj, m))\n                rv[m] = obj[m];\n        }\n        return rv;\n    }\n    var concat = [].concat;\n    function flatten(a) {\n        return concat.apply([], a);\n    }\n    var intrinsicTypeNames = \"BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\n    var intrinsicTypes = new Set(intrinsicTypeNames.map(function (t) { return _global[t]; }));\n    function cloneSimpleObjectTree(o) {\n        var rv = {};\n        for (var k in o)\n            if (hasOwn(o, k)) {\n                var v = o[k];\n                rv[k] = !v || typeof v !== 'object' || intrinsicTypes.has(v.constructor) ? v : cloneSimpleObjectTree(v);\n            }\n        return rv;\n    }\n    function objectIsEmpty(o) {\n        for (var k in o)\n            if (hasOwn(o, k))\n                return false;\n        return true;\n    }\n    var circularRefs = null;\n    function deepClone(any) {\n        circularRefs = new WeakMap();\n        var rv = innerDeepClone(any);\n        circularRefs = null;\n        return rv;\n    }\n    function innerDeepClone(x) {\n        if (!x || typeof x !== 'object')\n            return x;\n        var rv = circularRefs.get(x);\n        if (rv)\n            return rv;\n        if (isArray(x)) {\n            rv = [];\n            circularRefs.set(x, rv);\n            for (var i = 0, l = x.length; i < l; ++i) {\n                rv.push(innerDeepClone(x[i]));\n            }\n        }\n        else if (intrinsicTypes.has(x.constructor)) {\n            rv = x;\n        }\n        else {\n            var proto = getProto(x);\n            rv = proto === Object.prototype ? {} : Object.create(proto);\n            circularRefs.set(x, rv);\n            for (var prop in x) {\n                if (hasOwn(x, prop)) {\n                    rv[prop] = innerDeepClone(x[prop]);\n                }\n            }\n        }\n        return rv;\n    }\n    var toString = {}.toString;\n    function toStringTag(o) {\n        return toString.call(o).slice(8, -1);\n    }\n    var iteratorSymbol = typeof Symbol !== 'undefined' ?\n        Symbol.iterator :\n        '@@iterator';\n    var getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n        var i;\n        return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n    } : function () { return null; };\n    function delArrayItem(a, x) {\n        var i = a.indexOf(x);\n        if (i >= 0)\n            a.splice(i, 1);\n        return i >= 0;\n    }\n    var NO_CHAR_ARRAY = {};\n    function getArrayOf(arrayLike) {\n        var i, a, x, it;\n        if (arguments.length === 1) {\n            if (isArray(arrayLike))\n                return arrayLike.slice();\n            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n                return [arrayLike];\n            if ((it = getIteratorOf(arrayLike))) {\n                a = [];\n                while ((x = it.next()), !x.done)\n                    a.push(x.value);\n                return a;\n            }\n            if (arrayLike == null)\n                return [arrayLike];\n            i = arrayLike.length;\n            if (typeof i === 'number') {\n                a = new Array(i);\n                while (i--)\n                    a[i] = arrayLike[i];\n                return a;\n            }\n            return [arrayLike];\n        }\n        i = arguments.length;\n        a = new Array(i);\n        while (i--)\n            a[i] = arguments[i];\n        return a;\n    }\n    var isAsyncFunction = typeof Symbol !== 'undefined'\n        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n        : function () { return false; };\n\n    var dexieErrorNames = [\n        'Modify',\n        'Bulk',\n        'OpenFailed',\n        'VersionChange',\n        'Schema',\n        'Upgrade',\n        'InvalidTable',\n        'MissingAPI',\n        'NoSuchDatabase',\n        'InvalidArgument',\n        'SubTransaction',\n        'Unsupported',\n        'Internal',\n        'DatabaseClosed',\n        'PrematureCommit',\n        'ForeignAwait'\n    ];\n    var idbDomErrorNames = [\n        'Unknown',\n        'Constraint',\n        'Data',\n        'TransactionInactive',\n        'ReadOnly',\n        'Version',\n        'NotFound',\n        'InvalidState',\n        'InvalidAccess',\n        'Abort',\n        'Timeout',\n        'QuotaExceeded',\n        'Syntax',\n        'DataClone'\n    ];\n    var errorList = dexieErrorNames.concat(idbDomErrorNames);\n    var defaultTexts = {\n        VersionChanged: \"Database version changed by other database connection\",\n        DatabaseClosed: \"Database has been closed\",\n        Abort: \"Transaction aborted\",\n        TransactionInactive: \"Transaction has already completed or failed\",\n        MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n    };\n    function DexieError(name, msg) {\n        this.name = name;\n        this.message = msg;\n    }\n    derive(DexieError).from(Error).extend({\n        toString: function () { return this.name + \": \" + this.message; }\n    });\n    function getMultiErrorMessage(msg, failures) {\n        return msg + \". Errors: \" + Object.keys(failures)\n            .map(function (key) { return failures[key].toString(); })\n            .filter(function (v, i, s) { return s.indexOf(v) === i; })\n            .join('\\n');\n    }\n    function ModifyError(msg, failures, successCount, failedKeys) {\n        this.failures = failures;\n        this.failedKeys = failedKeys;\n        this.successCount = successCount;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(ModifyError).from(DexieError);\n    function BulkError(msg, failures) {\n        this.name = \"BulkError\";\n        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });\n        this.failuresByPos = failures;\n        this.message = getMultiErrorMessage(msg, this.failures);\n    }\n    derive(BulkError).from(DexieError);\n    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\n    var BaseException = DexieError;\n    var exceptions = errorList.reduce(function (obj, name) {\n        var fullName = name + \"Error\";\n        function DexieError(msgOrInner, inner) {\n            this.name = fullName;\n            if (!msgOrInner) {\n                this.message = defaultTexts[name] || fullName;\n                this.inner = null;\n            }\n            else if (typeof msgOrInner === 'string') {\n                this.message = \"\".concat(msgOrInner).concat(!inner ? '' : '\\n ' + inner);\n                this.inner = inner || null;\n            }\n            else if (typeof msgOrInner === 'object') {\n                this.message = \"\".concat(msgOrInner.name, \" \").concat(msgOrInner.message);\n                this.inner = msgOrInner;\n            }\n        }\n        derive(DexieError).from(BaseException);\n        obj[name] = DexieError;\n        return obj;\n    }, {});\n    exceptions.Syntax = SyntaxError;\n    exceptions.Type = TypeError;\n    exceptions.Range = RangeError;\n    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n        obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    function mapError(domError, message) {\n        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n            return domError;\n        var rv = new exceptionMap[domError.name](message || domError.message, domError);\n        if (\"stack\" in domError) {\n            setProp(rv, \"stack\", { get: function () {\n                    return this.inner.stack;\n                } });\n        }\n        return rv;\n    }\n    var fullNameExceptions = errorList.reduce(function (obj, name) {\n        if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n            obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    fullNameExceptions.ModifyError = ModifyError;\n    fullNameExceptions.DexieError = DexieError;\n    fullNameExceptions.BulkError = BulkError;\n\n    function nop() { }\n    function mirror(val) { return val; }\n    function pureFunctionChain(f1, f2) {\n        if (f1 == null || f1 === mirror)\n            return f2;\n        return function (val) {\n            return f2(f1(val));\n        };\n    }\n    function callBoth(on1, on2) {\n        return function () {\n            on1.apply(this, arguments);\n            on2.apply(this, arguments);\n        };\n    }\n    function hookCreatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res !== undefined)\n                arguments[0] = res;\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res2 !== undefined ? res2 : res;\n        };\n    }\n    function hookDeletingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            f1.apply(this, arguments);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = this.onerror = null;\n            f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        };\n    }\n    function hookUpdatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function (modifications) {\n            var res = f1.apply(this, arguments);\n            extend(modifications, res);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res === undefined ?\n                (res2 === undefined ? undefined : res2) :\n                (extend(res, res2));\n        };\n    }\n    function reverseStoppableEventChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            if (f2.apply(this, arguments) === false)\n                return false;\n            return f1.apply(this, arguments);\n        };\n    }\n    function promisableChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res && typeof res.then === 'function') {\n                var thiz = this, i = arguments.length, args = new Array(i);\n                while (i--)\n                    args[i] = arguments[i];\n                return res.then(function () {\n                    return f2.apply(thiz, args);\n                });\n            }\n            return f2.apply(this, arguments);\n        };\n    }\n\n    var debug = typeof location !== 'undefined' &&\n        /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n    function setDebug(value, filter) {\n        debug = value;\n    }\n\n    var INTERNAL = {};\n    var ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?\n        [] :\n        (function () {\n            var globalP = Promise.resolve();\n            if (typeof crypto === 'undefined' || !crypto.subtle)\n                return [globalP, getProto(globalP), globalP];\n            var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n            return [\n                nativeP,\n                getProto(nativeP),\n                globalP\n            ];\n        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\n    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\n    var patchGlobalPromise = !!resolvedGlobalPromise;\n    function schedulePhysicalTick() {\n        queueMicrotask(physicalTick);\n    }\n    var asap = function (callback, args) {\n        microtickQueue.push([callback, args]);\n        if (needsNewPhysicalTick) {\n            schedulePhysicalTick();\n            needsNewPhysicalTick = false;\n        }\n    };\n    var isOutsideMicroTick = true,\n    needsNewPhysicalTick = true,\n    unhandledErrors = [],\n    rejectingErrors = [],\n    rejectionMapper = mirror;\n    var globalPSD = {\n        id: 'global',\n        global: true,\n        ref: 0,\n        unhandleds: [],\n        onunhandled: nop,\n        pgp: false,\n        env: {},\n        finalize: nop\n    };\n    var PSD = globalPSD;\n    var microtickQueue = [];\n    var numScheduledCalls = 0;\n    var tickFinalizers = [];\n    function DexiePromise(fn) {\n        if (typeof this !== 'object')\n            throw new TypeError('Promises must be constructed via new');\n        this._listeners = [];\n        this._lib = false;\n        var psd = (this._PSD = PSD);\n        if (typeof fn !== 'function') {\n            if (fn !== INTERNAL)\n                throw new TypeError('Not a function');\n            this._state = arguments[1];\n            this._value = arguments[2];\n            if (this._state === false)\n                handleRejection(this, this._value);\n            return;\n        }\n        this._state = null;\n        this._value = null;\n        ++psd.ref;\n        executePromiseTask(this, fn);\n    }\n    var thenProp = {\n        get: function () {\n            var psd = PSD, microTaskId = totalEchoes;\n            function then(onFulfilled, onRejected) {\n                var _this = this;\n                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n                var cleanup = possibleAwait && !decrementExpectedAwaits();\n                var rv = new DexiePromise(function (resolve, reject) {\n                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n                });\n                if (this._consoleTask)\n                    rv._consoleTask = this._consoleTask;\n                return rv;\n            }\n            then.prototype = INTERNAL;\n            return then;\n        },\n        set: function (value) {\n            setProp(this, 'then', value && value.prototype === INTERNAL ?\n                thenProp :\n                {\n                    get: function () {\n                        return value;\n                    },\n                    set: thenProp.set\n                });\n        }\n    };\n    props(DexiePromise.prototype, {\n        then: thenProp,\n        _then: function (onFulfilled, onRejected) {\n            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n        },\n        catch: function (onRejected) {\n            if (arguments.length === 1)\n                return this.then(null, onRejected);\n            var type = arguments[0], handler = arguments[1];\n            return typeof type === 'function' ? this.then(null, function (err) {\n                return err instanceof type ? handler(err) : PromiseReject(err);\n            })\n                : this.then(null, function (err) {\n                    return err && err.name === type ? handler(err) : PromiseReject(err);\n                });\n        },\n        finally: function (onFinally) {\n            return this.then(function (value) {\n                return DexiePromise.resolve(onFinally()).then(function () { return value; });\n            }, function (err) {\n                return DexiePromise.resolve(onFinally()).then(function () { return PromiseReject(err); });\n            });\n        },\n        timeout: function (ms, msg) {\n            var _this = this;\n            return ms < Infinity ?\n                new DexiePromise(function (resolve, reject) {\n                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n                }) : this;\n        }\n    });\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\n    globalPSD.env = snapShot();\n    function Listener(onFulfilled, onRejected, resolve, reject, zone) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.psd = zone;\n    }\n    props(DexiePromise, {\n        all: function () {\n            var values = getArrayOf.apply(null, arguments)\n                .map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                if (values.length === 0)\n                    resolve([]);\n                var remaining = values.length;\n                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n                    values[i] = x;\n                    if (!--remaining)\n                        resolve(values);\n                }, reject); });\n            });\n        },\n        resolve: function (value) {\n            if (value instanceof DexiePromise)\n                return value;\n            if (value && typeof value.then === 'function')\n                return new DexiePromise(function (resolve, reject) {\n                    value.then(resolve, reject);\n                });\n            var rv = new DexiePromise(INTERNAL, true, value);\n            return rv;\n        },\n        reject: PromiseReject,\n        race: function () {\n            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n            });\n        },\n        PSD: {\n            get: function () { return PSD; },\n            set: function (value) { return PSD = value; }\n        },\n        totalEchoes: { get: function () { return totalEchoes; } },\n        newPSD: newScope,\n        usePSD: usePSD,\n        scheduler: {\n            get: function () { return asap; },\n            set: function (value) { asap = value; }\n        },\n        rejectionMapper: {\n            get: function () { return rejectionMapper; },\n            set: function (value) { rejectionMapper = value; }\n        },\n        follow: function (fn, zoneProps) {\n            return new DexiePromise(function (resolve, reject) {\n                return newScope(function (resolve, reject) {\n                    var psd = PSD;\n                    psd.unhandleds = [];\n                    psd.onunhandled = reject;\n                    psd.finalize = callBoth(function () {\n                        var _this = this;\n                        run_at_end_of_this_or_next_physical_tick(function () {\n                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                        });\n                    }, psd.finalize);\n                    fn();\n                }, zoneProps, resolve, reject);\n            });\n        }\n    });\n    if (NativePromise) {\n        if (NativePromise.allSettled)\n            setProp(DexiePromise, \"allSettled\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve) {\n                    if (possiblePromises.length === 0)\n                        resolve([]);\n                    var remaining = possiblePromises.length;\n                    var results = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n                        .then(function () { return --remaining || resolve(results); }); });\n                });\n            });\n        if (NativePromise.any && typeof AggregateError !== 'undefined')\n            setProp(DexiePromise, \"any\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve, reject) {\n                    if (possiblePromises.length === 0)\n                        reject(new AggregateError([]));\n                    var remaining = possiblePromises.length;\n                    var failures = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n                        failures[i] = failure;\n                        if (!--remaining)\n                            reject(new AggregateError(failures));\n                    }); });\n                });\n            });\n        if (NativePromise.withResolvers)\n            DexiePromise.withResolvers = NativePromise.withResolvers;\n    }\n    function executePromiseTask(promise, fn) {\n        try {\n            fn(function (value) {\n                if (promise._state !== null)\n                    return;\n                if (value === promise)\n                    throw new TypeError('A promise cannot be resolved with itself.');\n                var shouldExecuteTick = promise._lib && beginMicroTickScope();\n                if (value && typeof value.then === 'function') {\n                    executePromiseTask(promise, function (resolve, reject) {\n                        value instanceof DexiePromise ?\n                            value._then(resolve, reject) :\n                            value.then(resolve, reject);\n                    });\n                }\n                else {\n                    promise._state = true;\n                    promise._value = value;\n                    propagateAllListeners(promise);\n                }\n                if (shouldExecuteTick)\n                    endMicroTickScope();\n            }, handleRejection.bind(null, promise));\n        }\n        catch (ex) {\n            handleRejection(promise, ex);\n        }\n    }\n    function handleRejection(promise, reason) {\n        rejectingErrors.push(reason);\n        if (promise._state !== null)\n            return;\n        var shouldExecuteTick = promise._lib && beginMicroTickScope();\n        reason = rejectionMapper(reason);\n        promise._state = false;\n        promise._value = reason;\n        addPossiblyUnhandledError(promise);\n        propagateAllListeners(promise);\n        if (shouldExecuteTick)\n            endMicroTickScope();\n    }\n    function propagateAllListeners(promise) {\n        var listeners = promise._listeners;\n        promise._listeners = [];\n        for (var i = 0, len = listeners.length; i < len; ++i) {\n            propagateToListener(promise, listeners[i]);\n        }\n        var psd = promise._PSD;\n        --psd.ref || psd.finalize();\n        if (numScheduledCalls === 0) {\n            ++numScheduledCalls;\n            asap(function () {\n                if (--numScheduledCalls === 0)\n                    finalizePhysicalTick();\n            }, []);\n        }\n    }\n    function propagateToListener(promise, listener) {\n        if (promise._state === null) {\n            promise._listeners.push(listener);\n            return;\n        }\n        var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n        if (cb === null) {\n            return (promise._state ? listener.resolve : listener.reject)(promise._value);\n        }\n        ++listener.psd.ref;\n        ++numScheduledCalls;\n        asap(callListener, [cb, promise, listener]);\n    }\n    function callListener(cb, promise, listener) {\n        try {\n            var ret, value = promise._value;\n            if (!promise._state && rejectingErrors.length)\n                rejectingErrors = [];\n            ret = debug && promise._consoleTask ? promise._consoleTask.run(function () { return cb(value); }) : cb(value);\n            if (!promise._state && rejectingErrors.indexOf(value) === -1) {\n                markErrorAsHandled(promise);\n            }\n            listener.resolve(ret);\n        }\n        catch (e) {\n            listener.reject(e);\n        }\n        finally {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n            --listener.psd.ref || listener.psd.finalize();\n        }\n    }\n    function physicalTick() {\n        usePSD(globalPSD, function () {\n            beginMicroTickScope() && endMicroTickScope();\n        });\n    }\n    function beginMicroTickScope() {\n        var wasRootExec = isOutsideMicroTick;\n        isOutsideMicroTick = false;\n        needsNewPhysicalTick = false;\n        return wasRootExec;\n    }\n    function endMicroTickScope() {\n        var callbacks, i, l;\n        do {\n            while (microtickQueue.length > 0) {\n                callbacks = microtickQueue;\n                microtickQueue = [];\n                l = callbacks.length;\n                for (i = 0; i < l; ++i) {\n                    var item = callbacks[i];\n                    item[0].apply(null, item[1]);\n                }\n            }\n        } while (microtickQueue.length > 0);\n        isOutsideMicroTick = true;\n        needsNewPhysicalTick = true;\n    }\n    function finalizePhysicalTick() {\n        var unhandledErrs = unhandledErrors;\n        unhandledErrors = [];\n        unhandledErrs.forEach(function (p) {\n            p._PSD.onunhandled.call(null, p._value, p);\n        });\n        var finalizers = tickFinalizers.slice(0);\n        var i = finalizers.length;\n        while (i)\n            finalizers[--i]();\n    }\n    function run_at_end_of_this_or_next_physical_tick(fn) {\n        function finalizer() {\n            fn();\n            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n        }\n        tickFinalizers.push(finalizer);\n        ++numScheduledCalls;\n        asap(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n    function addPossiblyUnhandledError(promise) {\n        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n            unhandledErrors.push(promise);\n    }\n    function markErrorAsHandled(promise) {\n        var i = unhandledErrors.length;\n        while (i)\n            if (unhandledErrors[--i]._value === promise._value) {\n                unhandledErrors.splice(i, 1);\n                return;\n            }\n    }\n    function PromiseReject(reason) {\n        return new DexiePromise(INTERNAL, false, reason);\n    }\n    function wrap(fn, errorCatcher) {\n        var psd = PSD;\n        return function () {\n            var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n            try {\n                switchToZone(psd, true);\n                return fn.apply(this, arguments);\n            }\n            catch (e) {\n                errorCatcher && errorCatcher(e);\n            }\n            finally {\n                switchToZone(outerScope, false);\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n    }\n    var task = { awaits: 0, echoes: 0, id: 0 };\n    var taskCounter = 0;\n    var zoneStack = [];\n    var zoneEchoes = 0;\n    var totalEchoes = 0;\n    var zone_id_counter = 0;\n    function newScope(fn, props, a1, a2) {\n        var parent = PSD, psd = Object.create(parent);\n        psd.parent = parent;\n        psd.ref = 0;\n        psd.global = false;\n        psd.id = ++zone_id_counter;\n        globalPSD.env;\n        psd.env = patchGlobalPromise ? {\n            Promise: DexiePromise,\n            PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n            all: DexiePromise.all,\n            race: DexiePromise.race,\n            allSettled: DexiePromise.allSettled,\n            any: DexiePromise.any,\n            resolve: DexiePromise.resolve,\n            reject: DexiePromise.reject,\n        } : {};\n        if (props)\n            extend(psd, props);\n        ++parent.ref;\n        psd.finalize = function () {\n            --this.parent.ref || this.parent.finalize();\n        };\n        var rv = usePSD(psd, fn, a1, a2);\n        if (psd.ref === 0)\n            psd.finalize();\n        return rv;\n    }\n    function incrementExpectedAwaits() {\n        if (!task.id)\n            task.id = ++taskCounter;\n        ++task.awaits;\n        task.echoes += ZONE_ECHO_LIMIT;\n        return task.id;\n    }\n    function decrementExpectedAwaits() {\n        if (!task.awaits)\n            return false;\n        if (--task.awaits === 0)\n            task.id = 0;\n        task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n        return true;\n    }\n    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n        incrementExpectedAwaits = decrementExpectedAwaits = nop;\n    }\n    function onPossibleParallellAsync(possiblePromise) {\n        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n            incrementExpectedAwaits();\n            return possiblePromise.then(function (x) {\n                decrementExpectedAwaits();\n                return x;\n            }, function (e) {\n                decrementExpectedAwaits();\n                return rejection(e);\n            });\n        }\n        return possiblePromise;\n    }\n    function zoneEnterEcho(targetZone) {\n        ++totalEchoes;\n        if (!task.echoes || --task.echoes === 0) {\n            task.echoes = task.awaits = task.id = 0;\n        }\n        zoneStack.push(PSD);\n        switchToZone(targetZone, true);\n    }\n    function zoneLeaveEcho() {\n        var zone = zoneStack[zoneStack.length - 1];\n        zoneStack.pop();\n        switchToZone(zone, false);\n    }\n    function switchToZone(targetZone, bEnteringZone) {\n        var currentZone = PSD;\n        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n            queueMicrotask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n        }\n        if (targetZone === PSD)\n            return;\n        PSD = targetZone;\n        if (currentZone === globalPSD)\n            globalPSD.env = snapShot();\n        if (patchGlobalPromise) {\n            var GlobalPromise = globalPSD.env.Promise;\n            var targetEnv = targetZone.env;\n            if (currentZone.global || targetZone.global) {\n                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n                GlobalPromise.all = targetEnv.all;\n                GlobalPromise.race = targetEnv.race;\n                GlobalPromise.resolve = targetEnv.resolve;\n                GlobalPromise.reject = targetEnv.reject;\n                if (targetEnv.allSettled)\n                    GlobalPromise.allSettled = targetEnv.allSettled;\n                if (targetEnv.any)\n                    GlobalPromise.any = targetEnv.any;\n            }\n        }\n    }\n    function snapShot() {\n        var GlobalPromise = _global.Promise;\n        return patchGlobalPromise ? {\n            Promise: GlobalPromise,\n            PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n            all: GlobalPromise.all,\n            race: GlobalPromise.race,\n            allSettled: GlobalPromise.allSettled,\n            any: GlobalPromise.any,\n            resolve: GlobalPromise.resolve,\n            reject: GlobalPromise.reject,\n        } : {};\n    }\n    function usePSD(psd, fn, a1, a2, a3) {\n        var outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn(a1, a2, a3);\n        }\n        finally {\n            switchToZone(outerScope, false);\n        }\n    }\n    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n        return typeof fn !== 'function' ? fn : function () {\n            var outerZone = PSD;\n            if (possibleAwait)\n                incrementExpectedAwaits();\n            switchToZone(zone, true);\n            try {\n                return fn.apply(this, arguments);\n            }\n            finally {\n                switchToZone(outerZone, false);\n                if (cleanup)\n                    queueMicrotask(decrementExpectedAwaits);\n            }\n        };\n    }\n    function execInGlobalContext(cb) {\n        if (Promise === NativePromise && task.echoes === 0) {\n            if (zoneEchoes === 0) {\n                cb();\n            }\n            else {\n                enqueueNativeMicroTask(cb);\n            }\n        }\n        else {\n            setTimeout(cb, 0);\n        }\n    }\n    var rejection = DexiePromise.reject;\n\n    function tempTransaction(db, mode, storeNames, fn) {\n        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n            if (db._state.openComplete) {\n                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n            }\n            if (!db._state.isBeingOpened) {\n                if (!db._state.autoOpen)\n                    return rejection(new exceptions.DatabaseClosed());\n                db.open().catch(nop);\n            }\n            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n        }\n        else {\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n            try {\n                trans.create();\n                db._state.PR1398_maxLoop = 3;\n            }\n            catch (ex) {\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                    console.warn('Dexie: Need to reopen db');\n                    db.close({ disableAutoOpen: false });\n                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });\n                }\n                return rejection(ex);\n            }\n            return trans._promise(mode, function (resolve, reject) {\n                return newScope(function () {\n                    PSD.trans = trans;\n                    return fn(resolve, reject, trans);\n                });\n            }).then(function (result) {\n                if (mode === 'readwrite')\n                    try {\n                        trans.idbtrans.commit();\n                    }\n                    catch (_a) { }\n                return mode === 'readonly' ? result : trans._completion.then(function () { return result; });\n            });\n        }\n    }\n\n    var DEXIE_VERSION = '4.2.1';\n    var maxString = String.fromCharCode(65535);\n    var minKey = -Infinity;\n    var INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\n    var STRING_EXPECTED = \"String expected.\";\n    var connections = [];\n    var DBNAMES_DB = '__dbnames';\n    var READONLY = 'readonly';\n    var READWRITE = 'readwrite';\n\n    function combine(filter1, filter2) {\n        return filter1 ?\n            filter2 ?\n                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n                filter1 :\n            filter2;\n    }\n\n    var AnyRange = {\n        type: 3 ,\n        lower: -Infinity,\n        lowerOpen: false,\n        upper: [[]],\n        upperOpen: false\n    };\n\n    function workaroundForUndefinedPrimKey(keyPath) {\n        return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n            ? function (obj) {\n                if (obj[keyPath] === undefined && (keyPath in obj)) {\n                    obj = deepClone(obj);\n                    delete obj[keyPath];\n                }\n                return obj;\n            }\n            : function (obj) { return obj; };\n    }\n\n    function Entity() {\n        throw exceptions.Type(\"Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.\");\n    }\n\n    function cmp(a, b) {\n        try {\n            var ta = type(a);\n            var tb = type(b);\n            if (ta !== tb) {\n                if (ta === 'Array')\n                    return 1;\n                if (tb === 'Array')\n                    return -1;\n                if (ta === 'binary')\n                    return 1;\n                if (tb === 'binary')\n                    return -1;\n                if (ta === 'string')\n                    return 1;\n                if (tb === 'string')\n                    return -1;\n                if (ta === 'Date')\n                    return 1;\n                if (tb !== 'Date')\n                    return NaN;\n                return -1;\n            }\n            switch (ta) {\n                case 'number':\n                case 'Date':\n                case 'string':\n                    return a > b ? 1 : a < b ? -1 : 0;\n                case 'binary': {\n                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n                }\n                case 'Array':\n                    return compareArrays(a, b);\n            }\n        }\n        catch (_a) { }\n        return NaN;\n    }\n    function compareArrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            var res = cmp(a[i], b[i]);\n            if (res !== 0)\n                return res;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function compareUint8Arrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            if (a[i] !== b[i])\n                return a[i] < b[i] ? -1 : 1;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function type(x) {\n        var t = typeof x;\n        if (t !== 'object')\n            return t;\n        if (ArrayBuffer.isView(x))\n            return 'binary';\n        var tsTag = toStringTag(x);\n        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n    }\n    function getUint8Array(a) {\n        if (a instanceof Uint8Array)\n            return a;\n        if (ArrayBuffer.isView(a))\n            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n        return new Uint8Array(a);\n    }\n\n    function builtInDeletionTrigger(table, keys, res) {\n        var yProps = table.schema.yProps;\n        if (!yProps)\n            return res;\n        if (keys && res.numFailures > 0)\n            keys = keys.filter(function (_, i) { return !res.failures[i]; });\n        return Promise.all(yProps.map(function (_a) {\n            var updatesTable = _a.updatesTable;\n            return keys\n                ? table.db.table(updatesTable).where('k').anyOf(keys).delete()\n                : table.db.table(updatesTable).clear();\n        })).then(function () { return res; });\n    }\n\n    var PropModification =  (function () {\n        function PropModification(spec) {\n            this[\"@@propmod\"] = spec;\n        }\n        PropModification.prototype.execute = function (value) {\n            var _a;\n            var spec = this[\"@@propmod\"];\n            if (spec.add !== undefined) {\n                var term = spec.add;\n                if (isArray(term)) {\n                    return __spreadArray(__spreadArray([], (isArray(value) ? value : []), true), term, true).sort();\n                }\n                if (typeof term === 'number')\n                    return (Number(value) || 0) + term;\n                if (typeof term === 'bigint') {\n                    try {\n                        return BigInt(value) + term;\n                    }\n                    catch (_b) {\n                        return BigInt(0) + term;\n                    }\n                }\n                throw new TypeError(\"Invalid term \".concat(term));\n            }\n            if (spec.remove !== undefined) {\n                var subtrahend_1 = spec.remove;\n                if (isArray(subtrahend_1)) {\n                    return isArray(value) ? value.filter(function (item) { return !subtrahend_1.includes(item); }).sort() : [];\n                }\n                if (typeof subtrahend_1 === 'number')\n                    return Number(value) - subtrahend_1;\n                if (typeof subtrahend_1 === 'bigint') {\n                    try {\n                        return BigInt(value) - subtrahend_1;\n                    }\n                    catch (_c) {\n                        return BigInt(0) - subtrahend_1;\n                    }\n                }\n                throw new TypeError(\"Invalid subtrahend \".concat(subtrahend_1));\n            }\n            var prefixToReplace = (_a = spec.replacePrefix) === null || _a === void 0 ? void 0 : _a[0];\n            if (prefixToReplace && typeof value === 'string' && value.startsWith(prefixToReplace)) {\n                return spec.replacePrefix[1] + value.substring(prefixToReplace.length);\n            }\n            return value;\n        };\n        return PropModification;\n    }());\n\n    function applyUpdateSpec(obj, changes) {\n        var keyPaths = keys(changes);\n        var numKeys = keyPaths.length;\n        var anythingModified = false;\n        for (var i = 0; i < numKeys; ++i) {\n            var keyPath = keyPaths[i];\n            var value = changes[keyPath];\n            var origValue = getByKeyPath(obj, keyPath);\n            if (value instanceof PropModification) {\n                setByKeyPath(obj, keyPath, value.execute(origValue));\n                anythingModified = true;\n            }\n            else if (origValue !== value) {\n                setByKeyPath(obj, keyPath, value);\n                anythingModified = true;\n            }\n        }\n        return anythingModified;\n    }\n\n    var Table =  (function () {\n        function Table() {\n        }\n        Table.prototype._trans = function (mode, fn, writeLocked) {\n            var trans = this._tx || PSD.trans;\n            var tableName = this.name;\n            var task = debug && typeof console !== 'undefined' && console.createTask && console.createTask(\"Dexie: \".concat(mode === 'readonly' ? 'read' : 'write', \" \").concat(this.name));\n            function checkTableInTransaction(resolve, reject, trans) {\n                if (!trans.schema[tableName])\n                    throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n                return fn(trans.idbtrans, trans);\n            }\n            var wasRootExec = beginMicroTickScope();\n            try {\n                var p = trans && trans.db._novip === this.db._novip ?\n                    trans === PSD.trans ?\n                        trans._promise(mode, checkTableInTransaction, writeLocked) :\n                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n                if (task) {\n                    p._consoleTask = task;\n                    p = p.catch(function (err) {\n                        console.trace(err);\n                        return rejection(err);\n                    });\n                }\n                return p;\n            }\n            finally {\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n        Table.prototype.get = function (keyOrCrit, cb) {\n            var _this = this;\n            if (keyOrCrit && keyOrCrit.constructor === Object)\n                return this.where(keyOrCrit).first(cb);\n            if (keyOrCrit == null)\n                return rejection(new exceptions.Type(\"Invalid argument to Table.get()\"));\n            return this._trans('readonly', function (trans) {\n                return _this.core.get({ trans: trans, key: keyOrCrit })\n                    .then(function (res) { return _this.hook.reading.fire(res); });\n            }).then(cb);\n        };\n        Table.prototype.where = function (indexOrCrit) {\n            if (typeof indexOrCrit === 'string')\n                return new this.db.WhereClause(this, indexOrCrit);\n            if (isArray(indexOrCrit))\n                return new this.db.WhereClause(this, \"[\".concat(indexOrCrit.join('+'), \"]\"));\n            var keyPaths = keys(indexOrCrit);\n            if (keyPaths.length === 1)\n                return this\n                    .where(keyPaths[0])\n                    .equals(indexOrCrit[keyPaths[0]]);\n            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n                if (ix.compound &&\n                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; })) {\n                    for (var i = 0; i < keyPaths.length; ++i) {\n                        if (keyPaths.indexOf(ix.keyPath[i]) === -1)\n                            return false;\n                    }\n                    return true;\n                }\n                return false;\n            }).sort(function (a, b) { return a.keyPath.length - b.keyPath.length; })[0];\n            if (compoundIndex && this.db._maxKey !== maxString) {\n                var keyPathsInValidOrder = compoundIndex.keyPath.slice(0, keyPaths.length);\n                return this\n                    .where(keyPathsInValidOrder)\n                    .equals(keyPathsInValidOrder.map(function (kp) { return indexOrCrit[kp]; }));\n            }\n            if (!compoundIndex && debug)\n                console.warn(\"The query \".concat(JSON.stringify(indexOrCrit), \" on \").concat(this.name, \" would benefit from a \") +\n                    \"compound index [\".concat(keyPaths.join('+'), \"]\"));\n            var idxByName = this.schema.idxByName;\n            function equals(a, b) {\n                return cmp(a, b) === 0;\n            }\n            var _a = keyPaths.reduce(function (_a, keyPath) {\n                var prevIndex = _a[0], prevFilterFn = _a[1];\n                var index = idxByName[keyPath];\n                var value = indexOrCrit[keyPath];\n                return [\n                    prevIndex || index,\n                    prevIndex || !index ?\n                        combine(prevFilterFn, index && index.multi ?\n                            function (x) {\n                                var prop = getByKeyPath(x, keyPath);\n                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                        : prevFilterFn\n                ];\n            }, [null, null]), idx = _a[0], filterFunction = _a[1];\n            return idx ?\n                this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                    .filter(filterFunction) :\n                compoundIndex ?\n                    this.filter(filterFunction) :\n                    this.where(keyPaths).equals('');\n        };\n        Table.prototype.filter = function (filterFunction) {\n            return this.toCollection().and(filterFunction);\n        };\n        Table.prototype.count = function (thenShortcut) {\n            return this.toCollection().count(thenShortcut);\n        };\n        Table.prototype.offset = function (offset) {\n            return this.toCollection().offset(offset);\n        };\n        Table.prototype.limit = function (numRows) {\n            return this.toCollection().limit(numRows);\n        };\n        Table.prototype.each = function (callback) {\n            return this.toCollection().each(callback);\n        };\n        Table.prototype.toArray = function (thenShortcut) {\n            return this.toCollection().toArray(thenShortcut);\n        };\n        Table.prototype.toCollection = function () {\n            return new this.db.Collection(new this.db.WhereClause(this));\n        };\n        Table.prototype.orderBy = function (index) {\n            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n                \"[\".concat(index.join('+'), \"]\") :\n                index));\n        };\n        Table.prototype.reverse = function () {\n            return this.toCollection().reverse();\n        };\n        Table.prototype.mapToClass = function (constructor) {\n            var _a = this, db = _a.db, tableName = _a.name;\n            this.schema.mappedClass = constructor;\n            if (constructor.prototype instanceof Entity) {\n                constructor =  (function (_super) {\n                    __extends(class_1, _super);\n                    function class_1() {\n                        return _super !== null && _super.apply(this, arguments) || this;\n                    }\n                    Object.defineProperty(class_1.prototype, \"db\", {\n                        get: function () { return db; },\n                        enumerable: false,\n                        configurable: true\n                    });\n                    class_1.prototype.table = function () { return tableName; };\n                    return class_1;\n                }(constructor));\n            }\n            var inheritedProps = new Set();\n            for (var proto = constructor.prototype; proto; proto = getProto(proto)) {\n                Object.getOwnPropertyNames(proto).forEach(function (propName) { return inheritedProps.add(propName); });\n            }\n            var readHook = function (obj) {\n                if (!obj)\n                    return obj;\n                var res = Object.create(constructor.prototype);\n                for (var m in obj)\n                    if (!inheritedProps.has(m))\n                        try {\n                            res[m] = obj[m];\n                        }\n                        catch (_) { }\n                return res;\n            };\n            if (this.schema.readHook) {\n                this.hook.reading.unsubscribe(this.schema.readHook);\n            }\n            this.schema.readHook = readHook;\n            this.hook(\"reading\", readHook);\n            return constructor;\n        };\n        Table.prototype.defineClass = function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return this.mapToClass(Class);\n        };\n        Table.prototype.add = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.upsert = function (key, modifications) {\n            var _this = this;\n            var keyPath = this.schema.primKey.keyPath;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.get({ trans: trans, key: key }).then(function (existing) {\n                    var obj = existing !== null && existing !== void 0 ? existing : {};\n                    applyUpdateSpec(obj, modifications);\n                    if (keyPath)\n                        setByKeyPath(obj, keyPath, key);\n                    return _this.core.mutate({\n                        trans: trans,\n                        type: 'put',\n                        values: [obj],\n                        keys: [key],\n                        upsert: true,\n                        updates: { keys: [key], changeSpecs: [modifications] }\n                    }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : !!existing; });\n                });\n            });\n        };\n        Table.prototype.update = function (keyOrObject, modifications) {\n            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n                if (key === undefined)\n                    return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n                return this.where(\":id\").equals(key).modify(modifications);\n            }\n            else {\n                return this.where(\":id\").equals(keyOrObject).modify(modifications);\n            }\n        };\n        Table.prototype.put = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.delete = function (key) {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] })\n                .then(function (res) { return builtInDeletionTrigger(_this, [key], res); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; }); });\n        };\n        Table.prototype.clear = function () {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange })\n                .then(function (res) { return builtInDeletionTrigger(_this, null, res); }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.bulkGet = function (keys) {\n            var _this = this;\n            return this._trans('readonly', function (trans) {\n                return _this.core.getMany({\n                    keys: keys,\n                    trans: trans\n                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n            });\n        };\n        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToAdd = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(\"\".concat(_this.name, \".bulkAdd(): \").concat(numFailures, \" of \").concat(numObjects, \" operations failed\"), failures);\n                });\n            });\n        };\n        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToPut = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(\"\".concat(_this.name, \".bulkPut(): \").concat(numFailures, \" of \").concat(numObjects, \" operations failed\"), failures);\n                });\n            });\n        };\n        Table.prototype.bulkUpdate = function (keysAndChanges) {\n            var _this = this;\n            var coreTable = this.core;\n            var keys = keysAndChanges.map(function (entry) { return entry.key; });\n            var changeSpecs = keysAndChanges.map(function (entry) { return entry.changes; });\n            var offsetMap = [];\n            return this._trans('readwrite', function (trans) {\n                return coreTable.getMany({ trans: trans, keys: keys, cache: 'clone' }).then(function (objs) {\n                    var resultKeys = [];\n                    var resultObjs = [];\n                    keysAndChanges.forEach(function (_a, idx) {\n                        var key = _a.key, changes = _a.changes;\n                        var obj = objs[idx];\n                        if (obj) {\n                            for (var _i = 0, _b = Object.keys(changes); _i < _b.length; _i++) {\n                                var keyPath = _b[_i];\n                                var value = changes[keyPath];\n                                if (keyPath === _this.schema.primKey.keyPath) {\n                                    if (cmp(value, key) !== 0) {\n                                        throw new exceptions.Constraint(\"Cannot update primary key in bulkUpdate()\");\n                                    }\n                                }\n                                else {\n                                    setByKeyPath(obj, keyPath, value);\n                                }\n                            }\n                            offsetMap.push(idx);\n                            resultKeys.push(key);\n                            resultObjs.push(obj);\n                        }\n                    });\n                    var numEntries = resultKeys.length;\n                    return coreTable\n                        .mutate({\n                        trans: trans,\n                        type: 'put',\n                        keys: resultKeys,\n                        values: resultObjs,\n                        updates: {\n                            keys: keys,\n                            changeSpecs: changeSpecs\n                        }\n                    })\n                        .then(function (_a) {\n                        var numFailures = _a.numFailures, failures = _a.failures;\n                        if (numFailures === 0)\n                            return numEntries;\n                        for (var _i = 0, _b = Object.keys(failures); _i < _b.length; _i++) {\n                            var offset = _b[_i];\n                            var mappedOffset = offsetMap[Number(offset)];\n                            if (mappedOffset != null) {\n                                var failure = failures[offset];\n                                delete failures[offset];\n                                failures[mappedOffset] = failure;\n                            }\n                        }\n                        throw new BulkError(\"\".concat(_this.name, \".bulkUpdate(): \").concat(numFailures, \" of \").concat(numEntries, \" operations failed\"), failures);\n                    });\n                });\n            });\n        };\n        Table.prototype.bulkDelete = function (keys) {\n            var _this = this;\n            var numKeys = keys.length;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys })\n                    .then(function (res) { return builtInDeletionTrigger(_this, keys, res); });\n            }).then(function (_a) {\n                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n                if (numFailures === 0)\n                    return lastResult;\n                throw new BulkError(\"\".concat(_this.name, \".bulkDelete(): \").concat(numFailures, \" of \").concat(numKeys, \" operations failed\"), failures);\n            });\n        };\n        return Table;\n    }());\n\n    function Events(ctx) {\n        var evs = {};\n        var rv = function (eventName, subscriber) {\n            if (subscriber) {\n                var i = arguments.length, args = new Array(i - 1);\n                while (--i)\n                    args[i - 1] = arguments[i];\n                evs[eventName].subscribe.apply(null, args);\n                return ctx;\n            }\n            else if (typeof (eventName) === 'string') {\n                return evs[eventName];\n            }\n        };\n        rv.addEventType = add;\n        for (var i = 1, l = arguments.length; i < l; ++i) {\n            add(arguments[i]);\n        }\n        return rv;\n        function add(eventName, chainFunction, defaultFunction) {\n            if (typeof eventName === 'object')\n                return addConfiguredEvents(eventName);\n            if (!chainFunction)\n                chainFunction = reverseStoppableEventChain;\n            if (!defaultFunction)\n                defaultFunction = nop;\n            var context = {\n                subscribers: [],\n                fire: defaultFunction,\n                subscribe: function (cb) {\n                    if (context.subscribers.indexOf(cb) === -1) {\n                        context.subscribers.push(cb);\n                        context.fire = chainFunction(context.fire, cb);\n                    }\n                },\n                unsubscribe: function (cb) {\n                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n                }\n            };\n            evs[eventName] = rv[eventName] = context;\n            return context;\n        }\n        function addConfiguredEvents(cfg) {\n            keys(cfg).forEach(function (eventName) {\n                var args = cfg[eventName];\n                if (isArray(args)) {\n                    add(eventName, cfg[eventName][0], cfg[eventName][1]);\n                }\n                else if (args === 'asap') {\n                    var context = add(eventName, mirror, function fire() {\n                        var i = arguments.length, args = new Array(i);\n                        while (i--)\n                            args[i] = arguments[i];\n                        context.subscribers.forEach(function (fn) {\n                            asap$1(function fireEvent() {\n                                fn.apply(null, args);\n                            });\n                        });\n                    });\n                }\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid event config\");\n            });\n        }\n    }\n\n    function makeClassConstructor(prototype, constructor) {\n        derive(constructor).from({ prototype: prototype });\n        return constructor;\n    }\n\n    function createTableConstructor(db) {\n        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n            this.db = db;\n            this._tx = trans;\n            this.name = name;\n            this.schema = tableSchema;\n            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n                \"creating\": [hookCreatingChain, nop],\n                \"reading\": [pureFunctionChain, mirror],\n                \"updating\": [hookUpdatingChain, nop],\n                \"deleting\": [hookDeletingChain, nop]\n            });\n        });\n    }\n\n    function isPlainKeyRange(ctx, ignoreLimitFilter) {\n        return !(ctx.filter || ctx.algorithm || ctx.or) &&\n            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n    }\n    function addFilter(ctx, fn) {\n        ctx.filter = combine(ctx.filter, fn);\n    }\n    function addReplayFilter(ctx, factory, isLimitFilter) {\n        var curr = ctx.replayFilter;\n        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n        ctx.justLimit = isLimitFilter && !curr;\n    }\n    function addMatchFilter(ctx, fn) {\n        ctx.isMatch = combine(ctx.isMatch, fn);\n    }\n    function getIndexOrStore(ctx, coreSchema) {\n        if (ctx.isPrimKey)\n            return coreSchema.primaryKey;\n        var index = coreSchema.getIndexByKeyPath(ctx.index);\n        if (!index)\n            throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n        return index;\n    }\n    function openCursor(ctx, coreTable, trans) {\n        var index = getIndexOrStore(ctx, coreTable.schema);\n        return coreTable.openCursor({\n            trans: trans,\n            values: !ctx.keysOnly,\n            reverse: ctx.dir === 'prev',\n            unique: !!ctx.unique,\n            query: {\n                index: index,\n                range: ctx.range\n            }\n        });\n    }\n    function iter(ctx, fn, coreTrans, coreTable) {\n        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n        if (!ctx.or) {\n            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n        }\n        else {\n            var set_1 = {};\n            var union = function (item, cursor, advance) {\n                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                    var primaryKey = cursor.primaryKey;\n                    var key = '' + primaryKey;\n                    if (key === '[object ArrayBuffer]')\n                        key = '' + new Uint8Array(primaryKey);\n                    if (!hasOwn(set_1, key)) {\n                        set_1[key] = true;\n                        fn(item, cursor, advance);\n                    }\n                }\n            };\n            return Promise.all([\n                ctx.or._iterate(union, coreTrans),\n                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n            ]);\n        }\n    }\n    function iterate(cursorPromise, filter, fn, valueMapper) {\n        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n        var wrappedFn = wrap(mappedFn);\n        return cursorPromise.then(function (cursor) {\n            if (cursor) {\n                return cursor.start(function () {\n                    var c = function () { return cursor.continue(); };\n                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                    c();\n                });\n            }\n        });\n    }\n\n    var Collection =  (function () {\n        function Collection() {\n        }\n        Collection.prototype._read = function (fn, cb) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readonly', fn).then(cb);\n        };\n        Collection.prototype._write = function (fn) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readwrite', fn, \"locked\");\n        };\n        Collection.prototype._addAlgorithm = function (fn) {\n            var ctx = this._ctx;\n            ctx.algorithm = combine(ctx.algorithm, fn);\n        };\n        Collection.prototype._iterate = function (fn, coreTrans) {\n            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n        };\n        Collection.prototype.clone = function (props) {\n            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n            if (props)\n                extend(ctx, props);\n            rv._ctx = ctx;\n            return rv;\n        };\n        Collection.prototype.raw = function () {\n            this._ctx.valueMapper = null;\n            return this;\n        };\n        Collection.prototype.each = function (fn) {\n            var ctx = this._ctx;\n            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n        };\n        Collection.prototype.count = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                var coreTable = ctx.table.core;\n                if (isPlainKeyRange(ctx, true)) {\n                    return coreTable.count({\n                        trans: trans,\n                        query: {\n                            index: getIndexOrStore(ctx, coreTable.schema),\n                            range: ctx.range\n                        }\n                    }).then(function (count) { return Math.min(count, ctx.limit); });\n                }\n                else {\n                    var count = 0;\n                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                        .then(function () { return count; });\n                }\n            }).then(cb);\n        };\n        Collection.prototype.sortBy = function (keyPath, cb) {\n            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n            function getval(obj, i) {\n                if (i)\n                    return getval(obj[parts[i]], i - 1);\n                return obj[lastPart];\n            }\n            var order = this._ctx.dir === \"next\" ? 1 : -1;\n            function sorter(a, b) {\n                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n                return cmp(aVal, bVal) * order;\n            }\n            return this.toArray(function (a) {\n                return a.sort(sorter);\n            }).then(cb);\n        };\n        Collection.prototype.toArray = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                    var valueMapper_1 = ctx.valueMapper;\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        limit: ctx.limit,\n                        values: true,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    }).then(function (_a) {\n                        var result = _a.result;\n                        return valueMapper_1 ? result.map(valueMapper_1) : result;\n                    });\n                }\n                else {\n                    var a_1 = [];\n                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n                }\n            }, cb);\n        };\n        Collection.prototype.offset = function (offset) {\n            var ctx = this._ctx;\n            if (offset <= 0)\n                return this;\n            ctx.offset += offset;\n            if (isPlainKeyRange(ctx)) {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function (cursor, advance) {\n                        if (offsetLeft === 0)\n                            return true;\n                        if (offsetLeft === 1) {\n                            --offsetLeft;\n                            return false;\n                        }\n                        advance(function () {\n                            cursor.advance(offsetLeft);\n                            offsetLeft = 0;\n                        });\n                        return false;\n                    };\n                });\n            }\n            else {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function () { return (--offsetLeft < 0); };\n                });\n            }\n            return this;\n        };\n        Collection.prototype.limit = function (numRows) {\n            this._ctx.limit = Math.min(this._ctx.limit, numRows);\n            addReplayFilter(this._ctx, function () {\n                var rowsLeft = numRows;\n                return function (cursor, advance, resolve) {\n                    if (--rowsLeft <= 0)\n                        advance(resolve);\n                    return rowsLeft >= 0;\n                };\n            }, true);\n            return this;\n        };\n        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n            addFilter(this._ctx, function (cursor, advance, resolve) {\n                if (filterFunction(cursor.value)) {\n                    advance(resolve);\n                    return bIncludeStopEntry;\n                }\n                else {\n                    return true;\n                }\n            });\n            return this;\n        };\n        Collection.prototype.first = function (cb) {\n            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.last = function (cb) {\n            return this.reverse().first(cb);\n        };\n        Collection.prototype.filter = function (filterFunction) {\n            addFilter(this._ctx, function (cursor) {\n                return filterFunction(cursor.value);\n            });\n            addMatchFilter(this._ctx, filterFunction);\n            return this;\n        };\n        Collection.prototype.and = function (filter) {\n            return this.filter(filter);\n        };\n        Collection.prototype.or = function (indexName) {\n            return new this.db.WhereClause(this._ctx.table, indexName, this);\n        };\n        Collection.prototype.reverse = function () {\n            this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n            if (this._ondirectionchange)\n                this._ondirectionchange(this._ctx.dir);\n            return this;\n        };\n        Collection.prototype.desc = function () {\n            return this.reverse();\n        };\n        Collection.prototype.eachKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n        };\n        Collection.prototype.eachUniqueKey = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.eachKey(cb);\n        };\n        Collection.prototype.eachPrimaryKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n        };\n        Collection.prototype.keys = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.key);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.primaryKeys = function (cb) {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                return this._read(function (trans) {\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        values: false,\n                        limit: ctx.limit,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    });\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return result;\n                }).then(cb);\n            }\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.primaryKey);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.uniqueKeys = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.keys(cb);\n        };\n        Collection.prototype.firstKey = function (cb) {\n            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.lastKey = function (cb) {\n            return this.reverse().firstKey(cb);\n        };\n        Collection.prototype.distinct = function () {\n            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n            if (!idx || !idx.multi)\n                return this;\n            var set = {};\n            addFilter(this._ctx, function (cursor) {\n                var strKey = cursor.primaryKey.toString();\n                var found = hasOwn(set, strKey);\n                set[strKey] = true;\n                return !found;\n            });\n            return this;\n        };\n        Collection.prototype.modify = function (changes) {\n            var _this = this;\n            var ctx = this._ctx;\n            return this._write(function (trans) {\n                var modifyer;\n                if (typeof changes === 'function') {\n                    modifyer = changes;\n                }\n                else {\n                    modifyer = function (item) { return applyUpdateSpec(item, changes); };\n                }\n                var coreTable = ctx.table.core;\n                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n                var limit = 200;\n                var modifyChunkSize = _this.db._options.modifyChunkSize;\n                if (modifyChunkSize) {\n                    if (typeof modifyChunkSize == 'object') {\n                        limit = modifyChunkSize[coreTable.name] || modifyChunkSize['*'] || 200;\n                    }\n                    else {\n                        limit = modifyChunkSize;\n                    }\n                }\n                var totalFailures = [];\n                var successCount = 0;\n                var failedKeys = [];\n                var applyMutateResult = function (expectedCount, res) {\n                    var failures = res.failures, numFailures = res.numFailures;\n                    successCount += expectedCount - numFailures;\n                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n                        var pos = _a[_i];\n                        totalFailures.push(failures[pos]);\n                    }\n                };\n                var isUnconditionalDelete = changes === deleteCallback;\n                return _this.clone().primaryKeys().then(function (keys) {\n                    var criteria = isPlainKeyRange(ctx) &&\n                        ctx.limit === Infinity &&\n                        (typeof changes !== 'function' || isUnconditionalDelete) && {\n                        index: ctx.index,\n                        range: ctx.range\n                    };\n                    var nextChunk = function (offset) {\n                        var count = Math.min(limit, keys.length - offset);\n                        var keysInChunk = keys.slice(offset, offset + count);\n                        return (isUnconditionalDelete ? Promise.resolve([]) : coreTable.getMany({\n                            trans: trans,\n                            keys: keysInChunk,\n                            cache: \"immutable\"\n                        })).then(function (values) {\n                            var addValues = [];\n                            var putValues = [];\n                            var putKeys = outbound ? [] : null;\n                            var deleteKeys = isUnconditionalDelete ? keysInChunk : [];\n                            if (!isUnconditionalDelete)\n                                for (var i = 0; i < count; ++i) {\n                                    var origValue = values[i];\n                                    var ctx_1 = {\n                                        value: deepClone(origValue),\n                                        primKey: keys[offset + i]\n                                    };\n                                    if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                        if (ctx_1.value == null) {\n                                            deleteKeys.push(keys[offset + i]);\n                                        }\n                                        else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                            deleteKeys.push(keys[offset + i]);\n                                            addValues.push(ctx_1.value);\n                                        }\n                                        else {\n                                            putValues.push(ctx_1.value);\n                                            if (outbound)\n                                                putKeys.push(keys[offset + i]);\n                                        }\n                                    }\n                                }\n                            return Promise.resolve(addValues.length > 0 &&\n                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                    .then(function (res) {\n                                    for (var pos in res.failures) {\n                                        deleteKeys.splice(parseInt(pos), 1);\n                                    }\n                                    applyMutateResult(addValues.length, res);\n                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'put',\n                                    keys: putKeys,\n                                    values: putValues,\n                                    criteria: criteria,\n                                    changeSpec: typeof changes !== 'function'\n                                        && changes,\n                                    isAdditionalChunk: offset > 0\n                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && isUnconditionalDelete)) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'delete',\n                                    keys: deleteKeys,\n                                    criteria: criteria,\n                                    isAdditionalChunk: offset > 0\n                                }).then(function (res) { return builtInDeletionTrigger(ctx.table, deleteKeys, res); })\n                                    .then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                                return keys.length > offset + count && nextChunk(offset + limit);\n                            });\n                        });\n                    };\n                    return nextChunk(0).then(function () {\n                        if (totalFailures.length > 0)\n                            throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                        return keys.length;\n                    });\n                });\n            });\n        };\n        Collection.prototype.delete = function () {\n            var ctx = this._ctx, range = ctx.range;\n            if (isPlainKeyRange(ctx) &&\n                !ctx.table.schema.yProps &&\n                (ctx.isPrimKey || range.type === 3 ))\n             {\n                return this._write(function (trans) {\n                    var primaryKey = ctx.table.core.schema.primaryKey;\n                    var coreRange = range;\n                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                            .then(function (_a) {\n                            var failures = _a.failures, numFailures = _a.numFailures;\n                            if (numFailures)\n                                throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                            return count - numFailures;\n                        });\n                    });\n                });\n            }\n            return this.modify(deleteCallback);\n        };\n        return Collection;\n    }());\n    var deleteCallback = function (value, ctx) { return ctx.value = null; };\n\n    function createCollectionConstructor(db) {\n        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n            this.db = db;\n            var keyRange = AnyRange, error = null;\n            if (keyRangeGenerator)\n                try {\n                    keyRange = keyRangeGenerator();\n                }\n                catch (ex) {\n                    error = ex;\n                }\n            var whereCtx = whereClause._ctx;\n            var table = whereCtx.table;\n            var readingHook = table.hook.reading.fire;\n            this._ctx = {\n                table: table,\n                index: whereCtx.index,\n                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n                range: keyRange,\n                keysOnly: false,\n                dir: \"next\",\n                unique: \"\",\n                algorithm: null,\n                filter: null,\n                replayFilter: null,\n                justLimit: true,\n                isMatch: null,\n                offset: 0,\n                limit: Infinity,\n                error: error,\n                or: whereCtx.or,\n                valueMapper: readingHook !== mirror ? readingHook : null\n            };\n        });\n    }\n\n    function simpleCompare(a, b) {\n        return a < b ? -1 : a === b ? 0 : 1;\n    }\n    function simpleCompareReverse(a, b) {\n        return a > b ? -1 : a === b ? 0 : 1;\n    }\n\n    function fail(collectionOrWhereClause, err, T) {\n        var collection = collectionOrWhereClause instanceof WhereClause ?\n            new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n            collectionOrWhereClause;\n        collection._ctx.error = T ? new T(err) : new TypeError(err);\n        return collection;\n    }\n    function emptyCollection(whereClause) {\n        return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n    }\n    function upperFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toUpperCase(); } :\n            function (s) { return s.toLowerCase(); };\n    }\n    function lowerFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toLowerCase(); } :\n            function (s) { return s.toUpperCase(); };\n    }\n    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n        var length = Math.min(key.length, lowerNeedle.length);\n        var llp = -1;\n        for (var i = 0; i < length; ++i) {\n            var lwrKeyChar = lowerKey[i];\n            if (lwrKeyChar !== lowerNeedle[i]) {\n                if (cmp(key[i], upperNeedle[i]) < 0)\n                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n                if (cmp(key[i], lowerNeedle[i]) < 0)\n                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n                if (llp >= 0)\n                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n                return null;\n            }\n            if (cmp(key[i], lwrKeyChar) < 0)\n                llp = i;\n        }\n        if (length < lowerNeedle.length && dir === \"next\")\n            return key + upperNeedle.substr(key.length);\n        if (length < key.length && dir === \"prev\")\n            return key.substr(0, upperNeedle.length);\n        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n    }\n    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n        if (!needles.every(function (s) { return typeof s === 'string'; })) {\n            return fail(whereClause, STRING_EXPECTED);\n        }\n        function initDirection(dir) {\n            upper = upperFactory(dir);\n            lower = lowerFactory(dir);\n            compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n            var needleBounds = needles.map(function (needle) {\n                return { lower: lower(needle), upper: upper(needle) };\n            }).sort(function (a, b) {\n                return compare(a.lower, b.lower);\n            });\n            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n            direction = dir;\n            nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n        }\n        initDirection(\"next\");\n        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n        c._ondirectionchange = function (direction) {\n            initDirection(direction);\n        };\n        var firstPossibleNeedle = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            if (typeof key !== 'string')\n                return false;\n            var lowerKey = lower(key);\n            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n                return true;\n            }\n            else {\n                var lowestPossibleCasing = null;\n                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                    if (casing === null && lowestPossibleCasing === null)\n                        firstPossibleNeedle = i + 1;\n                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                        lowestPossibleCasing = casing;\n                    }\n                }\n                if (lowestPossibleCasing !== null) {\n                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n                }\n                else {\n                    advance(resolve);\n                }\n                return false;\n            }\n        });\n        return c;\n    }\n    function createRange(lower, upper, lowerOpen, upperOpen) {\n        return {\n            type: 2 ,\n            lower: lower,\n            upper: upper,\n            lowerOpen: lowerOpen,\n            upperOpen: upperOpen\n        };\n    }\n    function rangeEqual(value) {\n        return {\n            type: 1 ,\n            lower: value,\n            upper: value\n        };\n    }\n\n    var WhereClause =  (function () {\n        function WhereClause() {\n        }\n        Object.defineProperty(WhereClause.prototype, \"Collection\", {\n            get: function () {\n                return this._ctx.table.db.Collection;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n            includeLower = includeLower !== false;\n            includeUpper = includeUpper === true;\n            try {\n                if ((this._cmp(lower, upper) > 0) ||\n                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                    return emptyCollection(this);\n                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n        };\n        WhereClause.prototype.equals = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return rangeEqual(value); });\n        };\n        WhereClause.prototype.above = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, true); });\n        };\n        WhereClause.prototype.aboveOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, false); });\n        };\n        WhereClause.prototype.below = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n        };\n        WhereClause.prototype.belowOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value); });\n        };\n        WhereClause.prototype.startsWith = function (str) {\n            if (typeof str !== 'string')\n                return fail(this, STRING_EXPECTED);\n            return this.between(str, str + maxString, true, true);\n        };\n        WhereClause.prototype.startsWithIgnoreCase = function (str) {\n            if (str === \"\")\n                return this.startsWith(str);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n        };\n        WhereClause.prototype.equalsIgnoreCase = function (str) {\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n        };\n        WhereClause.prototype.anyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n        };\n        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n        };\n        WhereClause.prototype.anyOf = function () {\n            var _this = this;\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            var compare = this._cmp;\n            try {\n                set.sort(compare);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n            c._ondirectionchange = function (direction) {\n                compare = (direction === \"next\" ?\n                    _this._ascending :\n                    _this._descending);\n                set.sort(compare);\n            };\n            var i = 0;\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (compare(key, set[i]) > 0) {\n                    ++i;\n                    if (i === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (compare(key, set[i]) === 0) {\n                    return true;\n                }\n                else {\n                    advance(function () { cursor.continue(set[i]); });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.notEqual = function (value) {\n            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.noneOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return new this.Collection(this);\n            try {\n                set.sort(this._ascending);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var ranges = set.reduce(function (res, val) { return res ?\n                res.concat([[res[res.length - 1][1], val]]) :\n                [[minKey, val]]; }, null);\n            ranges.push([set[set.length - 1], this.db._maxKey]);\n            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.inAnyRange = function (ranges, options) {\n            var _this = this;\n            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n            if (ranges.length === 0)\n                return emptyCollection(this);\n            if (!ranges.every(function (range) {\n                return range[0] !== undefined &&\n                    range[1] !== undefined &&\n                    ascending(range[0], range[1]) <= 0;\n            })) {\n                return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n            }\n            var includeLowers = !options || options.includeLowers !== false;\n            var includeUppers = options && options.includeUppers === true;\n            function addRange(ranges, newRange) {\n                var i = 0, l = ranges.length;\n                for (; i < l; ++i) {\n                    var range = ranges[i];\n                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                        range[0] = min(range[0], newRange[0]);\n                        range[1] = max(range[1], newRange[1]);\n                        break;\n                    }\n                }\n                if (i === l)\n                    ranges.push(newRange);\n                return ranges;\n            }\n            var sortDirection = ascending;\n            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n            var set;\n            try {\n                set = ranges.reduce(addRange, []);\n                set.sort(rangeSorter);\n            }\n            catch (ex) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var rangePos = 0;\n            var keyIsBeyondCurrentEntry = includeUppers ?\n                function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n                function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n            var keyIsBeforeCurrentEntry = includeLowers ?\n                function (key) { return descending(key, set[rangePos][0]) > 0; } :\n                function (key) { return descending(key, set[rangePos][0]) >= 0; };\n            function keyWithinCurrentRange(key) {\n                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n            }\n            var checkKey = keyIsBeyondCurrentEntry;\n            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n            c._ondirectionchange = function (direction) {\n                if (direction === \"next\") {\n                    checkKey = keyIsBeyondCurrentEntry;\n                    sortDirection = ascending;\n                }\n                else {\n                    checkKey = keyIsBeforeCurrentEntry;\n                    sortDirection = descending;\n                }\n                set.sort(rangeSorter);\n            };\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (checkKey(key)) {\n                    ++rangePos;\n                    if (rangePos === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (keyWithinCurrentRange(key)) {\n                    return true;\n                }\n                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                    return false;\n                }\n                else {\n                    advance(function () {\n                        if (sortDirection === ascending)\n                            cursor.continue(set[rangePos][0]);\n                        else\n                            cursor.continue(set[rangePos][1]);\n                    });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.startsWithAnyOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (!set.every(function (s) { return typeof s === 'string'; })) {\n                return fail(this, \"startsWithAnyOf() only works with strings\");\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n        };\n        return WhereClause;\n    }());\n\n    function createWhereClauseConstructor(db) {\n        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n            this.db = db;\n            this._ctx = {\n                table: table,\n                index: index === \":id\" ? null : index,\n                or: orCollection\n            };\n            this._cmp = this._ascending = cmp;\n            this._descending = function (a, b) { return cmp(b, a); };\n            this._max = function (a, b) { return cmp(a, b) > 0 ? a : b; };\n            this._min = function (a, b) { return cmp(a, b) < 0 ? a : b; };\n            this._IDBKeyRange = db._deps.IDBKeyRange;\n            if (!this._IDBKeyRange)\n                throw new exceptions.MissingAPI();\n        });\n    }\n\n    function eventRejectHandler(reject) {\n        return wrap(function (event) {\n            preventDefault(event);\n            reject(event.target.error);\n            return false;\n        });\n    }\n    function preventDefault(event) {\n        if (event.stopPropagation)\n            event.stopPropagation();\n        if (event.preventDefault)\n            event.preventDefault();\n    }\n\n    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\n    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\n    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\n    var Transaction =  (function () {\n        function Transaction() {\n        }\n        Transaction.prototype._lock = function () {\n            assert(!PSD.global);\n            ++this._reculock;\n            if (this._reculock === 1 && !PSD.global)\n                PSD.lockOwnerFor = this;\n            return this;\n        };\n        Transaction.prototype._unlock = function () {\n            assert(!PSD.global);\n            if (--this._reculock === 0) {\n                if (!PSD.global)\n                    PSD.lockOwnerFor = null;\n                while (this._blockedFuncs.length > 0 && !this._locked()) {\n                    var fnAndPSD = this._blockedFuncs.shift();\n                    try {\n                        usePSD(fnAndPSD[1], fnAndPSD[0]);\n                    }\n                    catch (e) { }\n                }\n            }\n            return this;\n        };\n        Transaction.prototype._locked = function () {\n            return this._reculock && PSD.lockOwnerFor !== this;\n        };\n        Transaction.prototype.create = function (idbtrans) {\n            var _this = this;\n            if (!this.mode)\n                return this;\n            var idbdb = this.db.idbdb;\n            var dbOpenError = this.db._state.dbOpenError;\n            assert(!this.idbtrans);\n            if (!idbtrans && !idbdb) {\n                switch (dbOpenError && dbOpenError.name) {\n                    case \"DatabaseClosedError\":\n                        throw new exceptions.DatabaseClosed(dbOpenError);\n                    case \"MissingAPIError\":\n                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                    default:\n                        throw new exceptions.OpenFailed(dbOpenError);\n                }\n            }\n            if (!this.active)\n                throw new exceptions.TransactionInactive();\n            assert(this._completion._state === null);\n            idbtrans = this.idbtrans = idbtrans ||\n                (this.db.core\n                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n            idbtrans.onerror = wrap(function (ev) {\n                preventDefault(ev);\n                _this._reject(idbtrans.error);\n            });\n            idbtrans.onabort = wrap(function (ev) {\n                preventDefault(ev);\n                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n                _this.active = false;\n                _this.on(\"abort\").fire(ev);\n            });\n            idbtrans.oncomplete = wrap(function () {\n                _this.active = false;\n                _this._resolve();\n                if ('mutatedParts' in idbtrans) {\n                    globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n                }\n            });\n            return this;\n        };\n        Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n            var _this = this;\n            if (mode === 'readwrite' && this.mode !== 'readwrite')\n                return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n            if (!this.active)\n                return rejection(new exceptions.TransactionInactive());\n            if (this._locked()) {\n                return new DexiePromise(function (resolve, reject) {\n                    _this._blockedFuncs.push([function () {\n                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                        }, PSD]);\n                });\n            }\n            else if (bWriteLock) {\n                return newScope(function () {\n                    var p = new DexiePromise(function (resolve, reject) {\n                        _this._lock();\n                        var rv = fn(resolve, reject, _this);\n                        if (rv && rv.then)\n                            rv.then(resolve, reject);\n                    });\n                    p.finally(function () { return _this._unlock(); });\n                    p._lib = true;\n                    return p;\n                });\n            }\n            else {\n                var p = new DexiePromise(function (resolve, reject) {\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p._lib = true;\n                return p;\n            }\n        };\n        Transaction.prototype._root = function () {\n            return this.parent ? this.parent._root() : this;\n        };\n        Transaction.prototype.waitFor = function (promiseLike) {\n            var root = this._root();\n            var promise = DexiePromise.resolve(promiseLike);\n            if (root._waitingFor) {\n                root._waitingFor = root._waitingFor.then(function () { return promise; });\n            }\n            else {\n                root._waitingFor = promise;\n                root._waitingQueue = [];\n                var store = root.idbtrans.objectStore(root.storeNames[0]);\n                (function spin() {\n                    ++root._spinCount;\n                    while (root._waitingQueue.length)\n                        (root._waitingQueue.shift())();\n                    if (root._waitingFor)\n                        store.get(-Infinity).onsuccess = spin;\n                }());\n            }\n            var currentWaitPromise = root._waitingFor;\n            return new DexiePromise(function (resolve, reject) {\n                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                    if (root._waitingFor === currentWaitPromise) {\n                        root._waitingFor = null;\n                    }\n                });\n            });\n        };\n        Transaction.prototype.abort = function () {\n            if (this.active) {\n                this.active = false;\n                if (this.idbtrans)\n                    this.idbtrans.abort();\n                this._reject(new exceptions.Abort());\n            }\n        };\n        Transaction.prototype.table = function (tableName) {\n            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n            if (hasOwn(memoizedTables, tableName))\n                return memoizedTables[tableName];\n            var tableSchema = this.schema[tableName];\n            if (!tableSchema) {\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            }\n            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n            transactionBoundTable.core = this.db.core.table(tableName);\n            memoizedTables[tableName] = transactionBoundTable;\n            return transactionBoundTable;\n        };\n        return Transaction;\n    }());\n\n    function createTransactionConstructor(db) {\n        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n            var _this = this;\n            if (mode !== 'readonly')\n                storeNames.forEach(function (storeName) {\n                    var _a;\n                    var yProps = (_a = dbschema[storeName]) === null || _a === void 0 ? void 0 : _a.yProps;\n                    if (yProps)\n                        storeNames = storeNames.concat(yProps.map(function (p) { return p.updatesTable; }));\n                });\n            this.db = db;\n            this.mode = mode;\n            this.storeNames = storeNames;\n            this.schema = dbschema;\n            this.chromeTransactionDurability = chromeTransactionDurability;\n            this.idbtrans = null;\n            this.on = Events(this, \"complete\", \"error\", \"abort\");\n            this.parent = parent || null;\n            this.active = true;\n            this._reculock = 0;\n            this._blockedFuncs = [];\n            this._resolve = null;\n            this._reject = null;\n            this._waitingFor = null;\n            this._waitingQueue = null;\n            this._spinCount = 0;\n            this._completion = new DexiePromise(function (resolve, reject) {\n                _this._resolve = resolve;\n                _this._reject = reject;\n            });\n            this._completion.then(function () {\n                _this.active = false;\n                _this.on.complete.fire();\n            }, function (e) {\n                var wasActive = _this.active;\n                _this.active = false;\n                _this.on.error.fire(e);\n                _this.parent ?\n                    _this.parent._reject(e) :\n                    wasActive && _this.idbtrans && _this.idbtrans.abort();\n                return rejection(e);\n            });\n        });\n    }\n\n    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey, type) {\n        return {\n            name: name,\n            keyPath: keyPath,\n            unique: unique,\n            multi: multi,\n            auto: auto,\n            compound: compound,\n            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath),\n            type: type\n        };\n    }\n    function nameFromKeyPath(keyPath) {\n        return typeof keyPath === 'string' ?\n            keyPath :\n            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n    }\n\n    function createTableSchema(name, primKey, indexes) {\n        return {\n            name: name,\n            primKey: primKey,\n            indexes: indexes,\n            mappedClass: null,\n            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; }),\n        };\n    }\n\n    function safariMultiStoreFix(storeNames) {\n        return storeNames.length === 1 ? storeNames[0] : storeNames;\n    }\n    var getMaxKey = function (IdbKeyRange) {\n        try {\n            IdbKeyRange.only([[]]);\n            getMaxKey = function () { return [[]]; };\n            return [[]];\n        }\n        catch (e) {\n            getMaxKey = function () { return maxString; };\n            return maxString;\n        }\n    };\n\n    function getKeyExtractor(keyPath) {\n        if (keyPath == null) {\n            return function () { return undefined; };\n        }\n        else if (typeof keyPath === 'string') {\n            return getSinglePathKeyExtractor(keyPath);\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n    function getSinglePathKeyExtractor(keyPath) {\n        var split = keyPath.split('.');\n        if (split.length === 1) {\n            return function (obj) { return obj[keyPath]; };\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n\n    function arrayify(arrayLike) {\n        return [].slice.call(arrayLike);\n    }\n    var _id_counter = 0;\n    function getKeyPathAlias(keyPath) {\n        return keyPath == null ?\n            \":id\" :\n            typeof keyPath === 'string' ?\n                keyPath :\n                \"[\".concat(keyPath.join('+'), \"]\");\n    }\n    function createDBCore(db, IdbKeyRange, tmpTrans) {\n        function extractSchema(db, trans) {\n            var tables = arrayify(db.objectStoreNames);\n            return {\n                schema: {\n                    name: db.name,\n                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                        var compound = isArray(keyPath);\n                        var outbound = keyPath == null;\n                        var indexByKeyPath = {};\n                        var result = {\n                            name: store.name,\n                            primaryKey: {\n                                name: null,\n                                isPrimaryKey: true,\n                                outbound: outbound,\n                                compound: compound,\n                                keyPath: keyPath,\n                                autoIncrement: autoIncrement,\n                                unique: true,\n                                extractKey: getKeyExtractor(keyPath)\n                            },\n                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                                .map(function (index) {\n                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                                var compound = isArray(keyPath);\n                                var result = {\n                                    name: name,\n                                    compound: compound,\n                                    keyPath: keyPath,\n                                    unique: unique,\n                                    multiEntry: multiEntry,\n                                    extractKey: getKeyExtractor(keyPath)\n                                };\n                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                                return result;\n                            }),\n                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                        };\n                        indexByKeyPath[\":id\"] = result.primaryKey;\n                        if (keyPath != null) {\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                        }\n                        return result;\n                    })\n                },\n                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n            };\n        }\n        function makeIDBKeyRange(range) {\n            if (range.type === 3 )\n                return null;\n            if (range.type === 4 )\n                throw new Error(\"Cannot convert never type to IDBKeyRange\");\n            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n            var idbRange = lower === undefined ?\n                upper === undefined ?\n                    null :\n                    IdbKeyRange.upperBound(upper, !!upperOpen) :\n                upper === undefined ?\n                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n            return idbRange;\n        }\n        function createDbCoreTable(tableSchema) {\n            var tableName = tableSchema.name;\n            function mutate(_a) {\n                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var outbound = store.keyPath == null;\n                    var isAddOrPut = type === \"put\" || type === \"add\";\n                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                        throw new Error(\"Invalid operation type: \" + type);\n                    var length = (keys || values || { length: 1 }).length;\n                    if (keys && values && keys.length !== values.length) {\n                        throw new Error(\"Given keys array must have same length as given values array.\");\n                    }\n                    if (length === 0)\n                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                    var req;\n                    var reqs = [];\n                    var failures = [];\n                    var numFailures = 0;\n                    var errorHandler = function (event) {\n                        ++numFailures;\n                        preventDefault(event);\n                    };\n                    if (type === 'deleteRange') {\n                        if (range.type === 4 )\n                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });\n                        if (range.type === 3 )\n                            reqs.push(req = store.clear());\n                        else\n                            reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                    }\n                    else {\n                        var _a = isAddOrPut ?\n                            outbound ?\n                                [values, keys] :\n                                [values, null] :\n                            [keys, null], args1 = _a[0], args2 = _a[1];\n                        if (isAddOrPut) {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = (args2 && args2[i] !== undefined ?\n                                    store[type](args1[i], args2[i]) :\n                                    store[type](args1[i])));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = store[type](args1[i]));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                    }\n                    var done = function (event) {\n                        var lastResult = event.target.result;\n                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });\n                        resolve({\n                            numFailures: numFailures,\n                            failures: failures,\n                            results: type === \"delete\" ? keys : reqs.map(function (req) { return req.result; }),\n                            lastResult: lastResult\n                        });\n                    };\n                    req.onerror = function (event) {\n                        errorHandler(event);\n                        done(event);\n                    };\n                    req.onsuccess = done;\n                });\n            }\n            function openCursor(_a) {\n                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ?\n                        store :\n                        store.index(index.name);\n                    var direction = reverse ?\n                        unique ?\n                            \"prevunique\" :\n                            \"prev\" :\n                        unique ?\n                            \"nextunique\" :\n                            \"next\";\n                    var req = values || !('openKeyCursor' in source) ?\n                        source.openCursor(makeIDBKeyRange(range), direction) :\n                        source.openKeyCursor(makeIDBKeyRange(range), direction);\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = wrap(function (ev) {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            resolve(null);\n                            return;\n                        }\n                        cursor.___id = ++_id_counter;\n                        cursor.done = false;\n                        var _cursorContinue = cursor.continue.bind(cursor);\n                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                        if (_cursorContinuePrimaryKey)\n                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                        var _cursorAdvance = cursor.advance.bind(cursor);\n                        var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                        var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                        cursor.trans = trans;\n                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                        cursor.fail = wrap(reject);\n                        cursor.next = function () {\n                            var _this = this;\n                            var gotOne = 1;\n                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                        };\n                        cursor.start = function (callback) {\n                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                                resolveIteration = wrap(resolveIteration);\n                                req.onerror = eventRejectHandler(rejectIteration);\n                                cursor.fail = rejectIteration;\n                                cursor.stop = function (value) {\n                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                    resolveIteration(value);\n                                };\n                            });\n                            var guardedCallback = function () {\n                                if (req.result) {\n                                    try {\n                                        callback();\n                                    }\n                                    catch (err) {\n                                        cursor.fail(err);\n                                    }\n                                }\n                                else {\n                                    cursor.done = true;\n                                    cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                    cursor.stop();\n                                }\n                            };\n                            req.onsuccess = wrap(function (ev) {\n                                req.onsuccess = guardedCallback;\n                                guardedCallback();\n                            });\n                            cursor.continue = _cursorContinue;\n                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                            cursor.advance = _cursorAdvance;\n                            guardedCallback();\n                            return iterationPromise;\n                        };\n                        resolve(cursor);\n                    }, reject);\n                });\n            }\n            function query(hasGetAll) {\n                return function (request) {\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                        var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                        var index = query.index, range = query.range;\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        if (limit === 0)\n                            return resolve({ result: [] });\n                        if (hasGetAll) {\n                            var req = values ?\n                                source.getAll(idbKeyRange, nonInfinitLimit) :\n                                source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                            req.onerror = eventRejectHandler(reject);\n                        }\n                        else {\n                            var count_1 = 0;\n                            var req_1 = values || !('openKeyCursor' in source) ?\n                                source.openCursor(idbKeyRange) :\n                                source.openKeyCursor(idbKeyRange);\n                            var result_1 = [];\n                            req_1.onsuccess = function (event) {\n                                var cursor = req_1.result;\n                                if (!cursor)\n                                    return resolve({ result: result_1 });\n                                result_1.push(values ? cursor.value : cursor.primaryKey);\n                                if (++count_1 === limit)\n                                    return resolve({ result: result_1 });\n                                cursor.continue();\n                            };\n                            req_1.onerror = eventRejectHandler(reject);\n                        }\n                    });\n                };\n            }\n            return {\n                name: tableName,\n                schema: tableSchema,\n                mutate: mutate,\n                getMany: function (_a) {\n                    var trans = _a.trans, keys = _a.keys;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var length = keys.length;\n                        var result = new Array(length);\n                        var keyCount = 0;\n                        var callbackCount = 0;\n                        var req;\n                        var successHandler = function (event) {\n                            var req = event.target;\n                            if ((result[req._pos] = req.result) != null)\n                                ;\n                            if (++callbackCount === keyCount)\n                                resolve(result);\n                        };\n                        var errorHandler = eventRejectHandler(reject);\n                        for (var i = 0; i < length; ++i) {\n                            var key = keys[i];\n                            if (key != null) {\n                                req = store.get(keys[i]);\n                                req._pos = i;\n                                req.onsuccess = successHandler;\n                                req.onerror = errorHandler;\n                                ++keyCount;\n                            }\n                        }\n                        if (keyCount === 0)\n                            resolve(result);\n                    });\n                },\n                get: function (_a) {\n                    var trans = _a.trans, key = _a.key;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var req = store.get(key);\n                        req.onsuccess = function (event) { return resolve(event.target.result); };\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                },\n                query: query(hasGetAll),\n                openCursor: openCursor,\n                count: function (_a) {\n                    var query = _a.query, trans = _a.trans;\n                    var index = query.index, range = query.range;\n                    return new Promise(function (resolve, reject) {\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                }\n            };\n        }\n        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n        var tableMap = {};\n        tables.forEach(function (table) { return tableMap[table.name] = table; });\n        return {\n            stack: \"dbcore\",\n            transaction: db.transaction.bind(db),\n            table: function (name) {\n                var result = tableMap[name];\n                if (!result)\n                    throw new Error(\"Table '\".concat(name, \"' not found\"));\n                return tableMap[name];\n            },\n            MIN_KEY: -Infinity,\n            MAX_KEY: getMaxKey(IdbKeyRange),\n            schema: schema\n        };\n    }\n\n    function createMiddlewareStack(stackImpl, middlewares) {\n        return middlewares.reduce(function (down, _a) {\n            var create = _a.create;\n            return (__assign(__assign({}, down), create(down)));\n        }, stackImpl);\n    }\n    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;\n        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n        return {\n            dbcore: dbcore\n        };\n    }\n    function generateMiddlewareStacks(db, tmpTrans) {\n        var idbdb = tmpTrans.db;\n        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n        db.core = stacks.dbcore;\n        db.tables.forEach(function (table) {\n            var tableName = table.name;\n            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n                table.core = db.core.table(tableName);\n                if (db[tableName] instanceof db.Table) {\n                    db[tableName].core = table.core;\n                }\n            }\n        });\n    }\n\n    function setApiOnPlace(db, objs, tableNames, dbschema) {\n        tableNames.forEach(function (tableName) {\n            var schema = dbschema[tableName];\n            objs.forEach(function (obj) {\n                var propDesc = getPropertyDescriptor(obj, tableName);\n                if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                        setProp(obj, tableName, {\n                            get: function () { return this.table(tableName); },\n                            set: function (value) {\n                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n                            }\n                        });\n                    }\n                    else {\n                        obj[tableName] = new db.Table(tableName, schema);\n                    }\n                }\n            });\n        });\n    }\n    function removeTablesApi(db, objs) {\n        objs.forEach(function (obj) {\n            for (var key in obj) {\n                if (obj[key] instanceof db.Table)\n                    delete obj[key];\n            }\n        });\n    }\n    function lowerVersionFirst(a, b) {\n        return a._cfg.version - b._cfg.version;\n    }\n    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n        var globalSchema = db._dbSchema;\n        if (idbUpgradeTrans.objectStoreNames.contains('$meta') && !globalSchema.$meta) {\n            globalSchema.$meta = createTableSchema(\"$meta\", parseIndexSyntax(\"\")[0], []);\n            db._storeNames.push('$meta');\n        }\n        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n        trans.create(idbUpgradeTrans);\n        trans._completion.catch(reject);\n        var rejectTransaction = trans._reject.bind(trans);\n        var transless = PSD.transless || PSD;\n        newScope(function () {\n            PSD.trans = trans;\n            PSD.transless = transless;\n            if (oldVersion === 0) {\n                keys(globalSchema).forEach(function (tableName) {\n                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n                });\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n            }\n            else {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                return getExistingVersion(db, trans, oldVersion)\n                    .then(function (oldVersion) { return updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans); })\n                    .catch(rejectTransaction);\n            }\n        });\n    }\n    function patchCurrentVersion(db, idbUpgradeTrans) {\n        createMissingTables(db._dbSchema, idbUpgradeTrans);\n        if (idbUpgradeTrans.db.version % 10 === 0 && !idbUpgradeTrans.objectStoreNames.contains('$meta')) {\n            idbUpgradeTrans.db.createObjectStore('$meta').add(Math.ceil((idbUpgradeTrans.db.version / 10) - 1), 'version');\n        }\n        var globalSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        adjustToExistingIndexNames(db, db._dbSchema, idbUpgradeTrans);\n        var diff = getSchemaDiff(globalSchema, db._dbSchema);\n        var _loop_1 = function (tableChange) {\n            if (tableChange.change.length || tableChange.recreate) {\n                console.warn(\"Unable to patch indexes of table \".concat(tableChange.name, \" because it has changes on the type of index or primary key.\"));\n                return { value: void 0 };\n            }\n            var store = idbUpgradeTrans.objectStore(tableChange.name);\n            tableChange.add.forEach(function (idx) {\n                if (debug)\n                    console.debug(\"Dexie upgrade patch: Creating missing index \".concat(tableChange.name, \".\").concat(idx.src));\n                addIndex(store, idx);\n            });\n        };\n        for (var _i = 0, _a = diff.change; _i < _a.length; _i++) {\n            var tableChange = _a[_i];\n            var state_1 = _loop_1(tableChange);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n    }\n    function getExistingVersion(db, trans, oldVersion) {\n        if (trans.storeNames.includes('$meta')) {\n            return trans.table('$meta').get('version').then(function (metaVersion) {\n                return metaVersion != null ? metaVersion : oldVersion;\n            });\n        }\n        else {\n            return DexiePromise.resolve(oldVersion);\n        }\n    }\n    function updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {\n        var queue = [];\n        var versions = db._versions;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n        if (versToRun.length === 0) {\n            return DexiePromise.resolve();\n        }\n        versToRun.forEach(function (version) {\n            queue.push(function () {\n                var oldSchema = globalSchema;\n                var newSchema = version._cfg.dbschema;\n                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n                globalSchema = db._dbSchema = newSchema;\n                var diff = getSchemaDiff(oldSchema, newSchema);\n                diff.add.forEach(function (tuple) {\n                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n                });\n                diff.change.forEach(function (change) {\n                    if (change.recreate) {\n                        throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                    }\n                    else {\n                        var store_1 = idbUpgradeTrans.objectStore(change.name);\n                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                        change.change.forEach(function (idx) {\n                            store_1.deleteIndex(idx.name);\n                            addIndex(store_1, idx);\n                        });\n                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                    }\n                });\n                var contentUpgrade = version._cfg.contentUpgrade;\n                if (contentUpgrade && version._cfg.version > oldVersion) {\n                    generateMiddlewareStacks(db, idbUpgradeTrans);\n                    trans._memoizedTables = {};\n                    var upgradeSchema_1 = shallowClone(newSchema);\n                    diff.del.forEach(function (table) {\n                        upgradeSchema_1[table] = oldSchema[table];\n                    });\n                    removeTablesApi(db, [db.Transaction.prototype]);\n                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                    trans.schema = upgradeSchema_1;\n                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n                    if (contentUpgradeIsAsync_1) {\n                        incrementExpectedAwaits();\n                    }\n                    var returnValue_1;\n                    var promiseFollowed = DexiePromise.follow(function () {\n                        returnValue_1 = contentUpgrade(trans);\n                        if (returnValue_1) {\n                            if (contentUpgradeIsAsync_1) {\n                                var decrementor = decrementExpectedAwaits.bind(null, null);\n                                returnValue_1.then(decrementor, decrementor);\n                            }\n                        }\n                    });\n                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n                }\n            });\n            queue.push(function (idbtrans) {\n                var newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n                trans.schema = db._dbSchema;\n            });\n            queue.push(function (idbtrans) {\n                if (db.idbdb.objectStoreNames.contains('$meta')) {\n                    if (Math.ceil(db.idbdb.version / 10) === version._cfg.version) {\n                        db.idbdb.deleteObjectStore('$meta');\n                        delete db._dbSchema.$meta;\n                        db._storeNames = db._storeNames.filter(function (name) { return name !== '$meta'; });\n                    }\n                    else {\n                        idbtrans.objectStore('$meta').put(version._cfg.version, 'version');\n                    }\n                }\n            });\n        });\n        function runQueue() {\n            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n                DexiePromise.resolve();\n        }\n        return runQueue().then(function () {\n            createMissingTables(globalSchema, idbUpgradeTrans);\n        });\n    }\n    function getSchemaDiff(oldSchema, newSchema) {\n        var diff = {\n            del: [],\n            add: [],\n            change: []\n        };\n        var table;\n        for (table in oldSchema) {\n            if (!newSchema[table])\n                diff.del.push(table);\n        }\n        for (table in newSchema) {\n            var oldDef = oldSchema[table], newDef = newSchema[table];\n            if (!oldDef) {\n                diff.add.push([table, newDef]);\n            }\n            else {\n                var change = {\n                    name: table,\n                    def: newDef,\n                    recreate: false,\n                    del: [],\n                    add: [],\n                    change: []\n                };\n                if ((\n                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                    (oldDef.primKey.auto !== newDef.primKey.auto)) {\n                    change.recreate = true;\n                    diff.change.push(change);\n                }\n                else {\n                    var oldIndexes = oldDef.idxByName;\n                    var newIndexes = newDef.idxByName;\n                    var idxName = void 0;\n                    for (idxName in oldIndexes) {\n                        if (!newIndexes[idxName])\n                            change.del.push(idxName);\n                    }\n                    for (idxName in newIndexes) {\n                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                        if (!oldIdx)\n                            change.add.push(newIdx);\n                        else if (oldIdx.src !== newIdx.src)\n                            change.change.push(newIdx);\n                    }\n                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                        diff.change.push(change);\n                    }\n                }\n            }\n        }\n        return diff;\n    }\n    function createTable(idbtrans, tableName, primKey, indexes) {\n        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n            { autoIncrement: primKey.auto });\n        indexes.forEach(function (idx) { return addIndex(store, idx); });\n        return store;\n    }\n    function createMissingTables(newSchema, idbtrans) {\n        keys(newSchema).forEach(function (tableName) {\n            if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n                if (debug)\n                    console.debug('Dexie: Creating missing table', tableName);\n                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n            }\n        });\n    }\n    function deleteRemovedTables(newSchema, idbtrans) {\n        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {\n            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);\n        });\n    }\n    function addIndex(store, idx) {\n        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n    }\n    function buildGlobalSchema(db, idbdb, tmpTrans) {\n        var globalSchema = {};\n        var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n        dbStoreNames.forEach(function (storeName) {\n            var store = tmpTrans.objectStore(storeName);\n            var keyPath = store.keyPath;\n            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", true, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n            var indexes = [];\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var idbindex = store.index(store.indexNames[j]);\n                keyPath = idbindex.keyPath;\n                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n                indexes.push(index);\n            }\n            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n        });\n        return globalSchema;\n    }\n    function readGlobalSchema(db, idbdb, tmpTrans) {\n        db.verno = idbdb.version / 10;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n        db._storeNames = slice(idbdb.objectStoreNames, 0);\n        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n    }\n    function verifyInstalledSchema(db, tmpTrans) {\n        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n        var diff = getSchemaDiff(installedSchema, db._dbSchema);\n        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n    }\n    function adjustToExistingIndexNames(db, schema, idbtrans) {\n        var storeNames = idbtrans.db.objectStoreNames;\n        for (var i = 0; i < storeNames.length; ++i) {\n            var storeName = storeNames[i];\n            var store = idbtrans.objectStore(storeName);\n            db._hasGetAll = 'getAll' in store;\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var indexName = store.indexNames[j];\n                var keyPath = store.index(indexName).keyPath;\n                var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n                if (schema[storeName]) {\n                    var indexSpec = schema[storeName].idxByName[dexieName];\n                    if (indexSpec) {\n                        indexSpec.name = indexName;\n                        delete schema[storeName].idxByName[dexieName];\n                        schema[storeName].idxByName[indexName] = indexSpec;\n                    }\n                }\n            }\n        }\n        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n            !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n            [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n            db._hasGetAll = false;\n        }\n    }\n    function parseIndexSyntax(primKeyAndIndexes) {\n        return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n            var _a;\n            var typeSplit = index.split(':');\n            var type = (_a = typeSplit[1]) === null || _a === void 0 ? void 0 : _a.trim();\n            index = typeSplit[0].trim();\n            var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n            var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n            return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0, type);\n        });\n    }\n\n    var Version =  (function () {\n        function Version() {\n        }\n        Version.prototype._createTableSchema = function (name, primKey, indexes) {\n            return createTableSchema(name, primKey, indexes);\n        };\n        Version.prototype._parseIndexSyntax = function (primKeyAndIndexes) {\n            return parseIndexSyntax(primKeyAndIndexes);\n        };\n        Version.prototype._parseStoresSpec = function (stores, outSchema) {\n            var _this = this;\n            keys(stores).forEach(function (tableName) {\n                if (stores[tableName] !== null) {\n                    var indexes = _this._parseIndexSyntax(stores[tableName]);\n                    var primKey = indexes.shift();\n                    if (!primKey) {\n                        throw new exceptions.Schema('Invalid schema for table ' + tableName + ': ' + stores[tableName]);\n                    }\n                    primKey.unique = true;\n                    if (primKey.multi)\n                        throw new exceptions.Schema('Primary key cannot be multiEntry*');\n                    indexes.forEach(function (idx) {\n                        if (idx.auto)\n                            throw new exceptions.Schema('Only primary key can be marked as autoIncrement (++)');\n                        if (!idx.keyPath)\n                            throw new exceptions.Schema('Index must have a name and cannot be an empty string');\n                    });\n                    var tblSchema = _this._createTableSchema(tableName, primKey, indexes);\n                    outSchema[tableName] = tblSchema;\n                }\n            });\n        };\n        Version.prototype.stores = function (stores) {\n            var db = this.db;\n            this._cfg.storesSource = this._cfg.storesSource\n                ? extend(this._cfg.storesSource, stores)\n                : stores;\n            var versions = db._versions;\n            var storesSpec = {};\n            var dbschema = {};\n            versions.forEach(function (version) {\n                extend(storesSpec, version._cfg.storesSource);\n                dbschema = version._cfg.dbschema = {};\n                version._parseStoresSpec(storesSpec, dbschema);\n            });\n            db._dbSchema = dbschema;\n            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n            db._storeNames = keys(dbschema);\n            return this;\n        };\n        Version.prototype.upgrade = function (upgradeFunction) {\n            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n            return this;\n        };\n        return Version;\n    }());\n\n    function createVersionConstructor(db) {\n        return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n            this.db = db;\n            this._cfg = {\n                version: versionNumber,\n                storesSource: null,\n                dbschema: {},\n                tables: {},\n                contentUpgrade: null\n            };\n        });\n    }\n\n    function getDbNamesTable(indexedDB, IDBKeyRange) {\n        var dbNamesDB = indexedDB[\"_dbNamesDB\"];\n        if (!dbNamesDB) {\n            dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n                addons: [],\n                indexedDB: indexedDB,\n                IDBKeyRange: IDBKeyRange,\n            });\n            dbNamesDB.version(1).stores({ dbnames: \"name\" });\n        }\n        return dbNamesDB.table(\"dbnames\");\n    }\n    function hasDatabasesNative(indexedDB) {\n        return indexedDB && typeof indexedDB.databases === \"function\";\n    }\n    function getDatabaseNames(_a) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        return hasDatabasesNative(indexedDB)\n            ? Promise.resolve(indexedDB.databases()).then(function (infos) {\n                return infos\n                    .map(function (info) { return info.name; })\n                    .filter(function (name) { return name !== DBNAMES_DB; });\n            })\n            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n    }\n    function _onDatabaseCreated(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);\n    }\n    function _onDatabaseDeleted(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n    }\n\n    function vip(fn) {\n        return newScope(function () {\n            PSD.letThrough = true;\n            return fn();\n        });\n    }\n\n    function idbReady() {\n        var isSafari = !navigator.userAgentData &&\n            /Safari\\//.test(navigator.userAgent) &&\n            !/Chrom(e|ium)\\//.test(navigator.userAgent);\n        if (!isSafari || !indexedDB.databases)\n            return Promise.resolve();\n        var intervalId;\n        return new Promise(function (resolve) {\n            var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n            intervalId = setInterval(tryIdb, 100);\n            tryIdb();\n        }).finally(function () { return clearInterval(intervalId); });\n    }\n\n    var _a;\n    function isEmptyRange(node) {\n        return !(\"from\" in node);\n    }\n    var RangeSet = function (fromOrTree, to) {\n        if (this) {\n            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n        }\n        else {\n            var rv = new RangeSet();\n            if (fromOrTree && (\"d\" in fromOrTree)) {\n                extend(rv, fromOrTree);\n            }\n            return rv;\n        }\n    };\n    props(RangeSet.prototype, (_a = {\n            add: function (rangeSet) {\n                mergeRanges(this, rangeSet);\n                return this;\n            },\n            addKey: function (key) {\n                addRange(this, key, key);\n                return this;\n            },\n            addKeys: function (keys) {\n                var _this = this;\n                keys.forEach(function (key) { return addRange(_this, key, key); });\n                return this;\n            },\n            hasKey: function (key) {\n                var node = getRangeSetIterator(this).next(key).value;\n                return node && cmp(node.from, key) <= 0 && cmp(node.to, key) >= 0;\n            }\n        },\n        _a[iteratorSymbol] = function () {\n            return getRangeSetIterator(this);\n        },\n        _a));\n    function addRange(target, from, to) {\n        var diff = cmp(from, to);\n        if (isNaN(diff))\n            return;\n        if (diff > 0)\n            throw RangeError();\n        if (isEmptyRange(target))\n            return extend(target, { from: from, to: to, d: 1 });\n        var left = target.l;\n        var right = target.r;\n        if (cmp(to, target.from) < 0) {\n            left\n                ? addRange(left, from, to)\n                : (target.l = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.to) > 0) {\n            right\n                ? addRange(right, from, to)\n                : (target.r = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.from) < 0) {\n            target.from = from;\n            target.l = null;\n            target.d = right ? right.d + 1 : 1;\n        }\n        if (cmp(to, target.to) > 0) {\n            target.to = to;\n            target.r = null;\n            target.d = target.l ? target.l.d + 1 : 1;\n        }\n        var rightWasCutOff = !target.r;\n        if (left && !target.l) {\n            mergeRanges(target, left);\n        }\n        if (right && rightWasCutOff) {\n            mergeRanges(target, right);\n        }\n    }\n    function mergeRanges(target, newSet) {\n        function _addRangeSet(target, _a) {\n            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;\n            addRange(target, from, to);\n            if (l)\n                _addRangeSet(target, l);\n            if (r)\n                _addRangeSet(target, r);\n        }\n        if (!isEmptyRange(newSet))\n            _addRangeSet(target, newSet);\n    }\n    function rangesOverlap(rangeSet1, rangeSet2) {\n        var i1 = getRangeSetIterator(rangeSet2);\n        var nextResult1 = i1.next();\n        if (nextResult1.done)\n            return false;\n        var a = nextResult1.value;\n        var i2 = getRangeSetIterator(rangeSet1);\n        var nextResult2 = i2.next(a.from);\n        var b = nextResult2.value;\n        while (!nextResult1.done && !nextResult2.done) {\n            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n                return true;\n            cmp(a.from, b.from) < 0\n                ? (a = (nextResult1 = i1.next(b.from)).value)\n                : (b = (nextResult2 = i2.next(a.from)).value);\n        }\n        return false;\n    }\n    function getRangeSetIterator(node) {\n        var state = isEmptyRange(node) ? null : { s: 0, n: node };\n        return {\n            next: function (key) {\n                var keyProvided = arguments.length > 0;\n                while (state) {\n                    switch (state.s) {\n                        case 0:\n                            state.s = 1;\n                            if (keyProvided) {\n                                while (state.n.l && cmp(key, state.n.from) < 0)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                            else {\n                                while (state.n.l)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                        case 1:\n                            state.s = 2;\n                            if (!keyProvided || cmp(key, state.n.to) <= 0)\n                                return { value: state.n, done: false };\n                        case 2:\n                            if (state.n.r) {\n                                state.s = 3;\n                                state = { up: state, n: state.n.r, s: 0 };\n                                continue;\n                            }\n                        case 3:\n                            state = state.up;\n                    }\n                }\n                return { done: true };\n            },\n        };\n    }\n    function rebalance(target) {\n        var _a, _b;\n        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n        var r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n        if (r) {\n            var l = r === \"r\" ? \"l\" : \"r\";\n            var rootClone = __assign({}, target);\n            var oldRootRight = target[r];\n            target.from = oldRootRight.from;\n            target.to = oldRootRight.to;\n            target[r] = oldRootRight[r];\n            rootClone[r] = oldRootRight[l];\n            target[l] = rootClone;\n            rootClone.d = computeDepth(rootClone);\n        }\n        target.d = computeDepth(target);\n    }\n    function computeDepth(_a) {\n        var r = _a.r, l = _a.l;\n        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n    }\n\n    function extendObservabilitySet(target, newSet) {\n        keys(newSet).forEach(function (part) {\n            if (target[part])\n                mergeRanges(target[part], newSet[part]);\n            else\n                target[part] = cloneSimpleObjectTree(newSet[part]);\n        });\n        return target;\n    }\n\n    function obsSetsOverlap(os1, os2) {\n        return os1.all || os2.all || Object.keys(os1).some(function (key) { return os2[key] && rangesOverlap(os2[key], os1[key]); });\n    }\n\n    var cache = {};\n\n    var unsignaledParts = {};\n    var isTaskEnqueued = false;\n    function signalSubscribersLazily(part, optimistic) {\n        extendObservabilitySet(unsignaledParts, part);\n        if (!isTaskEnqueued) {\n            isTaskEnqueued = true;\n            setTimeout(function () {\n                isTaskEnqueued = false;\n                var parts = unsignaledParts;\n                unsignaledParts = {};\n                signalSubscribersNow(parts, false);\n            }, 0);\n        }\n    }\n    function signalSubscribersNow(updatedParts, deleteAffectedCacheEntries) {\n        if (deleteAffectedCacheEntries === void 0) { deleteAffectedCacheEntries = false; }\n        var queriesToSignal = new Set();\n        if (updatedParts.all) {\n            for (var _i = 0, _a = Object.values(cache); _i < _a.length; _i++) {\n                var tblCache = _a[_i];\n                collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);\n            }\n        }\n        else {\n            for (var key in updatedParts) {\n                var parts = /^idb\\:\\/\\/(.*)\\/(.*)\\//.exec(key);\n                if (parts) {\n                    var dbName = parts[1], tableName = parts[2];\n                    var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)];\n                    if (tblCache)\n                        collectTableSubscribers(tblCache, updatedParts, queriesToSignal, deleteAffectedCacheEntries);\n                }\n            }\n        }\n        queriesToSignal.forEach(function (requery) { return requery(); });\n    }\n    function collectTableSubscribers(tblCache, updatedParts, outQueriesToSignal, deleteAffectedCacheEntries) {\n        var updatedEntryLists = [];\n        for (var _i = 0, _a = Object.entries(tblCache.queries.query); _i < _a.length; _i++) {\n            var _b = _a[_i], indexName = _b[0], entries = _b[1];\n            var filteredEntries = [];\n            for (var _c = 0, entries_1 = entries; _c < entries_1.length; _c++) {\n                var entry = entries_1[_c];\n                if (obsSetsOverlap(updatedParts, entry.obsSet)) {\n                    entry.subscribers.forEach(function (requery) { return outQueriesToSignal.add(requery); });\n                }\n                else if (deleteAffectedCacheEntries) {\n                    filteredEntries.push(entry);\n                }\n            }\n            if (deleteAffectedCacheEntries)\n                updatedEntryLists.push([indexName, filteredEntries]);\n        }\n        if (deleteAffectedCacheEntries) {\n            for (var _d = 0, updatedEntryLists_1 = updatedEntryLists; _d < updatedEntryLists_1.length; _d++) {\n                var _e = updatedEntryLists_1[_d], indexName = _e[0], filteredEntries = _e[1];\n                tblCache.queries.query[indexName] = filteredEntries;\n            }\n        }\n    }\n\n    function dexieOpen(db) {\n        var state = db._state;\n        var indexedDB = db._deps.indexedDB;\n        if (state.isBeingOpened || db.idbdb)\n            return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n                rejection(state.dbOpenError) :\n                db; });\n        state.isBeingOpened = true;\n        state.dbOpenError = null;\n        state.openComplete = false;\n        var openCanceller = state.openCanceller;\n        var nativeVerToOpen = Math.round(db.verno * 10);\n        var schemaPatchMode = false;\n        function throwIfCancelled() {\n            if (state.openCanceller !== openCanceller)\n                throw new exceptions.DatabaseClosed('db.open() was cancelled');\n        }\n        var resolveDbReady = state.dbReadyResolve,\n        upgradeTransaction = null, wasCreated = false;\n        var tryOpenDB = function () { return new DexiePromise(function (resolve, reject) {\n            throwIfCancelled();\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            var dbName = db.name;\n            var req = state.autoSchema || !nativeVerToOpen ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, nativeVerToOpen);\n            if (!req)\n                throw new exceptions.MissingAPI();\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(function (e) {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    var delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(function () {\n                        reject(new exceptions.NoSuchDatabase(\"Database \".concat(dbName, \" doesnt exist\")));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    wasCreated = oldVer < 1;\n                    db.idbdb = req.result;\n                    if (schemaPatchMode) {\n                        patchCurrentVersion(db, upgradeTransaction);\n                    }\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(function () {\n                upgradeTransaction = null;\n                var idbdb = db.idbdb = req.result;\n                var objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else {\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                            if (!verifyInstalledSchema(db, tmpTrans) && !schemaPatchMode) {\n                                console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.\");\n                                idbdb.close();\n                                nativeVerToOpen = idbdb.version + 1;\n                                schemaPatchMode = true;\n                                return resolve(tryOpenDB());\n                            }\n                        }\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(function (ev) {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                idbdb.onclose = wrap(function () {\n                    db.close({ disableAutoOpen: false });\n                });\n                if (wasCreated)\n                    _onDatabaseCreated(db._deps, dbName);\n                resolve();\n            }, reject);\n        }).catch(function (err) {\n            switch (err === null || err === void 0 ? void 0 : err.name) {\n                case \"UnknownError\":\n                    if (state.PR1398_maxLoop > 0) {\n                        state.PR1398_maxLoop--;\n                        console.warn('Dexie: Workaround for Chrome UnknownError on open()');\n                        return tryOpenDB();\n                    }\n                    break;\n                case \"VersionError\":\n                    if (nativeVerToOpen > 0) {\n                        nativeVerToOpen = 0;\n                        return tryOpenDB();\n                    }\n                    break;\n            }\n            return DexiePromise.reject(err);\n        }); };\n        return DexiePromise.race([\n            openCanceller,\n            (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(tryOpenDB)\n        ]).then(function () {\n            throwIfCancelled();\n            state.onReadyBeingFired = [];\n            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {\n                if (state.onReadyBeingFired.length > 0) {\n                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);\n                    state.onReadyBeingFired = [];\n                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);\n                }\n            });\n        }).finally(function () {\n            if (state.openCanceller === openCanceller) {\n                state.onReadyBeingFired = null;\n                state.isBeingOpened = false;\n            }\n        }).catch(function (err) {\n            state.dbOpenError = err;\n            try {\n                upgradeTransaction && upgradeTransaction.abort();\n            }\n            catch (_a) { }\n            if (openCanceller === state.openCanceller) {\n                db._close();\n            }\n            return rejection(err);\n        }).finally(function () {\n            state.openComplete = true;\n            resolveDbReady();\n        }).then(function () {\n            if (wasCreated) {\n                var everything_1 = {};\n                db.tables.forEach(function (table) {\n                    table.schema.indexes.forEach(function (idx) {\n                        if (idx.name)\n                            everything_1[\"idb://\".concat(db.name, \"/\").concat(table.name, \"/\").concat(idx.name)] = new RangeSet(-Infinity, [[[]]]);\n                    });\n                    everything_1[\"idb://\".concat(db.name, \"/\").concat(table.name, \"/\")] = everything_1[\"idb://\".concat(db.name, \"/\").concat(table.name, \"/:dels\")] = new RangeSet(-Infinity, [[[]]]);\n                });\n                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME).fire(everything_1);\n                signalSubscribersNow(everything_1, true);\n            }\n            return db;\n        });\n    }\n\n    function awaitIterator(iterator) {\n        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n        function step(getNext) {\n            return function (val) {\n                var next = getNext(val), value = next.value;\n                return next.done ? value :\n                    (!value || typeof value.then !== 'function' ?\n                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                        value.then(onSuccess, onError));\n            };\n        }\n        return step(callNext)();\n    }\n\n    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n        var i = arguments.length;\n        if (i < 2)\n            throw new exceptions.InvalidArgument(\"Too few arguments\");\n        var args = new Array(i - 1);\n        while (--i)\n            args[i - 1] = arguments[i];\n        scopeFunc = args.pop();\n        var tables = flatten(args);\n        return [mode, tables, scopeFunc];\n    }\n    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n        return DexiePromise.resolve().then(function () {\n            var transless = PSD.transless || PSD;\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n            trans.explicit = true;\n            var zoneProps = {\n                trans: trans,\n                transless: transless\n            };\n            if (parentTransaction) {\n                trans.idbtrans = parentTransaction.idbtrans;\n            }\n            else {\n                try {\n                    trans.create();\n                    trans.idbtrans._explicit = true;\n                    db._state.PR1398_maxLoop = 3;\n                }\n                catch (ex) {\n                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                        console.warn('Dexie: Need to reopen db');\n                        db.close({ disableAutoOpen: false });\n                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });\n                    }\n                    return rejection(ex);\n                }\n            }\n            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            var returnValue;\n            var promiseFollowed = DexiePromise.follow(function () {\n                returnValue = scopeFunc.call(trans, trans);\n                if (returnValue) {\n                    if (scopeFuncIsAsync) {\n                        var decrementor = decrementExpectedAwaits.bind(null, null);\n                        returnValue.then(decrementor, decrementor);\n                    }\n                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                        returnValue = awaitIterator(returnValue);\n                    }\n                }\n            }, zoneProps);\n            return (returnValue && typeof returnValue.then === 'function' ?\n                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n                    x\n                    : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n                if (parentTransaction)\n                    trans._resolve();\n                return trans._completion.then(function () { return x; });\n            }).catch(function (e) {\n                trans._reject(e);\n                return rejection(e);\n            });\n        });\n    }\n\n    function pad(a, value, count) {\n        var result = isArray(a) ? a.slice() : [a];\n        for (var i = 0; i < count; ++i)\n            result.push(value);\n        return result;\n    }\n    function createVirtualIndexMiddleware(down) {\n        return __assign(__assign({}, down), { table: function (tableName) {\n                var table = down.table(tableName);\n                var schema = table.schema;\n                var indexLookup = {};\n                var allVirtualIndexes = [];\n                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                    var keyPathAlias = getKeyPathAlias(keyPath);\n                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                    var isVirtual = keyTail > 0;\n                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { name: isVirtual\n                            ? \"\".concat(keyPathAlias, \"(virtual-from:\").concat(lowLevelIndex.name, \")\")\n                            : lowLevelIndex.name, lowLevelIndex: lowLevelIndex, isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                    indexList.push(virtualIndex);\n                    if (!virtualIndex.isPrimaryKey) {\n                        allVirtualIndexes.push(virtualIndex);\n                    }\n                    if (keyLength > 1) {\n                        var virtualKeyPath = keyLength === 2 ?\n                            keyPath[0] :\n                            keyPath.slice(0, keyLength - 1);\n                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                    }\n                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                    return virtualIndex;\n                }\n                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n                indexLookup[\":id\"] = [primaryKey];\n                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                    var index = _a[_i];\n                    addVirtualIndexes(index.keyPath, 0, index);\n                }\n                function findBestIndex(keyPath) {\n                    var result = indexLookup[getKeyPathAlias(keyPath)];\n                    return result && result[0];\n                }\n                function translateRange(range, keyTail) {\n                    return {\n                        type: range.type === 1  ?\n                            2  :\n                            range.type,\n                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                        lowerOpen: true,\n                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                        upperOpen: true\n                    };\n                }\n                function translateRequest(req) {\n                    var index = req.query.index;\n                    return index.isVirtual ? __assign(__assign({}, req), { query: {\n                            index: index.lowLevelIndex,\n                            range: translateRange(req.query.range, index.keyTail)\n                        } }) : req;\n                }\n                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                        return table.count(translateRequest(req));\n                    }, query: function (req) {\n                        return table.query(translateRequest(req));\n                    }, openCursor: function (req) {\n                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                        if (!isVirtual)\n                            return table.openCursor(req);\n                        function createVirtualCursor(cursor) {\n                            function _continue(key) {\n                                key != null ?\n                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                    req.unique ?\n                                        cursor.continue(cursor.key.slice(0, keyLength)\n                                            .concat(req.reverse\n                                            ? down.MIN_KEY\n                                            : down.MAX_KEY, keyTail)) :\n                                        cursor.continue();\n                            }\n                            var virtualCursor = Object.create(cursor, {\n                                continue: { value: _continue },\n                                continuePrimaryKey: {\n                                    value: function (key, primaryKey) {\n                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                    }\n                                },\n                                primaryKey: {\n                                    get: function () {\n                                        return cursor.primaryKey;\n                                    }\n                                },\n                                key: {\n                                    get: function () {\n                                        var key = cursor.key;\n                                        return keyLength === 1 ?\n                                            key[0] :\n                                            key.slice(0, keyLength);\n                                    }\n                                },\n                                value: {\n                                    get: function () {\n                                        return cursor.value;\n                                    }\n                                }\n                            });\n                            return virtualCursor;\n                        }\n                        return table.openCursor(translateRequest(req))\n                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                    } });\n                return result;\n            } });\n    }\n    var virtualIndexMiddleware = {\n        stack: \"dbcore\",\n        name: \"VirtualIndexMiddleware\",\n        level: 1,\n        create: createVirtualIndexMiddleware\n    };\n\n    function getObjectDiff(a, b, rv, prfx) {\n        rv = rv || {};\n        prfx = prfx || '';\n        keys(a).forEach(function (prop) {\n            if (!hasOwn(b, prop)) {\n                rv[prfx + prop] = undefined;\n            }\n            else {\n                var ap = a[prop], bp = b[prop];\n                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                    var apTypeName = toStringTag(ap);\n                    var bpTypeName = toStringTag(bp);\n                    if (apTypeName !== bpTypeName) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                    else if (apTypeName === 'Object') {\n                        getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                    }\n                    else if (ap !== bp) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                }\n                else if (ap !== bp)\n                    rv[prfx + prop] = b[prop];\n            }\n        });\n        keys(b).forEach(function (prop) {\n            if (!hasOwn(a, prop)) {\n                rv[prfx + prop] = b[prop];\n            }\n        });\n        return rv;\n    }\n\n    function getEffectiveKeys(primaryKey, req) {\n        if (req.type === 'delete')\n            return req.keys;\n        return req.keys || req.values.map(primaryKey.extractKey);\n    }\n\n    var hooksMiddleware = {\n        stack: \"dbcore\",\n        name: \"HooksMiddleware\",\n        level: 2,\n        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n                var downTable = downCore.table(tableName);\n                var primaryKey = downTable.schema.primaryKey;\n                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n                        var dxTrans = PSD.trans;\n                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                        switch (req.type) {\n                            case 'add':\n                                if (creating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'put':\n                                if (creating.fire === nop && updating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'delete':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'deleteRange':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                        }\n                        return downTable.mutate(req);\n                        function addPutOrDelete(req) {\n                            var dxTrans = PSD.trans;\n                            var keys = req.keys || getEffectiveKeys(primaryKey, req);\n                            if (!keys)\n                                throw new Error(\"Keys missing\");\n                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);\n                            if (req.type !== 'delete')\n                                req.values = __spreadArray([], req.values, true);\n                            if (req.keys)\n                                req.keys = __spreadArray([], req.keys, true);\n                            return getExistingValues(downTable, req, keys).then(function (existingValues) {\n                                var contexts = keys.map(function (key, i) {\n                                    var existingValue = existingValues[i];\n                                    var ctx = { onerror: null, onsuccess: null };\n                                    if (req.type === 'delete') {\n                                        deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                    }\n                                    else if (req.type === 'add' || existingValue === undefined) {\n                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                        if (key == null && generatedPrimaryKey != null) {\n                                            key = generatedPrimaryKey;\n                                            req.keys[i] = key;\n                                            if (!primaryKey.outbound) {\n                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                        if (additionalChanges_1) {\n                                            var requestedValue_1 = req.values[i];\n                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                                if (hasOwn(requestedValue_1, keyPath)) {\n                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];\n                                                }\n                                                else {\n                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                                }\n                                            });\n                                        }\n                                    }\n                                    return ctx;\n                                });\n                                return downTable.mutate(req).then(function (_a) {\n                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                    for (var i = 0; i < keys.length; ++i) {\n                                        var primKey = results ? results[i] : keys[i];\n                                        var ctx = contexts[i];\n                                        if (primKey == null) {\n                                            ctx.onerror && ctx.onerror(failures[i]);\n                                        }\n                                        else {\n                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                                req.values[i] :\n                                                primKey\n                                            );\n                                        }\n                                    }\n                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                                }).catch(function (error) {\n                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                    return Promise.reject(error);\n                                });\n                            });\n                        }\n                        function deleteRange(req) {\n                            return deleteNextChunk(req.trans, req.range, 10000);\n                        }\n                        function deleteNextChunk(trans, range, limit) {\n                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                                .then(function (_a) {\n                                var result = _a.result;\n                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                    if (res.numFailures > 0)\n                                        return Promise.reject(res.failures[0]);\n                                    if (result.length < limit) {\n                                        return { failures: [], numFailures: 0, lastResult: undefined };\n                                    }\n                                    else {\n                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                    }\n                                });\n                            });\n                        }\n                    } });\n                return tableMiddleware;\n            } })); }\n    };\n    function getExistingValues(table, req, effectiveKeys) {\n        return req.type === \"add\"\n            ? Promise.resolve([])\n            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n    }\n\n    function getFromTransactionCache(keys, cache, clone) {\n        try {\n            if (!cache)\n                return null;\n            if (cache.keys.length < keys.length)\n                return null;\n            var result = [];\n            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n                if (cmp(cache.keys[i], keys[j]) !== 0)\n                    continue;\n                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n                ++j;\n            }\n            return result.length === keys.length ? result : null;\n        }\n        catch (_a) {\n            return null;\n        }\n    }\n    var cacheExistingValuesMiddleware = {\n        stack: \"dbcore\",\n        level: -1,\n        create: function (core) {\n            return {\n                table: function (tableName) {\n                    var table = core.table(tableName);\n                    return __assign(__assign({}, table), { getMany: function (req) {\n                            if (!req.cache) {\n                                return table.getMany(req);\n                            }\n                            var cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                            if (cachedResult) {\n                                return DexiePromise.resolve(cachedResult);\n                            }\n                            return table.getMany(req).then(function (res) {\n                                req.trans[\"_cache\"] = {\n                                    keys: req.keys,\n                                    values: req.cache === \"clone\" ? deepClone(res) : res,\n                                };\n                                return res;\n                            });\n                        }, mutate: function (req) {\n                            if (req.type !== \"add\")\n                                req.trans[\"_cache\"] = null;\n                            return table.mutate(req);\n                        } });\n                },\n            };\n        },\n    };\n\n    function isCachableContext(ctx, table) {\n        return (ctx.trans.mode === 'readonly' &&\n            !!ctx.subscr &&\n            !ctx.trans.explicit &&\n            ctx.trans.db._options.cache !== 'disabled' &&\n            !table.schema.primaryKey.outbound);\n    }\n\n    function isCachableRequest(type, req) {\n        switch (type) {\n            case 'query':\n                return req.values && !req.unique;\n            case 'get':\n                return false;\n            case 'getMany':\n                return false;\n            case 'count':\n                return false;\n            case 'openCursor':\n                return false;\n        }\n    }\n\n    var observabilityMiddleware = {\n        stack: \"dbcore\",\n        level: 0,\n        name: \"Observability\",\n        create: function (core) {\n            var dbName = core.schema.name;\n            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n            return __assign(__assign({}, core), { transaction: function (stores, mode, options) {\n                    if (PSD.subscr && mode !== 'readonly') {\n                        throw new exceptions.ReadOnly(\"Readwrite transaction in liveQuery context. Querier source: \".concat(PSD.querier));\n                    }\n                    return core.transaction(stores, mode, options);\n                }, table: function (tableName) {\n                    var table = core.table(tableName);\n                    var schema = table.schema;\n                    var primaryKey = schema.primaryKey, indexes = schema.indexes;\n                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;\n                    var indexesWithAutoIncPK = primaryKey.autoIncrement && indexes.filter(function (index) { return index.compound && index.keyPath.includes(primaryKey.keyPath); });\n                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {\n                            var _a, _b;\n                            var trans = req.trans;\n                            var mutatedParts = req.mutatedParts || (req.mutatedParts = {});\n                            var getRangeSet = function (indexName) {\n                                var part = \"idb://\".concat(dbName, \"/\").concat(tableName, \"/\").concat(indexName);\n                                return (mutatedParts[part] ||\n                                    (mutatedParts[part] = new RangeSet()));\n                            };\n                            var pkRangeSet = getRangeSet(\"\");\n                            var delsRangeSet = getRangeSet(\":dels\");\n                            var type = req.type;\n                            var _c = req.type === \"deleteRange\"\n                                ? [req.range]\n                                : req.type === \"delete\"\n                                    ? [req.keys]\n                                    : req.values.length < 50\n                                        ? [getEffectiveKeys(primaryKey, req).filter(function (id) { return id; }), req.values]\n                                        : [], keys = _c[0], newObjs = _c[1];\n                            var oldCache = req.trans[\"_cache\"];\n                            if (isArray(keys)) {\n                                pkRangeSet.addKeys(keys);\n                                var oldObjs = type === 'delete' || keys.length === newObjs.length ? getFromTransactionCache(keys, oldCache) : null;\n                                if (!oldObjs) {\n                                    delsRangeSet.addKeys(keys);\n                                }\n                                if (oldObjs || newObjs) {\n                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                }\n                            }\n                            else if (keys) {\n                                var range = {\n                                    from: (_a = keys.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY,\n                                    to: (_b = keys.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY\n                                };\n                                delsRangeSet.add(range);\n                                pkRangeSet.add(range);\n                            }\n                            else {\n                                pkRangeSet.add(FULL_RANGE);\n                                delsRangeSet.add(FULL_RANGE);\n                                schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });\n                            }\n                            return table.mutate(req).then(function (res) {\n                                if (keys && (req.type === 'add' || req.type === 'put')) {\n                                    pkRangeSet.addKeys(res.results);\n                                    if (indexesWithAutoIncPK) {\n                                        indexesWithAutoIncPK.forEach(function (idx) {\n                                            var idxVals = req.values.map(function (v) { return idx.extractKey(v); });\n                                            var pkPos = idx.keyPath.findIndex(function (prop) { return prop === primaryKey.keyPath; });\n                                            for (var i = 0, len = res.results.length; i < len; ++i) {\n                                                idxVals[i][pkPos] = res.results[i];\n                                            }\n                                            getRangeSet(idx.name).addKeys(idxVals);\n                                        });\n                                    }\n                                }\n                                trans.mutatedParts = extendObservabilitySet(trans.mutatedParts || {}, mutatedParts);\n                                return res;\n                            });\n                        } });\n                    var getRange = function (_a) {\n                        var _b, _c;\n                        var _d = _a.query, index = _d.index, range = _d.range;\n                        return [\n                            index,\n                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),\n                        ];\n                    };\n                    var readSubscribers = {\n                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },\n                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },\n                        count: getRange,\n                        query: getRange,\n                        openCursor: getRange,\n                    };\n                    keys(readSubscribers).forEach(function (method) {\n                        tableClone[method] = function (req) {\n                            var subscr = PSD.subscr;\n                            var isLiveQuery = !!subscr;\n                            var cachable = isCachableContext(PSD, table) && isCachableRequest(method, req);\n                            var obsSet = cachable\n                                ? req.obsSet = {}\n                                : subscr;\n                            if (isLiveQuery) {\n                                var getRangeSet = function (indexName) {\n                                    var part = \"idb://\".concat(dbName, \"/\").concat(tableName, \"/\").concat(indexName);\n                                    return (obsSet[part] ||\n                                        (obsSet[part] = new RangeSet()));\n                                };\n                                var pkRangeSet_1 = getRangeSet(\"\");\n                                var delsRangeSet_1 = getRangeSet(\":dels\");\n                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];\n                                if (method === 'query' && queriedIndex.isPrimaryKey && !req.values) {\n                                    delsRangeSet_1.add(queriedRanges);\n                                }\n                                else {\n                                    getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                                }\n                                if (!queriedIndex.isPrimaryKey) {\n                                    if (method === \"count\") {\n                                        delsRangeSet_1.add(FULL_RANGE);\n                                    }\n                                    else {\n                                        var keysPromise_1 = method === \"query\" &&\n                                            outbound &&\n                                            req.values &&\n                                            table.query(__assign(__assign({}, req), { values: false }));\n                                        return table[method].apply(this, arguments).then(function (res) {\n                                            if (method === \"query\") {\n                                                if (outbound && req.values) {\n                                                    return keysPromise_1.then(function (_a) {\n                                                        var resultingKeys = _a.result;\n                                                        pkRangeSet_1.addKeys(resultingKeys);\n                                                        return res;\n                                                    });\n                                                }\n                                                var pKeys = req.values\n                                                    ? res.result.map(extractKey)\n                                                    : res.result;\n                                                if (req.values) {\n                                                    pkRangeSet_1.addKeys(pKeys);\n                                                }\n                                                else {\n                                                    delsRangeSet_1.addKeys(pKeys);\n                                                }\n                                            }\n                                            else if (method === \"openCursor\") {\n                                                var cursor_1 = res;\n                                                var wantValues_1 = req.values;\n                                                return (cursor_1 &&\n                                                    Object.create(cursor_1, {\n                                                        key: {\n                                                            get: function () {\n                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.key;\n                                                            },\n                                                        },\n                                                        primaryKey: {\n                                                            get: function () {\n                                                                var pkey = cursor_1.primaryKey;\n                                                                delsRangeSet_1.addKey(pkey);\n                                                                return pkey;\n                                                            },\n                                                        },\n                                                        value: {\n                                                            get: function () {\n                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.value;\n                                                            },\n                                                        },\n                                                    }));\n                                            }\n                                            return res;\n                                        });\n                                    }\n                                }\n                            }\n                            return table[method].apply(this, arguments);\n                        };\n                    });\n                    return tableClone;\n                } });\n        },\n    };\n    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n        function addAffectedIndex(ix) {\n            var rangeSet = getRangeSet(ix.name || \"\");\n            function extractKey(obj) {\n                return obj != null ? ix.extractKey(obj) : null;\n            }\n            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)\n                ? key.forEach(function (key) { return rangeSet.addKey(key); })\n                : rangeSet.addKey(key); };\n            (oldObjs || newObjs).forEach(function (_, i) {\n                var oldKey = oldObjs && extractKey(oldObjs[i]);\n                var newKey = newObjs && extractKey(newObjs[i]);\n                if (cmp(oldKey, newKey) !== 0) {\n                    if (oldKey != null)\n                        addKeyOrKeys(oldKey);\n                    if (newKey != null)\n                        addKeyOrKeys(newKey);\n                }\n            });\n        }\n        schema.indexes.forEach(addAffectedIndex);\n    }\n\n    function adjustOptimisticFromFailures(tblCache, req, res) {\n        if (res.numFailures === 0)\n            return req;\n        if (req.type === 'deleteRange') {\n            return null;\n        }\n        var numBulkOps = req.keys\n            ? req.keys.length\n            : 'values' in req && req.values\n                ? req.values.length\n                : 1;\n        if (res.numFailures === numBulkOps) {\n            return null;\n        }\n        var clone = __assign({}, req);\n        if (isArray(clone.keys)) {\n            clone.keys = clone.keys.filter(function (_, i) { return !(i in res.failures); });\n        }\n        if ('values' in clone && isArray(clone.values)) {\n            clone.values = clone.values.filter(function (_, i) { return !(i in res.failures); });\n        }\n        return clone;\n    }\n\n    function isAboveLower(key, range) {\n        return range.lower === undefined\n            ? true\n            : range.lowerOpen\n                ? cmp(key, range.lower) > 0\n                : cmp(key, range.lower) >= 0;\n    }\n    function isBelowUpper(key, range) {\n        return range.upper === undefined\n            ? true\n            : range.upperOpen\n                ? cmp(key, range.upper) < 0\n                : cmp(key, range.upper) <= 0;\n    }\n    function isWithinRange(key, range) {\n        return isAboveLower(key, range) && isBelowUpper(key, range);\n    }\n\n    function applyOptimisticOps(result, req, ops, table, cacheEntry, immutable) {\n        if (!ops || ops.length === 0)\n            return result;\n        var index = req.query.index;\n        var multiEntry = index.multiEntry;\n        var queryRange = req.query.range;\n        var primaryKey = table.schema.primaryKey;\n        var extractPrimKey = primaryKey.extractKey;\n        var extractIndex = index.extractKey;\n        var extractLowLevelIndex = (index.lowLevelIndex || index).extractKey;\n        var finalResult = ops.reduce(function (result, op) {\n            var modifedResult = result;\n            var includedValues = [];\n            if (op.type === 'add' || op.type === 'put') {\n                var includedPKs = new RangeSet();\n                for (var i = op.values.length - 1; i >= 0; --i) {\n                    var value = op.values[i];\n                    var pk = extractPrimKey(value);\n                    if (includedPKs.hasKey(pk))\n                        continue;\n                    var key = extractIndex(value);\n                    if (multiEntry && isArray(key)\n                        ? key.some(function (k) { return isWithinRange(k, queryRange); })\n                        : isWithinRange(key, queryRange)) {\n                        includedPKs.addKey(pk);\n                        includedValues.push(value);\n                    }\n                }\n            }\n            switch (op.type) {\n                case 'add': {\n                    var existingKeys_1 = new RangeSet().addKeys(req.values ? result.map(function (v) { return extractPrimKey(v); }) : result);\n                    modifedResult = result.concat(req.values\n                        ? includedValues.filter(function (v) {\n                            var key = extractPrimKey(v);\n                            if (existingKeys_1.hasKey(key))\n                                return false;\n                            existingKeys_1.addKey(key);\n                            return true;\n                        })\n                        : includedValues\n                            .map(function (v) { return extractPrimKey(v); })\n                            .filter(function (k) {\n                            if (existingKeys_1.hasKey(k))\n                                return false;\n                            existingKeys_1.addKey(k);\n                            return true;\n                        }));\n                    break;\n                }\n                case 'put': {\n                    var keySet_1 = new RangeSet().addKeys(op.values.map(function (v) { return extractPrimKey(v); }));\n                    modifedResult = result\n                        .filter(\n                    function (item) { return !keySet_1.hasKey(req.values ? extractPrimKey(item) : item); })\n                        .concat(\n                    req.values\n                        ? includedValues\n                        : includedValues.map(function (v) { return extractPrimKey(v); }));\n                    break;\n                }\n                case 'delete':\n                    var keysToDelete_1 = new RangeSet().addKeys(op.keys);\n                    modifedResult = result.filter(function (item) {\n                        return !keysToDelete_1.hasKey(req.values ? extractPrimKey(item) : item);\n                    });\n                    break;\n                case 'deleteRange':\n                    var range_1 = op.range;\n                    modifedResult = result.filter(function (item) { return !isWithinRange(extractPrimKey(item), range_1); });\n                    break;\n            }\n            return modifedResult;\n        }, result);\n        if (finalResult === result)\n            return result;\n        finalResult.sort(function (a, b) {\n            return cmp(extractLowLevelIndex(a), extractLowLevelIndex(b)) ||\n                cmp(extractPrimKey(a), extractPrimKey(b));\n        });\n        if (req.limit && req.limit < Infinity) {\n            if (finalResult.length > req.limit) {\n                finalResult.length = req.limit;\n            }\n            else if (result.length === req.limit && finalResult.length < req.limit) {\n                cacheEntry.dirty = true;\n            }\n        }\n        return immutable ? Object.freeze(finalResult) : finalResult;\n    }\n\n    function areRangesEqual(r1, r2) {\n        return (cmp(r1.lower, r2.lower) === 0 &&\n            cmp(r1.upper, r2.upper) === 0 &&\n            !!r1.lowerOpen === !!r2.lowerOpen &&\n            !!r1.upperOpen === !!r2.upperOpen);\n    }\n\n    function compareLowers(lower1, lower2, lowerOpen1, lowerOpen2) {\n        if (lower1 === undefined)\n            return lower2 !== undefined ? -1 : 0;\n        if (lower2 === undefined)\n            return 1;\n        var c = cmp(lower1, lower2);\n        if (c === 0) {\n            if (lowerOpen1 && lowerOpen2)\n                return 0;\n            if (lowerOpen1)\n                return 1;\n            if (lowerOpen2)\n                return -1;\n        }\n        return c;\n    }\n    function compareUppers(upper1, upper2, upperOpen1, upperOpen2) {\n        if (upper1 === undefined)\n            return upper2 !== undefined ? 1 : 0;\n        if (upper2 === undefined)\n            return -1;\n        var c = cmp(upper1, upper2);\n        if (c === 0) {\n            if (upperOpen1 && upperOpen2)\n                return 0;\n            if (upperOpen1)\n                return -1;\n            if (upperOpen2)\n                return 1;\n        }\n        return c;\n    }\n    function isSuperRange(r1, r2) {\n        return (compareLowers(r1.lower, r2.lower, r1.lowerOpen, r2.lowerOpen) <= 0 &&\n            compareUppers(r1.upper, r2.upper, r1.upperOpen, r2.upperOpen) >= 0);\n    }\n\n    function findCompatibleQuery(dbName, tableName, type, req) {\n        var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)];\n        if (!tblCache)\n            return [];\n        var queries = tblCache.queries[type];\n        if (!queries)\n            return [null, false, tblCache, null];\n        var indexName = req.query ? req.query.index.name : null;\n        var entries = queries[indexName || ''];\n        if (!entries)\n            return [null, false, tblCache, null];\n        switch (type) {\n            case 'query':\n                var equalEntry = entries.find(function (entry) {\n                    return entry.req.limit === req.limit &&\n                        entry.req.values === req.values &&\n                        areRangesEqual(entry.req.query.range, req.query.range);\n                });\n                if (equalEntry)\n                    return [\n                        equalEntry,\n                        true,\n                        tblCache,\n                        entries,\n                    ];\n                var superEntry = entries.find(function (entry) {\n                    var limit = 'limit' in entry.req ? entry.req.limit : Infinity;\n                    return (limit >= req.limit &&\n                        (req.values ? entry.req.values : true) &&\n                        isSuperRange(entry.req.query.range, req.query.range));\n                });\n                return [superEntry, false, tblCache, entries];\n            case 'count':\n                var countQuery = entries.find(function (entry) {\n                    return areRangesEqual(entry.req.query.range, req.query.range);\n                });\n                return [countQuery, !!countQuery, tblCache, entries];\n        }\n    }\n\n    function subscribeToCacheEntry(cacheEntry, container, requery, signal) {\n        cacheEntry.subscribers.add(requery);\n        signal.addEventListener(\"abort\", function () {\n            cacheEntry.subscribers.delete(requery);\n            if (cacheEntry.subscribers.size === 0) {\n                enqueForDeletion(cacheEntry, container);\n            }\n        });\n    }\n    function enqueForDeletion(cacheEntry, container) {\n        setTimeout(function () {\n            if (cacheEntry.subscribers.size === 0) {\n                delArrayItem(container, cacheEntry);\n            }\n        }, 3000);\n    }\n\n    var cacheMiddleware = {\n        stack: 'dbcore',\n        level: 0,\n        name: 'Cache',\n        create: function (core) {\n            var dbName = core.schema.name;\n            var coreMW = __assign(__assign({}, core), { transaction: function (stores, mode, options) {\n                    var idbtrans = core.transaction(stores, mode, options);\n                    if (mode === 'readwrite') {\n                        var ac_1 = new AbortController();\n                        var signal = ac_1.signal;\n                        var endTransaction = function (wasCommitted) { return function () {\n                            ac_1.abort();\n                            if (mode === 'readwrite') {\n                                var affectedSubscribers_1 = new Set();\n                                for (var _i = 0, stores_1 = stores; _i < stores_1.length; _i++) {\n                                    var storeName = stores_1[_i];\n                                    var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(storeName)];\n                                    if (tblCache) {\n                                        var table = core.table(storeName);\n                                        var ops = tblCache.optimisticOps.filter(function (op) { return op.trans === idbtrans; });\n                                        if (idbtrans._explicit && wasCommitted && idbtrans.mutatedParts) {\n                                            for (var _a = 0, _b = Object.values(tblCache.queries.query); _a < _b.length; _a++) {\n                                                var entries = _b[_a];\n                                                for (var _c = 0, _d = entries.slice(); _c < _d.length; _c++) {\n                                                    var entry = _d[_c];\n                                                    if (obsSetsOverlap(entry.obsSet, idbtrans.mutatedParts)) {\n                                                        delArrayItem(entries, entry);\n                                                        entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });\n                                                    }\n                                                }\n                                            }\n                                        }\n                                        else if (ops.length > 0) {\n                                            tblCache.optimisticOps = tblCache.optimisticOps.filter(function (op) { return op.trans !== idbtrans; });\n                                            for (var _e = 0, _f = Object.values(tblCache.queries.query); _e < _f.length; _e++) {\n                                                var entries = _f[_e];\n                                                for (var _g = 0, _h = entries.slice(); _g < _h.length; _g++) {\n                                                    var entry = _h[_g];\n                                                    if (entry.res != null &&\n                                                        idbtrans.mutatedParts\n    ) {\n                                                        if (wasCommitted && !entry.dirty) {\n                                                            var freezeResults = Object.isFrozen(entry.res);\n                                                            var modRes = applyOptimisticOps(entry.res, entry.req, ops, table, entry, freezeResults);\n                                                            if (entry.dirty) {\n                                                                delArrayItem(entries, entry);\n                                                                entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });\n                                                            }\n                                                            else if (modRes !== entry.res) {\n                                                                entry.res = modRes;\n                                                                entry.promise = DexiePromise.resolve({ result: modRes });\n                                                            }\n                                                        }\n                                                        else {\n                                                            if (entry.dirty) {\n                                                                delArrayItem(entries, entry);\n                                                            }\n                                                            entry.subscribers.forEach(function (requery) { return affectedSubscribers_1.add(requery); });\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                                affectedSubscribers_1.forEach(function (requery) { return requery(); });\n                            }\n                        }; };\n                        idbtrans.addEventListener('abort', endTransaction(false), {\n                            signal: signal,\n                        });\n                        idbtrans.addEventListener('error', endTransaction(false), {\n                            signal: signal,\n                        });\n                        idbtrans.addEventListener('complete', endTransaction(true), {\n                            signal: signal,\n                        });\n                    }\n                    return idbtrans;\n                }, table: function (tableName) {\n                    var downTable = core.table(tableName);\n                    var primKey = downTable.schema.primaryKey;\n                    var tableMW = __assign(__assign({}, downTable), { mutate: function (req) {\n                            var trans = PSD.trans;\n                            if (primKey.outbound ||\n                                trans.db._options.cache === 'disabled' ||\n                                trans.explicit ||\n                                trans.idbtrans.mode !== 'readwrite'\n                            ) {\n                                return downTable.mutate(req);\n                            }\n                            var tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)];\n                            if (!tblCache)\n                                return downTable.mutate(req);\n                            var promise = downTable.mutate(req);\n                            if ((req.type === 'add' || req.type === 'put') && (req.values.length >= 50 || getEffectiveKeys(primKey, req).some(function (key) { return key == null; }))) {\n                                promise.then(function (res) {\n                                    var reqWithResolvedKeys = __assign(__assign({}, req), { values: req.values.map(function (value, i) {\n                                            var _a;\n                                            if (res.failures[i])\n                                                return value;\n                                            var valueWithKey = ((_a = primKey.keyPath) === null || _a === void 0 ? void 0 : _a.includes('.'))\n                                                ? deepClone(value)\n                                                : __assign({}, value);\n                                            setByKeyPath(valueWithKey, primKey.keyPath, res.results[i]);\n                                            return valueWithKey;\n                                        }) });\n                                    var adjustedReq = adjustOptimisticFromFailures(tblCache, reqWithResolvedKeys, res);\n                                    tblCache.optimisticOps.push(adjustedReq);\n                                    queueMicrotask(function () { return req.mutatedParts && signalSubscribersLazily(req.mutatedParts); });\n                                });\n                            }\n                            else {\n                                tblCache.optimisticOps.push(req);\n                                req.mutatedParts && signalSubscribersLazily(req.mutatedParts);\n                                promise.then(function (res) {\n                                    if (res.numFailures > 0) {\n                                        delArrayItem(tblCache.optimisticOps, req);\n                                        var adjustedReq = adjustOptimisticFromFailures(tblCache, req, res);\n                                        if (adjustedReq) {\n                                            tblCache.optimisticOps.push(adjustedReq);\n                                        }\n                                        req.mutatedParts && signalSubscribersLazily(req.mutatedParts);\n                                    }\n                                });\n                                promise.catch(function () {\n                                    delArrayItem(tblCache.optimisticOps, req);\n                                    req.mutatedParts && signalSubscribersLazily(req.mutatedParts);\n                                });\n                            }\n                            return promise;\n                        }, query: function (req) {\n                            var _a;\n                            if (!isCachableContext(PSD, downTable) || !isCachableRequest(\"query\", req))\n                                return downTable.query(req);\n                            var freezeResults = ((_a = PSD.trans) === null || _a === void 0 ? void 0 : _a.db._options.cache) === 'immutable';\n                            var _b = PSD, requery = _b.requery, signal = _b.signal;\n                            var _c = findCompatibleQuery(dbName, tableName, 'query', req), cacheEntry = _c[0], exactMatch = _c[1], tblCache = _c[2], container = _c[3];\n                            if (cacheEntry && exactMatch) {\n                                cacheEntry.obsSet = req.obsSet;\n                            }\n                            else {\n                                var promise = downTable.query(req).then(function (res) {\n                                    var result = res.result;\n                                    if (cacheEntry)\n                                        cacheEntry.res = result;\n                                    if (freezeResults) {\n                                        for (var i = 0, l = result.length; i < l; ++i) {\n                                            Object.freeze(result[i]);\n                                        }\n                                        Object.freeze(result);\n                                    }\n                                    else {\n                                        res.result = deepClone(result);\n                                    }\n                                    return res;\n                                }).catch(function (error) {\n                                    if (container && cacheEntry)\n                                        delArrayItem(container, cacheEntry);\n                                    return Promise.reject(error);\n                                });\n                                cacheEntry = {\n                                    obsSet: req.obsSet,\n                                    promise: promise,\n                                    subscribers: new Set(),\n                                    type: 'query',\n                                    req: req,\n                                    dirty: false,\n                                };\n                                if (container) {\n                                    container.push(cacheEntry);\n                                }\n                                else {\n                                    container = [cacheEntry];\n                                    if (!tblCache) {\n                                        tblCache = cache[\"idb://\".concat(dbName, \"/\").concat(tableName)] = {\n                                            queries: {\n                                                query: {},\n                                                count: {},\n                                            },\n                                            objs: new Map(),\n                                            optimisticOps: [],\n                                            unsignaledParts: {}\n                                        };\n                                    }\n                                    tblCache.queries.query[req.query.index.name || ''] = container;\n                                }\n                            }\n                            subscribeToCacheEntry(cacheEntry, container, requery, signal);\n                            return cacheEntry.promise.then(function (res) {\n                                return {\n                                    result: applyOptimisticOps(res.result, req, tblCache === null || tblCache === void 0 ? void 0 : tblCache.optimisticOps, downTable, cacheEntry, freezeResults),\n                                };\n                            });\n                        } });\n                    return tableMW;\n                } });\n            return coreMW;\n        },\n    };\n\n    function vipify(target, vipDb) {\n        return new Proxy(target, {\n            get: function (target, prop, receiver) {\n                if (prop === 'db')\n                    return vipDb;\n                return Reflect.get(target, prop, receiver);\n            }\n        });\n    }\n\n    var Dexie$1 =  (function () {\n        function Dexie(name, options) {\n            var _this = this;\n            this._middlewares = {};\n            this.verno = 0;\n            var deps = Dexie.dependencies;\n            this._options = options = __assign({\n                addons: Dexie.addons, autoOpen: true,\n                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange, cache: 'cloned' }, options);\n            this._deps = {\n                indexedDB: options.indexedDB,\n                IDBKeyRange: options.IDBKeyRange\n            };\n            var addons = options.addons;\n            this._dbSchema = {};\n            this._versions = [];\n            this._storeNames = [];\n            this._allTables = {};\n            this.idbdb = null;\n            this._novip = this;\n            var state = {\n                dbOpenError: null,\n                isBeingOpened: false,\n                onReadyBeingFired: null,\n                openComplete: false,\n                dbReadyResolve: nop,\n                dbReadyPromise: null,\n                cancelOpen: nop,\n                openCanceller: null,\n                autoSchema: true,\n                PR1398_maxLoop: 3,\n                autoOpen: options.autoOpen,\n            };\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n            this._state = state;\n            this.name = name;\n            this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n            this.once = function (event, callback) {\n                var fn = function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    _this.on(event).unsubscribe(fn);\n                    callback.apply(_this, args);\n                };\n                return _this.on(event, fn);\n            };\n            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n                return function (subscriber, bSticky) {\n                    Dexie.vip(function () {\n                        var state = _this._state;\n                        if (state.openComplete) {\n                            if (!state.dbOpenError)\n                                DexiePromise.resolve().then(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else if (state.onReadyBeingFired) {\n                            state.onReadyBeingFired.push(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else {\n                            subscribe(subscriber);\n                            var db_1 = _this;\n                            if (!bSticky)\n                                subscribe(function unsubscribe() {\n                                    db_1.on.ready.unsubscribe(subscriber);\n                                    db_1.on.ready.unsubscribe(unsubscribe);\n                                });\n                        }\n                    });\n                };\n            });\n            this.Collection = createCollectionConstructor(this);\n            this.Table = createTableConstructor(this);\n            this.Transaction = createTransactionConstructor(this);\n            this.Version = createVersionConstructor(this);\n            this.WhereClause = createWhereClauseConstructor(this);\n            this.on(\"versionchange\", function (ev) {\n                if (ev.newVersion > 0)\n                    console.warn(\"Another connection wants to upgrade database '\".concat(_this.name, \"'. Closing db now to resume the upgrade.\"));\n                else\n                    console.warn(\"Another connection wants to delete database '\".concat(_this.name, \"'. Closing db now to resume the delete request.\"));\n                _this.close({ disableAutoOpen: false });\n            });\n            this.on(\"blocked\", function (ev) {\n                if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                    console.warn(\"Dexie.delete('\".concat(_this.name, \"') was blocked\"));\n                else\n                    console.warn(\"Upgrade '\".concat(_this.name, \"' blocked by other connection holding version \").concat(ev.oldVersion / 10));\n            });\n            this._maxKey = getMaxKey(options.IDBKeyRange);\n            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };\n            this._fireOnBlocked = function (ev) {\n                _this.on(\"blocked\").fire(ev);\n                connections\n                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                    .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n            };\n            this.use(cacheExistingValuesMiddleware);\n            this.use(cacheMiddleware);\n            this.use(observabilityMiddleware);\n            this.use(virtualIndexMiddleware);\n            this.use(hooksMiddleware);\n            var vipDB = new Proxy(this, {\n                get: function (_, prop, receiver) {\n                    if (prop === '_vip')\n                        return true;\n                    if (prop === 'table')\n                        return function (tableName) { return vipify(_this.table(tableName), vipDB); };\n                    var rv = Reflect.get(_, prop, receiver);\n                    if (rv instanceof Table)\n                        return vipify(rv, vipDB);\n                    if (prop === 'tables')\n                        return rv.map(function (t) { return vipify(t, vipDB); });\n                    if (prop === '_createTransaction')\n                        return function () {\n                            var tx = rv.apply(this, arguments);\n                            return vipify(tx, vipDB);\n                        };\n                    return rv;\n                }\n            });\n            this.vip = vipDB;\n            addons.forEach(function (addon) { return addon(_this); });\n        }\n        Dexie.prototype.version = function (versionNumber) {\n            if (isNaN(versionNumber) || versionNumber < 0.1)\n                throw new exceptions.Type(\"Given version is not a positive number\");\n            versionNumber = Math.round(versionNumber * 10) / 10;\n            if (this.idbdb || this._state.isBeingOpened)\n                throw new exceptions.Schema(\"Cannot add version when database is open\");\n            this.verno = Math.max(this.verno, versionNumber);\n            var versions = this._versions;\n            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n            if (versionInstance)\n                return versionInstance;\n            versionInstance = new this.Version(versionNumber);\n            versions.push(versionInstance);\n            versions.sort(lowerVersionFirst);\n            versionInstance.stores({});\n            this._state.autoSchema = false;\n            return versionInstance;\n        };\n        Dexie.prototype._whenReady = function (fn) {\n            var _this = this;\n            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {\n                if (_this._state.openComplete) {\n                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));\n                }\n                if (!_this._state.isBeingOpened) {\n                    if (!_this._state.autoOpen) {\n                        reject(new exceptions.DatabaseClosed());\n                        return;\n                    }\n                    _this.open().catch(nop);\n                }\n                _this._state.dbReadyPromise.then(resolve, reject);\n            }).then(fn);\n        };\n        Dexie.prototype.use = function (_a) {\n            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n            if (name)\n                this.unuse({ stack: stack, name: name });\n            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n            middlewares.sort(function (a, b) { return a.level - b.level; });\n            return this;\n        };\n        Dexie.prototype.unuse = function (_a) {\n            var stack = _a.stack, name = _a.name, create = _a.create;\n            if (stack && this._middlewares[stack]) {\n                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                    return create ? mw.create !== create :\n                        name ? mw.name !== name :\n                            false;\n                });\n            }\n            return this;\n        };\n        Dexie.prototype.open = function () {\n            var _this = this;\n            return usePSD(globalPSD,\n            function () { return dexieOpen(_this); });\n        };\n        Dexie.prototype._close = function () {\n            this.on.close.fire(new CustomEvent('close'));\n            var state = this._state;\n            var idx = connections.indexOf(this);\n            if (idx >= 0)\n                connections.splice(idx, 1);\n            if (this.idbdb) {\n                try {\n                    this.idbdb.close();\n                }\n                catch (e) { }\n                this.idbdb = null;\n            }\n            if (!state.isBeingOpened) {\n                state.dbReadyPromise = new DexiePromise(function (resolve) {\n                    state.dbReadyResolve = resolve;\n                });\n                state.openCanceller = new DexiePromise(function (_, reject) {\n                    state.cancelOpen = reject;\n                });\n            }\n        };\n        Dexie.prototype.close = function (_a) {\n            var _b = _a === void 0 ? { disableAutoOpen: true } : _a, disableAutoOpen = _b.disableAutoOpen;\n            var state = this._state;\n            if (disableAutoOpen) {\n                if (state.isBeingOpened) {\n                    state.cancelOpen(new exceptions.DatabaseClosed());\n                }\n                this._close();\n                state.autoOpen = false;\n                state.dbOpenError = new exceptions.DatabaseClosed();\n            }\n            else {\n                this._close();\n                state.autoOpen = this._options.autoOpen ||\n                    state.isBeingOpened;\n                state.openComplete = false;\n                state.dbOpenError = null;\n            }\n        };\n        Dexie.prototype.delete = function (closeOptions) {\n            var _this = this;\n            if (closeOptions === void 0) { closeOptions = { disableAutoOpen: true }; }\n            var hasInvalidArguments = arguments.length > 0 && typeof arguments[0] !== 'object';\n            var state = this._state;\n            return new DexiePromise(function (resolve, reject) {\n                var doDelete = function () {\n                    _this.close(closeOptions);\n                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                    req.onsuccess = wrap(function () {\n                        _onDatabaseDeleted(_this._deps, _this.name);\n                        resolve();\n                    });\n                    req.onerror = eventRejectHandler(reject);\n                    req.onblocked = _this._fireOnBlocked;\n                };\n                if (hasInvalidArguments)\n                    throw new exceptions.InvalidArgument(\"Invalid closeOptions argument to db.delete()\");\n                if (state.isBeingOpened) {\n                    state.dbReadyPromise.then(doDelete);\n                }\n                else {\n                    doDelete();\n                }\n            });\n        };\n        Dexie.prototype.backendDB = function () {\n            return this.idbdb;\n        };\n        Dexie.prototype.isOpen = function () {\n            return this.idbdb !== null;\n        };\n        Dexie.prototype.hasBeenClosed = function () {\n            var dbOpenError = this._state.dbOpenError;\n            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n        };\n        Dexie.prototype.hasFailed = function () {\n            return this._state.dbOpenError !== null;\n        };\n        Dexie.prototype.dynamicallyOpened = function () {\n            return this._state.autoSchema;\n        };\n        Object.defineProperty(Dexie.prototype, \"tables\", {\n            get: function () {\n                var _this = this;\n                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Dexie.prototype.transaction = function () {\n            var args = extractTransactionArgs.apply(this, arguments);\n            return this._transaction.apply(this, args);\n        };\n        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n            var _this = this;\n            var parentTransaction = PSD.trans;\n            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n                parentTransaction = null;\n            var onlyIfCompatible = mode.indexOf('?') !== -1;\n            mode = mode.replace('!', '').replace('?', '');\n            var idbMode, storeNames;\n            try {\n                storeNames = tables.map(function (table) {\n                    var storeName = table instanceof _this.Table ? table.name : table;\n                    if (typeof storeName !== 'string')\n                        throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                    return storeName;\n                });\n                if (mode == \"r\" || mode === READONLY)\n                    idbMode = READONLY;\n                else if (mode == \"rw\" || mode == READWRITE)\n                    idbMode = READWRITE;\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n                if (parentTransaction) {\n                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                        if (onlyIfCompatible) {\n                            parentTransaction = null;\n                        }\n                        else\n                            throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                    }\n                    if (parentTransaction) {\n                        storeNames.forEach(function (storeName) {\n                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                                if (onlyIfCompatible) {\n                                    parentTransaction = null;\n                                }\n                                else\n                                    throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                        \" not included in parent transaction.\");\n                            }\n                        });\n                    }\n                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                        parentTransaction = null;\n                    }\n                }\n            }\n            catch (e) {\n                return parentTransaction ?\n                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                    rejection(e);\n            }\n            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n            return (parentTransaction ?\n                parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n                PSD.trans ?\n                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                    this._whenReady(enterTransaction));\n        };\n        Dexie.prototype.table = function (tableName) {\n            if (!hasOwn(this._allTables, tableName)) {\n                throw new exceptions.InvalidTable(\"Table \".concat(tableName, \" does not exist\"));\n            }\n            return this._allTables[tableName];\n        };\n        return Dexie;\n    }());\n\n    var symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n        ? Symbol.observable\n        : \"@@observable\";\n    var Observable =  (function () {\n        function Observable(subscribe) {\n            this._subscribe = subscribe;\n        }\n        Observable.prototype.subscribe = function (x, error, complete) {\n            return this._subscribe(!x || typeof x === \"function\" ? { next: x, error: error, complete: complete } : x);\n        };\n        Observable.prototype[symbolObservable] = function () {\n            return this;\n        };\n        return Observable;\n    }());\n\n    var domDeps;\n    try {\n        domDeps = {\n            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n        };\n    }\n    catch (e) {\n        domDeps = { indexedDB: null, IDBKeyRange: null };\n    }\n\n    function liveQuery(querier) {\n        var hasValue = false;\n        var currentValue;\n        var observable = new Observable(function (observer) {\n            var scopeFuncIsAsync = isAsyncFunction(querier);\n            function execute(ctx) {\n                var wasRootExec = beginMicroTickScope();\n                try {\n                    if (scopeFuncIsAsync) {\n                        incrementExpectedAwaits();\n                    }\n                    var rv = newScope(querier, ctx);\n                    if (scopeFuncIsAsync) {\n                        rv = rv.finally(decrementExpectedAwaits);\n                    }\n                    return rv;\n                }\n                finally {\n                    wasRootExec && endMicroTickScope();\n                }\n            }\n            var closed = false;\n            var abortController;\n            var accumMuts = {};\n            var currentObs = {};\n            var subscription = {\n                get closed() {\n                    return closed;\n                },\n                unsubscribe: function () {\n                    if (closed)\n                        return;\n                    closed = true;\n                    if (abortController)\n                        abortController.abort();\n                    if (startedListening)\n                        globalEvents.storagemutated.unsubscribe(mutationListener);\n                },\n            };\n            observer.start && observer.start(subscription);\n            var startedListening = false;\n            var doQuery = function () { return execInGlobalContext(_doQuery); };\n            function shouldNotify() {\n                return obsSetsOverlap(currentObs, accumMuts);\n            }\n            var mutationListener = function (parts) {\n                extendObservabilitySet(accumMuts, parts);\n                if (shouldNotify()) {\n                    doQuery();\n                }\n            };\n            var _doQuery = function () {\n                if (closed ||\n                    !domDeps.indexedDB)\n                 {\n                    return;\n                }\n                accumMuts = {};\n                var subscr = {};\n                if (abortController)\n                    abortController.abort();\n                abortController = new AbortController();\n                var ctx = {\n                    subscr: subscr,\n                    signal: abortController.signal,\n                    requery: doQuery,\n                    querier: querier,\n                    trans: null\n                };\n                var ret = execute(ctx);\n                Promise.resolve(ret).then(function (result) {\n                    hasValue = true;\n                    currentValue = result;\n                    if (closed || ctx.signal.aborted) {\n                        return;\n                    }\n                    accumMuts = {};\n                    currentObs = subscr;\n                    if (!objectIsEmpty(currentObs) && !startedListening) {\n                        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                        startedListening = true;\n                    }\n                    execInGlobalContext(function () { return !closed && observer.next && observer.next(result); });\n                }, function (err) {\n                    hasValue = false;\n                    if (!['DatabaseClosedError', 'AbortError'].includes(err === null || err === void 0 ? void 0 : err.name)) {\n                        if (!closed)\n                            execInGlobalContext(function () {\n                                if (closed)\n                                    return;\n                                observer.error && observer.error(err);\n                            });\n                    }\n                });\n            };\n            setTimeout(doQuery, 0);\n            return subscription;\n        });\n        observable.hasValue = function () { return hasValue; };\n        observable.getValue = function () { return currentValue; };\n        return observable;\n    }\n\n    var Dexie = Dexie$1;\n    props(Dexie, __assign(__assign({}, fullNameExceptions), {\n        delete: function (databaseName) {\n            var db = new Dexie(databaseName, { addons: [] });\n            return db.delete();\n        },\n        exists: function (name) {\n            return new Dexie(name, { addons: [] }).open().then(function (db) {\n                db.close();\n                return true;\n            }).catch('NoSuchDatabaseError', function () { return false; });\n        },\n        getDatabaseNames: function (cb) {\n            try {\n                return getDatabaseNames(Dexie.dependencies).then(cb);\n            }\n            catch (_a) {\n                return rejection(new exceptions.MissingAPI());\n            }\n        },\n        defineClass: function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return Class;\n        }, ignoreTransaction: function (scopeFunc) {\n            return PSD.trans ?\n                usePSD(PSD.transless, scopeFunc) :\n                scopeFunc();\n        }, vip: vip, async: function (generatorFn) {\n            return function () {\n                try {\n                    var rv = awaitIterator(generatorFn.apply(this, arguments));\n                    if (!rv || typeof rv.then !== 'function')\n                        return DexiePromise.resolve(rv);\n                    return rv;\n                }\n                catch (e) {\n                    return rejection(e);\n                }\n            };\n        }, spawn: function (generatorFn, args, thiz) {\n            try {\n                var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        },\n        currentTransaction: {\n            get: function () { return PSD.trans || null; }\n        }, waitFor: function (promiseOrFunction, optionalTimeout) {\n            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n                Dexie.ignoreTransaction(promiseOrFunction) :\n                promiseOrFunction)\n                .timeout(optionalTimeout || 60000);\n            return PSD.trans ?\n                PSD.trans.waitFor(promise) :\n                promise;\n        },\n        Promise: DexiePromise,\n        debug: {\n            get: function () { return debug; },\n            set: function (value) {\n                setDebug(value);\n            }\n        },\n        derive: derive, extend: extend, props: props, override: override,\n        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,\n        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,\n        minKey: minKey,\n        addons: [],\n        connections: connections,\n        errnames: errnames,\n        dependencies: domDeps, cache: cache,\n        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n            .map(function (n) { return parseInt(n); })\n            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));\n    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\n    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {\n            if (!propagatingLocally) {\n                var event_1;\n                event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                    detail: updatedParts\n                });\n                propagatingLocally = true;\n                dispatchEvent(event_1);\n                propagatingLocally = false;\n            }\n        });\n        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {\n            var detail = _a.detail;\n            if (!propagatingLocally) {\n                propagateLocally(detail);\n            }\n        });\n    }\n    function propagateLocally(updateParts) {\n        var wasMe = propagatingLocally;\n        try {\n            propagatingLocally = true;\n            globalEvents.storagemutated.fire(updateParts);\n            signalSubscribersNow(updateParts, true);\n        }\n        finally {\n            propagatingLocally = wasMe;\n        }\n    }\n    var propagatingLocally = false;\n\n    var bc;\n    var createBC = function () { };\n    if (typeof BroadcastChannel !== 'undefined') {\n        createBC = function () {\n            bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n            bc.onmessage = function (ev) { return ev.data && propagateLocally(ev.data); };\n        };\n        createBC();\n        if (typeof bc.unref === 'function') {\n            bc.unref();\n        }\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            if (!propagatingLocally) {\n                bc.postMessage(changedParts);\n            }\n        });\n    }\n\n    if (typeof addEventListener !== 'undefined') {\n        addEventListener('pagehide', function (event) {\n            if (!Dexie$1.disableBfCache && event.persisted) {\n                if (debug)\n                    console.debug('Dexie: handling persisted pagehide');\n                bc === null || bc === void 0 ? void 0 : bc.close();\n                for (var _i = 0, connections_1 = connections; _i < connections_1.length; _i++) {\n                    var db = connections_1[_i];\n                    db.close({ disableAutoOpen: false });\n                }\n            }\n        });\n        addEventListener('pageshow', function (event) {\n            if (!Dexie$1.disableBfCache && event.persisted) {\n                if (debug)\n                    console.debug('Dexie: handling persisted pageshow');\n                createBC();\n                propagateLocally({ all: new RangeSet(-Infinity, [[]]) });\n            }\n        });\n    }\n\n    function add(value) {\n        return new PropModification({ add: value });\n    }\n\n    function remove(value) {\n        return new PropModification({ remove: value });\n    }\n\n    function replacePrefix(a, b) {\n        return new PropModification({ replacePrefix: [a, b] });\n    }\n\n    DexiePromise.rejectionMapper = mapError;\n    setDebug(debug);\n\n    var namedExports = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Dexie: Dexie$1,\n        liveQuery: liveQuery,\n        Entity: Entity,\n        cmp: cmp,\n        PropModification: PropModification,\n        replacePrefix: replacePrefix,\n        add: add,\n        remove: remove,\n        'default': Dexie$1,\n        RangeSet: RangeSet,\n        mergeRanges: mergeRanges,\n        rangesOverlap: rangesOverlap\n    });\n\n    __assign(Dexie$1, namedExports, { default: Dexie$1 });\n\n    return Dexie$1;\n\n}));\n//# sourceMappingURL=dexie.js.map\n","// Making the module version consumable via require - to prohibit\n// multiple occurrancies of the same module in the same app\n// (dual package hazard, https://nodejs.org/api/packages.html#dual-package-hazard)\nimport _Dexie from \"./dist/dexie.js\";\nconst DexieSymbol = Symbol.for(\"Dexie\");\nconst Dexie = globalThis[DexieSymbol] || (globalThis[DexieSymbol] = _Dexie);\nif (_Dexie.semVer !== Dexie.semVer) {\n    throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);\n}\nconst { liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Entity,\n    PropModification, replacePrefix, add, remove,\n    DexieYProvider } = Dexie;\nexport { liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Dexie, Entity,\n    PropModification, replacePrefix, add, remove,\n    DexieYProvider};\n    \nexport default Dexie;\n","// IndexedDB database using Dexie.js\n// This provides a structured, indexed storage layer for bookmarks and enrichment data\n\nimport Dexie from 'dexie';\n\n// Initialize Dexie database\nexport const db = new Dexie('BookmarkInsightsDB');\n\n// Define schema version 1\ndb.version(1).stores({\n  bookmarks: 'id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId',\n  enrichmentQueue: '++queueId, bookmarkId, addedAt, priority',\n  events: '++eventId, bookmarkId, type, timestamp',\n  cache: 'key',\n  settings: 'key'\n});\n\n// Schema version 2: Add rawMetadata field for comprehensive data storage\ndb.version(2).stores({\n  bookmarks: 'id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId',\n  enrichmentQueue: '++queueId, bookmarkId, addedAt, priority',\n  events: '++eventId, bookmarkId, type, timestamp',\n  cache: 'key',\n  settings: 'key'\n}).upgrade(tx => {\n  console.log('Upgrading database to version 2 - adding rawMetadata support');\n  // No need to modify existing records, new field will be added on enrichment\n});\n\n// Schema version 3: Add similarities and computedMetrics tables for caching\ndb.version(3).stores({\n  bookmarks: 'id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId',\n  enrichmentQueue: '++queueId, bookmarkId, addedAt, priority',\n  events: '++eventId, bookmarkId, type, timestamp',\n  cache: 'key',\n  settings: 'key',\n  similarities: '++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]',\n  computedMetrics: 'key'\n}).upgrade(tx => {\n  console.log('Upgrading database to version 3 - adding similarities and computedMetrics tables');\n});\n\n// Define default settings\nconst DEFAULT_SETTINGS = {\n  enrichmentEnabled: true,\n  enrichmentSchedule: 'manual', // 'manual' only - user triggers enrichment\n  enrichmentBatchSize: 20,\n  enrichmentConcurrency: 3, // Number of parallel requests (1-10)\n  enrichmentRateLimit: 1000, // milliseconds between requests (deprecated with concurrency)\n  enrichmentFreshnessDays: 30, // Re-enrich bookmarks older than this many days (0 = always re-enrich)\n  autoCategorizationEnabled: true,\n  deadLinkCheckEnabled: true,\n  privacyMode: false, // If true, skip enrichment entirely\n  trackBrowsingBehavior: false // If false, don't track tab visits (default OFF for privacy)\n};\n\n// Initialize settings\nexport async function initializeSettings() {\n  try {\n    const existingSettings = await db.settings.get('app');\n    if (!existingSettings) {\n      await db.settings.put({ key: 'app', ...DEFAULT_SETTINGS });\n    }\n  } catch (error) {\n    console.error('Error initializing settings:', error);\n  }\n}\n\n// Get current settings\nexport async function getSettings() {\n  try {\n    const settings = await db.settings.get('app');\n    return settings || DEFAULT_SETTINGS;\n  } catch (error) {\n    console.error('Error getting settings:', error);\n    return DEFAULT_SETTINGS;\n  }\n}\n\n// Update settings\nexport async function updateSettings(newSettings) {\n  try {\n    const current = await getSettings();\n    await db.settings.put({ key: 'app', ...current, ...newSettings });\n    return true;\n  } catch (error) {\n    console.error('Error updating settings:', error);\n    return false;\n  }\n}\n\n// Migration: Import data from chrome.storage.local to IndexedDB\nexport async function migrateFromChromeStorage() {\n  try {\n    // Check if migration has already been done\n    const migrationStatus = await db.settings.get('migration');\n    if (migrationStatus && migrationStatus.completed) {\n      console.log('Migration already completed');\n      return { success: true, alreadyMigrated: true };\n    }\n\n    console.log('Starting migration from chrome.storage.local to IndexedDB...');\n    \n    // Get existing data from chrome.storage.local\n    const result = await chrome.storage.local.get(['bookmarks', 'lastSyncTime']);\n    const oldBookmarks = result.bookmarks || [];\n    \n    if (oldBookmarks.length === 0) {\n      console.log('No bookmarks to migrate');\n      await db.settings.put({ key: 'migration', completed: true, timestamp: Date.now(), count: 0 });\n      return { success: true, count: 0 };\n    }\n\n    // Transform old bookmarks to new schema with enrichment fields\n    const newBookmarks = oldBookmarks.map(bookmark => ({\n      ...bookmark,\n      // New enrichment fields\n      description: null,\n      keywords: [],\n      category: null,\n      tags: [],\n      isAlive: null, // null = unknown, true = alive, false = dead\n      lastChecked: null,\n      faviconUrl: null,\n      contentSnippet: null,\n      lastAccessed: null,\n      accessCount: 0\n    }));\n\n    // Bulk insert into IndexedDB\n    await db.bookmarks.bulkPut(newBookmarks);\n    \n    // Mark migration as complete\n    await db.settings.put({ \n      key: 'migration', \n      completed: true, \n      timestamp: Date.now(), \n      count: newBookmarks.length,\n      oldSyncTime: result.lastSyncTime\n    });\n\n    console.log(`Successfully migrated ${newBookmarks.length} bookmarks`);\n    return { success: true, count: newBookmarks.length };\n  } catch (error) {\n    console.error('Migration error:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// Get all bookmarks from IndexedDB\nexport async function getAllBookmarks() {\n  try {\n    return await db.bookmarks.toArray();\n  } catch (error) {\n    console.error('Error getting bookmarks:', error);\n    return [];\n  }\n}\n\n// Get bookmark by ID\nexport async function getBookmark(id) {\n  try {\n    return await db.bookmarks.get(id);\n  } catch (error) {\n    console.error('Error getting bookmark:', error);\n    return null;\n  }\n}\n\n// Add or update a bookmark\nexport async function upsertBookmark(bookmark) {\n  try {\n    await db.bookmarks.put(bookmark);\n    return true;\n  } catch (error) {\n    console.error('Error upserting bookmark:', error);\n    return false;\n  }\n}\n\n// Add multiple bookmarks\nexport async function bulkUpsertBookmarks(bookmarks) {\n  try {\n    await db.bookmarks.bulkPut(bookmarks);\n    return true;\n  } catch (error) {\n    console.error('Error bulk upserting bookmarks:', error);\n    return false;\n  }\n}\n\n/**\n * Smart merge bookmarks - preserves enrichment data during sync\n * This fixes the issue where extension updates reset enrichment progress\n * @param {Array} newBookmarks - Fresh bookmarks from Chrome API\n * @returns {Promise<boolean>} Success status\n */\nexport async function smartMergeBookmarks(newBookmarks) {\n  try {\n    // Get all existing bookmarks as a map for fast lookup\n    const existingBookmarks = await db.bookmarks.toArray();\n    const existingMap = new Map(existingBookmarks.map(b => [b.id, b]));\n    \n    // Merge new bookmarks with existing enrichment data\n    const mergedBookmarks = newBookmarks.map(newBookmark => {\n      const existing = existingMap.get(newBookmark.id);\n      \n      if (existing) {\n        // Preserve enrichment data from existing bookmark\n        return {\n          // Chrome bookmark fields (always take fresh)\n          id: newBookmark.id,\n          title: newBookmark.title,\n          url: newBookmark.url,\n          dateAdded: newBookmark.dateAdded,\n          parentId: newBookmark.parentId,\n          folderPath: newBookmark.folderPath,\n          domain: newBookmark.domain,\n          // Enrichment fields (preserve existing)\n          description: existing.description ?? null,\n          keywords: existing.keywords ?? [],\n          category: existing.category ?? null,\n          tags: existing.tags ?? [],\n          isAlive: existing.isAlive ?? null,\n          lastChecked: existing.lastChecked ?? null,\n          faviconUrl: existing.faviconUrl ?? null,\n          contentSnippet: existing.contentSnippet ?? null,\n          rawMetadata: existing.rawMetadata ?? null,\n          lastAccessed: existing.lastAccessed ?? null,\n          accessCount: existing.accessCount ?? 0,\n        };\n      }\n      \n      // New bookmark - use default enrichment fields\n      return {\n        ...newBookmark,\n        description: null,\n        keywords: [],\n        category: null,\n        tags: [],\n        isAlive: null,\n        lastChecked: null,\n        faviconUrl: null,\n        contentSnippet: null,\n        rawMetadata: null,\n        lastAccessed: null,\n        accessCount: 0,\n      };\n    });\n    \n    // Bulk upsert the merged bookmarks\n    await db.bookmarks.bulkPut(mergedBookmarks);\n    \n    console.log(`Smart merged ${mergedBookmarks.length} bookmarks (${newBookmarks.length - existingMap.size} new, ${existingMap.size} updated)`);\n    return true;\n  } catch (error) {\n    console.error('Error smart merging bookmarks:', error);\n    return false;\n  }\n}\n\n// Delete a bookmark\nexport async function deleteBookmark(id) {\n  try {\n    await db.bookmarks.delete(id);\n    return true;\n  } catch (error) {\n    console.error('Error deleting bookmark:', error);\n    return false;\n  }\n}\n\n// Search bookmarks (basic implementation, will be enhanced with FlexSearch later)\nexport async function searchBookmarks(query) {\n  try {\n    if (!query || !query.trim()) {\n      return await db.bookmarks.orderBy('dateAdded').reverse().toArray();\n    }\n\n    const lowerQuery = query.toLowerCase();\n    const bookmarks = await db.bookmarks.toArray();\n    \n    return bookmarks.filter(bookmark => \n      bookmark.title.toLowerCase().includes(lowerQuery) ||\n      bookmark.url.toLowerCase().includes(lowerQuery) ||\n      (bookmark.domain && bookmark.domain.toLowerCase().includes(lowerQuery)) ||\n      (bookmark.description && bookmark.description.toLowerCase().includes(lowerQuery)) ||\n      (bookmark.keywords && bookmark.keywords.some(k => k.toLowerCase().includes(lowerQuery)))\n    ).sort((a, b) => b.dateAdded - a.dateAdded);\n  } catch (error) {\n    console.error('Search error:', error);\n    return [];\n  }\n}\n\n// Get bookmarks by domain\nexport async function getBookmarksByDomain(domain) {\n  try {\n    return await db.bookmarks.where('domain').equals(domain).toArray();\n  } catch (error) {\n    console.error('Error getting bookmarks by domain:', error);\n    return [];\n  }\n}\n\n// Get bookmarks by category\nexport async function getBookmarksByCategory(category) {\n  try {\n    return await db.bookmarks.where('category').equals(category).toArray();\n  } catch (error) {\n    console.error('Error getting bookmarks by category:', error);\n    return [];\n  }\n}\n\n// Get bookmarks by date range\nexport async function getBookmarksByDateRange(startDate, endDate) {\n  try {\n    return await db.bookmarks\n      .where('dateAdded')\n      .between(startDate, endDate, true, true)\n      .toArray();\n  } catch (error) {\n    console.error('Error getting bookmarks by date range:', error);\n    return [];\n  }\n}\n\n// Get unique domains\nexport async function getUniqueDomains() {\n  try {\n    const bookmarks = await db.bookmarks.toArray();\n    const domains = [...new Set(bookmarks.map(b => b.domain).filter(d => d))];\n    return domains.sort();\n  } catch (error) {\n    console.error('Error getting unique domains:', error);\n    return [];\n  }\n}\n\n// Get unique categories\nexport async function getUniqueCategories() {\n  try {\n    const bookmarks = await db.bookmarks.toArray();\n    const categories = [...new Set(bookmarks.map(b => b.category).filter(c => c))];\n    return categories.sort();\n  } catch (error) {\n    console.error('Error getting unique categories:', error);\n    return [];\n  }\n}\n\n// Get domain statistics\nexport async function getDomainStats() {\n  try {\n    const bookmarks = await db.bookmarks.toArray();\n    const domainCount = {};\n    \n    bookmarks.forEach(bookmark => {\n      if (bookmark.domain) {\n        domainCount[bookmark.domain] = (domainCount[bookmark.domain] || 0) + 1;\n      }\n    });\n    \n    return Object.entries(domainCount)\n      .sort(([, a], [, b]) => b - a)\n      .slice(0, 10);\n  } catch (error) {\n    console.error('Error getting domain stats:', error);\n    return [];\n  }\n}\n\n// Get activity timeline\nexport async function getActivityTimeline() {\n  try {\n    const bookmarks = await db.bookmarks.toArray();\n    const monthlyCount = {};\n    \n    bookmarks.forEach(bookmark => {\n      const date = new Date(bookmark.dateAdded);\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      monthlyCount[monthKey] = (monthlyCount[monthKey] || 0) + 1;\n    });\n    \n    return Object.entries(monthlyCount).sort();\n  } catch (error) {\n    console.error('Error getting activity timeline:', error);\n    return [];\n  }\n}\n\n// Event logging\nexport async function logEvent(bookmarkId, type, metadata = {}) {\n  try {\n    await db.events.add({\n      bookmarkId,\n      type, // 'create', 'delete', 'access', 'update', 'enrichment'\n      timestamp: Date.now(),\n      ...metadata\n    });\n    return true;\n  } catch (error) {\n    console.error('Error logging event:', error);\n    return false;\n  }\n}\n\n// Get events for a bookmark\nexport async function getBookmarkEvents(bookmarkId, limit = 50) {\n  try {\n    return await db.events\n      .where('bookmarkId').equals(bookmarkId)\n      .reverse()\n      .limit(limit)\n      .toArray();\n  } catch (error) {\n    console.error('Error getting bookmark events:', error);\n    return [];\n  }\n}\n\n// Get recent events\nexport async function getRecentEvents(limit = 100) {\n  try {\n    return await db.events\n      .orderBy('timestamp')\n      .reverse()\n      .limit(limit)\n      .toArray();\n  } catch (error) {\n    console.error('Error getting recent events:', error);\n    return [];\n  }\n}\n\n// Cache operations\nexport async function setCache(key, value, ttl = null) {\n  try {\n    await db.cache.put({\n      key,\n      value,\n      timestamp: Date.now(),\n      ttl\n    });\n    return true;\n  } catch (error) {\n    console.error('Error setting cache:', error);\n    return false;\n  }\n}\n\nexport async function getCache(key) {\n  try {\n    const cached = await db.cache.get(key);\n    if (!cached) return null;\n    \n    // Check TTL\n    if (cached.ttl && Date.now() - cached.timestamp > cached.ttl) {\n      await db.cache.delete(key);\n      return null;\n    }\n    \n    return cached.value;\n  } catch (error) {\n    console.error('Error getting cache:', error);\n    return null;\n  }\n}\n\nexport async function clearCache(keyPattern = null) {\n  try {\n    if (keyPattern) {\n      const allCache = await db.cache.toArray();\n      const toDelete = allCache.filter(c => c.key.includes(keyPattern)).map(c => c.key);\n      await db.cache.bulkDelete(toDelete);\n    } else {\n      await db.cache.clear();\n    }\n    return true;\n  } catch (error) {\n    console.error('Error clearing cache:', error);\n    return false;\n  }\n}\n\n// Enrichment queue operations\nexport async function addToEnrichmentQueue(bookmarkId, priority = 0) {\n  try {\n    // Check if already in queue\n    const existing = await db.enrichmentQueue.where('bookmarkId').equals(bookmarkId).first();\n    if (existing) {\n      return false; // Already queued\n    }\n    \n    await db.enrichmentQueue.add({\n      bookmarkId,\n      addedAt: Date.now(),\n      priority // Higher priority = processed first\n    });\n    return true;\n  } catch (error) {\n    console.error('Error adding to enrichment queue:', error);\n    return false;\n  }\n}\n\nexport async function getNextEnrichmentBatch(batchSize = 20) {\n  try {\n    return await db.enrichmentQueue\n      .orderBy('priority')\n      .reverse()\n      .limit(batchSize)\n      .toArray();\n  } catch (error) {\n    console.error('Error getting enrichment batch:', error);\n    return [];\n  }\n}\n\nexport async function removeFromEnrichmentQueue(queueId) {\n  try {\n    await db.enrichmentQueue.delete(queueId);\n    return true;\n  } catch (error) {\n    console.error('Error removing from enrichment queue:', error);\n    return false;\n  }\n}\n\nexport async function clearEnrichmentQueue() {\n  try {\n    await db.enrichmentQueue.clear();\n    return true;\n  } catch (error) {\n    console.error('Error clearing enrichment queue:', error);\n    return false;\n  }\n}\n\nexport async function getEnrichmentQueueSize() {\n  try {\n    return await db.enrichmentQueue.count();\n  } catch (error) {\n    console.error('Error getting queue size:', error);\n    return 0;\n  }\n}\n\n// Initialize database\nexport async function initializeDatabase() {\n  try {\n    await initializeSettings();\n    const migrationResult = await migrateFromChromeStorage();\n    console.log('Database initialized', migrationResult);\n    return migrationResult;\n  } catch (error) {\n    console.error('Error initializing database:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n// =============================================\n// Computed Metrics Caching System\n// =============================================\n\n/**\n * Cache duration constants (in milliseconds)\n */\nconst CACHE_DURATIONS = {\n  domainStats: 60 * 60 * 1000,      // 1 hour\n  activityTimeline: 6 * 60 * 60 * 1000,  // 6 hours\n  wordFrequency: 24 * 60 * 60 * 1000,    // 24 hours\n  ageDistribution: 6 * 60 * 60 * 1000,   // 6 hours\n  categoryTrends: 24 * 60 * 60 * 1000,   // 24 hours\n  expertiseAreas: 24 * 60 * 60 * 1000,   // 24 hours\n  quickStats: 5 * 60 * 1000,             // 5 minutes\n  duplicates: 24 * 60 * 60 * 1000,       // 24 hours\n  similarities: 24 * 60 * 60 * 1000,     // 24 hours\n  insightsSummary: 5 * 60 * 1000,        // 5 minutes\n};\n\n/**\n * Generic cached metric getter\n * @param {string} key - Cache key\n * @param {Function} computeFn - Function to compute the metric if not cached\n * @param {number} ttlMs - Time to live in milliseconds\n * @returns {Promise<any>} Cached or computed data\n */\nexport async function getCachedMetric(key, computeFn, ttlMs) {\n  try {\n    const cached = await db.computedMetrics.get(key);\n    if (cached && cached.validUntil > Date.now()) {\n      console.log(`Cache hit for metric: ${key}`);\n      return cached.data;\n    }\n    \n    console.log(`Cache miss for metric: ${key}, computing...`);\n    const data = await computeFn();\n    \n    await db.computedMetrics.put({\n      key,\n      data,\n      computedAt: Date.now(),\n      validUntil: Date.now() + ttlMs\n    });\n    \n    return data;\n  } catch (error) {\n    console.error(`Error getting cached metric ${key}:`, error);\n    // Fall back to computing without cache\n    return computeFn();\n  }\n}\n\n/**\n * Invalidate specific metric caches based on change type\n * @param {string} changeType - Type of change: 'add', 'delete', 'update', 'enrich'\n */\nexport async function invalidateMetricCaches(changeType) {\n  const keysToInvalidate = {\n    'add': ['domainStats', 'quickStats', 'activityTimeline', 'ageDistribution', 'insightsSummary'],\n    'delete': ['domainStats', 'quickStats', 'duplicates', 'similarities', 'insightsSummary'],\n    'update': ['quickStats', 'insightsSummary'],\n    'enrich': ['categoryTrends', 'expertiseAreas', 'insightsSummary', 'quickStats'],\n    'all': Object.keys(CACHE_DURATIONS) // Invalidate all\n  };\n  \n  const keys = keysToInvalidate[changeType] || [];\n  \n  try {\n    for (const key of keys) {\n      await db.computedMetrics.delete(key);\n    }\n    console.log(`Invalidated caches for change type: ${changeType}`, keys);\n  } catch (error) {\n    console.error('Error invalidating metric caches:', error);\n  }\n}\n\n/**\n * Clear all computed metrics (useful for debugging or forced refresh)\n */\nexport async function clearAllMetricCaches() {\n  try {\n    await db.computedMetrics.clear();\n    console.log('Cleared all metric caches');\n    return true;\n  } catch (error) {\n    console.error('Error clearing metric caches:', error);\n    return false;\n  }\n}\n\n// =============================================\n// Similarity Storage Functions\n// =============================================\n\n/**\n * Store similarity results for a bookmark\n * @param {string} bookmarkId - Source bookmark ID\n * @param {Array} similarities - Array of {bookmark2Id, score} objects\n */\nexport async function storeSimilarities(bookmarkId, similarities) {\n  try {\n    // Remove old similarities for this bookmark\n    await db.similarities.where('bookmark1Id').equals(bookmarkId).delete();\n    \n    // Add new similarities\n    const records = similarities.map(sim => ({\n      bookmark1Id: bookmarkId,\n      bookmark2Id: sim.bookmark2Id,\n      score: sim.score,\n      computedAt: Date.now()\n    }));\n    \n    await db.similarities.bulkAdd(records);\n    return true;\n  } catch (error) {\n    console.error('Error storing similarities:', error);\n    return false;\n  }\n}\n\n/**\n * Get stored similar bookmarks for a specific bookmark\n * @param {string} bookmarkId - Bookmark ID\n * @returns {Promise<Array>} Array of similar bookmarks with scores\n */\nexport async function getStoredSimilarities(bookmarkId) {\n  try {\n    return await db.similarities.where('bookmark1Id').equals(bookmarkId).toArray();\n  } catch (error) {\n    console.error('Error getting stored similarities:', error);\n    return [];\n  }\n}\n\n/**\n * Clear all stored similarities (call when bookmarks are deleted)\n */\nexport async function clearSimilarities() {\n  try {\n    await db.similarities.clear();\n    return true;\n  } catch (error) {\n    console.error('Error clearing similarities:', error);\n    return false;\n  }\n}\n\n// Export cache durations for use in other modules\nexport { CACHE_DURATIONS };\n\n// =============================================\n// Consolidated Analytics Functions\n// (Migrated from database.js for single source of truth)\n// =============================================\n\n/**\n * Get bookmarks with pagination and filtering\n * @param {number} page - Page number (0-indexed)\n * @param {number} pageSize - Items per page\n * @param {Object} filters - Filter options\n * @returns {Promise<Object>} Paginated results\n */\nexport async function getBookmarksPaginated(page = 0, pageSize = 50, filters = {}) {\n  try {\n    let bookmarks = await getAllBookmarks();\n    \n    // Apply multiple filters\n    if (filters.domains && filters.domains.length > 0) {\n      bookmarks = bookmarks.filter(b => filters.domains.includes(b.domain));\n    }\n    \n    if (filters.folders && filters.folders.length > 0) {\n      bookmarks = bookmarks.filter(b => filters.folders.includes(b.folderPath));\n    }\n    \n    if (filters.dateRange) {\n      bookmarks = bookmarks.filter(b => \n        b.dateAdded >= filters.dateRange.startDate && \n        b.dateAdded <= filters.dateRange.endDate\n      );\n    }\n    \n    if (filters.searchQuery) {\n      const lowerQuery = filters.searchQuery.toLowerCase();\n      bookmarks = bookmarks.filter(b => \n        (b.title && b.title.toLowerCase().includes(lowerQuery)) ||\n        (b.url && b.url.toLowerCase().includes(lowerQuery)) ||\n        (b.domain && b.domain.toLowerCase().includes(lowerQuery)) ||\n        (b.description && b.description.toLowerCase().includes(lowerQuery))\n      );\n    }\n    \n    if (filters.category) {\n      bookmarks = bookmarks.filter(b => b.category === filters.category);\n    }\n    \n    if (filters.isEnriched !== undefined) {\n      bookmarks = filters.isEnriched \n        ? bookmarks.filter(b => b.lastChecked) \n        : bookmarks.filter(b => !b.lastChecked);\n    }\n    \n    // Apply sorting\n    const sortBy = filters.sortBy || 'date_desc';\n    switch (sortBy) {\n      case 'date_asc':\n        bookmarks.sort((a, b) => a.dateAdded - b.dateAdded);\n        break;\n      case 'title_asc':\n        bookmarks.sort((a, b) => (a.title || '').localeCompare(b.title || ''));\n        break;\n      case 'title_desc':\n        bookmarks.sort((a, b) => (b.title || '').localeCompare(a.title || ''));\n        break;\n      case 'domain_asc':\n        bookmarks.sort((a, b) => (a.domain || '').localeCompare(b.domain || ''));\n        break;\n      case 'accessed_desc':\n        bookmarks.sort((a, b) => (b.lastAccessed || 0) - (a.lastAccessed || 0));\n        break;\n      case 'date_desc':\n      default:\n        bookmarks.sort((a, b) => b.dateAdded - a.dateAdded);\n        break;\n    }\n    \n    const startIndex = page * pageSize;\n    const endIndex = startIndex + pageSize;\n    \n    return {\n      bookmarks: bookmarks.slice(startIndex, endIndex),\n      totalCount: bookmarks.length,\n      hasMore: endIndex < bookmarks.length,\n      currentPage: page,\n      totalPages: Math.ceil(bookmarks.length / pageSize)\n    };\n  } catch (error) {\n    console.error('Error getting paginated bookmarks:', error);\n    return { bookmarks: [], totalCount: 0, hasMore: false, currentPage: 0, totalPages: 0 };\n  }\n}\n\n/**\n * Get consolidated domain analytics in a single pass\n */\nexport async function getConsolidatedDomainAnalytics() {\n  return getCachedMetric('domainAnalytics', async () => {\n    const bookmarks = await getAllBookmarks();\n    const domainData = {};\n    \n    bookmarks.forEach(bookmark => {\n      if (!bookmark.domain) return;\n      \n      if (!domainData[bookmark.domain]) {\n        domainData[bookmark.domain] = {\n          domain: bookmark.domain,\n          count: 0,\n          latestDate: 0,\n          oldestDate: Infinity,\n          enrichedCount: 0\n        };\n      }\n      \n      const data = domainData[bookmark.domain];\n      data.count++;\n      if (bookmark.lastChecked) data.enrichedCount++;\n      if (bookmark.dateAdded > data.latestDate) data.latestDate = bookmark.dateAdded;\n      if (bookmark.dateAdded < data.oldestDate) data.oldestDate = bookmark.dateAdded;\n    });\n    \n    const domainArray = Object.values(domainData);\n    const totalBookmarks = bookmarks.length;\n    \n    domainArray.forEach(d => {\n      d.percentage = totalBookmarks > 0 ? Math.round((d.count / totalBookmarks) * 100) : 0;\n      d.dateAdded = d.latestDate;\n    });\n    \n    return {\n      byRecency: [...domainArray].sort((a, b) => b.latestDate - a.latestDate),\n      byCount: [...domainArray].sort((a, b) => b.count - a.count),\n      top10: [...domainArray].sort((a, b) => b.count - a.count).slice(0, 10),\n      totalDomains: domainArray.length,\n      totalBookmarks\n    };\n  }, CACHE_DURATIONS.domainStats);\n}\n\n/**\n * Get unique folders from bookmarks\n */\nexport async function getUniqueFolders() {\n  try {\n    const bookmarks = await getAllBookmarks();\n    const folders = [...new Set(bookmarks.map(b => b.folderPath).filter(f => f))];\n    return folders.sort();\n  } catch (error) {\n    console.error('Error getting unique folders:', error);\n    return [];\n  }\n}\n\n/**\n * Get bookmark age distribution\n */\nexport async function getBookmarkAgeDistribution() {\n  return getCachedMetric('ageDistribution', async () => {\n    const bookmarks = await getAllBookmarks();\n    const now = Date.now();\n    const ageGroups = {\n      'Last 24 hours': 0,\n      'Last week': 0,\n      'Last month': 0,\n      'Last 3 months': 0,\n      'Last 6 months': 0,\n      'Last year': 0,\n      'Over 1 year': 0\n    };\n    \n    const DAY = 24 * 60 * 60 * 1000;\n    const WEEK = 7 * DAY;\n    const MONTH = 30 * DAY;\n    \n    bookmarks.forEach(bookmark => {\n      const age = now - bookmark.dateAdded;\n      \n      if (age <= DAY) ageGroups['Last 24 hours']++;\n      else if (age <= WEEK) ageGroups['Last week']++;\n      else if (age <= MONTH) ageGroups['Last month']++;\n      else if (age <= 3 * MONTH) ageGroups['Last 3 months']++;\n      else if (age <= 6 * MONTH) ageGroups['Last 6 months']++;\n      else if (age <= 365 * DAY) ageGroups['Last year']++;\n      else ageGroups['Over 1 year']++;\n    });\n    \n    return Object.entries(ageGroups);\n  }, CACHE_DURATIONS.ageDistribution);\n}\n\n/**\n * Get bookmark creation patterns (hourly, daily, monthly)\n */\nexport async function getBookmarkCreationPatterns() {\n  return getCachedMetric('creationPatterns', async () => {\n    const bookmarks = await getAllBookmarks();\n    const hourPatterns = new Array(24).fill(0);\n    const dayPatterns = new Array(7).fill(0);\n    const monthPatterns = new Array(12).fill(0);\n    \n    const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    \n    bookmarks.forEach(bookmark => {\n      const date = new Date(bookmark.dateAdded);\n      hourPatterns[date.getHours()]++;\n      dayPatterns[date.getDay()]++;\n      monthPatterns[date.getMonth()]++;\n    });\n    \n    return {\n      hourly: hourPatterns.map((count, hour) => [`${hour}:00`, count]),\n      daily: dayPatterns.map((count, day) => [dayNames[day], count]),\n      monthly: monthPatterns.map((count, month) => [monthNames[month], count])\n    };\n  }, CACHE_DURATIONS.ageDistribution);\n}\n\n/**\n * Get title word frequency\n */\nexport async function getTitleWordFrequency() {\n  return getCachedMetric('wordFrequency', async () => {\n    const bookmarks = await getAllBookmarks();\n    const wordCount = {};\n    \n    const stopWords = new Set([\n      'the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by',\n      'is', 'are', 'was', 'were', 'be', 'been', 'have', 'has', 'had', 'do', 'does', 'did',\n      'will', 'would', 'could', 'should', 'may', 'might', 'can', 'about', 'from', 'up', 'out'\n    ]);\n    \n    bookmarks.forEach(bookmark => {\n      if (bookmark.title) {\n        const words = bookmark.title\n          .toLowerCase()\n          .replace(/[^\\w\\s]/g, ' ')\n          .split(/\\s+/)\n          .filter(word => word.length > 2 && !stopWords.has(word));\n        \n        words.forEach(word => {\n          wordCount[word] = (wordCount[word] || 0) + 1;\n        });\n      }\n    });\n    \n    return Object.entries(wordCount)\n      .sort(([, a], [, b]) => b - a)\n      .slice(0, 20);\n  }, CACHE_DURATIONS.wordFrequency);\n}\n\n/**\n * Find duplicate bookmarks\n */\nexport async function findDuplicates() {\n  return getCachedMetric('duplicates', async () => {\n    const bookmarks = await getAllBookmarks();\n    const urlMap = {};\n    \n    bookmarks.forEach(bookmark => {\n      const normalizedUrl = bookmark.url.toLowerCase().replace(/\\/$/, '');\n      if (!urlMap[normalizedUrl]) {\n        urlMap[normalizedUrl] = [];\n      }\n      urlMap[normalizedUrl].push(bookmark);\n    });\n    \n    return Object.values(urlMap).filter(group => group.length > 1);\n  }, CACHE_DURATIONS.duplicates);\n}\n\n/**\n * Find uncategorized bookmarks (in root folders)\n */\nexport async function findUncategorizedBookmarks() {\n  try {\n    const bookmarks = await getAllBookmarks();\n    const rootFolders = ['Bookmarks Bar', 'Other Bookmarks', 'Mobile Bookmarks', ''];\n    \n    return bookmarks.filter(bookmark => {\n      const folderPath = bookmark.folderPath || '';\n      return rootFolders.includes(folderPath) || !folderPath.includes('/');\n    });\n  } catch (error) {\n    console.error('Error finding uncategorized bookmarks:', error);\n    return [];\n  }\n}\n\n/**\n * Find malformed URLs\n */\nexport async function findMalformedUrls() {\n  try {\n    const bookmarks = await getAllBookmarks();\n    \n    const validSchemes = [\n      'http://', 'https://', 'chrome://', 'chrome-extension://',\n      'file://', 'javascript:', 'data:', 'about:', 'mailto:',\n      'tel:', 'ftp://', 'sftp://', 'ssh://'\n    ];\n    \n    return bookmarks.filter(bookmark => {\n      const url = bookmark.url || '';\n      const hasValidScheme = validSchemes.some(scheme => url.startsWith(scheme));\n      return !hasValidScheme || url.trim() === '';\n    });\n  } catch (error) {\n    console.error('Error finding malformed URLs:', error);\n    return [];\n  }\n}\n\n/**\n * Get quick statistics for dashboard\n */\nexport async function getQuickStats() {\n  return getCachedMetric('quickStats', async () => {\n    const bookmarks = await getAllBookmarks();\n    const duplicates = await findDuplicates();\n    const uncategorized = await findUncategorizedBookmarks();\n    const malformed = await findMalformedUrls();\n    \n    const now = Date.now();\n    const oneWeek = 7 * 24 * 60 * 60 * 1000;\n    const oneMonth = 30 * 24 * 60 * 60 * 1000;\n    \n    const enriched = bookmarks.filter(b => b.lastChecked).length;\n    const deadLinks = bookmarks.filter(b => b.isAlive === false).length;\n    const uniqueDomains = new Set(bookmarks.map(b => b.domain).filter(d => d)).size;\n    \n    return {\n      total: bookmarks.length,\n      enriched,\n      pending: bookmarks.length - enriched,\n      enrichedPercentage: bookmarks.length > 0 ? Math.round((enriched / bookmarks.length) * 100) : 0,\n      duplicateGroups: duplicates.length,\n      uncategorized: uncategorized.length,\n      malformed: malformed.length,\n      deadLinks,\n      uniqueDomains,\n      addedThisWeek: bookmarks.filter(b => now - b.dateAdded < oneWeek).length,\n      addedThisMonth: bookmarks.filter(b => now - b.dateAdded < oneMonth).length,\n      oldestBookmark: bookmarks.reduce((oldest, b) => b.dateAdded < oldest ? b.dateAdded : oldest, Date.now()),\n      newestBookmark: bookmarks.reduce((newest, b) => b.dateAdded > newest ? b.dateAdded : newest, 0)\n    };\n  }, CACHE_DURATIONS.quickStats);\n}\n\n/**\n * Export bookmarks to JSON format\n */\nexport async function exportBookmarks() {\n  try {\n    const bookmarks = await getAllBookmarks();\n    return {\n      exportDate: new Date().toISOString(),\n      version: '2.0',\n      totalBookmarks: bookmarks.length,\n      bookmarks: bookmarks\n    };\n  } catch (error) {\n    console.error('Error exporting bookmarks:', error);\n    throw error;\n  }\n}\n\n// =============================================\n// Additional Analytics Functions (migrated from database.js)\n// =============================================\n\n/**\n * Get bookmarks by folder path\n */\nexport async function getBookmarksByFolder(folderPath) {\n  try {\n    const bookmarks = await getAllBookmarks();\n    return bookmarks.filter(bookmark => bookmark.folderPath === folderPath);\n  } catch (error) {\n    console.error('Error getting bookmarks by folder:', error);\n    return [];\n  }\n}\n\n/**\n * Find similar bookmarks using word overlap\n */\nexport async function findSimilarBookmarks(threshold = 0.7, maxPairs = 100) {\n  try {\n    const bookmarks = await getAllBookmarks();\n    const similar = [];\n    \n    // Pre-compute word sets\n    const wordSets = bookmarks.map(b => ({\n      bookmark: b,\n      words: new Set(b.title.toLowerCase().split(/\\s+/).filter(w => w.length > 2))\n    })).filter(item => item.words.size > 0);\n    \n    for (let i = 0; i < wordSets.length; i++) {\n      for (let j = i + 1; j < wordSets.length; j++) {\n        if (wordSets[i].bookmark.url === wordSets[j].bookmark.url) continue;\n        \n        const words1 = wordSets[i].words;\n        const words2 = wordSets[j].words;\n        \n        const intersection = [...words1].filter(w => words2.has(w)).length;\n        const similarity = (2 * intersection) / (words1.size + words2.size);\n        \n        if (similarity >= threshold) {\n          similar.push([wordSets[i].bookmark, wordSets[j].bookmark, similarity]);\n        }\n      }\n      \n      if (similar.length >= maxPairs * 2) break;\n    }\n    \n    return similar.sort((a, b) => b[2] - a[2]).slice(0, maxPairs);\n  } catch (error) {\n    console.error('Error finding similar bookmarks:', error);\n    return [];\n  }\n}\n\n/**\n * Legacy alias for backward compatibility\n */\nexport async function findOrphans() {\n  return findUncategorizedBookmarks();\n}\n\n/**\n * Get domains sorted by recency\n */\nexport async function getDomainsByRecency() {\n  const analytics = await getConsolidatedDomainAnalytics();\n  return analytics.byRecency;\n}\n\n/**\n * Get domains sorted by count\n */\nexport async function getDomainsByCount() {\n  const analytics = await getConsolidatedDomainAnalytics();\n  return analytics.byCount;\n}\n\n/**\n * Delete multiple bookmarks\n */\nexport async function deleteBookmarks(bookmarkIds) {\n  try {\n    const errors = [];\n    \n    // Delete from Chrome bookmarks API\n    for (const id of bookmarkIds) {\n      try {\n        await chrome.bookmarks.remove(id);\n      } catch (error) {\n        console.error(`Error deleting bookmark ${id}:`, error);\n        errors.push({ id, error: error.message });\n      }\n    }\n    \n    // Remove from IndexedDB\n    await db.bookmarks.bulkDelete(bookmarkIds);\n    \n    // Invalidate caches\n    await invalidateMetricCaches('delete');\n    \n    return {\n      success: bookmarkIds.length - errors.length,\n      errors: errors\n    };\n  } catch (error) {\n    console.error('Error deleting bookmarks:', error);\n    throw error;\n  }\n}\n\n/**\n * Get common title patterns\n */\nexport async function getTitlePatterns() {\n  try {\n    const bookmarks = await getAllBookmarks();\n    const patterns = {};\n    \n    bookmarks.forEach(bookmark => {\n      if (bookmark.title) {\n        const title = bookmark.title.toLowerCase();\n        \n        if (title.includes('how to')) patterns['How-to guides'] = (patterns['How-to guides'] || 0) + 1;\n        if (title.includes('tutorial')) patterns['Tutorials'] = (patterns['Tutorials'] || 0) + 1;\n        if (title.includes('documentation') || title.includes('docs')) patterns['Documentation'] = (patterns['Documentation'] || 0) + 1;\n        if (title.includes('api') || title.includes('reference')) patterns['API/Reference'] = (patterns['API/Reference'] || 0) + 1;\n        if (title.includes('blog') || title.includes('article')) patterns['Blog/Articles'] = (patterns['Blog/Articles'] || 0) + 1;\n        if (title.includes('github') || title.includes('repository')) patterns['Code Repositories'] = (patterns['Code Repositories'] || 0) + 1;\n        if (title.includes('video') || title.includes('youtube')) patterns['Videos'] = (patterns['Videos'] || 0) + 1;\n        if (title.includes('tool') || title.includes('app')) patterns['Tools/Apps'] = (patterns['Tools/Apps'] || 0) + 1;\n        \n        if (title.length > 60) patterns['Long titles (60+ chars)'] = (patterns['Long titles (60+ chars)'] || 0) + 1;\n        if (title.split(' ').length <= 3) patterns['Short titles (3 words)'] = (patterns['Short titles (3 words)'] || 0) + 1;\n      }\n    });\n    \n    return Object.entries(patterns).sort(([,a], [,b]) => b - a);\n  } catch (error) {\n    console.error('Error getting title patterns:', error);\n    return [];\n  }\n}\n\n/**\n * Analyze URL patterns\n */\nexport async function getUrlPatterns() {\n  try {\n    const bookmarks = await getAllBookmarks();\n    const protocols = {};\n    const topLevelDomains = {};\n    const pathPatterns = {};\n    const subdomainPatterns = {};\n    \n    bookmarks.forEach(bookmark => {\n      try {\n        const url = new URL(bookmark.url);\n        \n        protocols[url.protocol] = (protocols[url.protocol] || 0) + 1;\n        \n        const domain = url.hostname;\n        const parts = domain.split('.');\n        if (parts.length > 1) {\n          const tld = parts[parts.length - 1];\n          topLevelDomains[tld] = (topLevelDomains[tld] || 0) + 1;\n        }\n        \n        if (parts.length > 2) {\n          const subdomain = parts[0];\n          if (subdomain !== 'www') {\n            subdomainPatterns[subdomain] = (subdomainPatterns[subdomain] || 0) + 1;\n          }\n        }\n        \n        const pathSegments = url.pathname.split('/').filter(segment => segment.length > 0);\n        if (pathSegments.length > 0) {\n          const firstSegment = pathSegments[0];\n          pathPatterns[firstSegment] = (pathPatterns[firstSegment] || 0) + 1;\n        }\n      } catch (e) {\n        // Skip malformed URLs\n      }\n    });\n    \n    return {\n      protocols: Object.entries(protocols).sort(([,a], [,b]) => b - a),\n      topLevelDomains: Object.entries(topLevelDomains).sort(([,a], [,b]) => b - a).slice(0, 10),\n      subdomains: Object.entries(subdomainPatterns).sort(([,a], [,b]) => b - a).slice(0, 10),\n      pathPatterns: Object.entries(pathPatterns).sort(([,a], [,b]) => b - a).slice(0, 15)\n    };\n  } catch (error) {\n    console.error('Error getting URL patterns:', error);\n    return { protocols: [], topLevelDomains: [], subdomains: [], pathPatterns: [] };\n  }\n}\n\n/**\n * Analyze URL parameter usage\n */\nexport async function getUrlParameterUsage() {\n  try {\n    const bookmarks = await getAllBookmarks();\n    const parameterCount = {};\n    let urlsWithParams = 0;\n    let totalUrls = 0;\n    \n    bookmarks.forEach(bookmark => {\n      totalUrls++;\n      try {\n        const url = new URL(bookmark.url);\n        const params = url.searchParams;\n        \n        if (params.toString()) {\n          urlsWithParams++;\n          for (const [key] of params) {\n            parameterCount[key] = (parameterCount[key] || 0) + 1;\n          }\n        }\n      } catch (e) {\n        // Skip malformed URLs\n      }\n    });\n    \n    const parameterUsage = Object.entries(parameterCount)\n      .sort(([,a], [,b]) => b - a)\n      .slice(0, 15);\n    \n    return {\n      parameters: parameterUsage,\n      urlsWithParams,\n      totalUrls,\n      percentage: totalUrls > 0 ? Math.round((urlsWithParams / totalUrls) * 100) : 0\n    };\n  } catch (error) {\n    console.error('Error getting URL parameter usage:', error);\n    return { parameters: [], urlsWithParams: 0, totalUrls: 0, percentage: 0 };\n  }\n}\n\n/**\n * Get domain distribution\n */\nexport async function getDomainDistribution() {\n  try {\n    const bookmarks = await getAllBookmarks();\n    const domainCount = {};\n    \n    bookmarks.forEach(bookmark => {\n      domainCount[bookmark.domain] = (domainCount[bookmark.domain] || 0) + 1;\n    });\n    \n    const sortedDomains = Object.entries(domainCount)\n      .sort(([,a], [,b]) => b - a);\n    \n    const totalBookmarks = bookmarks.length;\n    const top10 = sortedDomains.slice(0, 10);\n    const others = sortedDomains.slice(10);\n    const othersCount = others.reduce((sum, [,count]) => sum + count, 0);\n    \n    const distribution = top10.map(([domain, count]) => ({\n      domain,\n      count,\n      percentage: Math.round((count / totalBookmarks) * 100)\n    }));\n    \n    if (othersCount > 0) {\n      distribution.push({\n        domain: 'Others',\n        count: othersCount,\n        percentage: Math.round((othersCount / totalBookmarks) * 100)\n      });\n    }\n    \n    return distribution;\n  } catch (error) {\n    console.error('Error getting domain distribution:', error);\n    return [];\n  }\n}\n\n/**\n * Get bookmarks that have been detected as dead links\n * Returns bookmarks where isAlive === false (already checked and found dead)\n */\nexport async function getDeadLinks() {\n  try {\n    const bookmarks = await getAllBookmarks();\n    return bookmarks.filter(b => b.isAlive === false);\n  } catch (error) {\n    console.error('Error getting dead links:', error);\n    return [];\n  }\n}\n\n/**\n * Check for dead links\n */\nexport async function checkDeadLinks(bookmarkIds = null, batchSize = 10) {\n  try {\n    const bookmarks = await getAllBookmarks();\n    const toCheck = bookmarkIds \n      ? bookmarks.filter(b => bookmarkIds.includes(b.id))\n      : bookmarks.filter(b => b.url.startsWith('http'));\n    \n    const results = {\n      checked: 0,\n      alive: [],\n      dead: [],\n      errors: [],\n      inProgress: false\n    };\n    \n    for (let i = 0; i < Math.min(toCheck.length, batchSize); i++) {\n      const bookmark = toCheck[i];\n      results.checked++;\n      \n      try {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 5000);\n        \n        await fetch(bookmark.url, {\n          method: 'HEAD',\n          mode: 'no-cors',\n          signal: controller.signal\n        });\n        \n        clearTimeout(timeoutId);\n        results.alive.push(bookmark);\n      } catch (error) {\n        if (error.name === 'AbortError') {\n          results.errors.push({ bookmark, reason: 'timeout' });\n        } else {\n          results.dead.push({ bookmark, reason: error.message });\n        }\n      }\n    }\n    \n    return {\n      ...results,\n      total: toCheck.length,\n      remaining: Math.max(0, toCheck.length - batchSize)\n    };\n  } catch (error) {\n    console.error('Error checking dead links:', error);\n    return { checked: 0, alive: [], dead: [], errors: [], total: 0, remaining: 0 };\n  }\n}\n\n// =============================================\n// Backup & Restore System\n// =============================================\n\n/**\n * Create a full backup of the IndexedDB database\n * @returns {Promise<Object>} Backup object with all data\n */\nexport async function createBackup() {\n  try {\n    const bookmarks = await db.bookmarks.toArray();\n    const settings = await db.settings.toArray();\n    const events = await db.events.orderBy('timestamp').reverse().limit(1000).toArray();\n    const similarities = await db.similarities.toArray();\n    \n    // Get stats for backup metadata\n    const enrichedCount = bookmarks.filter(b => b.lastChecked).length;\n    const categorizedCount = bookmarks.filter(b => b.category).length;\n    \n    const backup = {\n      version: '2.1',\n      schemaVersion: 3,\n      createdAt: new Date().toISOString(),\n      metadata: {\n        totalBookmarks: bookmarks.length,\n        enrichedCount,\n        categorizedCount,\n        eventsCount: events.length,\n        similaritiesCount: similarities.length\n      },\n      data: {\n        bookmarks,\n        settings,\n        events,\n        similarities\n      }\n    };\n    \n    return backup;\n  } catch (error) {\n    console.error('Error creating backup:', error);\n    throw error;\n  }\n}\n\n/**\n * Download backup as a JSON file\n */\nexport async function downloadBackup() {\n  try {\n    const backup = await createBackup();\n    const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    \n    const date = new Date().toISOString().slice(0, 10);\n    const filename = `bookmark-insights-backup-${date}.json`;\n    \n    // Create download link\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n    \n    return { success: true, filename, metadata: backup.metadata };\n  } catch (error) {\n    console.error('Error downloading backup:', error);\n    throw error;\n  }\n}\n\n/**\n * Restore database from a backup file\n * @param {Object} backup - The backup object to restore from\n * @param {Object} options - Restore options\n * @returns {Promise<Object>} Restore result\n */\nexport async function restoreFromBackup(backup, options = {}) {\n  const { \n    restoreBookmarks = true, \n    restoreSettings = true,\n    restoreEvents = false,  // Events are optional\n    restoreSimilarities = true,\n    mergeMode = false  // If true, merge with existing data; if false, replace\n  } = options;\n  \n  try {\n    // Validate backup format\n    if (!backup || !backup.version || !backup.data) {\n      throw new Error('Invalid backup format');\n    }\n    \n    if (!backup.data.bookmarks || !Array.isArray(backup.data.bookmarks)) {\n      throw new Error('Backup does not contain valid bookmarks data');\n    }\n    \n    const results = {\n      bookmarksRestored: 0,\n      settingsRestored: 0,\n      eventsRestored: 0,\n      similaritiesRestored: 0,\n      errors: []\n    };\n    \n    // Restore bookmarks\n    if (restoreBookmarks && backup.data.bookmarks.length > 0) {\n      if (!mergeMode) {\n        await db.bookmarks.clear();\n      }\n      \n      if (mergeMode) {\n        // Merge mode: preserve newer enrichment data\n        const existingBookmarks = await db.bookmarks.toArray();\n        const existingMap = new Map(existingBookmarks.map(b => [b.id, b]));\n        \n        for (const bookmark of backup.data.bookmarks) {\n          const existing = existingMap.get(bookmark.id);\n          if (existing) {\n            // Keep whichever has more recent lastChecked\n            const existingTime = existing.lastChecked || 0;\n            const backupTime = bookmark.lastChecked || 0;\n            if (backupTime > existingTime) {\n              await db.bookmarks.put(bookmark);\n              results.bookmarksRestored++;\n            }\n          } else {\n            await db.bookmarks.put(bookmark);\n            results.bookmarksRestored++;\n          }\n        }\n      } else {\n        // Replace mode: bulk insert\n        await db.bookmarks.bulkPut(backup.data.bookmarks);\n        results.bookmarksRestored = backup.data.bookmarks.length;\n      }\n    }\n    \n    // Restore settings\n    if (restoreSettings && backup.data.settings && backup.data.settings.length > 0) {\n      if (!mergeMode) {\n        await db.settings.clear();\n      }\n      await db.settings.bulkPut(backup.data.settings);\n      results.settingsRestored = backup.data.settings.length;\n    }\n    \n    // Restore events (optional)\n    if (restoreEvents && backup.data.events && backup.data.events.length > 0) {\n      if (!mergeMode) {\n        await db.events.clear();\n      }\n      await db.events.bulkPut(backup.data.events);\n      results.eventsRestored = backup.data.events.length;\n    }\n    \n    // Restore similarities\n    if (restoreSimilarities && backup.data.similarities && backup.data.similarities.length > 0) {\n      if (!mergeMode) {\n        await db.similarities.clear();\n      }\n      await db.similarities.bulkPut(backup.data.similarities);\n      results.similaritiesRestored = backup.data.similarities.length;\n    }\n    \n    // Clear caches after restore\n    await clearAllMetricCaches();\n    \n    return {\n      success: true,\n      results,\n      backupMetadata: backup.metadata\n    };\n  } catch (error) {\n    console.error('Error restoring from backup:', error);\n    throw error;\n  }\n}\n\n/**\n * Validate a backup file before restoring\n * @param {Object} backup - The backup object to validate\n * @returns {Object} Validation result\n */\nexport function validateBackup(backup) {\n  const issues = [];\n  \n  if (!backup) {\n    return { valid: false, issues: ['Backup is empty or null'] };\n  }\n  \n  if (!backup.version) {\n    issues.push('Missing version field');\n  }\n  \n  if (!backup.data) {\n    issues.push('Missing data field');\n  } else {\n    if (!backup.data.bookmarks || !Array.isArray(backup.data.bookmarks)) {\n      issues.push('Missing or invalid bookmarks array');\n    }\n    \n    if (backup.data.bookmarks && backup.data.bookmarks.length > 0) {\n      const sample = backup.data.bookmarks[0];\n      if (!sample.id || !sample.url) {\n        issues.push('Bookmarks are missing required fields (id, url)');\n      }\n    }\n  }\n  \n  return {\n    valid: issues.length === 0,\n    issues,\n    metadata: backup.metadata || null,\n    version: backup.version || 'unknown',\n    createdAt: backup.createdAt || 'unknown'\n  };\n}\n\n/**\n * Create an automatic backup (called before risky operations)\n * Stores backup in chrome.storage.local with rotation (keeps last 3)\n */\nexport async function createAutoBackup() {\n  try {\n    const backup = await createBackup();\n    \n    // Get existing auto-backups\n    const result = await chrome.storage.local.get(['autoBackups']);\n    let autoBackups = result.autoBackups || [];\n    \n    // Add new backup\n    autoBackups.unshift({\n      createdAt: backup.createdAt,\n      metadata: backup.metadata,\n      data: backup.data\n    });\n    \n    // Keep only last 3 auto-backups\n    if (autoBackups.length > 3) {\n      autoBackups = autoBackups.slice(0, 3);\n    }\n    \n    await chrome.storage.local.set({ autoBackups });\n    \n    console.log('Auto-backup created:', backup.metadata);\n    return { success: true, metadata: backup.metadata };\n  } catch (error) {\n    console.error('Error creating auto-backup:', error);\n    return { success: false, error: error.message };\n  }\n}\n\n/**\n * List available auto-backups\n */\nexport async function listAutoBackups() {\n  try {\n    const result = await chrome.storage.local.get(['autoBackups']);\n    const autoBackups = result.autoBackups || [];\n    \n    return autoBackups.map((b, index) => ({\n      index,\n      createdAt: b.createdAt,\n      metadata: b.metadata\n    }));\n  } catch (error) {\n    console.error('Error listing auto-backups:', error);\n    return [];\n  }\n}\n\n/**\n * Restore from an auto-backup by index\n * @param {number} index - The index of the auto-backup to restore (0 = most recent)\n */\nexport async function restoreFromAutoBackup(index = 0) {\n  try {\n    const result = await chrome.storage.local.get(['autoBackups']);\n    const autoBackups = result.autoBackups || [];\n    \n    if (index < 0 || index >= autoBackups.length) {\n      throw new Error(`Invalid backup index: ${index}. Available: 0-${autoBackups.length - 1}`);\n    }\n    \n    const backup = {\n      version: '2.1',\n      ...autoBackups[index]\n    };\n    \n    return await restoreFromBackup(backup);\n  } catch (error) {\n    console.error('Error restoring from auto-backup:', error);\n    throw error;\n  }\n}\n\n\n","// Enrichment engine for bookmark metadata fetching and processing\n// Handles background enrichment, dead-link checking, and auto-categorization\n\nimport { getSettings, getNextEnrichmentBatch, removeFromEnrichmentQueue, upsertBookmark, getBookmark, logEvent } from './db.js';\n\n// Domain-based categorization rules\nconst CATEGORY_RULES = {\n  'github.com': 'code',\n  'gitlab.com': 'code',\n  'bitbucket.org': 'code',\n  'stackoverflow.com': 'code',\n  'stackexchange.com': 'code',\n  'youtube.com': 'video',\n  'vimeo.com': 'video',\n  'youtu.be': 'video',\n  'twitter.com': 'social',\n  'facebook.com': 'social',\n  'linkedin.com': 'social',\n  'instagram.com': 'social',\n  'reddit.com': 'social',\n  'medium.com': 'blog',\n  'dev.to': 'blog',\n  'hashnode.com': 'blog',\n  'substack.com': 'blog',\n  'wikipedia.org': 'reference',\n  'mdn.mozilla.org': 'reference',\n  'w3schools.com': 'reference',\n  'amazon.com': 'shopping',\n  'ebay.com': 'shopping',\n  'etsy.com': 'shopping'\n};\n\n// URL path patterns for categorization\nconst PATH_PATTERNS = {\n  '/docs': 'documentation',\n  '/documentation': 'documentation',\n  '/api': 'api',\n  '/reference': 'reference',\n  '/tutorial': 'tutorial',\n  '/guide': 'tutorial',\n  '/blog': 'blog',\n  '/article': 'blog',\n  '/video': 'video',\n  '/watch': 'video'\n};\n\n// Content-based keyword detection\nconst CONTENT_KEYWORDS = {\n  'tutorial': 'tutorial',\n  'guide': 'tutorial',\n  'how to': 'tutorial',\n  'documentation': 'documentation',\n  'docs': 'documentation',\n  'api': 'api',\n  'reference': 'reference',\n  'blog': 'blog',\n  'article': 'blog',\n  'news': 'news',\n  'video': 'video',\n  'course': 'education',\n  'learning': 'education',\n  'tool': 'tool',\n  'app': 'tool',\n  'software': 'tool'\n};\n\n// Enrich a single bookmark by fetching its metadata\nexport async function enrichBookmark(bookmarkId) {\n  try {\n    const bookmark = await getBookmark(bookmarkId);\n    if (!bookmark) {\n      console.log(`Bookmark ${bookmarkId} not found`);\n      return { success: false, error: 'Bookmark not found' };\n    }\n\n    // Only enrich http/https URLs\n    if (!bookmark.url.startsWith('http://') && !bookmark.url.startsWith('https://')) {\n      console.log(`Skipping non-http bookmark: ${bookmark.url}`);\n      return { success: false, error: 'Not an HTTP URL', skipped: true };\n    }\n\n    // Skip if recently enriched (based on freshness settings)\n    const settings = await getSettings();\n    const freshnessDays = settings.enrichmentFreshnessDays || 30;\n    const freshnessThreshold = Date.now() - (freshnessDays * 24 * 60 * 60 * 1000);\n    \n    if (bookmark.lastChecked && bookmark.lastChecked > freshnessThreshold) {\n      console.log(`Skipping recently enriched bookmark: ${bookmark.title} (last checked: ${new Date(bookmark.lastChecked).toLocaleDateString()})`);\n      return { success: true, skipped: true, alreadyEnriched: true };\n    }\n\n    console.log(`Enriching bookmark: ${bookmark.title} (${bookmark.url})`);\n\n    // Check dead links first (quick HEAD request)\n    const isAlive = await checkBookmarkAlive(bookmark.url);\n    \n    // If dead, just update the isAlive status and skip metadata fetching\n    if (isAlive === false) {\n      bookmark.isAlive = false;\n      bookmark.lastChecked = Date.now();\n      await upsertBookmark(bookmark);\n      await logEvent(bookmarkId, 'enrichment', { isAlive: false });\n      return { success: true, isAlive: false, skipped: true };\n    }\n\n    // Fetch page metadata\n    const metadata = await fetchPageMetadata(bookmark.url);\n    \n    // Auto-categorize\n    const category = categorizeBookmark(bookmark, metadata);\n\n    // Update bookmark with enriched data\n    bookmark.description = metadata.description || bookmark.description;\n    bookmark.keywords = metadata.keywords || bookmark.keywords;\n    bookmark.category = category || bookmark.category;\n    bookmark.isAlive = isAlive;\n    bookmark.lastChecked = Date.now();\n    bookmark.faviconUrl = metadata.faviconUrl || bookmark.faviconUrl;\n    bookmark.contentSnippet = metadata.snippet || bookmark.contentSnippet;\n    bookmark.rawMetadata = metadata.rawMetadata || bookmark.rawMetadata; // Store comprehensive metadata\n\n    await upsertBookmark(bookmark);\n    await logEvent(bookmarkId, 'enrichment', { \n      success: true, \n      category, \n      hasDescription: !!metadata.description \n    });\n\n    return { \n      success: true, \n      category, \n      description: metadata.description,\n      isAlive \n    };\n  } catch (error) {\n    console.error(`Error enriching bookmark ${bookmarkId}:`, error);\n    await logEvent(bookmarkId, 'enrichment', { success: false, error: error.message });\n    return { success: false, error: error.message };\n  }\n}\n\n// Check if a bookmark URL is still alive\nexport async function checkBookmarkAlive(url) {\n  try {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 5000);\n\n    // Try HEAD request first (faster)\n    const response = await fetch(url, {\n      method: 'HEAD',\n      signal: controller.signal,\n      redirect: 'follow'\n    });\n\n    clearTimeout(timeoutId);\n    \n    // Consider 2xx and 3xx as alive\n    return response.ok || (response.status >= 300 && response.status < 400);\n  } catch (error) {\n    if (error.name === 'AbortError') {\n      console.log(`Timeout checking ${url}`);\n      return null; // Unknown - timeout\n    }\n    \n    // Try GET request as fallback with no-cors mode\n    try {\n      const controller2 = new AbortController();\n      const timeoutId2 = setTimeout(() => controller2.abort(), 5000);\n      \n      await fetch(url, {\n        method: 'GET',\n        mode: 'no-cors',\n        signal: controller2.signal\n      });\n      \n      clearTimeout(timeoutId2);\n      return null; // Unknown - CORS blocked but request went through\n    } catch (error2) {\n      console.log(`Error checking ${url}:`, error2.message);\n      return false; // Likely dead\n    }\n  }\n}\n\n// Fetch metadata from a web page\nexport async function fetchPageMetadata(url) {\n  try {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 5000);\n\n    const response = await fetch(url, {\n      signal: controller.signal,\n      redirect: 'follow'\n    });\n\n    clearTimeout(timeoutId);\n\n    if (!response.ok) {\n      return {};\n    }\n\n    const html = await response.text();\n    \n    // Parse HTML using regex (service worker compatible - no DOMParser available)\n    \n    // Extract comprehensive raw metadata for future analysis\n    const rawMetadata = {\n      meta: {},\n      openGraph: {},\n      twitterCard: {},\n      jsonLd: [],\n      other: {}\n    };\n\n    // Extract all meta tags using regex\n    const metaTagRegex = /<meta\\s+([^>]*?)>/gi;\n    let metaMatch;\n    \n    while ((metaMatch = metaTagRegex.exec(html)) !== null) {\n      const metaTag = metaMatch[1];\n      \n      // Extract name/property and content attributes\n      const nameMatch = metaTag.match(/(?:name|property)=[\"']([^\"']+)[\"']/i);\n      const contentMatch = metaTag.match(/content=[\"']([^\"']+)[\"']/i);\n      \n      if (nameMatch && contentMatch) {\n        const name = nameMatch[1];\n        const content = contentMatch[1];\n        \n        if (name.startsWith('og:')) {\n          rawMetadata.openGraph[name] = content;\n        } else if (name.startsWith('twitter:')) {\n          rawMetadata.twitterCard[name] = content;\n        } else {\n          rawMetadata.meta[name] = content;\n        }\n      }\n    }\n\n    // Extract JSON-LD structured data\n    const jsonLdRegex = /<script\\s+type=[\"']application\\/ld\\+json[\"']>(.*?)<\\/script>/gis;\n    let jsonLdMatch;\n    \n    while ((jsonLdMatch = jsonLdRegex.exec(html)) !== null) {\n      try {\n        const data = JSON.parse(jsonLdMatch[1]);\n        rawMetadata.jsonLd.push(data);\n      } catch (e) {\n        // Ignore invalid JSON-LD\n      }\n    }\n\n    // Extract title tag\n    const titleMatch = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n    if (titleMatch) {\n      rawMetadata.other.title = titleMatch[1].trim();\n    }\n    \n    // Extract canonical link\n    const canonicalMatch = html.match(/<link\\s+rel=[\"']canonical[\"']\\s+href=[\"']([^\"']+)[\"']/i) ||\n                          html.match(/<link\\s+href=[\"']([^\"']+)[\"']\\s+rel=[\"']canonical[\"']/i);\n    if (canonicalMatch) {\n      rawMetadata.other.canonical = canonicalMatch[1];\n    }\n    \n    // Extract language attribute\n    const langMatch = html.match(/<html[^>]*\\slang=[\"']([^\"']+)[\"']/i);\n    if (langMatch) {\n      rawMetadata.other.language = langMatch[1];\n    }\n\n    // Extract author from meta tag (already captured above, but set shortcut)\n    if (rawMetadata.meta.author) {\n      rawMetadata.other.author = rawMetadata.meta.author;\n    }\n\n    // Extract processed metadata for immediate use\n    const metadata = {\n      description: null,\n      keywords: [],\n      faviconUrl: null,\n      snippet: null,\n      rawMetadata: rawMetadata // Include comprehensive raw data\n    };\n\n    // Get description from meta tags (priority: og:description > meta description > twitter:description)\n    metadata.description = \n      rawMetadata.openGraph['og:description'] || \n      rawMetadata.meta.description || \n      rawMetadata.twitterCard['twitter:description'] ||\n      null;\n\n    // Get keywords from meta tags\n    if (rawMetadata.meta.keywords) {\n      metadata.keywords = rawMetadata.meta.keywords\n        .split(',')\n        .map(k => k.trim())\n        .filter(k => k.length > 0)\n        .slice(0, 10); // Limit to 10 keywords\n    }\n\n    // Get favicon using regex\n    const faviconMatch = html.match(/<link\\s+([^>]*rel=[\"'](?:icon|shortcut icon)[\"'][^>]*)>/i);\n    if (faviconMatch) {\n      const hrefMatch = faviconMatch[1].match(/href=[\"']([^\"']+)[\"']/i);\n      if (hrefMatch) {\n        try {\n          metadata.faviconUrl = new URL(hrefMatch[1], url).href;\n        } catch (e) {\n          // Invalid URL, skip\n        }\n      }\n    }\n\n    // Get snippet from first paragraph using regex\n    const paragraphMatch = html.match(/<p[^>]*>([^<]+)</i);\n    if (paragraphMatch) {\n      metadata.snippet = paragraphMatch[1]\n        .replace(/&nbsp;/g, ' ')\n        .replace(/&amp;/g, '&')\n        .replace(/&lt;/g, '<')\n        .replace(/&gt;/g, '>')\n        .replace(/&quot;/g, '\"')\n        .trim()\n        .substring(0, 200);\n    }\n\n    return metadata;\n  } catch (error) {\n    if (error.name === 'AbortError') {\n      console.log(`Timeout fetching metadata for ${url}`);\n    } else {\n      console.error(`Error fetching metadata for ${url}:`, error);\n    }\n    return {};\n  }\n}\n\n// Auto-categorize a bookmark based on domain, URL path, and content\nexport function categorizeBookmark(bookmark, metadata = {}) {\n  try {\n    const url = new URL(bookmark.url);\n    const domain = url.hostname.toLowerCase();\n    const path = url.pathname.toLowerCase();\n    const title = bookmark.title.toLowerCase();\n    const description = (metadata.description || '').toLowerCase();\n\n    // 1. Check domain-based rules (highest priority)\n    for (const [domainPattern, category] of Object.entries(CATEGORY_RULES)) {\n      if (domain.includes(domainPattern)) {\n        return category;\n      }\n    }\n\n    // 2. Check URL path patterns\n    for (const [pathPattern, category] of Object.entries(PATH_PATTERNS)) {\n      if (path.includes(pathPattern)) {\n        return category;\n      }\n    }\n\n    // 3. Check content keywords in title and description\n    const combinedText = `${title} ${description}`;\n    for (const [keyword, category] of Object.entries(CONTENT_KEYWORDS)) {\n      if (combinedText.includes(keyword)) {\n        return category;\n      }\n    }\n\n    // 4. Check meta keywords\n    if (metadata.keywords && metadata.keywords.length > 0) {\n      const metaKeywords = metadata.keywords.join(' ').toLowerCase();\n      for (const [keyword, category] of Object.entries(CONTENT_KEYWORDS)) {\n        if (metaKeywords.includes(keyword)) {\n          return category;\n        }\n      }\n    }\n\n    return null; // No category detected\n  } catch (error) {\n    console.error('Error categorizing bookmark:', error);\n    return null;\n  }\n}\n\n// Process a batch of bookmarks from the enrichment queue with parallel processing\nexport async function processEnrichmentBatch(batchSize = 10, progressCallback = null, concurrency = 3) {\n  try {\n    const settings = await getSettings();\n    if (!settings.enrichmentEnabled) {\n      console.log('Enrichment is disabled');\n      return { processed: 0, success: 0, failed: 0, skipped: 0 };\n    }\n\n    // Use settings concurrency if not explicitly provided\n    const maxConcurrency = concurrency || settings.enrichmentConcurrency || 3;\n    console.log(`Using concurrency: ${maxConcurrency} parallel requests`);\n\n    const batch = await getNextEnrichmentBatch(batchSize);\n    if (batch.length === 0) {\n      console.log('No bookmarks in enrichment queue');\n      return { processed: 0, success: 0, failed: 0, skipped: 0 };\n    }\n\n    console.log(`Processing ${batch.length} bookmarks from enrichment queue with ${maxConcurrency} concurrent workers`);\n\n    let success = 0;\n    let failed = 0;\n    let skipped = 0;\n    let completed = 0;\n\n    // Process bookmarks with concurrency control\n    const processBookmark = async (queueItem, index) => {\n      try {\n        const bookmark = await import('./db.js').then(m => m.getBookmark(queueItem.bookmarkId));\n        \n        // Send progress update\n        if (progressCallback && bookmark) {\n          progressCallback({\n            current: index + 1,\n            total: batch.length,\n            completed: completed,\n            bookmarkId: queueItem.bookmarkId,\n            url: bookmark.url,\n            title: bookmark.title,\n            status: 'processing'\n          });\n        }\n\n        const result = await enrichBookmark(queueItem.bookmarkId);\n        \n        // Update counters\n        if (result.success) {\n          if (result.alreadyEnriched || result.skipped) {\n            skipped++;\n          } else {\n            success++;\n          }\n        } else {\n          if (result.skipped) {\n            skipped++;\n          } else {\n            failed++;\n          }\n        }\n        \n        completed++;\n\n        // Send completion update for this bookmark\n        if (progressCallback && bookmark) {\n          progressCallback({\n            current: index + 1,\n            total: batch.length,\n            completed: completed,\n            bookmarkId: queueItem.bookmarkId,\n            url: bookmark.url,\n            title: bookmark.title,\n            status: result.success ? 'completed' : 'failed',\n            result: result\n          });\n        }\n\n        // Remove from queue regardless of success/failure\n        await removeFromEnrichmentQueue(queueItem.queueId);\n        \n        return { success: true, result };\n      } catch (error) {\n        console.error(`Error processing bookmark ${queueItem.bookmarkId}:`, error);\n        failed++;\n        completed++;\n        \n        await removeFromEnrichmentQueue(queueItem.queueId);\n        \n        if (progressCallback) {\n          progressCallback({\n            current: index + 1,\n            total: batch.length,\n            completed: completed,\n            bookmarkId: queueItem.bookmarkId,\n            status: 'error',\n            error: error.message\n          });\n        }\n        \n        return { success: false, error: error.message };\n      }\n    };\n\n    // Process with concurrency limit using a worker pool\n    const workers = [];\n    let currentIndex = 0;\n\n    const runWorker = async () => {\n      while (currentIndex < batch.length) {\n        const index = currentIndex++;\n        const queueItem = batch[index];\n        await processBookmark(queueItem, index);\n        \n        // Small delay between requests to be respectful\n        if (currentIndex < batch.length) {\n          await sleep(100); // 100ms delay between starting new requests\n        }\n      }\n    };\n\n    // Start concurrent workers\n    for (let i = 0; i < Math.min(maxConcurrency, batch.length); i++) {\n      workers.push(runWorker());\n    }\n\n    // Wait for all workers to complete\n    await Promise.all(workers);\n\n    console.log(`Processed ${batch.length} bookmarks: ${success} success, ${failed} failed, ${skipped} skipped`);\n    return { processed: batch.length, success, failed, skipped };\n  } catch (error) {\n    console.error('Error processing enrichment batch:', error);\n    return { processed: 0, success: 0, failed: 0, skipped: 0, error: error.message };\n  }\n}\n\n// Helper function to sleep\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n// Export category rules for use in UI\nexport { CATEGORY_RULES, PATH_PATTERNS, CONTENT_KEYWORDS };\n","/**!\r\n * FlexSearch.js v0.8.212 (Bundle/Module)\r\n * Author and Copyright: Thomas Wilkerling\r\n * Licence: Apache-2.0\r\n * Hosted by Nextapps GmbH\r\n * https://github.com/nextapps-de/flexsearch\r\n */\nvar w;function H(a,c,b){const e=typeof b,d=typeof a;if(e!==\"undefined\"){if(d!==\"undefined\"){if(b){if(d===\"function\"&&e===d)return function(k){return a(b(k))};c=a.constructor;if(c===b.constructor){if(c===Array)return b.concat(a);if(c===Map){var f=new Map(b);for(var g of a)f.set(g[0],g[1]);return f}if(c===Set){g=new Set(b);for(f of a.values())g.add(f);return g}}}return a}return b}return d===\"undefined\"?c:a}function aa(a,c){return typeof a===\"undefined\"?c:a}function I(){return Object.create(null)}\nfunction M(a){return typeof a===\"string\"}function ba(a){return typeof a===\"object\"}function ca(a,c){if(M(c))a=a[c];else for(let b=0;a&&b<c.length;b++)a=a[c[b]];return a};const ea=/[^\\p{L}\\p{N}]+/u,fa=/(\\d{3})/g,ha=/(\\D)(\\d{3})/g,ia=/(\\d{3})(\\D)/g,ja=/[\\u0300-\\u036f]/g;function ka(a={}){if(!this||this.constructor!==ka)return new ka(...arguments);if(arguments.length)for(a=0;a<arguments.length;a++)this.assign(arguments[a]);else this.assign(a)}w=ka.prototype;\nw.assign=function(a){this.normalize=H(a.normalize,!0,this.normalize);let c=a.include,b=c||a.exclude||a.split,e;if(b||b===\"\"){if(typeof b===\"object\"&&b.constructor!==RegExp){let d=\"\";e=!c;c||(d+=\"\\\\p{Z}\");b.letter&&(d+=\"\\\\p{L}\");b.number&&(d+=\"\\\\p{N}\",e=!!c);b.symbol&&(d+=\"\\\\p{S}\");b.punctuation&&(d+=\"\\\\p{P}\");b.control&&(d+=\"\\\\p{C}\");if(b=b.char)d+=typeof b===\"object\"?b.join(\"\"):b;try{this.split=new RegExp(\"[\"+(c?\"^\":\"\")+d+\"]+\",\"u\")}catch(f){this.split=/\\s+/}}else this.split=b,e=b===!1||\"a1a\".split(b).length<\n2;this.numeric=H(a.numeric,e)}else{try{this.split=H(this.split,ea)}catch(d){this.split=/\\s+/}this.numeric=H(a.numeric,H(this.numeric,!0))}this.prepare=H(a.prepare,null,this.prepare);this.finalize=H(a.finalize,null,this.finalize);b=a.filter;this.filter=typeof b===\"function\"?b:H(b&&new Set(b),null,this.filter);this.dedupe=H(a.dedupe,!0,this.dedupe);this.matcher=H((b=a.matcher)&&new Map(b),null,this.matcher);this.mapper=H((b=a.mapper)&&new Map(b),null,this.mapper);this.stemmer=H((b=a.stemmer)&&new Map(b),\nnull,this.stemmer);this.replacer=H(a.replacer,null,this.replacer);this.minlength=H(a.minlength,1,this.minlength);this.maxlength=H(a.maxlength,1024,this.maxlength);this.rtl=H(a.rtl,!1,this.rtl);if(this.cache=b=H(a.cache,!0,this.cache))this.F=null,this.L=typeof b===\"number\"?b:2E5,this.B=new Map,this.D=new Map,this.I=this.H=128;this.h=\"\";this.J=null;this.A=\"\";this.K=null;if(this.matcher)for(const d of this.matcher.keys())this.h+=(this.h?\"|\":\"\")+d;if(this.stemmer)for(const d of this.stemmer.keys())this.A+=\n(this.A?\"|\":\"\")+d;return this};w.addStemmer=function(a,c){this.stemmer||(this.stemmer=new Map);this.stemmer.set(a,c);this.A+=(this.A?\"|\":\"\")+a;this.K=null;this.cache&&Q(this);return this};w.addFilter=function(a){typeof a===\"function\"?this.filter=a:(this.filter||(this.filter=new Set),this.filter.add(a));this.cache&&Q(this);return this};\nw.addMapper=function(a,c){if(typeof a===\"object\")return this.addReplacer(a,c);if(a.length>1)return this.addMatcher(a,c);this.mapper||(this.mapper=new Map);this.mapper.set(a,c);this.cache&&Q(this);return this};w.addMatcher=function(a,c){if(typeof a===\"object\")return this.addReplacer(a,c);if(a.length<2&&(this.dedupe||this.mapper))return this.addMapper(a,c);this.matcher||(this.matcher=new Map);this.matcher.set(a,c);this.h+=(this.h?\"|\":\"\")+a;this.J=null;this.cache&&Q(this);return this};\nw.addReplacer=function(a,c){if(typeof a===\"string\")return this.addMatcher(a,c);this.replacer||(this.replacer=[]);this.replacer.push(a,c);this.cache&&Q(this);return this};\nw.encode=function(a,c){if(this.cache&&a.length<=this.H)if(this.F){if(this.B.has(a))return this.B.get(a)}else this.F=setTimeout(Q,50,this);this.normalize&&(typeof this.normalize===\"function\"?a=this.normalize(a):a=ja?a.normalize(\"NFKD\").replace(ja,\"\").toLowerCase():a.toLowerCase());this.prepare&&(a=this.prepare(a));this.numeric&&a.length>3&&(a=a.replace(ha,\"$1 $2\").replace(ia,\"$1 $2\").replace(fa,\"$1 \"));const b=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let e=\n[],d=I(),f,g,k=this.split||this.split===\"\"?a.split(this.split):[a];for(let l=0,m,p;l<k.length;l++)if((m=p=k[l])&&!(m.length<this.minlength||m.length>this.maxlength)){if(c){if(d[m])continue;d[m]=1}else{if(f===m)continue;f=m}if(b)e.push(m);else if(!this.filter||(typeof this.filter===\"function\"?this.filter(m):!this.filter.has(m))){if(this.cache&&m.length<=this.I)if(this.F){var h=this.D.get(m);if(h||h===\"\"){h&&e.push(h);continue}}else this.F=setTimeout(Q,50,this);if(this.stemmer){this.K||(this.K=new RegExp(\"(?!^)(\"+\nthis.A+\")$\"));let u;for(;u!==m&&m.length>2;)u=m,m=m.replace(this.K,r=>this.stemmer.get(r))}if(m&&(this.mapper||this.dedupe&&m.length>1)){h=\"\";for(let u=0,r=\"\",t,n;u<m.length;u++)t=m.charAt(u),t===r&&this.dedupe||((n=this.mapper&&this.mapper.get(t))||n===\"\"?n===r&&this.dedupe||!(r=n)||(h+=n):h+=r=t);m=h}this.matcher&&m.length>1&&(this.J||(this.J=new RegExp(\"(\"+this.h+\")\",\"g\")),m=m.replace(this.J,u=>this.matcher.get(u)));if(m&&this.replacer)for(h=0;m&&h<this.replacer.length;h+=2)m=m.replace(this.replacer[h],\nthis.replacer[h+1]);this.cache&&p.length<=this.I&&(this.D.set(p,m),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0));if(m){if(m!==p)if(c){if(d[m])continue;d[m]=1}else{if(g===m)continue;g=m}e.push(m)}}}this.finalize&&(e=this.finalize(e)||e);this.cache&&a.length<=this.H&&(this.B.set(a,e),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0));return e};function Q(a){a.F=null;a.B.clear();a.D.clear()};function la(a,c,b){b||(c||typeof a!==\"object\"?typeof c===\"object\"&&(b=c,c=0):b=a);b&&(a=b.query||a,c=b.limit||c);let e=\"\"+(c||0);b&&(e+=(b.offset||0)+!!b.context+!!b.suggest+(b.resolve!==!1)+(b.resolution||this.resolution)+(b.boost||0));a=(\"\"+a).toLowerCase();this.cache||(this.cache=new ma);let d=this.cache.get(a+e);if(!d){const f=b&&b.cache;f&&(b.cache=!1);d=this.search(a,c,b);f&&(b.cache=f);this.cache.set(a+e,d)}return d}function ma(a){this.limit=a&&a!==!0?a:1E3;this.cache=new Map;this.h=\"\"}\nma.prototype.set=function(a,c){this.cache.set(this.h=a,c);this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};ma.prototype.get=function(a){const c=this.cache.get(a);c&&this.h!==a&&(this.cache.delete(a),this.cache.set(this.h=a,c));return c};ma.prototype.remove=function(a){for(const c of this.cache){const b=c[0];c[1].includes(a)&&this.cache.delete(b)}};ma.prototype.clear=function(){this.cache.clear();this.h=\"\"};const na={normalize:!1,numeric:!1,dedupe:!1};const oa={};const ra=new Map([[\"b\",\"p\"],[\"v\",\"f\"],[\"w\",\"f\"],[\"z\",\"s\"],[\"x\",\"s\"],[\"d\",\"t\"],[\"n\",\"m\"],[\"c\",\"k\"],[\"g\",\"k\"],[\"j\",\"k\"],[\"q\",\"k\"],[\"i\",\"e\"],[\"y\",\"e\"],[\"u\",\"o\"]]);const sa=new Map([[\"ae\",\"a\"],[\"oe\",\"o\"],[\"sh\",\"s\"],[\"kh\",\"k\"],[\"th\",\"t\"],[\"ph\",\"f\"],[\"pf\",\"f\"]]),ta=[/([^aeo])h(.)/g,\"$1$2\",/([aeo])h([^aeo]|$)/g,\"$1$2\",/(.)\\1+/g,\"$1\"];const ua={a:\"\",e:\"\",i:\"\",o:\"\",u:\"\",y:\"\",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,\"\\u00df\":2,d:3,t:3,l:4,m:5,n:5,r:6};var va={Exact:na,Default:oa,Normalize:oa,LatinBalance:{mapper:ra},LatinAdvanced:{mapper:ra,matcher:sa,replacer:ta},LatinExtra:{mapper:ra,replacer:ta.concat([/(?!^)[aeo]/g,\"\"]),matcher:sa},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(a){for(let b=0;b<a.length;b++){var c=a[b];let e=c.charAt(0),d=ua[e];for(let f=1,g;f<c.length&&(g=c.charAt(f),g===\"h\"||g===\"w\"||!(g=ua[g])||g===d||(e+=g,d=g,e.length!==4));f++);a[b]=e}}},CJK:{split:\"\"},LatinExact:na,LatinDefault:oa,LatinSimple:oa};function wa(a,c,b,e){let d=[];for(let f=0,g;f<a.index.length;f++)if(g=a.index[f],c>=g.length)c-=g.length;else{c=g[e?\"splice\":\"slice\"](c,b);const k=c.length;if(k&&(d=d.length?d.concat(c):c,b-=k,e&&(a.length-=k),!b))break;c=0}return d}\nfunction xa(a){if(!this||this.constructor!==xa)return new xa(a);this.index=a?[a]:[];this.length=a?a.length:0;const c=this;return new Proxy([],{get(b,e){if(e===\"length\")return c.length;if(e===\"push\")return function(d){c.index[c.index.length-1].push(d);c.length++};if(e===\"pop\")return function(){if(c.length)return c.length--,c.index[c.index.length-1].pop()};if(e===\"indexOf\")return function(d){let f=0;for(let g=0,k,h;g<c.index.length;g++){k=c.index[g];h=k.indexOf(d);if(h>=0)return f+h;f+=k.length}return-1};\nif(e===\"includes\")return function(d){for(let f=0;f<c.index.length;f++)if(c.index[f].includes(d))return!0;return!1};if(e===\"slice\")return function(d,f){return wa(c,d||0,f||c.length,!1)};if(e===\"splice\")return function(d,f){return wa(c,d||0,f||c.length,!0)};if(e===\"constructor\")return Array;if(typeof e!==\"symbol\")return(b=c.index[e/2**31|0])&&b[e]},set(b,e,d){b=e/2**31|0;(c.index[b]||(c.index[b]=[]))[e]=d;c.length++;return!0}})}xa.prototype.clear=function(){this.index.length=0};xa.prototype.push=function(){};\nfunction R(a=8){if(!this||this.constructor!==R)return new R(a);this.index=I();this.h=[];this.size=0;a>32?(this.B=Aa,this.A=BigInt(a)):(this.B=Ba,this.A=a)}R.prototype.get=function(a){const c=this.index[this.B(a)];return c&&c.get(a)};R.prototype.set=function(a,c){var b=this.B(a);let e=this.index[b];e?(b=e.size,e.set(a,c),(b-=e.size)&&this.size++):(this.index[b]=e=new Map([[a,c]]),this.h.push(e),this.size++)};\nfunction S(a=8){if(!this||this.constructor!==S)return new S(a);this.index=I();this.h=[];this.size=0;a>32?(this.B=Aa,this.A=BigInt(a)):(this.B=Ba,this.A=a)}S.prototype.add=function(a){var c=this.B(a);let b=this.index[c];b?(c=b.size,b.add(a),(c-=b.size)&&this.size++):(this.index[c]=b=new Set([a]),this.h.push(b),this.size++)};w=R.prototype;w.has=S.prototype.has=function(a){const c=this.index[this.B(a)];return c&&c.has(a)};\nw.delete=S.prototype.delete=function(a){const c=this.index[this.B(a)];c&&c.delete(a)&&this.size--};w.clear=S.prototype.clear=function(){this.index=I();this.h=[];this.size=0};w.values=S.prototype.values=function*(){for(let a=0;a<this.h.length;a++)for(let c of this.h[a].values())yield c};w.keys=S.prototype.keys=function*(){for(let a=0;a<this.h.length;a++)for(let c of this.h[a].keys())yield c};w.entries=S.prototype.entries=function*(){for(let a=0;a<this.h.length;a++)for(let c of this.h[a].entries())yield c};\nfunction Ba(a){let c=2**this.A-1;if(typeof a==\"number\")return a&c;let b=0,e=this.A+1;for(let d=0;d<a.length;d++)b=(b*e^a.charCodeAt(d))&c;return this.A===32?b+2**31:b}function Aa(a){let c=BigInt(2)**this.A-BigInt(1);var b=typeof a;if(b===\"bigint\")return a&c;if(b===\"number\")return BigInt(a)&c;b=BigInt(0);let e=this.A+BigInt(1);for(let d=0;d<a.length;d++)b=(b*e^BigInt(a.charCodeAt(d)))&c;return b};let Ca,Da;\nasync function Ea(a){a=a.data;var c=a.task;const b=a.id;let e=a.args;switch(c){case \"init\":Da=a.options||{};(c=a.factory)?(Function(\"return \"+c)()(self),Ca=new self.FlexSearch.Index(Da),delete self.FlexSearch):Ca=new T(Da);postMessage({id:b});break;default:let d;c===\"export\"&&(e[1]?(e[0]=Da.export,e[2]=0,e[3]=1):e=null);c===\"import\"?e[0]&&(a=await Da.import.call(Ca,e[0]),Ca.import(e[0],a)):((d=e&&Ca[c].apply(Ca,e))&&d.then&&(d=await d),d&&d.await&&(d=await d.await),c===\"search\"&&d.result&&(d=d.result));\npostMessage(c===\"search\"?{id:b,msg:d}:{id:b})}};function Fa(a){Ga.call(a,\"add\");Ga.call(a,\"append\");Ga.call(a,\"search\");Ga.call(a,\"update\");Ga.call(a,\"remove\");Ga.call(a,\"searchCache\")}let Ha,Ia,Ja;function Ka(){Ha=Ja=0}\nfunction Ga(a){this[a+\"Async\"]=function(){const c=arguments;var b=c[c.length-1];let e;typeof b===\"function\"&&(e=b,delete c[c.length-1]);Ha?Ja||(Ja=Date.now()-Ia>=this.priority*this.priority*3):(Ha=setTimeout(Ka,0),Ia=Date.now());if(Ja){const f=this;return new Promise(g=>{setTimeout(function(){g(f[a+\"Async\"].apply(f,c))},0)})}const d=this[a].apply(this,c);b=d.then?d:new Promise(f=>f(d));e&&b.then(e);return b}};let V=0;\nfunction La(a={},c){function b(k){function h(l){l=l.data||l;const m=l.id,p=m&&f.h[m];p&&(p(l.msg),delete f.h[m])}this.worker=k;this.h=I();if(this.worker){d?this.worker.on(\"message\",h):this.worker.onmessage=h;if(a.config)return new Promise(function(l){V>1E9&&(V=0);f.h[++V]=function(){l(f)};f.worker.postMessage({id:V,task:\"init\",factory:e,options:a})});this.priority=a.priority||4;this.encoder=c||null;this.worker.postMessage({task:\"init\",factory:e,options:a});return this}}if(!this||this.constructor!==La)return new La(a);\nlet e=typeof self!==\"undefined\"?self._factory:typeof window!==\"undefined\"?window._factory:null;e&&(e=e.toString());const d=typeof window===\"undefined\",f=this,g=Ma(e,d,a.worker);return g.then?g.then(function(k){return b.call(f,k)}):b.call(this,g)}W(\"add\");W(\"append\");W(\"search\");W(\"update\");W(\"remove\");W(\"clear\");W(\"export\");W(\"import\");La.prototype.searchCache=la;Fa(La.prototype);\nfunction W(a){La.prototype[a]=function(){const c=this,b=[].slice.call(arguments);var e=b[b.length-1];let d;typeof e===\"function\"&&(d=e,b.pop());e=new Promise(function(f){a===\"export\"&&typeof b[0]===\"function\"&&(b[0]=null);V>1E9&&(V=0);c.h[++V]=f;c.worker.postMessage({task:a,id:V,args:b})});return d?(e.then(d),this):e}}\nfunction Ma(a,c,b){return c?typeof module!==\"undefined\"?new(require(\"worker_threads\")[\"Worker\"])(__dirname+\"/worker/node.js\"):import(\"worker_threads\").then(function(worker){return new worker[\"Worker\"](import.meta.dirname+\"/node/node.mjs\")}):a?new window.Worker(URL.createObjectURL(new Blob([\"onmessage=\"+Ea.toString()],{type:\"text/javascript\"}))):new window.Worker(typeof b===\"string\"?b:import.meta.url.replace(\"/worker.js\",\"/worker/worker.js\").replace(\"flexsearch.bundle.module.min.js\",\n\"module/worker/worker.js\").replace(\"flexsearch.bundle.module.min.mjs\",\"module/worker/worker.js\"),{type:\"module\"})};Na.prototype.add=function(a,c,b){ba(a)&&(c=a,a=ca(c,this.key));if(c&&(a||a===0)){if(!b&&this.reg.has(a))return this.update(a,c);for(let k=0,h;k<this.field.length;k++){h=this.B[k];var e=this.index.get(this.field[k]);if(typeof h===\"function\"){var d=h(c);d&&e.add(a,d,b,!0)}else if(d=h.G,!d||d(c))h.constructor===String?h=[\"\"+h]:M(h)&&(h=[h]),Qa(c,h,this.D,0,e,a,h[0],b)}if(this.tag)for(e=0;e<this.A.length;e++){var f=this.A[e];d=this.tag.get(this.F[e]);let k=I();if(typeof f===\"function\"){if(f=f(c),!f)continue}else{var g=\nf.G;if(g&&!g(c))continue;f.constructor===String&&(f=\"\"+f);f=ca(c,f)}if(d&&f){M(f)&&(f=[f]);for(let h=0,l,m;h<f.length;h++)if(l=f[h],!k[l]&&(k[l]=1,(g=d.get(l))?m=g:d.set(l,m=[]),!b||!m.includes(a))){if(m.length===2**31-1){g=new xa(m);if(this.fastupdate)for(let p of this.reg.values())p.includes(m)&&(p[p.indexOf(m)]=g);d.set(l,m=g)}m.push(a);this.fastupdate&&((g=this.reg.get(a))?g.push(m):this.reg.set(a,[m]))}}}if(this.store&&(!b||!this.store.has(a))){let k;if(this.h){k=I();for(let h=0,l;h<this.h.length;h++){l=\nthis.h[h];if((b=l.G)&&!b(c))continue;let m;if(typeof l===\"function\"){m=l(c);if(!m)continue;l=[l.O]}else if(M(l)||l.constructor===String){k[l]=c[l];continue}Ra(c,k,l,0,l[0],m)}}this.store.set(a,k||c)}this.worker&&(this.fastupdate||this.reg.add(a))}return this};function Ra(a,c,b,e,d,f){a=a[d];if(e===b.length-1)c[d]=f||a;else if(a)if(a.constructor===Array)for(c=c[d]=Array(a.length),d=0;d<a.length;d++)Ra(a,c,b,e,d);else c=c[d]||(c[d]=I()),d=b[++e],Ra(a,c,b,e,d)}\nfunction Qa(a,c,b,e,d,f,g,k){if(a=a[g])if(e===c.length-1){if(a.constructor===Array){if(b[e]){for(c=0;c<a.length;c++)d.add(f,a[c],!0,!0);return}a=a.join(\" \")}d.add(f,a,k,!0)}else if(a.constructor===Array)for(g=0;g<a.length;g++)Qa(a,c,b,e,d,f,g,k);else g=c[++e],Qa(a,c,b,e,d,f,g,k)};function Sa(a,c,b,e){if(!a.length)return a;if(a.length===1)return a=a[0],a=b||a.length>c?a.slice(b,b+c):a,e?Ta.call(this,a):a;let d=[];for(let f=0,g,k;f<a.length;f++)if((g=a[f])&&(k=g.length)){if(b){if(b>=k){b-=k;continue}g=g.slice(b,b+c);k=g.length;b=0}k>c&&(g=g.slice(0,c),k=c);if(!d.length&&k>=c)return e?Ta.call(this,g):g;d.push(g);c-=k;if(!c)break}d=d.length>1?[].concat.apply([],d):d[0];return e?Ta.call(this,d):d};function Ua(a,c,b,e){var d=e[0];if(d[0]&&d[0].query)return a[c].apply(a,d);if(!(c!==\"and\"&&c!==\"not\"||a.result.length||a.await||d.suggest))return e.length>1&&(d=e[e.length-1]),(e=d.resolve)?a.await||a.result:a;let f=[],g=0,k=0,h,l,m,p,u;for(c=0;c<e.length;c++)if(d=e[c]){var r=void 0;if(d.constructor===X)r=d.await||d.result;else if(d.then||d.constructor===Array)r=d;else{g=d.limit||0;k=d.offset||0;m=d.suggest;l=d.resolve;h=((p=d.highlight||a.highlight)||d.enrich)&&l;r=d.queue;let t=d.async||r,n=d.index,\nq=d.query;n?a.index||(a.index=n):n=a.index;if(q||d.tag){const x=d.field||d.pluck;x&&(!q||a.query&&!p||(a.query=q,a.field=x,a.highlight=p),n=n.index.get(x));if(r&&(u||a.await)){u=1;let v;const A=a.C.length,D=new Promise(function(F){v=F});(function(F,E){D.h=function(){E.index=null;E.resolve=!1;let B=t?F.searchAsync(E):F.search(E);if(B.then)return B.then(function(z){a.C[A]=z=z.result||z;v(z);return z});B=B.result||B;v(B);return B}})(n,Object.assign({},d));a.C.push(D);f[c]=D;continue}else d.resolve=!1,\nd.index=null,r=t?n.searchAsync(d):n.search(d),d.resolve=l,d.index=n}else if(d.and)r=Va(d,\"and\",n);else if(d.or)r=Va(d,\"or\",n);else if(d.not)r=Va(d,\"not\",n);else if(d.xor)r=Va(d,\"xor\",n);else continue}r.await?(u=1,r=r.await):r.then?(u=1,r=r.then(function(t){return t.result||t})):r=r.result||r;f[c]=r}u&&!a.await&&(a.await=new Promise(function(t){a.return=t}));if(u){const t=Promise.all(f).then(function(n){for(let q=0;q<a.C.length;q++)if(a.C[q]===t){a.C[q]=function(){return b.call(a,n,g,k,h,l,m,p)};break}Wa(a)});\na.C.push(t)}else if(a.await)a.C.push(function(){return b.call(a,f,g,k,h,l,m,p)});else return b.call(a,f,g,k,h,l,m,p);return l?a.await||a.result:a}function Va(a,c,b){a=a[c];const e=a[0]||a;e.index||(e.index=b);b=new X(e);a.length>1&&(b=b[c].apply(b,a.slice(1)));return b};X.prototype.or=function(){return Ua(this,\"or\",Xa,arguments)};function Xa(a,c,b,e,d,f,g){a.length&&(this.result.length&&a.push(this.result),a.length<2?this.result=a[0]:(this.result=Ya(a,c,b,!1,this.h),b=0));d&&(this.await=null);return d?this.resolve(c,b,e,g):this};X.prototype.and=function(){return Ua(this,\"and\",Za,arguments)};function Za(a,c,b,e,d,f,g){if(!f&&!this.result.length)return d?this.result:this;let k;if(a.length)if(this.result.length&&a.unshift(this.result),a.length<2)this.result=a[0];else{let h=0;for(let l=0,m,p;l<a.length;l++)if((m=a[l])&&(p=m.length))h<p&&(h=p);else if(!f){h=0;break}h?(this.result=$a(a,h,c,b,f,this.h,d),k=!0):this.result=[]}else f||(this.result=a);d&&(this.await=null);return d?this.resolve(c,b,e,g,k):this};X.prototype.xor=function(){return Ua(this,\"xor\",ab,arguments)};\nfunction ab(a,c,b,e,d,f,g){if(a.length)if(this.result.length&&a.unshift(this.result),a.length<2)this.result=a[0];else{a:{f=b;var k=this.h;const h=[],l=I();let m=0;for(let p=0,u;p<a.length;p++)if(u=a[p]){m<u.length&&(m=u.length);for(let r=0,t;r<u.length;r++)if(t=u[r])for(let n=0,q;n<t.length;n++)q=t[n],l[q]=l[q]?2:1}for(let p=0,u,r=0;p<m;p++)for(let t=0,n;t<a.length;t++)if(n=a[t])if(u=n[p])for(let q=0,x;q<u.length;q++)if(x=u[q],l[x]===1)if(f)f--;else if(d){if(h.push(x),h.length===c){a=h;break a}}else{const v=\np+(t?k:0);h[v]||(h[v]=[]);h[v].push(x);if(++r===c){a=h;break a}}a=h}this.result=a;k=!0}else f||(this.result=a);d&&(this.await=null);return d?this.resolve(c,b,e,g,k):this};X.prototype.not=function(){return Ua(this,\"not\",bb,arguments)};\nfunction bb(a,c,b,e,d,f,g){if(!f&&!this.result.length)return d?this.result:this;if(a.length&&this.result.length){a:{f=b;var k=[];a=new Set(a.flat().flat());for(let h=0,l,m=0;h<this.result.length;h++)if(l=this.result[h])for(let p=0,u;p<l.length;p++)if(u=l[p],!a.has(u))if(f)f--;else if(d){if(k.push(u),k.length===c){a=k;break a}}else if(k[h]||(k[h]=[]),k[h].push(u),++m===c){a=k;break a}a=k}this.result=a;k=!0}d&&(this.await=null);return d?this.resolve(c,b,e,g,k):this};function cb(a,c,b,e,d){let f,g,k;typeof d===\"string\"?(f=d,d=\"\"):f=d.template;g=f.indexOf(\"$1\");k=f.substring(g+2);g=f.substring(0,g);let h=d&&d.boundary,l=!d||d.clip!==!1,m=d&&d.merge&&k&&g&&new RegExp(k+\" \"+g,\"g\");d=d&&d.ellipsis;var p=0;if(typeof d===\"object\"){var u=d.template;p=u.length-2;d=d.pattern}typeof d!==\"string\"&&(d=d===!1?\"\":\"...\");p&&(d=u.replace(\"$1\",d));u=d.length-p;let r,t;typeof h===\"object\"&&(r=h.before,r===0&&(r=-1),t=h.after,t===0&&(t=-1),h=h.total||9E5);p=new Map;for(let Oa=0,\nda,db,pa;Oa<c.length;Oa++){let qa;if(e)qa=c,pa=e;else{var n=c[Oa];pa=n.field;if(!pa)continue;qa=n.result}db=b.get(pa);da=db.encoder;n=p.get(da);typeof n!==\"string\"&&(n=da.encode(a),p.set(da,n));for(let ya=0;ya<qa.length;ya++){var q=qa[ya].doc;if(!q)continue;q=ca(q,pa);if(!q)continue;var x=q.trim().split(/\\s+/);if(!x.length)continue;q=\"\";var v=[];let za=[];var A=-1,D=-1,F=0;for(var E=0;E<x.length;E++){var B=x[E],z=da.encode(B);z=z.length>1?z.join(\" \"):z[0];let y;if(z&&B){var C=B.length,J=(da.split?\nB.replace(da.split,\"\"):B).length-z.length,G=\"\",N=0;for(var O=0;O<n.length;O++){var P=n[O];if(P){var L=P.length;L+=J<0?0:J;N&&L<=N||(P=z.indexOf(P),P>-1&&(G=(P?B.substring(0,P):\"\")+g+B.substring(P,P+L)+k+(P+L<C?B.substring(P+L):\"\"),N=L,y=!0))}}G&&(h&&(A<0&&(A=q.length+(q?1:0)),D=q.length+(q?1:0)+G.length,F+=C,za.push(v.length),v.push({match:G})),q+=(q?\" \":\"\")+G)}if(!y)B=x[E],q+=(q?\" \":\"\")+B,h&&v.push({text:B});else if(h&&F>=h)break}F=za.length*(f.length-2);if(r||t||h&&q.length-F>h)if(F=h+F-u*2,E=D-\nA,r>0&&(E+=r),t>0&&(E+=t),E<=F)x=r?A-(r>0?r:0):A-((F-E)/2|0),v=t?D+(t>0?t:0):x+F,l||(x>0&&q.charAt(x)!==\" \"&&q.charAt(x-1)!==\" \"&&(x=q.indexOf(\" \",x),x<0&&(x=0)),v<q.length&&q.charAt(v-1)!==\" \"&&q.charAt(v)!==\" \"&&(v=q.lastIndexOf(\" \",v),v<D?v=D:++v)),q=(x?d:\"\")+q.substring(x,v)+(v<q.length?d:\"\");else{D=[];A={};F={};E={};B={};z={};G=J=C=0;for(O=N=1;;){var U=void 0;for(let y=0,K;y<za.length;y++){K=za[y];if(G)if(J!==G){if(E[y+1])continue;K+=G;if(A[K]){C-=u;F[y+1]=1;E[y+1]=1;continue}if(K>=v.length-\n1){if(K>=v.length){E[y+1]=1;K>=x.length&&(F[y+1]=1);continue}C-=u}q=v[K].text;if(L=t&&z[y])if(L>0){if(q.length>L)if(E[y+1]=1,l)q=q.substring(0,L);else continue;(L-=q.length)||(L=-1);z[y]=L}else{E[y+1]=1;continue}if(C+q.length+1<=h)q=\" \"+q,D[y]+=q;else if(l)U=h-C-1,U>0&&(q=\" \"+q.substring(0,U),D[y]+=q),E[y+1]=1;else{E[y+1]=1;continue}}else{if(E[y])continue;K-=J;if(A[K]){C-=u;E[y]=1;F[y]=1;continue}if(K<=0){if(K<0){E[y]=1;F[y]=1;continue}C-=u}q=v[K].text;if(L=r&&B[y])if(L>0){if(q.length>L)if(E[y]=1,\nl)q=q.substring(q.length-L);else continue;(L-=q.length)||(L=-1);B[y]=L}else{E[y]=1;continue}if(C+q.length+1<=h)q+=\" \",D[y]=q+D[y];else if(l)U=q.length+1-(h-C),U>=0&&U<q.length&&(q=q.substring(U)+\" \",D[y]=q+D[y]),E[y]=1;else{E[y]=1;continue}}else{q=v[K].match;r&&(B[y]=r);t&&(z[y]=t);y&&C++;let Pa;K?!y&&u&&(C+=u):(F[y]=1,E[y]=1);K>=x.length-1?Pa=1:K<v.length-1&&v[K+1].match?Pa=1:u&&(C+=u);C-=f.length-2;if(!y||C+q.length<=h)D[y]=q;else{U=N=O=F[y]=0;break}Pa&&(F[y+1]=1,E[y+1]=1)}C+=q.length;U=A[K]=1}if(U)J===\nG?G++:J++;else{J===G?N=0:O=0;if(!N&&!O)break;N?(J++,G=J):G++}}q=\"\";for(let y=0,K;y<D.length;y++)K=(F[y]?y?\" \":\"\":(y&&!d?\" \":\"\")+d)+D[y],q+=K;d&&!F[D.length]&&(q+=d)}m&&(q=q.replace(m,\" \"));qa[ya].highlight=q}if(e)break}return c};function X(a,c){if(!this||this.constructor!==X)return new X(a,c);let b=0,e,d,f,g,k,h;if(a&&a.index){const l=a;c=l.index;b=l.boost||0;if(d=l.query){f=l.field||l.pluck;g=l.highlight;const m=l.resolve;a=l.async||l.queue;l.resolve=!1;l.index=null;a=a?c.searchAsync(l):c.search(l);l.resolve=m;l.index=c;a=a.result||a}else a=[]}if(a&&a.then){const l=this;a=a.then(function(m){l.C[0]=l.result=m.result||m;Wa(l)});e=[a];a=[];k=new Promise(function(m){h=m})}this.index=c||null;this.result=a||[];this.h=b;this.C=\ne||[];this.await=k||null;this.return=h||null;this.highlight=g||null;this.query=d||\"\";this.field=f||\"\"}w=X.prototype;w.limit=function(a){if(this.await){const c=this;this.C.push(function(){return c.limit(a).result})}else if(this.result.length){const c=[];for(let b=0,e;b<this.result.length;b++)if(e=this.result[b])if(e.length<=a){if(c[b]=e,a-=e.length,!a)break}else{c[b]=e.slice(0,a);break}this.result=c}return this};\nw.offset=function(a){if(this.await){const c=this;this.C.push(function(){return c.offset(a).result})}else if(this.result.length){const c=[];for(let b=0,e;b<this.result.length;b++)if(e=this.result[b])e.length<=a?a-=e.length:(c[b]=e.slice(a),a=0);this.result=c}return this};w.boost=function(a){if(this.await){const c=this;this.C.push(function(){return c.boost(a).result})}else this.h+=a;return this};\nfunction Wa(a,c){let b=a.result;var e=a.await;a.await=null;for(let d=0,f;d<a.C.length;d++)if(f=a.C[d])if(typeof f===\"function\")b=f(),a.C[d]=b=b.result||b,d--;else if(f.h)b=f.h(),a.C[d]=b=b.result||b,d--;else if(f.then)return a.await=e;e=a.return;a.C=[];a.return=null;c||e(b);return b}\nw.resolve=function(a,c,b,e,d){let f=this.await?Wa(this,!0):this.result;if(f.then){const g=this;return f.then(function(){return g.resolve(a,c,b,e,d)})}f.length&&(typeof a===\"object\"?(e=a.highlight||this.highlight,b=!!e||a.enrich,c=a.offset,a=a.limit):(e=e||this.highlight,b=!!e||b),f=d?b?Ta.call(this.index,f):f:Sa.call(this.index,f,a||100,c,b));return this.finalize(f,e)};\nw.finalize=function(a,c){if(a.then){const e=this;return a.then(function(d){return e.finalize(d,c)})}c&&a.length&&this.query&&(a=cb(this.query,a,this.index.index,this.field,c));const b=this.return;this.highlight=this.index=this.result=this.C=this.await=this.return=null;this.query=this.field=\"\";b&&b(a);return a};function $a(a,c,b,e,d,f,g){const k=a.length;let h=[],l,m;l=I();for(let p=0,u,r,t,n;p<c;p++)for(let q=0;q<k;q++)if(t=a[q],p<t.length&&(u=t[p]))for(let x=0;x<u.length;x++){r=u[x];(m=l[r])?l[r]++:(m=0,l[r]=1);n=h[m]||(h[m]=[]);if(!g){let v=p+(q||!d?0:f||0);n=n[v]||(n[v]=[])}n.push(r);if(g&&b&&m===k-1&&n.length-e===b)return e?n.slice(e):n}if(a=h.length)if(d)h=h.length>1?Ya(h,b,e,g,f):(h=h[0])&&b&&h.length>b||e?h.slice(e,b+e):h;else{if(a<k)return[];h=h[a-1];if(b||e)if(g){if(h.length>b||e)h=h.slice(e,b+\ne)}else{d=[];for(let p=0,u;p<h.length;p++)if(u=h[p])if(e&&u.length>e)e-=u.length;else{if(b&&u.length>b||e)u=u.slice(e,b+e),b-=u.length,e&&(e-=u.length);d.push(u);if(!b)break}h=d}}return h}\nfunction Ya(a,c,b,e,d){const f=[],g=I();let k;var h=a.length;let l;if(e)for(d=h-1;d>=0;d--){if(l=(e=a[d])&&e.length)for(h=0;h<l;h++)if(k=e[h],!g[k])if(g[k]=1,b)b--;else if(f.push(k),f.length===c)return f}else for(let m=h-1,p,u=0;m>=0;m--){p=a[m];for(let r=0;r<p.length;r++)if(l=(e=p[r])&&e.length)for(let t=0;t<l;t++)if(k=e[t],!g[k])if(g[k]=1,b)b--;else{let n=(r+(m<h-1?d||0:0))/(m+1)|0;(f[n]||(f[n]=[])).push(k);if(++u===c)return f}}return f}\nfunction eb(a,c,b,e,d){const f=I(),g=[];for(let k=0,h;k<c.length;k++){h=c[k];for(let l=0;l<h.length;l++)f[h[l]]=1}if(d)for(let k=0,h;k<a.length;k++){if(h=a[k],f[h])if(e)e--;else if(g.push(h),f[h]=0,b&&--b===0)break}else for(let k=0,h,l;k<a.result.length;k++)for(h=a.result[k],c=0;c<h.length;c++)l=h[c],f[l]&&((g[k]||(g[k]=[])).push(l),f[l]=0);return g};I();Na.prototype.search=function(a,c,b,e){b||(!c&&ba(a)?(b=a,a=\"\"):ba(c)&&(b=c,c=0));let d=[];var f=[];let g;let k,h,l,m,p;let u=0,r=!0,t;if(b){b.constructor===Array&&(b={index:b});a=b.query||a;g=b.pluck;k=b.merge;l=b.boost;p=g||b.field||(p=b.index)&&(p.index?null:p);var n=this.tag&&b.tag;h=b.suggest;r=b.resolve!==!1;m=b.cache;t=r&&this.store&&b.highlight;var q=!!t||r&&this.store&&b.enrich;c=b.limit||c;var x=b.offset||0;c||(c=r?100:0);if(n&&(!this.db||!e)){n.constructor!==Array&&(n=[n]);var v=[];for(let B=\n0,z;B<n.length;B++)if(z=n[B],z.field&&z.tag){var A=z.tag;if(A.constructor===Array)for(var D=0;D<A.length;D++)v.push(z.field,A[D]);else v.push(z.field,A)}else{A=Object.keys(z);for(let C=0,J,G;C<A.length;C++)if(J=A[C],G=z[J],G.constructor===Array)for(D=0;D<G.length;D++)v.push(J,G[D]);else v.push(J,G)}n=v;if(!a){f=[];if(v.length)for(n=0;n<v.length;n+=2){if(this.db){e=this.index.get(v[n]);if(!e)continue;f.push(e=e.db.tag(v[n+1],c,x,q))}else e=fb.call(this,v[n],v[n+1],c,x,q);d.push(r?{field:v[n],tag:v[n+\n1],result:e}:[e])}if(f.length){const B=this;return Promise.all(f).then(function(z){for(let C=0;C<z.length;C++)r?d[C].result=z[C]:d[C]=z[C];return r?d:new X(d.length>1?$a(d,1,0,0,h,l):d[0],B)})}return r?d:new X(d.length>1?$a(d,1,0,0,h,l):d[0],this)}}r||g||!(p=p||this.field)||(M(p)?g=p:(p.constructor===Array&&p.length===1&&(p=p[0]),g=p.field||p.index));p&&p.constructor!==Array&&(p=[p])}p||(p=this.field);let F;v=(this.worker||this.db)&&!e&&[];for(let B=0,z,C,J;B<p.length;B++){C=p[B];if(this.db&&this.tag&&\n!this.B[B])continue;let G;M(C)||(G=C,C=G.field,a=G.query||a,c=aa(G.limit,c),x=aa(G.offset,x),h=aa(G.suggest,h),t=r&&this.store&&aa(G.highlight,t),q=!!t||r&&this.store&&aa(G.enrich,q),m=aa(G.cache,m));if(e)z=e[B];else{A=G||b||{};D=A.enrich;var E=this.index.get(C);n&&(this.db&&(A.tag=n,A.field=p,F=E.db.support_tag_search),!F&&D&&(A.enrich=!1),F||(A.limit=0,A.offset=0));z=m?E.searchCache(a,n&&!F?0:c,A):E.search(a,n&&!F?0:c,A);n&&!F&&(A.limit=c,A.offset=x);D&&(A.enrich=D);if(v){v[B]=z;continue}}J=(z=\nz.result||z)&&z.length;if(n&&J){A=[];D=0;if(this.db&&e){if(!F)for(E=p.length;E<e.length;E++){let N=e[E];if(N&&N.length)D++,A.push(N);else if(!h)return r?d:new X(d,this)}}else for(let N=0,O,P;N<n.length;N+=2){O=this.tag.get(n[N]);if(!O)if(h)continue;else return r?d:new X(d,this);if(P=(O=O&&O.get(n[N+1]))&&O.length)D++,A.push(O);else if(!h)return r?d:new X(d,this)}if(D){z=eb(z,A,c,x,r);J=z.length;if(!J&&!h)return r?z:new X(z,this);D--}}if(J)f[u]=C,d.push(z),u++;else if(p.length===1)return r?d:new X(d,\nthis)}if(v){if(this.db&&n&&n.length&&!F)for(q=0;q<n.length;q+=2){f=this.index.get(n[q]);if(!f)if(h)continue;else return r?d:new X(d,this);v.push(f.db.tag(n[q+1],c,x,!1))}const B=this;return Promise.all(v).then(function(z){b&&(b.resolve=r);z.length&&(z=B.search(a,c,b,z));return z})}if(!u)return r?d:new X(d,this);if(g&&(!q||!this.store))return d=d[0],r?d:new X(d,this);v=[];for(x=0;x<f.length;x++){n=d[x];q&&n.length&&typeof n[0].doc===\"undefined\"&&(this.db?v.push(n=this.index.get(this.field[0]).db.enrich(n)):\nn=Ta.call(this,n));if(g)return r?t?cb(a,n,this.index,g,t):n:new X(n,this);d[x]={field:f[x],result:n}}if(q&&this.db&&v.length){const B=this;return Promise.all(v).then(function(z){for(let C=0;C<z.length;C++)d[C].result=z[C];t&&(d=cb(a,d,B.index,g,t));return k?gb(d):d})}t&&(d=cb(a,d,this.index,g,t));return k?gb(d):d};\nfunction gb(a){const c=[],b=I(),e=I();for(let d=0,f,g,k,h,l,m,p;d<a.length;d++){f=a[d];g=f.field;k=f.result;for(let u=0;u<k.length;u++)if(l=k[u],typeof l!==\"object\"?l={id:h=l}:h=l.id,(m=b[h])?m.push(g):(l.field=b[h]=[g],c.push(l)),p=l.highlight)m=e[h],m||(e[h]=m={},l.highlight=m),m[g]=p}return c}function fb(a,c,b,e,d){a=this.tag.get(a);if(!a)return[];a=a.get(c);if(!a)return[];c=a.length-e;if(c>0){if(b&&c>b||e)a=a.slice(e,e+b);d&&(a=Ta.call(this,a))}return a}\nfunction Ta(a){if(!this||!this.store)return a;if(this.db)return this.index.get(this.field[0]).db.enrich(a);const c=Array(a.length);for(let b=0,e;b<a.length;b++)e=a[b],c[b]={id:e,doc:this.store.get(e)};return c};function Na(a){if(!this||this.constructor!==Na)return new Na(a);const c=a.document||a.doc||a;let b,e;this.B=[];this.field=[];this.D=[];this.key=(b=c.key||c.id)&&hb(b,this.D)||\"id\";(e=a.keystore||0)&&(this.keystore=e);this.fastupdate=!!a.fastupdate;this.reg=!this.fastupdate||a.worker||a.db?e?new S(e):new Set:e?new R(e):new Map;this.h=(b=c.store||null)&&b&&b!==!0&&[];this.store=b?e?new R(e):new Map:null;this.cache=(b=a.cache||null)&&new ma(b);a.cache=!1;this.worker=a.worker||!1;this.priority=a.priority||\n4;this.index=ib.call(this,a,c);this.tag=null;if(b=c.tag)if(typeof b===\"string\"&&(b=[b]),b.length){this.tag=new Map;this.A=[];this.F=[];for(let d=0,f,g;d<b.length;d++){f=b[d];g=f.field||f;if(!g)throw Error(\"The tag field from the document descriptor is undefined.\");f.custom?this.A[d]=f.custom:(this.A[d]=hb(g,this.D),f.filter&&(typeof this.A[d]===\"string\"&&(this.A[d]=new String(this.A[d])),this.A[d].G=f.filter));this.F[d]=g;this.tag.set(g,new Map)}}if(this.worker){this.fastupdate=!1;a=[];for(const d of this.index.values())d.then&&\na.push(d);if(a.length){const d=this;return Promise.all(a).then(function(f){let g=0;for(const k of d.index.entries()){const h=k[0];let l=k[1];l.then&&(l=f[g],d.index.set(h,l),g++)}return d})}}else a.db&&(this.fastupdate=!1,this.mount(a.db))}w=Na.prototype;\nw.mount=function(a){let c=this.field;if(this.tag)for(let f=0,g;f<this.F.length;f++){g=this.F[f];var b=void 0;this.index.set(g,b=new T({},this.reg));c===this.field&&(c=c.slice(0));c.push(g);b.tag=this.tag.get(g)}b=[];const e={db:a.db,type:a.type,fastupdate:a.fastupdate};for(let f=0,g,k;f<c.length;f++){e.field=k=c[f];g=this.index.get(k);const h=new a.constructor(a.id,e);h.id=a.id;b[f]=h.mount(g);g.document=!0;f?g.bypass=!0:g.store=this.store}const d=this;return this.db=Promise.all(b).then(function(){d.db=\n!0})};w.commit=async function(){const a=[];for(const c of this.index.values())a.push(c.commit());await Promise.all(a);this.reg.clear()};w.destroy=function(){const a=[];for(const c of this.index.values())a.push(c.destroy());return Promise.all(a)};\nfunction ib(a,c){const b=new Map;let e=c.index||c.field||c;M(e)&&(e=[e]);for(let f=0,g,k;f<e.length;f++){g=e[f];M(g)||(k=g,g=g.field);k=ba(k)?Object.assign({},a,k):a;if(this.worker){var d=void 0;d=(d=k.encoder)&&d.encode?d:new ka(typeof d===\"string\"?va[d]:d||{});d=new La(k,d);b.set(g,d)}this.worker||b.set(g,new T(k,this.reg));k.custom?this.B[f]=k.custom:(this.B[f]=hb(g,this.D),k.filter&&(typeof this.B[f]===\"string\"&&(this.B[f]=new String(this.B[f])),this.B[f].G=k.filter));this.field[f]=g}if(this.h){a=\nc.store;M(a)&&(a=[a]);for(let f=0,g,k;f<a.length;f++)g=a[f],k=g.field||g,g.custom?(this.h[f]=g.custom,g.custom.O=k):(this.h[f]=hb(k,this.D),g.filter&&(typeof this.h[f]===\"string\"&&(this.h[f]=new String(this.h[f])),this.h[f].G=g.filter))}return b}function hb(a,c){const b=a.split(\":\");let e=0;for(let d=0;d<b.length;d++)a=b[d],a[a.length-1]===\"]\"&&(a=a.substring(0,a.length-2))&&(c[e]=!0),a&&(b[e++]=a);e<b.length&&(b.length=e);return e>1?b:b[0]}w.append=function(a,c){return this.add(a,c,!0)};\nw.update=function(a,c){return this.remove(a).add(a,c)};w.remove=function(a){ba(a)&&(a=ca(a,this.key));for(var c of this.index.values())c.remove(a,!0);if(this.reg.has(a)){if(this.tag&&!this.fastupdate)for(let b of this.tag.values())for(let e of b){c=e[0];const d=e[1],f=d.indexOf(a);f>-1&&(d.length>1?d.splice(f,1):b.delete(c))}this.store&&this.store.delete(a);this.reg.delete(a)}this.cache&&this.cache.remove(a);return this};\nw.clear=function(){const a=[];for(const c of this.index.values()){const b=c.clear();b.then&&a.push(b)}if(this.tag)for(const c of this.tag.values())c.clear();this.store&&this.store.clear();this.cache&&this.cache.clear();return a.length?Promise.all(a):this};w.contain=function(a){return this.db?this.index.get(this.field[0]).db.has(a):this.reg.has(a)};w.cleanup=function(){for(const a of this.index.values())a.cleanup();return this};\nw.get=function(a){return this.db?this.index.get(this.field[0]).db.enrich(a).then(function(c){return c[0]&&c[0].doc||null}):this.store.get(a)||null};w.set=function(a,c){typeof a===\"object\"&&(c=a,a=ca(c,this.key));this.store.set(a,c);return this};w.searchCache=la;w.export=jb;w.import=kb;Fa(Na.prototype);function lb(a,c=0){let b=[],e=[];c&&(c=25E4/c*5E3|0);for(const d of a.entries())e.push(d),e.length===c&&(b.push(e),e=[]);e.length&&b.push(e);return b}function mb(a,c){c||(c=new Map);for(let b=0,e;b<a.length;b++)e=a[b],c.set(e[0],e[1]);return c}function nb(a,c=0){let b=[],e=[];c&&(c=25E4/c*1E3|0);for(const d of a.entries())e.push([d[0],lb(d[1])[0]||[]]),e.length===c&&(b.push(e),e=[]);e.length&&b.push(e);return b}\nfunction ob(a,c){c||(c=new Map);for(let b=0,e,d;b<a.length;b++)e=a[b],d=c.get(e[0]),c.set(e[0],mb(e[1],d));return c}function pb(a){let c=[],b=[];for(const e of a.keys())b.push(e),b.length===25E4&&(c.push(b),b=[]);b.length&&c.push(b);return c}function qb(a,c){c||(c=new Set);for(let b=0;b<a.length;b++)c.add(a[b]);return c}\nfunction rb(a,c,b,e,d,f,g=0){const k=e&&e.constructor===Array;var h=k?e.shift():e;if(!h)return this.export(a,c,d,f+1);if((h=a((c?c+\".\":\"\")+(g+1)+\".\"+b,JSON.stringify(h)))&&h.then){const l=this;return h.then(function(){return rb.call(l,a,c,b,k?e:null,d,f,g+1)})}return rb.call(this,a,c,b,k?e:null,d,f,g+1)}\nfunction jb(a,c,b=0,e=0){if(b<this.field.length){const g=this.field[b];if((c=this.index.get(g).export(a,g,b,e=1))&&c.then){const k=this;return c.then(function(){return k.export(a,g,b+1)})}return this.export(a,g,b+1)}let d,f;switch(e){case 0:d=\"reg\";f=pb(this.reg);c=null;break;case 1:d=\"tag\";f=this.tag&&nb(this.tag,this.reg.size);c=null;break;case 2:d=\"doc\";f=this.store&&lb(this.store);c=null;break;default:return}return rb.call(this,a,c,d,f||null,b,e)}\nfunction kb(a,c){var b=a.split(\".\");b[b.length-1]===\"json\"&&b.pop();const e=b.length>2?b[0]:\"\";b=b.length>2?b[2]:b[1];if(this.worker&&e)return this.index.get(e).import(a);if(c){typeof c===\"string\"&&(c=JSON.parse(c));if(e)return this.index.get(e).import(b,c);switch(b){case \"reg\":this.fastupdate=!1;this.reg=qb(c,this.reg);for(let d=0,f;d<this.field.length;d++)f=this.index.get(this.field[d]),f.fastupdate=!1,f.reg=this.reg;if(this.worker){c=[];for(const d of this.index.values())c.push(d.import(a));return Promise.all(c)}break;\ncase \"tag\":this.tag=ob(c,this.tag);break;case \"doc\":this.store=mb(c,this.store)}}}function sb(a,c){let b=\"\";for(const e of a.entries()){a=e[0];const d=e[1];let f=\"\";for(let g=0,k;g<d.length;g++){k=d[g]||[\"\"];let h=\"\";for(let l=0;l<k.length;l++)h+=(h?\",\":\"\")+(c===\"string\"?'\"'+k[l]+'\"':k[l]);h=\"[\"+h+\"]\";f+=(f?\",\":\"\")+h}f='[\"'+a+'\",['+f+\"]]\";b+=(b?\",\":\"\")+f}return b};T.prototype.remove=function(a,c){const b=this.reg.size&&(this.fastupdate?this.reg.get(a):this.reg.has(a));if(b){if(this.fastupdate)for(let e=0,d,f;e<b.length;e++){if((d=b[e])&&(f=d.length))if(d[f-1]===a)d.pop();else{const g=d.indexOf(a);g>=0&&d.splice(g,1)}}else tb(this.map,a),this.depth&&tb(this.ctx,a);c||this.reg.delete(a)}this.db&&(this.commit_task.push({del:a}),this.M&&ub(this));this.cache&&this.cache.remove(a);return this};\nfunction tb(a,c){let b=0;var e=typeof c===\"undefined\";if(a.constructor===Array)for(let d=0,f,g,k;d<a.length;d++){if((f=a[d])&&f.length){if(e)return 1;g=f.indexOf(c);if(g>=0){if(f.length>1)return f.splice(g,1),1;delete a[d];if(b)return 1;k=1}else{if(k)return 1;b++}}}else for(let d of a.entries())e=d[0],tb(d[1],c)?b++:a.delete(e);return b};const vb={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:\"forward\"},score:{resolution:9,context:{depth:2,resolution:3}}};T.prototype.add=function(a,c,b,e){if(c&&(a||a===0)){if(!e&&!b&&this.reg.has(a))return this.update(a,c);e=this.depth;c=this.encoder.encode(c,!e);const l=c.length;if(l){const m=I(),p=I(),u=this.resolution;for(let r=0;r<l;r++){let t=c[this.rtl?l-1-r:r];var d=t.length;if(d&&(e||!p[t])){var f=this.score?this.score(c,t,r,null,0):wb(u,l,r),g=\"\";switch(this.tokenize){case \"tolerant\":Y(this,p,t,f,a,b);if(d>2){for(let n=1,q,x,v,A;n<d-1;n++)q=t.charAt(n),x=t.charAt(n+1),v=t.substring(0,n)+x,A=t.substring(n+\n2),g=v+q+A,Y(this,p,g,f,a,b),g=v+A,Y(this,p,g,f,a,b);Y(this,p,t.substring(0,t.length-1),f,a,b)}break;case \"full\":if(d>2){for(let n=0,q;n<d;n++)for(f=d;f>n;f--){g=t.substring(n,f);q=this.rtl?d-1-n:n;var k=this.score?this.score(c,t,r,g,q):wb(u,l,r,d,q);Y(this,p,g,k,a,b)}break}case \"bidirectional\":case \"reverse\":if(d>1){for(k=d-1;k>0;k--){g=t[this.rtl?d-1-k:k]+g;var h=this.score?this.score(c,t,r,g,k):wb(u,l,r,d,k);Y(this,p,g,h,a,b)}g=\"\"}case \"forward\":if(d>1){for(k=0;k<d;k++)g+=t[this.rtl?d-1-k:k],Y(this,\np,g,f,a,b);break}default:if(Y(this,p,t,f,a,b),e&&l>1&&r<l-1)for(d=this.N,g=t,f=Math.min(e+1,this.rtl?r+1:l-r),k=1;k<f;k++){t=c[this.rtl?l-1-r-k:r+k];h=this.bidirectional&&t>g;const n=this.score?this.score(c,g,r,t,k-1):wb(d+(l/2>d?0:1),l,r,f-1,k-1);Y(this,m,h?g:t,n,a,b,h?t:g)}}}}this.fastupdate||this.reg.add(a)}}this.db&&(this.commit_task.push(b?{ins:a}:{del:a}),this.M&&ub(this));return this};\nfunction Y(a,c,b,e,d,f,g){let k,h;if(!(k=c[b])||g&&!k[g]){g?(c=k||(c[b]=I()),c[g]=1,h=a.ctx,(k=h.get(g))?h=k:h.set(g,h=a.keystore?new R(a.keystore):new Map)):(h=a.map,c[b]=1);(k=h.get(b))?h=k:h.set(b,h=k=[]);if(f)for(let l=0,m;l<k.length;l++)if((m=k[l])&&m.includes(d)){if(l<=e)return;m.splice(m.indexOf(d),1);a.fastupdate&&(c=a.reg.get(d))&&c.splice(c.indexOf(m),1);break}h=h[e]||(h[e]=[]);h.push(d);if(h.length===2**31-1){c=new xa(h);if(a.fastupdate)for(let l of a.reg.values())l.includes(h)&&(l[l.indexOf(h)]=\nc);k[e]=h=c}a.fastupdate&&((e=a.reg.get(d))?e.push(h):a.reg.set(d,[h]))}}function wb(a,c,b,e,d){return b&&a>1?c+(e||0)<=a?b+(d||0):(a-1)/(c+(e||0))*(b+(d||0))+1|0:0};T.prototype.search=function(a,c,b){b||(c||typeof a!==\"object\"?typeof c===\"object\"&&(b=c,c=0):(b=a,a=\"\"));if(b&&b.cache)return b.cache=!1,a=this.searchCache(a,c,b),b.cache=!0,a;let e=[],d,f,g,k=0,h,l,m,p,u;b&&(a=b.query||a,c=b.limit||c,k=b.offset||0,f=b.context,g=b.suggest,u=(h=b.resolve)&&b.enrich,m=b.boost,p=b.resolution,l=this.db&&b.tag);typeof h===\"undefined\"&&(h=this.resolve);f=this.depth&&f!==!1;let r=this.encoder.encode(a,!f);d=r.length;c=c||(h?100:0);if(d===1)return xb.call(this,r[0],\"\",c,\nk,h,u,l);if(d===2&&f&&!g)return xb.call(this,r[1],r[0],c,k,h,u,l);let t=I(),n=0,q;f&&(q=r[0],n=1);p||p===0||(p=q?this.N:this.resolution);if(this.db){if(this.db.search&&(b=this.db.search(this,r,c,k,g,h,u,l),b!==!1))return b;const x=this;return async function(){for(let v,A;n<d;n++){if((A=r[n])&&!t[A]){t[A]=1;v=await yb(x,A,q,0,0,!1,!1);if(v=zb(v,e,g,p)){e=v;break}q&&(g&&v&&e.length||(q=A))}g&&q&&n===d-1&&!e.length&&(p=x.resolution,q=\"\",n=-1,t=I())}return Ab(e,p,c,k,g,m,h)}()}for(let x,v;n<d;n++){if((v=\nr[n])&&!t[v]){t[v]=1;x=yb(this,v,q,0,0,!1,!1);if(x=zb(x,e,g,p)){e=x;break}q&&(g&&x&&e.length||(q=v))}g&&q&&n===d-1&&!e.length&&(p=this.resolution,q=\"\",n=-1,t=I())}return Ab(e,p,c,k,g,m,h)};function Ab(a,c,b,e,d,f,g){let k=a.length,h=a;if(k>1)h=$a(a,c,b,e,d,f,g);else if(k===1)return g?Sa.call(null,a[0],b,e):new X(a[0],this);return g?h:new X(h,this)}\nfunction xb(a,c,b,e,d,f,g){a=yb(this,a,c,b,e,d,f,g);return this.db?a.then(function(k){return d?k||[]:new X(k,this)}):a&&a.length?d?Sa.call(this,a,b,e):new X(a,this):d?[]:new X([],this)}function zb(a,c,b,e){let d=[];if(a&&a.length){if(a.length<=e){c.push(a);return}for(let f=0,g;f<e;f++)if(g=a[f])d[f]=g;if(d.length){c.push(d);return}}if(!b)return d}\nfunction yb(a,c,b,e,d,f,g,k){let h;b&&(h=a.bidirectional&&c>b)&&(h=b,b=c,c=h);if(a.db)return a.db.get(c,b,e,d,f,g,k);a=b?(a=a.ctx.get(b))&&a.get(c):a.map.get(c);return a};function T(a,c){if(!this||this.constructor!==T)return new T(a);if(a){var b=M(a)?a:a.preset;b&&(a=Object.assign({},vb[b],a))}else a={};b=a.context;const e=b===!0?{depth:1}:b||{},d=M(a.encoder)?va[a.encoder]:a.encode||a.encoder||{};this.encoder=d.encode?d:typeof d===\"object\"?new ka(d):{encode:d};this.resolution=a.resolution||9;this.tokenize=b=(b=a.tokenize)&&b!==\"default\"&&b!==\"exact\"&&b||\"strict\";this.depth=b===\"strict\"&&e.depth||0;this.bidirectional=e.bidirectional!==!1;this.fastupdate=!!a.fastupdate;\nthis.score=a.score||null;(b=a.keystore||0)&&(this.keystore=b);this.map=b?new R(b):new Map;this.ctx=b?new R(b):new Map;this.reg=c||(this.fastupdate?b?new R(b):new Map:b?new S(b):new Set);this.N=e.resolution||3;this.rtl=d.rtl||a.rtl||!1;this.cache=(b=a.cache||null)&&new ma(b);this.resolve=a.resolve!==!1;if(b=a.db)this.db=this.mount(b);this.M=a.commit!==!1;this.commit_task=[];this.commit_timer=null;this.priority=a.priority||4}w=T.prototype;\nw.mount=function(a){this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null);return a.mount(this)};w.commit=function(){this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null);return this.db.commit(this)};w.destroy=function(){this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null);return this.db.destroy()};function ub(a){a.commit_timer||(a.commit_timer=setTimeout(function(){a.commit_timer=null;a.db.commit(a)},1))}\nw.clear=function(){this.map.clear();this.ctx.clear();this.reg.clear();this.cache&&this.cache.clear();return this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this};w.append=function(a,c){return this.add(a,c,!0)};w.contain=function(a){return this.db?this.db.has(a):this.reg.has(a)};w.update=function(a,c){const b=this,e=this.remove(a);return e&&e.then?e.then(()=>b.add(a,c)):this.add(a,c)};\nw.cleanup=function(){if(!this.fastupdate)return this;tb(this.map);this.depth&&tb(this.ctx);return this};w.searchCache=la;w.export=function(a,c,b=0,e=0){let d,f;switch(e){case 0:d=\"reg\";f=pb(this.reg);break;case 1:d=\"cfg\";f=null;break;case 2:d=\"map\";f=lb(this.map,this.reg.size);break;case 3:d=\"ctx\";f=nb(this.ctx,this.reg.size);break;default:return}return rb.call(this,a,c,d,f,b,e)};\nw.import=function(a,c){if(c)switch(typeof c===\"string\"&&(c=JSON.parse(c)),a=a.split(\".\"),a[a.length-1]===\"json\"&&a.pop(),a.length===3&&a.shift(),a=a.length>1?a[1]:a[0],a){case \"reg\":this.fastupdate=!1;this.reg=qb(c,this.reg);break;case \"map\":this.map=mb(c,this.map);break;case \"ctx\":this.ctx=ob(c,this.ctx)}};\nw.serialize=function(a=!0){let c=\"\",b=\"\",e=\"\";if(this.reg.size){let f;for(var d of this.reg.keys())f||(f=typeof d),c+=(c?\",\":\"\")+(f===\"string\"?'\"'+d+'\"':d);c=\"index.reg=new Set([\"+c+\"]);\";b=sb(this.map,f);b=\"index.map=new Map([\"+b+\"]);\";for(const g of this.ctx.entries()){d=g[0];let k=sb(g[1],f);k=\"new Map([\"+k+\"])\";k='[\"'+d+'\",'+k+\"]\";e+=(e?\",\":\"\")+k}e=\"index.ctx=new Map([\"+e+\"]);\"}return a?\"function inject(index){\"+c+b+e+\"}\":c+b+e};Fa(T.prototype);const Bb=typeof window!==\"undefined\"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Cb=[\"map\",\"ctx\",\"tag\",\"reg\",\"cfg\"],Db=I();\nfunction Eb(a,c={}){if(!this||this.constructor!==Eb)return new Eb(a,c);typeof a===\"object\"&&(c=a,a=a.name);a||console.info(\"Default storage space was used, because a name was not passed.\");this.id=\"flexsearch\"+(a?\":\"+a.toLowerCase().replace(/[^a-z0-9_\\-]/g,\"\"):\"\");this.field=c.field?c.field.toLowerCase().replace(/[^a-z0-9_\\-]/g,\"\"):\"\";this.type=c.type;this.fastupdate=this.support_tag_search=!1;this.db=null;this.h={}}w=Eb.prototype;w.mount=function(a){if(a.index)return a.mount(this);a.db=this;return this.open()};\nw.open=function(){if(this.db)return this.db;let a=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist();Db[a.id]||(Db[a.id]=[]);Db[a.id].push(a.field);const c=Bb.open(a.id,1);c.onupgradeneeded=function(){const b=a.db=this.result;for(let e=0,d;e<Cb.length;e++){d=Cb[e];for(let f=0,g;f<Db[a.id].length;f++)g=Db[a.id][f],b.objectStoreNames.contains(d+(d!==\"reg\"?g?\":\"+g:\"\":\"\"))||b.createObjectStore(d+(d!==\"reg\"?g?\":\"+g:\"\":\"\"))}};return a.db=Z(c,function(b){a.db=b;a.db.onversionchange=\nfunction(){a.close()}})};w.close=function(){this.db&&this.db.close();this.db=null};w.destroy=function(){const a=Bb.deleteDatabase(this.id);return Z(a)};w.clear=function(){const a=[];for(let b=0,e;b<Cb.length;b++){e=Cb[b];for(let d=0,f;d<Db[this.id].length;d++)f=Db[this.id][d],a.push(e+(e!==\"reg\"?f?\":\"+f:\"\":\"\"))}const c=this.db.transaction(a,\"readwrite\");for(let b=0;b<a.length;b++)c.objectStore(a[b]).clear();return Z(c)};\nw.get=function(a,c,b=0,e=0,d=!0,f=!1){a=this.db.transaction((c?\"ctx\":\"map\")+(this.field?\":\"+this.field:\"\"),\"readonly\").objectStore((c?\"ctx\":\"map\")+(this.field?\":\"+this.field:\"\")).get(c?c+\":\"+a:a);const g=this;return Z(a).then(function(k){let h=[];if(!k||!k.length)return h;if(d){if(!b&&!e&&k.length===1)return k[0];for(let l=0,m;l<k.length;l++)if((m=k[l])&&m.length){if(e>=m.length){e-=m.length;continue}const p=b?e+Math.min(m.length-e,b):m.length;for(let u=e;u<p;u++)h.push(m[u]);e=0;if(h.length===b)break}return f?\ng.enrich(h):h}return k})};w.tag=function(a,c=0,b=0,e=!1){a=this.db.transaction(\"tag\"+(this.field?\":\"+this.field:\"\"),\"readonly\").objectStore(\"tag\"+(this.field?\":\"+this.field:\"\")).get(a);const d=this;return Z(a).then(function(f){if(!f||!f.length||b>=f.length)return[];if(!c&&!b)return f;f=f.slice(b,b+c);return e?d.enrich(f):f})};\nw.enrich=function(a){typeof a!==\"object\"&&(a=[a]);const c=this.db.transaction(\"reg\",\"readonly\").objectStore(\"reg\"),b=[];for(let e=0;e<a.length;e++)b[e]=Z(c.get(a[e]));return Promise.all(b).then(function(e){for(let d=0;d<e.length;d++)e[d]={id:a[d],doc:e[d]?JSON.parse(e[d]):null};return e})};w.has=function(a){a=this.db.transaction(\"reg\",\"readonly\").objectStore(\"reg\").getKey(a);return Z(a).then(function(c){return!!c})};w.search=null;w.info=function(){};\nw.transaction=function(a,c,b){a+=a!==\"reg\"?this.field?\":\"+this.field:\"\":\"\";let e=this.h[a+\":\"+c];if(e)return b.call(this,e);let d=this.db.transaction(a,c);this.h[a+\":\"+c]=e=d.objectStore(a);const f=b.call(this,e);this.h[a+\":\"+c]=null;return Z(d).finally(function(){return f})};\nw.commit=async function(a){let c=a.commit_task,b=[];a.commit_task=[];for(let e=0,d;e<c.length;e++)d=c[e],d.del&&b.push(d.del);b.length&&await this.remove(b);a.reg.size&&(await this.transaction(\"map\",\"readwrite\",function(e){for(const d of a.map){const f=d[0],g=d[1];g.length&&(e.get(f).onsuccess=function(){let k=this.result;var h;if(k&&k.length){const l=Math.max(k.length,g.length);for(let m=0,p,u;m<l;m++)if((u=g[m])&&u.length){if((p=k[m])&&p.length)for(h=0;h<u.length;h++)p.push(u[h]);else k[m]=u;h=\n1}}else k=g,h=1;h&&e.put(k,f)})}}),await this.transaction(\"ctx\",\"readwrite\",function(e){for(const d of a.ctx){const f=d[0],g=d[1];for(const k of g){const h=k[0],l=k[1];l.length&&(e.get(f+\":\"+h).onsuccess=function(){let m=this.result;var p;if(m&&m.length){const u=Math.max(m.length,l.length);for(let r=0,t,n;r<u;r++)if((n=l[r])&&n.length){if((t=m[r])&&t.length)for(p=0;p<n.length;p++)t.push(n[p]);else m[r]=n;p=1}}else m=l,p=1;p&&e.put(m,f+\":\"+h)})}}}),a.store?await this.transaction(\"reg\",\"readwrite\",\nfunction(e){for(const d of a.store){const f=d[0],g=d[1];e.put(typeof g===\"object\"?JSON.stringify(g):1,f)}}):a.bypass||await this.transaction(\"reg\",\"readwrite\",function(e){for(const d of a.reg.keys())e.put(1,d)}),a.tag&&await this.transaction(\"tag\",\"readwrite\",function(e){for(const d of a.tag){const f=d[0],g=d[1];g.length&&(e.get(f).onsuccess=function(){let k=this.result;k=k&&k.length?k.concat(g):g;e.put(k,f)})}}),a.map.clear(),a.ctx.clear(),a.tag&&a.tag.clear(),a.store&&a.store.clear(),a.document||\na.reg.clear())};function Fb(a,c,b){const e=a.value;let d,f=0;for(let g=0,k;g<e.length;g++){if(k=b?e:e[g]){for(let h=0,l,m;h<c.length;h++)if(m=c[h],l=k.indexOf(m),l>=0)if(d=1,k.length>1)k.splice(l,1);else{e[g]=[];break}f+=k.length}if(b)break}f?d&&a.update(e):a.delete();a.continue()}\nw.remove=function(a){typeof a!==\"object\"&&(a=[a]);return Promise.all([this.transaction(\"map\",\"readwrite\",function(c){c.openCursor().onsuccess=function(){const b=this.result;b&&Fb(b,a)}}),this.transaction(\"ctx\",\"readwrite\",function(c){c.openCursor().onsuccess=function(){const b=this.result;b&&Fb(b,a)}}),this.transaction(\"tag\",\"readwrite\",function(c){c.openCursor().onsuccess=function(){const b=this.result;b&&Fb(b,a,!0)}}),this.transaction(\"reg\",\"readwrite\",function(c){for(let b=0;b<a.length;b++)c.delete(a[b])})])};\nfunction Z(a,c){return new Promise((b,e)=>{a.onsuccess=a.oncomplete=function(){c&&c(this.result);c=null;b(this.result)};a.onerror=a.onblocked=e;a=null})};export default {Index:T,Charset:va,Encoder:ka,Document:Na,Worker:La,Resolver:X,IndexedDB:Eb,Language:{}};\nexport const Index=T;export const Charset=va;export const Encoder=ka;export const Document=Na;export const Worker=La;export const Resolver=X;export const IndexedDB=Eb;export const Language={};","// FlexSearch integration for powerful bookmark search\n// Provides fuzzy matching, relevance ranking, and multi-field search\n\nimport { Document } from 'flexsearch';\nimport { db, getAllBookmarks, setCache, getCache } from './db.js';\n\n// FlexSearch index instance\nlet searchIndex = null;\nlet indexInitialized = false;\n\n/**\n * Parse advanced search query with +/- modifiers and quoted phrases\n * @param {string} query - The raw search query\n * @returns {Object} Parsed query components\n */\nexport function parseAdvancedQuery(query) {\n  if (!query || !query.trim()) {\n    return { positive: [], negative: [], phrases: [], regular: [], hasModifiers: false };\n  }\n  \n  const positive = [];  // Must include (+term)\n  const negative = [];  // Must exclude (-term)\n  const phrases = [];   // Exact phrases (\"exact match\")\n  const regular = [];   // Regular search terms\n  \n  // Extract quoted phrases first (including their modifiers)\n  const phraseRegex = /([+-]?)\"([^\"]+)\"/g;\n  let match;\n  while ((match = phraseRegex.exec(query)) !== null) {\n    const modifier = match[1];\n    const phrase = match[2].toLowerCase();\n    if (modifier === '+') {\n      positive.push(phrase);\n    } else if (modifier === '-') {\n      negative.push(phrase);\n    } else {\n      phrases.push(phrase);\n    }\n  }\n  \n  // Remove quoted phrases for further parsing\n  let remaining = query.replace(/[+-]?\"[^\"]+\"/g, '').trim();\n  \n  // Split into terms and categorize\n  const terms = remaining.split(/\\s+/).filter(t => t.length > 0);\n  \n  for (const term of terms) {\n    const lowerTerm = term.toLowerCase();\n    if (term.startsWith('+') && term.length > 1) {\n      positive.push(lowerTerm.slice(1));\n    } else if (term.startsWith('-') && term.length > 1) {\n      negative.push(lowerTerm.slice(1));\n    } else {\n      regular.push(lowerTerm);\n    }\n  }\n  \n  return {\n    positive,\n    negative,\n    phrases,\n    regular,\n    hasModifiers: positive.length > 0 || negative.length > 0 || phrases.length > 0\n  };\n}\n\n/**\n * Check if a bookmark matches the parsed query\n * @param {Object} bookmark - The bookmark to check\n * @param {Object} parsedQuery - Parsed query from parseAdvancedQuery\n * @returns {boolean} Whether the bookmark matches\n */\nfunction matchesAdvancedQuery(bookmark, parsedQuery) {\n  const { positive, negative, phrases, regular } = parsedQuery;\n  \n  // Build searchable text from bookmark (cached for performance)\n  const searchableText = [\n    bookmark.title || '',\n    bookmark.url || '',\n    bookmark.description || '',\n    bookmark.domain || '',\n    bookmark.category || '',\n    Array.isArray(bookmark.keywords) ? bookmark.keywords.join(' ') : ''\n  ].join(' ').toLowerCase();\n  \n  // All positive terms must be present\n  for (const term of positive) {\n    if (!searchableText.includes(term)) {\n      return false;\n    }\n  }\n  \n  // All negative terms must be absent\n  for (const term of negative) {\n    if (searchableText.includes(term)) {\n      return false;\n    }\n  }\n  \n  // All exact phrases must be present\n  for (const phrase of phrases) {\n    if (!searchableText.includes(phrase)) {\n      return false;\n    }\n  }\n  \n  // If there are regular terms, at least one must match\n  if (regular.length > 0) {\n    const hasRegularMatch = regular.some(term => searchableText.includes(term));\n    if (!hasRegularMatch) {\n      return false;\n    }\n  }\n  \n  return true;\n}\n\n/**\n * Calculate relevance score for a bookmark\n * @param {Object} bookmark - The bookmark\n * @param {Object} parsedQuery - Parsed query\n * @returns {number} Relevance score\n */\nfunction calculateRelevanceScore(bookmark, parsedQuery) {\n  const { positive, phrases, regular } = parsedQuery;\n  let score = 0;\n  \n  const title = (bookmark.title || '').toLowerCase();\n  const url = (bookmark.url || '').toLowerCase();\n  const domain = (bookmark.domain || '').toLowerCase();\n  const description = (bookmark.description || '').toLowerCase();\n  const category = (bookmark.category || '').toLowerCase();\n  \n  const allTerms = [...positive, ...phrases, ...regular];\n  \n  for (const term of allTerms) {\n    // Title matches are most valuable\n    if (title.includes(term)) {\n      score += 10;\n      // Bonus for title starting with term\n      if (title.startsWith(term)) score += 5;\n    }\n    // Domain matches\n    if (domain.includes(term)) score += 5;\n    // Category matches\n    if (category.includes(term)) score += 4;\n    // Description matches\n    if (description.includes(term)) score += 2;\n    // URL matches\n    if (url.includes(term)) score += 1;\n  }\n  \n  return score;\n}\n\n// Initialize FlexSearch index with optimized configuration\nexport async function initializeSearchIndex() {\n  if (indexInitialized) {\n    return searchIndex;\n  }\n\n  console.log('Initializing FlexSearch index...');\n\n  // Try to load serialized index from cache\n  const cachedIndex = await getCache('flexsearch_index');\n  \n  if (cachedIndex && cachedIndex.serialized) {\n    try {\n      searchIndex = new Document({\n        document: {\n          id: 'id',\n          index: ['title', 'url', 'description', 'keywords', 'category', 'domain'],\n          store: true\n        },\n        tokenize: 'forward',\n        cache: true,\n        optimize: true,\n        resolution: 9,\n        context: {\n          depth: 3,\n          bidirectional: true\n        }\n      });\n      \n      // Import serialized data\n      searchIndex.import(cachedIndex.serialized);\n      indexInitialized = true;\n      console.log('Loaded FlexSearch index from cache');\n      return searchIndex;\n    } catch (error) {\n      console.error('Error loading cached index:', error);\n      // Fall through to rebuild\n    }\n  }\n\n  // Build new index\n  await rebuildSearchIndex();\n  return searchIndex;\n}\n\n// Rebuild the entire search index from bookmarks\nexport async function rebuildSearchIndex() {\n  console.log('Building FlexSearch index...');\n  \n  searchIndex = new Document({\n    document: {\n      id: 'id',\n      index: ['title', 'url', 'description', 'keywords', 'category', 'domain'],\n      store: true\n    },\n    tokenize: 'forward',\n    cache: true,\n    optimize: true,\n    resolution: 9,\n    context: {\n      depth: 3,\n      bidirectional: true\n    }\n  });\n\n  const bookmarks = await getAllBookmarks();\n  \n  // Add all bookmarks to index\n  for (const bookmark of bookmarks) {\n    await addToIndex(bookmark);\n  }\n\n  indexInitialized = true;\n  \n  // Cache the serialized index\n  try {\n    const serialized = await searchIndex.export();\n    await setCache('flexsearch_index', { serialized, timestamp: Date.now() });\n    console.log(`Indexed ${bookmarks.length} bookmarks`);\n  } catch (error) {\n    console.error('Error caching index:', error);\n  }\n\n  return searchIndex;\n}\n\n// Add a bookmark to the search index\nexport async function addToIndex(bookmark) {\n  if (!searchIndex) {\n    await initializeSearchIndex();\n  }\n\n  // Prepare document for indexing\n  const doc = {\n    id: bookmark.id,\n    title: bookmark.title || '',\n    url: bookmark.url || '',\n    description: bookmark.description || '',\n    keywords: Array.isArray(bookmark.keywords) ? bookmark.keywords.join(' ') : '',\n    category: bookmark.category || '',\n    domain: bookmark.domain || ''\n  };\n\n  await searchIndex.add(doc);\n}\n\n// Remove a bookmark from the search index\nexport async function removeFromIndex(bookmarkId) {\n  if (!searchIndex) {\n    return;\n  }\n\n  await searchIndex.remove(bookmarkId);\n}\n\n// Update a bookmark in the search index\nexport async function updateInIndex(bookmark) {\n  await removeFromIndex(bookmark.id);\n  await addToIndex(bookmark);\n}\n\n/**\n * Parse special filter prefixes from search query\n * Supports: category:X, domain:X, accessed:yes/no, stale:yes, enriched:yes/no, dead:yes\n * @param {string} query - Raw search query\n * @returns {Object} { filters, remainingQuery }\n */\nexport function parseSpecialFilters(query) {\n  if (!query || !query.trim()) {\n    return { filters: {}, remainingQuery: '' };\n  }\n  \n  const filters = {};\n  let remaining = query;\n  \n  // Category filter: category:value\n  const categoryMatch = remaining.match(/category:(\\S+)/i);\n  if (categoryMatch) {\n    filters.category = categoryMatch[1].toLowerCase();\n    remaining = remaining.replace(categoryMatch[0], '').trim();\n  }\n  \n  // Domain filter: domain:value\n  const domainMatch = remaining.match(/domain:(\\S+)/i);\n  if (domainMatch) {\n    filters.domain = domainMatch[1].toLowerCase();\n    remaining = remaining.replace(domainMatch[0], '').trim();\n  }\n  \n  // Accessed filter: accessed:yes/no\n  const accessedMatch = remaining.match(/accessed:(yes|no)/i);\n  if (accessedMatch) {\n    filters.accessed = accessedMatch[1].toLowerCase() === 'yes';\n    remaining = remaining.replace(accessedMatch[0], '').trim();\n  }\n  \n  // Stale filter: stale:yes (old and never accessed)\n  const staleMatch = remaining.match(/stale:(yes|no)/i);\n  if (staleMatch) {\n    filters.stale = staleMatch[1].toLowerCase() === 'yes';\n    remaining = remaining.replace(staleMatch[0], '').trim();\n  }\n  \n  // Enriched filter: enriched:yes/no\n  const enrichedMatch = remaining.match(/enriched:(yes|no)/i);\n  if (enrichedMatch) {\n    filters.enriched = enrichedMatch[1].toLowerCase() === 'yes';\n    remaining = remaining.replace(enrichedMatch[0], '').trim();\n  }\n  \n  // Dead link filter: dead:yes/no\n  const deadMatch = remaining.match(/dead:(yes|no)/i);\n  if (deadMatch) {\n    filters.dead = deadMatch[1].toLowerCase() === 'yes';\n    remaining = remaining.replace(deadMatch[0], '').trim();\n  }\n  \n  // Folder filter: folder:value or folder:\"value with spaces\"\n  const folderMatch = remaining.match(/folder:(?:\"([^\"]+)\"|(\\S+))/i);\n  if (folderMatch) {\n    filters.folder = (folderMatch[1] || folderMatch[2]).toLowerCase();\n    remaining = remaining.replace(folderMatch[0], '').trim();\n  }\n  \n  return { filters, remainingQuery: remaining };\n}\n\n/**\n * Apply special filters to bookmarks\n * @param {Array} bookmarks - Array of bookmarks\n * @param {Object} filters - Special filters from parseSpecialFilters\n * @returns {Array} Filtered bookmarks\n */\nexport function applySpecialFilters(bookmarks, filters) {\n  const now = Date.now();\n  const thirtyDaysAgo = now - (30 * 24 * 60 * 60 * 1000);\n  \n  return bookmarks.filter(bookmark => {\n    // Category filter\n    if (filters.category) {\n      const bookmarkCategory = (bookmark.category || 'uncategorized').toLowerCase();\n      if (bookmarkCategory !== filters.category) return false;\n    }\n    \n    // Domain filter\n    if (filters.domain) {\n      const bookmarkDomain = (bookmark.domain || '').toLowerCase();\n      if (!bookmarkDomain.includes(filters.domain)) return false;\n    }\n    \n    // Accessed filter\n    if (filters.accessed !== undefined) {\n      const wasAccessed = bookmark.accessCount && bookmark.accessCount > 0;\n      if (filters.accessed !== wasAccessed) return false;\n    }\n    \n    // Stale filter (old + never accessed)\n    if (filters.stale) {\n      const isOld = bookmark.dateAdded < thirtyDaysAgo;\n      const neverAccessed = !bookmark.accessCount || bookmark.accessCount === 0;\n      const isAlive = bookmark.isAlive !== false;\n      if (!(isOld && neverAccessed && isAlive)) return false;\n    }\n    \n    // Enriched filter\n    if (filters.enriched !== undefined) {\n      const isEnriched = Boolean(\n        bookmark.description || \n        (bookmark.keywords && bookmark.keywords.length > 0) ||\n        bookmark.contentSnippet\n      );\n      if (filters.enriched !== isEnriched) return false;\n    }\n    \n    // Dead link filter\n    if (filters.dead !== undefined) {\n      const isDead = bookmark.isAlive === false;\n      if (filters.dead !== isDead) return false;\n    }\n    \n    // Folder filter\n    if (filters.folder) {\n      const folderPath = (bookmark.folderPath || '').toLowerCase();\n      if (!folderPath.includes(filters.folder)) return false;\n    }\n    \n    return true;\n  });\n}\n\n// Search bookmarks with advanced query support\nexport async function searchBookmarks(query, options = {}) {\n  const {\n    limit = 50,\n    offset = 0\n  } = options;\n\n  if (!query || !query.trim()) {\n    // Return all bookmarks sorted by date if no query\n    const bookmarks = await getAllBookmarks();\n    return {\n      results: bookmarks\n        .sort((a, b) => b.dateAdded - a.dateAdded)\n        .slice(offset, offset + limit),\n      total: bookmarks.length,\n      hasMore: offset + limit < bookmarks.length,\n      parsedQuery: null\n    };\n  }\n\n  // Parse special filters first\n  const { filters: specialFilters, remainingQuery } = parseSpecialFilters(query);\n\n  // Parse the advanced query from remaining text\n  const parsedQuery = parseAdvancedQuery(remainingQuery);\n  \n  // Get all bookmarks\n  let allBookmarks = await getAllBookmarks();\n  \n  // Apply special filters first\n  if (Object.keys(specialFilters).length > 0) {\n    allBookmarks = applySpecialFilters(allBookmarks, specialFilters);\n  }\n  \n  // If there's remaining text query, filter further\n  let filteredBookmarks;\n  if (remainingQuery.trim()) {\n    filteredBookmarks = allBookmarks.filter(bookmark => \n      matchesAdvancedQuery(bookmark, parsedQuery)\n    );\n    \n    // Calculate relevance scores and sort\n    filteredBookmarks = filteredBookmarks.map(bookmark => ({\n      ...bookmark,\n      _searchScore: calculateRelevanceScore(bookmark, parsedQuery)\n    }));\n    \n    // Sort by relevance score (highest first)\n    filteredBookmarks.sort((a, b) => b._searchScore - a._searchScore);\n  } else {\n    // No text query, just use filtered results sorted by date\n    filteredBookmarks = allBookmarks.sort((a, b) => b.dateAdded - a.dateAdded);\n  }\n  \n  const total = filteredBookmarks.length;\n  \n  return {\n    results: filteredBookmarks.slice(offset, offset + limit),\n    total,\n    hasMore: offset + limit < total,\n    parsedQuery,\n    specialFilters\n  };\n}\n\n/**\n * Compute stats from search results for sidebar updates\n * @param {Array} bookmarks - Array of bookmark results\n * @returns {Object} Stats for sidebar (domains, folders)\n */\nexport function computeSearchResultStats(bookmarks) {\n  const domainCounts = new Map();\n  const folderCounts = new Map();\n  \n  for (const bookmark of bookmarks) {\n    // Count domains\n    if (bookmark.domain) {\n      const current = domainCounts.get(bookmark.domain) || { count: 0, latestDate: 0 };\n      current.count++;\n      if (bookmark.dateAdded > current.latestDate) {\n        current.latestDate = bookmark.dateAdded;\n      }\n      domainCounts.set(bookmark.domain, current);\n    }\n    \n    // Count folders\n    if (bookmark.folderPath) {\n      const current = folderCounts.get(bookmark.folderPath) || 0;\n      folderCounts.set(bookmark.folderPath, current + 1);\n    }\n  }\n  \n  // Convert to sorted arrays\n  const domains = Array.from(domainCounts.entries())\n    .map(([domain, data]) => ({ domain, count: data.count, latestDate: data.latestDate }))\n    .sort((a, b) => b.count - a.count);\n  \n  const folders = Array.from(folderCounts.entries())\n    .map(([folder, count]) => ({ folder, count }))\n    .sort((a, b) => b.count - a.count);\n  \n  return { domains, folders };\n}\n\n// Advanced search with filters\nexport async function advancedSearch(query, filters = {}) {\n  const searchResult = await searchBookmarks(query, {\n    limit: 1000 // Get more results for filtering\n  });\n\n  let results = searchResult.results || [];\n\n  // Apply filters\n  if (filters.category) {\n    results = results.filter(b => b.category === filters.category);\n  }\n\n  if (filters.domain) {\n    results = results.filter(b => b.domain === filters.domain);\n  }\n\n  if (filters.domains && filters.domains.length > 0) {\n    results = results.filter(b => filters.domains.includes(b.domain));\n  }\n\n  if (filters.categories && filters.categories.length > 0) {\n    results = results.filter(b => filters.categories.includes(b.category));\n  }\n\n  if (filters.dateRange) {\n    const { startDate, endDate } = filters.dateRange;\n    results = results.filter(b => \n      b.dateAdded >= startDate && b.dateAdded <= endDate\n    );\n  }\n\n  if (filters.isAlive !== undefined) {\n    results = results.filter(b => b.isAlive === filters.isAlive);\n  }\n\n  if (filters.hasDescription !== undefined) {\n    if (filters.hasDescription) {\n      results = results.filter(b => b.description && b.description.length > 0);\n    } else {\n      results = results.filter(b => !b.description || b.description.length === 0);\n    }\n  }\n\n  // Apply sorting\n  if (filters.sortBy) {\n    switch (filters.sortBy) {\n      case 'relevance':\n        // Already sorted by search score\n        break;\n      case 'date_desc':\n        results.sort((a, b) => b.dateAdded - a.dateAdded);\n        break;\n      case 'date_asc':\n        results.sort((a, b) => a.dateAdded - b.dateAdded);\n        break;\n      case 'title_asc':\n        results.sort((a, b) => (a.title || '').localeCompare(b.title || ''));\n        break;\n      case 'title_desc':\n        results.sort((a, b) => (b.title || '').localeCompare(a.title || ''));\n        break;\n      case 'domain':\n        results.sort((a, b) => (a.domain || '').localeCompare(b.domain || ''));\n        break;\n    }\n  }\n\n  // Apply pagination\n  const limit = filters.limit || 50;\n  const offset = filters.offset || 0;\n  \n  return {\n    results: results.slice(offset, offset + limit),\n    total: results.length,\n    hasMore: offset + limit < results.length\n  };\n}\n\n// Clear the search index\nexport async function clearSearchIndex() {\n  if (searchIndex) {\n    searchIndex.clear();\n  }\n  await setCache('flexsearch_index', null);\n  indexInitialized = false;\n}\n\n// Export for statistics\nexport function getIndexStats() {\n  if (!searchIndex || !indexInitialized) {\n    return { initialized: false };\n  }\n\n  return {\n    initialized: true,\n    // FlexSearch doesn't expose size directly, but we can estimate\n    cached: true\n  };\n}\n","// Background script for Bookmark Insight Chrome Extension\n// This uses Chrome's service worker pattern for Manifest V3\n// Now enhanced with IndexedDB storage via Dexie.js and enrichment pipeline\n\nimport { db, initializeDatabase, bulkUpsertBookmarks, smartMergeBookmarks, upsertBookmark, deleteBookmark as dbDeleteBookmark, addToEnrichmentQueue, logEvent, getSettings, invalidateMetricCaches } from './src/db.js';\nimport { processEnrichmentBatch } from './src/enrichment.js';\nimport { addToIndex, updateInIndex, removeFromIndex, rebuildSearchIndex } from './src/search.js';\n\n// Initialize extension and database\nchrome.runtime.onInstalled.addListener(async (details) => {\n  console.log('Extension installed/updated:', details.reason);\n  \n  // Initialize IndexedDB and migrate data if needed\n  await initializeDatabase();\n  \n  if (details.reason === 'install') {\n    console.log('First install - syncing bookmarks...');\n    await syncBookmarks();\n    \n    // Build initial search index\n    console.log('Building initial search index...');\n    await rebuildSearchIndex();\n    \n    // Set up enrichment alarms\n    await setupEnrichmentAlarms();\n  } else if (details.reason === 'update') {\n    console.log('Extension updated - syncing bookmarks...');\n    await syncBookmarks();\n    \n    // Rebuild search index\n    console.log('Rebuilding search index...');\n    await rebuildSearchIndex();\n    \n    // Update enrichment alarms\n    await setupEnrichmentAlarms();\n  }\n});\n\n// Sync bookmarks from Chrome to IndexedDB\nasync function syncBookmarks() {\n  try {\n    console.log('Starting bookmark sync...');\n    \n    // Get all bookmarks from Chrome\n    const bookmarkTree = await chrome.bookmarks.getTree();\n    const flatBookmarks = [];\n    \n    // Recursive function to flatten bookmark tree\n    function flattenBookmarks(nodes, folderPath = '') {\n      for (const node of nodes) {\n        if (node.url) {\n          // It's a bookmark\n          let domain = 'unknown';\n          try {\n            // Handle different URL schemes\n            if (node.url.startsWith('http://') || node.url.startsWith('https://')) {\n              const url = new URL(node.url);\n              domain = url.hostname;\n            } else if (node.url.startsWith('chrome://') || node.url.startsWith('chrome-extension://')) {\n              domain = 'chrome-internal';\n            } else if (node.url.startsWith('file://')) {\n              domain = 'local-file';\n            } else if (node.url.startsWith('javascript:')) {\n              domain = 'javascript-bookmarklet';\n            } else if (node.url.startsWith('data:')) {\n              domain = 'data-uri';\n            } else if (node.url.startsWith('mailto:') || node.url.startsWith('tel:')) {\n              domain = 'contact-link';\n            } else {\n              domain = 'other-protocol';\n            }\n          } catch (e) {\n            domain = 'invalid-url';\n          }\n          \n          flatBookmarks.push({\n            id: node.id,\n            title: node.title || 'Untitled',\n            url: node.url,\n            domain: domain,\n            dateAdded: node.dateAdded || Date.now(),\n            folderPath: folderPath,\n            parentId: node.parentId,\n            // Initialize enrichment fields\n            description: null,\n            keywords: [],\n            category: null,\n            tags: [],\n            isAlive: null,\n            lastChecked: null,\n            faviconUrl: null,\n            contentSnippet: null,\n            lastAccessed: null,\n            accessCount: 0\n          });\n        } else if (node.children) {\n          // It's a folder\n          const newPath = folderPath ? `${folderPath}/${node.title}` : node.title;\n          flattenBookmarks(node.children, newPath);\n        }\n      }\n    }\n    \n    flattenBookmarks(bookmarkTree);\n    \n    // Use smart merge to preserve enrichment data\n    await smartMergeBookmarks(flatBookmarks);\n    \n    // Keep chrome.storage.local updated for backward compatibility during transition\n    await chrome.storage.local.set({ \n      bookmarks: flatBookmarks,\n      lastSyncTime: Date.now()\n    });\n    \n    console.log(`Synced ${flatBookmarks.length} bookmarks`);\n    \n    // Add ONLY genuinely new/unenriched bookmarks to enrichment queue\n    // We must check our IndexedDB, not the Chrome data which doesn't have enrichment info\n    const settings = await import('./src/db.js').then(m => m.getSettings());\n    if (settings.enrichmentEnabled) {\n      const { getAllBookmarks, clearEnrichmentQueue } = await import('./src/db.js');\n      const storedBookmarks = await getAllBookmarks();\n      const enrichedIds = new Set(\n        storedBookmarks\n          .filter(b => b.lastChecked || b.description || b.category)\n          .map(b => b.id)\n      );\n      \n      // Clear existing queue and only add truly unenriched bookmarks\n      await clearEnrichmentQueue();\n      \n      let queuedCount = 0;\n      for (const bookmark of flatBookmarks) {\n        // Only queue http/https bookmarks that haven't been enriched\n        if ((bookmark.url.startsWith('http://') || bookmark.url.startsWith('https://')) && \n            !enrichedIds.has(bookmark.id)) {\n          await addToEnrichmentQueue(bookmark.id, 0);\n          queuedCount++;\n        }\n      }\n      console.log(`Queued ${queuedCount} unenriched bookmarks for enrichment`);\n    }\n  } catch (error) {\n    console.error('Error syncing bookmarks:', error);\n  }\n}\n\n// Listen for bookmark changes and update IndexedDB\nchrome.bookmarks.onCreated.addListener(async (id, bookmark) => {\n  await handleBookmarkCreated(id, bookmark);\n});\n\nchrome.bookmarks.onRemoved.addListener(async (id, removeInfo) => {\n  await handleBookmarkRemoved(id, removeInfo);\n});\n\nchrome.bookmarks.onChanged.addListener(async (id, changeInfo) => {\n  await handleBookmarkChanged(id, changeInfo);\n});\n\nchrome.bookmarks.onMoved.addListener(async (id, moveInfo) => {\n  await handleBookmarkMoved(id, moveInfo);\n});\n\n// Handle bookmark creation\nasync function handleBookmarkCreated(id, bookmark) {\n  try {\n    console.log('Bookmark created:', id);\n    \n    // Get the complete bookmark info\n    const [fullBookmark] = await chrome.bookmarks.get(id);\n    \n    if (fullBookmark.url) {\n      let domain = 'unknown';\n      try {\n        if (fullBookmark.url.startsWith('http://') || fullBookmark.url.startsWith('https://')) {\n          domain = new URL(fullBookmark.url).hostname;\n        }\n      } catch (e) {\n        domain = 'invalid-url';\n      }\n      \n      // Get folder path\n      const folderPath = await getBookmarkFolderPath(fullBookmark.parentId);\n      \n      const newBookmark = {\n        id: fullBookmark.id,\n        title: fullBookmark.title || 'Untitled',\n        url: fullBookmark.url,\n        domain: domain,\n        dateAdded: fullBookmark.dateAdded || Date.now(),\n        folderPath: folderPath,\n        parentId: fullBookmark.parentId,\n        description: null,\n        keywords: [],\n        category: null,\n        tags: [],\n        isAlive: null,\n        lastChecked: null,\n        faviconUrl: null,\n        contentSnippet: null,\n        lastAccessed: null,\n        accessCount: 0\n      };\n      \n      // Add to IndexedDB\n      await upsertBookmark(newBookmark);\n      \n      // Add to search index\n      await addToIndex(newBookmark);\n      \n      // Log event\n      await logEvent(id, 'create');\n      \n      // Invalidate relevant caches\n      await invalidateMetricCaches('add');\n      \n      // Add to enrichment queue if enabled\n      const settings = await import('./src/db.js').then(m => m.getSettings());\n      if (settings.enrichmentEnabled && \n          (newBookmark.url.startsWith('http://') || newBookmark.url.startsWith('https://'))) {\n        await addToEnrichmentQueue(id, 10); // Higher priority for new bookmarks\n      }\n    }\n  } catch (error) {\n    console.error('Error handling bookmark creation:', error);\n  }\n}\n\n// Handle bookmark removal\nasync function handleBookmarkRemoved(id, removeInfo) {\n  try {\n    console.log('Bookmark removed:', id);\n    await removeFromIndex(id);\n    await dbDeleteBookmark(id);\n    await logEvent(id, 'delete');\n    // Invalidate relevant caches\n    await invalidateMetricCaches('delete');\n  } catch (error) {\n    console.error('Error handling bookmark removal:', error);\n  }\n}\n\n// Handle bookmark changes\nasync function handleBookmarkChanged(id, changeInfo) {\n  try {\n    console.log('Bookmark changed:', id, changeInfo);\n    \n    // Get the updated bookmark\n    const [bookmark] = await chrome.bookmarks.get(id);\n    \n    if (bookmark.url) {\n      let domain = 'unknown';\n      try {\n        if (bookmark.url.startsWith('http://') || bookmark.url.startsWith('https://')) {\n          domain = new URL(bookmark.url).hostname;\n        }\n      } catch (e) {\n        domain = 'invalid-url';\n      }\n      \n      const folderPath = await getBookmarkFolderPath(bookmark.parentId);\n      \n      // Get existing bookmark data to preserve enrichment fields\n      const existingBookmark = await import('./src/db.js').then(m => m.getBookmark(id));\n      \n      const updatedBookmark = {\n        ...(existingBookmark || {}),\n        id: bookmark.id,\n        title: changeInfo.title !== undefined ? changeInfo.title : bookmark.title,\n        url: changeInfo.url !== undefined ? changeInfo.url : bookmark.url,\n        domain: domain,\n        dateAdded: bookmark.dateAdded || Date.now(),\n        folderPath: folderPath,\n        parentId: bookmark.parentId\n      };\n      \n      await updateInIndex(updatedBookmark);\n      await upsertBookmark(updatedBookmark);\n      await logEvent(id, 'update', changeInfo);\n      \n      // Re-enrich if URL changed\n      if (changeInfo.url) {\n        const settings = await import('./src/db.js').then(m => m.getSettings());\n        if (settings.enrichmentEnabled) {\n          await addToEnrichmentQueue(id, 5);\n        }\n      }\n    }\n  } catch (error) {\n    console.error('Error handling bookmark change:', error);\n  }\n}\n\n// Handle bookmark moved\nasync function handleBookmarkMoved(id, moveInfo) {\n  try {\n    console.log('Bookmark moved:', id);\n    \n    const [bookmark] = await chrome.bookmarks.get(id);\n    const folderPath = await getBookmarkFolderPath(moveInfo.parentId);\n    \n    const existingBookmark = await import('./src/db.js').then(m => m.getBookmark(id));\n    \n    if (existingBookmark) {\n      existingBookmark.folderPath = folderPath;\n      existingBookmark.parentId = moveInfo.parentId;\n      await upsertBookmark(existingBookmark);\n      await logEvent(id, 'update', { moved: true });\n    }\n  } catch (error) {\n    console.error('Error handling bookmark move:', error);\n  }\n}\n\n// Helper function to get folder path for a bookmark\nasync function getBookmarkFolderPath(parentId) {\n  try {\n    const path = [];\n    let currentId = parentId;\n    \n    while (currentId) {\n      const [node] = await chrome.bookmarks.get(currentId);\n      if (node.title) {\n        path.unshift(node.title);\n      }\n      currentId = node.parentId;\n      \n      // Prevent infinite loop\n      if (path.length > 10) break;\n    }\n    \n    return path.join('/');\n  } catch (error) {\n    return '';\n  }\n}\n\n// Message handling for popup/dashboard communication\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  if (request.action === 'syncBookmarks') {\n    syncBookmarks().then(() => {\n      sendResponse({ success: true });\n    }).catch((error) => {\n      sendResponse({ success: false, error: error.message });\n    });\n    return true; // Indicates we will send a response asynchronously\n  }\n  \n  if (request.action === 'getEnrichmentStatus') {\n    import('./src/db.js').then(async (m) => {\n      const queueSize = await m.getEnrichmentQueueSize();\n      const settings = await m.getSettings();\n      \n      // Get actual enrichment stats from IndexedDB\n      const bookmarks = await m.getAllBookmarks();\n      const httpBookmarks = bookmarks.filter(b => \n        b.url && (b.url.startsWith('http://') || b.url.startsWith('https://'))\n      );\n      const enrichedCount = httpBookmarks.filter(b => b.lastChecked).length;\n      const pendingCount = httpBookmarks.length - enrichedCount;\n      \n      sendResponse({ \n        success: true, \n        queueSize: pendingCount, // Use actual pending count, not queue table size\n        totalBookmarks: httpBookmarks.length,\n        enrichedCount,\n        pendingCount,\n        enabled: settings.enrichmentEnabled \n      });\n    }).catch((error) => {\n      sendResponse({ success: false, error: error.message });\n    });\n    return true;\n  }\n  \n  if (request.action === 'reEnrichDeadLinks') {\n    // Re-enrich dead links by forcing re-check\n    import('./src/enrichment.js').then(async (enrichment) => {\n      const { getDeadLinks, upsertBookmark, getBookmark } = await import('./src/db.js');\n      \n      const deadLinks = await getDeadLinks();\n      const results = {\n        total: deadLinks.length,\n        success: 0,\n        stillDead: 0,\n        errors: 0\n      };\n      \n      // Create progress callback\n      const progressCallback = (progress) => {\n        chrome.runtime.sendMessage({\n          action: 'reEnrichProgress',\n          progress: progress\n        }).catch(() => {});\n      };\n      \n      // Process each dead link\n      for (let i = 0; i < deadLinks.length; i++) {\n        const bookmark = deadLinks[i];\n        \n        progressCallback({\n          current: i + 1,\n          total: deadLinks.length,\n          title: bookmark.title,\n          url: bookmark.url,\n          status: 'processing'\n        });\n        \n        try {\n          // Force re-check by clearing lastChecked temporarily\n          const currentBookmark = await getBookmark(bookmark.id);\n          if (currentBookmark) {\n            // Clear lastChecked to force re-enrichment\n            currentBookmark.lastChecked = null;\n            await upsertBookmark(currentBookmark);\n            \n            // Now enrich\n            const result = await enrichment.enrichBookmark(bookmark.id);\n            \n            if (result.isAlive === false) {\n              results.stillDead++;\n            } else if (result.success) {\n              results.success++;\n            } else {\n              results.errors++;\n            }\n          }\n        } catch (err) {\n          console.error(`Error re-enriching ${bookmark.id}:`, err);\n          results.errors++;\n        }\n        \n        progressCallback({\n          current: i + 1,\n          total: deadLinks.length,\n          title: bookmark.title,\n          url: bookmark.url,\n          status: 'completed'\n        });\n      }\n      \n      sendResponse({ success: true, results });\n    }).catch((error) => {\n      sendResponse({ success: false, error: error.message });\n    });\n    return true;\n  }\n  \n  if (request.action === 'runEnrichment') {\n    // Create progress callback to send updates to the requesting tab\n    const progressCallback = (progress) => {\n      // Send progress update to all dashboard tabs\n      chrome.runtime.sendMessage({\n        action: 'enrichmentProgress',\n        progress: progress\n      }).catch(() => {\n        // Ignore errors if no listeners\n      });\n    };\n\n    processEnrichmentBatch(\n      request.batchSize || 10, \n      progressCallback,\n      request.concurrency || 3\n    ).then((result) => {\n      sendResponse({ success: true, result });\n    }).catch((error) => {\n      sendResponse({ success: false, error: error.message });\n    });\n    return true;\n  }\n  \n  if (request.action === 'updateSettings') {\n    import('./src/db.js').then(async (m) => {\n      await m.updateSettings(request.settings);\n      \n      // Update behavior tracking if that setting changed\n      if (request.settings.trackBrowsingBehavior !== undefined) {\n        behaviorTrackingEnabled = request.settings.trackBrowsingBehavior;\n        console.log(`Behavior tracking ${behaviorTrackingEnabled ? 'enabled' : 'disabled'}`);\n        if (behaviorTrackingEnabled && !cacheBuilt) {\n          buildUrlCache();\n        }\n      }\n      \n      sendResponse({ success: true });\n    }).catch((error) => {\n      sendResponse({ success: false, error: error.message });\n    });\n    return true;\n  }\n});\n\n// Set up enrichment alarms based on settings\nasync function setupEnrichmentAlarms() {\n  // Always clear alarms - enrichment is manual only now\n  await chrome.alarms.clear('enrichmentPipeline');\n  console.log('Enrichment is manual-only - no automatic alarms set');\n}\n\n// Handle alarm events (kept for backwards compatibility, but won't fire)\nchrome.alarms.onAlarm.addListener(async (alarm) => {\n  if (alarm.name === 'enrichmentPipeline') {\n    console.log('Alarm triggered but enrichment is manual-only');\n  }\n});\n\n// =========================================\n// Tab Monitoring for Behavioral Analytics\n// (Only runs if user enables trackBrowsingBehavior)\n// =========================================\n\n// Track URL to bookmark ID mapping for faster lookups\nlet urlToBookmarkCache = new Map();\nlet cacheBuilt = false;\nlet behaviorTrackingEnabled = false;\n\n// Check if behavior tracking is enabled\nasync function isBehaviorTrackingEnabled() {\n  try {\n    const settings = await getSettings();\n    return settings.trackBrowsingBehavior === true;\n  } catch (error) {\n    return false;\n  }\n}\n\n// Initialize behavior tracking setting\nasync function initBehaviorTracking() {\n  behaviorTrackingEnabled = await isBehaviorTrackingEnabled();\n  console.log(`Behavior tracking: ${behaviorTrackingEnabled ? 'enabled' : 'disabled (default)'}`);\n}\n\n// Build URL cache from bookmarks\nasync function buildUrlCache() {\n  try {\n    const bookmarks = await db.bookmarks.toArray();\n    urlToBookmarkCache.clear();\n    \n    for (const bookmark of bookmarks) {\n      if (bookmark.url) {\n        // Normalize URL for matching\n        const normalizedUrl = normalizeUrlForMatching(bookmark.url);\n        urlToBookmarkCache.set(normalizedUrl, bookmark.id);\n      }\n    }\n    \n    cacheBuilt = true;\n    console.log(`URL cache built with ${urlToBookmarkCache.size} entries`);\n  } catch (error) {\n    console.error('Error building URL cache:', error);\n  }\n}\n\n// Normalize URL for matching (remove trailing slashes, www, etc.)\nfunction normalizeUrlForMatching(url) {\n  try {\n    const urlObj = new URL(url);\n    let normalized = urlObj.hostname.replace(/^www\\./, '') + urlObj.pathname;\n    normalized = normalized.replace(/\\/$/, ''); // Remove trailing slash\n    return normalized.toLowerCase();\n  } catch (e) {\n    return url.toLowerCase();\n  }\n}\n\n// Record a bookmark access when user visits a bookmarked URL\nasync function recordBookmarkAccess(bookmarkId, url) {\n  try {\n    // Update bookmark access stats\n    const bookmark = await db.bookmarks.get(bookmarkId);\n    if (bookmark) {\n      await db.bookmarks.update(bookmarkId, {\n        lastAccessed: Date.now(),\n        accessCount: (bookmark.accessCount || 0) + 1\n      });\n    }\n    \n    // Log event\n    await logEvent(bookmarkId, 'access', { url });\n    \n    console.log(`Recorded access for bookmark: ${bookmarkId}`);\n    return true;\n  } catch (error) {\n    console.error('Error recording bookmark access:', error);\n    return false;\n  }\n}\n\n// Check if a URL matches any bookmarked URL\nasync function findMatchingBookmark(url) {\n  // Ensure cache is built\n  if (!cacheBuilt) {\n    await buildUrlCache();\n  }\n  \n  const normalizedUrl = normalizeUrlForMatching(url);\n  \n  // Exact match\n  if (urlToBookmarkCache.has(normalizedUrl)) {\n    return urlToBookmarkCache.get(normalizedUrl);\n  }\n  \n  // Try without path parameters\n  const urlWithoutParams = normalizedUrl.split('?')[0];\n  if (urlToBookmarkCache.has(urlWithoutParams)) {\n    return urlToBookmarkCache.get(urlWithoutParams);\n  }\n  \n  return null;\n}\n\n// Listen for tab updates (URL changes)\nchrome.tabs.onUpdated.addListener(async (tabId, changeInfo, tab) => {\n  // Check if behavior tracking is enabled\n  if (!behaviorTrackingEnabled) return;\n  \n  // Only process when the URL is complete (not loading)\n  if (changeInfo.status === 'complete' && tab.url) {\n    // Skip non-http URLs\n    if (!tab.url.startsWith('http://') && !tab.url.startsWith('https://')) {\n      return;\n    }\n    \n    try {\n      const bookmarkId = await findMatchingBookmark(tab.url);\n      if (bookmarkId) {\n        await recordBookmarkAccess(bookmarkId, tab.url);\n      }\n    } catch (error) {\n      console.error('Error in tab update handler:', error);\n    }\n  }\n});\n\n// Listen for tab activation (switching tabs)\nchrome.tabs.onActivated.addListener(async (activeInfo) => {\n  // Check if behavior tracking is enabled\n  if (!behaviorTrackingEnabled) return;\n  \n  try {\n    const tab = await chrome.tabs.get(activeInfo.tabId);\n    \n    // Skip non-http URLs\n    if (!tab.url || (!tab.url.startsWith('http://') && !tab.url.startsWith('https://'))) {\n      return;\n    }\n    \n    const bookmarkId = await findMatchingBookmark(tab.url);\n    if (bookmarkId) {\n      // Only log if it's been more than 5 minutes since last access\n      const bookmark = await db.bookmarks.get(bookmarkId);\n      if (bookmark && (!bookmark.lastAccessed || (Date.now() - bookmark.lastAccessed > 5 * 60 * 1000))) {\n        await recordBookmarkAccess(bookmarkId, tab.url);\n      }\n    }\n  } catch (error) {\n    console.error('Error in tab activation handler:', error);\n  }\n});\n\n// Rebuild URL cache when bookmarks change\nchrome.bookmarks.onCreated.addListener(async (id, bookmark) => {\n  if (bookmark.url) {\n    const normalizedUrl = normalizeUrlForMatching(bookmark.url);\n    urlToBookmarkCache.set(normalizedUrl, bookmark.id);\n  }\n});\n\nchrome.bookmarks.onRemoved.addListener(async (id, removeInfo) => {\n  // Rebuild cache since we don't know the URL that was removed\n  cacheBuilt = false;\n});\n\nchrome.bookmarks.onChanged.addListener(async (id, changeInfo) => {\n  if (changeInfo.url) {\n    // Rebuild cache when URL changes\n    cacheBuilt = false;\n  }\n});\n\n// Initialize URL cache on startup (only if tracking enabled)\ninitBehaviorTracking().then(() => {\n  if (behaviorTrackingEnabled) {\n    buildUrlCache();\n  }\n});\n\nconsole.log('Bookmark Insights background service worker loaded');\n"],"names":["exports","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__spreadArray","to","from","pack","ar","l","slice","concat","_global","globalThis","self","window","global","keys","isArray","extend","obj","extension","forEach","key","Promise","getProto","getPrototypeOf","_hasOwn","hasOwn","prop","props","proto","Reflect","ownKeys","setProp","defineProperty","functionOrGetSet","options","get","set","configurable","value","writable","derive","Child","Parent","bind","getOwnPropertyDescriptor","getPropertyDescriptor","_slice","args","start","end","override","origFunc","overridedFactory","assert","Error","asap$1","fn","setImmediate","setTimeout","arrayToObject","array","extractor","reduce","result","item","nameAndValue","getByKeyPath","keyPath","rv","val","push","period","indexOf","innerObj","substr","undefined","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","isNaN","parseInt","splice","delByKeyPath","map","kp","shallowClone","m","flatten","a","intrinsicTypeNames","split","num","filter","intrinsicTypes","Set","cloneSimpleObjectTree","o","k","v","has","objectIsEmpty","circularRefs","deepClone","any","WeakMap","innerDeepClone","x","toString","toStringTag","iteratorSymbol","Symbol","iterator","getIteratorOf","delArrayItem","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","next","done","isAsyncFunction","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","name","msg","message","getMultiErrorMessage","failures","join","ModifyError","successCount","failedKeys","BulkError","pos","failuresByPos","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","Range","RangeError","exceptionMap","mapError","domError","stack","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","res","onsuccess","onerror","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","then","thiz","debug","location","test","href","setDebug","INTERNAL","ZONE_ECHO_LIMIT","_a$1","globalP","resolve","crypto","subtle","nativeP","digest","Uint8Array","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","patchGlobalPromise","schedulePhysicalTick","queueMicrotask","physicalTick","asap","callback","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","rejectionMapper","globalPSD","id","ref","unhandleds","onunhandled","pgp","env","finalize","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","_lib","psd","_PSD","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","cleanup","decrementExpectedAwaits","reject","propagateToListener","Listener","nativeAwaitCompatibleWrap","_consoleTask","zone","promise","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","ex","reason","addPossiblyUnhandledError","listeners","len","finalizePhysicalTick","listener","cb","callListener","ret","run","markErrorAsHandled","e","usePSD","wasRootExec","callbacks","unhandledErrs","finalizers","run_at_end_of_this_or_next_physical_tick","finalizer","some","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","catch","type","handler","err","finally","onFinally","timeout","ms","Infinity","handle","Timeout","clearTimeout","snapShot","all","values","onPossibleParallellAsync","remaining","race","newPSD","newScope","scheduler","follow","zoneProps","allSettled","possiblePromises","results","status","AggregateError","failure","withResolvers","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a1","a2","parent","PromiseProp","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","pop","bEnteringZone","currentZone","GlobalPromise","targetEnv","a3","outerZone","execInGlobalContext","enqueueNativeMicroTask","tempTransaction","db","mode","storeNames","idbdb","openComplete","letThrough","_vip","trans","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","console","warn","close","disableAutoOpen","open","_promise","idbtrans","commit","_a","_completion","dbOpenError","isBeingOpened","autoOpen","dbReadyPromise","DEXIE_VERSION","maxString","fromCharCode","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Entity","cmp","ta","tb","NaN","compareUint8Arrays","getUint8Array","compareArrays","al","bl","ArrayBuffer","isView","tsTag","buffer","byteOffset","byteLength","builtInDeletionTrigger","table","yProps","schema","numFailures","_","updatesTable","where","anyOf","delete","clear","PropModification","spec","execute","add","term","sort","Number","BigInt","_b","remove","subtrahend_1","includes","_c","prefixToReplace","replacePrefix","startsWith","substring","applyUpdateSpec","changes","keyPaths","numKeys","anythingModified","origValue","Table","_trans","writeLocked","_tx","tableName","createTask","checkTableInTransaction","NotFound","_novip","transless","trace","keyOrCrit","first","core","hook","reading","fire","indexOrCrit","WhereClause","equals","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","keyPathsInValidOrder","JSON","stringify","idxByName","prevIndex","prevFilterFn","index","multi","idx","filterFunction","toCollection","and","count","thenShortcut","offset","limit","numRows","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","_super","class_1","enumerable","inheritedProps","getOwnPropertyNames","propName","readHook","unsubscribe","defineClass","Class","content","auto","objToAdd","mutate","lastResult","upsert","existing","updates","changeSpecs","update","keyOrObject","modify","InvalidArgument","put","range","bulkGet","getMany","bulkAdd","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","bulkPut","objectsToPut","bulkUpdate","keysAndChanges","coreTable","entry","offsetMap","cache","objs","resultKeys","resultObjs","_i","Constraint","numEntries","mappedOffset","bulkDelete","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","context","subscribers","cfg","makeClassConstructor","createTableConstructor","tableSchema","_allTables","creating","updating","deleting","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","factory","isLimitFilter","curr","addMatchFilter","isMatch","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","keysOnly","dir","unique","query","iter","coreTrans","set_1","union","cursor","advance","stop","fail","_iterate","iterate","valueMapper","cursorPromise","wrappedFn","c","continue","advancer","_read","_ctx","error","_write","_addAlgorithm","clone","raw","Math","min","sortBy","parts","lastPart","lastIndex","getval","order","sorter","valueMapper_1","a_1","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","modifyer","outbound","extractKey","modifyChunkSize","_options","totalFailures","applyMutateResult","expectedCount","isUnconditionalDelete","deleteCallback","criteria","nextChunk","keysInChunk","addValues","putValues","putKeys","deleteKeys","ctx_1","changeSpec","isAdditionalChunk","coreRange","createCollectionConstructor","whereClause","keyRangeGenerator","keyRange","whereCtx","readingHook","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","collection","emptyCollection","rangeEqual","upperFactory","toUpperCase","toLowerCase","lowerFactory","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","str","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","max","_max","addRange","newRange","sortDirection","rangeSorter","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","keyWithinCurrentRange","checkKey","startsWithAnyOf","createWhereClauseConstructor","orCollection","_IDBKeyRange","_deps","IDBKeyRange","eventRejectHandler","event","preventDefault","target","stopPropagation","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","OpenFailed","active","transaction","durability","chromeTransactionDurability","ev","_reject","onabort","on","oncomplete","_resolve","storagemutated","bWriteLock","ReadOnly","_root","waitFor","promiseLike","root","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","transactionBoundTable","createTransactionConstructor","dbschema","storeName","complete","wasActive","createIndexSpec","src","nameFromKeyPath","createTableSchema","safariMultiStoreFix","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","extractSchema","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","navigator","userAgent","makeIDBKeyRange","upperBound","lowerBound","bound","createDbCoreTable","isAddOrPut","req","reqs","errorHandler","args1","args2","source","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsNotStarted","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","request","nonInfinitLimit","idbKeyRange","getAll","getAllKeys","count_1","req_1","result_1","keyCount","callbackCount","successHandler","_pos","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStack","stackImpl","middlewares","down","createMiddlewareStacks","indexedDB","dbcore","generateMiddlewareStacks","stacks","_middlewares","tbl","setApiOnPlace","tableNames","propDesc","removeTablesApi","lowerVersionFirst","_cfg","version","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","contains","$meta","parseIndexSyntax","_storeNames","rejectTransaction","getExistingVersion","updateTablesAndIndexes","createTable","populate","patchCurrentVersion","createMissingTables","createObjectStore","ceil","buildGlobalSchema","adjustToExistingIndexNames","_loop_1","tableChange","change","recreate","addIndex","getSchemaDiff","state_1","metaVersion","queue","versions","_versions","versToRun","runQueue","oldSchema","newSchema","diff","tuple","Upgrade","store_1","deleteIndex","del","idxName","contentUpgrade","upgradeSchema_1","returnValue_1","contentUpgradeIsAsync_1","promiseFollowed","decrementor","deleteRemovedTables","deleteObjectStore","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createIndex","j","idbindex","readGlobalSchema","verno","verifyInstalledSchema","ch","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","primKeyAndIndexes","indexNum","typeSplit","trim","replace","Version","_createTableSchema","_parseIndexSyntax","_parseStoresSpec","stores","outSchema","tblSchema","storesSource","storesSpec","upgrade","upgradeFunction","createVersionConstructor","versionNumber","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","getDatabaseNames","infos","info","_onDatabaseCreated","_onDatabaseDeleted","vip","idbReady","intervalId","userAgentData","tryIdb","setInterval","clearInterval","isEmptyRange","node","RangeSet","fromOrTree","left","right","r","rebalance","rightWasCutOff","mergeRanges","newSet","_addRangeSet","rangesOverlap","rangeSet1","rangeSet2","i1","getRangeSetIterator","nextResult1","i2","nextResult2","state","keyProvided","up","rootClone","oldRootRight","computeDepth","extendObservabilitySet","part","obsSetsOverlap","os1","os2","rangeSet","addKey","addKeys","hasKey","unsignaledParts","isTaskEnqueued","signalSubscribersLazily","optimistic","signalSubscribersNow","updatedParts","deleteAffectedCacheEntries","queriesToSignal","collectTableSubscribers","tblCache","exec","dbName","requery","outQueriesToSignal","updatedEntryLists","entries","queries","filteredEntries","entries_1","obsSet","_d","updatedEntryLists_1","_e","dexieOpen","openCanceller","nativeVerToOpen","round","schemaPatchMode","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","tryOpenDB","autoSchema","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","delreq","deleteDatabase","NoSuchDatabase","oldVer","pow","onversionchange","vcFired","onclose","onReadyBeingFired","ready","fireRemainders","remainders_1","_close","everything_1","awaitIterator","callNext","doThrow","throw","onSuccess","step","onError","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","explicit","_explicit","returnValue","scopeFuncIsAsync","PrematureCommit","pad","createVirtualIndexMiddleware","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","findBestIndex","translateRange","translateRequest","createVirtualCursor","_continue","virtualCursor","virtualIndexMiddleware","level","getObjectDiff","prfx","ap","bp","apTypeName","getEffectiveKeys","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","addPutOrDelete","deleteRange","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges_1","requestedValue_1","deleteNextChunk","effectiveKeys","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isCachableContext","subscr","isCachableRequest","observabilityMiddleware","FULL_RANGE","querier","indexesWithAutoIncPK","tableClone","mutatedParts","getRangeSet","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","trackAffectedIndexes","idxVals","pkPos","findIndex","getRange","readSubscribers","method","isLiveQuery","pkRangeSet_1","delsRangeSet_1","queriedIndex","queriedRanges","keysPromise_1","resultingKeys","pKeys","cursor_1","wantValues_1","pkey","addAffectedIndex","addKeyOrKeys","oldKey","newKey","adjustOptimisticFromFailures","numBulkOps","isAboveLower","isBelowUpper","isWithinRange","applyOptimisticOps","ops","cacheEntry","immutable","queryRange","extractPrimKey","extractIndex","extractLowLevelIndex","finalResult","op","modifedResult","includedValues","includedPKs","pk","existingKeys_1","keySet_1","keysToDelete_1","range_1","dirty","freeze","areRangesEqual","r1","r2","compareLowers","lower1","lower2","lowerOpen1","lowerOpen2","compareUppers","upper1","upper2","upperOpen1","upperOpen2","isSuperRange","findCompatibleQuery","equalEntry","find","countQuery","subscribeToCacheEntry","container","signal","addEventListener","size","enqueForDeletion","cacheMiddleware","coreMW","ac_1","AbortController","endTransaction","wasCommitted","affectedSubscribers_1","stores_1","optimisticOps","_f","_g","_h","freezeResults","modRes","tableMW","adjustedReq","reqWithResolvedKeys","valueWithKey","exactMatch","Map","vipify","vipDb","Proxy","receiver","domDeps","Dexie","deps","dependencies","cancelOpen","once","bSticky","db_1","newVersion","use","vipDB","addon","versionInstance","_whenReady","unuse","mw","CustomEvent","closeOptions","hasInvalidArguments","doDelete","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","idbMode","onlyIfCompatible","SubTransaction","enterTransaction","InvalidTable","symbolObservable","observable","Observable","_subscribe","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","liveQuery","currentValue","hasValue","observer","abortController","closed","accumMuts","currentObs","subscription","startedListening","mutationListener","doQuery","_doQuery","shouldNotify","aborted","getValue","propagateLocally","updateParts","wasMe","propagatingLocally","databaseName","exists","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","semVer","maxKey","dispatchEvent","event_1","detail","bc","createBC","BroadcastChannel","onmessage","data","unref","changedParts","postMessage","disableBfCache","persisted","connections_1","default","DexieSymbol","for","_Dexie","bookmarks","enrichmentQueue","events","settings","tx","log","similarities","computedMetrics","DEFAULT_SETTINGS","enrichmentEnabled","enrichmentSchedule","enrichmentBatchSize","enrichmentConcurrency","enrichmentRateLimit","enrichmentFreshnessDays","autoCategorizationEnabled","deadLinkCheckEnabled","privacyMode","trackBrowsingBehavior","initializeSettings","getSettings","migrateFromChromeStorage","migrationStatus","completed","success","alreadyMigrated","chrome","storage","local","oldBookmarks","timestamp","Date","now","newBookmarks","bookmark","description","keywords","category","tags","isAlive","lastChecked","faviconUrl","contentSnippet","lastAccessed","accessCount","oldSyncTime","lastSyncTime","getAllBookmarks","getBookmark","upsertBookmark","smartMergeBookmarks","existingBookmarks","existingMap","mergedBookmarks","newBookmark","title","url","dateAdded","parentId","folderPath","domain","rawMetadata","deleteBookmark","logEvent","bookmarkId","metadata","setCache","ttl","getCache","cached","addToEnrichmentQueue","priority","addedAt","getNextEnrichmentBatch","batchSize","removeFromEnrichmentQueue","queueId","initializeDatabase","migrationResult","CACHE_DURATIONS","domainStats","activityTimeline","wordFrequency","ageDistribution","categoryTrends","expertiseAreas","quickStats","duplicates","insightsSummary","getCachedMetric","computeFn","ttlMs","validUntil","computedAt","invalidateMetricCaches","changeType","enrich","clearAllMetricCaches","getConsolidatedDomainAnalytics","domainData","latestDate","oldestDate","enrichedCount","domainArray","totalBookmarks","percentage","byRecency","byCount","top10","totalDomains","findDuplicates","urlMap","normalizedUrl","group","findUncategorizedBookmarks","rootFolders","findMalformedUrls","validSchemes","scheme","createBackup","categorizedCount","schemaVersion","createdAt","toISOString","eventsCount","similaritiesCount","restoreFromBackup","backup","restoreBookmarks","restoreSettings","restoreEvents","restoreSimilarities","mergeMode","bookmarksRestored","settingsRestored","eventsRestored","similaritiesRestored","errors","existingTime","backupMetadata","bookmarkIds","toCheck","checked","alive","dead","inProgress","controller","timeoutId","fetch","total","keyPattern","toDelete","autoBackups","unshift","blob","Blob","URL","createObjectURL","filename","document","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","exportDate","threshold","maxPairs","similar","wordSets","words","w","words1","words2","intersection","similarity","monthlyCount","date","monthKey","getFullYear","getMonth","padStart","ageGroups","DAY","WEEK","MONTH","age","hourPatterns","fill","dayPatterns","monthPatterns","dayNames","monthNames","getHours","getDay","hourly","hour","daily","day","monthly","month","startDate","endDate","page","pageSize","filters","domains","folders","dateRange","searchQuery","lowerQuery","isEnriched","localeCompare","startIndex","endIndex","totalCount","hasMore","currentPage","totalPages","domainCount","sortedDomains","othersCount","sum","distribution","uncategorized","malformed","enriched","deadLinks","uniqueDomains","pending","enrichedPercentage","duplicateGroups","addedThisWeek","addedThisMonth","oldestBookmark","oldest","newestBookmark","newest","patterns","wordCount","stopWords","word","f","parameterCount","urlsWithParams","totalUrls","params","searchParams","parameters","protocols","topLevelDomains","pathPatterns","subdomainPatterns","protocol","hostname","tld","subdomain","pathSegments","pathname","segment","firstSegment","subdomains","records","sim","bookmark1Id","bookmark2Id","score","newSettings","current","issues","valid","sample","CATEGORY_RULES","PATH_PATTERNS","CONTENT_KEYWORDS","tutorial","guide","documentation","docs","api","reference","blog","article","news","video","course","learning","tool","app","software","enrichBookmark","skipped","freshnessDays","freshnessThreshold","toLocaleDateString","alreadyEnriched","checkBookmarkAlive","fetchPageMetadata","categorizeBookmark","snippet","hasDescription","response","redirect","ok","controller2","timeoutId2","error2","html","text","meta","openGraph","twitterCard","jsonLd","other","metaTagRegex","metaMatch","metaTag","nameMatch","contentMatch","jsonLdRegex","jsonLdMatch","parse","titleMatch","canonicalMatch","canonical","langMatch","language","author","faviconMatch","hrefMatch","paragraphMatch","path","domainPattern","pathPattern","combinedText","keyword","metaKeywords","processEnrichmentBatch","progressCallback","concurrency","processed","failed","maxConcurrency","batch","processBookmark","queueItem","db$1","workers","currentIndex","runWorker","sleep","H","g","aa","I","M","ba","ca","ea","fa","ha","ia","ja","ka","Q","F","B","D","la","suggest","resolution","boost","ma","search","h","normalize","include","exclude","RegExp","letter","number","symbol","punctuation","control","char","numeric","prepare","dedupe","matcher","mapper","stemmer","replacer","minlength","maxlength","rtl","L","J","A","K","addStemmer","addMapper","addReplacer","addMatcher","encode","u","charAt","na","oa","ra","sa","ua","y","q","z","va","Exact","Default","Normalize","LatinBalance","LatinAdvanced","LatinExtra","LatinSoundex","CJK","LatinExact","LatinDefault","LatinSimple","wa","xa","R","Aa","Ba","S","charCodeAt","Ca","Da","Ha","Ia","Ja","Ea","Function","FlexSearch","Index","export","import","await","Fa","Ga","Ka","V","La","worker","config","encoder","_factory","module","require","__dirname","_nodeResolve_empty$1","dirname","Worker","Ma","W","Ra","Qa","Sa","Ta","Ua","X","highlight","tag","field","pluck","C","E","searchAsync","Va","not","xor","return","Wa","Xa","Ya","Za","$a","ab","bb","flat","template","boundary","clip","merge","ellipsis","pattern","before","after","da","pa","Oa","qa","ya","doc","za","G","N","O","P","lastIndexOf","U","Pa","eb","gb","fb","Na","hb","keystore","fastupdate","reg","ib","custom","mount","lb","mb","ob","pb","qb","rb","sb","searchCache","support_tag_search","bypass","destroy","append","contain","depth","commit_task","ub","vb","memory","performance","tokenize","Y","wb","Ab","xb","yb","zb","bidirectional","preset","commit_timer","ins","serialize","Bb","Cb","Db","Fb","Z","Eb","persist","getKey","Document","searchIndex","indexInitialized","rebuildSearchIndex","optimize","addToIndex","serialized","cachedIndex","initializeSearchIndex","removeFromIndex","syncBookmarks","bookmarkTree","getTree","flatBookmarks","flattenBookmarks","nodes","children","newPath","clearEnrichmentQueue","storedBookmarks","enrichedIds","queuedCount","getBookmarkFolderPath","currentId","setupEnrichmentAlarms","alarms","runtime","onInstalled","addListener","details","onCreated","fullBookmark","handleBookmarkCreated","onRemoved","removeInfo","dbDeleteBookmark","handleBookmarkRemoved","onChanged","changeInfo","updatedBookmark","updateInIndex","handleBookmarkChanged","onMoved","moveInfo","existingBookmark","moved","handleBookmarkMoved","onMessage","sender","sendResponse","action","getEnrichmentQueueSize","httpBookmarks","pendingCount","queueSize","enabled","enrichment","getDeadLinks","stillDead","progress","sendMessage","currentBookmark","updateSettings","behaviorTrackingEnabled","cacheBuilt","buildUrlCache","onAlarm","alarm","urlToBookmarkCache","normalizeUrlForMatching","urlObj","normalized","recordBookmarkAccess","findMatchingBookmark","urlWithoutParams","tabs","onUpdated","tabId","tab","onActivated","activeInfo","isBehaviorTrackingEnabled","initBehaviorTracking"],"mappings":"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","x_google_ignoreList":[0,1,4]}