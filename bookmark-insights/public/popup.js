function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a,s;function c(t,e){return t===e||(a||(a=document.createElement("a")),a.href=e,t===a.href)}function i(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function m(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function x(){return h(" ")}function p(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.data!==e&&(t.data=e)}function w(t,e){t.value=null==e?"":e}function v(t,e,n){t.classList.toggle(e,!!n)}function k(t){s=t}function $(){if(!s)throw new Error("Function called outside component initialization");return s}function C(t){$().$$.on_mount.push(t)}function E(){const t=$();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}(e,n,{cancelable:r});return o.slice().forEach(e=>{e.call(t,l)}),!l.defaultPrevented}return!0}}const D=[],R=[];let A=[];const B=[],M=Promise.resolve();let _=!1;function T(t){A.push(t)}const j=new Set;let L=0;function F(){if(0!==L)return;const t=s;do{try{for(;L<D.length;){const t=D[L];L++,k(t),S(t.$$)}}catch(t){throw D.length=0,L=0,t}for(k(null),D.length=0,L=0;R.length;)R.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];j.has(e)||(j.add(e),e())}A.length=0}while(D.length);for(;B.length;)B.pop()();_=!1,j.clear(),k(t)}function S(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const P=new Set;let z;function N(){z={r:0,c:[],p:z}}function H(){z.r||r(z.c),z=z.p}function O(t,e){t&&t.i&&(P.delete(t),t.i(e))}function U(t,e,n,r){if(t&&t.o){if(P.has(t))return;P.add(t),z.c.push(()=>{P.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function q(t){return void 0!==t?.length?t:Array.from(t)}function W(t,e){U(t,1,1,()=>{e.delete(t.key)})}function Y(t){t&&t.c()}function I(t,n,l){const{fragment:a,after_update:s}=t.$$;a&&a.m(n,l),T(()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]}),s.forEach(T)}function V(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];A.forEach(r=>-1===t.indexOf(r)?e.push(r):n.push(r)),n.forEach(t=>t()),A=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(D.push(t),_||(_=!0,M.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(e,o,l,a,c,i,d=null,f=[-1]){const g=s;k(e);const m=e.$$={fragment:null,ctx:[],props:i,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(g?g.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||g.$$.root};d&&d(m.root);let h=!1;if(m.ctx=l?l(e,o.props||{},(t,n,...r)=>{const o=r.length?r[0]:n;return m.ctx&&c(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),h&&J(e,t)),n}):[],m.update(),h=!0,r(m.before_update),m.fragment=!!a&&a(m.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(u)}else m.fragment&&m.fragment.c();o.intro&&O(e.$$.fragment),I(e,o.target,o.anchor),F()}k(g)}class K{$$=void 0;$$set=void 0;$destroy(){V(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Q(t){return new Date(t).toLocaleDateString()}function X(t){if(t.url.startsWith("http://")||t.url.startsWith("https://")){const e=t.domain.charAt(0).toUpperCase(),n=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899"];return`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="${n[t.domain.length%n.length]}"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white" font-weight="bold">${e}</text></svg>`}switch(t.domain){case"chrome-internal":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23EA4335"/><circle cx="8" cy="8" r="3" fill="white"/></svg>';case"local-file":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F59E0B"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">üìÑ</text></svg>';case"javascript-bookmarklet":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F7DF1E"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="black" font-weight="bold">JS</text></svg>';case"data-uri":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%2310B981"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="white" font-weight="bold">D</text></svg>';case"contact-link":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%238B5CF6"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">@</text></svg>';case"other-protocol":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%236B7280"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">‚ö°</text></svg>';default:return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23E5E7EB"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="%236B7280">?</text></svg>'}}function Z(t){switch(t.domain){case"chrome-internal":return"Chrome";case"local-file":return"Local File";case"javascript-bookmarklet":return"Bookmarklet";case"data-uri":return"Data URI";case"contact-link":return"Contact";case"other-protocol":return"Other";case"invalid-url":return"Invalid URL";default:return t.domain}}function tt(t){let e,n;return{c(){e=m("svg"),n=m("path"),b(n,"stroke-linecap","round"),b(n,"stroke-linejoin","round"),b(n,"stroke-width","2"),b(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),b(e,"class","w-4 h-4"),b(e,"fill","none"),b(e,"stroke","currentColor"),b(e,"viewBox","0 0 24 24")},m(t,r){d(t,e,r),i(e,n)},d(t){t&&u(e)}}}function et(t){let e,n;return{c(){e=m("svg"),n=m("path"),b(n,"stroke-linecap","round"),b(n,"stroke-linejoin","round"),b(n,"stroke-width","2"),b(n,"d","M5 13l4 4L19 7"),b(e,"class","w-4 h-4 text-green-500"),b(e,"fill","none"),b(e,"stroke","currentColor"),b(e,"viewBox","0 0 24 24")},m(t,r){d(t,e,r),i(e,n)},d(t){t&&u(e)}}}function nt(t){let e,n,r,o,l=t[0].folderPath+"";return{c(){e=g("p"),n=h("üìÅ "),r=h(l),b(e,"class","text-xs text-gray-400 mt-1 truncate"),b(e,"title",o=t[0].folderPath)},m(t,o){d(t,e,o),i(e,n),i(e,r)},p(t,n){1&n&&l!==(l=t[0].folderPath+"")&&y(r,l),1&n&&o!==(o=t[0].folderPath)&&b(e,"title",o)},d(t){t&&u(e)}}}function rt(e){let n,o,l,a,s,f,m,w,v,k,$,C,E,D,R,A,B,M,_,T,j,L,F,S,P,z,N=e[0].title+"",H=e[0].url+"",O=Z(e[0])+"",U=Q(e[0].dateAdded)+"";function q(t,e){return t[1]?et:tt}let W=q(e),Y=W(e),I=e[0].folderPath&&nt(e);return{c(){n=g("div"),o=g("div"),l=g("img"),s=x(),f=g("div"),m=g("h3"),w=h(N),k=x(),$=g("p"),C=h(H),D=x(),R=g("div"),A=g("span"),B=h(O),M=x(),_=g("div"),T=g("button"),Y.c(),j=x(),L=g("span"),F=h(U),S=x(),I&&I.c(),c(l.src,a=X(e[0]))||b(l,"src",a),b(l,"alt","Favicon"),b(l,"class","w-4 h-4 mt-1 flex-shrink-0"),b(m,"class","text-sm font-medium text-gray-900 truncate"),b(m,"title",v=e[0].title),b($,"class","text-xs text-gray-500 truncate mt-1"),b($,"title",E=e[0].url),b(A,"class","text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded"),b(T,"class","p-1 text-gray-400 hover:text-blue-600 transition-colors"),b(T,"title","Copy URL"),b(L,"class","text-xs text-gray-400"),b(_,"class","flex items-center space-x-2"),b(R,"class","flex items-center justify-between mt-2"),b(f,"class","flex-1 min-w-0"),b(o,"class","flex items-start space-x-3"),b(n,"class","bookmark-card bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 svelte-1oo2sed"),b(n,"role","button"),b(n,"tabindex","0")},m(t,r){d(t,n,r),i(n,o),i(o,l),i(o,s),i(o,f),i(f,m),i(m,w),i(f,k),i(f,$),i($,C),i(f,D),i(f,R),i(R,A),i(A,B),i(R,M),i(R,_),i(_,T),Y.m(T,null),i(_,j),i(_,L),i(L,F),i(f,S),I&&I.m(f,null),P||(z=[p(T,"click",e[2]),p(n,"click",e[3]),p(n,"keydown",e[4])],P=!0)},p(t,[e]){1&e&&!c(l.src,a=X(t[0]))&&b(l,"src",a),1&e&&N!==(N=t[0].title+"")&&y(w,N),1&e&&v!==(v=t[0].title)&&b(m,"title",v),1&e&&H!==(H=t[0].url+"")&&y(C,H),1&e&&E!==(E=t[0].url)&&b($,"title",E),1&e&&O!==(O=Z(t[0])+"")&&y(B,O),W!==(W=q(t))&&(Y.d(1),Y=W(t),Y&&(Y.c(),Y.m(T,null))),1&e&&U!==(U=Q(t[0].dateAdded)+"")&&y(F,U),t[0].folderPath?I?I.p(t,e):(I=nt(t),I.c(),I.m(f,null)):I&&(I.d(1),I=null)},i:t,o:t,d(t){t&&u(n),Y.d(),I&&I.d(),P=!1,r(z)}}}function ot(t){chrome.tabs.create({url:t})}function lt(t,e,n){let{bookmark:r}=e;E();let o=!1;return t.$$set=t=>{"bookmark"in t&&n(0,r=t.bookmark)},[r,o,async function(t){t.stopPropagation();const e=await async function(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}(r.url);e&&(n(1,o=!0),setTimeout(()=>n(1,o=!1),2e3))},()=>ot(r.url),t=>"Enter"===t.key&&ot(r.url)]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class at extends K{constructor(t){super(),G(this,t,lt,rt,l,{bookmark:0})}}function st(e){let n,r,o;return{c(){n=g("button"),n.innerHTML='<svg class="h-5 w-5 text-gray-400 hover:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b(n,"class","absolute inset-y-0 right-0 pr-3 flex items-center"),b(n,"type","button")},m(t,l){d(t,n,l),r||(o=p(n,"click",e[2]),r=!0)},p:t,d(t){t&&u(n),r=!1,o()}}}function ct(e){let n,o,l,a,s,c,f,m=e[0]&&st(e);return{c(){n=g("div"),o=g("div"),o.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',l=x(),a=g("input"),s=x(),m&&m.c(),b(o,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),b(a,"type","text"),b(a,"placeholder","Search bookmarks by title or URL..."),b(a,"class","block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"),b(n,"class","relative mb-6")},m(t,r){d(t,n,r),i(n,o),i(n,l),i(n,a),w(a,e[0]),i(n,s),m&&m.m(n,null),c||(f=[p(a,"input",e[3]),p(a,"input",e[1])],c=!0)},p(t,[e]){1&e&&a.value!==t[0]&&w(a,t[0]),t[0]?m?m.p(t,e):(m=st(t),m.c(),m.m(n,null)):m&&(m.d(1),m=null)},i:t,o:t,d(t){t&&u(n),m&&m.d(),c=!1,r(f)}}}function it(t,e,n){const r=E();let o,{value:l=""}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,function(t){n(0,l=t.target.value),clearTimeout(o),o=setTimeout(()=>{r("search",{query:l})},300)},function(){n(0,l=""),r("search",{query:""})},function(){l=this.value,n(0,l)}]}class dt extends K{constructor(t){super(),G(this,t,it,ct,l,{value:0})}}let ut=null,ft=0;async function gt(){try{if(ut&&Date.now()-ft<5e3)return ut;const t=await chrome.storage.local.get(["bookmarks"]);return ut=t.bookmarks||[],ft=Date.now(),ut}catch(t){return console.error("Error getting bookmarks:",t),[]}}async function mt(){try{const t=await gt(),e={};t.forEach(t=>{e[t.domain]||(e[t.domain]={domain:t.domain,count:0,latestDate:0,oldestDate:1/0});const n=e[t.domain];n.count++,t.dateAdded>n.latestDate&&(n.latestDate=t.dateAdded),t.dateAdded<n.oldestDate&&(n.oldestDate=t.dateAdded)});const n=Object.values(e),r=t.length;return n.forEach(t=>{t.percentage=r>0?Math.round(t.count/r*100):0,t.dateAdded=t.latestDate}),{byRecency:[...n].sort((t,e)=>e.latestDate-t.latestDate),byCount:[...n].sort((t,e)=>e.count-t.count),top10:[...n].sort((t,e)=>e.count-t.count).slice(0,10),totalDomains:n.length,totalBookmarks:r}}catch(t){return console.error("Error getting consolidated domain analytics:",t),{byRecency:[],byCount:[],top10:[],totalDomains:0,totalBookmarks:0}}}function ht(t,e,n){const r=t.slice();return r[25]=e[n],r}function xt(t,e,n){const r=t.slice();return r[28]=e[n],r}function pt(t,e,n){const r=t.slice();return r[25]=e[n],r}function bt(t,e,n){const r=t.slice();return r[33]=e[n],r}function yt(t){let e,n,r,o,l,a,s,c,f=t[33]+"";function m(){return t[12](t[33])}return{c(){e=g("div"),n=g("div"),r=h("Domain: "),o=h(f),l=x(),a=g("button"),a.textContent="√ó",b(n,"class","text-xs text-blue-800"),b(a,"class","text-blue-600 hover:text-blue-800"),b(e,"class","flex items-center justify-between p-2 bg-blue-50 rounded-md")},m(t,u){d(t,e,u),i(e,n),i(n,r),i(n,o),i(e,l),i(e,a),s||(c=p(a,"click",m),s=!0)},p(e,n){t=e,4&n[0]&&f!==(f=t[33]+"")&&y(o,f)},d(t){t&&u(e),s=!1,c()}}}function wt(t){let e,n,r,o,l,a,s,c,f=t[25]+"";function m(){return t[13](t[25])}return{c(){e=g("div"),n=g("div"),r=h("Folder: "),o=h(f),l=x(),a=g("button"),a.textContent="√ó",b(n,"class","text-xs text-green-800"),b(a,"class","text-green-600 hover:text-green-800"),b(e,"class","flex items-center justify-between p-2 bg-green-50 rounded-md")},m(t,u){d(t,e,u),i(e,n),i(n,r),i(n,o),i(e,l),i(e,a),s||(c=p(a,"click",m),s=!0)},p(e,n){t=e,4&n[0]&&f!==(f=t[25]+"")&&y(o,f)},d(t){t&&u(e),s=!1,c()}}}function vt(t){let e,n,r,o,l,a,s,c="week"===t[2].dateRange.period?"This Week":"month"===t[2].dateRange.period?"This Month":"This Year";return{c(){e=g("div"),n=g("div"),r=h(c),o=x(),l=g("button"),l.textContent="√ó",b(n,"class","text-xs text-purple-800"),b(l,"class","text-purple-600 hover:text-purple-800"),b(e,"class","flex items-center justify-between p-2 bg-purple-50 rounded-md")},m(c,u){d(c,e,u),i(e,n),i(n,r),i(e,o),i(e,l),a||(s=p(l,"click",t[14]),a=!0)},p(t,e){4&e[0]&&c!==(c="week"===t[2].dateRange.period?"This Week":"month"===t[2].dateRange.period?"This Month":"This Year")&&y(r,c)},d(t){t&&u(e),a=!1,s()}}}function kt(t){let e,n,r=At(t[28].dateAdded||t[28].latestDate)+"";return{c(){e=g("span"),n=h(r)},m(t,r){d(t,e,r),i(e,n)},p(t,e){8&e[0]&&r!==(r=At(t[28].dateAdded||t[28].latestDate)+"")&&y(n,r)},d(t){t&&u(e)}}}function $t(t){let e,n,r,o,l,a,s,c,f,m,w,k,$,C=t[28].domain+"",E=t[28].count+"",D=1!==t[28].count?"s":"",R="recency"===t[0]&&kt(t);function A(){return t[20](t[28])}return{c(){e=g("button"),n=g("div"),r=h(C),o=x(),l=g("div"),a=g("span"),s=h(E),c=h(" bookmark"),f=h(D),m=x(),R&&R.c(),b(n,"class","truncate font-medium"),b(l,"class","flex justify-between items-center text-xs text-gray-500 mt-1"),b(e,"class","w-full text-left px-2 py-2 text-sm hover:bg-gray-100 rounded border"),b(e,"title",w=t[28].domain),v(e,"bg-blue-50",t[2].domains.includes(t[28].domain)),v(e,"text-blue-700",t[2].domains.includes(t[28].domain)),v(e,"border-blue-200",t[2].domains.includes(t[28].domain)),v(e,"text-gray-600",!t[2].domains.includes(t[28].domain)),v(e,"border-transparent",!t[2].domains.includes(t[28].domain))},m(t,u){d(t,e,u),i(e,n),i(n,r),i(e,o),i(e,l),i(l,a),i(a,s),i(a,c),i(a,f),i(l,m),R&&R.m(l,null),k||($=p(e,"click",A),k=!0)},p(n,o){t=n,8&o[0]&&C!==(C=t[28].domain+"")&&y(r,C),8&o[0]&&E!==(E=t[28].count+"")&&y(s,E),8&o[0]&&D!==(D=1!==t[28].count?"s":"")&&y(f,D),"recency"===t[0]?R?R.p(t,o):(R=kt(t),R.c(),R.m(l,null)):R&&(R.d(1),R=null),8&o[0]&&w!==(w=t[28].domain)&&b(e,"title",w),12&o[0]&&v(e,"bg-blue-50",t[2].domains.includes(t[28].domain)),12&o[0]&&v(e,"text-blue-700",t[2].domains.includes(t[28].domain)),12&o[0]&&v(e,"border-blue-200",t[2].domains.includes(t[28].domain)),12&o[0]&&v(e,"text-gray-600",!t[2].domains.includes(t[28].domain)),12&o[0]&&v(e,"border-transparent",!t[2].domains.includes(t[28].domain))},d(t){t&&u(e),R&&R.d(),k=!1,$()}}}function Ct(t){let e,n,r,o,l=t[3].length-30+"";return{c(){e=g("div"),n=h("... and "),r=h(l),o=h(" more"),b(e,"class","text-xs text-gray-400 px-2 py-1")},m(t,l){d(t,e,l),i(e,n),i(e,r),i(e,o)},p(t,e){8&e[0]&&l!==(l=t[3].length-30+"")&&y(r,l)},d(t){t&&u(e)}}}function Et(t){let e,n,r,o,l,a,s,c=t[25]+"";function f(){return t[21](t[25])}return{c(){e=g("button"),n=g("span"),r=h("üìÅ "),o=h(c),b(n,"class","truncate"),b(e,"class","w-full text-left px-2 py-1 text-sm hover:bg-gray-100 rounded border"),b(e,"title",l=t[25]),v(e,"bg-green-50",t[2].folders.includes(t[25])),v(e,"text-green-700",t[2].folders.includes(t[25])),v(e,"border-green-200",t[2].folders.includes(t[25])),v(e,"text-gray-600",!t[2].folders.includes(t[25])),v(e,"border-transparent",!t[2].folders.includes(t[25]))},m(t,l){d(t,e,l),i(e,n),i(n,r),i(n,o),a||(s=p(e,"click",f),a=!0)},p(n,r){t=n,2&r[0]&&c!==(c=t[25]+"")&&y(o,c),2&r[0]&&l!==(l=t[25])&&b(e,"title",l),6&r[0]&&v(e,"bg-green-50",t[2].folders.includes(t[25])),6&r[0]&&v(e,"text-green-700",t[2].folders.includes(t[25])),6&r[0]&&v(e,"border-green-200",t[2].folders.includes(t[25])),6&r[0]&&v(e,"text-gray-600",!t[2].folders.includes(t[25])),6&r[0]&&v(e,"border-transparent",!t[2].folders.includes(t[25]))},d(t){t&&u(e),a=!1,s()}}}function Dt(t){let e,n,r,o,l=t[1].length-15+"";return{c(){e=g("div"),n=h("... and "),r=h(l),o=h(" more"),b(e,"class","text-xs text-gray-400 px-2 py-1")},m(t,l){d(t,e,l),i(e,n),i(e,r),i(e,o)},p(t,e){2&e[0]&&l!==(l=t[1].length-15+"")&&y(r,l)},d(t){t&&u(e)}}}function Rt(e){let n,o,l,a,s,c,m,w,k,$,C,E,D,R,A,B,M,_,T,j,L,F,S,P,z,N,H,O,U,W,Y,I,V,J,G,K,Q,X,Z,tt,et,nt,rt=e[8](),ot=e[8](),lt=e[3].length+"",at=e[1].length+"",st=rt&&function(e){let n,r,o;return{c(){n=g("button"),n.textContent="Clear All",b(n,"class","text-xs text-blue-600 hover:text-blue-800")},m(t,l){d(t,n,l),r||(o=p(n,"click",e[6]),r=!0)},p:t,d(t){t&&u(n),r=!1,o()}}}(e),ct=ot&&function(t){let e,n,r,o=q(t[2].domains),l=[];for(let e=0;e<o.length;e+=1)l[e]=yt(bt(t,o,e));let a=q(t[2].folders),s=[];for(let e=0;e<a.length;e+=1)s[e]=wt(pt(t,a,e));let c=t[2].dateRange&&vt(t);return{c(){e=g("div");for(let t=0;t<l.length;t+=1)l[t].c();n=x();for(let t=0;t<s.length;t+=1)s[t].c();r=x(),c&&c.c(),b(e,"class","mb-4 space-y-2")},m(t,o){d(t,e,o);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);i(e,n);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);i(e,r),c&&c.m(e,null)},p(t,i){if(20&i[0]){let r;for(o=q(t[2].domains),r=0;r<o.length;r+=1){const a=bt(t,o,r);l[r]?l[r].p(a,i):(l[r]=yt(a),l[r].c(),l[r].m(e,n))}for(;r<l.length;r+=1)l[r].d(1);l.length=o.length}if(36&i[0]){let n;for(a=q(t[2].folders),n=0;n<a.length;n+=1){const o=pt(t,a,n);s[n]?s[n].p(o,i):(s[n]=wt(o),s[n].c(),s[n].m(e,r))}for(;n<s.length;n+=1)s[n].d(1);s.length=a.length}t[2].dateRange?c?c.p(t,i):(c=vt(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(t){t&&u(e),f(l,t),f(s,t),c&&c.d()}}}(e),it=q(e[3].slice(0,30)),dt=[];for(let t=0;t<it.length;t+=1)dt[t]=$t(xt(e,it,t));let ut=e[3].length>30&&Ct(e),ft=q(e[1].slice(0,15)),gt=[];for(let t=0;t<ft.length;t+=1)gt[t]=Et(ht(e,ft,t));let mt=e[1].length>15&&Dt(e);return{c(){n=g("div"),o=g("div"),l=g("div"),a=g("h3"),a.textContent="Filters",s=x(),st&&st.c(),c=x(),ct&&ct.c(),m=x(),w=g("div"),k=g("h4"),k.textContent="Date Added",$=x(),C=g("div"),E=g("button"),E.textContent="This Week",D=x(),R=g("button"),R.textContent="This Month",A=x(),B=g("button"),B.textContent="This Year",M=x(),_=g("div"),T=g("div"),j=g("h4"),L=h("Domains ("),F=h(lt),S=h(")"),P=x(),z=g("div"),N=g("button"),N.textContent="Recent",H=x(),O=g("button"),O.textContent="Count",U=x(),W=g("div");for(let t=0;t<dt.length;t+=1)dt[t].c();Y=x(),ut&&ut.c(),I=x(),V=g("div"),J=g("h4"),G=h("Folders ("),K=h(at),Q=h(")"),X=x(),Z=g("div");for(let t=0;t<gt.length;t+=1)gt[t].c();tt=x(),mt&&mt.c(),b(a,"class","text-sm font-medium text-gray-900"),b(l,"class","flex items-center justify-between mb-3"),b(o,"class","mb-6"),b(k,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),b(E,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),v(E,"bg-blue-50","week"===e[2].dateRange?.period),v(E,"text-blue-700","week"===e[2].dateRange?.period),b(R,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),v(R,"bg-blue-50","month"===e[2].dateRange?.period),v(R,"text-blue-700","month"===e[2].dateRange?.period),b(B,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),v(B,"bg-blue-50","year"===e[2].dateRange?.period),v(B,"text-blue-700","year"===e[2].dateRange?.period),b(C,"class","space-y-1"),b(w,"class","mb-6"),b(j,"class","text-xs font-medium text-gray-700 uppercase tracking-wide"),b(N,"class","text-xs px-2 py-1 rounded"),b(N,"title","Sort by most recent bookmark"),v(N,"bg-blue-100","recency"===e[0]),v(N,"text-blue-700","recency"===e[0]),v(N,"text-gray-500","recency"!==e[0]),b(O,"class","text-xs px-2 py-1 rounded"),b(O,"title","Sort by bookmark count"),v(O,"bg-blue-100","count"===e[0]),v(O,"text-blue-700","count"===e[0]),v(O,"text-gray-500","count"!==e[0]),b(z,"class","flex space-x-1"),b(T,"class","flex items-center justify-between mb-2"),b(W,"class","space-y-1 max-h-64 overflow-y-auto"),b(_,"class","mb-6"),b(J,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),b(Z,"class","space-y-1 max-h-48 overflow-y-auto"),b(V,"class","mb-6"),b(n,"class","w-64 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0")},m(t,r){d(t,n,r),i(n,o),i(o,l),i(l,a),i(l,s),st&&st.m(l,null),i(o,c),ct&&ct.m(o,null),i(n,m),i(n,w),i(w,k),i(w,$),i(w,C),i(C,E),i(C,D),i(C,R),i(C,A),i(C,B),i(n,M),i(n,_),i(_,T),i(T,j),i(j,L),i(j,F),i(j,S),i(T,P),i(T,z),i(z,N),i(z,H),i(z,O),i(_,U),i(_,W);for(let t=0;t<dt.length;t+=1)dt[t]&&dt[t].m(W,null);i(W,Y),ut&&ut.m(W,null),i(n,I),i(n,V),i(V,J),i(J,G),i(J,K),i(J,Q),i(V,X),i(V,Z);for(let t=0;t<gt.length;t+=1)gt[t]&&gt[t].m(Z,null);i(Z,tt),mt&&mt.m(Z,null),et||(nt=[p(E,"click",e[15]),p(R,"click",e[16]),p(B,"click",e[17]),p(N,"click",e[18]),p(O,"click",e[19])],et=!0)},p(t,e){if(rt&&st.p(t,e),ot&&ct.p(t,e),4&e[0]&&v(E,"bg-blue-50","week"===t[2].dateRange?.period),4&e[0]&&v(E,"text-blue-700","week"===t[2].dateRange?.period),4&e[0]&&v(R,"bg-blue-50","month"===t[2].dateRange?.period),4&e[0]&&v(R,"text-blue-700","month"===t[2].dateRange?.period),4&e[0]&&v(B,"bg-blue-50","year"===t[2].dateRange?.period),4&e[0]&&v(B,"text-blue-700","year"===t[2].dateRange?.period),8&e[0]&&lt!==(lt=t[3].length+"")&&y(F,lt),1&e[0]&&v(N,"bg-blue-100","recency"===t[0]),1&e[0]&&v(N,"text-blue-700","recency"===t[0]),1&e[0]&&v(N,"text-gray-500","recency"!==t[0]),1&e[0]&&v(O,"bg-blue-100","count"===t[0]),1&e[0]&&v(O,"text-blue-700","count"===t[0]),1&e[0]&&v(O,"text-gray-500","count"!==t[0]),29&e[0]){let n;for(it=q(t[3].slice(0,30)),n=0;n<it.length;n+=1){const r=xt(t,it,n);dt[n]?dt[n].p(r,e):(dt[n]=$t(r),dt[n].c(),dt[n].m(W,Y))}for(;n<dt.length;n+=1)dt[n].d(1);dt.length=it.length}if(t[3].length>30?ut?ut.p(t,e):(ut=Ct(t),ut.c(),ut.m(W,null)):ut&&(ut.d(1),ut=null),2&e[0]&&at!==(at=t[1].length+"")&&y(K,at),38&e[0]){let n;for(ft=q(t[1].slice(0,15)),n=0;n<ft.length;n+=1){const r=ht(t,ft,n);gt[n]?gt[n].p(r,e):(gt[n]=Et(r),gt[n].c(),gt[n].m(Z,tt))}for(;n<gt.length;n+=1)gt[n].d(1);gt.length=ft.length}t[1].length>15?mt?mt.p(t,e):(mt=Dt(t),mt.c(),mt.m(Z,null)):mt&&(mt.d(1),mt=null)},i:t,o:t,d(t){t&&u(n),st&&st.d(),ct&&ct.d(),f(dt,t),ut&&ut.d(),f(gt,t),mt&&mt.d(),et=!1,r(nt)}}}function At(t){const e=Date.now()-t,n=Math.floor(e/864e5);return 0===n?"Today":1===n?"1 day ago":n<7?`${n} days ago`:n<30?`${Math.floor(n/7)} weeks ago`:n<365?`${Math.floor(n/30)} months ago`:`${Math.floor(n/365)} years ago`}function Bt(t,e,n){let r;const o=E();let l=[],a=[],s=[],c={domains:[],folders:[],dateRange:null},i="recency";function d(t){c.domains.includes(t)?n(2,c.domains=c.domains.filter(e=>e!==t),c):n(2,c.domains=[...c.domains,t],c),f()}function u(t){c.folders.includes(t)?n(2,c.folders=c.folders.filter(e=>e!==t),c):n(2,c.folders=[...c.folders,t],c),f()}function f(){o("filter",c)}function g(t){const e=new Date;let r;switch(t){case"week":r=new Date(e.getTime()-6048e5);break;case"month":r=new Date(e.getFullYear(),e.getMonth(),1);break;case"year":r=new Date(e.getFullYear(),0,1)}!function(t,e,r){n(2,c.dateRange={startDate:t,endDate:e,period:r},c),f()}(r.getTime(),e.getTime(),t)}C(async()=>{try{await async function(){n(10,l=await async function(){return(await mt()).byRecency}()),n(11,a=await async function(){return(await mt()).byCount}())}(),n(1,s=await async function(){try{const t=await gt();return[...new Set(t.map(t=>t.folderPath).filter(t=>t))].sort()}catch(t){return console.error("Error getting unique folders:",t),[]}}())}catch(t){console.error("Error loading filters:",t)}});return t.$$.update=()=>{3073&t.$$.dirty[0]&&n(3,r="recency"===i?l:a)},[i,s,c,r,d,u,function(){n(2,c={domains:[],folders:[],dateRange:null}),f()},f,function(){return c.domains.length>0||c.folders.length>0||null!==c.dateRange},g,l,a,t=>d(t),t=>u(t),()=>{n(2,c.dateRange=null,c),f()},()=>g("week"),()=>g("month"),()=>g("year"),()=>n(0,i="recency"),()=>n(0,i="count"),t=>d(t.domain),t=>u(t)]}class Mt extends K{constructor(t){super(),G(this,t,Bt,Rt,l,{},null,[-1,-1])}}function _t(t,e,n){const r=t.slice();return r[9]=e[n],r}function Tt(e){let n,r;return n=new Mt({}),n.$on("filter",e[7]),{c(){Y(n.$$.fragment)},m(t,e){I(n,t,e),r=!0},p:t,i(t){r||(O(n.$$.fragment,t),r=!0)},o(t){U(n.$$.fragment,t),r=!1},d(t){V(n,t)}}}function jt(t){let e,n,o=[],l=new Map,a=q(t[0]);const s=t=>t[9].id;for(let e=0;e<a.length;e+=1){let n=_t(t,a,e),r=s(n);l.set(r,o[e]=Pt(r,n))}return{c(){e=g("div");for(let t=0;t<o.length;t+=1)o[t].c();b(e,"class","space-y-3")},m(t,r){d(t,e,r);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);n=!0},p(t,n){1&n&&(a=q(t[0]),N(),o=function(t,e,n,o,l,a,s,c,i,d,u,f){let g=t.length,m=a.length,h=g;const x={};for(;h--;)x[t[h].key]=h;const p=[],b=new Map,y=new Map,w=[];for(h=m;h--;){const t=f(l,a,h),r=n(t);let c=s.get(r);c?o&&w.push(()=>c.p(t,e)):(c=d(r,t),c.c()),b.set(r,p[h]=c),r in x&&y.set(r,Math.abs(h-x[r]))}const v=new Set,k=new Set;function $(t){O(t,1),t.m(c,u),s.set(t.key,t),u=t.first,m--}for(;g&&m;){const e=p[m-1],n=t[g-1],r=e.key,o=n.key;e===n?(u=e.first,g--,m--):b.has(o)?!s.has(r)||v.has(r)?$(e):k.has(o)?g--:y.get(r)>y.get(o)?(k.add(r),$(e)):(v.add(o),g--):(i(n,s),g--)}for(;g--;){const e=t[g];b.has(e.key)||i(e,s)}for(;m;)$(p[m-1]);return r(w),p}(o,n,s,1,t,a,l,e,W,Pt,null,_t),H())},i(t){if(!n){for(let t=0;t<a.length;t+=1)O(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)U(o[t]);n=!1},d(t){t&&u(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Lt(e){let n;function r(t,e){return t[3]?Nt:zt}let o=r(e),l=o(e);return{c(){n=g("div"),l.c(),b(n,"class","text-center text-gray-500 p-4")},m(t,e){d(t,n,e),l.m(n,null)},p(t,e){o===(o=r(t))&&l?l.p(t,e):(l.d(1),l=o(t),l&&(l.c(),l.m(n,null)))},i:t,o:t,d(t){t&&u(n),l.d()}}}function Ft(e){let n,r,o,l,a,s,c,f;return{c(){n=g("div"),r=g("p"),o=h("Error: "),l=h(e[2]),a=x(),s=g("button"),s.textContent="Retry",b(s,"class","mt-2 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700"),b(n,"class","text-center text-red-600 p-4")},m(t,u){d(t,n,u),i(n,r),i(r,o),i(r,l),i(n,a),i(n,s),c||(f=p(s,"click",e[5]),c=!0)},p(t,e){4&e&&y(l,t[2])},i:t,o:t,d(t){t&&u(n),c=!1,f()}}}function St(e){let n;return{c(){n=g("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>',b(n,"class","flex items-center justify-center h-32")},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function Pt(t,e){let n,r,o;return r=new at({props:{bookmark:e[9]}}),{key:t,first:null,c(){n=h(""),Y(r.$$.fragment),this.first=n},m(t,e){d(t,n,e),I(r,t,e),o=!0},p(t,n){e=t;const o={};1&n&&(o.bookmark=e[9]),r.$set(o)},i(t){o||(O(r.$$.fragment,t),o=!0)},o(t){U(r.$$.fragment,t),o=!1},d(t){t&&u(n),V(r,t)}}}function zt(e){let n;return{c(){n=g("p"),n.textContent="No bookmarks found"},m(t,e){d(t,n,e)},p:t,d(t){t&&u(n)}}}function Nt(t){let e,n,r,o;return{c(){e=g("p"),n=h('No bookmarks found for "'),r=h(t[3]),o=h('"')},m(t,l){d(t,e,l),i(e,n),i(e,r),i(e,o)},p(t,e){8&e&&y(r,t[3])},d(t){t&&u(e)}}}function Ht(t){let e,n,o,l,a,s,c,f,m,w,v,k,$,C,E,D,R,A,B,M,_,T,j,L,F,S=t[0].length+"",P=1!==t[0].length?"s":"";v=new dt({}),v.$on("search",t[6]);let z=t[4]&&Tt(t);const q=[St,Ft,Lt,jt],W=[];function J(t,e){return t[1]?0:t[2]?1:0===t[0].length?2:3}return _=J(t),T=W[_]=q[_](t),{c(){e=g("div"),n=g("div"),o=g("div"),l=g("h1"),l.textContent="Bookmark Insight",a=x(),s=g("div"),c=g("button"),c.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"></path></svg>',f=x(),m=g("button"),m.textContent="Dashboard",w=x(),Y(v.$$.fragment),k=x(),$=g("div"),C=h(S),E=h(" bookmark"),D=h(P),R=x(),A=g("div"),z&&z.c(),B=x(),M=g("div"),T.c(),b(l,"class","text-lg font-semibold text-gray-900"),b(c,"class","p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100"),b(c,"title","Toggle Filters"),b(m,"class","px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700"),b(s,"class","flex space-x-2"),b(o,"class","flex items-center justify-between mb-3"),b($,"class","text-xs text-gray-500"),b(n,"class","p-4 border-b border-gray-200 bg-gray-50"),b(M,"class","flex-1 overflow-y-auto p-4"),b(A,"class","flex flex-1 overflow-hidden"),b(e,"class","w-96 h-96 bg-white flex flex-col")},m(r,u){d(r,e,u),i(e,n),i(n,o),i(o,l),i(o,a),i(o,s),i(s,c),i(s,f),i(s,m),i(n,w),I(v,n,null),i(n,k),i(n,$),i($,C),i($,E),i($,D),i(e,R),i(e,A),z&&z.m(A,null),i(A,B),i(A,M),W[_].m(M,null),j=!0,L||(F=[p(c,"click",t[8]),p(m,"click",Ot)],L=!0)},p(t,[e]){(!j||1&e)&&S!==(S=t[0].length+"")&&y(C,S),(!j||1&e)&&P!==(P=1!==t[0].length?"s":"")&&y(D,P),t[4]?z?(z.p(t,e),16&e&&O(z,1)):(z=Tt(t),z.c(),O(z,1),z.m(A,B)):z&&(N(),U(z,1,1,()=>{z=null}),H());let n=_;_=J(t),_===n?W[_].p(t,e):(N(),U(W[n],1,1,()=>{W[n]=null}),H(),T=W[_],T?T.p(t,e):(T=W[_]=q[_](t),T.c()),O(T,1),T.m(M,null))},i(t){j||(O(v.$$.fragment,t),O(z),O(T),j=!0)},o(t){U(v.$$.fragment,t),U(z),U(T),j=!1},d(t){t&&u(e),V(v),z&&z.d(),W[_].d(),L=!1,r(F)}}}function Ot(){chrome.tabs.create({url:chrome.runtime.getURL("dashboard.html")}),window.close()}function Ut(t,e,n){let r=[],o=!0,l=null,a="",s=!1;async function c(){n(0,r=await gt())}return C(async()=>{try{await c()}catch(t){n(2,l=t.message)}finally{n(1,o=!1)}}),[r,o,l,a,s,c,async function(t){const e=t.detail.query;n(3,a=e);try{n(1,o=!0),n(0,r=await async function(t){try{const e=await gt();if(!t.trim())return e.sort((t,e)=>e.dateAdded-t.dateAdded);const n=t.toLowerCase();return e.filter(t=>t.title.toLowerCase().includes(n)||t.url.toLowerCase().includes(n)||t.domain.toLowerCase().includes(n)).sort((t,e)=>e.dateAdded-t.dateAdded)}catch(t){return console.error("Search error:",t),[]}}(e))}catch(t){n(2,l=t.message)}finally{n(1,o=!1)}},async function(t){const{type:e,value:a}=t.detail;try{switch(n(1,o=!0),e){case"clear":n(0,r=await gt());break;case"domain":n(0,r=await async function(t){try{return(await gt()).filter(e=>e.domain===t)}catch(t){return console.error("Error getting bookmarks by domain:",t),[]}}(a));break;case"folder":n(0,r=await async function(t){try{return(await gt()).filter(e=>e.folderPath===t)}catch(t){return console.error("Error getting bookmarks by folder:",t),[]}}(a));break;case"date":n(0,r=await async function(t,e){try{return(await gt()).filter(n=>n.dateAdded>=t&&n.dateAdded<=e)}catch(t){return console.error("Error getting bookmarks by date range:",t),[]}}(a.startDate,a.endDate))}}catch(t){n(2,l=t.message)}finally{n(1,o=!1)}},function(){n(4,s=!s)}]}const qt=new class extends K{constructor(t){super(),G(this,t,Ut,Ht,l,{})}}({target:document.body});export{qt as default};
//# sourceMappingURL=popup.js.map
