function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a,s;function u(e,t){return e===t||(a||(a=document.createElement("a")),a.href=t,e===a.href)}function l(t,...n){if(null==t){for(const e of n)e(void 0);return e}const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(e,t,n){e.$$.on_destroy.push(l(t,n))}function d(e,t){e.appendChild(t)}function f(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function g(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function y(e){return document.createTextNode(e)}function v(){return y(" ")}function b(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function w(e,t){t=""+t,e.data!==t&&(e.data=t)}function k(e,t){e.value=null==t?"":t}function _(e,t,n){e.classList.toggle(t,!!n)}function S(e){s=e}function P(){if(!s)throw new Error("Function called outside component initialization");return s}function A(e){P().$$.on_mount.push(e)}function C(){const e=P();return(t,n,{cancelable:r=!1}={})=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}(t,n,{cancelable:r});return o.slice().forEach(t=>{t.call(e,i)}),!i.defaultPrevented}return!0}}const E=[],T=[];let O=[];const R=[],D=Promise.resolve();let j=!1;function K(e){O.push(e)}const I=new Set;let q=0;function M(){if(0!==q)return;const e=s;do{try{for(;q<E.length;){const e=E[q];q++,S(e),$(e.$$)}}catch(e){throw E.length=0,q=0,e}for(S(null),E.length=0,q=0;T.length;)T.pop()();for(let e=0;e<O.length;e+=1){const t=O[e];I.has(t)||(I.add(t),t())}O.length=0}while(E.length);for(;R.length;)R.pop()();j=!1,I.clear(),S(e)}function $(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}const B=new Set;let F;function N(){F={r:0,c:[],p:F}}function L(){F.r||r(F.c),F=F.p}function z(e,t){e&&e.i&&(B.delete(e),e.i(t))}function Q(e,t,n,r){if(e&&e.o){if(B.has(e))return;B.add(e),F.c.push(()=>{B.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function U(e){return void 0!==e?.length?e:Array.from(e)}function H(e,t){Q(e,1,1,()=>{t.delete(e.key)})}function V(e){e&&e.c()}function W(e,n,i){const{fragment:a,after_update:s}=e.$$;a&&a.m(n,i),K(()=>{const n=e.$$.on_mount.map(t).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...n):r(n),e.$$.on_mount=[]}),s.forEach(K)}function Y(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];O.forEach(r=>-1===e.indexOf(r)?t.push(r):n.push(r)),n.forEach(e=>e()),O=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function G(e,t){-1===e.$$.dirty[0]&&(E.push(e),j||(j=!0,D.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function X(t,o,i,a,u,l,c=null,d=[-1]){const f=s;S(t);const p=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||f.$$.root};c&&c(p.root);let m=!1;if(p.ctx=i?i(t,o.props||{},(e,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&u(p.ctx[e],p.ctx[e]=o)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](o),m&&G(t,e)),n}):[],p.update(),m=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);p.fragment&&p.fragment.l(e),e.forEach(h)}else p.fragment&&p.fragment.c();o.intro&&z(t.$$.fragment),W(t,o.target,o.anchor),M()}S(f)}class J{$$=void 0;$$set=void 0;$destroy(){Y(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Z(e){return new Date(e).toLocaleDateString()}function ee(e){if(e.faviconUrl)return e.faviconUrl;if(e.url&&(e.url.startsWith("http://")||e.url.startsWith("https://")))try{return`https://www.google.com/s2/favicons?domain=${e.domain||new URL(e.url).hostname}&sz=32`}catch(e){}return function(e){if(e.url.startsWith("http://")||e.url.startsWith("https://")){const t=e.domain||"unknown",n=t.charAt(0).toUpperCase(),r=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899"];return`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="${r[t.length%r.length]}"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white" font-weight="bold">${n}</text></svg>`}switch(e.domain||""){case"chrome-internal":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23EA4335"/><circle cx="8" cy="8" r="3" fill="white"/></svg>';case"local-file":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F59E0B"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">ðŸ“„</text></svg>';case"javascript-bookmarklet":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F7DF1E"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="black" font-weight="bold">JS</text></svg>';case"data-uri":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%2310B981"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="white" font-weight="bold">D</text></svg>';case"contact-link":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%238B5CF6"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">@</text></svg>';case"other-protocol":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%236B7280"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">âš¡</text></svg>';default:return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23E5E7EB"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="%236B7280">?</text></svg>'}}(e)}function te(e){switch(e.domain){case"chrome-internal":return"Chrome";case"local-file":return"Local File";case"javascript-bookmarklet":return"Bookmarklet";case"data-uri":return"Data URI";case"contact-link":return"Contact";case"other-protocol":return"Other";case"invalid-url":return"Invalid URL";default:return e.domain}}function ne(e,t){if(!e||!t)return e;const{positive:n,phrases:r,regular:o,regexPatterns:i}=t,a=[...n||[],...r||[],...o||[]];if(0===a.length&&(!i||0===i.length))return e;const s=[];a.forEach(t=>{if(!t)return;const n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(n,"gi");let o;for(;null!==(o=r.exec(e));)s.push({start:o.index,end:o.index+o[0].length})}),i&&i.forEach(t=>{const n=t.flags.includes("g")?t.flags:t.flags+"g";try{const r=new RegExp(t.source,n);let o;for(;null!==(o=r.exec(e));)s.push({start:o.index,end:o.index+o[0].length}),o.index===r.lastIndex&&r.lastIndex++}catch(e){console.warn("Invalid regex for highlighting:",e)}}),s.sort((e,t)=>e.start-t.start);const u=[];if(s.length>0){let e=s[0];for(let t=1;t<s.length;t++){const n=s[t];n.start<e.end?e.end=Math.max(e.end,n.end):(u.push(e),e=n)}u.push(e)}let l=e;for(let e=u.length-1;e>=0;e--){const{start:t,end:n}=u[e],r=l.slice(0,t),o=l.slice(t,n),i=l.slice(n);l=`${r}<mark class="bg-yellow-200 text-gray-900 rounded-sm px-0.5">${o}</mark>${i}`}return l}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const re=[];function oe(t,n=e){let r;const o=new Set;function a(e){if(i(t,e)&&(t=e,r)){const e=!re.length;for(const e of o)e[1](),re.push(e,t);if(e){for(let e=0;e<re.length;e+=2)re[e][0](re[e+1]);re.length=0}}}function s(e){a(e(t))}return{set:a,update:s,subscribe:function(i,u=e){const l=[i,u];return o.add(l),1===o.size&&(r=n(a,s)||e),i(t),()=>{o.delete(l),0===o.size&&r&&(r(),r=null)}}}}function ie(t,n,i){const a=!Array.isArray(t),s=a?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const u=n.length<2;return c=(t,i)=>{let c=!1;const d=[];let f=0,h=e;const p=()=>{if(f)return;h();const r=n(a?d[0]:d,t,i);u?t(r):h=o(r)?r:e},m=s.map((e,t)=>l(e,e=>{d[t]=e,f&=~(1<<t),c&&p()},()=>{f|=1<<t}));return c=!0,p(),function(){r(m),h(),c=!1}},{subscribe:oe(i,c).subscribe};var c}var ae="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function se(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ue={exports:{}};ue.exports=function(){
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation.
	    Permission to use, copy, modify, and/or distribute this software for any
	    purpose with or without fee is hereby granted.
	    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	    PERFORMANCE OF THIS SOFTWARE.
	    ***************************************************************************** */
var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:ae,i=Object.keys,a=Array.isArray;function s(e,t){return"object"!=typeof t||i(t).forEach(function(n){e[n]=t[n]}),e}"undefined"==typeof Promise||o.Promise||(o.Promise=Promise);var u=Object.getPrototypeOf,l={}.hasOwnProperty;function c(e,t){return l.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(u(e))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(t).forEach(function(n){h(e,n,t[n])})}var f=Object.defineProperty;function h(e,t,n,r){f(e,t,s(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var m=Object.getOwnPropertyDescriptor;function g(e,t){var n;return m(e,t)||(n=u(e))&&g(n,t)}var y=[].slice;function v(e,t,n){return y.call(e,t,n)}function b(e,t){return t(e)}function x(e){if(!e)throw new Error("Assertion Failed")}function w(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function k(e,t){return e.reduce(function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e},{})}function _(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var i=_(e,t[r]);n.push(i)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return null==s?void 0:_(s,t.substr(a+1))}}function S(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){x("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)S(e,t[r],n[r])}else{var i=t.indexOf(".");if(-1!==i){var s=t.substr(0,i),u=t.substr(i+1);if(""===u)void 0===n?a(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l&&c(e,s)||(l=e[s]={}),S(l,u,n)}}else void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function P(e,t){"string"==typeof t?S(e,t,void 0):"length"in t&&[].map.call(t,function(t){S(e,t,void 0)})}function A(e){var t={};for(var n in e)c(e,n)&&(t[n]=e[n]);return t}var C=[].concat;function E(e){return C.apply([],e)}var T="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return o[e]}),O=new Set(T.map(function(e){return o[e]}));function R(e){var t={};for(var n in e)if(c(e,n)){var r=e[n];t[n]=!r||"object"!=typeof r||O.has(r.constructor)?r:R(r)}return t}function D(e){for(var t in e)if(c(e,t))return!1;return!0}var j=null;function K(e){j=new WeakMap;var t=I(e);return j=null,t}function I(e){if(!e||"object"!=typeof e)return e;var t=j.get(e);if(t)return t;if(a(e)){t=[],j.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(I(e[n]))}else if(O.has(e.constructor))t=e;else{var o=u(e);for(var i in t=o===Object.prototype?{}:Object.create(o),j.set(e,t),e)c(e,i)&&(t[i]=I(e[i]))}return t}var q={}.toString;function M(e){return q.call(e).slice(8,-1)}var $="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",B="symbol"==typeof $?function(e){var t;return null!=e&&(t=e[$])&&t.apply(e)}:function(){return null};function F(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var N={};function L(e){var t,n,r,o;if(1===arguments.length){if(a(e))return e.slice();if(this===N&&"string"==typeof e)return[e];if(o=B(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var z="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},Q=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],U=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Q),H={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function V(e,t){this.name=e,this.message=t}function W(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function Y(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=W(e,t)}function G(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=W(e,this.failures)}p(V).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(Y).from(V),p(G).from(V);var X=U.reduce(function(e,t){return e[t]=t+"Error",e},{}),J=V,Z=U.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=H[t]||n,this.inner=null)}return p(r).from(J),e[t]=r,e},{});Z.Syntax=SyntaxError,Z.Type=TypeError,Z.Range=RangeError;var ee=Q.reduce(function(e,t){return e[t+"Error"]=Z[t],e},{});function te(e,t){if(!e||e instanceof V||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ee[e.name])return e;var n=new ee[e.name](t||e.message,e);return"stack"in e&&h(n,"stack",{get:function(){return this.inner.stack}}),n}var ne=U.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Z[t]),e},{});function re(){}function oe(e){return e}function ie(e,t){return null==e||e===oe?t:function(n){return t(e(n))}}function se(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ue(e,t){return e===re?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?se(r,this.onsuccess):r),o&&(this.onerror=this.onerror?se(o,this.onerror):o),void 0!==i?i:n}}function le(e,t){return e===re?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?se(n,this.onsuccess):n),r&&(this.onerror=this.onerror?se(r,this.onerror):r)}}function ce(e,t){return e===re?t:function(n){var r=e.apply(this,arguments);s(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?se(o,this.onsuccess):o),i&&(this.onerror=this.onerror?se(i,this.onerror):i),void 0===r?void 0===a?void 0:a:s(r,a)}}function de(e,t){return e===re?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function fe(e,t){return e===re?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}ne.ModifyError=Y,ne.DexieError=V,ne.BulkError=G;var he="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function pe(e,t){he=e}var me={},ge=100,ye="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,u(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,u(t),e]}(),ve=ye[0],be=ye[1],xe=ye[2],we=be&&be.then,ke=ve&&ve.constructor,_e=!!xe;function Se(){queueMicrotask(Qe)}var Pe=function(e,t){je.push([e,t]),Ce&&(Se(),Ce=!1)},Ae=!0,Ce=!0,Ee=[],Te=[],Oe=oe,Re={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:re,pgp:!1,env:{},finalize:re},De=Re,je=[],Ke=0,Ie=[];function qe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=De;if("function"!=typeof e){if(e!==me)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Fe(this,this._value))}this._state=null,this._value=null,++t.ref,Be(this,e)}var Me={get:function(){var e=De,t=rt;function n(n,r){var o=this,i=!e.global&&(e!==De||t!==rt),a=i&&!st(),s=new qe(function(t,s){Le(o,new $e(pt(n,e,i,a),pt(r,e,i,a),t,s,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=me,n},set:function(e){h(this,"then",e&&e.prototype===me?Me:{get:function(){return e},set:Me.set})}};function $e(e,t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o}function Be(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Ue();t&&"function"==typeof t.then?Be(e,function(e,n){t instanceof qe?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,Ne(e)),n&&He()}},Fe.bind(null,e))}catch(t){Fe(e,t)}}function Fe(e,t){if(Te.push(t),null===e._state){var n=e._lib&&Ue();t=Oe(t),e._state=!1,e._value=t,Ye(e),Ne(e),n&&He()}}function Ne(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Le(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===Ke&&(++Ke,Pe(function(){0===--Ke&&Ve()},[]))}function Le(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ke,Pe(ze,[n,e,t])}else e._listeners.push(t)}function ze(e,t,n){try{var r,o=t._value;!t._state&&Te.length&&(Te=[]),r=he&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),t._state||-1!==Te.indexOf(o)||Ge(t),n.resolve(r)}catch(e){n.reject(e)}finally{0===--Ke&&Ve(),--n.psd.ref||n.psd.finalize()}}function Qe(){ht(Re,function(){Ue()&&He()})}function Ue(){var e=Ae;return Ae=!1,Ce=!1,e}function He(){var e,t,n;do{for(;je.length>0;)for(e=je,je=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(je.length>0);Ae=!0,Ce=!0}function Ve(){var e=Ee;Ee=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Ie.slice(0),n=t.length;n;)t[--n]()}function We(e){function t(){e(),Ie.splice(Ie.indexOf(t),1)}Ie.push(t),++Ke,Pe(function(){0===--Ke&&Ve()},[])}function Ye(e){Ee.some(function(t){return t._value===e._value})||Ee.push(e)}function Ge(e){for(var t=Ee.length;t;)if(Ee[--t]._value===e._value)return void Ee.splice(t,1)}function Xe(e){return new qe(me,!1,e)}function Je(e,t){var n=De;return function(){var r=Ue(),o=De;try{return dt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{dt(o,!1),r&&He()}}}d(qe.prototype,{then:Me,_then:function(e,t){Le(this,new $e(null,null,e,t,De))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):Xe(e)}):this.then(null,function(e){return e&&e.name===t?n(e):Xe(e)})},finally:function(e){return this.then(function(t){return qe.resolve(e()).then(function(){return t})},function(t){return qe.resolve(e()).then(function(){return Xe(t)})})},timeout:function(e,t){var n=this;return e<1/0?new qe(function(r,o){var i=setTimeout(function(){return o(new Z.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(qe.prototype,Symbol.toStringTag,"Dexie.Promise"),Re.env=ft(),d(qe,{all:function(){var e=L.apply(null,arguments).map(ut);return new qe(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(o,i){return qe.resolve(o).then(function(n){e[i]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof qe?e:e&&"function"==typeof e.then?new qe(function(t,n){e.then(t,n)}):new qe(me,!0,e)},reject:Xe,race:function(){var e=L.apply(null,arguments).map(ut);return new qe(function(t,n){e.map(function(e){return qe.resolve(e).then(t,n)})})},PSD:{get:function(){return De},set:function(e){return De=e}},totalEchoes:{get:function(){return rt}},newPSD:it,usePSD:ht,scheduler:{get:function(){return Pe},set:function(e){Pe=e}},rejectionMapper:{get:function(){return Oe},set:function(e){Oe=e}},follow:function(e,t){return new qe(function(n,r){return it(function(t,n){var r=De;r.unhandleds=[],r.onunhandled=n,r.finalize=se(function(){var e=this;We(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}}),ke&&(ke.allSettled&&h(qe,"allSettled",function(){var e=L.apply(null,arguments).map(ut);return new qe(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,o){return qe.resolve(e).then(function(e){return r[o]={status:"fulfilled",value:e}},function(e){return r[o]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),ke.any&&"undefined"!=typeof AggregateError&&h(qe,"any",function(){var e=L.apply(null,arguments).map(ut);return new qe(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(e,i){return qe.resolve(e).then(function(e){return t(e)},function(e){o[i]=e,--r||n(new AggregateError(o))})})})}),ke.withResolvers&&(qe.withResolvers=ke.withResolvers));var Ze={awaits:0,echoes:0,id:0},et=0,tt=[],nt=0,rt=0,ot=0;function it(e,t,n,r){var o=De,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++ot,Re.env,i.env=_e?{Promise:qe,PromiseProp:{value:qe,configurable:!0,writable:!0},all:qe.all,race:qe.race,allSettled:qe.allSettled,any:qe.any,resolve:qe.resolve,reject:qe.reject}:{},t&&s(i,t),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=ht(i,e,n,r);return 0===i.ref&&i.finalize(),a}function at(){return Ze.id||(Ze.id=++et),++Ze.awaits,Ze.echoes+=ge,Ze.id}function st(){return!!Ze.awaits&&(0===--Ze.awaits&&(Ze.id=0),Ze.echoes=Ze.awaits*ge,!0)}function ut(e){return Ze.echoes&&e&&e.constructor===ke?(at(),e.then(function(e){return st(),e},function(e){return st(),gt(e)})):e}function lt(e){++rt,Ze.echoes&&0!==--Ze.echoes||(Ze.echoes=Ze.awaits=Ze.id=0),tt.push(De),dt(e,!0)}function ct(){var e=tt[tt.length-1];tt.pop(),dt(e,!1)}function dt(e,t){var n=De;if((t?!Ze.echoes||nt++&&e===De:!nt||--nt&&e===De)||queueMicrotask(t?lt.bind(null,e):ct),e!==De&&(De=e,n===Re&&(Re.env=ft()),_e)){var r=Re.env.Promise,i=e.env;(n.global||e.global)&&(Object.defineProperty(o,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function ft(){var e=o.Promise;return _e?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function ht(e,t,n,r,o){var i=De;try{return dt(e,!0),t(n,r,o)}finally{dt(i,!1)}}function pt(e,t,n,r){return"function"!=typeof e?e:function(){var o=De;n&&at(),dt(t,!0);try{return e.apply(this,arguments)}finally{dt(o,!1),r&&queueMicrotask(st)}}}function mt(e){Promise===ke&&0===Ze.echoes?0===nt?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+we).indexOf("[native code]")&&(at=st=re);var gt=qe.reject;function yt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||De.letThrough||e._vip)){var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return yt(e,t,n,r)})):gt(o)}return o._promise(t,function(e,t){return it(function(){return De.trans=o,r(e,t,o)})}).then(function(e){if("readwrite"===t)try{o.idbtrans.commit()}catch(e){}return"readonly"===t?e:o._completion.then(function(){return e})})}if(e._state.openComplete)return gt(new Z.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return gt(new Z.DatabaseClosed);e.open().catch(re)}return e._state.dbReadyPromise.then(function(){return yt(e,t,n,r)})}var vt="4.2.1",bt=String.fromCharCode(65535),xt=-1/0,wt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kt="String expected.",_t=[],St="__dbnames",Pt="readonly",At="readwrite";function Ct(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Et={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Tt(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=K(t))[e],t}}function Ot(){throw Z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Rt(e,t){try{var n=Kt(e),r=Kt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return jt(It(e),It(t));case"Array":return Dt(e,t)}}catch(e){}return NaN}function Dt(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,i=0;i<o;++i){var a=Rt(e[i],t[i]);if(0!==a)return a}return n===r?0:n<r?-1:1}function jt(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,i=0;i<o;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return n===r?0:n<r?-1:1}function Kt(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=M(e);return"ArrayBuffer"===n?"binary":n}function It(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function qt(e,t,n){var r=e.schema.yProps;return r?(t&&n.numFailures>0&&(t=t.filter(function(e,t){return!n.failures[t]})),Promise.all(r.map(function(n){var r=n.updatesTable;return t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return n})):n}var Mt=function(){function e(e){this["@@propmod"]=e}return e.prototype.execute=function(e){var t,n=this["@@propmod"];if(void 0!==n.add){var o=n.add;if(a(o))return r(r([],a(e)?e:[],!0),o,!0).sort();if("number"==typeof o)return(Number(e)||0)+o;if("bigint"==typeof o)try{return BigInt(e)+o}catch(e){return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(void 0!==n.remove){var i=n.remove;if(a(i))return a(e)?e.filter(function(e){return!i.includes(e)}).sort():[];if("number"==typeof i)return Number(e)-i;if("bigint"==typeof i)try{return BigInt(e)-i}catch(e){return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}var s=null===(t=n.replacePrefix)||void 0===t?void 0:t[0];return s&&"string"==typeof e&&e.startsWith(s)?n.replacePrefix[1]+e.substring(s.length):e},e}();function $t(e,t){for(var n=i(t),r=n.length,o=!1,a=0;a<r;++a){var s=n[a],u=t[s],l=_(e,s);u instanceof Mt?(S(e,s,u.execute(l)),o=!0):l!==u&&(S(e,s,u),o=!0)}return o}var Bt=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||De.trans,o=this.name,i=he&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function a(e,n,r){if(!r.schema[o])throw new Z.NotFound("Table "+o+" not part of transaction");return t(r.idbtrans,r)}var s=Ue();try{var u=r&&r.db._novip===this.db._novip?r===De.trans?r._promise(e,a,n):it(function(){return r._promise(e,a,n)},{trans:r,transless:De.transless||De}):yt(this.db,e,[this.name],a);return i&&(u._consoleTask=i,u=u.catch(function(e){return console.trace(e),gt(e)})),u}finally{s&&He()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?gt(new Z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==bt){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&he&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var o=this.schema.idxByName;function s(e,t){return 0===Rt(e,t)}var u=t.reduce(function(t,n){var r=t[0],i=t[1],u=o[n],l=e[n];return[r||u,r||!u?Ct(i,u&&u.multi?function(e){var t=_(e,n);return a(t)&&t.some(function(e){return s(l,e)})}:function(e){return s(l,_(e,n))}):i]},[null,null]),l=u[0],c=u[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?"[".concat(e.join("+"),"]"):e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){var n=this,r=n.db,o=n.name;this.schema.mappedClass=e,e.prototype instanceof Ot&&(e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),n.prototype.table=function(){return o},n}(e));for(var i=new Set,a=e.prototype;a;a=u(a))Object.getOwnPropertyNames(a).forEach(function(e){return i.add(e)});var s=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(!i.has(r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=s,this.hook("reading",s),e},e.prototype.defineClass=function(){function e(e){s(this,e)}return this.mapToClass(e)},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&&o&&(a=Tt(i)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})}).then(function(e){return e.numFailures?qe.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{S(e,i,t)}catch(e){}return t})},e.prototype.upsert=function(e,t){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(o){return n.core.get({trans:o,key:e}).then(function(i){var a=null!=i?i:{};return $t(a,t),r&&S(a,r,e),n.core.mutate({trans:o,type:"put",values:[a],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?qe.reject(e.failures[0]):!!i})})})},e.prototype.update=function(e,t){if("object"!=typeof e||a(e))return this.where(":id").equals(e).modify(t);var n=_(e,this.schema.primKey.keyPath);return void 0===n?gt(new Z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&&o&&(a=Tt(i)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?qe.reject(e.failures[0]):e.lastResult}).then(function(t){if(i)try{S(e,i,t)}catch(e){}return t})},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(n){return qt(t,[e],n)}).then(function(e){return e.numFailures?qe.reject(e.failures[0]):void 0})})},e.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Et}).then(function(t){return qt(e,null,t)})}).then(function(e){return e.numFailures?qe.reject(e.failures[0]):void 0})},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},e.prototype.bulkAdd=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,i=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&o)throw new Z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,l=s&&a?e.map(Tt(s)):e;return r.core.mutate({trans:t,type:"add",keys:o,values:l,wantResults:i}).then(function(e){var t=e.numFailures,n=e.results,o=e.lastResult,a=e.failures;if(0===t)return i?n:o;throw new G("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(u," operations failed"),a)})})},e.prototype.bulkPut=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,i=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,a=n.auto,s=n.keyPath;if(s&&o)throw new Z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var u=e.length,l=s&&a?e.map(Tt(s)):e;return r.core.mutate({trans:t,type:"put",keys:o,values:l,wantResults:i}).then(function(e){var t=e.numFailures,n=e.results,o=e.lastResult,a=e.failures;if(0===t)return i?n:o;throw new G("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(u," operations failed"),a)})})},e.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),o=e.map(function(e){return e.changes}),i=[];return this._trans("readwrite",function(a){return n.getMany({trans:a,keys:r,cache:"clone"}).then(function(s){var u=[],l=[];e.forEach(function(e,n){var r=e.key,o=e.changes,a=s[n];if(a){for(var c=0,d=Object.keys(o);c<d.length;c++){var f=d[c],h=o[f];if(f===t.schema.primKey.keyPath){if(0!==Rt(h,r))throw new Z.Constraint("Cannot update primary key in bulkUpdate()")}else S(a,f,h)}i.push(n),u.push(r),l.push(a)}});var c=u.length;return n.mutate({trans:a,type:"put",keys:u,values:l,updates:{keys:r,changeSpecs:o}}).then(function(e){var n=e.numFailures,r=e.failures;if(0===n)return c;for(var o=0,a=Object.keys(r);o<a.length;o++){var s=a[o],u=i[Number(s)];if(null!=u){var l=r[s];delete r[s],r[u]=l}}throw new G("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(c," operations failed"),r)})})})},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e}).then(function(n){return qt(t,e,n)})}).then(function(e){var r=e.numFailures,o=e.lastResult,i=e.failures;if(0===r)return o;throw new G("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),i)})},e}();function Ft(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return t[n].subscribe.apply(null,i),e}if("string"==typeof n)return t[n]};n.addEventType=s;for(var r=1,o=arguments.length;r<o;++r)s(arguments[r]);return n;function s(e,r,o){if("object"==typeof e)return u(e);r||(r=de),o||(o=re);var i={subscribers:[],fire:o,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=r(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter(function(t){return t!==e}),i.fire=i.subscribers.reduce(r,o)}};return t[e]=n[e]=i,i}function u(e){i(e).forEach(function(t){var n=e[t];if(a(n))s(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new Z.InvalidArgument("Invalid event config");var r=s(t,oe,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){w(function(){e.apply(null,t)})})})}})}}function Nt(e,t){return p(t).from({prototype:e}),t}function Lt(e){return Nt(Bt.prototype,function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Ft(null,{creating:[ue,re],reading:[ie,oe],updating:[ce,re],deleting:[le,re]})})}function zt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Qt(e,t){e.filter=Ct(e.filter,t)}function Ut(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ct(r(),t())}:t,e.justLimit=n&&!r}function Ht(e,t){e.isMatch=Ct(e.isMatch,t)}function Vt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new Z.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Wt(e,t,n){var r=Vt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Yt(e,t,n,r){var o=e.replayFilter?Ct(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},a=function(e,n,r){if(!o||o(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),c(i,s)||(i[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),Gt(Wt(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Gt(Wt(e,r,n),Ct(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function Gt(e,t,n,r){var o=Je(r?function(e,t,o){return n(r(e),t,o)}:n);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};t&&!t(e,function(e){return n=e},function(t){e.stop(t),n=re},function(t){e.fail(t),n=re})||o(e.value,e,function(e){return n=e}),n()})})}var Xt=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,gt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,gt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Ct(t.algorithm,e)},e.prototype._iterate=function(e,t){return Yt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Yt(t,e,n,t.table.core)})},e.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(zt(n,!0))return r.count({trans:e,query:{index:Vt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var o=0;return Yt(n,function(){return++o,!1},e,r).then(function(){return o})}).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){return Rt(i(e,o),i(t,o))*a}return this.toArray(function(e){return e.sort(s)}).then(t)},e.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if("next"===n.dir&&zt(n,!0)&&n.limit>0){var r=n.valueMapper,o=Vt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then(function(e){var t=e.result;return r?t.map(r):t})}var i=[];return Yt(n,function(e){return i.push(e)},e,n.table.core).then(function(){return i})},e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,zt(t)?Ut(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):Ut(t,function(){var t=e;return function(){return--t<0}})),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ut(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},e.prototype.until=function(e,t){return Qt(this._ctx,function(n,r,o){return!e(n.value)||(r(o),t)}),this},e.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Qt(this._ctx,function(t){return e(t.value)}),Ht(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&zt(t,!0)&&t.limit>0)return this._read(function(e){var n=Vt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Qt(this._ctx,function(e){var t=e.primaryKey.toString(),r=c(n,t);return n[t]=!0,!r}),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var o;o="function"==typeof e?e:function(t){return $t(t,e)};var a=n.table.core,s=a.schema.primaryKey,u=s.outbound,l=s.extractKey,c=200,d=t.db._options.modifyChunkSize;d&&(c="object"==typeof d?d[a.name]||d["*"]||200:d);var f=[],h=0,p=[],m=function(e,t){var n=t.failures,r=t.numFailures;h+=e-r;for(var o=0,a=i(n);o<a.length;o++){var s=a[o];f.push(n[s])}},g=e===Jt;return t.clone().primaryKeys().then(function(t){var i=zt(n)&&n.limit===1/0&&("function"!=typeof e||g)&&{index:n.index,range:n.range},s=function(d){var f=Math.min(c,t.length-d),h=t.slice(d,d+f);return(g?Promise.resolve([]):a.getMany({trans:r,keys:h,cache:"immutable"})).then(function(p){var y=[],v=[],b=u?[]:null,x=g?h:[];if(!g)for(var w=0;w<f;++w){var k=p[w],_={value:K(k),primKey:t[d+w]};!1!==o.call(_,_.value,_)&&(null==_.value?x.push(t[d+w]):u||0===Rt(l(k),l(_.value))?(v.push(_.value),u&&b.push(t[d+w])):(x.push(t[d+w]),y.push(_.value)))}return Promise.resolve(y.length>0&&a.mutate({trans:r,type:"add",values:y}).then(function(e){for(var t in e.failures)x.splice(parseInt(t),1);m(y.length,e)})).then(function(){return(v.length>0||i&&"object"==typeof e)&&a.mutate({trans:r,type:"put",keys:b,values:v,criteria:i,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:d>0}).then(function(e){return m(v.length,e)})}).then(function(){return(x.length>0||i&&g)&&a.mutate({trans:r,type:"delete",keys:x,criteria:i,isAdditionalChunk:d>0}).then(function(e){return qt(n.table,x,e)}).then(function(e){return m(x.length,e)})}).then(function(){return t.length>d+f&&s(d+c)})})};return s(0).then(function(){if(f.length>0)throw new Y("Error modifying one or more objects",f,h,p);return t.length})})})},e.prototype.delete=function(){var e=this._ctx,t=e.range;return!zt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Jt):this._write(function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(function(e){var n=e.failures,r=e.numFailures;if(r)throw new Y("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-r);return t-r})})})},e}(),Jt=function(e,t){return t.value=null};function Zt(e){return Nt(Xt.prototype,function(t,n){this.db=e;var r=Et,o=null;if(n)try{r=n()}catch(e){o=e}var i=t._ctx,a=i.table,s=a.hook.reading.fire;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:i.or,valueMapper:s!==oe?s:null}})}function en(e,t){return e<t?-1:e===t?0:1}function tn(e,t){return e>t?-1:e===t?0:1}function nn(e,t,n){var r=e instanceof dn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function rn(e){return new e.Collection(e,function(){return cn("")}).limit(0)}function on(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function an(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function sn(e,t,n,r,o,i){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var l=t[u];if(l!==r[u])return o(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):o(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;o(e[u],l)<0&&(s=u)}return a<r.length&&"next"===i?e+n.substr(e.length):a<e.length&&"prev"===i?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function un(e,t,n,r){var o,i,a,s,u,l,c,d=n.length;if(!n.every(function(e){return"string"==typeof e}))return nn(e,kt);function f(e){o=on(e),i=an(e),a="next"===e?en:tn;var t=n.map(function(e){return{lower:i(e),upper:o(e)}}).sort(function(e,t){return a(e.lower,t.lower)});s=t.map(function(e){return e.upper}),u=t.map(function(e){return e.lower}),l=e,c="next"===e?"":r}f("next");var h=new e.Collection(e,function(){return ln(s[0],u[d-1]+r)});h._ondirectionchange=function(e){f(e)};var p=0;return h._addAlgorithm(function(e,n,r){var o=e.key;if("string"!=typeof o)return!1;var f=i(o);if(t(f,u,p))return!0;for(var h=null,m=p;m<d;++m){var g=sn(o,f,s[m],u[m],a,l);null===g&&null===h?p=m+1:(null===h||a(h,g)>0)&&(h=g)}return n(null!==h?function(){e.continue(h+c)}:r),!1}),h}function ln(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function cn(e){return{type:1,lower:e,upper:e}}var dn=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?rn(this):new this.Collection(this,function(){return ln(e,t,!n,!r)})}catch(e){return nn(this,wt)}},e.prototype.equals=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return cn(e)})},e.prototype.above=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return ln(e,void 0,!0)})},e.prototype.aboveOrEqual=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return ln(e,void 0,!1)})},e.prototype.below=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return ln(void 0,e,!1,!0)})},e.prototype.belowOrEqual=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return ln(void 0,e)})},e.prototype.startsWith=function(e){return"string"!=typeof e?nn(this,kt):this.between(e,e+bt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):un(this,function(e,t){return 0===e.indexOf(t[0])},[e],bt)},e.prototype.equalsIgnoreCase=function(e){return un(this,function(e,t){return e===t[0]},[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=L.apply(N,arguments);return 0===e.length?rn(this):un(this,function(e,t){return-1!==t.indexOf(e)},e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=L.apply(N,arguments);return 0===e.length?rn(this):un(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,bt)},e.prototype.anyOf=function(){var e=this,t=L.apply(N,arguments),n=this._cmp;try{t.sort(n)}catch(e){return nn(this,wt)}if(0===t.length)return rn(this);var r=new this.Collection(this,function(){return ln(t[0],t[t.length-1])});r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm(function(e,r,i){for(var a=e.key;n(a,t[o])>0;)if(++o===t.length)return r(i),!1;return 0===n(a,t[o])||(r(function(){e.continue(t[o])}),!1)}),r},e.prototype.notEqual=function(e){return this.inAnyRange([[xt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=L.apply(N,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return nn(this,wt)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[xt,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,o=this._ascending,i=this._descending,a=this._min,s=this._max;if(0===e.length)return rn(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&o(e[0],e[1])<=0}))return nn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Z.InvalidArgument);var u=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers;function c(e,t){for(var n=0,o=e.length;n<o;++n){var i=e[n];if(r(t[0],i[1])<0&&r(t[1],i[0])>0){i[0]=a(i[0],t[0]),i[1]=s(i[1],t[1]);break}}return n===o&&e.push(t),e}var d,f=o;function h(e,t){return f(e[0],t[0])}try{(d=e.reduce(c,[])).sort(h)}catch(e){return nn(this,wt)}var p=0,m=l?function(e){return o(e,d[p][1])>0}:function(e){return o(e,d[p][1])>=0},g=u?function(e){return i(e,d[p][0])>0}:function(e){return i(e,d[p][0])>=0};function y(e){return!m(e)&&!g(e)}var v=m,b=new this.Collection(this,function(){return ln(d[0][0],d[d.length-1][1],!u,!l)});return b._ondirectionchange=function(e){"next"===e?(v=m,f=o):(v=g,f=i),d.sort(h)},b._addAlgorithm(function(e,t,r){for(var i=e.key;v(i);)if(++p===d.length)return t(r),!1;return!!y(i)||(0===n._cmp(i,d[p][1])||0===n._cmp(i,d[p][0])||t(function(){f===o?e.continue(d[p][0]):e.continue(d[p][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var e=L.apply(N,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?rn(this):this.inAnyRange(e.map(function(e){return[e,e+bt]})):nn(this,"startsWithAnyOf() only works with strings")},e}();function fn(e){return Nt(dn.prototype,function(t,n,r){if(this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r},this._cmp=this._ascending=Rt,this._descending=function(e,t){return Rt(t,e)},this._max=function(e,t){return Rt(e,t)>0?e:t},this._min=function(e,t){return Rt(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new Z.MissingAPI})}function hn(e){return Je(function(t){return pn(t),e(t.target.error),!1})}function pn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var mn="storagemutated",gn="x-storagemutated-1",yn=Ft(null,mn),vn=function(){function e(){}return e.prototype._lock=function(){return x(!De.global),++this._reculock,1!==this._reculock||De.global||(De.lockOwnerFor=this),this},e.prototype._unlock=function(){if(x(!De.global),0===--this._reculock)for(De.global||(De.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ht(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&De.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(x(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Z.DatabaseClosed(r);case"MissingAPIError":throw new Z.MissingAPI(r.message,r);default:throw new Z.OpenFailed(r)}if(!this.active)throw new Z.TransactionInactive;return x(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Je(function(n){pn(n),t._reject(e.error)}),e.onabort=Je(function(n){pn(n),t.active&&t._reject(new Z.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Je(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&yn.storagemutated.fire(e.mutatedParts)}),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return gt(new Z.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new Z.TransactionInactive);if(this._locked())return new qe(function(o,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,i)},De])});if(n)return it(function(){var e=new qe(function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var o=new qe(function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=qe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return n});else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var o=t._waitingFor;return new qe(function(e,r){n.then(function(n){return t._waitingQueue.push(Je(e.bind(null,n)))},function(e){return t._waitingQueue.push(Je(r.bind(null,e)))}).finally(function(){t._waitingFor===o&&(t._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Z.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var n=this.schema[e];if(!n)throw new Z.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function bn(e){return Nt(vn.prototype,function(t,n,r,o,i){var a=this;"readonly"!==t&&n.forEach(function(e){var t,o=null===(t=r[e])||void 0===t?void 0:t.yProps;o&&(n=n.concat(o.map(function(e){return e.updatesTable})))}),this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Ft(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new qe(function(e,t){a._resolve=e,a._reject=t}),this._completion.then(function(){a.active=!1,a.on.complete.fire()},function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),gt(e)})})}function xn(e,t,n,r,o,i,a,s){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(o?"++":"")+wn(t),type:s}}function wn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function kn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:k(n,function(e){return[e.name,e]})}}function _n(e){return 1===e.length?e[0]:e}var Sn=function(e){try{return e.only([[]]),Sn=function(){return[[]]},[[]]}catch(e){return Sn=function(){return bt},bt}};function Pn(e){return null==e?function(){}:"string"==typeof e?An(e):function(t){return _(t,e)}}function An(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return _(t,e)}}function Cn(e){return[].slice.call(e)}var En=0;function Tn(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function On(e,t,n){function r(e,t){var n=Cn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map(function(e){return t.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=a(t),o=null==t,i={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Pn(t)},indexes:Cn(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry,o=e.keyPath,s={name:t,compound:a(o),keyPath:o,unique:n,multiEntry:r,extractKey:Pn(o)};return i[Tn(o)]=s,s}),getIndexByKeyPath:function(e){return i[Tn(e)]}};return i[":id"]=s.primaryKey,null!=t&&(i[Tn(t)]=s.primaryKey),s})},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,o=e.lowerOpen,i=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!o):t.bound(n,r,!!o,!!i)}function i(e){var t=e.name;function n(e){var n=e.trans,r=e.type,i=e.keys,a=e.values,s=e.range;return new Promise(function(e,u){e=Je(e);var l=n.objectStore(t),c=null==l.keyPath,d="put"===r||"add"===r;if(!d&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var f,h=(i||a||{length:1}).length;if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var p=[],m=[],g=0,y=function(e){++g,pn(e)};if("deleteRange"===r){if(4===s.type)return e({numFailures:g,failures:m,results:[],lastResult:void 0});3===s.type?p.push(f=l.clear()):p.push(f=l.delete(o(s)))}else{var v=d?c?[a,i]:[a,null]:[i,null],b=v[0],x=v[1];if(d)for(var w=0;w<h;++w)p.push(f=x&&void 0!==x[w]?l[r](b[w],x[w]):l[r](b[w])),f.onerror=y;else for(w=0;w<h;++w)p.push(f=l[r](b[w])),f.onerror=y}var k=function(t){var n=t.target.result;p.forEach(function(e,t){return null!=e.error&&(m[t]=e.error)}),e({numFailures:g,failures:m,results:"delete"===r?i:p.map(function(e){return e.result}),lastResult:n})};f.onerror=function(e){y(e),k(e)},f.onsuccess=k})}function r(e){var n=e.trans,r=e.values,i=e.query,a=e.reverse,s=e.unique;return new Promise(function(e,u){e=Je(e);var l=i.index,c=i.range,d=n.objectStore(t),f=l.isPrimaryKey?d:d.index(l.name),h=a?s?"prevunique":"prev":s?"nextunique":"next",p=r||!("openKeyCursor"in f)?f.openCursor(o(c),h):f.openKeyCursor(o(c),h);p.onerror=hn(u),p.onsuccess=Je(function(t){var r=p.result;if(r){r.___id=++En,r.done=!1;var o=r.continue.bind(r),i=r.continuePrimaryKey;i&&(i=i.bind(r));var a=r.advance.bind(r),s=function(){throw new Error("Cursor not started")},l=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=s,r.fail=Je(u),r.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},r.start=function(e){var t=new Promise(function(e,t){e=Je(e),p.onerror=hn(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=l,e(t)}}),n=function(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Je(function(e){p.onsuccess=n,n()}),r.continue=o,r.continuePrimaryKey=i,r.advance=a,n(),t},e(r)}else e(null)},u)})}function i(e){return function(n){return new Promise(function(r,i){r=Je(r);var a=n.trans,s=n.values,u=n.limit,l=n.query,c=u===1/0?void 0:u,d=l.index,f=l.range,h=a.objectStore(t),p=d.isPrimaryKey?h:h.index(d.name),m=o(f);if(0===u)return r({result:[]});if(e){var g=s?p.getAll(m,c):p.getAllKeys(m,c);g.onsuccess=function(e){return r({result:e.target.result})},g.onerror=hn(i)}else{var y=0,v=s||!("openKeyCursor"in p)?p.openCursor(m):p.openKeyCursor(m),b=[];v.onsuccess=function(e){var t=v.result;return t?(b.push(s?t.value:t.primaryKey),++y===u?r({result:b}):void t.continue()):r({result:b})},v.onerror=hn(i)}})}}return{name:t,schema:e,mutate:n,getMany:function(e){var n=e.trans,r=e.keys;return new Promise(function(e,o){e=Je(e);for(var i,a=n.objectStore(t),s=r.length,u=new Array(s),l=0,c=0,d=function(t){var n=t.target;u[n._pos]=n.result,++c===l&&e(u)},f=hn(o),h=0;h<s;++h)null!=r[h]&&((i=a.get(r[h]))._pos=h,i.onsuccess=d,i.onerror=f,++l);0===l&&e(u)})},get:function(e){var n=e.trans,r=e.key;return new Promise(function(e,o){e=Je(e);var i=n.objectStore(t).get(r);i.onsuccess=function(t){return e(t.target.result)},i.onerror=hn(o)})},query:i(l),openCursor:r,count:function(e){var n=e.query,r=e.trans,i=n.index,a=n.range;return new Promise(function(e,n){var s=r.objectStore(t),u=i.isPrimaryKey?s:s.index(i.name),l=o(a),c=l?u.count(l):u.count();c.onsuccess=Je(function(t){return e(t.target.result)}),c.onerror=hn(n)})}}}var s=r(e,n),u=s.schema,l=s.hasGetAll,c=u.tables.map(function(e){return i(e)}),d={};return c.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Sn(t),schema:u}}function Rn(e,t){return t.reduce(function(e,t){var r=t.create;return n(n({},e),r(e))},e)}function Dn(e,t,n,r){var o=n.IDBKeyRange;return n.indexedDB,{dbcore:Rn(On(t,o,r),e.dbcore)}}function jn(e,t){var n=t.db,r=Dn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function Kn(e,t,n,r){n.forEach(function(n){var o=r[n];t.forEach(function(t){var r=g(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?h(t,n,{get:function(){return this.table(n)},set:function(e){f(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))})})}function In(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function qn(e,t){return e._cfg.version-t._cfg.version}function Mn(e,t,n,r){var o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=kn("$meta",Gn("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,o);a.create(n),a._completion.catch(r);var s=a._reject.bind(a),u=De.transless||De;it(function(){if(De.trans=a,De.transless=u,0!==t)return jn(e,n),Bn(e,a,t).then(function(t){return Fn(e,t,a,n)}).catch(s);i(o).forEach(function(e){Ln(n,e,o[e].primKey,o[e].indexes)}),jn(e,n),qe.follow(function(){return e.on.populate.fire(a)}).catch(s)})}function $n(e,t){zn(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Hn(e,e.idbdb,t);Yn(e,e._dbSchema,t);for(var r=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){he&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),Un(n,t)})},o=0,i=Nn(n,e._dbSchema).change;o<i.length;o++){var a=r(i[o]);if("object"==typeof a)return a.value}}function Bn(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(e){return null!=e?e:n}):qe.resolve(n)}function Fn(e,t,n,r){var o=[],a=e._versions,s=e._dbSchema=Hn(e,e.idbdb,r),u=a.filter(function(e){return e._cfg.version>=t});if(0===u.length)return qe.resolve();function l(){return o.length?qe.resolve(o.shift()(n.idbtrans)).then(l):qe.resolve()}return u.forEach(function(a){o.push(function(){var o=s,u=a._cfg.dbschema;Yn(e,o,r),Yn(e,u,r),s=e._dbSchema=u;var l=Nn(o,u);l.add.forEach(function(e){Ln(r,e[0],e[1].primKey,e[1].indexes)}),l.change.forEach(function(e){if(e.recreate)throw new Z.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach(function(e){return Un(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),Un(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=a._cfg.contentUpgrade;if(c&&a._cfg.version>t){jn(e,r),n._memoizedTables={};var d=A(u);l.del.forEach(function(e){d[e]=o[e]}),In(e,[e.Transaction.prototype]),Kn(e,[e.Transaction.prototype],i(d),d),n.schema=d;var f,h=z(c);h&&at();var p=qe.follow(function(){if((f=c(n))&&h){var e=st.bind(null,null);f.then(e,e)}});return f&&"function"==typeof f.then?qe.resolve(f):p.then(function(){return f})}}),o.push(function(t){Qn(a._cfg.dbschema,t),In(e,[e.Transaction.prototype]),Kn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),o.push(function(t){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===a._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(a._cfg.version,"version"))})}),l().then(function(){zn(s,r)})}function Nn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var o=e[n],i=t[n];if(o){var a={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto)a.recreate=!0,r.change.push(a);else{var s=o.idxByName,u=i.idxByName,l=void 0;for(l in s)u[l]||a.del.push(l);for(l in u){var c=s[l],d=u[l];c?c.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,i])}return r}function Ln(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return Un(o,e)}),o}function zn(e,t){i(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(he&&console.debug("Dexie: Creating missing table",n),Ln(t,n,e[n].primKey,e[n].indexes))})}function Qn(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return null==e[n]&&t.db.deleteObjectStore(n)})}function Un(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Hn(e,t,n){var r={};return v(t.objectStoreNames,0).forEach(function(e){for(var t=n.objectStore(e),o=t.keyPath,i=xn(wn(o),o||"",!0,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),a=[],s=0;s<t.indexNames.length;++s){var u=t.index(t.indexNames[s]);o=u.keyPath;var l=xn(u.name,o,!!u.unique,!!u.multiEntry,!1,o&&"string"!=typeof o,!1);a.push(l)}r[e]=kn(e,i,a)}),r}function Vn(e,t,n){e.verno=t.version/10;var r=e._dbSchema=Hn(e,t,n);e._storeNames=v(t.objectStoreNames,0),Kn(e,[e._allTables],i(r),r)}function Wn(e,t){var n=Nn(Hn(e,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some(function(e){return e.add.length||e.change.length}))}function Yn(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],s=n.objectStore(a);e._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var l=s.indexNames[u],c=s.index(l).keyPath,d="string"==typeof c?c:"["+v(c).join("+")+"]";if(t[a]){var f=t[a].idxByName[d];f&&(f.name=l,delete t[a].idxByName[d],t[a].idxByName[l]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Gn(e){return e.split(",").map(function(e,t){var n,r=e.split(":"),o=null===(n=r[1])||void 0===n?void 0:n.trim(),i=(e=r[0].trim()).replace(/([&*]|\+\+)/g,""),s=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return xn(i,s||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(s),0===t,o)})}var Xn,Jn=function(){function e(){}return e.prototype._createTableSchema=function(e,t,n){return kn(e,t,n)},e.prototype._parseIndexSyntax=function(e){return Gn(e)},e.prototype._parseStoresSpec=function(e,t){var n=this;i(e).forEach(function(r){if(null!==e[r]){var o=n._parseIndexSyntax(e[r]),i=o.shift();if(!i)throw new Z.Schema("Invalid schema for table "+r+": "+e[r]);if(i.unique=!0,i.multi)throw new Z.Schema("Primary key cannot be multiEntry*");o.forEach(function(e){if(e.auto)throw new Z.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Z.Schema("Index must have a name and cannot be an empty string")});var a=n._createTableSchema(r,i,o);t[r]=a}})},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;var n=t._versions,r={},o={};return n.forEach(function(e){s(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)}),t._dbSchema=o,In(t,[t._allTables,t,t.Transaction.prototype]),Kn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(o),o),t._storeNames=i(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=fe(this._cfg.contentUpgrade||re,e),this},e}();function Zn(e){return Nt(Jn.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function er(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new to(St,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function tr(e){return e&&"function"==typeof e.databases}function nr(e){var t=e.indexedDB,n=e.IDBKeyRange;return tr(t)?Promise.resolve(t.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==St})}):er(t,n).toCollection().primaryKeys()}function rr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!tr(n)&&t!==St&&er(n,r).put({name:t}).catch(re)}function or(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!tr(n)&&t!==St&&er(n,r).delete(t).catch(re)}function ir(e){return it(function(){return De.letThrough=!0,e()})}function ar(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function sr(e){return!("from"in e)}var ur=function(e,t){if(!this){var n=new ur;return e&&"d"in e&&s(n,e),n}s(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function lr(e,t,n){var r=Rt(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(sr(e))return s(e,{from:t,to:n,d:1});var o=e.l,i=e.r;if(Rt(n,e.from)<0)return o?lr(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},hr(e);if(Rt(t,e.to)>0)return i?lr(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},hr(e);Rt(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),Rt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;o&&!e.l&&cr(e,o),i&&a&&cr(e,i)}}function cr(e,t){function n(e,t){var r=t.from,o=t.to,i=t.l,a=t.r;lr(e,r,o),i&&n(e,i),a&&n(e,a)}sr(t)||n(e,t)}function dr(e,t){var n=fr(t),r=n.next();if(r.done)return!1;for(var o=r.value,i=fr(e),a=i.next(o.from),s=a.value;!r.done&&!a.done;){if(Rt(s.from,o.to)<=0&&Rt(s.to,o.from)>=0)return!0;Rt(o.from,s.from)<0?o=(r=n.next(s.from)).value:s=(a=i.next(o.from)).value}return!1}function fr(e){var t=sr(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Rt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Rt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function hr(e){var t,r,o=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),i=o>1?"r":o<-1?"l":"";if(i){var a="r"===i?"l":"r",s=n({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],s[i]=u[a],e[a]=s,s.d=pr(s)}e.d=pr(e)}function pr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function mr(e,t){return i(t).forEach(function(n){e[n]?cr(e[n],t[n]):e[n]=R(t[n])}),e}function gr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&dr(t[n],e[n])})}d(ur.prototype,((Xn={add:function(e){return cr(this,e),this},addKey:function(e){return lr(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return lr(t,e,e)}),this},hasKey:function(e){var t=fr(this).next(e).value;return t&&Rt(t.from,e)<=0&&Rt(t.to,e)>=0}})[$]=function(){return fr(this)},Xn));var yr={},vr={},br=!1;function xr(e,t){mr(vr,e),br||(br=!0,setTimeout(function(){br=!1;var e=vr;vr={},wr(e,!1)},0))}function wr(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,o=Object.values(yr);r<o.length;r++)kr(s=o[r],e,n,t);else for(var i in e){var a=/^idb\:\/\/(.*)\/(.*)\//.exec(i);if(a){var s,u=a[1],l=a[2];(s=yr["idb://".concat(u,"/").concat(l)])&&kr(s,e,n,t)}}n.forEach(function(e){return e()})}function kr(e,t,n,r){for(var o=[],i=0,a=Object.entries(e.queries.query);i<a.length;i++){for(var s=a[i],u=s[0],l=[],c=0,d=s[1];c<d.length;c++){var f=d[c];gr(t,f.obsSet)?f.subscribers.forEach(function(e){return n.add(e)}):r&&l.push(f)}r&&o.push([u,l])}if(r)for(var h=0,p=o;h<p.length;h++){var m=p[h];u=m[0],l=m[1],e.queries.query[u]=l}}function _r(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?gt(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,o=Math.round(10*e.verno),i=!1;function a(){if(t.openCanceller!==r)throw new Z.DatabaseClosed("db.open() was cancelled")}var s=t.dbReadyResolve,u=null,l=!1,c=function(){return new qe(function(r,s){if(a(),!n)throw new Z.MissingAPI;var d=e.name,f=t.autoSchema||!o?n.open(d):n.open(d,o);if(!f)throw new Z.MissingAPI;f.onerror=hn(s),f.onblocked=Je(e._fireOnBlocked),f.onupgradeneeded=Je(function(r){if(u=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=pn,u.abort(),f.result.close();var o=n.deleteDatabase(d);o.onsuccess=o.onerror=Je(function(){s(new Z.NoSuchDatabase("Database ".concat(d," doesnt exist")))})}else{u.onerror=hn(s);var a=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;l=a<1,e.idbdb=f.result,i&&$n(e,u),Mn(e,a/10,u,s)}},s),f.onsuccess=Je(function(){u=null;var n=e.idbdb=f.result,a=v(n.objectStoreNames);if(a.length>0)try{var s=n.transaction(_n(a),"readonly");if(t.autoSchema)Vn(e,n,s);else if(Yn(e,e._dbSchema,s),!Wn(e,s)&&!i)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),n.close(),o=n.version+1,i=!0,r(c());jn(e,s)}catch(e){}_t.push(e),n.onversionchange=Je(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),n.onclose=Je(function(){e.close({disableAutoOpen:!1})}),l&&rr(e._deps,d),r()},s)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c();break;case"VersionError":if(o>0)return o=0,c()}return qe.reject(e)})};return qe.race([r,("undefined"==typeof navigator?qe.resolve():ar()).then(c)]).then(function(){return a(),t.onReadyBeingFired=[],qe.resolve(ir(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(fe,re);return t.onReadyBeingFired=[],qe.resolve(ir(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{u&&u.abort()}catch(e){}return r===t.openCanceller&&e._close(),gt(n)}).finally(function(){t.openComplete=!0,s()}).then(function(){if(l){var t={};e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new ur(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new ur(-1/0,[[[]]])}),yn(mn).fire(t),wr(t,!0)}return e})}function Sr(e){var t=function(t){return e.next(t)},n=function(t){return e.throw(t)},r=i(t),o=i(n);function i(e){return function(t){var n=e(t),i=n.value;return n.done?i:i&&"function"==typeof i.then?i.then(r,o):a(i)?Promise.all(i).then(r,o):r(i)}}return i(t)()}function Pr(e,t,n){var r=arguments.length;if(r<2)throw new Z.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[e,E(o),n]}function Ar(e,t,n,r,o){return qe.resolve().then(function(){var i=De.transless||De,a=e._createTransaction(t,n,e._dbSchema,r);a.explicit=!0;var s={trans:a,transless:i};if(r)a.idbtrans=r.idbtrans;else try{a.create(),a.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(r){return r.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Ar(e,t,n,null,o)})):gt(r)}var u,l=z(o);l&&at();var c=qe.follow(function(){if(u=o.call(a,a))if(l){var e=st.bind(null,null);u.then(e,e)}else"function"==typeof u.next&&"function"==typeof u.throw&&(u=Sr(u))},s);return(u&&"function"==typeof u.then?qe.resolve(u).then(function(e){return a.active?e:gt(new Z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return u})).then(function(e){return r&&a._resolve(),a._completion.then(function(){return e})}).catch(function(e){return a._reject(e),gt(e)})})}function Cr(e,t,n){for(var r=a(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}function Er(e){return n(n({},e),{table:function(t){var r=e.table(t),o=r.schema,i={},a=[];function s(e,t,r){var o=Tn(e),u=i[o]=i[o]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,d=n(n({},r),{name:c?"".concat(o,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:c,keyTail:t,keyLength:l,extractKey:Pn(e),unique:!c&&r.unique});return u.push(d),d.isPrimaryKey||a.push(d),l>1&&s(2===l?e[0]:e.slice(0,l-1),t+1,r),u.sort(function(e,t){return e.keyTail-t.keyTail}),d}var u=s(o.primaryKey.keyPath,0,o.primaryKey);i[":id"]=[u];for(var l=0,c=o.indexes;l<c.length;l++){var d=c[l];s(d.keyPath,0,d)}function f(e){var t=i[Tn(e)];return t&&t[0]}function h(t,n){return{type:1===t.type?2:t.type,lower:Cr(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,n),lowerOpen:!0,upper:Cr(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,n),upperOpen:!0}}function p(e){var t=e.query.index;return t.isVirtual?n(n({},e),{query:{index:t.lowLevelIndex,range:h(e.query.range,t.keyTail)}}):e}var m=n(n({},r),{schema:n(n({},o),{primaryKey:u,indexes:a,getIndexByKeyPath:f}),count:function(e){return r.count(p(e))},query:function(e){return r.query(p(e))},openCursor:function(t){var n=t.query.index,o=n.keyTail,i=n.isVirtual,a=n.keyLength;if(!i)return r.openCursor(t);function s(n){function r(r){null!=r?n.continue(Cr(r,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):n.continue()}var i=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Cr(t,e.MAX_KEY,o),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}});return i}return r.openCursor(p(t)).then(function(e){return e&&s(e)})}});return m}})}var Tr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Er};function Or(e,t,n,r){return n=n||{},r=r||"",i(e).forEach(function(o){if(c(t,o)){var i=e[o],a=t[o];if("object"==typeof i&&"object"==typeof a&&i&&a){var s=M(i);s!==M(a)?n[r+o]=t[o]:"Object"===s?Or(i,a,n,r+o+"."):i!==a&&(n[r+o]=t[o])}else i!==a&&(n[r+o]=t[o])}else n[r+o]=void 0}),i(t).forEach(function(o){c(e,o)||(n[r+o]=t[o])}),n}function Rr(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Dr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return n(n({},e),{table:function(t){var o=e.table(t),i=o.schema.primaryKey,a=n(n({},o),{mutate:function(e){var a=De.trans,s=a.table(t).hook,u=s.deleting,l=s.creating,d=s.updating;switch(e.type){case"add":if(l.fire===re)break;return a._promise("readwrite",function(){return f(e)},!0);case"put":if(l.fire===re&&d.fire===re)break;return a._promise("readwrite",function(){return f(e)},!0);case"delete":if(u.fire===re)break;return a._promise("readwrite",function(){return f(e)},!0);case"deleteRange":if(u.fire===re)break;return a._promise("readwrite",function(){return h(e)},!0)}return o.mutate(e);function f(e){var t=De.trans,a=e.keys||Rr(i,e);if(!a)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?n(n({},e),{keys:a}):n({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),jr(o,e,a).then(function(n){var r=a.map(function(r,o){var a=n[o],s={onerror:null,onsuccess:null};if("delete"===e.type)u.fire.call(s,r,a,t);else if("add"===e.type||void 0===a){var f=l.fire.call(s,r,e.values[o],t);null==r&&null!=f&&(r=f,e.keys[o]=r,i.outbound||S(e.values[o],i.keyPath,r))}else{var h=Or(a,e.values[o]),p=d.fire.call(s,h,r,a,t);if(p){var m=e.values[o];Object.keys(p).forEach(function(e){c(m,e)?m[e]=p[e]:S(m,e,p[e])})}}return s});return o.mutate(e).then(function(t){for(var o=t.failures,i=t.results,s=t.numFailures,u=t.lastResult,l=0;l<a.length;++l){var c=i?i[l]:a[l],d=r[l];null==c?d.onerror&&d.onerror(o[l]):d.onsuccess&&d.onsuccess("put"===e.type&&n[l]?e.values[l]:c)}return{failures:o,results:i,numFailures:s,lastResult:u}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}function h(e){return p(e.trans,e.range,1e4)}function p(e,t,r){return o.query({trans:e,values:!1,query:{index:i,range:t},limit:r}).then(function(o){var i=o.result;return f({type:"delete",keys:i,trans:e}).then(function(o){return o.numFailures>0?Promise.reject(o.failures[0]):i.length<r?{failures:[],numFailures:0,lastResult:void 0}:p(e,n(n({},t),{lower:i[i.length-1],lowerOpen:!0}),r)})})}}});return a}})}};function jr(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Kr(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],o=0,i=0;o<t.keys.length&&i<e.length;++o)0===Rt(t.keys[o],e[i])&&(r.push(n?K(t.values[o]):t.values[o]),++i);return r.length===e.length?r:null}catch(e){return null}}var Ir={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var r=e.table(t);return n(n({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=Kr(e.keys,e.trans._cache,"clone"===e.cache);return t?qe.resolve(t):r.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?K(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function qr(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Mr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var $r={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,r=new ur(e.MIN_KEY,e.MAX_KEY);return n(n({},e),{transaction:function(t,n,r){if(De.subscr&&"readonly"!==n)throw new Z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(De.querier));return e.transaction(t,n,r)},table:function(o){var s=e.table(o),u=s.schema,l=u.primaryKey,c=u.indexes,d=l.extractKey,f=l.outbound,h=l.autoIncrement&&c.filter(function(e){return e.compound&&e.keyPath.includes(l.keyPath)}),p=n(n({},s),{mutate:function(n){var i,c,d=n.trans,f=n.mutatedParts||(n.mutatedParts={}),p=function(e){var n="idb://".concat(t,"/").concat(o,"/").concat(e);return f[n]||(f[n]=new ur)},m=p(""),g=p(":dels"),y=n.type,v="deleteRange"===n.type?[n.range]:"delete"===n.type?[n.keys]:n.values.length<50?[Rr(l,n).filter(function(e){return e}),n.values]:[],b=v[0],x=v[1],w=n.trans._cache;if(a(b)){m.addKeys(b);var k="delete"===y||b.length===x.length?Kr(b,w):null;k||g.addKeys(b),(k||x)&&Br(p,u,k,x)}else if(b){var _={from:null!==(i=b.lower)&&void 0!==i?i:e.MIN_KEY,to:null!==(c=b.upper)&&void 0!==c?c:e.MAX_KEY};g.add(_),m.add(_)}else m.add(r),g.add(r),u.indexes.forEach(function(e){return p(e.name).add(r)});return s.mutate(n).then(function(e){return!b||"add"!==n.type&&"put"!==n.type||(m.addKeys(e.results),h&&h.forEach(function(t){for(var r=n.values.map(function(e){return t.extractKey(e)}),o=t.keyPath.findIndex(function(e){return e===l.keyPath}),i=0,a=e.results.length;i<a;++i)r[i][o]=e.results[i];p(t.name).addKeys(r)})),d.mutatedParts=mr(d.mutatedParts||{},f),e})}}),m=function(t){var n,r,o=t.query,i=o.index,a=o.range;return[i,new ur(null!==(n=a.lower)&&void 0!==n?n:e.MIN_KEY,null!==(r=a.upper)&&void 0!==r?r:e.MAX_KEY)]},g={get:function(e){return[l,new ur(e.key)]},getMany:function(e){return[l,(new ur).addKeys(e.keys)]},count:m,query:m,openCursor:m};return i(g).forEach(function(e){p[e]=function(i){var a=De.subscr,u=!!a,l=qr(De,s)&&Mr(e,i)?i.obsSet={}:a;if(u){var c=function(e){var n="idb://".concat(t,"/").concat(o,"/").concat(e);return l[n]||(l[n]=new ur)},h=c(""),p=c(":dels"),m=g[e](i),y=m[0],v=m[1];if("query"===e&&y.isPrimaryKey&&!i.values?p.add(v):c(y.name||"").add(v),!y.isPrimaryKey){if("count"!==e){var b="query"===e&&f&&i.values&&s.query(n(n({},i),{values:!1}));return s[e].apply(this,arguments).then(function(t){if("query"===e){if(f&&i.values)return b.then(function(e){var n=e.result;return h.addKeys(n),t});var n=i.values?t.result.map(d):t.result;i.values?h.addKeys(n):p.addKeys(n)}else if("openCursor"===e){var r=t,o=i.values;return r&&Object.create(r,{key:{get:function(){return p.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return p.addKey(e),e}},value:{get:function(){return o&&h.addKey(r.primaryKey),r.value}}})}return t})}p.add(r)}}return s[e].apply(this,arguments)}}),p}})}};function Br(e,t,n,r){function o(t){var o=e(t.name||"");function i(e){return null!=e?t.extractKey(e):null}var s=function(e){return t.multiEntry&&a(e)?e.forEach(function(e){return o.addKey(e)}):o.addKey(e)};(n||r).forEach(function(e,t){var o=n&&i(n[t]),a=r&&i(r[t]);0!==Rt(o,a)&&(null!=o&&s(o),null!=a&&s(a))})}t.indexes.forEach(o)}function Fr(e,t,r){if(0===r.numFailures)return t;if("deleteRange"===t.type)return null;var o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(r.numFailures===o)return null;var i=n({},t);return a(i.keys)&&(i.keys=i.keys.filter(function(e,t){return!(t in r.failures)})),"values"in i&&a(i.values)&&(i.values=i.values.filter(function(e,t){return!(t in r.failures)})),i}function Nr(e,t){return void 0===t.lower||(t.lowerOpen?Rt(e,t.lower)>0:Rt(e,t.lower)>=0)}function Lr(e,t){return void 0===t.upper||(t.upperOpen?Rt(e,t.upper)<0:Rt(e,t.upper)<=0)}function zr(e,t){return Nr(e,t)&&Lr(e,t)}function Qr(e,t,n,r,o,i){if(!n||0===n.length)return e;var s=t.query.index,u=s.multiEntry,l=t.query.range,c=r.schema.primaryKey.extractKey,d=s.extractKey,f=(s.lowLevelIndex||s).extractKey,h=n.reduce(function(e,n){var r=e,o=[];if("add"===n.type||"put"===n.type)for(var i=new ur,s=n.values.length-1;s>=0;--s){var f=n.values[s],h=c(f);if(!i.hasKey(h)){var p=d(f);(u&&a(p)?p.some(function(e){return zr(e,l)}):zr(p,l))&&(i.addKey(h),o.push(f))}}switch(n.type){case"add":var m=(new ur).addKeys(t.values?e.map(function(e){return c(e)}):e);r=e.concat(t.values?o.filter(function(e){var t=c(e);return!m.hasKey(t)&&(m.addKey(t),!0)}):o.map(function(e){return c(e)}).filter(function(e){return!m.hasKey(e)&&(m.addKey(e),!0)}));break;case"put":var g=(new ur).addKeys(n.values.map(function(e){return c(e)}));r=e.filter(function(e){return!g.hasKey(t.values?c(e):e)}).concat(t.values?o:o.map(function(e){return c(e)}));break;case"delete":var y=(new ur).addKeys(n.keys);r=e.filter(function(e){return!y.hasKey(t.values?c(e):e)});break;case"deleteRange":var v=n.range;r=e.filter(function(e){return!zr(c(e),v)})}return r},e);return h===e?e:(h.sort(function(e,t){return Rt(f(e),f(t))||Rt(c(e),c(t))}),t.limit&&t.limit<1/0&&(h.length>t.limit?h.length=t.limit:e.length===t.limit&&h.length<t.limit&&(o.dirty=!0)),i?Object.freeze(h):h)}function Ur(e,t){return 0===Rt(e.lower,t.lower)&&0===Rt(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Hr(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;var o=Rt(e,t);if(0===o){if(n&&r)return 0;if(n)return 1;if(r)return-1}return o}function Vr(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;var o=Rt(e,t);if(0===o){if(n&&r)return 0;if(n)return-1;if(r)return 1}return o}function Wr(e,t){return Hr(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&Vr(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function Yr(e,t,n,r){var o=yr["idb://".concat(e,"/").concat(t)];if(!o)return[];var i=o.queries[n];if(!i)return[null,!1,o,null];var a=i[(r.query?r.query.index.name:null)||""];if(!a)return[null,!1,o,null];switch(n){case"query":var s=a.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Ur(e.req.query.range,r.query.range)});return s?[s,!0,o,a]:[a.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Wr(e.req.query.range,r.query.range)}),!1,o,a];case"count":var u=a.find(function(e){return Ur(e.req.query.range,r.query.range)});return[u,!!u,o,a]}}function Gr(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),0===e.subscribers.size&&Xr(e,t)})}function Xr(e,t){setTimeout(function(){0===e.subscribers.size&&F(t,e)},3e3)}var Jr={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,r=n(n({},e),{transaction:function(n,r,o){var i=e.transaction(n,r,o);if("readwrite"===r){var a=new AbortController,s=a.signal,u=function(o){return function(){if(a.abort(),"readwrite"===r){for(var s=new Set,u=0,l=n;u<l.length;u++){var c=l[u],d=yr["idb://".concat(t,"/").concat(c)];if(d){var f=e.table(c),h=d.optimisticOps.filter(function(e){return e.trans===i});if(i._explicit&&o&&i.mutatedParts)for(var p=0,m=Object.values(d.queries.query);p<m.length;p++)for(var g=0,y=(x=m[p]).slice();g<y.length;g++)gr((_=y[g]).obsSet,i.mutatedParts)&&(F(x,_),_.subscribers.forEach(function(e){return s.add(e)}));else if(h.length>0){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==i});for(var v=0,b=Object.values(d.queries.query);v<b.length;v++)for(var x,w=0,k=(x=b[v]).slice();w<k.length;w++){var _;if(null!=(_=k[w]).res&&i.mutatedParts)if(o&&!_.dirty){var S=Object.isFrozen(_.res),P=Qr(_.res,_.req,h,f,_,S);_.dirty?(F(x,_),_.subscribers.forEach(function(e){return s.add(e)})):P!==_.res&&(_.res=P,_.promise=qe.resolve({result:P}))}else _.dirty&&F(x,_),_.subscribers.forEach(function(e){return s.add(e)})}}}}s.forEach(function(e){return e()})}}};i.addEventListener("abort",u(!1),{signal:s}),i.addEventListener("error",u(!1),{signal:s}),i.addEventListener("complete",u(!0),{signal:s})}return i},table:function(r){var o=e.table(r),i=o.schema.primaryKey,a=n(n({},o),{mutate:function(e){var a=De.trans;if(i.outbound||"disabled"===a.db._options.cache||a.explicit||"readwrite"!==a.idbtrans.mode)return o.mutate(e);var s=yr["idb://".concat(t,"/").concat(r)];if(!s)return o.mutate(e);var u=o.mutate(e);return"add"!==e.type&&"put"!==e.type||!(e.values.length>=50||Rr(i,e).some(function(e){return null==e}))?(s.optimisticOps.push(e),e.mutatedParts&&xr(e.mutatedParts),u.then(function(t){if(t.numFailures>0){F(s.optimisticOps,e);var n=Fr(s,e,t);n&&s.optimisticOps.push(n),e.mutatedParts&&xr(e.mutatedParts)}}),u.catch(function(){F(s.optimisticOps,e),e.mutatedParts&&xr(e.mutatedParts)})):u.then(function(t){var r=n(n({},e),{values:e.values.map(function(e,r){var o;if(t.failures[r])return e;var a=(null===(o=i.keyPath)||void 0===o?void 0:o.includes("."))?K(e):n({},e);return S(a,i.keyPath,t.results[r]),a})}),o=Fr(s,r,t);s.optimisticOps.push(o),queueMicrotask(function(){return e.mutatedParts&&xr(e.mutatedParts)})}),u},query:function(e){var n;if(!qr(De,o)||!Mr("query",e))return o.query(e);var i="immutable"===(null===(n=De.trans)||void 0===n?void 0:n.db._options.cache),a=De,s=a.requery,u=a.signal,l=Yr(t,r,"query",e),c=l[0],d=l[1],f=l[2],h=l[3];if(c&&d)c.obsSet=e.obsSet;else{var p=o.query(e).then(function(e){var t=e.result;if(c&&(c.res=t),i){for(var n=0,r=t.length;n<r;++n)Object.freeze(t[n]);Object.freeze(t)}else e.result=K(t);return e}).catch(function(e){return h&&c&&F(h,c),Promise.reject(e)});c={obsSet:e.obsSet,promise:p,subscribers:new Set,type:"query",req:e,dirty:!1},h?h.push(c):(h=[c],f||(f=yr["idb://".concat(t,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),f.queries.query[e.query.index.name||""]=h)}return Gr(c,h,s,u),c.promise.then(function(t){return{result:Qr(t.result,e,null==f?void 0:f.optimisticOps,o,c,i)}})}});return a}});return r}};function Zr(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var eo,to=function(){function e(t,r){var o=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=r=n({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var a=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};s.dbReadyPromise=new qe(function(e){s.dbReadyResolve=e}),s.openCanceller=new qe(function(e,t){s.cancelOpen=t}),this._state=s,this.name=t,this.on=Ft(this,"populate","blocked","versionchange","close",{ready:[fe,re]}),this.once=function(e,t){var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];o.on(e).unsubscribe(n),t.apply(o,r)};return o.on(e,n)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(t){return function(n,r){e.vip(function(){var e=o._state;if(e.openComplete)e.dbOpenError||qe.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var i=o;r||t(function e(){i.on.ready.unsubscribe(n),i.on.ready.unsubscribe(e)})}})}}),this.Collection=Zt(this),this.Table=Lt(this),this.Transaction=bn(this),this.Version=Zn(this),this.WhereClause=fn(this),this.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Sn(r.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new o.Transaction(e,t,n,o._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(e){o.on("blocked").fire(e),_t.filter(function(e){return e.name===o.name&&e!==o&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Ir),this.use(Jr),this.use($r),this.use(Tr),this.use(Dr);var u=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return Zr(o.table(e),u)};var r=Reflect.get(e,t,n);return r instanceof Bt?Zr(r,u):"tables"===t?r.map(function(e){return Zr(e,u)}):"_createTransaction"===t?function(){return Zr(r.apply(this,arguments),u)}:r}});this.vip=u,a.forEach(function(e){return e(o)})}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new Z.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(qn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||De.letThrough||this._vip)?e():new qe(function(e,n){if(t._state.openComplete)return n(new Z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new Z.DatabaseClosed);t.open().catch(re)}t._state.dbReadyPromise.then(e,n)}).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;o&&this.unuse({stack:t,name:o});var i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:null==r?10:r,name:o}),i.sort(function(e,t){return e.level-t.level}),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:!!n&&e.name!==n})),this},e.prototype.open=function(){var e=this;return ht(Re,function(){return _r(e)})},e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=_t.indexOf(this);if(t>=0&&_t.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new qe(function(t){e.dbReadyResolve=t}),e.openCanceller=new qe(function(t,n){e.cancelOpen=n}))},e.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new Z.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new Z.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},e.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=arguments.length>0&&"object"!=typeof arguments[0],r=this._state;return new qe(function(o,i){var a=function(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Je(function(){or(t._deps,t.name),o()}),n.onerror=hn(i),n.onblocked=t._fireOnBlocked};if(n)throw new Z.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return i(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=Pr.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,o=De.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var i,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map(function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),"r"==e||e===Pt)i=Pt;else{if("rw"!=e&&e!=At)throw new Z.InvalidArgument("Invalid transaction mode: "+e);i=At}if(o){if(o.mode===Pt&&i===At){if(!s)throw new Z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&a.forEach(function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!s)throw new Z.SubTransaction("Table "+e+" not included in parent transaction.");o=null}}),s&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,function(t,n){n(e)}):gt(e)}var u=Ar.bind(null,this,i,a,o,n);return o?o._promise(i,u,"lock"):De.trans?ht(De.transless,function(){return r._whenReady(u)}):this._whenReady(u)},e.prototype.table=function(e){if(!c(this._allTables,e))throw new Z.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},e}(),no="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",ro=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},e.prototype[no]=function(){return this},e}();try{eo={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(e){eo={indexedDB:null,IDBKeyRange:null}}function oo(e){var t,n=!1,r=new ro(function(r){var o=z(e);function i(t){var n=Ue();try{o&&at();var r=it(e,t);return o&&(r=r.finally(st)),r}finally{n&&He()}}var a,s=!1,u={},l={},c={get closed(){return s},unsubscribe:function(){s||(s=!0,a&&a.abort(),d&&yn.storagemutated.unsubscribe(p))}};r.start&&r.start(c);var d=!1,f=function(){return mt(m)};function h(){return gr(l,u)}var p=function(e){mr(u,e),h()&&f()},m=function(){if(!s&&eo.indexedDB){u={};var o={};a&&a.abort(),a=new AbortController;var c={subscr:o,signal:a.signal,requery:f,querier:e,trans:null},h=i(c);Promise.resolve(h).then(function(e){n=!0,t=e,s||c.signal.aborted||(u={},D(l=o)||d||(yn(mn,p),d=!0),mt(function(){return!s&&r.next&&r.next(e)}))},function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||s||mt(function(){s||r.error&&r.error(e)})})}};return setTimeout(f,0),c});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var io=to;function ao(e){var t=uo;try{uo=!0,yn.storagemutated.fire(e),wr(e,!0)}finally{uo=t}}d(io,n(n({},ne),{delete:function(e){return new io(e,{addons:[]}).delete()},exists:function(e){return new io(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return nr(io.dependencies).then(e)}catch(e){return gt(new Z.MissingAPI)}},defineClass:function(){function e(e){s(this,e)}return e},ignoreTransaction:function(e){return De.trans?ht(De.transless,e):e()},vip:ir,async:function(e){return function(){try{var t=Sr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:qe.resolve(t)}catch(e){return gt(e)}}},spawn:function(e,t,n){try{var r=Sr(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:qe.resolve(r)}catch(e){return gt(e)}},currentTransaction:{get:function(){return De.trans||null}},waitFor:function(e,t){var n=qe.resolve("function"==typeof e?io.ignoreTransaction(e):e).timeout(t||6e4);return De.trans?De.trans.waitFor(n):n},Promise:qe,debug:{get:function(){return he},set:function(e){pe(e)}},derive:p,extend:s,props:d,override:b,Events:Ft,on:yn,liveQuery:oo,extendObservabilitySet:mr,getByKeyPath:_,setByKeyPath:S,delByKeyPath:P,shallowClone:A,deepClone:K,getObjectDiff:Or,cmp:Rt,asap:w,minKey:xt,addons:[],connections:_t,errnames:X,dependencies:eo,cache:yr,semVer:vt,version:vt.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),io.maxKey=Sn(io.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(yn(mn,function(e){var t;uo||(t=new CustomEvent(gn,{detail:e}),uo=!0,dispatchEvent(t),uo=!1)}),addEventListener(gn,function(e){var t=e.detail;uo||ao(t)}));var so,uo=!1,lo=function(){};function co(e){return new Mt({add:e})}function fo(e){return new Mt({remove:e})}function ho(e,t){return new Mt({replacePrefix:[e,t]})}return"undefined"!=typeof BroadcastChannel&&((lo=function(){(so=new BroadcastChannel(gn)).onmessage=function(e){return e.data&&ao(e.data)}})(),"function"==typeof so.unref&&so.unref(),yn(mn,function(e){uo||so.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!to.disableBfCache&&e.persisted){he&&console.debug("Dexie: handling persisted pagehide"),null==so||so.close();for(var t=0,n=_t;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!to.disableBfCache&&e.persisted&&(he&&console.debug("Dexie: handling persisted pageshow"),lo(),ao({all:new ur(-1/0,[[]])}))})),qe.rejectionMapper=te,pe(he),n(to,Object.freeze({__proto__:null,Dexie:to,liveQuery:oo,Entity:Ot,cmp:Rt,PropModification:Mt,replacePrefix:ho,add:co,remove:fo,default:to,RangeSet:ur,mergeRanges:cr,rangesOverlap:dr}),{default:to}),to}();var le=se(ue.exports);const ce=Symbol.for("Dexie"),de=globalThis[ce]||(globalThis[ce]=le);if(le.semVer!==de.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${le.semVer} and ${de.semVer}`);function fe(e){return{youtube:"YouTube",github:"GitHub",medium:"Medium",devto:"DEV Community",substack:"Substack",twitter:"Twitter/X",reddit:"Reddit",stackoverflow:"Stack Overflow",npm:"npm",other:"Other"}[e]||e}function he(e){return{youtube:"ðŸ“º",github:"ðŸ™",medium:"ðŸ“",devto:"ðŸ‘©â€ðŸ’»",substack:"ðŸ“¨",twitter:"ðŸ¦",reddit:"ðŸ¤–",stackoverflow:"ðŸ“š",npm:"ðŸ“¦",other:"ðŸŒ"}[e]||"ðŸ”—"}function pe(e){return{video:"Video",short:"Short",channel:"Channel",playlist:"Playlist",repo:"Repository",issue:"Issue",pr:"Pull Request",gist:"Gist",file:"File",wiki:"Wiki",article:"Article",profile:"Profile",question:"Question",package:"Package",subreddit:"Subreddit",post:"Post",tweet:"Tweet",home:"Home",search:"Search",page:"Page"}[e]||e}const me=new de("BookmarkInsightsDB");async function ge(){try{return await me.bookmarks.toArray()}catch(e){return console.error("Error getting bookmarks:",e),[]}}me.version(1).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}),me.version(2).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}).upgrade(e=>{console.log("Upgrading database to version 2 - adding rawMetadata support")}),me.version(3).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(e=>{console.log("Upgrading database to version 3 - adding similarities and computedMetrics tables")}),me.version(4).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId, platform, creator, contentType",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(e=>{console.log("Upgrading database to version 4 - adding platformData indexes")}),me.version(5).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId, platform, creator, contentType, publishedDate",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(e=>{console.log("Upgrading database to version 5 - adding deep metadata analysis fields")});const ye=36e5,ve=3e5;async function be(e,t,n){try{const r=await me.computedMetrics.get(e);if(r&&r.validUntil>Date.now())return console.log(`Cache hit for metric: ${e}`),r.data;console.log(`Cache miss for metric: ${e}, computing...`);const o=await t();return await me.computedMetrics.put({key:e,data:o,computedAt:Date.now(),validUntil:Date.now()+n}),o}catch(n){return console.error(`Error getting cached metric ${e}:`,n),t()}}async function xe(){return be("domainAnalytics",async()=>{const e=await ge(),t={};e.forEach(e=>{if(!e.domain)return;t[e.domain]||(t[e.domain]={domain:e.domain,count:0,latestDate:0,oldestDate:1/0,enrichedCount:0});const n=t[e.domain];n.count++,e.lastChecked&&n.enrichedCount++,e.dateAdded>n.latestDate&&(n.latestDate=e.dateAdded),e.dateAdded<n.oldestDate&&(n.oldestDate=e.dateAdded)});const n=Object.values(t),r=e.length;return n.forEach(e=>{e.percentage=r>0?Math.round(e.count/r*100):0,e.dateAdded=e.latestDate}),{byRecency:[...n].sort((e,t)=>t.latestDate-e.latestDate),byCount:[...n].sort((e,t)=>t.count-e.count),top10:[...n].sort((e,t)=>t.count-e.count).slice(0,10),totalDomains:n.length,totalBookmarks:r}},ye)}const we=(()=>{const{subscribe:e,set:t,update:n}=oe({total:0,enriched:0,pending:0,deadLinks:0,duplicates:0,uniqueDomains:0,addedThisWeek:0,addedThisMonth:0,lastUpdated:null,loading:!0});let r=null;return{subscribe:e,async refresh(){try{const e=await ge(),n=Date.now(),r=6048e5,o=2592e6,i=e.length,a=e.filter(e=>e.lastChecked).length,s=e.filter(e=>!1===e.isAlive).length,u=new Set(e.map(e=>e.domain).filter(e=>e)).size,l=e.filter(e=>n-e.dateAdded<r).length,c=e.filter(e=>n-e.dateAdded<o).length,d=await be("quickDuplicateCount",async()=>{const t=new Map;return e.forEach(e=>{const n=e.url.toLowerCase().replace(/\/$/,"");t.has(n)||t.set(n,0),t.set(n,t.get(n)+1)}),Array.from(t.values()).filter(e=>e>1).length},ve);t({total:i,enriched:a,pending:i-a,deadLinks:s,duplicates:d,uniqueDomains:u,addedThisWeek:l,addedThisMonth:c,lastUpdated:Date.now(),loading:!1})}catch(e){console.error("Error refreshing stats:",e),n(e=>({...e,loading:!1}))}},startAutoRefresh(e=3e4){this.refresh(),r||(r=setInterval(()=>this.refresh(),e),console.log("Stats auto-refresh started"))},stopAutoRefresh(){r&&(clearInterval(r),r=null,console.log("Stats auto-refresh stopped"))}}})();ie(we,e=>0===e.total?0:Math.round(e.enriched/e.total*100)),ie(we,e=>e.pending);const ke=function(){const{subscribe:e,set:t,update:n}=oe({domains:[],folders:[],platforms:[],types:[],creators:[],tags:[],deadLinks:!1,stale:!1,dateRange:null,readingTimeRange:null,qualityScoreRange:null,hasPublishedDate:null});return{subscribe:e,set:t,addFilter:(e,t)=>n(n=>{if(!Array.isArray(n[e]))return"boolean"==typeof n[e]?{...n,[e]:t}:{...n,[e]:t};if("creators"===e){if(!n.creators.find(e=>e.key===t.key))return{...n,creators:[...n.creators,t]}}else if(!n[e].includes(t))return{...n,[e]:[...n[e],t]};return n}),removeFilter:(e,t)=>n(n=>Array.isArray(n[e])?"creators"===e?{...n,creators:n.creators.filter(e=>e.key!==t.key)}:{...n,[e]:n[e].filter(e=>e!==t)}:"boolean"==typeof n[e]?{...n,[e]:!1}:{...n,[e]:null}),toggleFilter:(e,t)=>n(n=>{if(Array.isArray(n[e])){if("creators"===e){return n.creators.find(e=>e.key===t.key)?{...n,creators:n.creators.filter(e=>e.key!==t.key)}:{...n,creators:[...n.creators,t]}}return n[e].includes(t)?{...n,[e]:n[e].filter(e=>e!==t)}:{...n,[e]:[...n[e],t]}}return"boolean"==typeof n[e]?{...n,[e]:!n[e]}:n}),setFilter:(e,t)=>n(n=>({...n,[e]:t})),clearFilters:()=>t({domains:[],folders:[],platforms:[],types:[],creators:[],tags:[],deadLinks:!1,stale:!1,dateRange:null,readingTimeRange:null,qualityScoreRange:null,hasPublishedDate:null}),reset:()=>t({domains:[],folders:[],platforms:[],types:[],creators:[],tags:[],deadLinks:!1,stale:!1,dateRange:null,readingTimeRange:null,qualityScoreRange:null,hasPublishedDate:null})}}();const _e=function(){const{subscribe:e,set:t,update:n}=oe(new Set);return{subscribe:e,set:t,toggle:e=>n(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}),add:e=>n(t=>{const n=new Set(t);return n.add(e),n}),remove:e=>n(t=>{const n=new Set(t);return n.delete(e),n}),selectAll:e=>t(new Set(e)),clear:()=>t(new Set)}}();function Se(e,t,n){const r=e.slice();return r[9]=t[n],r}function Pe(e){let t;return{c(){t=m("span"),t.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',x(t,"class","text-red-500"),x(t,"title","Dead link")},m(e,n){f(e,t,n)},d(e){e&&h(t)}}}function Ae(e){let t;return{c(){t=m("span"),t.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',x(t,"class","text-green-500"),x(t,"title","Enriched with metadata")},m(e,n){f(e,t,n)},d(e){e&&h(t)}}}function Ce(e){let t,n,r,o,i;return{c(){t=m("span"),n=g("svg"),r=g("path"),o=g("path"),x(r,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),x(o,"fill-rule","evenodd"),x(o,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),x(o,"clip-rule","evenodd"),x(n,"class","w-3.5 h-3.5"),x(n,"fill","currentColor"),x(n,"viewBox","0 0 20 20"),x(t,"class","text-blue-500 text-xs"),x(t,"title",i="Accessed "+e[0].accessCount+" times")},m(e,i){f(e,t,i),d(t,n),d(n,r),d(n,o)},p(e,n){1&n&&i!==(i="Accessed "+e[0].accessCount+" times")&&x(t,"title",i)},d(e){e&&h(t)}}}function Ee(e){let t,n,r,o,i=e[0].category+"";return{c(){t=m("span"),n=y("ðŸ·ï¸ "),r=y(i),x(t,"class","text-xs text-purple-600 bg-purple-50 px-2 py-0.5 rounded"),x(t,"title",o="Category: "+e[0].category)},m(e,o){f(e,t,o),d(t,n),d(t,r)},p(e,n){1&n&&i!==(i=e[0].category+"")&&w(r,i),1&n&&o!==(o="Category: "+e[0].category)&&x(t,"title",o)},d(e){e&&h(t)}}}function Te(e){let t,n,r=ne(e[0].description,e[1])+"";return{c(){t=m("p"),x(t,"class","text-xs text-gray-500 mt-2 line-clamp-2 w-full"),x(t,"title",n=e[0].description)},m(e,n){f(e,t,n),t.innerHTML=r},p(e,o){3&o&&r!==(r=ne(e[0].description,e[1])+"")&&(t.innerHTML=r),1&o&&n!==(n=e[0].description)&&x(t,"title",n)},d(e){e&&h(t)}}}function Oe(e){let t,n,r,o=e[0].readingTime&&Re(e),i=e[0].publishedDate&&De(e),a=e[0].contentQualityScore&&je(e);return{c(){t=m("div"),o&&o.c(),n=v(),i&&i.c(),r=v(),a&&a.c(),x(t,"class","flex items-center gap-2 mt-2 flex-wrap")},m(e,s){f(e,t,s),o&&o.m(t,null),d(t,n),i&&i.m(t,null),d(t,r),a&&a.m(t,null)},p(e,s){e[0].readingTime?o?o.p(e,s):(o=Re(e),o.c(),o.m(t,n)):o&&(o.d(1),o=null),e[0].publishedDate?i?i.p(e,s):(i=De(e),i.c(),i.m(t,r)):i&&(i.d(1),i=null),e[0].contentQualityScore?a?a.p(e,s):(a=je(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&h(t),o&&o.d(),i&&i.d(),a&&a.d()}}}function Re(e){let t,n,r,o,i=e[0].readingTime+"";return{c(){t=m("span"),n=y("â±ï¸ "),r=y(i),o=y(" min"),x(t,"class","text-xs text-gray-600 bg-gray-50 px-2 py-0.5 rounded flex items-center gap-1"),x(t,"title","Estimated reading time")},m(e,i){f(e,t,i),d(t,n),d(t,r),d(t,o)},p(e,t){1&t&&i!==(i=e[0].readingTime+"")&&w(r,i)},d(e){e&&h(t)}}}function De(e){let t,n,r,o=Z(e[0].publishedDate)+"";return{c(){t=m("span"),n=y("ðŸ“… "),r=y(o),x(t,"class","text-xs text-gray-600 bg-gray-50 px-2 py-0.5 rounded flex items-center gap-1"),x(t,"title","Published date")},m(e,o){f(e,t,o),d(t,n),d(t,r)},p(e,t){1&t&&o!==(o=Z(e[0].publishedDate)+"")&&w(r,o)},d(e){e&&h(t)}}}function je(e){let t,n,r,o=e[0].contentQualityScore+"";return{c(){t=m("span"),n=y("â­ "),r=y(o),x(t,"class","text-xs px-2 py-0.5 rounded flex items-center gap-1"),x(t,"title","Content quality score"),_(t,"text-green-700",e[0].contentQualityScore>=70),_(t,"bg-green-50",e[0].contentQualityScore>=70),_(t,"text-yellow-700",e[0].contentQualityScore>=40&&e[0].contentQualityScore<70),_(t,"bg-yellow-50",e[0].contentQualityScore>=40&&e[0].contentQualityScore<70),_(t,"text-orange-700",e[0].contentQualityScore<40),_(t,"bg-orange-50",e[0].contentQualityScore<40)},m(e,o){f(e,t,o),d(t,n),d(t,r)},p(e,n){1&n&&o!==(o=e[0].contentQualityScore+"")&&w(r,o),1&n&&_(t,"text-green-700",e[0].contentQualityScore>=70),1&n&&_(t,"bg-green-50",e[0].contentQualityScore>=70),1&n&&_(t,"text-yellow-700",e[0].contentQualityScore>=40&&e[0].contentQualityScore<70),1&n&&_(t,"bg-yellow-50",e[0].contentQualityScore>=40&&e[0].contentQualityScore<70),1&n&&_(t,"text-orange-700",e[0].contentQualityScore<40),1&n&&_(t,"bg-orange-50",e[0].contentQualityScore<40)},d(e){e&&h(t)}}}function Ke(e){let t,n,r=U(e[0].smartTags.slice(0,5)),o=[];for(let t=0;t<r.length;t+=1)o[t]=Ie(Se(e,r,t));let i=e[0].smartTags.length>5&&qe(e);return{c(){t=m("div");for(let e=0;e<o.length;e+=1)o[e].c();n=v(),i&&i.c(),x(t,"class","flex items-center gap-1 mt-2 flex-wrap")},m(e,r){f(e,t,r);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);d(t,n),i&&i.m(t,null)},p(e,a){if(1&a){let i;for(r=U(e[0].smartTags.slice(0,5)),i=0;i<r.length;i+=1){const s=Se(e,r,i);o[i]?o[i].p(s,a):(o[i]=Ie(s),o[i].c(),o[i].m(t,n))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}e[0].smartTags.length>5?i?i.p(e,a):(i=qe(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&h(t),p(o,e),i&&i.d()}}}function Ie(e){let t,n,r=e[9]+"";return{c(){t=m("span"),n=y(r),x(t,"class","text-xs text-indigo-600 bg-indigo-50 px-1.5 py-0.5 rounded"),x(t,"title","Smart tag")},m(e,r){f(e,t,r),d(t,n)},p(e,t){1&t&&r!==(r=e[9]+"")&&w(n,r)},d(e){e&&h(t)}}}function qe(e){let t,n,r,o,i=e[0].smartTags.length-5+"";return{c(){t=m("span"),n=y("+"),r=y(i),o=y(" more"),x(t,"class","text-xs text-gray-500")},m(e,i){f(e,t,i),d(t,n),d(t,r),d(t,o)},p(e,t){1&t&&i!==(i=e[0].smartTags.length-5+"")&&w(r,i)},d(e){e&&h(t)}}}function Me(e){let t,n;return{c(){t=g("svg"),n=g("path"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round"),x(n,"stroke-width","2"),x(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),x(t,"class","w-4 h-4"),x(t,"fill","none"),x(t,"stroke","currentColor"),x(t,"viewBox","0 0 24 24")},m(e,r){f(e,t,r),d(t,n)},d(e){e&&h(t)}}}function $e(e){let t,n;return{c(){t=g("svg"),n=g("path"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round"),x(n,"stroke-width","2"),x(n,"d","M5 13l4 4L19 7"),x(t,"class","w-4 h-4 text-green-500"),x(t,"fill","none"),x(t,"stroke","currentColor"),x(t,"viewBox","0 0 24 24")},m(e,r){f(e,t,r),d(t,n)},d(e){e&&h(t)}}}function Be(e){let t,n,r,o,i=e[0].folderPath+"";return{c(){t=m("p"),n=y("ðŸ“ "),r=y(i),x(t,"class","text-xs text-gray-400 mt-1 truncate"),x(t,"title",o=e[0].folderPath)},m(e,o){f(e,t,o),d(t,n),d(t,r)},p(e,n){1&n&&i!==(i=e[0].folderPath+"")&&w(r,i),1&n&&o!==(o=e[0].folderPath)&&x(t,"title",o)},d(e){e&&h(t)}}}function Fe(t){let n,o,i,a,s,l,c,p,g,k,S,P,A,C,E,T,O,R,D,j,K,I,q,M,$,B,F,N,L,z,Q,U,H,V,W,Y,G,X,J=ne(t[0].title,t[1])+"",re=ne(t[0].url,t[1])+"",oe=te(t[0])+"",ie=Z(t[0].dateAdded)+"",ae=!1===t[0].isAlive&&Pe(),se=(t[0].description||t[0].keywords&&t[0].keywords.length>0)&&Ae(),ue=t[0].accessCount>0&&Ce(t),le=t[0].category&&Ee(t),ce=t[0].description&&Te(t),de=(t[0].readingTime||t[0].publishedDate||t[0].contentQualityScore)&&Oe(t),fe=t[0].smartTags&&t[0].smartTags.length>0&&Ke(t);function he(e,t){return e[2]?$e:Me}let pe=he(t),me=pe(t),ge=t[0].folderPath&&Be(t);return{c(){n=m("div"),o=m("div"),i=m("input"),s=v(),l=m("div"),c=m("img"),g=v(),k=m("div"),S=m("div"),P=m("h3"),C=v(),E=m("div"),ae&&ae.c(),T=v(),se&&se.c(),O=v(),ue&&ue.c(),R=v(),D=m("p"),K=v(),I=m("div"),q=m("div"),M=m("span"),$=y(oe),B=v(),le&&le.c(),F=v(),ce&&ce.c(),N=v(),de&&de.c(),L=v(),fe&&fe.c(),z=v(),Q=m("div"),U=m("button"),me.c(),H=v(),V=m("span"),W=y(ie),Y=v(),ge&&ge.c(),x(i,"type","checkbox"),i.checked=a=t[3].has(t[0].id),x(i,"class","w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 cursor-pointer"),x(o,"class","absolute top-2 right-2 z-10"),_(o,"opacity-0",!t[3].has(t[0].id)),_(o,"group-hover:opacity-100",!0),u(c.src,p=ee(t[0]))||x(c,"src",p),x(c,"alt","Favicon"),x(c,"class","w-4 h-4 mt-1 flex-shrink-0"),x(P,"class","text-sm font-medium text-gray-900 truncate flex-1"),x(P,"title",A=t[0].title),x(E,"class","flex items-center gap-1 flex-shrink-0"),x(S,"class","flex items-center gap-1.5"),x(D,"class","text-xs text-gray-500 truncate mt-1"),x(D,"title",j=t[0].url),x(M,"class","text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded"),x(q,"class","flex items-center gap-1.5"),x(U,"class","p-1 text-gray-400 hover:text-blue-600 transition-colors"),x(U,"title","Copy URL"),x(V,"class","text-xs text-gray-400"),x(Q,"class","flex items-center space-x-2"),x(I,"class","flex items-center justify-between mt-2 gap-2 flex-wrap"),x(k,"class","flex-1 min-w-0"),x(l,"class","flex items-start space-x-3"),x(n,"class","bookmark-card bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 relative group svelte-1oo2sed"),x(n,"role","button"),x(n,"tabindex","0"),_(n,"border-red-200",!1===t[0].isAlive),_(n,"bg-red-50",!1===t[0].isAlive),_(n,"ring-2",t[3].has(t[0].id)),_(n,"ring-blue-500",t[3].has(t[0].id))},m(e,r){f(e,n,r),d(n,o),d(o,i),d(n,s),d(n,l),d(l,c),d(l,g),d(l,k),d(k,S),d(S,P),P.innerHTML=J,d(S,C),d(S,E),ae&&ae.m(E,null),d(E,T),se&&se.m(E,null),d(E,O),ue&&ue.m(E,null),d(k,R),d(k,D),D.innerHTML=re,d(k,K),d(k,I),d(I,q),d(q,M),d(M,$),d(q,B),le&&le.m(q,null),d(I,F),ce&&ce.m(I,null),d(I,N),de&&de.m(I,null),d(I,L),fe&&fe.m(I,null),d(I,z),d(I,Q),d(Q,U),me.m(U,null),d(Q,H),d(Q,V),d(V,W),d(k,Y),ge&&ge.m(k,null),G||(X=[b(i,"click",t[5]),b(U,"click",t[4]),b(n,"click",t[6]),b(n,"keydown",t[7])],G=!0)},p(e,[t]){9&t&&a!==(a=e[3].has(e[0].id))&&(i.checked=a),9&t&&_(o,"opacity-0",!e[3].has(e[0].id)),1&t&&!u(c.src,p=ee(e[0]))&&x(c,"src",p),3&t&&J!==(J=ne(e[0].title,e[1])+"")&&(P.innerHTML=J),1&t&&A!==(A=e[0].title)&&x(P,"title",A),!1===e[0].isAlive?ae||(ae=Pe(),ae.c(),ae.m(E,T)):ae&&(ae.d(1),ae=null),e[0].description||e[0].keywords&&e[0].keywords.length>0?se||(se=Ae(),se.c(),se.m(E,O)):se&&(se.d(1),se=null),e[0].accessCount>0?ue?ue.p(e,t):(ue=Ce(e),ue.c(),ue.m(E,null)):ue&&(ue.d(1),ue=null),3&t&&re!==(re=ne(e[0].url,e[1])+"")&&(D.innerHTML=re),1&t&&j!==(j=e[0].url)&&x(D,"title",j),1&t&&oe!==(oe=te(e[0])+"")&&w($,oe),e[0].category?le?le.p(e,t):(le=Ee(e),le.c(),le.m(q,null)):le&&(le.d(1),le=null),e[0].description?ce?ce.p(e,t):(ce=Te(e),ce.c(),ce.m(I,N)):ce&&(ce.d(1),ce=null),e[0].readingTime||e[0].publishedDate||e[0].contentQualityScore?de?de.p(e,t):(de=Oe(e),de.c(),de.m(I,L)):de&&(de.d(1),de=null),e[0].smartTags&&e[0].smartTags.length>0?fe?fe.p(e,t):(fe=Ke(e),fe.c(),fe.m(I,z)):fe&&(fe.d(1),fe=null),pe!==(pe=he(e))&&(me.d(1),me=pe(e),me&&(me.c(),me.m(U,null))),1&t&&ie!==(ie=Z(e[0].dateAdded)+"")&&w(W,ie),e[0].folderPath?ge?ge.p(e,t):(ge=Be(e),ge.c(),ge.m(k,null)):ge&&(ge.d(1),ge=null),1&t&&_(n,"border-red-200",!1===e[0].isAlive),1&t&&_(n,"bg-red-50",!1===e[0].isAlive),9&t&&_(n,"ring-2",e[3].has(e[0].id)),9&t&&_(n,"ring-blue-500",e[3].has(e[0].id))},i:e,o:e,d(e){e&&h(n),ae&&ae.d(),se&&se.d(),ue&&ue.d(),le&&le.d(),ce&&ce.d(),de&&de.d(),fe&&fe.d(),me.d(),ge&&ge.d(),G=!1,r(X)}}}function Ne(e){chrome.tabs.create({url:e})}function Le(e,t,n){let r;c(e,_e,e=>n(3,r=e));let{bookmark:o}=t,{parsedSearchQuery:i=null}=t;C();let a=!1;return e.$$set=e=>{"bookmark"in e&&n(0,o=e.bookmark),"parsedSearchQuery"in e&&n(1,i=e.parsedSearchQuery)},[o,i,a,r,async function(e){e.stopPropagation();const t=await async function(e){try{return await navigator.clipboard.writeText(e),!0}catch(e){return console.error("Failed to copy to clipboard:",e),!1}}(o.url);t&&(n(2,a=!0),setTimeout(()=>n(2,a=!1),2e3))},function(e){e.stopPropagation(),_e.toggle(o.id)},()=>Ne(o.url),e=>"Enter"===e.key&&Ne(o.url)]}class ze extends J{constructor(e){super(),X(this,e,Le,Fe,i,{bookmark:0,parsedSearchQuery:1})}}function Qe(e,t,n){const r=e.slice();return r[23]=t[n],r}function Ue(e,t,n){const r=e.slice();return r[26]=t[n],r}function He(e,t,n){const r=e.slice();return r[29]=t[n],r}function Ve(e,t,n){const r=e.slice();return r[29]=t[n],r}function We(e,t,n){const r=e.slice();return r[34]=t[n],r}function Ye(t){let n,r,o;return{c(){n=m("button"),n.innerHTML='<svg class="h-5 w-5 text-gray-400 hover:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',x(n,"class","absolute inset-y-0 right-0 pr-3 flex items-center"),x(n,"type","button"),x(n,"title","Clear search (Esc)")},m(e,i){f(e,n,i),r||(o=b(n,"click",t[12]),r=!0)},p:e,d(e){e&&h(n),r=!1,o()}}}function Ge(e){let t,n,r,o,i=U(e[5]),a=[];for(let t=0;t<i.length;t+=1)a[t]=Xe(We(e,i,t));return{c(){t=m("div"),n=m("div"),r=m("div"),r.textContent="Recent Searches",o=v();for(let e=0;e<a.length;e+=1)a[e].c();x(r,"class","px-3 py-1 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50"),x(n,"class","py-1"),x(t,"class","absolute z-20 w-full mt-1 bg-white rounded-md shadow-lg border border-gray-200 max-h-60 overflow-auto")},m(e,i){f(e,t,i),d(t,n),d(n,r),d(n,o);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(n,null)},p(e,t){if(1568&t[0]){let r;for(i=U(e[5]),r=0;r<i.length;r+=1){const o=We(e,i,r);a[r]?a[r].p(o,t):(a[r]=Xe(o),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},d(e){e&&h(t),p(a,e)}}}function Xe(e){let t,n,o,i,a,s,u,l,c,p,k,_,S=e[34]+"";function P(...t){return e[16](e[34],...t)}function A(){return e[17](e[34])}function C(...t){return e[18](e[34],...t)}return{c(){t=m("div"),n=m("div"),o=g("svg"),i=g("path"),a=v(),s=m("span"),u=y(S),l=v(),c=m("button"),c.innerHTML='<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',p=v(),x(i,"stroke-linecap","round"),x(i,"stroke-linejoin","round"),x(i,"stroke-width","2"),x(i,"d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"),x(o,"class","w-4 h-4 text-gray-400"),x(o,"fill","none"),x(o,"stroke","currentColor"),x(o,"viewBox","0 0 24 24"),x(s,"class","text-sm text-gray-700 truncate"),x(n,"class","flex items-center gap-2 overflow-hidden"),x(c,"class","text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity p-1"),x(c,"title","Remove from history"),x(t,"class","flex items-center justify-between px-3 py-2 hover:bg-blue-50 cursor-pointer group"),x(t,"role","button"),x(t,"tabindex","0")},m(e,r){f(e,t,r),d(t,n),d(n,o),d(o,i),d(n,a),d(n,s),d(s,u),d(t,l),d(t,c),d(t,p),k||(_=[b(c,"click",P),b(t,"click",A),b(t,"keydown",C)],k=!0)},p(t,n){e=t,32&n[0]&&S!==(S=e[34]+"")&&w(u,S)},d(e){e&&h(t),k=!1,r(_)}}}function Je(e){let t,n,r,o,i=U(e[6].positive),a=[];for(let t=0;t<i.length;t+=1)a[t]=Ze(Ve(e,i,t));let s=U(e[6].negative),u=[];for(let t=0;t<s.length;t+=1)u[t]=et(He(e,s,t));let l=U(e[6].phrases),c=[];for(let t=0;t<l.length;t+=1)c[t]=tt(Ue(e,l,t));let g=U(e[6].regexPatterns),y=[];for(let t=0;t<g.length;t+=1)y[t]=nt(Qe(e,g,t));return{c(){t=m("div");for(let e=0;e<a.length;e+=1)a[e].c();n=v();for(let e=0;e<u.length;e+=1)u[e].c();r=v();for(let e=0;e<c.length;e+=1)c[e].c();o=v();for(let e=0;e<y.length;e+=1)y[e].c();x(t,"class","flex flex-wrap gap-1.5 mt-2")},m(e,i){f(e,t,i);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(t,null);d(t,n);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(t,null);d(t,r);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(t,null);d(t,o);for(let e=0;e<y.length;e+=1)y[e]&&y[e].m(t,null)},p(e,d){if(64&d[0]){let r;for(i=U(e[6].positive),r=0;r<i.length;r+=1){const o=Ve(e,i,r);a[r]?a[r].p(o,d):(a[r]=Ze(o),a[r].c(),a[r].m(t,n))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}if(64&d[0]){let n;for(s=U(e[6].negative),n=0;n<s.length;n+=1){const o=He(e,s,n);u[n]?u[n].p(o,d):(u[n]=et(o),u[n].c(),u[n].m(t,r))}for(;n<u.length;n+=1)u[n].d(1);u.length=s.length}if(64&d[0]){let n;for(l=U(e[6].phrases),n=0;n<l.length;n+=1){const r=Ue(e,l,n);c[n]?c[n].p(r,d):(c[n]=tt(r),c[n].c(),c[n].m(t,o))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}if(64&d[0]){let n;for(g=U(e[6].regexPatterns),n=0;n<g.length;n+=1){const r=Qe(e,g,n);y[n]?y[n].p(r,d):(y[n]=nt(r),y[n].c(),y[n].m(t,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=g.length}},d(e){e&&h(t),p(a,e),p(u,e),p(c,e),p(y,e)}}}function Ze(e){let t,n,r,o,i,a=e[29]+"";return{c(){t=m("span"),n=g("svg"),r=g("path"),o=v(),i=y(a),x(r,"fill-rule","evenodd"),x(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),x(r,"clip-rule","evenodd"),x(n,"class","w-3 h-3 mr-1"),x(n,"fill","currentColor"),x(n,"viewBox","0 0 20 20"),x(t,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800")},m(e,a){f(e,t,a),d(t,n),d(n,r),d(t,o),d(t,i)},p(e,t){64&t[0]&&a!==(a=e[29]+"")&&w(i,a)},d(e){e&&h(t)}}}function et(e){let t,n,r,o,i,a=e[29]+"";return{c(){t=m("span"),n=g("svg"),r=g("path"),o=v(),i=y(a),x(r,"fill-rule","evenodd"),x(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),x(r,"clip-rule","evenodd"),x(n,"class","w-3 h-3 mr-1"),x(n,"fill","currentColor"),x(n,"viewBox","0 0 20 20"),x(t,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800")},m(e,a){f(e,t,a),d(t,n),d(n,r),d(t,o),d(t,i)},p(e,t){64&t[0]&&a!==(a=e[29]+"")&&w(i,a)},d(e){e&&h(t)}}}function tt(e){let t,n,r,o,i,a,s=e[26]+"";return{c(){t=m("span"),n=g("svg"),r=g("path"),o=y('\n          "'),i=y(s),a=y('"'),x(r,"fill-rule","evenodd"),x(r,"d","M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z"),x(r,"clip-rule","evenodd"),x(n,"class","w-3 h-3 mr-1"),x(n,"fill","currentColor"),x(n,"viewBox","0 0 20 20"),x(t,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800")},m(e,s){f(e,t,s),d(t,n),d(n,r),d(t,o),d(t,i),d(t,a)},p(e,t){64&t[0]&&s!==(s=e[26]+"")&&w(i,s)},d(e){e&&h(t)}}}function nt(e){let t,n,r,o,i,a,s=e[23]+"";return{c(){t=m("span"),n=g("svg"),r=g("path"),o=v(),i=y(s),a=v(),x(r,"stroke-linecap","round"),x(r,"stroke-linejoin","round"),x(r,"stroke-width","2"),x(r,"d","M10 20l4-16m4 4l-4 4 4 4M6 16l-4-4 4-4"),x(n,"class","w-3 h-3 mr-1"),x(n,"fill","none"),x(n,"stroke","currentColor"),x(n,"viewBox","0 0 20 20"),x(t,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800")},m(e,s){f(e,t,s),d(t,n),d(n,r),d(t,o),d(t,i),d(t,a)},p(e,t){64&t[0]&&s!==(s=e[23]+"")&&w(i,s)},d(e){e&&h(t)}}}function rt(e){let t;return{c(){t=m("div"),t.innerHTML='<h4 class="font-medium text-gray-900 mb-3 flex items-center gap-2"><svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>\n        Search Syntax</h4> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-green-100 text-green-800 rounded text-xs whitespace-nowrap">+term</code> <span class="text-gray-600">Must include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-800 rounded text-xs whitespace-nowrap">-term</code> <span class="text-gray-600">Must NOT include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-blue-100 text-blue-800 rounded text-xs whitespace-nowrap">&quot;exact phrase&quot;</code> <span class="text-gray-600">Match exact phrase</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-gray-100 text-gray-700 rounded text-xs whitespace-nowrap">word</code> <span class="text-gray-600">Regular search term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-purple-100 text-purple-800 rounded text-xs whitespace-nowrap">/regex/</code> <span class="text-gray-600">Regular expression pattern</span></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><svg class="w-4 h-4 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>\n          Special Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">category:tech</code> <span class="text-gray-600">ðŸ“ Filter by category</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">domain:github.com</code> <span class="text-gray-600">ðŸŒ Filter by domain</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">folder:&quot;Work/Projects&quot;</code> <span class="text-gray-600">ðŸ“‚ Filter by folder path</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">accessed:yes</code> <span class="text-gray-600">ðŸ‘† Has been accessed (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">stale:yes</code> <span class="text-gray-600">â° Old &amp; never accessed</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-teal-100 text-teal-800 rounded text-xs whitespace-nowrap">enriched:yes</code> <span class="text-gray-600">âœ¨ Has metadata (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-700 rounded text-xs whitespace-nowrap">dead:yes</code> <span class="text-gray-600">ðŸ’€ Dead links (yes/no)</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><span class="text-lg">ðŸ“±</span>\n          Platform Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">platform:youtube</code> <span class="text-gray-600">ðŸ“º Filter by platform (youtube, github, medium, etc.)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">channel:@mkbhd</code> <span class="text-gray-600">ðŸ“º YouTube channel (with or without @)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">repo:facebook/react</code> <span class="text-gray-600">ðŸ’» GitHub repository (owner/repo)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">author:username</code> <span class="text-gray-600">âœï¸ Blog/article author</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">type:video</code> <span class="text-gray-600">ðŸ“ Content type (video, issue, article, repo, pr)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">hasimage:yes</code> <span class="text-gray-600">ðŸ–¼ï¸ Has thumbnail image (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">playlist:PLxxx</code> <span class="text-gray-600">ðŸŽµ YouTube playlist ID</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><p class="text-xs text-gray-500"><strong>Example:</strong> <code class="bg-gray-100 px-1 rounded">javascript +tutorial -video &quot;best practices&quot;</code></p> <p class="text-xs text-gray-500 mt-1"><strong>With filters:</strong> <code class="bg-gray-100 px-1 rounded">domain:github.com category:development enriched:yes</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Platform:</strong> <code class="bg-gray-100 px-1 rounded">platform:youtube channel:@fireship type:video</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Regex:</strong> <code class="bg-gray-100 px-1 rounded">/react.*hooks?/</code></p></div>',x(t,"class","absolute z-20 w-full mt-2 p-4 bg-white border border-gray-200 rounded-lg shadow-lg max-h-[70vh] overflow-y-auto")},m(e,n){f(e,t,n)},d(e){e&&h(t)}}}function ot(t){let n,o,i,a,s,u,l,c,p,g,y,w,_,S,P=t[0]&&Ye(t),A=t[4]&&t[5].length>0&&Ge(t),C=t[0]&&(t[6].positive.length>0||t[6].negative.length>0||t[6].phrases.length>0||t[6].regexPatterns.length>0)&&Je(t),E=t[3]&&rt();return{c(){n=m("div"),o=m("div"),i=m("div"),a=m("div"),a.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',s=v(),u=m("input"),l=v(),P&&P.c(),c=v(),p=m("button"),p.innerHTML='<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',g=v(),A&&A.c(),y=v(),C&&C.c(),w=v(),E&&E.c(),x(a,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),x(u,"type","text"),x(u,"placeholder",t[1]),x(u,"class","block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"),x(u,"autocomplete","off"),x(u,"spellcheck","false"),x(i,"class","relative flex-1"),x(p,"class","p-2.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg border border-gray-300 transition-colors"),x(p,"type","button"),x(p,"title","Search help"),x(o,"class","flex items-center gap-2"),x(n,"class","relative mb-4 search-container")},m(e,r){f(e,n,r),d(n,o),d(o,i),d(i,a),d(i,s),d(i,u),t[14](u),k(u,t[0]),d(i,l),P&&P.m(i,null),d(o,c),d(o,p),d(n,g),A&&A.m(n,null),d(n,y),C&&C.m(n,null),d(n,w),E&&E.m(n,null),_||(S=[b(u,"input",t[15]),b(u,"input",t[7]),b(u,"focus",t[8]),b(u,"keydown",t[11]),b(p,"click",t[13])],_=!0)},p(e,t){2&t[0]&&x(u,"placeholder",e[1]),1&t[0]&&u.value!==e[0]&&k(u,e[0]),e[0]?P?P.p(e,t):(P=Ye(e),P.c(),P.m(i,null)):P&&(P.d(1),P=null),e[4]&&e[5].length>0?A?A.p(e,t):(A=Ge(e),A.c(),A.m(n,y)):A&&(A.d(1),A=null),e[0]&&(e[6].positive.length>0||e[6].negative.length>0||e[6].phrases.length>0||e[6].regexPatterns.length>0)?C?C.p(e,t):(C=Je(e),C.c(),C.m(n,w)):C&&(C.d(1),C=null),e[3]?E||(E=rt(),E.c(),E.m(n,null)):E&&(E.d(1),E=null)},i:e,o:e,d(e){e&&h(n),t[14](null),P&&P.d(),A&&A.d(),C&&C.d(),E&&E.d(),_=!1,r(S)}}}function it(e,t,n){let r;const o=C();let i,a,{value:s=""}=t,{placeholder:u='Search: use +term (must include), -term (exclude), "exact phrase"'}=t,l=!1,c=!1,d=[];function f(e){n(0,s=e),n(4,c=!1),o("search",{query:e}),a?.focus()}function h(e,t){e.stopPropagation(),n(5,d=d.filter(e=>e!==t)),localStorage.setItem("bookmark_search_history",JSON.stringify(d)),0===d.length&&n(4,c=!1)}function p(){n(0,s=""),o("search",{query:""}),a?.focus()}A(()=>{!function(){try{const e=localStorage.getItem("bookmark_search_history");e&&n(5,d=JSON.parse(e))}catch(e){console.error("Failed to load search history",e)}}();const e=e=>{c&&!e.target.closest(".search-container")&&n(4,c=!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)});return e.$$set=e=>{"value"in e&&n(0,s=e.value),"placeholder"in e&&n(1,u=e.placeholder)},e.$$.update=()=>{1&e.$$.dirty[0]&&n(6,r=function(e){if(!e)return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[]};const t=[],n=[],r=[],o=[],i=[];(e.match(/\/([^\/]+)\/([gimsuvy]*)?/g)||[]).forEach(e=>i.push(e));let a=e.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();return(a.match(/"([^"]+)"/g)||[]).forEach(e=>r.push(e.slice(1,-1))),a=a.replace(/"[^"]+"/g,"").trim(),a.split(/\s+/).filter(e=>e.length>0).forEach(e=>{e.startsWith("+")&&e.length>1?t.push(e.slice(1)):e.startsWith("-")&&e.length>1?n.push(e.slice(1)):o.push(e)}),{positive:t,negative:n,phrases:r,regular:o,regexPatterns:i}}(s))},[s,u,a,l,c,d,r,function(e){n(0,s=e.target.value),n(4,c=!1),clearTimeout(i),i=setTimeout(()=>{o("search",{query:s})},200)},function(){d.length>0&&n(4,c=!0)},f,h,function(e){"Escape"===e.key?c?n(4,c=!1):p():"Enter"===e.key&&(clearTimeout(i),function(e){if(!e||!e.trim())return;const t=e.trim(),r=[t,...d.filter(e=>e!==t)].slice(0,10);n(5,d=r),localStorage.setItem("bookmark_search_history",JSON.stringify(r))}(s),n(4,c=!1),o("search",{query:s}))},p,function(){n(3,l=!l)},function(e){T[e?"unshift":"push"](()=>{a=e,n(2,a)})},function(){s=this.value,n(0,s)},(e,t)=>h(t,e),e=>f(e),(e,t)=>"Enter"===t.key&&f(e)]}class at extends J{constructor(e){super(),X(this,e,it,ot,i,{value:0,placeholder:1},null,[-1,-1])}}function st(e,t,n){const r=e.slice();return r[70]=t[n],r}function ut(e,t,n){const r=e.slice();r[73]=t[n];const o=r[17]("creators",`${r[73].platform}:${r[73].creator}`);return r[74]=o,r}function lt(e,t,n){const r=e.slice();return r[77]=t[n],r}function ct(e,t,n){const r=e.slice();return r[80]=t[n],r}function dt(e,t,n){const r=e.slice();return r[83]=t[n],r}function ft(e,t,n){const r=e.slice();return r[86]=t[n],r}function ht(e,t,n){const r=e.slice();return r[89]=t[n],r}function pt(e,t,n){const r=e.slice();return r[92]=t[n],r}function mt(e,t,n){const r=e.slice();return r[95]=t[n],r}function gt(e,t,n){const r=e.slice();return r[98]=t[n],r}function yt(t){let n,r,o;return{c(){n=m("button"),n.textContent="Clear All",x(n,"class","text-xs text-blue-600 hover:text-blue-800")},m(e,i){f(e,n,i),r||(o=b(n,"click",t[23]),r=!0)},p:e,d(e){e&&h(n),r=!1,o()}}}function vt(e){let t,n,r,o,i,a,s=U(e[3].platforms),u=[];for(let t=0;t<s.length;t+=1)u[t]=bt(gt(e,s,t));let l=U(e[3].creators),c=[];for(let t=0;t<l.length;t+=1)c[t]=xt(mt(e,l,t));let g=U(e[3].types),y=[];for(let t=0;t<g.length;t+=1)y[t]=wt(pt(e,g,t));let b=U(e[3].domains),w=[];for(let t=0;t<b.length;t+=1)w[t]=kt(ht(e,b,t));let k=U(e[3].folders),_=[];for(let t=0;t<k.length;t+=1)_[t]=_t(ft(e,k,t));let S=e[3].dateRange&&St(e);return{c(){t=m("div");for(let e=0;e<u.length;e+=1)u[e].c();n=v();for(let e=0;e<c.length;e+=1)c[e].c();r=v();for(let e=0;e<y.length;e+=1)y[e].c();o=v();for(let e=0;e<w.length;e+=1)w[e].c();i=v();for(let e=0;e<_.length;e+=1)_[e].c();a=v(),S&&S.c(),x(t,"class","mb-4 space-y-2")},m(e,s){f(e,t,s);for(let e=0;e<u.length;e+=1)u[e]&&u[e].m(t,null);d(t,n);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(t,null);d(t,r);for(let e=0;e<y.length;e+=1)y[e]&&y[e].m(t,null);d(t,o);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(t,null);d(t,i);for(let e=0;e<_.length;e+=1)_[e]&&_[e].m(t,null);d(t,a),S&&S.m(t,null)},p(e,d){if(1048584&d[0]){let r;for(s=U(e[3].platforms),r=0;r<s.length;r+=1){const o=gt(e,s,r);u[r]?u[r].p(o,d):(u[r]=bt(o),u[r].c(),u[r].m(t,n))}for(;r<u.length;r+=1)u[r].d(1);u.length=s.length}if(2097160&d[0]){let n;for(l=U(e[3].creators),n=0;n<l.length;n+=1){const o=mt(e,l,n);c[n]?c[n].p(o,d):(c[n]=xt(o),c[n].c(),c[n].m(t,r))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}if(4194312&d[0]){let n;for(g=U(e[3].types),n=0;n<g.length;n+=1){const r=pt(e,g,n);y[n]?y[n].p(r,d):(y[n]=wt(r),y[n].c(),y[n].m(t,o))}for(;n<y.length;n+=1)y[n].d(1);y.length=g.length}if(262152&d[0]){let n;for(b=U(e[3].domains),n=0;n<b.length;n+=1){const r=ht(e,b,n);w[n]?w[n].p(r,d):(w[n]=kt(r),w[n].c(),w[n].m(t,i))}for(;n<w.length;n+=1)w[n].d(1);w.length=b.length}if(524296&d[0]){let n;for(k=U(e[3].folders),n=0;n<k.length;n+=1){const r=ft(e,k,n);_[n]?_[n].p(r,d):(_[n]=_t(r),_[n].c(),_[n].m(t,a))}for(;n<_.length;n+=1)_[n].d(1);_.length=k.length}e[3].dateRange?S?S.p(e,d):(S=St(e),S.c(),S.m(t,null)):S&&(S.d(1),S=null)},d(e){e&&h(t),p(u,e),p(c,e),p(y,e),p(w,e),p(_,e),S&&S.d()}}}function bt(e){let t,n,r,o,i,a,s,u,l,c=he(e[98])+"",p=fe(e[98])+"";function g(){return e[37](e[98])}return{c(){t=m("div"),n=m("div"),r=y(c),o=v(),i=y(p),a=v(),s=m("button"),s.textContent="Ã—",x(n,"class","text-xs text-indigo-800"),x(s,"class","text-indigo-600 hover:text-indigo-800"),x(t,"class","flex items-center justify-between p-2 bg-indigo-50 rounded-md")},m(e,c){f(e,t,c),d(t,n),d(n,r),d(n,o),d(n,i),d(t,a),d(t,s),u||(l=b(s,"click",g),u=!0)},p(t,n){e=t,8&n[0]&&c!==(c=he(e[98])+"")&&w(r,c),8&n[0]&&p!==(p=fe(e[98])+"")&&w(i,p)},d(e){e&&h(t),u=!1,l()}}}function xt(e){let t,n,r,o,i,a,s,u,l,c=he(e[95].platform)+"",p=e[95].creator+"";function g(){return e[38](e[95])}return{c(){t=m("div"),n=m("div"),r=y(c),o=v(),i=y(p),a=v(),s=m("button"),s.textContent="Ã—",x(n,"class","text-xs text-pink-800"),x(s,"class","text-pink-600 hover:text-pink-800"),x(t,"class","flex items-center justify-between p-2 bg-pink-50 rounded-md")},m(e,c){f(e,t,c),d(t,n),d(n,r),d(n,o),d(n,i),d(t,a),d(t,s),u||(l=b(s,"click",g),u=!0)},p(t,n){e=t,8&n[0]&&c!==(c=he(e[95].platform)+"")&&w(r,c),8&n[0]&&p!==(p=e[95].creator+"")&&w(i,p)},d(e){e&&h(t),u=!1,l()}}}function wt(e){let t,n,r,o,i,a,s,u,l=pe(e[92])+"";function c(){return e[39](e[92])}return{c(){t=m("div"),n=m("div"),r=y("Type: "),o=y(l),i=v(),a=m("button"),a.textContent="Ã—",x(n,"class","text-xs text-orange-800"),x(a,"class","text-orange-600 hover:text-orange-800"),x(t,"class","flex items-center justify-between p-2 bg-orange-50 rounded-md")},m(e,l){f(e,t,l),d(t,n),d(n,r),d(n,o),d(t,i),d(t,a),s||(u=b(a,"click",c),s=!0)},p(t,n){e=t,8&n[0]&&l!==(l=pe(e[92])+"")&&w(o,l)},d(e){e&&h(t),s=!1,u()}}}function kt(e){let t,n,r,o,i,a,s,u,l=e[89]+"";function c(){return e[40](e[89])}return{c(){t=m("div"),n=m("div"),r=y("Domain: "),o=y(l),i=v(),a=m("button"),a.textContent="Ã—",x(n,"class","text-xs text-blue-800"),x(a,"class","text-blue-600 hover:text-blue-800"),x(t,"class","flex items-center justify-between p-2 bg-blue-50 rounded-md")},m(e,l){f(e,t,l),d(t,n),d(n,r),d(n,o),d(t,i),d(t,a),s||(u=b(a,"click",c),s=!0)},p(t,n){e=t,8&n[0]&&l!==(l=e[89]+"")&&w(o,l)},d(e){e&&h(t),s=!1,u()}}}function _t(e){let t,n,r,o,i,a,s,u,l=e[86]+"";function c(){return e[41](e[86])}return{c(){t=m("div"),n=m("div"),r=y("Folder: "),o=y(l),i=v(),a=m("button"),a.textContent="Ã—",x(n,"class","text-xs text-green-800"),x(a,"class","text-green-600 hover:text-green-800"),x(t,"class","flex items-center justify-between p-2 bg-green-50 rounded-md")},m(e,l){f(e,t,l),d(t,n),d(n,r),d(n,o),d(t,i),d(t,a),s||(u=b(a,"click",c),s=!0)},p(t,n){e=t,8&n[0]&&l!==(l=e[86]+"")&&w(o,l)},d(e){e&&h(t),s=!1,u()}}}function St(e){let t,n,r,o,i,a,s,u="week"===e[3].dateRange.period?"This Week":"month"===e[3].dateRange.period?"This Month":"This Year";return{c(){t=m("div"),n=m("div"),r=y(u),o=v(),i=m("button"),i.textContent="Ã—",x(n,"class","text-xs text-purple-800"),x(i,"class","text-purple-600 hover:text-purple-800"),x(t,"class","flex items-center justify-between p-2 bg-purple-50 rounded-md")},m(u,l){f(u,t,l),d(t,n),d(n,r),d(t,o),d(t,i),a||(s=b(i,"click",e[42]),a=!0)},p(e,t){8&t[0]&&u!==(u="week"===e[3].dateRange.period?"This Week":"month"===e[3].dateRange.period?"This Month":"This Year")&&w(r,u)},d(e){e&&h(t),a=!1,s()}}}function Pt(e){let t,n,r,o=e[12].length+"";return{c(){t=y("ðŸŒ Domains ("),n=y(o),r=y(")")},m(e,o){f(e,t,o),f(e,n,o),f(e,r,o)},p(e,t){4096&t[0]&&o!==(o=e[12].length+"")&&w(n,o)},d(e){e&&(h(t),h(n),h(r))}}}function At(e){let t,n,r,o,i=e[12].length+"";return{c(){t=m("span"),n=y("Matching Domains ("),r=y(i),o=y(")"),x(t,"class","text-blue-600")},m(e,i){f(e,t,i),d(t,n),d(t,r),d(t,o)},p(e,t){4096&t[0]&&i!==(i=e[12].length+"")&&w(r,i)},d(e){e&&h(t)}}}function Ct(e){let t,n,r,o,i=!e[0]&&Et(e),a=U(e[12].slice(0,e[4])),s=[];for(let t=0;t<a.length;t+=1)s[t]=Ot(dt(e,a,t));let u=e[12].length>e[4]&&Rt(e),l=0===e[12].length&&Dt();return{c(){i&&i.c(),t=v(),n=m("div");for(let e=0;e<s.length;e+=1)s[e].c();r=v(),u&&u.c(),o=v(),l&&l.c(),x(n,"class","space-y-1 max-h-64 overflow-y-auto")},m(e,a){i&&i.m(e,a),f(e,t,a),f(e,n,a);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(n,null);d(n,r),u&&u.m(n,null),d(n,o),l&&l.m(n,null)},p(e,c){if(e[0]?i&&(i.d(1),i=null):i?i.p(e,c):(i=Et(e),i.c(),i.m(t.parentNode,t)),397331&c[0]){let t;for(a=U(e[12].slice(0,e[4])),t=0;t<a.length;t+=1){const o=dt(e,a,t);s[t]?s[t].p(o,c):(s[t]=Ot(o),s[t].c(),s[t].m(n,r))}for(;t<s.length;t+=1)s[t].d(1);s.length=a.length}e[12].length>e[4]?u?u.p(e,c):(u=Rt(e),u.c(),u.m(n,o)):u&&(u.d(1),u=null),0===e[12].length?l||(l=Dt(),l.c(),l.m(n,null)):l&&(l.d(1),l=null)},d(e){e&&(h(t),h(n)),i&&i.d(e),p(s,e),u&&u.d(),l&&l.d()}}}function Et(e){let t,n,o,i,a,s;return{c(){t=m("div"),n=m("button"),n.textContent="Recent",o=v(),i=m("button"),i.textContent="Count",x(n,"class","text-xs px-2 py-1 rounded"),x(n,"title","Sort by most recent bookmark"),_(n,"bg-blue-100","recency"===e[1]),_(n,"text-blue-700","recency"===e[1]),_(n,"text-gray-500","recency"!==e[1]),x(i,"class","text-xs px-2 py-1 rounded"),x(i,"title","Sort by bookmark count"),_(i,"bg-blue-100","count"===e[1]),_(i,"text-blue-700","count"===e[1]),_(i,"text-gray-500","count"!==e[1]),x(t,"class","flex space-x-1 mb-2")},m(r,u){f(r,t,u),d(t,n),d(t,o),d(t,i),a||(s=[b(n,"click",e[44]),b(i,"click",e[45])],a=!0)},p(e,t){2&t[0]&&_(n,"bg-blue-100","recency"===e[1]),2&t[0]&&_(n,"text-blue-700","recency"===e[1]),2&t[0]&&_(n,"text-gray-500","recency"!==e[1]),2&t[0]&&_(i,"bg-blue-100","count"===e[1]),2&t[0]&&_(i,"text-blue-700","count"===e[1]),2&t[0]&&_(i,"text-gray-500","count"!==e[1])},d(e){e&&h(t),a=!1,r(s)}}}function Tt(e){let t,n,r=Zt(e[83].dateAdded||e[83].latestDate)+"";return{c(){t=m("span"),n=y(r)},m(e,r){f(e,t,r),d(t,n)},p(e,t){4112&t[0]&&r!==(r=Zt(e[83].dateAdded||e[83].latestDate)+"")&&w(n,r)},d(e){e&&h(t)}}}function Ot(e){let t,n,r,o,i,a,s,u,l,c,p,g,k,S=e[83].domain+"",P=e[83].count+"",A=1!==e[83].count?"s":"",C=!e[0]&&"recency"===e[1]&&(e[83].dateAdded||e[83].latestDate)&&Tt(e);function E(){return e[46](e[83])}return{c(){t=m("button"),n=m("div"),r=y(S),o=v(),i=m("div"),a=m("span"),s=y(P),u=y(" bookmark"),l=y(A),c=v(),C&&C.c(),x(n,"class","truncate font-medium"),x(i,"class","flex justify-between items-center text-xs text-gray-500 mt-1"),x(t,"class","w-full text-left px-2 py-2 text-sm hover:bg-gray-100 rounded border"),x(t,"title",p=e[83].domain),_(t,"bg-blue-50",e[17]("domains",e[83].domain)),_(t,"text-blue-700",e[17]("domains",e[83].domain)),_(t,"border-blue-200",e[17]("domains",e[83].domain)),_(t,"text-gray-600",!e[17]("domains",e[83].domain)),_(t,"border-transparent",!e[17]("domains",e[83].domain))},m(e,h){f(e,t,h),d(t,n),d(n,r),d(t,o),d(t,i),d(i,a),d(a,s),d(a,u),d(a,l),d(i,c),C&&C.m(i,null),g||(k=b(t,"click",E),g=!0)},p(n,o){e=n,4112&o[0]&&S!==(S=e[83].domain+"")&&w(r,S),4112&o[0]&&P!==(P=e[83].count+"")&&w(s,P),4112&o[0]&&A!==(A=1!==e[83].count?"s":"")&&w(l,A),e[0]||"recency"!==e[1]||!e[83].dateAdded&&!e[83].latestDate?C&&(C.d(1),C=null):C?C.p(e,o):(C=Tt(e),C.c(),C.m(i,null)),4112&o[0]&&p!==(p=e[83].domain)&&x(t,"title",p),135184&o[0]&&_(t,"bg-blue-50",e[17]("domains",e[83].domain)),135184&o[0]&&_(t,"text-blue-700",e[17]("domains",e[83].domain)),135184&o[0]&&_(t,"border-blue-200",e[17]("domains",e[83].domain)),135184&o[0]&&_(t,"text-gray-600",!e[17]("domains",e[83].domain)),135184&o[0]&&_(t,"border-transparent",!e[17]("domains",e[83].domain))},d(e){e&&h(t),C&&C.d(),g=!1,k()}}}function Rt(e){let t,n,r,o,i,a,s,u,l=e[12].length+"";return{c(){t=m("button"),n=y("Load More ("),r=y(e[4]),o=y(" of "),i=y(l),a=y(" shown)"),x(t,"class","w-full text-center px-2 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded border border-blue-200 mt-2")},m(l,c){f(l,t,c),d(t,n),d(t,r),d(t,o),d(t,i),d(t,a),s||(u=b(t,"click",e[13]),s=!0)},p(e,t){16&t[0]&&w(r,e[4]),4096&t[0]&&l!==(l=e[12].length+"")&&w(i,l)},d(e){e&&h(t),s=!1,u()}}}function Dt(e){let t;return{c(){t=m("div"),t.textContent="No domains found",x(t,"class","text-xs text-gray-400 px-2 py-2 italic")},m(e,n){f(e,t,n)},d(e){e&&h(t)}}}function jt(e){let t,n,r,o=e[11].length+"";return{c(){t=y("ðŸ“ Folders ("),n=y(o),r=y(")")},m(e,o){f(e,t,o),f(e,n,o),f(e,r,o)},p(e,t){2048&t[0]&&o!==(o=e[11].length+"")&&w(n,o)},d(e){e&&(h(t),h(n),h(r))}}}function Kt(e){let t,n,r,o,i=e[11].length+"";return{c(){t=m("span"),n=y("Matching Folders ("),r=y(i),o=y(")"),x(t,"class","text-blue-600")},m(e,i){f(e,t,i),d(t,n),d(t,r),d(t,o)},p(e,t){2048&t[0]&&i!==(i=e[11].length+"")&&w(r,i)},d(e){e&&h(t)}}}function It(e){let t,n,r,o=U(e[11].slice(0,e[5])),i=[];for(let t=0;t<o.length;t+=1)i[t]=qt(ct(e,o,t));let a=e[11].length>e[5]&&Mt(e),s=0===e[11].length&&$t();return{c(){t=m("div");for(let e=0;e<i.length;e+=1)i[e].c();n=v(),a&&a.c(),r=v(),s&&s.c(),x(t,"class","space-y-1 max-h-64 overflow-y-auto")},m(e,o){f(e,t,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);d(t,n),a&&a.m(t,null),d(t,r),s&&s.m(t,null)},p(e,u){if(657440&u[0]){let r;for(o=U(e[11].slice(0,e[5])),r=0;r<o.length;r+=1){const a=ct(e,o,r);i[r]?i[r].p(a,u):(i[r]=qt(a),i[r].c(),i[r].m(t,n))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}e[11].length>e[5]?a?a.p(e,u):(a=Mt(e),a.c(),a.m(t,r)):a&&(a.d(1),a=null),0===e[11].length?s||(s=$t(),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&h(t),p(i,e),a&&a.d(),s&&s.d()}}}function qt(e){let t,n,r,o,i,a,s,u,l,c,p=e[80].folder+"",g=e[80].count+"";function k(){return e[48](e[80])}return{c(){t=m("button"),n=m("span"),r=y("ðŸ“ "),o=y(p),i=v(),a=m("span"),s=y(g),x(n,"class","truncate block"),x(a,"class","text-xs text-gray-400 ml-1"),x(t,"class","w-full text-left px-2 py-1 text-sm hover:bg-gray-100 rounded border flex items-center justify-between"),x(t,"title",u=e[80].folder),_(t,"bg-green-50",e[17]("folders",e[80].folder)),_(t,"text-green-700",e[17]("folders",e[80].folder)),_(t,"border-green-200",e[17]("folders",e[80].folder)),_(t,"text-gray-600",!e[17]("folders",e[80].folder)),_(t,"border-transparent",!e[17]("folders",e[80].folder))},m(e,u){f(e,t,u),d(t,n),d(n,r),d(n,o),d(t,i),d(t,a),d(a,s),l||(c=b(t,"click",k),l=!0)},p(n,r){e=n,2080&r[0]&&p!==(p=e[80].folder+"")&&w(o,p),2080&r[0]&&g!==(g=e[80].count+"")&&w(s,g),2080&r[0]&&u!==(u=e[80].folder)&&x(t,"title",u),133152&r[0]&&_(t,"bg-green-50",e[17]("folders",e[80].folder)),133152&r[0]&&_(t,"text-green-700",e[17]("folders",e[80].folder)),133152&r[0]&&_(t,"border-green-200",e[17]("folders",e[80].folder)),133152&r[0]&&_(t,"text-gray-600",!e[17]("folders",e[80].folder)),133152&r[0]&&_(t,"border-transparent",!e[17]("folders",e[80].folder))},d(e){e&&h(t),l=!1,c()}}}function Mt(e){let t,n,r,o,i,a,s,u,l=e[11].length+"";return{c(){t=m("button"),n=y("Load More ("),r=y(e[5]),o=y(" of "),i=y(l),a=y(" shown)"),x(t,"class","w-full text-center px-2 py-2 text-sm text-green-600 hover:bg-green-50 rounded border border-green-200 mt-2")},m(l,c){f(l,t,c),d(t,n),d(t,r),d(t,o),d(t,i),d(t,a),s||(u=b(t,"click",e[14]),s=!0)},p(e,t){32&t[0]&&w(r,e[5]),2048&t[0]&&l!==(l=e[11].length+"")&&w(i,l)},d(e){e&&h(t),s=!1,u()}}}function $t(e){let t;return{c(){t=m("div"),t.textContent="No folders found",x(t,"class","text-xs text-gray-400 px-2 py-2 italic")},m(e,n){f(e,t,n)},d(e){e&&h(t)}}}function Bt(e){let t,n,r,o,i,a,s,u,l,c,p,g,k=e[10].length+"",_=e[7].platforms?"â–¼":"â–¶",S=e[7].platforms&&Ft(e);return{c(){t=m("div"),n=m("button"),r=m("span"),o=y("ðŸ“± Platforms ("),i=y(k),a=y(")"),s=v(),u=m("span"),l=y(_),c=v(),S&&S.c(),x(u,"class","text-gray-400"),x(n,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),x(t,"class","mb-4")},m(h,m){f(h,t,m),d(t,n),d(n,r),d(r,o),d(r,i),d(r,a),d(n,s),d(n,u),d(u,l),d(t,c),S&&S.m(t,null),p||(g=b(n,"click",e[49]),p=!0)},p(e,n){1024&n[0]&&k!==(k=e[10].length+"")&&w(i,k),128&n[0]&&_!==(_=e[7].platforms?"â–¼":"â–¶")&&w(l,_),e[7].platforms?S?S.p(e,n):(S=Ft(e),S.c(),S.m(t,null)):S&&(S.d(1),S=null)},d(e){e&&h(t),S&&S.d(),p=!1,g()}}}function Ft(e){let t,n=U(e[10]),r=[];for(let t=0;t<n.length;t+=1)r[t]=Nt(lt(e,n,t));return{c(){t=m("div");for(let e=0;e<r.length;e+=1)r[e].c();x(t,"class","space-y-1")},m(e,n){f(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,o){if(1180672&o[0]){let i;for(n=U(e[10]),i=0;i<n.length;i+=1){const a=lt(e,n,i);r[i]?r[i].p(a,o):(r[i]=Nt(a),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(e){e&&h(t),p(r,e)}}}function Nt(e){let t,n,r,o,i,a,s,u,l,c,p,g=he(e[77].platform)+"",k=fe(e[77].platform)+"",S=e[77].count+"";function P(){return e[50](e[77])}return{c(){t=m("button"),n=m("span"),r=y(g),o=v(),i=y(k),a=v(),s=m("span"),u=y(S),l=v(),x(s,"class","text-xs text-gray-400"),x(t,"class","w-full text-left px-2 py-1.5 text-sm hover:bg-gray-100 rounded border flex items-center justify-between"),_(t,"bg-indigo-50",e[17]("platforms",e[77].platform)),_(t,"text-indigo-700",e[17]("platforms",e[77].platform)),_(t,"border-indigo-200",e[17]("platforms",e[77].platform)),_(t,"text-gray-600",!e[17]("platforms",e[77].platform)),_(t,"border-transparent",!e[17]("platforms",e[77].platform))},m(e,h){f(e,t,h),d(t,n),d(n,r),d(n,o),d(n,i),d(t,a),d(t,s),d(s,u),d(t,l),c||(p=b(t,"click",P),c=!0)},p(n,o){e=n,1024&o[0]&&g!==(g=he(e[77].platform)+"")&&w(r,g),1024&o[0]&&k!==(k=fe(e[77].platform)+"")&&w(i,k),1024&o[0]&&S!==(S=e[77].count+"")&&w(u,S),132096&o[0]&&_(t,"bg-indigo-50",e[17]("platforms",e[77].platform)),132096&o[0]&&_(t,"text-indigo-700",e[17]("platforms",e[77].platform)),132096&o[0]&&_(t,"border-indigo-200",e[17]("platforms",e[77].platform)),132096&o[0]&&_(t,"text-gray-600",!e[17]("platforms",e[77].platform)),132096&o[0]&&_(t,"border-transparent",!e[17]("platforms",e[77].platform))},d(e){e&&h(t),c=!1,p()}}}function Lt(e){let t,n,r,o,i,a,s,u,l,c,p,g,k=e[9].length+"",_=e[7].creators?"â–¼":"â–¶",S=e[7].creators&&zt(e);return{c(){t=m("div"),n=m("button"),r=m("span"),o=y("ðŸ‘¤ Top Creators ("),i=y(k),a=y(")"),s=v(),u=m("span"),l=y(_),c=v(),S&&S.c(),x(u,"class","text-gray-400"),x(n,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),x(t,"class","mb-4")},m(h,m){f(h,t,m),d(t,n),d(n,r),d(r,o),d(r,i),d(r,a),d(n,s),d(n,u),d(u,l),d(t,c),S&&S.m(t,null),p||(g=b(n,"click",e[51]),p=!0)},p(e,n){512&n[0]&&k!==(k=e[9].length+"")&&w(i,k),128&n[0]&&_!==(_=e[7].creators?"â–¼":"â–¶")&&w(l,_),e[7].creators?S?S.p(e,n):(S=zt(e),S.c(),S.m(t,null)):S&&(S.d(1),S=null)},d(e){e&&h(t),S&&S.d(),p=!1,g()}}}function zt(e){let t,n,r=U(e[9].slice(0,e[6])),o=[];for(let t=0;t<r.length;t+=1)o[t]=Qt(ut(e,r,t));let i=e[9].length>e[6]&&Ut(e);return{c(){t=m("div");for(let e=0;e<o.length;e+=1)o[e].c();n=v(),i&&i.c(),x(t,"class","space-y-1 max-h-48 overflow-y-auto")},m(e,r){f(e,t,r);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);d(t,n),i&&i.m(t,null)},p(e,a){if(2228800&a[0]){let i;for(r=U(e[9].slice(0,e[6])),i=0;i<r.length;i+=1){const s=ut(e,r,i);o[i]?o[i].p(s,a):(o[i]=Qt(s),o[i].c(),o[i].m(t,n))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}e[9].length>e[6]?i?i.p(e,a):(i=Ut(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&h(t),p(o,e),i&&i.d()}}}function Qt(e){let t,n,r,o,i,a,s,u,l,c,p,g=he(e[73].platform)+"",k=e[73].creator+"",S=e[73].count+"";function P(){return e[52](e[73])}return{c(){t=m("button"),n=m("div"),r=m("span"),o=y(g),i=v(),a=y(k),s=v(),u=m("span"),l=y(S),x(r,"class","truncate"),x(u,"class","text-xs text-gray-400 ml-1"),x(n,"class","flex items-center justify-between"),x(t,"class","w-full text-left px-2 py-1.5 text-sm hover:bg-gray-100 rounded border"),_(t,"bg-pink-50",e[74]),_(t,"text-pink-700",e[74]),_(t,"border-pink-200",e[74]),_(t,"text-gray-600",!e[74]),_(t,"border-transparent",!e[74])},m(e,h){f(e,t,h),d(t,n),d(n,r),d(r,o),d(r,i),d(r,a),d(n,s),d(n,u),d(u,l),c||(p=b(t,"click",P),c=!0)},p(n,r){e=n,576&r[0]&&g!==(g=he(e[73].platform)+"")&&w(o,g),576&r[0]&&k!==(k=e[73].creator+"")&&w(a,k),576&r[0]&&S!==(S=e[73].count+"")&&w(l,S),131648&r[0]&&_(t,"bg-pink-50",e[74]),131648&r[0]&&_(t,"text-pink-700",e[74]),131648&r[0]&&_(t,"border-pink-200",e[74]),131648&r[0]&&_(t,"text-gray-600",!e[74]),131648&r[0]&&_(t,"border-transparent",!e[74])},d(e){e&&h(t),c=!1,p()}}}function Ut(e){let t,n,r,o,i,a,s=e[9].length-e[6]+"";return{c(){t=m("button"),n=y("Show more ("),r=y(s),o=y(" more)"),x(t,"class","w-full text-center px-2 py-1 text-xs text-pink-600 hover:bg-pink-50 rounded")},m(s,u){f(s,t,u),d(t,n),d(t,r),d(t,o),i||(a=b(t,"click",e[15]),i=!0)},p(e,t){576&t[0]&&s!==(s=e[9].length-e[6]+"")&&w(r,s)},d(e){e&&h(t),i=!1,a()}}}function Ht(e){let t,n,r,o,i,a,s,u,l,c,p,g,k=e[8].length+"",_=e[7].contentTypes?"â–¼":"â–¶",S=e[7].contentTypes&&Vt(e);return{c(){t=m("div"),n=m("button"),r=m("span"),o=y("ðŸ“ Content Types ("),i=y(k),a=y(")"),s=v(),u=m("span"),l=y(_),c=v(),S&&S.c(),x(u,"class","text-gray-400"),x(n,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),x(t,"class","mb-4")},m(h,m){f(h,t,m),d(t,n),d(n,r),d(r,o),d(r,i),d(r,a),d(n,s),d(n,u),d(u,l),d(t,c),S&&S.m(t,null),p||(g=b(n,"click",e[53]),p=!0)},p(e,n){256&n[0]&&k!==(k=e[8].length+"")&&w(i,k),128&n[0]&&_!==(_=e[7].contentTypes?"â–¼":"â–¶")&&w(l,_),e[7].contentTypes?S?S.p(e,n):(S=Vt(e),S.c(),S.m(t,null)):S&&(S.d(1),S=null)},d(e){e&&h(t),S&&S.d(),p=!1,g()}}}function Vt(e){let t,n=U(e[8]),r=[];for(let t=0;t<n.length;t+=1)r[t]=Wt(st(e,n,t));return{c(){t=m("div");for(let e=0;e<r.length;e+=1)r[e].c();x(t,"class","space-y-1")},m(e,n){f(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null)},p(e,o){if(4325632&o[0]){let i;for(n=U(e[8]),i=0;i<n.length;i+=1){const a=st(e,n,i);r[i]?r[i].p(a,o):(r[i]=Wt(a),r[i].c(),r[i].m(t,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(e){e&&h(t),p(r,e)}}}function Wt(e){let t,n,r,o,i,a,s,u,l,c=pe(e[70].type)+"",p=e[70].count+"";function g(){return e[54](e[70])}return{c(){t=m("button"),n=m("span"),r=y(c),o=v(),i=m("span"),a=y(p),s=v(),x(i,"class","text-xs text-gray-400"),x(t,"class","w-full text-left px-2 py-1.5 text-sm hover:bg-gray-100 rounded border flex items-center justify-between"),_(t,"bg-orange-50",e[17]("types",e[70].type)),_(t,"text-orange-700",e[17]("types",e[70].type)),_(t,"border-orange-200",e[17]("types",e[70].type)),_(t,"text-gray-600",!e[17]("types",e[70].type)),_(t,"border-transparent",!e[17]("types",e[70].type))},m(e,c){f(e,t,c),d(t,n),d(n,r),d(t,o),d(t,i),d(i,a),d(t,s),u||(l=b(t,"click",g),u=!0)},p(n,o){e=n,256&o[0]&&c!==(c=pe(e[70].type)+"")&&w(r,c),256&o[0]&&p!==(p=e[70].count+"")&&w(a,p),131328&o[0]&&_(t,"bg-orange-50",e[17]("types",e[70].type)),131328&o[0]&&_(t,"text-orange-700",e[17]("types",e[70].type)),131328&o[0]&&_(t,"border-orange-200",e[17]("types",e[70].type)),131328&o[0]&&_(t,"text-gray-600",!e[17]("types",e[70].type)),131328&o[0]&&_(t,"border-transparent",!e[17]("types",e[70].type))},d(e){e&&h(t),u=!1,l()}}}function Yt(e){let t;return{c(){t=y("âœ— No publish date")},m(e,n){f(e,t,n)},d(e){e&&h(t)}}}function Gt(e){let t;return{c(){t=y("âœ“ Has publish date")},m(e,n){f(e,t,n)},d(e){e&&h(t)}}}function Xt(e){let t;return{c(){t=y("All content")},m(e,n){f(e,t,n)},d(e){e&&h(t)}}}function Jt(t){let n,o,i,a,s,u,l,c,p,g,k,S,P,A,C,E,T,O,R,D,j,K,I,q,M,$,B,F,N,L,z,Q,U,H,V,W,Y,G,X,J,Z,ee,te,ne,re,oe,ie,ae,se,ue,le,ce,de,fe,he,pe,me,ge,ye,ve,be,xe,we=t[7].domains?"â–¼":"â–¶",ke=t[7].folders?"â–¼":"â–¶",_e=t[2]&&yt(t),Se=t[2]&&vt(t);function Pe(e,t){return e[0]?At:Pt}let Ae=Pe(t),Ce=Ae(t),Ee=t[7].domains&&Ct(t);function Te(e,t){return e[0]?Kt:jt}let Oe=Te(t),Re=Oe(t),De=t[7].folders&&It(t),je=t[10].length>0&&Bt(t),Ke=t[9].length>0&&Lt(t),Ie=t[8].length>0&&Ht(t);function qe(e,t){return null===e[3].hasPublishedDate?Xt:!0===e[3].hasPublishedDate?Gt:Yt}let Me=qe(t),$e=Me(t);return{c(){n=m("div"),o=m("div"),i=m("div"),a=m("h3"),a.textContent="Filters",s=v(),_e&&_e.c(),u=v(),Se&&Se.c(),l=v(),c=m("div"),p=m("button"),g=m("span"),Ce.c(),k=v(),S=m("span"),P=y(we),A=v(),Ee&&Ee.c(),C=v(),E=m("div"),T=m("button"),O=m("span"),Re.c(),R=v(),D=m("span"),j=y(ke),K=v(),De&&De.c(),I=v(),je&&je.c(),q=v(),Ke&&Ke.c(),M=v(),Ie&&Ie.c(),$=v(),B=m("div"),F=m("h4"),F.textContent="Date Added",N=v(),L=m("div"),z=m("button"),z.textContent="This Week",Q=v(),U=m("button"),U.textContent="This Month",H=v(),V=m("button"),V.textContent="This Year",W=v(),Y=m("div"),G=m("h4"),G.textContent="â±ï¸ Reading Time",X=v(),J=m("div"),Z=m("button"),Z.textContent="Quick read (< 5 min)",ee=v(),te=m("button"),te.textContent="Medium (5-15 min)",ne=v(),re=m("button"),re.textContent="Long read (> 15 min)",oe=v(),ie=m("div"),ae=m("h4"),ae.textContent="â­ Content Quality",se=v(),ue=m("div"),le=m("button"),le.textContent="High (70-100)",ce=v(),de=m("button"),de.textContent="Medium (40-69)",fe=v(),he=m("button"),he.textContent="Low (< 40)",pe=v(),me=m("div"),ge=m("h4"),ge.textContent="ðŸ“… Published Date",ye=v(),ve=m("button"),$e.c(),x(a,"class","text-sm font-medium text-gray-900"),x(i,"class","flex items-center justify-between mb-3"),x(o,"class","mb-6"),x(S,"class","text-gray-400"),x(p,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),x(c,"class","mb-4"),x(D,"class","text-gray-400"),x(T,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),x(E,"class","mb-4"),x(F,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),x(z,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),_(z,"bg-blue-50","week"===t[3].dateRange?.period),_(z,"text-blue-700","week"===t[3].dateRange?.period),x(U,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),_(U,"bg-blue-50","month"===t[3].dateRange?.period),_(U,"text-blue-700","month"===t[3].dateRange?.period),x(V,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),_(V,"bg-blue-50","year"===t[3].dateRange?.period),_(V,"text-blue-700","year"===t[3].dateRange?.period),x(L,"class","space-y-1"),x(B,"class","mb-4"),x(G,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),x(Z,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),_(Z,"bg-blue-50",5===t[3].readingTimeRange?.max),_(Z,"text-blue-700",5===t[3].readingTimeRange?.max),x(te,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),_(te,"bg-blue-50",5===t[3].readingTimeRange?.min&&15===t[3].readingTimeRange?.max),_(te,"text-blue-700",5===t[3].readingTimeRange?.min&&15===t[3].readingTimeRange?.max),x(re,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),_(re,"bg-blue-50",15===t[3].readingTimeRange?.min),_(re,"text-blue-700",15===t[3].readingTimeRange?.min),x(J,"class","space-y-2"),x(Y,"class","mb-4"),x(ae,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),x(le,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),_(le,"bg-green-50",70===t[3].qualityScoreRange?.min),_(le,"text-green-700",70===t[3].qualityScoreRange?.min),x(de,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),_(de,"bg-yellow-50",40===t[3].qualityScoreRange?.min&&69===t[3].qualityScoreRange?.max),_(de,"text-yellow-700",40===t[3].qualityScoreRange?.min&&69===t[3].qualityScoreRange?.max),x(he,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),_(he,"bg-orange-50",39===t[3].qualityScoreRange?.max),_(he,"text-orange-700",39===t[3].qualityScoreRange?.max),x(ue,"class","space-y-2"),x(ie,"class","mb-4"),x(ge,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),x(ve,"class","w-full text-left px-2 py-1 text-sm hover:bg-gray-100 rounded"),_(ve,"bg-blue-50",!0===t[3].hasPublishedDate),_(ve,"text-blue-700",!0===t[3].hasPublishedDate),_(ve,"bg-orange-50",!1===t[3].hasPublishedDate),_(ve,"text-orange-700",!1===t[3].hasPublishedDate),x(me,"class","mb-4"),x(n,"class","w-64 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0")},m(e,r){f(e,n,r),d(n,o),d(o,i),d(i,a),d(i,s),_e&&_e.m(i,null),d(o,u),Se&&Se.m(o,null),d(n,l),d(n,c),d(c,p),d(p,g),Ce.m(g,null),d(p,k),d(p,S),d(S,P),d(c,A),Ee&&Ee.m(c,null),d(n,C),d(n,E),d(E,T),d(T,O),Re.m(O,null),d(T,R),d(T,D),d(D,j),d(E,K),De&&De.m(E,null),d(n,I),je&&je.m(n,null),d(n,q),Ke&&Ke.m(n,null),d(n,M),Ie&&Ie.m(n,null),d(n,$),d(n,B),d(B,F),d(B,N),d(B,L),d(L,z),d(L,Q),d(L,U),d(L,H),d(L,V),d(n,W),d(n,Y),d(Y,G),d(Y,X),d(Y,J),d(J,Z),d(J,ee),d(J,te),d(J,ne),d(J,re),d(n,oe),d(n,ie),d(ie,ae),d(ie,se),d(ie,ue),d(ue,le),d(ue,ce),d(ue,de),d(ue,fe),d(ue,he),d(n,pe),d(n,me),d(me,ge),d(me,ye),d(me,ve),$e.m(ve,null),be||(xe=[b(p,"click",t[43]),b(T,"click",t[47]),b(z,"click",t[55]),b(U,"click",t[56]),b(V,"click",t[57]),b(Z,"click",t[58]),b(te,"click",t[59]),b(re,"click",t[60]),b(le,"click",t[61]),b(de,"click",t[62]),b(he,"click",t[63]),b(ve,"click",t[26])],be=!0)},p(e,t){e[2]?_e?_e.p(e,t):(_e=yt(e),_e.c(),_e.m(i,null)):_e&&(_e.d(1),_e=null),e[2]?Se?Se.p(e,t):(Se=vt(e),Se.c(),Se.m(o,null)):Se&&(Se.d(1),Se=null),Ae===(Ae=Pe(e))&&Ce?Ce.p(e,t):(Ce.d(1),Ce=Ae(e),Ce&&(Ce.c(),Ce.m(g,null))),128&t[0]&&we!==(we=e[7].domains?"â–¼":"â–¶")&&w(P,we),e[7].domains?Ee?Ee.p(e,t):(Ee=Ct(e),Ee.c(),Ee.m(c,null)):Ee&&(Ee.d(1),Ee=null),Oe===(Oe=Te(e))&&Re?Re.p(e,t):(Re.d(1),Re=Oe(e),Re&&(Re.c(),Re.m(O,null))),128&t[0]&&ke!==(ke=e[7].folders?"â–¼":"â–¶")&&w(j,ke),e[7].folders?De?De.p(e,t):(De=It(e),De.c(),De.m(E,null)):De&&(De.d(1),De=null),e[10].length>0?je?je.p(e,t):(je=Bt(e),je.c(),je.m(n,q)):je&&(je.d(1),je=null),e[9].length>0?Ke?Ke.p(e,t):(Ke=Lt(e),Ke.c(),Ke.m(n,M)):Ke&&(Ke.d(1),Ke=null),e[8].length>0?Ie?Ie.p(e,t):(Ie=Ht(e),Ie.c(),Ie.m(n,$)):Ie&&(Ie.d(1),Ie=null),8&t[0]&&_(z,"bg-blue-50","week"===e[3].dateRange?.period),8&t[0]&&_(z,"text-blue-700","week"===e[3].dateRange?.period),8&t[0]&&_(U,"bg-blue-50","month"===e[3].dateRange?.period),8&t[0]&&_(U,"text-blue-700","month"===e[3].dateRange?.period),8&t[0]&&_(V,"bg-blue-50","year"===e[3].dateRange?.period),8&t[0]&&_(V,"text-blue-700","year"===e[3].dateRange?.period),8&t[0]&&_(Z,"bg-blue-50",5===e[3].readingTimeRange?.max),8&t[0]&&_(Z,"text-blue-700",5===e[3].readingTimeRange?.max),8&t[0]&&_(te,"bg-blue-50",5===e[3].readingTimeRange?.min&&15===e[3].readingTimeRange?.max),8&t[0]&&_(te,"text-blue-700",5===e[3].readingTimeRange?.min&&15===e[3].readingTimeRange?.max),8&t[0]&&_(re,"bg-blue-50",15===e[3].readingTimeRange?.min),8&t[0]&&_(re,"text-blue-700",15===e[3].readingTimeRange?.min),8&t[0]&&_(le,"bg-green-50",70===e[3].qualityScoreRange?.min),8&t[0]&&_(le,"text-green-700",70===e[3].qualityScoreRange?.min),8&t[0]&&_(de,"bg-yellow-50",40===e[3].qualityScoreRange?.min&&69===e[3].qualityScoreRange?.max),8&t[0]&&_(de,"text-yellow-700",40===e[3].qualityScoreRange?.min&&69===e[3].qualityScoreRange?.max),8&t[0]&&_(he,"bg-orange-50",39===e[3].qualityScoreRange?.max),8&t[0]&&_(he,"text-orange-700",39===e[3].qualityScoreRange?.max),Me!==(Me=qe(e))&&($e.d(1),$e=Me(e),$e&&($e.c(),$e.m(ve,null))),8&t[0]&&_(ve,"bg-blue-50",!0===e[3].hasPublishedDate),8&t[0]&&_(ve,"text-blue-700",!0===e[3].hasPublishedDate),8&t[0]&&_(ve,"bg-orange-50",!1===e[3].hasPublishedDate),8&t[0]&&_(ve,"text-orange-700",!1===e[3].hasPublishedDate)},i:e,o:e,d(e){e&&h(n),_e&&_e.d(),Se&&Se.d(),Ce.d(),Ee&&Ee.d(),Re.d(),De&&De.d(),je&&je.d(),Ke&&Ke.d(),Ie&&Ie.d(),$e.d(),be=!1,r(xe)}}}function Zt(e){const t=Date.now()-e,n=Math.floor(t/864e5);return 0===n?"Today":1===n?"1 day ago":n<7?`${n} days ago`:n<30?`${Math.floor(n/7)} weeks ago`:n<365?`${Math.floor(n/30)} months ago`:`${Math.floor(n/365)} years ago`}function en(e,t,n){let r,o,i,a,s,u,l;c(e,ke,e=>n(3,l=e)),C();let{searchResultStats:d=null}=t,{isSearchActive:f=!1}=t,h=[],p=[],m=[],g=[],y=[],v=[],b="count",x=30,w=15,k=10,_={platforms:!0,creators:!0,contentTypes:!1,domains:!0,folders:!1};function S(e){n(7,_[e]=!_[e],_)}function P(e){ke.toggleFilter("domains",e)}function E(e){ke.toggleFilter("folders",e)}function T(e){ke.toggleFilter("platforms",e)}function O(e,t){const n=`${t}:${e}`;ke.toggleFilter("creators",{key:n,creator:e,platform:t})}function R(e){ke.toggleFilter("types",e)}function D(e,t){ke.setFilter("readingTimeRange",e||t?{min:e,max:t}:null)}function j(e,t){ke.setFilter("qualityScoreRange",e||t?{min:e,max:t}:null)}function K(e){const t=new Date;let n;switch(e){case"week":n=new Date(t.getTime()-6048e5);break;case"month":n=new Date(t.getFullYear(),t.getMonth(),1);break;case"year":n=new Date(t.getFullYear(),0,1)}!function(e,t,n){ke.setFilter("dateRange",{startDate:e,endDate:t,period:n})}(n.getTime(),t.getTime(),e)}A(async()=>{try{await async function(){n(31,h=await async function(){return(await xe()).byRecency}()),n(32,p=await async function(){return(await xe()).byCount}())}(),await async function(){const e=await ge(),t={},r={},o={};e.forEach(e=>{const n=e.platform||"other";if(t[n]=(t[n]||0)+1,e.creator){const t=`${e.platform||"other"}:${e.creator}`;r[t]||(r[t]={creator:e.creator,platform:e.platform||"other",count:0}),r[t].count++}e.contentType&&(o[e.contentType]=(o[e.contentType]||0)+1)}),n(34,g=Object.entries(t).map(([e,t])=>({platform:e,count:t})).sort((e,t)=>t.count-e.count)),n(35,y=Object.values(r).sort((e,t)=>t.count-e.count)),n(36,v=Object.entries(o).map(([e,t])=>({type:e,count:t})).sort((e,t)=>t.count-e.count))}(),n(33,m=await async function(){try{const e=await ge();return[...new Set(e.map(e=>e.folderPath).filter(e=>e))].sort()}catch(e){return console.error("Error getting unique folders:",e),[]}}())}catch(e){console.error("Error loading filters:",e)}});return e.$$set=e=>{"searchResultStats"in e&&n(28,d=e.searchResultStats),"isSearchActive"in e&&n(0,f=e.isSearchActive)},e.$$.update=()=>{8&e.$$.dirty[0]&&n(2,u=l.domains.length>0||l.folders.length>0||l.platforms.length>0||l.creators.length>0||l.types.length>0||null!==l.dateRange||null!==l.readingTimeRange||null!==l.qualityScoreRange||null!==l.hasPublishedDate||l.tags.length>0),268435463&e.$$.dirty[0]|3&e.$$.dirty[1]&&n(12,r=(f||u)&&d?.domains?d.domains:"recency"===b?h:p),268435461&e.$$.dirty[0]|4&e.$$.dirty[1]&&n(11,o=(f||u)&&d?.folders?d.folders:m),268435461&e.$$.dirty[0]|8&e.$$.dirty[1]&&n(10,i=(f||u)&&d?.platforms?d.platforms:g),268435461&e.$$.dirty[0]|16&e.$$.dirty[1]&&n(9,a=(f||u)&&d?.creators?d.creators:y),268435461&e.$$.dirty[0]|32&e.$$.dirty[1]&&n(8,s=(f||u)&&d?.contentTypes?d.contentTypes:v)},[f,b,u,l,x,w,k,_,s,a,i,o,r,function(){n(4,x+=30)},function(){n(5,w+=15)},function(){n(6,k+=10)},S,function(e,t){return void 0!==l[e]&&(Array.isArray(l[e])?"creators"===e?l[e].some(e=>e.key===t):l[e].some(e=>String(e).toLowerCase()===String(t).toLowerCase()):l[e]===t)},P,E,T,O,R,function(){ke.clearFilters()},D,j,function(){null===l.hasPublishedDate?ke.setFilter("hasPublishedDate",!0):!0===l.hasPublishedDate?ke.setFilter("hasPublishedDate",!1):ke.setFilter("hasPublishedDate",null)},K,d,function(){return u},function(){ke.clearFilters()},h,p,m,g,y,v,e=>T(e),e=>O(e.creator,e.platform),e=>R(e),e=>P(e),e=>E(e),()=>{ke.setFilter("dateRange",null)},()=>S("domains"),()=>n(1,b="recency"),()=>n(1,b="count"),e=>P(e.domain),()=>S("folders"),e=>E(e.folder),()=>S("platforms"),e=>T(e.platform),()=>S("creators"),e=>O(e.creator,e.platform),()=>S("contentTypes"),e=>R(e.type),()=>K("week"),()=>K("month"),()=>K("year"),()=>D(null,5),()=>D(5,15),()=>D(15,null),()=>j(70,100),()=>j(40,69),()=>j(null,39)]}class tn extends J{constructor(e){super(),X(this,e,en,Jt,i,{searchResultStats:28,isSearchActive:0,getHasActiveFilters:29,clearAllFilters:30},null,[-1,-1,-1,-1])}get getHasActiveFilters(){return this.$$.ctx[29]}get clearAllFilters(){return this.$$.ctx[30]}}function nn(e,t,n){const r=e.slice();return r[9]=t[n],r}function rn(t){let n,r;return n=new tn({}),n.$on("filter",t[7]),{c(){V(n.$$.fragment)},m(e,t){W(n,e,t),r=!0},p:e,i(e){r||(z(n.$$.fragment,e),r=!0)},o(e){Q(n.$$.fragment,e),r=!1},d(e){Y(n,e)}}}function on(e){let t,n,o=[],i=new Map,a=U(e[0]);const s=e=>e[9].id;for(let t=0;t<a.length;t+=1){let n=nn(e,a,t),r=s(n);i.set(r,o[t]=ln(r,n))}return{c(){t=m("div");for(let e=0;e<o.length;e+=1)o[e].c();x(t,"class","space-y-3")},m(e,r){f(e,t,r);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);n=!0},p(e,n){1&n&&(a=U(e[0]),N(),o=function(e,t,n,o,i,a,s,u,l,c,d,f){let h=e.length,p=a.length,m=h;const g={};for(;m--;)g[e[m].key]=m;const y=[],v=new Map,b=new Map,x=[];for(m=p;m--;){const e=f(i,a,m),r=n(e);let u=s.get(r);u?o&&x.push(()=>u.p(e,t)):(u=c(r,e),u.c()),v.set(r,y[m]=u),r in g&&b.set(r,Math.abs(m-g[r]))}const w=new Set,k=new Set;function _(e){z(e,1),e.m(u,d),s.set(e.key,e),d=e.first,p--}for(;h&&p;){const t=y[p-1],n=e[h-1],r=t.key,o=n.key;t===n?(d=t.first,h--,p--):v.has(o)?!s.has(r)||w.has(r)?_(t):k.has(o)?h--:b.get(r)>b.get(o)?(k.add(r),_(t)):(w.add(o),h--):(l(n,s),h--)}for(;h--;){const t=e[h];v.has(t.key)||l(t,s)}for(;p;)_(y[p-1]);return r(x),y}(o,n,s,1,e,a,i,t,H,ln,null,nn),L())},i(e){if(!n){for(let e=0;e<a.length;e+=1)z(o[e]);n=!0}},o(e){for(let e=0;e<o.length;e+=1)Q(o[e]);n=!1},d(e){e&&h(t);for(let e=0;e<o.length;e+=1)o[e].d()}}}function an(t){let n;function r(e,t){return e[3]?dn:cn}let o=r(t),i=o(t);return{c(){n=m("div"),i.c(),x(n,"class","text-center text-gray-500 p-4")},m(e,t){f(e,n,t),i.m(n,null)},p(e,t){o===(o=r(e))&&i?i.p(e,t):(i.d(1),i=o(e),i&&(i.c(),i.m(n,null)))},i:e,o:e,d(e){e&&h(n),i.d()}}}function sn(t){let n,r,o,i,a,s,u,l;return{c(){n=m("div"),r=m("p"),o=y("Error: "),i=y(t[2]),a=v(),s=m("button"),s.textContent="Retry",x(s,"class","mt-2 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700"),x(n,"class","text-center text-red-600 p-4")},m(e,c){f(e,n,c),d(n,r),d(r,o),d(r,i),d(n,a),d(n,s),u||(l=b(s,"click",t[5]),u=!0)},p(e,t){4&t&&w(i,e[2])},i:e,o:e,d(e){e&&h(n),u=!1,l()}}}function un(t){let n;return{c(){n=m("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>',x(n,"class","flex items-center justify-center h-32")},m(e,t){f(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function ln(e,t){let n,r,o;return r=new ze({props:{bookmark:t[9]}}),{key:e,first:null,c(){n=y(""),V(r.$$.fragment),this.first=n},m(e,t){f(e,n,t),W(r,e,t),o=!0},p(e,n){t=e;const o={};1&n&&(o.bookmark=t[9]),r.$set(o)},i(e){o||(z(r.$$.fragment,e),o=!0)},o(e){Q(r.$$.fragment,e),o=!1},d(e){e&&h(n),Y(r,e)}}}function cn(t){let n;return{c(){n=m("p"),n.textContent="No bookmarks found"},m(e,t){f(e,n,t)},p:e,d(e){e&&h(n)}}}function dn(e){let t,n,r,o;return{c(){t=m("p"),n=y('No bookmarks found for "'),r=y(e[3]),o=y('"')},m(e,i){f(e,t,i),d(t,n),d(t,r),d(t,o)},p(e,t){8&t&&w(r,e[3])},d(e){e&&h(t)}}}function fn(e){let t,n,o,i,a,s,u,l,c,p,g,k,_,S,P,A,C,E,T,O,R,D,j,K,I,q=e[0].length+"",M=1!==e[0].length?"s":"";g=new at({}),g.$on("search",e[6]);let $=e[4]&&rn(e);const B=[un,sn,an,on],F=[];function U(e,t){return e[1]?0:e[2]?1:0===e[0].length?2:3}return R=U(e),D=F[R]=B[R](e),{c(){t=m("div"),n=m("div"),o=m("div"),i=m("h1"),i.textContent="Bookmark Insight",a=v(),s=m("div"),u=m("button"),u.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"></path></svg>',l=v(),c=m("button"),c.textContent="Dashboard",p=v(),V(g.$$.fragment),k=v(),_=m("div"),S=y(q),P=y(" bookmark"),A=y(M),C=v(),E=m("div"),$&&$.c(),T=v(),O=m("div"),D.c(),x(i,"class","text-lg font-semibold text-gray-900"),x(u,"class","p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100"),x(u,"title","Toggle Filters"),x(c,"class","px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700"),x(s,"class","flex space-x-2"),x(o,"class","flex items-center justify-between mb-3"),x(_,"class","text-xs text-gray-500"),x(n,"class","p-4 border-b border-gray-200 bg-gray-50"),x(O,"class","flex-1 overflow-y-auto p-4"),x(E,"class","flex flex-1 overflow-hidden"),x(t,"class","w-96 h-96 bg-white flex flex-col")},m(r,h){f(r,t,h),d(t,n),d(n,o),d(o,i),d(o,a),d(o,s),d(s,u),d(s,l),d(s,c),d(n,p),W(g,n,null),d(n,k),d(n,_),d(_,S),d(_,P),d(_,A),d(t,C),d(t,E),$&&$.m(E,null),d(E,T),d(E,O),F[R].m(O,null),j=!0,K||(I=[b(u,"click",e[8]),b(c,"click",hn)],K=!0)},p(e,[t]){(!j||1&t)&&q!==(q=e[0].length+"")&&w(S,q),(!j||1&t)&&M!==(M=1!==e[0].length?"s":"")&&w(A,M),e[4]?$?($.p(e,t),16&t&&z($,1)):($=rn(e),$.c(),z($,1),$.m(E,T)):$&&(N(),Q($,1,1,()=>{$=null}),L());let n=R;R=U(e),R===n?F[R].p(e,t):(N(),Q(F[n],1,1,()=>{F[n]=null}),L(),D=F[R],D?D.p(e,t):(D=F[R]=B[R](e),D.c()),z(D,1),D.m(O,null))},i(e){j||(z(g.$$.fragment,e),z($),z(D),j=!0)},o(e){Q(g.$$.fragment,e),Q($),Q(D),j=!1},d(e){e&&h(t),Y(g),$&&$.d(),F[R].d(),K=!1,r(I)}}}function hn(){chrome.tabs.create({url:chrome.runtime.getURL("dashboard.html")}),window.close()}function pn(e,t,n){let r=[],o=!0,i=null,a="",s=!1;async function u(){n(0,r=await ge())}return A(async()=>{try{await u()}catch(e){n(2,i=e.message)}finally{n(1,o=!1)}}),[r,o,i,a,s,u,async function(e){const t=e.detail.query;n(3,a=t);try{n(1,o=!0),n(0,r=await async function(e){try{if(!e||!e.trim())return await me.bookmarks.orderBy("dateAdded").reverse().toArray();const t=e.toLowerCase();return(await me.bookmarks.toArray()).filter(e=>e.title.toLowerCase().includes(t)||e.url.toLowerCase().includes(t)||e.domain&&e.domain.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)||e.keywords&&e.keywords.some(e=>e.toLowerCase().includes(t))).sort((e,t)=>t.dateAdded-e.dateAdded)}catch(e){return console.error("Search error:",e),[]}}(t))}catch(e){n(2,i=e.message)}finally{n(1,o=!1)}},async function(e){const{type:t,value:a}=e.detail;try{switch(n(1,o=!0),t){case"clear":n(0,r=await ge());break;case"domain":n(0,r=await async function(e){try{return await me.bookmarks.where("domain").equals(e).toArray()}catch(e){return console.error("Error getting bookmarks by domain:",e),[]}}(a));break;case"folder":n(0,r=await async function(e){try{return(await ge()).filter(t=>t.folderPath===e)}catch(e){return console.error("Error getting bookmarks by folder:",e),[]}}(a));break;case"date":n(0,r=await async function(e,t){try{return await me.bookmarks.where("dateAdded").between(e,t,!0,!0).toArray()}catch(e){return console.error("Error getting bookmarks by date range:",e),[]}}(a.startDate,a.endDate))}}catch(e){n(2,i=e.message)}finally{n(1,o=!1)}},function(){n(4,s=!s)}]}const mn=new class extends J{constructor(e){super(),X(this,e,pn,fn,i,{})}}({target:document.body});export{mn as default};
