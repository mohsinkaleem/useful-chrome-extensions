function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s,a;function l(e,t){return e===t||(s||(s=document.createElement("a")),s.href=t,e===s.href)}function u(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function g(e){return document.createTextNode(e)}function m(){return g(" ")}function y(){return g("")}function v(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){t=""+t,e.data!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function k(e){a=e}function _(){if(!a)throw new Error("Function called outside component initialization");return a}function A(e){_().$$.on_mount.push(e)}function C(){const e=_();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}(t,n,{cancelable:r});return i.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}const E=[],P=[];let S=[];const O=[],j=Promise.resolve();let B=!1;function M(e){S.push(e)}const D=new Set;let I=0;function T(){if(0!==I)return;const e=a;do{try{for(;I<E.length;){const e=E[I];I++,k(e),K(e.$$)}}catch(e){throw E.length=0,I=0,e}for(k(null),E.length=0,I=0;P.length;)P.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];D.has(t)||(D.add(t),t())}S.length=0}while(E.length);for(;O.length;)O.pop()();B=!1,D.clear(),k(e)}function K(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(M)}}const q=new Set;function L(e,t){e&&e.i&&(q.delete(e),e.i(t))}function R(e){return void 0!==e?.length?e:Array.from(e)}function z(e,t){e.d(1),t.delete(e.key)}function F(e,n,o){const{fragment:s,after_update:a}=e.$$;s&&s.m(n,o),M(()=>{const n=e.$$.on_mount.map(t).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...n):r(n),e.$$.on_mount=[]}),a.forEach(M)}function $(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];S.forEach(r=>-1===e.indexOf(r)?t.push(r):n.push(r)),n.forEach(e=>e()),S=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function N(e,t){-1===e.$$.dirty[0]&&(E.push(e),B||(B=!0,j.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function U(t,i,o,s,l,u,c=null,f=[-1]){const d=a;k(t);const p=t.$$={fragment:null,ctx:[],props:u,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:i.target||d.$$.root};c&&c(p.root);let g=!1;if(p.ctx=o?o(t,i.props||{},(e,n,...r)=>{const i=r.length?r[0]:n;return p.ctx&&l(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),g&&N(t,e)),n}):[],p.update(),g=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);p.fragment&&p.fragment.l(e),e.forEach(h)}else p.fragment&&p.fragment.c();i.intro&&L(t.$$.fragment),F(t,i.target,i.anchor),T()}k(d)}class H{$$=void 0;$$set=void 0;$destroy(){$(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function W(e,t,n){const r=e.slice();return r[13]=t[n],r}function V(e,t,n){const r=e.slice();return r[16]=t[n],r}function Q(e,t,n){const r=e.slice();return r[19]=t[n],r}function Y(e,t,n){const r=e.slice();return r[19]=t[n],r}function G(t){let n,r,i;return{c(){n=d("button"),n.innerHTML='<svg class="h-5 w-5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',b(n,"class","absolute inset-y-0 right-0 pr-3 flex items-center"),b(n,"type","button"),b(n,"title","Clear search (Esc)")},m(e,o){c(e,n,o),r||(i=v(n,"click",t[7]),r=!0)},p:e,d(e){e&&h(n),r=!1,i()}}}function J(e){let t,n,r,i,o=R(e[4].positive),s=[];for(let t=0;t<o.length;t+=1)s[t]=X(Y(e,o,t));let a=R(e[4].negative),l=[];for(let t=0;t<a.length;t+=1)l[t]=Z(Q(e,a,t));let p=R(e[4].phrases),g=[];for(let t=0;t<p.length;t+=1)g[t]=ee(V(e,p,t));let y=R(e[4].regexPatterns),v=[];for(let t=0;t<y.length;t+=1)v[t]=te(W(e,y,t));return{c(){t=d("div");for(let e=0;e<s.length;e+=1)s[e].c();n=m();for(let e=0;e<l.length;e+=1)l[e].c();r=m();for(let e=0;e<g.length;e+=1)g[e].c();i=m();for(let e=0;e<v.length;e+=1)v[e].c();b(t,"class","flex flex-wrap gap-1.5 mt-2")},m(e,o){c(e,t,o);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);u(t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null);u(t,r);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(t,null);u(t,i);for(let e=0;e<v.length;e+=1)v[e]&&v[e].m(t,null)},p(e,u){if(16&u){let r;for(o=R(e[4].positive),r=0;r<o.length;r+=1){const i=Y(e,o,r);s[r]?s[r].p(i,u):(s[r]=X(i),s[r].c(),s[r].m(t,n))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}if(16&u){let n;for(a=R(e[4].negative),n=0;n<a.length;n+=1){const i=Q(e,a,n);l[n]?l[n].p(i,u):(l[n]=Z(i),l[n].c(),l[n].m(t,r))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}if(16&u){let n;for(p=R(e[4].phrases),n=0;n<p.length;n+=1){const r=V(e,p,n);g[n]?g[n].p(r,u):(g[n]=ee(r),g[n].c(),g[n].m(t,i))}for(;n<g.length;n+=1)g[n].d(1);g.length=p.length}if(16&u){let n;for(y=R(e[4].regexPatterns),n=0;n<y.length;n+=1){const r=W(e,y,n);v[n]?v[n].p(r,u):(v[n]=te(r),v[n].c(),v[n].m(t,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=y.length}},d(e){e&&h(t),f(s,e),f(l,e),f(g,e),f(v,e)}}}function X(e){let t,n,r,i,o,s=e[19]+"";return{c(){t=d("span"),n=p("svg"),r=p("path"),i=m(),o=g(s),b(r,"fill-rule","evenodd"),b(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),b(r,"clip-rule","evenodd"),b(n,"class","w-3 h-3 mr-1"),b(n,"fill","currentColor"),b(n,"viewBox","0 0 20 20"),b(t,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300")},m(e,s){c(e,t,s),u(t,n),u(n,r),u(t,i),u(t,o)},p(e,t){16&t&&s!==(s=e[19]+"")&&x(o,s)},d(e){e&&h(t)}}}function Z(e){let t,n,r,i,o,s=e[19]+"";return{c(){t=d("span"),n=p("svg"),r=p("path"),i=m(),o=g(s),b(r,"fill-rule","evenodd"),b(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),b(r,"clip-rule","evenodd"),b(n,"class","w-3 h-3 mr-1"),b(n,"fill","currentColor"),b(n,"viewBox","0 0 20 20"),b(t,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300")},m(e,s){c(e,t,s),u(t,n),u(n,r),u(t,i),u(t,o)},p(e,t){16&t&&s!==(s=e[19]+"")&&x(o,s)},d(e){e&&h(t)}}}function ee(e){let t,n,r,i,o,s,a=e[16]+"";return{c(){t=d("span"),n=p("svg"),r=p("path"),i=g('\n          "'),o=g(a),s=g('"'),b(r,"fill-rule","evenodd"),b(r,"d","M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z"),b(r,"clip-rule","evenodd"),b(n,"class","w-3 h-3 mr-1"),b(n,"fill","currentColor"),b(n,"viewBox","0 0 20 20"),b(t,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300")},m(e,a){c(e,t,a),u(t,n),u(n,r),u(t,i),u(t,o),u(t,s)},p(e,t){16&t&&a!==(a=e[16]+"")&&x(o,a)},d(e){e&&h(t)}}}function te(e){let t,n,r,i,o,s,a=e[13]+"";return{c(){t=d("span"),n=p("svg"),r=p("path"),i=m(),o=g(a),s=m(),b(r,"stroke-linecap","round"),b(r,"stroke-linejoin","round"),b(r,"stroke-width","2"),b(r,"d","M10 20l4-16m4 4l-4 4 4 4M6 16l-4-4 4-4"),b(n,"class","w-3 h-3 mr-1"),b(n,"fill","none"),b(n,"stroke","currentColor"),b(n,"viewBox","0 0 20 20"),b(t,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300")},m(e,a){c(e,t,a),u(t,n),u(n,r),u(t,i),u(t,o),u(t,s)},p(e,t){16&t&&a!==(a=e[13]+"")&&x(o,a)},d(e){e&&h(t)}}}function ne(e){let t;return{c(){t=d("div"),t.innerHTML='<h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"><svg class="w-4 h-4 text-blue-500 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>\n        Search Syntax</h4> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300 rounded text-xs whitespace-nowrap">+term</code> <span class="text-gray-600 dark:text-gray-400">Must include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300 rounded text-xs whitespace-nowrap">-term</code> <span class="text-gray-600 dark:text-gray-400">Must NOT include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300 rounded text-xs whitespace-nowrap">&quot;exact phrase&quot;</code> <span class="text-gray-600 dark:text-gray-400">Match exact phrase</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs whitespace-nowrap">word</code> <span class="text-gray-600 dark:text-gray-400">Regular search term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300 rounded text-xs whitespace-nowrap">/regex/</code> <span class="text-gray-600">Regular expression pattern</span></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><svg class="w-4 h-4 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>\n          Special Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">category:tech</code> <span class="text-gray-600">üìÅ Filter by category</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">domain:github.com</code> <span class="text-gray-600">üåê Filter by domain</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">folder:&quot;Work/Projects&quot;</code> <span class="text-gray-600">üìÇ Filter by folder path</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">accessed:yes</code> <span class="text-gray-600">üëÜ Has been accessed (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">stale:yes</code> <span class="text-gray-600">‚è∞ Old &amp; never accessed</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-teal-100 text-teal-800 rounded text-xs whitespace-nowrap">enriched:yes</code> <span class="text-gray-600">‚ú® Has metadata (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-700 rounded text-xs whitespace-nowrap">dead:yes</code> <span class="text-gray-600">üíÄ Dead links (yes/no)</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><span class="text-lg">üì±</span>\n          Platform Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">platform:youtube</code> <span class="text-gray-600">üì∫ Filter by platform (youtube, github, medium, etc.)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">channel:@mkbhd</code> <span class="text-gray-600">üì∫ YouTube channel (with or without @)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">repo:facebook/react</code> <span class="text-gray-600">üíª GitHub repository (owner/repo)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">author:username</code> <span class="text-gray-600">‚úçÔ∏è Blog/article author</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">type:video</code> <span class="text-gray-600">üìù Content type (video, issue, article, repo, pr)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">hasimage:yes</code> <span class="text-gray-600">üñºÔ∏è Has thumbnail image (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">playlist:PLxxx</code> <span class="text-gray-600">üéµ YouTube playlist ID</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><p class="text-xs text-gray-500"><strong>Example:</strong> <code class="bg-gray-100 px-1 rounded">javascript +tutorial -video &quot;best practices&quot;</code></p> <p class="text-xs text-gray-500 mt-1"><strong>With filters:</strong> <code class="bg-gray-100 px-1 rounded">domain:github.com category:development enriched:yes</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Platform:</strong> <code class="bg-gray-100 px-1 rounded">platform:youtube channel:@fireship type:video</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Regex:</strong> <code class="bg-gray-100 px-1 rounded">/react.*hooks?/</code></p></div>',b(t,"class","absolute z-20 w-full mt-2 p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-[70vh] overflow-y-auto")},m(e,n){c(e,t,n)},d(e){e&&h(t)}}}function re(t){let n,i,o,s,a,l,f,p,g,y,x,k,_,A=t[0]&&G(t),C=t[0]&&(t[4].positive.length>0||t[4].negative.length>0||t[4].phrases.length>0||t[4].regexPatterns.length>0)&&J(t),E=t[3]&&ne();return{c(){n=d("div"),i=d("div"),o=d("div"),s=d("div"),s.innerHTML='<svg class="h-5 w-5 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',a=m(),l=d("input"),f=m(),A&&A.c(),p=m(),g=d("button"),g.innerHTML='<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',y=m(),C&&C.c(),x=m(),E&&E.c(),b(s,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),b(l,"type","text"),b(l,"placeholder",t[1]),b(l,"class","block w-full pl-10 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-800 placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"),b(l,"autocomplete","off"),b(l,"spellcheck","false"),b(o,"class","relative flex-1"),b(g,"class","p-2.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg border border-gray-300 dark:border-gray-600 transition-colors"),b(g,"type","button"),b(g,"title","Search help"),b(i,"class","flex items-center gap-2"),b(n,"class","relative search-container")},m(e,r){c(e,n,r),u(n,i),u(i,o),u(o,s),u(o,a),u(o,l),t[9](l),w(l,t[0]),u(o,f),A&&A.m(o,null),u(i,p),u(i,g),u(n,y),C&&C.m(n,null),u(n,x),E&&E.m(n,null),k||(_=[v(l,"input",t[10]),v(l,"input",t[5]),v(l,"focus",ie),v(l,"keydown",t[6]),v(g,"click",t[8])],k=!0)},p(e,[t]){2&t&&b(l,"placeholder",e[1]),1&t&&l.value!==e[0]&&w(l,e[0]),e[0]?A?A.p(e,t):(A=G(e),A.c(),A.m(o,null)):A&&(A.d(1),A=null),e[0]&&(e[4].positive.length>0||e[4].negative.length>0||e[4].phrases.length>0||e[4].regexPatterns.length>0)?C?C.p(e,t):(C=J(e),C.c(),C.m(n,x)):C&&(C.d(1),C=null),e[3]?E||(E=ne(),E.c(),E.m(n,null)):E&&(E.d(1),E=null)},i:e,o:e,d(e){e&&h(n),t[9](null),A&&A.d(),C&&C.d(),E&&E.d(),k=!1,r(_)}}}function ie(){}function oe(e,t,n){let r;const i=C();let o,s,{value:a=""}=t,{placeholder:l='Search: use +term (must include), -term (exclude), "exact phrase"'}=t,u=!1;function c(){n(0,a=""),i("search",{query:""}),s?.focus()}return A(()=>{}),e.$$set=e=>{"value"in e&&n(0,a=e.value),"placeholder"in e&&n(1,l=e.placeholder)},e.$$.update=()=>{1&e.$$.dirty&&n(4,r=function(e){if(!e)return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[]};const t=[],n=[],r=[],i=[],o=[];(e.match(/\/([^\/]+)\/([gimsuvy]*)?/g)||[]).forEach(e=>o.push(e));let s=e.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();return(s.match(/"([^"]+)"/g)||[]).forEach(e=>r.push(e.slice(1,-1))),s=s.replace(/"[^"]+"/g,"").trim(),s.split(/\s+/).filter(e=>e.length>0).forEach(e=>{e.startsWith("+")&&e.length>1?t.push(e.slice(1)):e.startsWith("-")&&e.length>1?n.push(e.slice(1)):i.push(e)}),{positive:t,negative:n,phrases:r,regular:i,regexPatterns:o}}(a))},[a,l,s,u,r,function(e){n(0,a=e.target.value),clearTimeout(o),o=setTimeout(()=>{i("search",{query:a})},200)},function(e){"Escape"===e.key?c():"Enter"===e.key&&(clearTimeout(o),i("search",{query:a}))},c,function(){n(3,u=!u)},function(e){P[e?"unshift":"push"](()=>{s=e,n(2,s)})},function(){a=this.value,n(0,a)}]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class se extends H{constructor(e){super(),U(this,e,oe,re,o,{value:0,placeholder:1})}}var ae="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ue={exports:{}};ue.exports=function(){
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation.
	    Permission to use, copy, modify, and/or distribute this software for any
	    purpose with or without fee is hereby granted.
	    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	    PERFORMANCE OF THIS SOFTWARE.
	    ***************************************************************************** */
var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:ae,o=Object.keys,s=Array.isArray;function a(e,t){return"object"!=typeof t||o(t).forEach(function(n){e[n]=t[n]}),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,u={}.hasOwnProperty;function c(e,t){return u.call(e,t)}function h(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(t).forEach(function(n){d(e,n,t[n])})}var f=Object.defineProperty;function d(e,t,n,r){f(e,t,a(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),d(e.prototype,"constructor",e),{extend:h.bind(null,e.prototype)}}}}var g=Object.getOwnPropertyDescriptor;function m(e,t){var n;return g(e,t)||(n=l(e))&&m(n,t)}var y=[].slice;function v(e,t,n){return y.call(e,t,n)}function b(e,t){return t(e)}function x(e){if(!e)throw new Error("Assertion Failed")}function w(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function k(e,t){return e.reduce(function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e},{})}function _(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=_(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(-1!==s){var a=e[t.substr(0,s)];return null==a?void 0:_(a,t.substr(s+1))}}function A(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){x("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)A(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),l=t.substr(o+1);if(""===l)void 0===n?s(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];u&&c(e,a)||(u=e[a]={}),A(u,l,n)}}else void 0===n?s(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function C(e,t){"string"==typeof t?A(e,t,void 0):"length"in t&&[].map.call(t,function(t){A(e,t,void 0)})}function E(e){var t={};for(var n in e)c(e,n)&&(t[n]=e[n]);return t}var P=[].concat;function S(e){return P.apply([],e)}var O="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return i[e]}),j=new Set(O.map(function(e){return i[e]}));function B(e){var t={};for(var n in e)if(c(e,n)){var r=e[n];t[n]=!r||"object"!=typeof r||j.has(r.constructor)?r:B(r)}return t}function M(e){for(var t in e)if(c(e,t))return!1;return!0}var D=null;function I(e){D=new WeakMap;var t=T(e);return D=null,t}function T(e){if(!e||"object"!=typeof e)return e;var t=D.get(e);if(t)return t;if(s(e)){t=[],D.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(T(e[n]))}else if(j.has(e.constructor))t=e;else{var i=l(e);for(var o in t=i===Object.prototype?{}:Object.create(i),D.set(e,t),e)c(e,o)&&(t[o]=T(e[o]))}return t}var K={}.toString;function q(e){return K.call(e).slice(8,-1)}var L="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",R="symbol"==typeof L?function(e){var t;return null!=e&&(t=e[L])&&t.apply(e)}:function(){return null};function z(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var F={};function $(e){var t,n,r,i;if(1===arguments.length){if(s(e))return e.slice();if(this===F&&"string"==typeof e)return[e];if(i=R(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var N="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},U=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],H=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(U),W={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function V(e,t){this.name=e,this.message=t}function Q(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function Y(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Q(e,t)}function G(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=Q(e,this.failures)}p(V).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(Y).from(V),p(G).from(V);var J=H.reduce(function(e,t){return e[t]=t+"Error",e},{}),X=V,Z=H.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=W[t]||n,this.inner=null)}return p(r).from(X),e[t]=r,e},{});Z.Syntax=SyntaxError,Z.Type=TypeError,Z.Range=RangeError;var ee=U.reduce(function(e,t){return e[t+"Error"]=Z[t],e},{});function te(e,t){if(!e||e instanceof V||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ee[e.name])return e;var n=new ee[e.name](t||e.message,e);return"stack"in e&&d(n,"stack",{get:function(){return this.inner.stack}}),n}var ne=H.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Z[t]),e},{});function re(){}function ie(e){return e}function oe(e,t){return null==e||e===ie?t:function(n){return t(e(n))}}function se(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function le(e,t){return e===re?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?se(r,this.onsuccess):r),i&&(this.onerror=this.onerror?se(i,this.onerror):i),void 0!==o?o:n}}function ue(e,t){return e===re?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?se(n,this.onsuccess):n),r&&(this.onerror=this.onerror?se(r,this.onerror):r)}}function ce(e,t){return e===re?t:function(n){var r=e.apply(this,arguments);a(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?se(i,this.onsuccess):i),o&&(this.onerror=this.onerror?se(o,this.onerror):o),void 0===r?void 0===s?void 0:s:a(r,s)}}function he(e,t){return e===re?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function fe(e,t){return e===re?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}ne.ModifyError=Y,ne.DexieError=V,ne.BulkError=G;var de="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function pe(e,t){de=e}var ge={},me=100,ye="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}(),ve=ye[0],be=ye[1],xe=ye[2],we=be&&be.then,ke=ve&&ve.constructor,_e=!!xe;function Ae(){queueMicrotask(Ue)}var Ce=function(e,t){De.push([e,t]),Pe&&(Ae(),Pe=!1)},Ee=!0,Pe=!0,Se=[],Oe=[],je=ie,Be={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:re,pgp:!1,env:{},finalize:re},Me=Be,De=[],Ie=0,Te=[];function Ke(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Me;if("function"!=typeof e){if(e!==ge)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&ze(this,this._value))}this._state=null,this._value=null,++t.ref,Re(this,e)}var qe={get:function(){var e=Me,t=rt;function n(n,r){var i=this,o=!e.global&&(e!==Me||t!==rt),s=o&&!at(),a=new Ke(function(t,a){$e(i,new Le(pt(n,e,o,s),pt(r,e,o,s),t,a,e))});return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return n.prototype=ge,n},set:function(e){d(this,"then",e&&e.prototype===ge?qe:{get:function(){return e},set:qe.set})}};function Le(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Re(e,t){try{t(function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&He();t&&"function"==typeof t.then?Re(e,function(e,n){t instanceof Ke?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,Fe(e)),n&&We()}},ze.bind(null,e))}catch(t){ze(e,t)}}function ze(e,t){if(Oe.push(t),null===e._state){var n=e._lib&&He();t=je(t),e._state=!1,e._value=t,Ye(e),Fe(e),n&&We()}}function Fe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)$e(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Ie&&(++Ie,Ce(function(){0===--Ie&&Ve()},[]))}function $e(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ie,Ce(Ne,[n,e,t])}else e._listeners.push(t)}function Ne(e,t,n){try{var r,i=t._value;!t._state&&Oe.length&&(Oe=[]),r=de&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==Oe.indexOf(i)||Ge(t),n.resolve(r)}catch(e){n.reject(e)}finally{0===--Ie&&Ve(),--n.psd.ref||n.psd.finalize()}}function Ue(){dt(Be,function(){He()&&We()})}function He(){var e=Ee;return Ee=!1,Pe=!1,e}function We(){var e,t,n;do{for(;De.length>0;)for(e=De,De=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(De.length>0);Ee=!0,Pe=!0}function Ve(){var e=Se;Se=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Te.slice(0),n=t.length;n;)t[--n]()}function Qe(e){function t(){e(),Te.splice(Te.indexOf(t),1)}Te.push(t),++Ie,Ce(function(){0===--Ie&&Ve()},[])}function Ye(e){Se.some(function(t){return t._value===e._value})||Se.push(e)}function Ge(e){for(var t=Se.length;t;)if(Se[--t]._value===e._value)return void Se.splice(t,1)}function Je(e){return new Ke(ge,!1,e)}function Xe(e,t){var n=Me;return function(){var r=He(),i=Me;try{return ht(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{ht(i,!1),r&&We()}}}h(Ke.prototype,{then:qe,_then:function(e,t){$e(this,new Le(null,null,e,t,Me))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,function(e){return e instanceof t?n(e):Je(e)}):this.then(null,function(e){return e&&e.name===t?n(e):Je(e)})},finally:function(e){return this.then(function(t){return Ke.resolve(e()).then(function(){return t})},function(t){return Ke.resolve(e()).then(function(){return Je(t)})})},timeout:function(e,t){var n=this;return e<1/0?new Ke(function(r,i){var o=setTimeout(function(){return i(new Z.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&d(Ke.prototype,Symbol.toStringTag,"Dexie.Promise"),Be.env=ft(),h(Ke,{all:function(){var e=$.apply(null,arguments).map(lt);return new Ke(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,o){return Ke.resolve(i).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof Ke?e:e&&"function"==typeof e.then?new Ke(function(t,n){e.then(t,n)}):new Ke(ge,!0,e)},reject:Je,race:function(){var e=$.apply(null,arguments).map(lt);return new Ke(function(t,n){e.map(function(e){return Ke.resolve(e).then(t,n)})})},PSD:{get:function(){return Me},set:function(e){return Me=e}},totalEchoes:{get:function(){return rt}},newPSD:ot,usePSD:dt,scheduler:{get:function(){return Ce},set:function(e){Ce=e}},rejectionMapper:{get:function(){return je},set:function(e){je=e}},follow:function(e,t){return new Ke(function(n,r){return ot(function(t,n){var r=Me;r.unhandleds=[],r.onunhandled=n,r.finalize=se(function(){var e=this;Qe(function(){0===e.unhandleds.length?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}}),ke&&(ke.allSettled&&d(Ke,"allSettled",function(){var e=$.apply(null,arguments).map(lt);return new Ke(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,i){return Ke.resolve(e).then(function(e){return r[i]={status:"fulfilled",value:e}},function(e){return r[i]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),ke.any&&"undefined"!=typeof AggregateError&&d(Ke,"any",function(){var e=$.apply(null,arguments).map(lt);return new Ke(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(e,o){return Ke.resolve(e).then(function(e){return t(e)},function(e){i[o]=e,--r||n(new AggregateError(i))})})})}),ke.withResolvers&&(Ke.withResolvers=ke.withResolvers));var Ze={awaits:0,echoes:0,id:0},et=0,tt=[],nt=0,rt=0,it=0;function ot(e,t,n,r){var i=Me,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++it,Be.env,o.env=_e?{Promise:Ke,PromiseProp:{value:Ke,configurable:!0,writable:!0},all:Ke.all,race:Ke.race,allSettled:Ke.allSettled,any:Ke.any,resolve:Ke.resolve,reject:Ke.reject}:{},t&&a(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=dt(o,e,n,r);return 0===o.ref&&o.finalize(),s}function st(){return Ze.id||(Ze.id=++et),++Ze.awaits,Ze.echoes+=me,Ze.id}function at(){return!!Ze.awaits&&(0===--Ze.awaits&&(Ze.id=0),Ze.echoes=Ze.awaits*me,!0)}function lt(e){return Ze.echoes&&e&&e.constructor===ke?(st(),e.then(function(e){return at(),e},function(e){return at(),mt(e)})):e}function ut(e){++rt,Ze.echoes&&0!==--Ze.echoes||(Ze.echoes=Ze.awaits=Ze.id=0),tt.push(Me),ht(e,!0)}function ct(){var e=tt[tt.length-1];tt.pop(),ht(e,!1)}function ht(e,t){var n=Me;if((t?!Ze.echoes||nt++&&e===Me:!nt||--nt&&e===Me)||queueMicrotask(t?ut.bind(null,e):ct),e!==Me&&(Me=e,n===Be&&(Be.env=ft()),_e)){var r=Be.env.Promise,o=e.env;(n.global||e.global)&&(Object.defineProperty(i,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function ft(){var e=i.Promise;return _e?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function dt(e,t,n,r,i){var o=Me;try{return ht(e,!0),t(n,r,i)}finally{ht(o,!1)}}function pt(e,t,n,r){return"function"!=typeof e?e:function(){var i=Me;n&&st(),ht(t,!0);try{return e.apply(this,arguments)}finally{ht(i,!1),r&&queueMicrotask(at)}}}function gt(e){Promise===ke&&0===Ze.echoes?0===nt?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+we).indexOf("[native code]")&&(st=at=re);var mt=Ke.reject;function yt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Me.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return yt(e,t,n,r)})):mt(i)}return i._promise(t,function(e,t){return ot(function(){return Me.trans=i,r(e,t,i)})}).then(function(e){if("readwrite"===t)try{i.idbtrans.commit()}catch(e){}return"readonly"===t?e:i._completion.then(function(){return e})})}if(e._state.openComplete)return mt(new Z.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return mt(new Z.DatabaseClosed);e.open().catch(re)}return e._state.dbReadyPromise.then(function(){return yt(e,t,n,r)})}var vt="4.2.1",bt=String.fromCharCode(65535),xt=-1/0,wt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kt="String expected.",_t=[],At="__dbnames",Ct="readonly",Et="readwrite";function Pt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var St={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ot(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=I(t))[e],t}}function jt(){throw Z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Bt(e,t){try{var n=It(e),r=It(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Dt(Tt(e),Tt(t));case"Array":return Mt(e,t)}}catch(e){}return NaN}function Mt(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var s=Bt(e[o],t[o]);if(0!==s)return s}return n===r?0:n<r?-1:1}function Dt(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function It(e){var t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=q(e);return"ArrayBuffer"===n?"binary":n}function Tt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function Kt(e,t,n){var r=e.schema.yProps;return r?(t&&n.numFailures>0&&(t=t.filter(function(e,t){return!n.failures[t]})),Promise.all(r.map(function(n){var r=n.updatesTable;return t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return n})):n}var qt=function(){function e(e){this["@@propmod"]=e}return e.prototype.execute=function(e){var t,n=this["@@propmod"];if(void 0!==n.add){var i=n.add;if(s(i))return r(r([],s(e)?e:[],!0),i,!0).sort();if("number"==typeof i)return(Number(e)||0)+i;if("bigint"==typeof i)try{return BigInt(e)+i}catch(e){return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(void 0!==n.remove){var o=n.remove;if(s(o))return s(e)?e.filter(function(e){return!o.includes(e)}).sort():[];if("number"==typeof o)return Number(e)-o;if("bigint"==typeof o)try{return BigInt(e)-o}catch(e){return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}var a=null===(t=n.replacePrefix)||void 0===t?void 0:t[0];return a&&"string"==typeof e&&e.startsWith(a)?n.replacePrefix[1]+e.substring(a.length):e},e}();function Lt(e,t){for(var n=o(t),r=n.length,i=!1,s=0;s<r;++s){var a=n[s],l=t[a],u=_(e,a);l instanceof qt?(A(e,a,l.execute(u)),i=!0):u!==l&&(A(e,a,l),i=!0)}return i}var Rt=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Me.trans,i=this.name,o=de&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function s(e,n,r){if(!r.schema[i])throw new Z.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=He();try{var l=r&&r.db._novip===this.db._novip?r===Me.trans?r._promise(e,s,n):ot(function(){return r._promise(e,s,n)},{trans:r,transless:Me.transless||Me}):yt(this.db,e,[this.name],s);return o&&(l._consoleTask=o,l=l.catch(function(e){return console.trace(e),mt(e)})),l}finally{a&&We()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?mt(new Z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(s(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=o(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==bt){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&de&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function a(e,t){return 0===Bt(e,t)}var l=t.reduce(function(t,n){var r=t[0],o=t[1],l=i[n],u=e[n];return[r||l,r||!l?Pt(o,l&&l.multi?function(e){var t=_(e,n);return s(t)&&t.some(function(e){return a(u,e)})}:function(e){return a(u,_(e,n))}):o]},[null,null]),u=l[0],c=l[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,s(e)?"[".concat(e.join("+"),"]"):e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){var n=this,r=n.db,i=n.name;this.schema.mappedClass=e,e.prototype instanceof jt&&(e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),n.prototype.table=function(){return i},n}(e));for(var o=new Set,s=e.prototype;s;s=l(s))Object.getOwnPropertyNames(s).forEach(function(e){return o.add(e)});var a=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(!o.has(r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=a,this.hook("reading",a),e},e.prototype.defineClass=function(){function e(e){a(this,e)}return this.mapToClass(e)},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,s=e;return o&&i&&(s=Ot(o)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})}).then(function(e){return e.numFailures?Ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{A(e,o,t)}catch(e){}return t})},e.prototype.upsert=function(e,t){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return n.core.get({trans:i,key:e}).then(function(o){var s=null!=o?o:{};return Lt(s,t),r&&A(s,r,e),n.core.mutate({trans:i,type:"put",values:[s],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?Ke.reject(e.failures[0]):!!o})})})},e.prototype.update=function(e,t){if("object"!=typeof e||s(e))return this.where(":id").equals(e).modify(t);var n=_(e,this.schema.primKey.keyPath);return void 0===n?mt(new Z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,s=e;return o&&i&&(s=Ot(o)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?Ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{A(e,o,t)}catch(e){}return t})},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(n){return Kt(t,[e],n)}).then(function(e){return e.numFailures?Ke.reject(e.failures[0]):void 0})})},e.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:St}).then(function(t){return Kt(e,null,t)})}).then(function(e){return e.numFailures?Ke.reject(e.failures[0]):void 0})},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,s=n.auto,a=n.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,u=a&&s?e.map(Ot(a)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:u,wantResults:o}).then(function(e){var t=e.numFailures,n=e.results,i=e.lastResult,s=e.failures;if(0===t)return o?n:i;throw new G("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(l," operations failed"),s)})})},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,s=n.auto,a=n.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,u=a&&s?e.map(Ot(a)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:u,wantResults:o}).then(function(e){var t=e.numFailures,n=e.results,i=e.lastResult,s=e.failures;if(0===t)return o?n:i;throw new G("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(l," operations failed"),s)})})},e.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),i=e.map(function(e){return e.changes}),o=[];return this._trans("readwrite",function(s){return n.getMany({trans:s,keys:r,cache:"clone"}).then(function(a){var l=[],u=[];e.forEach(function(e,n){var r=e.key,i=e.changes,s=a[n];if(s){for(var c=0,h=Object.keys(i);c<h.length;c++){var f=h[c],d=i[f];if(f===t.schema.primKey.keyPath){if(0!==Bt(d,r))throw new Z.Constraint("Cannot update primary key in bulkUpdate()")}else A(s,f,d)}o.push(n),l.push(r),u.push(s)}});var c=l.length;return n.mutate({trans:s,type:"put",keys:l,values:u,updates:{keys:r,changeSpecs:i}}).then(function(e){var n=e.numFailures,r=e.failures;if(0===n)return c;for(var i=0,s=Object.keys(r);i<s.length;i++){var a=s[i],l=o[Number(a)];if(null!=l){var u=r[a];delete r[a],r[l]=u}}throw new G("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(c," operations failed"),r)})})})},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e}).then(function(n){return Kt(t,e,n)})}).then(function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new G("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),o)})},e}();function zt(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(e,r,i){if("object"==typeof e)return l(e);r||(r=he),i||(i=re);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter(function(t){return t!==e}),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function l(e){o(e).forEach(function(t){var n=e[t];if(s(n))a(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new Z.InvalidArgument("Invalid event config");var r=a(t,ie,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){w(function(){e.apply(null,t)})})})}})}}function Ft(e,t){return p(t).from({prototype:e}),t}function $t(e){return Ft(Rt.prototype,function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:zt(null,{creating:[le,re],reading:[oe,ie],updating:[ce,re],deleting:[ue,re]})})}function Nt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ut(e,t){e.filter=Pt(e.filter,t)}function Ht(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Pt(r(),t())}:t,e.justLimit=n&&!r}function Wt(e,t){e.isMatch=Pt(e.isMatch,t)}function Vt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new Z.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Qt(e,t,n){var r=Vt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Yt(e,t,n,r){var i=e.replayFilter?Pt(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},s=function(e,n,r){if(!i||i(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})){var s=n.primaryKey,a=""+s;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(s)),c(o,a)||(o[a]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(s,n),Gt(Qt(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return Gt(Qt(e,r,n),Pt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Gt(e,t,n,r){var i=Xe(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};t&&!t(e,function(e){return n=e},function(t){e.stop(t),n=re},function(t){e.fail(t),n=re})||i(e.value,e,function(e){return n=e}),n()})})}var Jt=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,mt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,mt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Pt(t.algorithm,e)},e.prototype._iterate=function(e,t){return Yt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&a(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Yt(t,e,n,t.table.core)})},e.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(Nt(n,!0))return r.count({trans:e,query:{index:Vt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var i=0;return Yt(n,function(){return++i,!1},e,r).then(function(){return i})}).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function a(e,t){return Bt(o(e,i),o(t,i))*s}return this.toArray(function(e){return e.sort(a)}).then(t)},e.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if("next"===n.dir&&Nt(n,!0)&&n.limit>0){var r=n.valueMapper,i=Vt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then(function(e){var t=e.result;return r?t.map(r):t})}var o=[];return Yt(n,function(e){return o.push(e)},e,n.table.core).then(function(){return o})},e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Nt(t)?Ht(t,function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n(function(){e.advance(t),t=0}),!1))}}):Ht(t,function(){var t=e;return function(){return--t<0}})),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ht(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},e.prototype.until=function(e,t){return Ut(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},e.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Ut(this._ctx,function(t){return e(t.value)}),Wt(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Nt(t,!0)&&t.limit>0)return this._read(function(e){var n=Vt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ut(this._ctx,function(e){var t=e.primaryKey.toString(),r=c(n,t);return n[t]=!0,!r}),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i;i="function"==typeof e?e:function(t){return Lt(t,e)};var s=n.table.core,a=s.schema.primaryKey,l=a.outbound,u=a.extractKey,c=200,h=t.db._options.modifyChunkSize;h&&(c="object"==typeof h?h[s.name]||h["*"]||200:h);var f=[],d=0,p=[],g=function(e,t){var n=t.failures,r=t.numFailures;d+=e-r;for(var i=0,s=o(n);i<s.length;i++){var a=s[i];f.push(n[a])}},m=e===Xt;return t.clone().primaryKeys().then(function(t){var o=Nt(n)&&n.limit===1/0&&("function"!=typeof e||m)&&{index:n.index,range:n.range},a=function(h){var f=Math.min(c,t.length-h),d=t.slice(h,h+f);return(m?Promise.resolve([]):s.getMany({trans:r,keys:d,cache:"immutable"})).then(function(p){var y=[],v=[],b=l?[]:null,x=m?d:[];if(!m)for(var w=0;w<f;++w){var k=p[w],_={value:I(k),primKey:t[h+w]};!1!==i.call(_,_.value,_)&&(null==_.value?x.push(t[h+w]):l||0===Bt(u(k),u(_.value))?(v.push(_.value),l&&b.push(t[h+w])):(x.push(t[h+w]),y.push(_.value)))}return Promise.resolve(y.length>0&&s.mutate({trans:r,type:"add",values:y}).then(function(e){for(var t in e.failures)x.splice(parseInt(t),1);g(y.length,e)})).then(function(){return(v.length>0||o&&"object"==typeof e)&&s.mutate({trans:r,type:"put",keys:b,values:v,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:h>0}).then(function(e){return g(v.length,e)})}).then(function(){return(x.length>0||o&&m)&&s.mutate({trans:r,type:"delete",keys:x,criteria:o,isAdditionalChunk:h>0}).then(function(e){return Kt(n.table,x,e)}).then(function(e){return g(x.length,e)})}).then(function(){return t.length>h+f&&a(h+c)})})};return a(0).then(function(){if(f.length>0)throw new Y("Error modifying one or more objects",f,d,p);return t.length})})})},e.prototype.delete=function(){var e=this._ctx,t=e.range;return!Nt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Xt):this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(e){var n=e.failures,r=e.numFailures;if(r)throw new Y("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-r);return t-r})})})},e}(),Xt=function(e,t){return t.value=null};function Zt(e){return Ft(Jt.prototype,function(t,n){this.db=e;var r=St,i=null;if(n)try{r=n()}catch(e){i=e}var o=t._ctx,s=o.table,a=s.hook.reading.fire;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:a!==ie?a:null}})}function en(e,t){return e<t?-1:e===t?0:1}function tn(e,t){return e>t?-1:e===t?0:1}function nn(e,t,n){var r=e instanceof hn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function rn(e){return new e.Collection(e,function(){return cn("")}).limit(0)}function on(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function sn(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function an(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,l=0;l<s;++l){var u=t[l];if(u!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[l],u)<0&&(a=l)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function ln(e,t,n,r){var i,o,s,a,l,u,c,h=n.length;if(!n.every(function(e){return"string"==typeof e}))return nn(e,kt);function f(e){i=on(e),o=sn(e),s="next"===e?en:tn;var t=n.map(function(e){return{lower:o(e),upper:i(e)}}).sort(function(e,t){return s(e.lower,t.lower)});a=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),u=e,c="next"===e?"":r}f("next");var d=new e.Collection(e,function(){return un(a[0],l[h-1]+r)});d._ondirectionchange=function(e){f(e)};var p=0;return d._addAlgorithm(function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var f=o(i);if(t(f,l,p))return!0;for(var d=null,g=p;g<h;++g){var m=an(i,f,a[g],l[g],s,u);null===m&&null===d?p=g+1:(null===d||s(d,m)>0)&&(d=m)}return n(null!==d?function(){e.continue(d+c)}:r),!1}),d}function un(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function cn(e){return{type:1,lower:e,upper:e}}var hn=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?rn(this):new this.Collection(this,function(){return un(e,t,!n,!r)})}catch(e){return nn(this,wt)}},e.prototype.equals=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return cn(e)})},e.prototype.above=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return un(e,void 0,!0)})},e.prototype.aboveOrEqual=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return un(e,void 0,!1)})},e.prototype.below=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return un(void 0,e,!1,!0)})},e.prototype.belowOrEqual=function(e){return null==e?nn(this,wt):new this.Collection(this,function(){return un(void 0,e)})},e.prototype.startsWith=function(e){return"string"!=typeof e?nn(this,kt):this.between(e,e+bt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):ln(this,function(e,t){return 0===e.indexOf(t[0])},[e],bt)},e.prototype.equalsIgnoreCase=function(e){return ln(this,function(e,t){return e===t[0]},[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=$.apply(F,arguments);return 0===e.length?rn(this):ln(this,function(e,t){return-1!==t.indexOf(e)},e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=$.apply(F,arguments);return 0===e.length?rn(this):ln(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,bt)},e.prototype.anyOf=function(){var e=this,t=$.apply(F,arguments),n=this._cmp;try{t.sort(n)}catch(e){return nn(this,wt)}if(0===t.length)return rn(this);var r=new this.Collection(this,function(){return un(t[0],t[t.length-1])});r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(e,r,o){for(var s=e.key;n(s,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(s,t[i])||(r(function(){e.continue(t[i])}),!1)}),r},e.prototype.notEqual=function(e){return this.inAnyRange([[xt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=$.apply(F,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return nn(this,wt)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[xt,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,s=this._min,a=this._max;if(0===e.length)return rn(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0}))return nn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Z.InvalidArgument);var l=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;function c(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=s(o[0],t[0]),o[1]=a(o[1],t[1]);break}}return n===i&&e.push(t),e}var h,f=i;function d(e,t){return f(e[0],t[0])}try{(h=e.reduce(c,[])).sort(d)}catch(e){return nn(this,wt)}var p=0,g=u?function(e){return i(e,h[p][1])>0}:function(e){return i(e,h[p][1])>=0},m=l?function(e){return o(e,h[p][0])>0}:function(e){return o(e,h[p][0])>=0};function y(e){return!g(e)&&!m(e)}var v=g,b=new this.Collection(this,function(){return un(h[0][0],h[h.length-1][1],!l,!u)});return b._ondirectionchange=function(e){"next"===e?(v=g,f=i):(v=m,f=o),h.sort(d)},b._addAlgorithm(function(e,t,r){for(var o=e.key;v(o);)if(++p===h.length)return t(r),!1;return!!y(o)||(0===n._cmp(o,h[p][1])||0===n._cmp(o,h[p][0])||t(function(){f===i?e.continue(h[p][0]):e.continue(h[p][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var e=$.apply(F,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?rn(this):this.inAnyRange(e.map(function(e){return[e,e+bt]})):nn(this,"startsWithAnyOf() only works with strings")},e}();function fn(e){return Ft(hn.prototype,function(t,n,r){if(this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r},this._cmp=this._ascending=Bt,this._descending=function(e,t){return Bt(t,e)},this._max=function(e,t){return Bt(e,t)>0?e:t},this._min=function(e,t){return Bt(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new Z.MissingAPI})}function dn(e){return Xe(function(t){return pn(t),e(t.target.error),!1})}function pn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var gn="storagemutated",mn="x-storagemutated-1",yn=zt(null,gn),vn=function(){function e(){}return e.prototype._lock=function(){return x(!Me.global),++this._reculock,1!==this._reculock||Me.global||(Me.lockOwnerFor=this),this},e.prototype._unlock=function(){if(x(!Me.global),0===--this._reculock)for(Me.global||(Me.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{dt(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Me.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(x(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Z.DatabaseClosed(r);case"MissingAPIError":throw new Z.MissingAPI(r.message,r);default:throw new Z.OpenFailed(r)}if(!this.active)throw new Z.TransactionInactive;return x(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Xe(function(n){pn(n),t._reject(e.error)}),e.onabort=Xe(function(n){pn(n),t.active&&t._reject(new Z.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Xe(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&yn.storagemutated.fire(e.mutatedParts)}),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return mt(new Z.ReadOnly("Transaction is readonly"));if(!this.active)return mt(new Z.TransactionInactive);if(this._locked())return new Ke(function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},Me])});if(n)return ot(function(){var e=new Ke(function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var i=new Ke(function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)});return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Ke.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return n});else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Ke(function(e,r){n.then(function(n){return t._waitingQueue.push(Xe(e.bind(null,n)))},function(e){return t._waitingQueue.push(Xe(r.bind(null,e)))}).finally(function(){t._waitingFor===i&&(t._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Z.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var n=this.schema[e];if(!n)throw new Z.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function bn(e){return Ft(vn.prototype,function(t,n,r,i,o){var s=this;"readonly"!==t&&n.forEach(function(e){var t,i=null===(t=r[e])||void 0===t?void 0:t.yProps;i&&(n=n.concat(i.map(function(e){return e.updatesTable})))}),this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=zt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ke(function(e,t){s._resolve=e,s._reject=t}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),mt(e)})})}function xn(e,t,n,r,i,o,s,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+wn(t),type:a}}function wn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function kn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:k(n,function(e){return[e.name,e]})}}function _n(e){return 1===e.length?e[0]:e}var An=function(e){try{return e.only([[]]),An=function(){return[[]]},[[]]}catch(e){return An=function(){return bt},bt}};function Cn(e){return null==e?function(){}:"string"==typeof e?En(e):function(t){return _(t,e)}}function En(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return _(t,e)}}function Pn(e){return[].slice.call(e)}var Sn=0;function On(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function jn(e,t,n){function r(e,t){var n=Pn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map(function(e){return t.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=s(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Cn(t)},indexes:Pn(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,a={name:t,compound:s(i),keyPath:i,unique:n,multiEntry:r,extractKey:Cn(i)};return o[On(i)]=a,a}),getIndexByKeyPath:function(e){return o[On(e)]}};return o[":id"]=a.primaryKey,null!=t&&(o[On(t)]=a.primaryKey),a})},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}function o(e){var t=e.name;function n(e){var n=e.trans,r=e.type,o=e.keys,s=e.values,a=e.range;return new Promise(function(e,l){e=Xe(e);var u=n.objectStore(t),c=null==u.keyPath,h="put"===r||"add"===r;if(!h&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var f,d=(o||s||{length:1}).length;if(o&&s&&o.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var p=[],g=[],m=0,y=function(e){++m,pn(e)};if("deleteRange"===r){if(4===a.type)return e({numFailures:m,failures:g,results:[],lastResult:void 0});3===a.type?p.push(f=u.clear()):p.push(f=u.delete(i(a)))}else{var v=h?c?[s,o]:[s,null]:[o,null],b=v[0],x=v[1];if(h)for(var w=0;w<d;++w)p.push(f=x&&void 0!==x[w]?u[r](b[w],x[w]):u[r](b[w])),f.onerror=y;else for(w=0;w<d;++w)p.push(f=u[r](b[w])),f.onerror=y}var k=function(t){var n=t.target.result;p.forEach(function(e,t){return null!=e.error&&(g[t]=e.error)}),e({numFailures:m,failures:g,results:"delete"===r?o:p.map(function(e){return e.result}),lastResult:n})};f.onerror=function(e){y(e),k(e)},f.onsuccess=k})}function r(e){var n=e.trans,r=e.values,o=e.query,s=e.reverse,a=e.unique;return new Promise(function(e,l){e=Xe(e);var u=o.index,c=o.range,h=n.objectStore(t),f=u.isPrimaryKey?h:h.index(u.name),d=s?a?"prevunique":"prev":a?"nextunique":"next",p=r||!("openKeyCursor"in f)?f.openCursor(i(c),d):f.openKeyCursor(i(c),d);p.onerror=dn(l),p.onsuccess=Xe(function(t){var r=p.result;if(r){r.___id=++Sn,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var s=r.advance.bind(r),a=function(){throw new Error("Cursor not started")},u=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=a,r.fail=Xe(l),r.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},r.start=function(e){var t=new Promise(function(e,t){e=Xe(e),p.onerror=dn(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=u,e(t)}}),n=function(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Xe(function(e){p.onsuccess=n,n()}),r.continue=i,r.continuePrimaryKey=o,r.advance=s,n(),t},e(r)}else e(null)},l)})}function o(e){return function(n){return new Promise(function(r,o){r=Xe(r);var s=n.trans,a=n.values,l=n.limit,u=n.query,c=l===1/0?void 0:l,h=u.index,f=u.range,d=s.objectStore(t),p=h.isPrimaryKey?d:d.index(h.name),g=i(f);if(0===l)return r({result:[]});if(e){var m=a?p.getAll(g,c):p.getAllKeys(g,c);m.onsuccess=function(e){return r({result:e.target.result})},m.onerror=dn(o)}else{var y=0,v=a||!("openKeyCursor"in p)?p.openCursor(g):p.openKeyCursor(g),b=[];v.onsuccess=function(e){var t=v.result;return t?(b.push(a?t.value:t.primaryKey),++y===l?r({result:b}):void t.continue()):r({result:b})},v.onerror=dn(o)}})}}return{name:t,schema:e,mutate:n,getMany:function(e){var n=e.trans,r=e.keys;return new Promise(function(e,i){e=Xe(e);for(var o,s=n.objectStore(t),a=r.length,l=new Array(a),u=0,c=0,h=function(t){var n=t.target;l[n._pos]=n.result,++c===u&&e(l)},f=dn(i),d=0;d<a;++d)null!=r[d]&&((o=s.get(r[d]))._pos=d,o.onsuccess=h,o.onerror=f,++u);0===u&&e(l)})},get:function(e){var n=e.trans,r=e.key;return new Promise(function(e,i){e=Xe(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=dn(i)})},query:o(u),openCursor:r,count:function(e){var n=e.query,r=e.trans,o=n.index,s=n.range;return new Promise(function(e,n){var a=r.objectStore(t),l=o.isPrimaryKey?a:a.index(o.name),u=i(s),c=u?l.count(u):l.count();c.onsuccess=Xe(function(t){return e(t.target.result)}),c.onerror=dn(n)})}}}var a=r(e,n),l=a.schema,u=a.hasGetAll,c=l.tables.map(function(e){return o(e)}),h={};return c.forEach(function(e){return h[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!h[e])throw new Error("Table '".concat(e,"' not found"));return h[e]},MIN_KEY:-1/0,MAX_KEY:An(t),schema:l}}function Bn(e,t){return t.reduce(function(e,t){var r=t.create;return n(n({},e),r(e))},e)}function Mn(e,t,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:Bn(jn(t,i,r),e.dbcore)}}function Dn(e,t){var n=t.db,r=Mn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function In(e,t,n,r){n.forEach(function(n){var i=r[n];t.forEach(function(t){var r=m(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?d(t,n,{get:function(){return this.table(n)},set:function(e){f(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))})})}function Tn(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function Kn(e,t){return e._cfg.version-t._cfg.version}function qn(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=kn("$meta",Gn("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,i);s.create(n),s._completion.catch(r);var a=s._reject.bind(s),l=Me.transless||Me;ot(function(){if(Me.trans=s,Me.transless=l,0!==t)return Dn(e,n),Rn(e,s,t).then(function(t){return zn(e,t,s,n)}).catch(a);o(i).forEach(function(e){$n(n,e,i[e].primKey,i[e].indexes)}),Dn(e,n),Ke.follow(function(){return e.on.populate.fire(s)}).catch(a)})}function Ln(e,t){Nn(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Wn(e,e.idbdb,t);Yn(e,e._dbSchema,t);for(var r=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){de&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),Hn(n,t)})},i=0,o=Fn(n,e._dbSchema).change;i<o.length;i++){var s=r(o[i]);if("object"==typeof s)return s.value}}function Rn(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(e){return null!=e?e:n}):Ke.resolve(n)}function zn(e,t,n,r){var i=[],s=e._versions,a=e._dbSchema=Wn(e,e.idbdb,r),l=s.filter(function(e){return e._cfg.version>=t});if(0===l.length)return Ke.resolve();function u(){return i.length?Ke.resolve(i.shift()(n.idbtrans)).then(u):Ke.resolve()}return l.forEach(function(s){i.push(function(){var i=a,l=s._cfg.dbschema;Yn(e,i,r),Yn(e,l,r),a=e._dbSchema=l;var u=Fn(i,l);u.add.forEach(function(e){$n(r,e[0],e[1].primKey,e[1].indexes)}),u.change.forEach(function(e){if(e.recreate)throw new Z.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach(function(e){return Hn(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),Hn(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=s._cfg.contentUpgrade;if(c&&s._cfg.version>t){Dn(e,r),n._memoizedTables={};var h=E(l);u.del.forEach(function(e){h[e]=i[e]}),Tn(e,[e.Transaction.prototype]),In(e,[e.Transaction.prototype],o(h),h),n.schema=h;var f,d=N(c);d&&st();var p=Ke.follow(function(){if((f=c(n))&&d){var e=at.bind(null,null);f.then(e,e)}});return f&&"function"==typeof f.then?Ke.resolve(f):p.then(function(){return f})}}),i.push(function(t){Un(s._cfg.dbschema,t),Tn(e,[e.Transaction.prototype]),In(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),i.push(function(t){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===s._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(s._cfg.version,"version"))})}),u().then(function(){Nn(a,r)})}function Fn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var s={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto)s.recreate=!0,r.change.push(s);else{var a=i.idxByName,l=o.idxByName,u=void 0;for(u in a)l[u]||s.del.push(u);for(u in l){var c=a[u],h=l[u];c?c.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&r.change.push(s)}}else r.add.push([n,o])}return r}function $n(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return Hn(i,e)}),i}function Nn(e,t){o(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(de&&console.debug("Dexie: Creating missing table",n),$n(t,n,e[n].primKey,e[n].indexes))})}function Un(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return null==e[n]&&t.db.deleteObjectStore(n)})}function Hn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Wn(e,t,n){var r={};return v(t.objectStoreNames,0).forEach(function(e){for(var t=n.objectStore(e),i=t.keyPath,o=xn(wn(i),i||"",!0,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),s=[],a=0;a<t.indexNames.length;++a){var l=t.index(t.indexNames[a]);i=l.keyPath;var u=xn(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(u)}r[e]=kn(e,o,s)}),r}function Vn(e,t,n){e.verno=t.version/10;var r=e._dbSchema=Wn(e,t,n);e._storeNames=v(t.objectStoreNames,0),In(e,[e._allTables],o(r),r)}function Qn(e,t){var n=Fn(Wn(e,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some(function(e){return e.add.length||e.change.length}))}function Yn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var s=r[o],a=n.objectStore(s);e._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var u=a.indexNames[l],c=a.index(u).keyPath,h="string"==typeof c?c:"["+v(c).join("+")+"]";if(t[s]){var f=t[s].idxByName[h];f&&(f.name=u,delete t[s].idxByName[h],t[s].idxByName[u]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Gn(e){return e.split(",").map(function(e,t){var n,r=e.split(":"),i=null===(n=r[1])||void 0===n?void 0:n.trim(),o=(e=r[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return xn(o,a||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),s(a),0===t,i)})}var Jn,Xn=function(){function e(){}return e.prototype._createTableSchema=function(e,t,n){return kn(e,t,n)},e.prototype._parseIndexSyntax=function(e){return Gn(e)},e.prototype._parseStoresSpec=function(e,t){var n=this;o(e).forEach(function(r){if(null!==e[r]){var i=n._parseIndexSyntax(e[r]),o=i.shift();if(!o)throw new Z.Schema("Invalid schema for table "+r+": "+e[r]);if(o.unique=!0,o.multi)throw new Z.Schema("Primary key cannot be multiEntry*");i.forEach(function(e){if(e.auto)throw new Z.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Z.Schema("Index must have a name and cannot be an empty string")});var s=n._createTableSchema(r,o,i);t[r]=s}})},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach(function(e){a(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)}),t._dbSchema=i,Tn(t,[t._allTables,t,t.Transaction.prototype]),In(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],o(i),i),t._storeNames=o(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=fe(this._cfg.contentUpgrade||re,e),this},e}();function Zn(e){return Ft(Xn.prototype,function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function er(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ti(At,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function tr(e){return e&&"function"==typeof e.databases}function nr(e){var t=e.indexedDB,n=e.IDBKeyRange;return tr(t)?Promise.resolve(t.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==At})}):er(t,n).toCollection().primaryKeys()}function rr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!tr(n)&&t!==At&&er(n,r).put({name:t}).catch(re)}function ir(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!tr(n)&&t!==At&&er(n,r).delete(t).catch(re)}function or(e){return ot(function(){return Me.letThrough=!0,e()})}function sr(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function ar(e){return!("from"in e)}var lr=function(e,t){if(!this){var n=new lr;return e&&"d"in e&&a(n,e),n}a(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function ur(e,t,n){var r=Bt(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(ar(e))return a(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(Bt(n,e.from)<0)return i?ur(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},dr(e);if(Bt(t,e.to)>0)return o?ur(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},dr(e);Bt(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Bt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var s=!e.r;i&&!e.l&&cr(e,i),o&&s&&cr(e,o)}}function cr(e,t){function n(e,t){var r=t.from,i=t.to,o=t.l,s=t.r;ur(e,r,i),o&&n(e,o),s&&n(e,s)}ar(t)||n(e,t)}function hr(e,t){var n=fr(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=fr(e),s=o.next(i.from),a=s.value;!r.done&&!s.done;){if(Bt(a.from,i.to)<=0&&Bt(a.to,i.from)>=0)return!0;Bt(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(s=o.next(i.from)).value}return!1}function fr(e){var t=ar(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Bt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Bt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function dr(e){var t,r,i=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),o=i>1?"r":i<-1?"l":"";if(o){var s="r"===o?"l":"r",a=n({},e),l=e[o];e.from=l.from,e.to=l.to,e[o]=l[o],a[o]=l[s],e[s]=a,a.d=pr(a)}e.d=pr(e)}function pr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function gr(e,t){return o(t).forEach(function(n){e[n]?cr(e[n],t[n]):e[n]=B(t[n])}),e}function mr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&hr(t[n],e[n])})}h(lr.prototype,((Jn={add:function(e){return cr(this,e),this},addKey:function(e){return ur(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return ur(t,e,e)}),this},hasKey:function(e){var t=fr(this).next(e).value;return t&&Bt(t.from,e)<=0&&Bt(t.to,e)>=0}})[L]=function(){return fr(this)},Jn));var yr={},vr={},br=!1;function xr(e,t){gr(vr,e),br||(br=!0,setTimeout(function(){br=!1;var e=vr;vr={},wr(e,!1)},0))}function wr(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(yr);r<i.length;r++)kr(a=i[r],e,n,t);else for(var o in e){var s=/^idb\:\/\/(.*)\/(.*)\//.exec(o);if(s){var a,l=s[1],u=s[2];(a=yr["idb://".concat(l,"/").concat(u)])&&kr(a,e,n,t)}}n.forEach(function(e){return e()})}function kr(e,t,n,r){for(var i=[],o=0,s=Object.entries(e.queries.query);o<s.length;o++){for(var a=s[o],l=a[0],u=[],c=0,h=a[1];c<h.length;c++){var f=h[c];mr(t,f.obsSet)?f.subscribers.forEach(function(e){return n.add(e)}):r&&u.push(f)}r&&i.push([l,u])}if(r)for(var d=0,p=i;d<p.length;d++){var g=p[d];l=g[0],u=g[1],e.queries.query[l]=u}}function _r(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?mt(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),o=!1;function s(){if(t.openCanceller!==r)throw new Z.DatabaseClosed("db.open() was cancelled")}var a=t.dbReadyResolve,l=null,u=!1,c=function(){return new Ke(function(r,a){if(s(),!n)throw new Z.MissingAPI;var h=e.name,f=t.autoSchema||!i?n.open(h):n.open(h,i);if(!f)throw new Z.MissingAPI;f.onerror=dn(a),f.onblocked=Xe(e._fireOnBlocked),f.onupgradeneeded=Xe(function(r){if(l=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=pn,l.abort(),f.result.close();var i=n.deleteDatabase(h);i.onsuccess=i.onerror=Xe(function(){a(new Z.NoSuchDatabase("Database ".concat(h," doesnt exist")))})}else{l.onerror=dn(a);var s=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;u=s<1,e.idbdb=f.result,o&&Ln(e,l),qn(e,s/10,l,a)}},a),f.onsuccess=Xe(function(){l=null;var n=e.idbdb=f.result,s=v(n.objectStoreNames);if(s.length>0)try{var a=n.transaction(_n(s),"readonly");if(t.autoSchema)Vn(e,n,a);else if(Yn(e,e._dbSchema,a),!Qn(e,a)&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),n.close(),i=n.version+1,o=!0,r(c());Dn(e,a)}catch(e){}_t.push(e),n.onversionchange=Xe(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),n.onclose=Xe(function(){e.close({disableAutoOpen:!1})}),u&&rr(e._deps,h),r()},a)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c();break;case"VersionError":if(i>0)return i=0,c()}return Ke.reject(e)})};return Ke.race([r,("undefined"==typeof navigator?Ke.resolve():sr()).then(c)]).then(function(){return s(),t.onReadyBeingFired=[],Ke.resolve(or(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(fe,re);return t.onReadyBeingFired=[],Ke.resolve(or(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{l&&l.abort()}catch(e){}return r===t.openCanceller&&e._close(),mt(n)}).finally(function(){t.openComplete=!0,a()}).then(function(){if(u){var t={};e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new lr(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new lr(-1/0,[[[]]])}),yn(gn).fire(t),wr(t,!0)}return e})}function Ar(e){var t=function(t){return e.next(t)},n=function(t){return e.throw(t)},r=o(t),i=o(n);function o(e){return function(t){var n=e(t),o=n.value;return n.done?o:o&&"function"==typeof o.then?o.then(r,i):s(o)?Promise.all(o).then(r,i):r(o)}}return o(t)()}function Cr(e,t,n){var r=arguments.length;if(r<2)throw new Z.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,S(i),n]}function Er(e,t,n,r,i){return Ke.resolve().then(function(){var o=Me.transless||Me,s=e._createTransaction(t,n,e._dbSchema,r);s.explicit=!0;var a={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(r){return r.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Er(e,t,n,null,i)})):mt(r)}var l,u=N(i);u&&st();var c=Ke.follow(function(){if(l=i.call(s,s))if(u){var e=at.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=Ar(l))},a);return(l&&"function"==typeof l.then?Ke.resolve(l).then(function(e){return s.active?e:mt(new Z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(e){return r&&s._resolve(),s._completion.then(function(){return e})}).catch(function(e){return s._reject(e),mt(e)})})}function Pr(e,t,n){for(var r=s(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Sr(e){return n(n({},e),{table:function(t){var r=e.table(t),i=r.schema,o={},s=[];function a(e,t,r){var i=On(e),l=o[i]=o[i]||[],u=null==e?0:"string"==typeof e?1:e.length,c=t>0,h=n(n({},r),{name:c?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:c,keyTail:t,keyLength:u,extractKey:Cn(e),unique:!c&&r.unique});return l.push(h),h.isPrimaryKey||s.push(h),u>1&&a(2===u?e[0]:e.slice(0,u-1),t+1,r),l.sort(function(e,t){return e.keyTail-t.keyTail}),h}var l=a(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[l];for(var u=0,c=i.indexes;u<c.length;u++){var h=c[u];a(h.keyPath,0,h)}function f(e){var t=o[On(e)];return t&&t[0]}function d(t,n){return{type:1===t.type?2:t.type,lower:Pr(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,n),lowerOpen:!0,upper:Pr(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,n),upperOpen:!0}}function p(e){var t=e.query.index;return t.isVirtual?n(n({},e),{query:{index:t.lowLevelIndex,range:d(e.query.range,t.keyTail)}}):e}var g=n(n({},r),{schema:n(n({},i),{primaryKey:l,indexes:s,getIndexByKeyPath:f}),count:function(e){return r.count(p(e))},query:function(e){return r.query(p(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,o=n.isVirtual,s=n.keyLength;if(!o)return r.openCursor(t);function a(n){function r(r){null!=r?n.continue(Pr(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}var o=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Pr(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return n.value}}});return o}return r.openCursor(p(t)).then(function(e){return e&&a(e)})}});return g}})}var Or={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Sr};function jr(e,t,n,r){return n=n||{},r=r||"",o(e).forEach(function(i){if(c(t,i)){var o=e[i],s=t[i];if("object"==typeof o&&"object"==typeof s&&o&&s){var a=q(o);a!==q(s)?n[r+i]=t[i]:"Object"===a?jr(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else o!==s&&(n[r+i]=t[i])}else n[r+i]=void 0}),o(t).forEach(function(i){c(e,i)||(n[r+i]=t[i])}),n}function Br(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Mr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return n(n({},e),{table:function(t){var i=e.table(t),o=i.schema.primaryKey,s=n(n({},i),{mutate:function(e){var s=Me.trans,a=s.table(t).hook,l=a.deleting,u=a.creating,h=a.updating;switch(e.type){case"add":if(u.fire===re)break;return s._promise("readwrite",function(){return f(e)},!0);case"put":if(u.fire===re&&h.fire===re)break;return s._promise("readwrite",function(){return f(e)},!0);case"delete":if(l.fire===re)break;return s._promise("readwrite",function(){return f(e)},!0);case"deleteRange":if(l.fire===re)break;return s._promise("readwrite",function(){return d(e)},!0)}return i.mutate(e);function f(e){var t=Me.trans,s=e.keys||Br(o,e);if(!s)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?n(n({},e),{keys:s}):n({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),Dr(i,e,s).then(function(n){var r=s.map(function(r,i){var s=n[i],a={onerror:null,onsuccess:null};if("delete"===e.type)l.fire.call(a,r,s,t);else if("add"===e.type||void 0===s){var f=u.fire.call(a,r,e.values[i],t);null==r&&null!=f&&(r=f,e.keys[i]=r,o.outbound||A(e.values[i],o.keyPath,r))}else{var d=jr(s,e.values[i]),p=h.fire.call(a,d,r,s,t);if(p){var g=e.values[i];Object.keys(p).forEach(function(e){c(g,e)?g[e]=p[e]:A(g,e,p[e])})}}return a});return i.mutate(e).then(function(t){for(var i=t.failures,o=t.results,a=t.numFailures,l=t.lastResult,u=0;u<s.length;++u){var c=o?o[u]:s[u],h=r[u];null==c?h.onerror&&h.onerror(i[u]):h.onsuccess&&h.onsuccess("put"===e.type&&n[u]?e.values[u]:c)}return{failures:i,results:o,numFailures:a,lastResult:l}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}function d(e){return p(e.trans,e.range,1e4)}function p(e,t,r){return i.query({trans:e,values:!1,query:{index:o,range:t},limit:r}).then(function(i){var o=i.result;return f({type:"delete",keys:o,trans:e}).then(function(i){return i.numFailures>0?Promise.reject(i.failures[0]):o.length<r?{failures:[],numFailures:0,lastResult:void 0}:p(e,n(n({},t),{lower:o[o.length-1],lowerOpen:!0}),r)})})}}});return s}})}};function Dr(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Ir(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)0===Bt(t.keys[i],e[o])&&(r.push(n?I(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}var Tr={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var r=e.table(t);return n(n({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=Ir(e.keys,e.trans._cache,"clone"===e.cache);return t?Ke.resolve(t):r.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?I(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Kr(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function qr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Lr={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,r=new lr(e.MIN_KEY,e.MAX_KEY);return n(n({},e),{transaction:function(t,n,r){if(Me.subscr&&"readonly"!==n)throw new Z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Me.querier));return e.transaction(t,n,r)},table:function(i){var a=e.table(i),l=a.schema,u=l.primaryKey,c=l.indexes,h=u.extractKey,f=u.outbound,d=u.autoIncrement&&c.filter(function(e){return e.compound&&e.keyPath.includes(u.keyPath)}),p=n(n({},a),{mutate:function(n){var o,c,h=n.trans,f=n.mutatedParts||(n.mutatedParts={}),p=function(e){var n="idb://".concat(t,"/").concat(i,"/").concat(e);return f[n]||(f[n]=new lr)},g=p(""),m=p(":dels"),y=n.type,v="deleteRange"===n.type?[n.range]:"delete"===n.type?[n.keys]:n.values.length<50?[Br(u,n).filter(function(e){return e}),n.values]:[],b=v[0],x=v[1],w=n.trans._cache;if(s(b)){g.addKeys(b);var k="delete"===y||b.length===x.length?Ir(b,w):null;k||m.addKeys(b),(k||x)&&Rr(p,l,k,x)}else if(b){var _={from:null!==(o=b.lower)&&void 0!==o?o:e.MIN_KEY,to:null!==(c=b.upper)&&void 0!==c?c:e.MAX_KEY};m.add(_),g.add(_)}else g.add(r),m.add(r),l.indexes.forEach(function(e){return p(e.name).add(r)});return a.mutate(n).then(function(e){return!b||"add"!==n.type&&"put"!==n.type||(g.addKeys(e.results),d&&d.forEach(function(t){for(var r=n.values.map(function(e){return t.extractKey(e)}),i=t.keyPath.findIndex(function(e){return e===u.keyPath}),o=0,s=e.results.length;o<s;++o)r[o][i]=e.results[o];p(t.name).addKeys(r)})),h.mutatedParts=gr(h.mutatedParts||{},f),e})}}),g=function(t){var n,r,i=t.query,o=i.index,s=i.range;return[o,new lr(null!==(n=s.lower)&&void 0!==n?n:e.MIN_KEY,null!==(r=s.upper)&&void 0!==r?r:e.MAX_KEY)]},m={get:function(e){return[u,new lr(e.key)]},getMany:function(e){return[u,(new lr).addKeys(e.keys)]},count:g,query:g,openCursor:g};return o(m).forEach(function(e){p[e]=function(o){var s=Me.subscr,l=!!s,u=Kr(Me,a)&&qr(e,o)?o.obsSet={}:s;if(l){var c=function(e){var n="idb://".concat(t,"/").concat(i,"/").concat(e);return u[n]||(u[n]=new lr)},d=c(""),p=c(":dels"),g=m[e](o),y=g[0],v=g[1];if("query"===e&&y.isPrimaryKey&&!o.values?p.add(v):c(y.name||"").add(v),!y.isPrimaryKey){if("count"!==e){var b="query"===e&&f&&o.values&&a.query(n(n({},o),{values:!1}));return a[e].apply(this,arguments).then(function(t){if("query"===e){if(f&&o.values)return b.then(function(e){var n=e.result;return d.addKeys(n),t});var n=o.values?t.result.map(h):t.result;o.values?d.addKeys(n):p.addKeys(n)}else if("openCursor"===e){var r=t,i=o.values;return r&&Object.create(r,{key:{get:function(){return p.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return p.addKey(e),e}},value:{get:function(){return i&&d.addKey(r.primaryKey),r.value}}})}return t})}p.add(r)}}return a[e].apply(this,arguments)}}),p}})}};function Rr(e,t,n,r){function i(t){var i=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}var a=function(e){return t.multiEntry&&s(e)?e.forEach(function(e){return i.addKey(e)}):i.addKey(e)};(n||r).forEach(function(e,t){var i=n&&o(n[t]),s=r&&o(r[t]);0!==Bt(i,s)&&(null!=i&&a(i),null!=s&&a(s))})}t.indexes.forEach(i)}function zr(e,t,r){if(0===r.numFailures)return t;if("deleteRange"===t.type)return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(r.numFailures===i)return null;var o=n({},t);return s(o.keys)&&(o.keys=o.keys.filter(function(e,t){return!(t in r.failures)})),"values"in o&&s(o.values)&&(o.values=o.values.filter(function(e,t){return!(t in r.failures)})),o}function Fr(e,t){return void 0===t.lower||(t.lowerOpen?Bt(e,t.lower)>0:Bt(e,t.lower)>=0)}function $r(e,t){return void 0===t.upper||(t.upperOpen?Bt(e,t.upper)<0:Bt(e,t.upper)<=0)}function Nr(e,t){return Fr(e,t)&&$r(e,t)}function Ur(e,t,n,r,i,o){if(!n||0===n.length)return e;var a=t.query.index,l=a.multiEntry,u=t.query.range,c=r.schema.primaryKey.extractKey,h=a.extractKey,f=(a.lowLevelIndex||a).extractKey,d=n.reduce(function(e,n){var r=e,i=[];if("add"===n.type||"put"===n.type)for(var o=new lr,a=n.values.length-1;a>=0;--a){var f=n.values[a],d=c(f);if(!o.hasKey(d)){var p=h(f);(l&&s(p)?p.some(function(e){return Nr(e,u)}):Nr(p,u))&&(o.addKey(d),i.push(f))}}switch(n.type){case"add":var g=(new lr).addKeys(t.values?e.map(function(e){return c(e)}):e);r=e.concat(t.values?i.filter(function(e){var t=c(e);return!g.hasKey(t)&&(g.addKey(t),!0)}):i.map(function(e){return c(e)}).filter(function(e){return!g.hasKey(e)&&(g.addKey(e),!0)}));break;case"put":var m=(new lr).addKeys(n.values.map(function(e){return c(e)}));r=e.filter(function(e){return!m.hasKey(t.values?c(e):e)}).concat(t.values?i:i.map(function(e){return c(e)}));break;case"delete":var y=(new lr).addKeys(n.keys);r=e.filter(function(e){return!y.hasKey(t.values?c(e):e)});break;case"deleteRange":var v=n.range;r=e.filter(function(e){return!Nr(c(e),v)})}return r},e);return d===e?e:(d.sort(function(e,t){return Bt(f(e),f(t))||Bt(c(e),c(t))}),t.limit&&t.limit<1/0&&(d.length>t.limit?d.length=t.limit:e.length===t.limit&&d.length<t.limit&&(i.dirty=!0)),o?Object.freeze(d):d)}function Hr(e,t){return 0===Bt(e.lower,t.lower)&&0===Bt(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Wr(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;var i=Bt(e,t);if(0===i){if(n&&r)return 0;if(n)return 1;if(r)return-1}return i}function Vr(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;var i=Bt(e,t);if(0===i){if(n&&r)return 0;if(n)return-1;if(r)return 1}return i}function Qr(e,t){return Wr(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&Vr(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function Yr(e,t,n,r){var i=yr["idb://".concat(e,"/").concat(t)];if(!i)return[];var o=i.queries[n];if(!o)return[null,!1,i,null];var s=o[(r.query?r.query.index.name:null)||""];if(!s)return[null,!1,i,null];switch(n){case"query":var a=s.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Hr(e.req.query.range,r.query.range)});return a?[a,!0,i,s]:[s.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Qr(e.req.query.range,r.query.range)}),!1,i,s];case"count":var l=s.find(function(e){return Hr(e.req.query.range,r.query.range)});return[l,!!l,i,s]}}function Gr(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),0===e.subscribers.size&&Jr(e,t)})}function Jr(e,t){setTimeout(function(){0===e.subscribers.size&&z(t,e)},3e3)}var Xr={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,r=n(n({},e),{transaction:function(n,r,i){var o=e.transaction(n,r,i);if("readwrite"===r){var s=new AbortController,a=s.signal,l=function(i){return function(){if(s.abort(),"readwrite"===r){for(var a=new Set,l=0,u=n;l<u.length;l++){var c=u[l],h=yr["idb://".concat(t,"/").concat(c)];if(h){var f=e.table(c),d=h.optimisticOps.filter(function(e){return e.trans===o});if(o._explicit&&i&&o.mutatedParts)for(var p=0,g=Object.values(h.queries.query);p<g.length;p++)for(var m=0,y=(x=g[p]).slice();m<y.length;m++)mr((_=y[m]).obsSet,o.mutatedParts)&&(z(x,_),_.subscribers.forEach(function(e){return a.add(e)}));else if(d.length>0){h.optimisticOps=h.optimisticOps.filter(function(e){return e.trans!==o});for(var v=0,b=Object.values(h.queries.query);v<b.length;v++)for(var x,w=0,k=(x=b[v]).slice();w<k.length;w++){var _;if(null!=(_=k[w]).res&&o.mutatedParts)if(i&&!_.dirty){var A=Object.isFrozen(_.res),C=Ur(_.res,_.req,d,f,_,A);_.dirty?(z(x,_),_.subscribers.forEach(function(e){return a.add(e)})):C!==_.res&&(_.res=C,_.promise=Ke.resolve({result:C}))}else _.dirty&&z(x,_),_.subscribers.forEach(function(e){return a.add(e)})}}}}a.forEach(function(e){return e()})}}};o.addEventListener("abort",l(!1),{signal:a}),o.addEventListener("error",l(!1),{signal:a}),o.addEventListener("complete",l(!0),{signal:a})}return o},table:function(r){var i=e.table(r),o=i.schema.primaryKey,s=n(n({},i),{mutate:function(e){var s=Me.trans;if(o.outbound||"disabled"===s.db._options.cache||s.explicit||"readwrite"!==s.idbtrans.mode)return i.mutate(e);var a=yr["idb://".concat(t,"/").concat(r)];if(!a)return i.mutate(e);var l=i.mutate(e);return"add"!==e.type&&"put"!==e.type||!(e.values.length>=50||Br(o,e).some(function(e){return null==e}))?(a.optimisticOps.push(e),e.mutatedParts&&xr(e.mutatedParts),l.then(function(t){if(t.numFailures>0){z(a.optimisticOps,e);var n=zr(a,e,t);n&&a.optimisticOps.push(n),e.mutatedParts&&xr(e.mutatedParts)}}),l.catch(function(){z(a.optimisticOps,e),e.mutatedParts&&xr(e.mutatedParts)})):l.then(function(t){var r=n(n({},e),{values:e.values.map(function(e,r){var i;if(t.failures[r])return e;var s=(null===(i=o.keyPath)||void 0===i?void 0:i.includes("."))?I(e):n({},e);return A(s,o.keyPath,t.results[r]),s})}),i=zr(a,r,t);a.optimisticOps.push(i),queueMicrotask(function(){return e.mutatedParts&&xr(e.mutatedParts)})}),l},query:function(e){var n;if(!Kr(Me,i)||!qr("query",e))return i.query(e);var o="immutable"===(null===(n=Me.trans)||void 0===n?void 0:n.db._options.cache),s=Me,a=s.requery,l=s.signal,u=Yr(t,r,"query",e),c=u[0],h=u[1],f=u[2],d=u[3];if(c&&h)c.obsSet=e.obsSet;else{var p=i.query(e).then(function(e){var t=e.result;if(c&&(c.res=t),o){for(var n=0,r=t.length;n<r;++n)Object.freeze(t[n]);Object.freeze(t)}else e.result=I(t);return e}).catch(function(e){return d&&c&&z(d,c),Promise.reject(e)});c={obsSet:e.obsSet,promise:p,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(c):(d=[c],f||(f=yr["idb://".concat(t,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),f.queries.query[e.query.index.name||""]=d)}return Gr(c,d,a,l),c.promise.then(function(t){return{result:Ur(t.result,e,null==f?void 0:f.optimisticOps,i,c,o)}})}});return s}});return r}};function Zr(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var ei,ti=function(){function e(t,r){var i=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=r=n({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var s=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};a.dbReadyPromise=new Ke(function(e){a.dbReadyResolve=e}),a.openCanceller=new Ke(function(e,t){a.cancelOpen=t}),this._state=a,this.name=t,this.on=zt(this,"populate","blocked","versionchange","close",{ready:[fe,re]}),this.once=function(e,t){var n=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];i.on(e).unsubscribe(n),t.apply(i,r)};return i.on(e,n)},this.on.ready.subscribe=b(this.on.ready.subscribe,function(t){return function(n,r){e.vip(function(){var e=i._state;if(e.openComplete)e.dbOpenError||Ke.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var o=i;r||t(function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)})}})}}),this.Collection=Zt(this),this.Table=$t(this),this.Transaction=bn(this),this.Version=Zn(this),this.WhereClause=fn(this),this.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=An(r.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new i.Transaction(e,t,n,i._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),_t.filter(function(e){return e.name===i.name&&e!==i&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Tr),this.use(Xr),this.use(Lr),this.use(Or),this.use(Mr);var l=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return Zr(i.table(e),l)};var r=Reflect.get(e,t,n);return r instanceof Rt?Zr(r,l):"tables"===t?r.map(function(e){return Zr(e,l)}):"_createTransaction"===t?function(){return Zr(r.apply(this,arguments),l)}:r}});this.vip=l,s.forEach(function(e){return e(i)})}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new Z.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Kn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Me.letThrough||this._vip)?e():new Ke(function(e,n){if(t._state.openComplete)return n(new Z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new Z.DatabaseClosed);t.open().catch(re)}t._state.dbReadyPromise.then(e,n)}).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort(function(e,t){return e.level-t.level}),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:!!n&&e.name!==n})),this},e.prototype.open=function(){var e=this;return dt(Be,function(){return _r(e)})},e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=_t.indexOf(this);if(t>=0&&_t.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Ke(function(t){e.dbReadyResolve=t}),e.openCanceller=new Ke(function(t,n){e.cancelOpen=n}))},e.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new Z.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new Z.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},e.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=arguments.length>0&&"object"!=typeof arguments[0],r=this._state;return new Ke(function(i,o){var s=function(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Xe(function(){ir(t._deps,t.name),i()}),n.onerror=dn(o),n.onblocked=t._fireOnBlocked};if(n)throw new Z.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(s):s()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return o(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=Cr.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=Me.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,s,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map(function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),"r"==e||e===Ct)o=Ct;else{if("rw"!=e&&e!=Et)throw new Z.InvalidArgument("Invalid transaction mode: "+e);o=Et}if(i){if(i.mode===Ct&&o===Et){if(!a)throw new Z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&s.forEach(function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!a)throw new Z.SubTransaction("Table "+e+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,function(t,n){n(e)}):mt(e)}var l=Er.bind(null,this,o,s,i,n);return i?i._promise(o,l,"lock"):Me.trans?dt(Me.transless,function(){return r._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(e){if(!c(this._allTables,e))throw new Z.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},e}(),ni="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",ri=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},e.prototype[ni]=function(){return this},e}();try{ei={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(e){ei={indexedDB:null,IDBKeyRange:null}}function ii(e){var t,n=!1,r=new ri(function(r){var i=N(e);function o(t){var n=He();try{i&&st();var r=ot(e,t);return i&&(r=r.finally(at)),r}finally{n&&We()}}var s,a=!1,l={},u={},c={get closed(){return a},unsubscribe:function(){a||(a=!0,s&&s.abort(),h&&yn.storagemutated.unsubscribe(p))}};r.start&&r.start(c);var h=!1,f=function(){return gt(g)};function d(){return mr(u,l)}var p=function(e){gr(l,e),d()&&f()},g=function(){if(!a&&ei.indexedDB){l={};var i={};s&&s.abort(),s=new AbortController;var c={subscr:i,signal:s.signal,requery:f,querier:e,trans:null},d=o(c);Promise.resolve(d).then(function(e){n=!0,t=e,a||c.signal.aborted||(l={},M(u=i)||h||(yn(gn,p),h=!0),gt(function(){return!a&&r.next&&r.next(e)}))},function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||a||gt(function(){a||r.error&&r.error(e)})})}};return setTimeout(f,0),c});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var oi=ti;function si(e){var t=li;try{li=!0,yn.storagemutated.fire(e),wr(e,!0)}finally{li=t}}h(oi,n(n({},ne),{delete:function(e){return new oi(e,{addons:[]}).delete()},exists:function(e){return new oi(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return nr(oi.dependencies).then(e)}catch(e){return mt(new Z.MissingAPI)}},defineClass:function(){function e(e){a(this,e)}return e},ignoreTransaction:function(e){return Me.trans?dt(Me.transless,e):e()},vip:or,async:function(e){return function(){try{var t=Ar(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ke.resolve(t)}catch(e){return mt(e)}}},spawn:function(e,t,n){try{var r=Ar(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Ke.resolve(r)}catch(e){return mt(e)}},currentTransaction:{get:function(){return Me.trans||null}},waitFor:function(e,t){var n=Ke.resolve("function"==typeof e?oi.ignoreTransaction(e):e).timeout(t||6e4);return Me.trans?Me.trans.waitFor(n):n},Promise:Ke,debug:{get:function(){return de},set:function(e){pe(e)}},derive:p,extend:a,props:h,override:b,Events:zt,on:yn,liveQuery:ii,extendObservabilitySet:gr,getByKeyPath:_,setByKeyPath:A,delByKeyPath:C,shallowClone:E,deepClone:I,getObjectDiff:jr,cmp:Bt,asap:w,minKey:xt,addons:[],connections:_t,errnames:J,dependencies:ei,cache:yr,semVer:vt,version:vt.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),oi.maxKey=An(oi.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(yn(gn,function(e){var t;li||(t=new CustomEvent(mn,{detail:e}),li=!0,dispatchEvent(t),li=!1)}),addEventListener(mn,function(e){var t=e.detail;li||si(t)}));var ai,li=!1,ui=function(){};function ci(e){return new qt({add:e})}function hi(e){return new qt({remove:e})}function fi(e,t){return new qt({replacePrefix:[e,t]})}return"undefined"!=typeof BroadcastChannel&&((ui=function(){(ai=new BroadcastChannel(mn)).onmessage=function(e){return e.data&&si(e.data)}})(),"function"==typeof ai.unref&&ai.unref(),yn(gn,function(e){li||ai.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!ti.disableBfCache&&e.persisted){de&&console.debug("Dexie: handling persisted pagehide"),null==ai||ai.close();for(var t=0,n=_t;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!ti.disableBfCache&&e.persisted&&(de&&console.debug("Dexie: handling persisted pageshow"),ui(),si({all:new lr(-1/0,[[]])}))})),Ke.rejectionMapper=te,pe(de),n(ti,Object.freeze({__proto__:null,Dexie:ti,liveQuery:ii,Entity:jt,cmp:Bt,PropModification:qt,replacePrefix:fi,add:ci,remove:hi,default:ti,RangeSet:lr,mergeRanges:cr,rangesOverlap:hr}),{default:ti}),ti}();var ce=le(ue.exports);const he=Symbol.for("Dexie"),fe=globalThis[he]||(globalThis[he]=ce);if(ce.semVer!==fe.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ce.semVer} and ${fe.semVer}`);function de(e){return new Date(e).toLocaleDateString()}function pe(e){if(e.faviconUrl)return e.faviconUrl;if(e.url&&(e.url.startsWith("http://")||e.url.startsWith("https://")))try{return`https://www.google.com/s2/favicons?domain=${e.domain||new URL(e.url).hostname}&sz=32`}catch(e){}return function(e){if(e.url.startsWith("http://")||e.url.startsWith("https://")){const t=e.domain||"unknown",n=t.charAt(0).toUpperCase(),r=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899"];return`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="${r[t.length%r.length]}"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white" font-weight="bold">${n}</text></svg>`}switch(e.domain||""){case"chrome-internal":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23EA4335"/><circle cx="8" cy="8" r="3" fill="white"/></svg>';case"local-file":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F59E0B"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">üìÑ</text></svg>';case"javascript-bookmarklet":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F7DF1E"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="black" font-weight="bold">JS</text></svg>';case"data-uri":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%2310B981"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="white" font-weight="bold">D</text></svg>';case"contact-link":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%238B5CF6"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">@</text></svg>';case"other-protocol":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%236B7280"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">‚ö°</text></svg>';default:return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23E5E7EB"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="%236B7280">?</text></svg>'}}(e)}const ge={RELEVANCE:{key:"relevance",label:"Best Match",sort:(e,t)=>(t._searchScore||0)-(e._searchScore||0)},DATE_DESC:{key:"date_desc",label:"Newest First",sort:(e,t)=>t.dateAdded-e.dateAdded},DATE_ASC:{key:"date_asc",label:"Oldest First",sort:(e,t)=>e.dateAdded-t.dateAdded},TITLE_ASC:{key:"title_asc",label:"Title A-Z",sort:(e,t)=>(e.title||"").localeCompare(t.title||"")},TITLE_DESC:{key:"title_desc",label:"Title Z-A",sort:(e,t)=>(t.title||"").localeCompare(e.title||"")},DOMAIN_ASC:{key:"domain_asc",label:"Domain A-Z",sort:(e,t)=>(e.domain||"").localeCompare(t.domain||"")}};function me(e){const t=Object.values(ge).find(t=>t.key===e);return t?t.sort:ge.DATE_DESC.sort}const ye=new fe("BookmarkInsightsDB");async function ve(){try{return await ye.bookmarks.toArray()}catch(e){return console.error("Error getting bookmarks:",e),[]}}async function be(e,t,n=null){try{return await ye.cache.put({key:e,value:t,timestamp:Date.now(),ttl:n}),!0}catch(e){return console.error("Error setting cache:",e),!1}}async function xe(){try{if(!chrome.readingList)return console.warn("Reading List API not available"),[];return(await chrome.readingList.query({})).map(e=>({...e,id:`reading-list-${encodeURIComponent(e.url)}`,isReadingListItem:!0,dateAdded:e.creationTime,lastUpdated:e.lastUpdateTime,domain:(()=>{try{return new URL(e.url).hostname}catch{return"unknown"}})()}))}catch(e){return console.error("Error getting reading list items:",e),[]}}
/**!
 * FlexSearch.js v0.8.212 (Bundle/Module)
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/flexsearch
 */
var we;function ke(e,t,n){const r=typeof n,i=typeof e;if("undefined"!==r){if("undefined"!==i){if(n){if("function"===i&&r===i)return function(t){return e(n(t))};if((t=e.constructor)===n.constructor){if(t===Array)return n.concat(e);if(t===Map){var o=new Map(n);for(var s of e)o.set(s[0],s[1]);return o}if(t===Set){for(o of(s=new Set(n),e.values()))s.add(o);return s}}}return e}return n}return"undefined"===i?t:e}function _e(e,t){return void 0===e?t:e}function Ae(){return Object.create(null)}function Ce(e){return"string"==typeof e}function Ee(e){return"object"==typeof e}function Pe(e,t){if(Ce(t))e=e[t];else for(let n=0;e&&n<t.length;n++)e=e[t[n]];return e}ye.version(1).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}),ye.version(2).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}).upgrade(e=>{console.log("Upgrading database to version 2 - adding rawMetadata support")}),ye.version(3).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(e=>{console.log("Upgrading database to version 3 - adding similarities and computedMetrics tables")}),ye.version(4).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId, platform, creator, contentType",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(e=>{console.log("Upgrading database to version 4 - adding platformData indexes")}),ye.version(5).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId, platform, creator, contentType, publishedDate",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(e=>{console.log("Upgrading database to version 5 - adding deep metadata analysis fields")});const Se=/[^\p{L}\p{N}]+/u,Oe=/(\d{3})/g,je=/(\D)(\d{3})/g,Be=/(\d{3})(\D)/g,Me=/[\u0300-\u036f]/g;function De(e={}){if(!this||this.constructor!==De)return new De(...arguments);if(arguments.length)for(e=0;e<arguments.length;e++)this.assign(arguments[e]);else this.assign(e)}function Ie(e){e.F=null,e.B.clear(),e.D.clear()}function Te(e,t,n){n||(t||"object"!=typeof e?"object"==typeof t&&(n=t,t=0):n=e),n&&(e=n.query||e,t=n.limit||t);let r=""+(t||0);n&&(r+=(n.offset||0)+!!n.context+!!n.suggest+(!1!==n.resolve)+(n.resolution||this.resolution)+(n.boost||0)),e=(""+e).toLowerCase(),this.cache||(this.cache=new Ke);let i=this.cache.get(e+r);if(!i){const o=n&&n.cache;o&&(n.cache=!1),i=this.search(e,t,n),o&&(n.cache=o),this.cache.set(e+r,i)}return i}function Ke(e){this.limit=e&&!0!==e?e:1e3,this.cache=new Map,this.h=""}(we=De.prototype).assign=function(e){this.normalize=ke(e.normalize,!0,this.normalize);let t,n=e.include,r=n||e.exclude||e.split;if(r||""===r){if("object"==typeof r&&r.constructor!==RegExp){let e="";t=!n,n||(e+="\\p{Z}"),r.letter&&(e+="\\p{L}"),r.number&&(e+="\\p{N}",t=!!n),r.symbol&&(e+="\\p{S}"),r.punctuation&&(e+="\\p{P}"),r.control&&(e+="\\p{C}"),(r=r.char)&&(e+="object"==typeof r?r.join(""):r);try{this.split=new RegExp("["+(n?"^":"")+e+"]+","u")}catch(e){this.split=/\s+/}}else this.split=r,t=!1===r||"a1a".split(r).length<2;this.numeric=ke(e.numeric,t)}else{try{this.split=ke(this.split,Se)}catch(e){this.split=/\s+/}this.numeric=ke(e.numeric,ke(this.numeric,!0))}if(this.prepare=ke(e.prepare,null,this.prepare),this.finalize=ke(e.finalize,null,this.finalize),r=e.filter,this.filter="function"==typeof r?r:ke(r&&new Set(r),null,this.filter),this.dedupe=ke(e.dedupe,!0,this.dedupe),this.matcher=ke((r=e.matcher)&&new Map(r),null,this.matcher),this.mapper=ke((r=e.mapper)&&new Map(r),null,this.mapper),this.stemmer=ke((r=e.stemmer)&&new Map(r),null,this.stemmer),this.replacer=ke(e.replacer,null,this.replacer),this.minlength=ke(e.minlength,1,this.minlength),this.maxlength=ke(e.maxlength,1024,this.maxlength),this.rtl=ke(e.rtl,!1,this.rtl),(this.cache=r=ke(e.cache,!0,this.cache))&&(this.F=null,this.L="number"==typeof r?r:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const e of this.matcher.keys())this.h+=(this.h?"|":"")+e;if(this.stemmer)for(const e of this.stemmer.keys())this.A+=(this.A?"|":"")+e;return this},we.addStemmer=function(e,t){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(e,t),this.A+=(this.A?"|":"")+e,this.K=null,this.cache&&Ie(this),this},we.addFilter=function(e){return"function"==typeof e?this.filter=e:(this.filter||(this.filter=new Set),this.filter.add(e)),this.cache&&Ie(this),this},we.addMapper=function(e,t){return"object"==typeof e?this.addReplacer(e,t):e.length>1?this.addMatcher(e,t):(this.mapper||(this.mapper=new Map),this.mapper.set(e,t),this.cache&&Ie(this),this)},we.addMatcher=function(e,t){return"object"==typeof e?this.addReplacer(e,t):e.length<2&&(this.dedupe||this.mapper)?this.addMapper(e,t):(this.matcher||(this.matcher=new Map),this.matcher.set(e,t),this.h+=(this.h?"|":"")+e,this.J=null,this.cache&&Ie(this),this)},we.addReplacer=function(e,t){return"string"==typeof e?this.addMatcher(e,t):(this.replacer||(this.replacer=[]),this.replacer.push(e,t),this.cache&&Ie(this),this)},we.encode=function(e,t){if(this.cache&&e.length<=this.H)if(this.F){if(this.B.has(e))return this.B.get(e)}else this.F=setTimeout(Ie,50,this);this.normalize&&(e="function"==typeof this.normalize?this.normalize(e):Me?e.normalize("NFKD").replace(Me,"").toLowerCase():e.toLowerCase()),this.prepare&&(e=this.prepare(e)),this.numeric&&e.length>3&&(e=e.replace(je,"$1 $2").replace(Be,"$1 $2").replace(Oe,"$1 "));const n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let r,i,o=[],s=Ae(),a=this.split||""===this.split?e.split(this.split):[e];for(let e,u,c=0;c<a.length;c++)if((e=u=a[c])&&!(e.length<this.minlength||e.length>this.maxlength)){if(t){if(s[e])continue;s[e]=1}else{if(r===e)continue;r=e}if(n)o.push(e);else if(!this.filter||("function"==typeof this.filter?this.filter(e):!this.filter.has(e))){if(this.cache&&e.length<=this.I)if(this.F){var l=this.D.get(e);if(l||""===l){l&&o.push(l);continue}}else this.F=setTimeout(Ie,50,this);if(this.stemmer){let t;for(this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));t!==e&&e.length>2;)t=e,e=e.replace(this.K,e=>this.stemmer.get(e))}if(e&&(this.mapper||this.dedupe&&e.length>1)){l="";for(let t,n,r=0,i="";r<e.length;r++)t=e.charAt(r),t===i&&this.dedupe||((n=this.mapper&&this.mapper.get(t))||""===n?n===i&&this.dedupe||!(i=n)||(l+=n):l+=i=t);e=l}if(this.matcher&&e.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),e=e.replace(this.J,e=>this.matcher.get(e))),e&&this.replacer)for(l=0;e&&l<this.replacer.length;l+=2)e=e.replace(this.replacer[l],this.replacer[l+1]);if(this.cache&&u.length<=this.I&&(this.D.set(u,e),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),e){if(e!==u)if(t){if(s[e])continue;s[e]=1}else{if(i===e)continue;i=e}o.push(e)}}}return this.finalize&&(o=this.finalize(o)||o),this.cache&&e.length<=this.H&&(this.B.set(e,o),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),o},Ke.prototype.set=function(e,t){this.cache.set(this.h=e,t),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},Ke.prototype.get=function(e){const t=this.cache.get(e);return t&&this.h!==e&&(this.cache.delete(e),this.cache.set(this.h=e,t)),t},Ke.prototype.remove=function(e){for(const t of this.cache){const n=t[0];t[1].includes(e)&&this.cache.delete(n)}},Ke.prototype.clear=function(){this.cache.clear(),this.h=""};const qe={normalize:!1,numeric:!1,dedupe:!1},Le={},Re=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),ze=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Fe=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],$e={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,"√ü":2,d:3,t:3,l:4,m:5,n:5,r:6};var Ne={Exact:qe,Default:Le,Normalize:Le,LatinBalance:{mapper:Re},LatinAdvanced:{mapper:Re,matcher:ze,replacer:Fe},LatinExtra:{mapper:Re,replacer:Fe.concat([/(?!^)[aeo]/g,""]),matcher:ze},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(e){for(let n=0;n<e.length;n++){var t=e[n];let r=t.charAt(0),i=$e[r];for(let e,n=1;n<t.length&&(e=t.charAt(n),"h"===e||"w"===e||!(e=$e[e])||e===i||(r+=e,i=e,4!==r.length));n++);e[n]=r}}},CJK:{split:""},LatinExact:qe,LatinDefault:Le,LatinSimple:Le};function Ue(e,t,n,r){let i=[];for(let o,s=0;s<e.index.length;s++)if(o=e.index[s],t>=o.length)t-=o.length;else{const s=(t=o[r?"splice":"slice"](t,n)).length;if(s&&(i=i.length?i.concat(t):t,n-=s,r&&(e.length-=s),!n))break;t=0}return i}function He(e){if(!this||this.constructor!==He)return new He(e);this.index=e?[e]:[],this.length=e?e.length:0;const t=this;return new Proxy([],{get:(e,n)=>"length"===n?t.length:"push"===n?function(e){t.index[t.index.length-1].push(e),t.length++}:"pop"===n?function(){if(t.length)return t.length--,t.index[t.index.length-1].pop()}:"indexOf"===n?function(e){let n=0;for(let r,i,o=0;o<t.index.length;o++){if(r=t.index[o],i=r.indexOf(e),i>=0)return n+i;n+=r.length}return-1}:"includes"===n?function(e){for(let n=0;n<t.index.length;n++)if(t.index[n].includes(e))return!0;return!1}:"slice"===n?function(e,n){return Ue(t,e||0,n||t.length,!1)}:"splice"===n?function(e,n){return Ue(t,e||0,n||t.length,!0)}:"constructor"===n?Array:"symbol"!=typeof n?(e=t.index[n/2**31|0])&&e[n]:void 0,set:(e,n,r)=>(e=n/2**31|0,(t.index[e]||(t.index[e]=[]))[n]=r,t.length++,!0)})}function We(e=8){if(!this||this.constructor!==We)return new We(e);this.index=Ae(),this.h=[],this.size=0,e>32?(this.B=Ye,this.A=BigInt(e)):(this.B=Qe,this.A=e)}function Ve(e=8){if(!this||this.constructor!==Ve)return new Ve(e);this.index=Ae(),this.h=[],this.size=0,e>32?(this.B=Ye,this.A=BigInt(e)):(this.B=Qe,this.A=e)}function Qe(e){let t=2**this.A-1;if("number"==typeof e)return e&t;let n=0,r=this.A+1;for(let i=0;i<e.length;i++)n=(n*r^e.charCodeAt(i))&t;return 32===this.A?n+2**31:n}function Ye(e){let t=BigInt(2)**this.A-BigInt(1);var n=typeof e;if("bigint"===n)return e&t;if("number"===n)return BigInt(e)&t;n=BigInt(0);let r=this.A+BigInt(1);for(let i=0;i<e.length;i++)n=(n*r^BigInt(e.charCodeAt(i)))&t;return n}let Ge,Je,Xe,Ze,et;async function tt(e){var t=(e=e.data).task;const n=e.id;let r=e.args;if("init"===t)Je=e.options||{},(t=e.factory)?(Function("return "+t)()(self),Ge=new self.FlexSearch.Index(Je),delete self.FlexSearch):Ge=new Ht(Je),postMessage({id:n});else{let i;"export"===t&&(r[1]?(r[0]=Je.export,r[2]=0,r[3]=1):r=null),"import"===t?r[0]&&(e=await Je.import.call(Ge,r[0]),Ge.import(r[0],e)):((i=r&&Ge[t].apply(Ge,r))&&i.then&&(i=await i),i&&i.await&&(i=await i.await),"search"===t&&i.result&&(i=i.result)),postMessage("search"===t?{id:n,msg:i}:{id:n})}}function nt(e){it.call(e,"add"),it.call(e,"append"),it.call(e,"search"),it.call(e,"update"),it.call(e,"remove"),it.call(e,"searchCache")}function rt(){Xe=et=0}function it(e){this[e+"Async"]=function(){const t=arguments;var n=t[t.length-1];let r;if("function"==typeof n&&(r=n,delete t[t.length-1]),Xe?et||(et=Date.now()-Ze>=this.priority*this.priority*3):(Xe=setTimeout(rt,0),Ze=Date.now()),et){const n=this;return new Promise(r=>{setTimeout(function(){r(n[e+"Async"].apply(n,t))},0)})}const i=this[e].apply(this,t);return n=i.then?i:new Promise(e=>e(i)),r&&n.then(r),n}}He.prototype.clear=function(){this.index.length=0},He.prototype.push=function(){},We.prototype.get=function(e){const t=this.index[this.B(e)];return t&&t.get(e)},We.prototype.set=function(e,t){var n=this.B(e);let r=this.index[n];r?(n=r.size,r.set(e,t),(n-=r.size)&&this.size++):(this.index[n]=r=new Map([[e,t]]),this.h.push(r),this.size++)},Ve.prototype.add=function(e){var t=this.B(e);let n=this.index[t];n?(t=n.size,n.add(e),(t-=n.size)&&this.size++):(this.index[t]=n=new Set([e]),this.h.push(n),this.size++)},(we=We.prototype).has=Ve.prototype.has=function(e){const t=this.index[this.B(e)];return t&&t.has(e)},we.delete=Ve.prototype.delete=function(e){const t=this.index[this.B(e)];t&&t.delete(e)&&this.size--},we.clear=Ve.prototype.clear=function(){this.index=Ae(),this.h=[],this.size=0},we.values=Ve.prototype.values=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].values())yield t},we.keys=Ve.prototype.keys=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].keys())yield t},we.entries=Ve.prototype.entries=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].entries())yield t};let ot=0;function st(e={},t){function n(n){function s(e){const t=(e=e.data||e).id,n=t&&o.h[t];n&&(n(e.msg),delete o.h[t])}if(this.worker=n,this.h=Ae(),this.worker)return i?this.worker.on("message",s):this.worker.onmessage=s,e.config?new Promise(function(t){ot>1e9&&(ot=0),o.h[++ot]=function(){t(o)},o.worker.postMessage({id:ot,task:"init",factory:r,options:e})}):(this.priority=e.priority||4,this.encoder=t||null,this.worker.postMessage({task:"init",factory:r,options:e}),this)}if(!this||this.constructor!==st)return new st(e);let r="undefined"!=typeof self?self._factory:"undefined"!=typeof window?window._factory:null;r&&(r=r.toString());const i="undefined"==typeof window,o=this,s=function(e,t,n){return t?"undefined"!=typeof module?new(require("worker_threads").Worker)(__dirname+"/worker/node.js"):Promise.resolve().then(function(){return pr}).then(function(e){return new e.Worker(import.meta.dirname+"/node/node.mjs")}):e?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+tt.toString()],{type:"text/javascript"}))):new window.Worker("string"==typeof n?n:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}(r,i,e.worker);return s.then?s.then(function(e){return n.call(o,e)}):n.call(this,s)}function at(e){st.prototype[e]=function(){const t=this,n=[].slice.call(arguments);var r=n[n.length-1];let i;return"function"==typeof r&&(i=r,n.pop()),r=new Promise(function(r){"export"===e&&"function"==typeof n[0]&&(n[0]=null),ot>1e9&&(ot=0),t.h[++ot]=r,t.worker.postMessage({task:e,id:ot,args:n})}),i?(r.then(i),this):r}}function lt(e,t,n,r,i,o){if(e=e[i],r===n.length-1)t[i]=o||e;else if(e)if(e.constructor===Array)for(t=t[i]=Array(e.length),i=0;i<e.length;i++)lt(e,t,n,r,i);else t=t[i]||(t[i]=Ae()),i=n[++r],lt(e,t,n,r,i)}function ut(e,t,n,r,i,o,s,a){if(e=e[s])if(r===t.length-1){if(e.constructor===Array){if(n[r]){for(t=0;t<e.length;t++)i.add(o,e[t],!0,!0);return}e=e.join(" ")}i.add(o,e,a,!0)}else if(e.constructor===Array)for(s=0;s<e.length;s++)ut(e,t,n,r,i,o,s,a);else s=t[++r],ut(e,t,n,r,i,o,s,a)}function ct(e,t,n,r){if(!e.length)return e;if(1===e.length)return e=e[0],e=n||e.length>t?e.slice(n,n+t):e,r?Ct.call(this,e):e;let i=[];for(let o,s,a=0;a<e.length;a++)if((o=e[a])&&(s=o.length)){if(n){if(n>=s){n-=s;continue}o=o.slice(n,n+t),s=o.length,n=0}if(s>t&&(o=o.slice(0,t),s=t),!i.length&&s>=t)return r?Ct.call(this,o):o;if(i.push(o),!(t-=s))break}return i=i.length>1?[].concat.apply([],i):i[0],r?Ct.call(this,i):i}function ht(e,t,n,r){var i=r[0];if(i[0]&&i[0].query)return e[t].apply(e,i);if(!("and"!==t&&"not"!==t||e.result.length||e.await||i.suggest))return r.length>1&&(i=r[r.length-1]),(r=i.resolve)?e.await||e.result:e;let o,s,a,l,u,c=[],h=0,f=0;for(t=0;t<r.length;t++)if(i=r[t]){var d=void 0;if(i.constructor===vt)d=i.await||i.result;else if(i.then||i.constructor===Array)d=i;else{h=i.limit||0,f=i.offset||0,a=i.suggest,s=i.resolve,o=((l=i.highlight||e.highlight)||i.enrich)&&s,d=i.queue;let n=i.async||d,r=i.index,p=i.query;if(r?e.index||(e.index=r):r=e.index,p||i.tag){const o=i.field||i.pluck;if(o&&(!p||e.query&&!l||(e.query=p,e.field=o,e.highlight=l),r=r.index.get(o)),d&&(u||e.await)){let o;u=1;const s=e.C.length,a=new Promise(function(e){o=e});(function(t,r){a.h=function(){r.index=null,r.resolve=!1;let i=n?t.searchAsync(r):t.search(r);return i.then?i.then(function(t){return e.C[s]=t=t.result||t,o(t),t}):(i=i.result||i,o(i),i)}})(r,Object.assign({},i)),e.C.push(a),c[t]=a;continue}i.resolve=!1,i.index=null,d=n?r.searchAsync(i):r.search(i),i.resolve=s,i.index=r}else if(i.and)d=ft(i,"and",r);else if(i.or)d=ft(i,"or",r);else if(i.not)d=ft(i,"not",r);else{if(!i.xor)continue;d=ft(i,"xor",r)}}d.await?(u=1,d=d.await):d.then?(u=1,d=d.then(function(e){return e.result||e})):d=d.result||d,c[t]=d}if(u&&!e.await&&(e.await=new Promise(function(t){e.return=t})),u){const t=Promise.all(c).then(function(r){for(let i=0;i<e.C.length;i++)if(e.C[i]===t){e.C[i]=function(){return n.call(e,r,h,f,o,s,a,l)};break}bt(e)});e.C.push(t)}else{if(!e.await)return n.call(e,c,h,f,o,s,a,l);e.C.push(function(){return n.call(e,c,h,f,o,s,a,l)})}return s?e.await||e.result:e}function ft(e,t,n){const r=(e=e[t])[0]||e;return r.index||(r.index=n),n=new vt(r),e.length>1&&(n=n[t].apply(n,e.slice(1))),n}function dt(e,t,n,r,i,o,s){return e.length&&(this.result.length&&e.push(this.result),e.length<2?this.result=e[0]:(this.result=wt(e,t,n,!1,this.h),n=0)),i&&(this.await=null),i?this.resolve(t,n,r,s):this}function pt(e,t,n,r,i,o,s){if(!o&&!this.result.length)return i?this.result:this;let a;if(e.length)if(this.result.length&&e.unshift(this.result),e.length<2)this.result=e[0];else{let r=0;for(let t,n,i=0;i<e.length;i++)if((t=e[i])&&(n=t.length))r<n&&(r=n);else if(!o){r=0;break}r?(this.result=xt(e,r,t,n,o,this.h,i),a=!0):this.result=[]}else o||(this.result=e);return i&&(this.await=null),i?this.resolve(t,n,r,s,a):this}function gt(e,t,n,r,i,o,s){if(e.length)if(this.result.length&&e.unshift(this.result),e.length<2)this.result=e[0];else{e:{o=n;var a=this.h;const r=[],s=Ae();let l=0;for(let t,n=0;n<e.length;n++)if(t=e[n]){l<t.length&&(l=t.length);for(let e,n=0;n<t.length;n++)if(e=t[n])for(let t,n=0;n<e.length;n++)t=e[n],s[t]=s[t]?2:1}for(let n,u=0,c=0;u<l;u++)for(let l,h=0;h<e.length;h++)if((l=e[h])&&(n=l[u]))for(let l,f=0;f<n.length;f++)if(l=n[f],1===s[l])if(o)o--;else if(i){if(r.push(l),r.length===t){e=r;break e}}else{const n=u+(h?a:0);if(r[n]||(r[n]=[]),r[n].push(l),++c===t){e=r;break e}}e=r}this.result=e,a=!0}else o||(this.result=e);return i&&(this.await=null),i?this.resolve(t,n,r,s,a):this}function mt(e,t,n,r,i,o,s){if(!o&&!this.result.length)return i?this.result:this;if(e.length&&this.result.length){e:{o=n;var a=[];e=new Set(e.flat().flat());for(let n,r=0,s=0;r<this.result.length;r++)if(n=this.result[r])for(let l,u=0;u<n.length;u++)if(l=n[u],!e.has(l))if(o)o--;else if(i){if(a.push(l),a.length===t){e=a;break e}}else if(a[r]||(a[r]=[]),a[r].push(l),++s===t){e=a;break e}e=a}this.result=e,a=!0}return i&&(this.await=null),i?this.resolve(t,n,r,s,a):this}function yt(e,t,n,r,i){let o,s,a;"string"==typeof i?(o=i,i=""):o=i.template,s=o.indexOf("$1"),a=o.substring(s+2),s=o.substring(0,s);let l=i&&i.boundary,u=!i||!1!==i.clip,c=i&&i.merge&&a&&s&&new RegExp(a+" "+s,"g");var h=0;if("object"==typeof(i=i&&i.ellipsis)){var f=i.template;h=f.length-2,i=i.pattern}let d,p;"string"!=typeof i&&(i=!1===i?"":"..."),h&&(i=f.replace("$1",i)),f=i.length-h,"object"==typeof l&&(d=l.before,0===d&&(d=-1),p=l.after,0===p&&(p=-1),l=l.total||9e5),h=new Map;for(let D,I,T,K=0;K<t.length;K++){let q;if(r)q=t,T=r;else{var g=t[K];if(T=g.field,!T)continue;q=g.result}I=n.get(T),D=I.encoder,"string"!=typeof(g=h.get(D))&&(g=D.encode(e),h.set(D,g));for(let e=0;e<q.length;e++){var m=q[e].doc;if(!m)continue;if(!(m=Pe(m,T)))continue;var y=m.trim().split(/\s+/);if(!y.length)continue;m="";var v=[];let t=[];for(var b=-1,x=-1,w=0,k=0;k<y.length;k++){var _=y[k],A=D.encode(_);let e;if((A=A.length>1?A.join(" "):A[0])&&_){for(var C=_.length,E=(D.split?_.replace(D.split,""):_).length-A.length,P="",S=0,O=0;O<g.length;O++){var j=g[O];if(j){var B=j.length;B+=E<0?0:E,S&&B<=S||(j=A.indexOf(j))>-1&&(P=(j?_.substring(0,j):"")+s+_.substring(j,j+B)+a+(j+B<C?_.substring(j+B):""),S=B,e=!0)}}P&&(l&&(b<0&&(b=m.length+(m?1:0)),x=m.length+(m?1:0)+P.length,w+=C,t.push(v.length),v.push({match:P})),m+=(m?" ":"")+P)}if(e){if(l&&w>=l)break}else m+=(m?" ":"")+(_=y[k]),l&&v.push({text:_})}if(w=t.length*(o.length-2),d||p||l&&m.length-w>l)if(k=x-b,d>0&&(k+=d),p>0&&(k+=p),k<=(w=l+w-2*f))y=d?b-(d>0?d:0):b-((w-k)/2|0),v=p?x+(p>0?p:0):y+w,u||(y>0&&" "!==m.charAt(y)&&" "!==m.charAt(y-1)&&((y=m.indexOf(" ",y))<0&&(y=0)),v<m.length&&" "!==m.charAt(v-1)&&" "!==m.charAt(v)&&((v=m.lastIndexOf(" ",v))<x?v=x:++v)),m=(y?i:"")+m.substring(y,v)+(v<m.length?i:"");else{for(x=[],b={},w={},k={},_={},A={},P=E=C=0,O=S=1;;){var M=void 0;for(let e,n=0;n<t.length;n++){if(e=t[n],P)if(E!==P){if(k[n+1])continue;if(e+=P,b[e]){C-=f,w[n+1]=1,k[n+1]=1;continue}if(e>=v.length-1){if(e>=v.length){k[n+1]=1,e>=y.length&&(w[n+1]=1);continue}C-=f}if(m=v[e].text,B=p&&A[n]){if(!(B>0)){k[n+1]=1;continue}if(m.length>B){if(k[n+1]=1,!u)continue;m=m.substring(0,B)}(B-=m.length)||(B=-1),A[n]=B}if(C+m.length+1<=l)m=" "+m,x[n]+=m;else{if(!u){k[n+1]=1;continue}(M=l-C-1)>0&&(m=" "+m.substring(0,M),x[n]+=m),k[n+1]=1}}else{if(k[n])continue;if(e-=E,b[e]){C-=f,k[n]=1,w[n]=1;continue}if(e<=0){if(e<0){k[n]=1,w[n]=1;continue}C-=f}if(m=v[e].text,B=d&&_[n]){if(!(B>0)){k[n]=1;continue}if(m.length>B){if(k[n]=1,!u)continue;m=m.substring(m.length-B)}(B-=m.length)||(B=-1),_[n]=B}if(C+m.length+1<=l)m+=" ",x[n]=m+x[n];else{if(!u){k[n]=1;continue}(M=m.length+1-(l-C))>=0&&M<m.length&&(m=m.substring(M)+" ",x[n]=m+x[n]),k[n]=1}}else{let t;if(m=v[e].match,d&&(_[n]=d),p&&(A[n]=p),n&&C++,e?!n&&f&&(C+=f):(w[n]=1,k[n]=1),e>=y.length-1||e<v.length-1&&v[e+1].match?t=1:f&&(C+=f),C-=o.length-2,n&&!(C+m.length<=l)){M=S=O=w[n]=0;break}x[n]=m,t&&(w[n+1]=1,k[n+1]=1)}C+=m.length,M=b[e]=1}if(M)E===P?P++:E++;else{if(E===P?S=0:O=0,!S&&!O)break;S?P=++E:P++}}m="";for(let e,t=0;t<x.length;t++)e=(w[t]?t?" ":"":(t&&!i?" ":"")+i)+x[t],m+=e;i&&!w[x.length]&&(m+=i)}c&&(m=m.replace(c," ")),q[e].highlight=m}if(r)break}return t}function vt(e,t){if(!this||this.constructor!==vt)return new vt(e,t);let n,r,i,o,s,a,l=0;if(e&&e.index){const n=e;if(t=n.index,l=n.boost||0,r=n.query){i=n.field||n.pluck,o=n.highlight;const r=n.resolve;e=n.async||n.queue,n.resolve=!1,n.index=null,e=e?t.searchAsync(n):t.search(n),n.resolve=r,n.index=t,e=e.result||e}else e=[]}if(e&&e.then){const t=this;n=[e=e.then(function(e){t.C[0]=t.result=e.result||e,bt(t)})],e=[],s=new Promise(function(e){a=e})}this.index=t||null,this.result=e||[],this.h=l,this.C=n||[],this.await=s||null,this.return=a||null,this.highlight=o||null,this.query=r||"",this.field=i||""}function bt(e,t){let n=e.result;var r=e.await;e.await=null;for(let t,i=0;i<e.C.length;i++)if(t=e.C[i])if("function"==typeof t)n=t(),e.C[i]=n=n.result||n,i--;else if(t.h)n=t.h(),e.C[i]=n=n.result||n,i--;else if(t.then)return e.await=r;return r=e.return,e.C=[],e.return=null,t||r(n),n}function xt(e,t,n,r,i,o,s){const a=e.length;let l,u,c=[];l=Ae();for(let h,f,d,p,g=0;g<t;g++)for(let t=0;t<a;t++)if(d=e[t],g<d.length&&(h=d[g]))for(let e=0;e<h.length;e++){if(f=h[e],(u=l[f])?l[f]++:(u=0,l[f]=1),p=c[u]||(c[u]=[]),!s){let e=g+(t||!i?0:o||0);p=p[e]||(p[e]=[])}if(p.push(f),s&&n&&u===a-1&&p.length-r===n)return r?p.slice(r):p}if(e=c.length)if(i)c=c.length>1?wt(c,n,r,s,o):(c=c[0])&&n&&c.length>n||r?c.slice(r,n+r):c;else{if(e<a)return[];if(c=c[e-1],n||r)if(s)(c.length>n||r)&&(c=c.slice(r,n+r));else{i=[];for(let e,t=0;t<c.length;t++)if(e=c[t])if(r&&e.length>r)r-=e.length;else if((n&&e.length>n||r)&&(e=e.slice(r,n+r),n-=e.length,r&&(r-=e.length)),i.push(e),!n)break;c=i}}return c}function wt(e,t,n,r,i){const o=[],s=Ae();let a;var l=e.length;let u;if(r){for(i=l-1;i>=0;i--)if(u=(r=e[i])&&r.length)for(l=0;l<u;l++)if(a=r[l],!s[a])if(s[a]=1,n)n--;else if(o.push(a),o.length===t)return o}else for(let c,h=l-1,f=0;h>=0;h--){c=e[h];for(let e=0;e<c.length;e++)if(u=(r=c[e])&&r.length)for(let c=0;c<u;c++)if(a=r[c],!s[a])if(s[a]=1,n)n--;else{let n=(e+(h<l-1&&i||0))/(h+1)|0;if((o[n]||(o[n]=[])).push(a),++f===t)return o}}return o}function kt(e,t,n,r,i){const o=Ae(),s=[];for(let e,n=0;n<t.length;n++){e=t[n];for(let t=0;t<e.length;t++)o[e[t]]=1}if(i){for(let t,i=0;i<e.length;i++)if(t=e[i],o[t])if(r)r--;else if(s.push(t),o[t]=0,n&&0===--n)break}else for(let n,r,i=0;i<e.result.length;i++)for(n=e.result[i],t=0;t<n.length;t++)r=n[t],o[r]&&((s[i]||(s[i]=[])).push(r),o[r]=0);return s}function _t(e){const t=[],n=Ae(),r=Ae();for(let i,o,s,a,l,u,c,h=0;h<e.length;h++){i=e[h],o=i.field,s=i.result;for(let e=0;e<s.length;e++)l=s[e],"object"!=typeof l?l={id:a=l}:a=l.id,(u=n[a])?u.push(o):(l.field=n[a]=[o],t.push(l)),(c=l.highlight)&&(u=r[a],u||(r[a]=u={},l.highlight=u),u[o]=c)}return t}function At(e,t,n,r,i){return(e=this.tag.get(e))&&(e=e.get(t))?((t=e.length-r)>0&&((n&&t>n||r)&&(e=e.slice(r,r+n)),i&&(e=Ct.call(this,e))),e):[]}function Ct(e){if(!this||!this.store)return e;if(this.db)return this.index.get(this.field[0]).db.enrich(e);const t=Array(e.length);for(let n,r=0;r<e.length;r++)n=e[r],t[r]={id:n,doc:this.store.get(n)};return t}function Et(e){if(!this||this.constructor!==Et)return new Et(e);const t=e.document||e.doc||e;let n,r;if(this.B=[],this.field=[],this.D=[],this.key=(n=t.key||t.id)&&St(n,this.D)||"id",(r=e.keystore||0)&&(this.keystore=r),this.fastupdate=!!e.fastupdate,this.reg=!this.fastupdate||e.worker||e.db?r?new Ve(r):new Set:r?new We(r):new Map,this.h=(n=t.store||null)&&n&&!0!==n&&[],this.store=n?r?new We(r):new Map:null,this.cache=(n=e.cache||null)&&new Ke(n),e.cache=!1,this.worker=e.worker||!1,this.priority=e.priority||4,this.index=Pt.call(this,e,t),this.tag=null,(n=t.tag)&&("string"==typeof n&&(n=[n]),n.length)){this.tag=new Map,this.A=[],this.F=[];for(let e,t,r=0;r<n.length;r++){if(e=n[r],t=e.field||e,!t)throw Error("The tag field from the document descriptor is undefined.");e.custom?this.A[r]=e.custom:(this.A[r]=St(t,this.D),e.filter&&("string"==typeof this.A[r]&&(this.A[r]=new String(this.A[r])),this.A[r].G=e.filter)),this.F[r]=t,this.tag.set(t,new Map)}}if(this.worker){this.fastupdate=!1,e=[];for(const t of this.index.values())t.then&&e.push(t);if(e.length){const t=this;return Promise.all(e).then(function(e){let n=0;for(const r of t.index.entries()){const i=r[0];let o=r[1];o.then&&(o=e[n],t.index.set(i,o),n++)}return t})}}else e.db&&(this.fastupdate=!1,this.mount(e.db))}function Pt(e,t){const n=new Map;let r=t.index||t.field||t;Ce(r)&&(r=[r]);for(let t,o,s=0;s<r.length;s++){if(t=r[s],Ce(t)||(o=t,t=t.field),o=Ee(o)?Object.assign({},e,o):e,this.worker){var i=void 0;i=new st(o,i=(i=o.encoder)&&i.encode?i:new De("string"==typeof i?Ne[i]:i||{})),n.set(t,i)}this.worker||n.set(t,new Ht(o,this.reg)),o.custom?this.B[s]=o.custom:(this.B[s]=St(t,this.D),o.filter&&("string"==typeof this.B[s]&&(this.B[s]=new String(this.B[s])),this.B[s].G=o.filter)),this.field[s]=t}if(this.h){Ce(e=t.store)&&(e=[e]);for(let t,n,r=0;r<e.length;r++)t=e[r],n=t.field||t,t.custom?(this.h[r]=t.custom,t.custom.O=n):(this.h[r]=St(n,this.D),t.filter&&("string"==typeof this.h[r]&&(this.h[r]=new String(this.h[r])),this.h[r].G=t.filter))}return n}function St(e,t){const n=e.split(":");let r=0;for(let i=0;i<n.length;i++)"]"===(e=n[i])[e.length-1]&&(e=e.substring(0,e.length-2))&&(t[r]=!0),e&&(n[r++]=e);return r<n.length&&(n.length=r),r>1?n:n[0]}function Ot(e,t=0){let n=[],r=[];t&&(t=25e4/t*5e3|0);for(const i of e.entries())r.push(i),r.length===t&&(n.push(r),r=[]);return r.length&&n.push(r),n}function jt(e,t){t||(t=new Map);for(let n,r=0;r<e.length;r++)n=e[r],t.set(n[0],n[1]);return t}function Bt(e,t=0){let n=[],r=[];t&&(t=25e4/t*1e3|0);for(const i of e.entries())r.push([i[0],Ot(i[1])[0]||[]]),r.length===t&&(n.push(r),r=[]);return r.length&&n.push(r),n}function Mt(e,t){t||(t=new Map);for(let n,r,i=0;i<e.length;i++)n=e[i],r=t.get(n[0]),t.set(n[0],jt(n[1],r));return t}function Dt(e){let t=[],n=[];for(const r of e.keys())n.push(r),25e4===n.length&&(t.push(n),n=[]);return n.length&&t.push(n),t}function It(e,t){t||(t=new Set);for(let n=0;n<e.length;n++)t.add(e[n]);return t}function Tt(e,t,n,r,i,o,s=0){const a=r&&r.constructor===Array;var l=a?r.shift():r;if(!l)return this.export(e,t,i,o+1);if((l=e((t?t+".":"")+(s+1)+"."+n,JSON.stringify(l)))&&l.then){const u=this;return l.then(function(){return Tt.call(u,e,t,n,a?r:null,i,o,s+1)})}return Tt.call(this,e,t,n,a?r:null,i,o,s+1)}function Kt(e,t){let n="";for(const r of e.entries()){e=r[0];const i=r[1];let o="";for(let e,n=0;n<i.length;n++){e=i[n]||[""];let r="";for(let n=0;n<e.length;n++)r+=(r?",":"")+("string"===t?'"'+e[n]+'"':e[n]);r="["+r+"]",o+=(o?",":"")+r}o='["'+e+'",['+o+"]]",n+=(n?",":"")+o}return n}function qt(e,t){let n=0;var r=void 0===t;if(e.constructor===Array){for(let i,o,s,a=0;a<e.length;a++)if((i=e[a])&&i.length){if(r)return 1;if(o=i.indexOf(t),o>=0){if(i.length>1)return i.splice(o,1),1;if(delete e[a],n)return 1;s=1}else{if(s)return 1;n++}}}else for(let i of e.entries())r=i[0],qt(i[1],t)?n++:e.delete(r);return n}at("add"),at("append"),at("search"),at("update"),at("remove"),at("clear"),at("export"),at("import"),st.prototype.searchCache=Te,nt(st.prototype),Et.prototype.add=function(e,t,n){if(Ee(e)&&(e=Pe(t=e,this.key)),t&&(e||0===e)){if(!n&&this.reg.has(e))return this.update(e,t);for(let o,s=0;s<this.field.length;s++){o=this.B[s];var r=this.index.get(this.field[s]);if("function"==typeof o){var i=o(t);i&&r.add(e,i,n,!0)}else(!(i=o.G)||i(t))&&(o.constructor===String?o=[""+o]:Ce(o)&&(o=[o]),ut(t,o,this.D,0,r,e,o[0],n))}if(this.tag)for(r=0;r<this.A.length;r++){var o=this.A[r];i=this.tag.get(this.F[r]);let a=Ae();if("function"==typeof o){if(!(o=o(t)))continue}else{var s=o.G;if(s&&!s(t))continue;o.constructor===String&&(o=""+o),o=Pe(t,o)}if(i&&o){Ce(o)&&(o=[o]);for(let t,r,l=0;l<o.length;l++)if(t=o[l],!a[t]&&(a[t]=1,(s=i.get(t))?r=s:i.set(t,r=[]),!n||!r.includes(e))){if(r.length===2**31-1){if(s=new He(r),this.fastupdate)for(let e of this.reg.values())e.includes(r)&&(e[e.indexOf(r)]=s);i.set(t,r=s)}r.push(e),this.fastupdate&&((s=this.reg.get(e))?s.push(r):this.reg.set(e,[r]))}}}if(this.store&&(!n||!this.store.has(e))){let r;if(this.h){r=Ae();for(let e,i=0;i<this.h.length;i++){if(e=this.h[i],(n=e.G)&&!n(t))continue;let o;if("function"==typeof e){if(o=e(t),!o)continue;e=[e.O]}else if(Ce(e)||e.constructor===String){r[e]=t[e];continue}lt(t,r,e,0,e[0],o)}}this.store.set(e,r||t)}this.worker&&(this.fastupdate||this.reg.add(e))}return this},vt.prototype.or=function(){return ht(this,"or",dt,arguments)},vt.prototype.and=function(){return ht(this,"and",pt,arguments)},vt.prototype.xor=function(){return ht(this,"xor",gt,arguments)},vt.prototype.not=function(){return ht(this,"not",mt,arguments)},(we=vt.prototype).limit=function(e){if(this.await){const t=this;this.C.push(function(){return t.limit(e).result})}else if(this.result.length){const t=[];for(let n,r=0;r<this.result.length;r++)if(n=this.result[r]){if(!(n.length<=e)){t[r]=n.slice(0,e);break}if(t[r]=n,!(e-=n.length))break}this.result=t}return this},we.offset=function(e){if(this.await){const t=this;this.C.push(function(){return t.offset(e).result})}else if(this.result.length){const t=[];for(let n,r=0;r<this.result.length;r++)(n=this.result[r])&&(n.length<=e?e-=n.length:(t[r]=n.slice(e),e=0));this.result=t}return this},we.boost=function(e){if(this.await){const t=this;this.C.push(function(){return t.boost(e).result})}else this.h+=e;return this},we.resolve=function(e,t,n,r,i){let o=this.await?bt(this,!0):this.result;if(o.then){const s=this;return o.then(function(){return s.resolve(e,t,n,r,i)})}return o.length&&("object"==typeof e?(r=e.highlight||this.highlight,n=!!r||e.enrich,t=e.offset,e=e.limit):(r=r||this.highlight,n=!!r||n),o=i?n?Ct.call(this.index,o):o:ct.call(this.index,o,e||100,t,n)),this.finalize(o,r)},we.finalize=function(e,t){if(e.then){const n=this;return e.then(function(e){return n.finalize(e,t)})}t&&e.length&&this.query&&(e=yt(this.query,e,this.index.index,this.field,t));const n=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",n&&n(e),e},Et.prototype.search=function(e,t,n,r){n||(!t&&Ee(e)?(n=e,e=""):Ee(t)&&(n=t,t=0));let i=[];var o=[];let s,a,l,u,c,h,f,d,p=0,g=!0;if(n){n.constructor===Array&&(n={index:n}),e=n.query||e,s=n.pluck,a=n.merge,u=n.boost,h=s||n.field||(h=n.index)&&(h.index?null:h);var m=this.tag&&n.tag;l=n.suggest,g=!1!==n.resolve,c=n.cache,f=g&&this.store&&n.highlight;var y=!!f||g&&this.store&&n.enrich;t=n.limit||t;var v=n.offset||0;if(t||(t=g?100:0),m&&(!this.db||!r)){m.constructor!==Array&&(m=[m]);var b=[];for(let e,t=0;t<m.length;t++)if(e=m[t],e.field&&e.tag){var x=e.tag;if(x.constructor===Array)for(var w=0;w<x.length;w++)b.push(e.field,x[w]);else b.push(e.field,x)}else{x=Object.keys(e);for(let t,n,r=0;r<x.length;r++)if(t=x[r],n=e[t],n.constructor===Array)for(w=0;w<n.length;w++)b.push(t,n[w]);else b.push(t,n)}if(m=b,!e){if(o=[],b.length)for(m=0;m<b.length;m+=2){if(this.db){if(!(r=this.index.get(b[m])))continue;o.push(r=r.db.tag(b[m+1],t,v,y))}else r=At.call(this,b[m],b[m+1],t,v,y);i.push(g?{field:b[m],tag:b[m+1],result:r}:[r])}if(o.length){const e=this;return Promise.all(o).then(function(t){for(let e=0;e<t.length;e++)g?i[e].result=t[e]:i[e]=t[e];return g?i:new vt(i.length>1?xt(i,1,0,0,l,u):i[0],e)})}return g?i:new vt(i.length>1?xt(i,1,0,0,l,u):i[0],this)}}g||s||!(h=h||this.field)||(Ce(h)?s=h:(h.constructor===Array&&1===h.length&&(h=h[0]),s=h.field||h.index)),h&&h.constructor!==Array&&(h=[h])}h||(h=this.field),b=(this.worker||this.db)&&!r&&[];for(let s,a,u,_=0;_<h.length;_++){if(a=h[_],this.db&&this.tag&&!this.B[_])continue;let A;if(Ce(a)||(A=a,a=A.field,e=A.query||e,t=_e(A.limit,t),v=_e(A.offset,v),l=_e(A.suggest,l),f=g&&this.store&&_e(A.highlight,f),y=!!f||g&&this.store&&_e(A.enrich,y),c=_e(A.cache,c)),r)s=r[_];else{w=(x=A||n||{}).enrich;var k=this.index.get(a);if(m&&(this.db&&(x.tag=m,x.field=h,d=k.db.support_tag_search),!d&&w&&(x.enrich=!1),d||(x.limit=0,x.offset=0)),s=c?k.searchCache(e,m&&!d?0:t,x):k.search(e,m&&!d?0:t,x),m&&!d&&(x.limit=t,x.offset=v),w&&(x.enrich=w),b){b[_]=s;continue}}if(u=(s=s.result||s)&&s.length,m&&u){if(x=[],w=0,this.db&&r){if(!d)for(k=h.length;k<r.length;k++){let e=r[k];if(e&&e.length)w++,x.push(e);else if(!l)return g?i:new vt(i,this)}}else for(let e,t,n=0;n<m.length;n+=2){if(e=this.tag.get(m[n]),!e){if(l)continue;return g?i:new vt(i,this)}if(t=(e=e&&e.get(m[n+1]))&&e.length)w++,x.push(e);else if(!l)return g?i:new vt(i,this)}if(w){if(s=kt(s,x,t,v,g),u=s.length,!u&&!l)return g?s:new vt(s,this);w--}}if(u)o[p]=a,i.push(s),p++;else if(1===h.length)return g?i:new vt(i,this)}if(b){if(this.db&&m&&m.length&&!d)for(y=0;y<m.length;y+=2){if(!(o=this.index.get(m[y]))){if(l)continue;return g?i:new vt(i,this)}b.push(o.db.tag(m[y+1],t,v,!1))}const r=this;return Promise.all(b).then(function(i){return n&&(n.resolve=g),i.length&&(i=r.search(e,t,n,i)),i})}if(!p)return g?i:new vt(i,this);if(s&&(!y||!this.store))return i=i[0],g?i:new vt(i,this);for(b=[],v=0;v<o.length;v++){if(m=i[v],y&&m.length&&void 0===m[0].doc&&(this.db?b.push(m=this.index.get(this.field[0]).db.enrich(m)):m=Ct.call(this,m)),s)return g?f?yt(e,m,this.index,s,f):m:new vt(m,this);i[v]={field:o[v],result:m}}if(y&&this.db&&b.length){const t=this;return Promise.all(b).then(function(n){for(let e=0;e<n.length;e++)i[e].result=n[e];return f&&(i=yt(e,i,t.index,s,f)),a?_t(i):i})}return f&&(i=yt(e,i,this.index,s,f)),a?_t(i):i},(we=Et.prototype).mount=function(e){let t=this.field;if(this.tag)for(let e,r=0;r<this.F.length;r++){e=this.F[r];var n=void 0;this.index.set(e,n=new Ht({},this.reg)),t===this.field&&(t=t.slice(0)),t.push(e),n.tag=this.tag.get(e)}n=[];const r={db:e.db,type:e.type,fastupdate:e.fastupdate};for(let i,o,s=0;s<t.length;s++){r.field=o=t[s],i=this.index.get(o);const a=new e.constructor(e.id,r);a.id=e.id,n[s]=a.mount(i),i.document=!0,s?i.bypass=!0:i.store=this.store}const i=this;return this.db=Promise.all(n).then(function(){i.db=!0})},we.commit=async function(){const e=[];for(const t of this.index.values())e.push(t.commit());await Promise.all(e),this.reg.clear()},we.destroy=function(){const e=[];for(const t of this.index.values())e.push(t.destroy());return Promise.all(e)},we.append=function(e,t){return this.add(e,t,!0)},we.update=function(e,t){return this.remove(e).add(e,t)},we.remove=function(e){for(var t of(Ee(e)&&(e=Pe(e,this.key)),this.index.values()))t.remove(e,!0);if(this.reg.has(e)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let r of n){t=r[0];const i=r[1],o=i.indexOf(e);o>-1&&(i.length>1?i.splice(o,1):n.delete(t))}this.store&&this.store.delete(e),this.reg.delete(e)}return this.cache&&this.cache.remove(e),this},we.clear=function(){const e=[];for(const t of this.index.values()){const n=t.clear();n.then&&e.push(n)}if(this.tag)for(const e of this.tag.values())e.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),e.length?Promise.all(e):this},we.contain=function(e){return this.db?this.index.get(this.field[0]).db.has(e):this.reg.has(e)},we.cleanup=function(){for(const e of this.index.values())e.cleanup();return this},we.get=function(e){return this.db?this.index.get(this.field[0]).db.enrich(e).then(function(e){return e[0]&&e[0].doc||null}):this.store.get(e)||null},we.set=function(e,t){return"object"==typeof e&&(e=Pe(t=e,this.key)),this.store.set(e,t),this},we.searchCache=Te,we.export=function(e,t,n=0,r=0){if(n<this.field.length){const i=this.field[n];if((t=this.index.get(i).export(e,i,n,r=1))&&t.then){const r=this;return t.then(function(){return r.export(e,i,n+1)})}return this.export(e,i,n+1)}let i,o;switch(r){case 0:i="reg",o=Dt(this.reg),t=null;break;case 1:i="tag",o=this.tag&&Bt(this.tag,this.reg.size),t=null;break;case 2:i="doc",o=this.store&&Ot(this.store),t=null;break;default:return}return Tt.call(this,e,t,i,o||null,n,r)},we.import=function(e,t){var n=e.split(".");"json"===n[n.length-1]&&n.pop();const r=n.length>2?n[0]:"";if(n=n.length>2?n[2]:n[1],this.worker&&r)return this.index.get(r).import(e);if(t){if("string"==typeof t&&(t=JSON.parse(t)),r)return this.index.get(r).import(n,t);switch(n){case"reg":this.fastupdate=!1,this.reg=It(t,this.reg);for(let e,t=0;t<this.field.length;t++)e=this.index.get(this.field[t]),e.fastupdate=!1,e.reg=this.reg;if(this.worker){t=[];for(const n of this.index.values())t.push(n.import(e));return Promise.all(t)}break;case"tag":this.tag=Mt(t,this.tag);break;case"doc":this.store=jt(t,this.store)}}},nt(Et.prototype),Ht.prototype.remove=function(e,t){const n=this.reg.size&&(this.fastupdate?this.reg.get(e):this.reg.has(e));if(n){if(this.fastupdate){for(let t,r,i=0;i<n.length;i++)if((t=n[i])&&(r=t.length))if(t[r-1]===e)t.pop();else{const n=t.indexOf(e);n>=0&&t.splice(n,1)}}else qt(this.map,e),this.depth&&qt(this.ctx,e);t||this.reg.delete(e)}return this.db&&(this.commit_task.push({del:e}),this.M&&Wt(this)),this.cache&&this.cache.remove(e),this};const Lt={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};function Rt(e,t,n,r,i,o,s){let a,l;if(!(a=t[n])||s&&!a[s]){if(s?((t=a||(t[n]=Ae()))[s]=1,l=e.ctx,(a=l.get(s))?l=a:l.set(s,l=e.keystore?new We(e.keystore):new Map)):(l=e.map,t[n]=1),(a=l.get(n))?l=a:l.set(n,l=a=[]),o)for(let n,o=0;o<a.length;o++)if((n=a[o])&&n.includes(i)){if(o<=r)return;n.splice(n.indexOf(i),1),e.fastupdate&&(t=e.reg.get(i))&&t.splice(t.indexOf(n),1);break}if(l=l[r]||(l[r]=[]),l.push(i),l.length===2**31-1){if(t=new He(l),e.fastupdate)for(let n of e.reg.values())n.includes(l)&&(n[n.indexOf(l)]=t);a[r]=l=t}e.fastupdate&&((r=e.reg.get(i))?r.push(l):e.reg.set(i,[l]))}}function zt(e,t,n,r,i){return n&&e>1?t+(r||0)<=e?n+(i||0):(e-1)/(t+(r||0))*(n+(i||0))+1|0:0}function Ft(e,t,n,r,i,o,s){let a=e.length,l=e;if(a>1)l=xt(e,t,n,r,i,o,s);else if(1===a)return s?ct.call(null,e[0],n,r):new vt(e[0],this);return s?l:new vt(l,this)}function $t(e,t,n,r,i,o,s){return e=Ut(this,e,t,n,r,i,o,s),this.db?e.then(function(e){return i?e||[]:new vt(e,this)}):e&&e.length?i?ct.call(this,e,n,r):new vt(e,this):i?[]:new vt([],this)}function Nt(e,t,n,r){let i=[];if(e&&e.length){if(e.length<=r)return void t.push(e);for(let t,n=0;n<r;n++)(t=e[n])&&(i[n]=t);if(i.length)return void t.push(i)}if(!n)return i}function Ut(e,t,n,r,i,o,s,a){let l;return n&&(l=e.bidirectional&&t>n)&&(l=n,n=t,t=l),e.db?e.db.get(t,n,r,i,o,s,a):e=n?(e=e.ctx.get(n))&&e.get(t):e.map.get(t)}function Ht(e,t){if(!this||this.constructor!==Ht)return new Ht(e);if(e){var n=Ce(e)?e:e.preset;n&&(e=Object.assign({},Lt[n],e))}else e={};const r=!0===(n=e.context)?{depth:1}:n||{},i=Ce(e.encoder)?Ne[e.encoder]:e.encode||e.encoder||{};this.encoder=i.encode?i:"object"==typeof i?new De(i):{encode:i},this.resolution=e.resolution||9,this.tokenize=n=(n=e.tokenize)&&"default"!==n&&"exact"!==n&&n||"strict",this.depth="strict"===n&&r.depth||0,this.bidirectional=!1!==r.bidirectional,this.fastupdate=!!e.fastupdate,this.score=e.score||null,(n=e.keystore||0)&&(this.keystore=n),this.map=n?new We(n):new Map,this.ctx=n?new We(n):new Map,this.reg=t||(this.fastupdate?n?new We(n):new Map:n?new Ve(n):new Set),this.N=r.resolution||3,this.rtl=i.rtl||e.rtl||!1,this.cache=(n=e.cache||null)&&new Ke(n),this.resolve=!1!==e.resolve,(n=e.db)&&(this.db=this.mount(n)),this.M=!1!==e.commit,this.commit_task=[],this.commit_timer=null,this.priority=e.priority||4}function Wt(e){e.commit_timer||(e.commit_timer=setTimeout(function(){e.commit_timer=null,e.db.commit(e)},1))}Ht.prototype.add=function(e,t,n,r){if(t&&(e||0===e)){if(!r&&!n&&this.reg.has(e))return this.update(e,t);r=this.depth;const u=(t=this.encoder.encode(t,!r)).length;if(u){const c=Ae(),h=Ae(),f=this.resolution;for(let d=0;d<u;d++){let p=t[this.rtl?u-1-d:d];var i=p.length;if(i&&(r||!h[p])){var o=this.score?this.score(t,p,d,null,0):zt(f,u,d),s="";switch(this.tokenize){case"tolerant":if(Rt(this,h,p,o,e,n),i>2){for(let t,r,a,l,u=1;u<i-1;u++)t=p.charAt(u),r=p.charAt(u+1),a=p.substring(0,u)+r,l=p.substring(u+2),Rt(this,h,s=a+t+l,o,e,n),Rt(this,h,s=a+l,o,e,n);Rt(this,h,p.substring(0,p.length-1),o,e,n)}break;case"full":if(i>2){for(let r,l=0;l<i;l++)for(o=i;o>l;o--){s=p.substring(l,o),r=this.rtl?i-1-l:l;var a=this.score?this.score(t,p,d,s,r):zt(f,u,d,i,r);Rt(this,h,s,a,e,n)}break}case"bidirectional":case"reverse":if(i>1){for(a=i-1;a>0;a--){s=p[this.rtl?i-1-a:a]+s;var l=this.score?this.score(t,p,d,s,a):zt(f,u,d,i,a);Rt(this,h,s,l,e,n)}s=""}case"forward":if(i>1){for(a=0;a<i;a++)Rt(this,h,s+=p[this.rtl?i-1-a:a],o,e,n);break}default:if(Rt(this,h,p,o,e,n),r&&u>1&&d<u-1)for(i=this.N,s=p,o=Math.min(r+1,this.rtl?d+1:u-d),a=1;a<o;a++){p=t[this.rtl?u-1-d-a:d+a];Rt(this,c,(l=this.bidirectional&&p>s)?s:p,this.score?this.score(t,s,d,p,a-1):zt(i+(u/2>i?0:1),u,d,o-1,a-1),e,n,l?p:s)}}}}this.fastupdate||this.reg.add(e)}}return this.db&&(this.commit_task.push(n?{ins:e}:{del:e}),this.M&&Wt(this)),this},Ht.prototype.search=function(e,t,n){if(n||(t||"object"!=typeof e?"object"==typeof t&&(n=t,t=0):(n=e,e="")),n&&n.cache)return n.cache=!1,e=this.searchCache(e,t,n),n.cache=!0,e;let r,i,o,s,a,l,u,c,h=[],f=0;n&&(e=n.query||e,t=n.limit||t,f=n.offset||0,i=n.context,o=n.suggest,c=(s=n.resolve)&&n.enrich,l=n.boost,u=n.resolution,a=this.db&&n.tag),void 0===s&&(s=this.resolve),i=this.depth&&!1!==i;let d=this.encoder.encode(e,!i);if(r=d.length,t=t||(s?100:0),1===r)return $t.call(this,d[0],"",t,f,s,c,a);if(2===r&&i&&!o)return $t.call(this,d[1],d[0],t,f,s,c,a);let p,g=Ae(),m=0;if(i&&(p=d[0],m=1),u||0===u||(u=p?this.N:this.resolution),this.db){if(this.db.search&&!1!==(n=this.db.search(this,d,t,f,o,s,c,a)))return n;const e=this;return async function(){for(let t,n;m<r;m++){if((n=d[m])&&!g[n]){if(g[n]=1,t=await Ut(e,n,p,0,0,!1,!1),t=Nt(t,h,o,u)){h=t;break}p&&(o&&t&&h.length||(p=n))}o&&p&&m===r-1&&!h.length&&(u=e.resolution,p="",m=-1,g=Ae())}return Ft(h,u,t,f,o,l,s)}()}for(let e,t;m<r;m++){if((t=d[m])&&!g[t]){if(g[t]=1,e=Ut(this,t,p,0,0,!1,!1),e=Nt(e,h,o,u)){h=e;break}p&&(o&&e&&h.length||(p=t))}o&&p&&m===r-1&&!h.length&&(u=this.resolution,p="",m=-1,g=Ae())}return Ft(h,u,t,f,o,l,s)},(we=Ht.prototype).mount=function(e){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),e.mount(this)},we.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},we.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()},we.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},we.append=function(e,t){return this.add(e,t,!0)},we.contain=function(e){return this.db?this.db.has(e):this.reg.has(e)},we.update=function(e,t){const n=this,r=this.remove(e);return r&&r.then?r.then(()=>n.add(e,t)):this.add(e,t)},we.cleanup=function(){return this.fastupdate?(qt(this.map),this.depth&&qt(this.ctx),this):this},we.searchCache=Te,we.export=function(e,t,n=0,r=0){let i,o;switch(r){case 0:i="reg",o=Dt(this.reg);break;case 1:i="cfg",o=null;break;case 2:i="map",o=Ot(this.map,this.reg.size);break;case 3:i="ctx",o=Bt(this.ctx,this.reg.size);break;default:return}return Tt.call(this,e,t,i,o,n,r)},we.import=function(e,t){if(t)switch("string"==typeof t&&(t=JSON.parse(t)),e=e.split("."),"json"===e[e.length-1]&&e.pop(),3===e.length&&e.shift(),e=e.length>1?e[1]:e[0],e){case"reg":this.fastupdate=!1,this.reg=It(t,this.reg);break;case"map":this.map=jt(t,this.map);break;case"ctx":this.ctx=Mt(t,this.ctx)}},we.serialize=function(e=!0){let t="",n="",r="";if(this.reg.size){let e;for(var i of this.reg.keys())e||(e=typeof i),t+=(t?",":"")+("string"===e?'"'+i+'"':i);t="index.reg=new Set(["+t+"]);",n=Kt(this.map,e),n="index.map=new Map(["+n+"]);";for(const t of this.ctx.entries()){i=t[0];let n=Kt(t[1],e);n="new Map(["+n+"])",n='["'+i+'",'+n+"]",r+=(r?",":"")+n}r="index.ctx=new Map(["+r+"]);"}return e?"function inject(index){"+t+n+r+"}":t+n+r},nt(Ht.prototype);const Vt="undefined"!=typeof window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Qt=["map","ctx","tag","reg","cfg"],Yt=Ae();function Gt(e,t,n){const r=e.value;let i,o=0;for(let e,s=0;s<r.length;s++){if(e=n?r:r[s]){for(let n,o,a=0;a<t.length;a++)if(o=t[a],n=e.indexOf(o),n>=0){if(i=1,!(e.length>1)){r[s]=[];break}e.splice(n,1)}o+=e.length}if(n)break}o?i&&e.update(r):e.delete(),e.continue()}function Jt(e,t){return new Promise((n,r)=>{e.onsuccess=e.oncomplete=function(){t&&t(this.result),t=null,n(this.result)},e.onerror=e.onblocked=r,e=null})}we=function e(t,n={}){if(!this||this.constructor!==e)return new e(t,n);"object"==typeof t&&(n=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}.prototype,we.mount=function(e){return e.index?e.mount(this):(e.db=this,this.open())},we.open=function(){if(this.db)return this.db;let e=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),Yt[e.id]||(Yt[e.id]=[]),Yt[e.id].push(e.field);const t=Vt.open(e.id,1);return t.onupgradeneeded=function(){const t=e.db=this.result;for(let n,r=0;r<Qt.length;r++){n=Qt[r];for(let r,i=0;i<Yt[e.id].length;i++)r=Yt[e.id][i],t.objectStoreNames.contains(n+("reg"!==n&&r?":"+r:""))||t.createObjectStore(n+("reg"!==n&&r?":"+r:""))}},e.db=Jt(t,function(t){e.db=t,e.db.onversionchange=function(){e.close()}})},we.close=function(){this.db&&this.db.close(),this.db=null},we.destroy=function(){return Jt(Vt.deleteDatabase(this.id))},we.clear=function(){const e=[];for(let t,n=0;n<Qt.length;n++){t=Qt[n];for(let n,r=0;r<Yt[this.id].length;r++)n=Yt[this.id][r],e.push(t+("reg"!==t&&n?":"+n:""))}const t=this.db.transaction(e,"readwrite");for(let n=0;n<e.length;n++)t.objectStore(e[n]).clear();return Jt(t)},we.get=function(e,t,n=0,r=0,i=!0,o=!1){e=this.db.transaction((t?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((t?"ctx":"map")+(this.field?":"+this.field:"")).get(t?t+":"+e:e);const s=this;return Jt(e).then(function(e){let t=[];if(!e||!e.length)return t;if(i){if(!n&&!r&&1===e.length)return e[0];for(let i,o=0;o<e.length;o++)if((i=e[o])&&i.length){if(r>=i.length){r-=i.length;continue}const e=n?r+Math.min(i.length-r,n):i.length;for(let n=r;n<e;n++)t.push(i[n]);if(r=0,t.length===n)break}return o?s.enrich(t):t}return e})},we.tag=function(e,t=0,n=0,r=!1){e=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(e);const i=this;return Jt(e).then(function(e){return!e||!e.length||n>=e.length?[]:t||n?(e=e.slice(n,n+t),r?i.enrich(e):e):e})},we.enrich=function(e){"object"!=typeof e&&(e=[e]);const t=this.db.transaction("reg","readonly").objectStore("reg"),n=[];for(let r=0;r<e.length;r++)n[r]=Jt(t.get(e[r]));return Promise.all(n).then(function(t){for(let n=0;n<t.length;n++)t[n]={id:e[n],doc:t[n]?JSON.parse(t[n]):null};return t})},we.has=function(e){return Jt(e=this.db.transaction("reg","readonly").objectStore("reg").getKey(e)).then(function(e){return!!e})},we.search=null,we.info=function(){},we.transaction=function(e,t,n){e+="reg"!==e&&this.field?":"+this.field:"";let r=this.h[e+":"+t];if(r)return n.call(this,r);let i=this.db.transaction(e,t);this.h[e+":"+t]=r=i.objectStore(e);const o=n.call(this,r);return this.h[e+":"+t]=null,Jt(i).finally(function(){return o})},we.commit=async function(e){let t=e.commit_task,n=[];e.commit_task=[];for(let e,r=0;r<t.length;r++)e=t[r],e.del&&n.push(e.del);n.length&&await this.remove(n),e.reg.size&&(await this.transaction("map","readwrite",function(t){for(const n of e.map){const e=n[0],r=n[1];r.length&&(t.get(e).onsuccess=function(){let n=this.result;var i;if(n&&n.length){const e=Math.max(n.length,r.length);for(let t,o,s=0;s<e;s++)if((o=r[s])&&o.length){if((t=n[s])&&t.length)for(i=0;i<o.length;i++)t.push(o[i]);else n[s]=o;i=1}}else n=r,i=1;i&&t.put(n,e)})}}),await this.transaction("ctx","readwrite",function(t){for(const n of e.ctx){const e=n[0],r=n[1];for(const n of r){const r=n[0],i=n[1];i.length&&(t.get(e+":"+r).onsuccess=function(){let n=this.result;var o;if(n&&n.length){const e=Math.max(n.length,i.length);for(let t,r,s=0;s<e;s++)if((r=i[s])&&r.length){if((t=n[s])&&t.length)for(o=0;o<r.length;o++)t.push(r[o]);else n[s]=r;o=1}}else n=i,o=1;o&&t.put(n,e+":"+r)})}}}),e.store?await this.transaction("reg","readwrite",function(t){for(const n of e.store){const e=n[0],r=n[1];t.put("object"==typeof r?JSON.stringify(r):1,e)}}):e.bypass||await this.transaction("reg","readwrite",function(t){for(const n of e.reg.keys())t.put(1,n)}),e.tag&&await this.transaction("tag","readwrite",function(t){for(const n of e.tag){const e=n[0],r=n[1];r.length&&(t.get(e).onsuccess=function(){let n=this.result;n=n&&n.length?n.concat(r):r,t.put(n,e)})}}),e.map.clear(),e.ctx.clear(),e.tag&&e.tag.clear(),e.store&&e.store.clear(),e.document||e.reg.clear())},we.remove=function(e){return"object"!=typeof e&&(e=[e]),Promise.all([this.transaction("map","readwrite",function(t){t.openCursor().onsuccess=function(){const t=this.result;t&&Gt(t,e)}}),this.transaction("ctx","readwrite",function(t){t.openCursor().onsuccess=function(){const t=this.result;t&&Gt(t,e)}}),this.transaction("tag","readwrite",function(t){t.openCursor().onsuccess=function(){const t=this.result;t&&Gt(t,e,!0)}}),this.transaction("reg","readwrite",function(t){for(let n=0;n<e.length;n++)t.delete(e[n])})])};const Xt=Et;let Zt=null,en=!1;async function tn(){return await async function(){try{const[e,t]=await Promise.all([ye.bookmarks.toArray(),xe()]);return[...e,...t]}catch(e){return console.error("Error getting bookmarks with reading list:",e),[]}}()}function nn(e,t){const{positive:n,negative:r,phrases:i,regular:o,regexPatterns:s=[]}=t,a=[e.title||"",e.url||"",e.description||"",e.domain||"",e.category||"",Array.isArray(e.keywords)?e.keywords.join(" "):""].join(" ").toLowerCase(),l=[e.title||"",e.url||"",e.description||"",e.domain||"",e.category||"",Array.isArray(e.keywords)?e.keywords.join(" "):""].join(" ");for(const e of n)if(!a.includes(e))return!1;for(const e of r)if(a.includes(e))return!1;for(const e of i)if(!a.includes(e))return!1;for(const e of s){const t=e.flags.includes("i")?a:l;if(!e.test(t))return!1}if(o.length>0){if(!o.some(e=>a.includes(e)))return!1}return!0}function rn(e,t){const{positive:n,phrases:r,regular:i,regexPatterns:o=[]}=t;let s=0;const a=(e.title||"").toLowerCase(),l=(e.url||"").toLowerCase(),u=(e.domain||"").toLowerCase(),c=(e.description||"").toLowerCase(),h=(e.category||"").toLowerCase(),f=[...n,...r,...i];for(const e of f)a.includes(e)&&(s+=10,a.startsWith(e)&&(s+=5)),u.includes(e)&&(s+=5),h.includes(e)&&(s+=4),c.includes(e)&&(s+=2),l.includes(e)&&(s+=1);for(const t of o)t.test(e.title||"")&&(s+=8),t.test(e.url||"")&&(s+=3),t.test(e.description||"")&&(s+=2);return s}async function on(){if(en)return Zt;console.log("Initializing FlexSearch index...");const e=await async function(e){try{const t=await ye.cache.get(e);return t?t.ttl&&Date.now()-t.timestamp>t.ttl?(await ye.cache.delete(e),null):t.value:null}catch(e){return console.error("Error getting cache:",e),null}}("flexsearch_index");if(e&&e.serialized)try{Zt=new Xt({document:{id:"id",index:["title","url","description","keywords","category","domain"],store:!0},tokenize:"forward",cache:!0,optimize:!0,resolution:9,context:{depth:3,bidirectional:!0}});const t=Object.keys(e.serialized);for(const n of t)await Zt.import(n,e.serialized[n]);return en=!0,console.log("Loaded FlexSearch index from cache"),Zt}catch(e){console.error("Error loading cached index:",e)}return await async function(){console.log("Building FlexSearch index..."),Zt=new Xt({document:{id:"id",index:["title","url","description","keywords","category","domain"],store:!0},tokenize:"forward",cache:!0,optimize:!0,resolution:9,context:{depth:3,bidirectional:!0}});const e=await tn();for(const t of e)await sn(t,!1);en=!0;try{const t={};await Zt.export((e,n)=>{t[e]=n}),await be("flexsearch_index",{serialized:t,timestamp:Date.now()}),console.log(`Indexed ${e.length} bookmarks`)}catch(e){console.error("Error caching index:",e)}return Zt}(),Zt}async function sn(e,t=!0){Zt||await on();const n={id:e.id,title:e.title||"",url:e.url||"",description:e.description||"",keywords:Array.isArray(e.keywords)?e.keywords.join(" "):"",category:e.category||"",domain:e.domain||""};await Zt.add(n),t&&await async function(){if(!Zt)return;try{const e={};await Zt.export((t,n)=>{e[t]=n}),await be("flexsearch_index",{serialized:e,timestamp:Date.now()})}catch(e){console.error("Error caching index:",e)}}()}async function an(e,t=null,n={}){!t||t.domains||Array.isArray(t.domains)||(n=t,t=null);const{limit:r=50,offset:i=0,computeStats:o=!1}=n;let s=await tn();if(t){const e=Date.now()-2592e6;s=s.filter(n=>{if(t.domains&&t.domains.length>0){const e=(n.domain||"").toLowerCase();if(!t.domains.some(t=>e.includes(t.toLowerCase())))return!1}if(t.folders&&t.folders.length>0){const e=(n.folderPath||"").toLowerCase();if(!t.folders.some(t=>e.includes(t.toLowerCase())))return!1}if(t.topics&&t.topics.length>0){const e=n.topics||[];if(!t.topics.some(t=>e.some(e=>e.toLowerCase()===t.toLowerCase()||e.toLowerCase().startsWith(t.toLowerCase()+"/"))))return!1}if(t.tags&&t.tags.length>0){if(!n.tags||!Array.isArray(n.tags))return!1;if(!t.tags.some(e=>n.tags.includes(e)))return!1}if(t.deadLinks&&!1!==n.isAlive)return!1;if(t.stale){const t=n.dateAdded<e,r=!n.accessCount||0===n.accessCount,i=!1!==n.isAlive;if(!(t&&r&&i))return!1}if(t.readingList&&!n.isReadingListItem)return!1;if(t.dateRange){const{startDate:e,endDate:r}=t.dateRange;if(n.dateAdded<e||n.dateAdded>r)return!1}if(t.readingTimeRange){const{min:e,max:r}=t.readingTimeRange,i=n.readingTime||0;if(null!=e&&i<e)return!1;if(null!=r&&i>r)return!1}if(t.qualityScoreRange){const{min:e,max:r}=t.qualityScoreRange,i=n.qualityScore||0;if(null!=e&&i<e)return!1;if(null!=r&&i>r)return!1}if(null!==t.hasPublishedDate&&void 0!==t.hasPublishedDate){const e=Boolean(n.publishedDate||n.rawMetadata?.publishedDate);if(t.hasPublishedDate!==e)return!1}return!0})}if(!e||!e.trim()){const e=me(n.sortBy||"date_desc"),t={results:s.sort(e).slice(i,i+r),total:s.length,hasMore:i+r<s.length,parsedQuery:null};return o&&(t.stats=ln(s)),t}const{filters:a,remainingQuery:l}=function(e){if(!e||!e.trim())return{filters:{},remainingQuery:""};const t={};let n=e;const r=n.match(/category:(\S+)/i);r&&(t.category=r[1].toLowerCase(),n=n.replace(r[0],"").trim());const i=n.match(/domain:(\S+)/i);i&&(t.domain=i[1].toLowerCase(),n=n.replace(i[0],"").trim());const o=n.match(/platform:(\S+)/i);o&&(t.platform=o[1].toLowerCase(),n=n.replace(o[0],"").trim());const s=n.match(/channel:(@?\S+)/i);s&&(t.creator=s[1],n=n.replace(s[0],"").trim());const a=n.match(/author:(@?\S+)/i);a&&(t.creator=a[1],n=n.replace(a[0],"").trim());const l=n.match(/repo:(\S+)/i);l&&(t.repo=l[1].toLowerCase(),n=n.replace(l[0],"").trim());const u=n.match(/type:(\S+)/i);u&&(t.contentType=u[1].toLowerCase(),n=n.replace(u[0],"").trim());const c=n.match(/hasimage:(yes|no)/i);c&&(t.hasImage="yes"===c[1].toLowerCase(),n=n.replace(c[0],"").trim());const h=n.match(/playlist:(\S+)/i);h&&(t.playlist=h[1],n=n.replace(h[0],"").trim());const f=n.match(/accessed:(yes|no)/i);f&&(t.accessed="yes"===f[1].toLowerCase(),n=n.replace(f[0],"").trim());const d=n.match(/stale:(yes|no)/i);d&&(t.stale="yes"===d[1].toLowerCase(),n=n.replace(d[0],"").trim());const p=n.match(/enriched:(yes|no)/i);p&&(t.enriched="yes"===p[1].toLowerCase(),n=n.replace(p[0],"").trim());const g=n.match(/dead:(yes|no)/i);g&&(t.dead="yes"===g[1].toLowerCase(),n=n.replace(g[0],"").trim());const m=n.match(/folder:(?:"([^"]+)"|(\S+))/i);return m&&(t.folder=(m[1]||m[2]).toLowerCase(),n=n.replace(m[0],"").trim()),{filters:t,remainingQuery:n}}(e),u=function(e){if(!e||!e.trim())return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[],hasModifiers:!1};const t=[],n=[],r=[],i=[],o=[],s=/\/([^\/]+)\/([gimsuvy]*)?/g;let a,l=e;for(;null!==(a=s.exec(e));)try{const e=a[1],t=a[2]||"i",n=new RegExp(e,t);o.push(n)}catch(e){console.warn("Invalid regex pattern:",a[0],e.message)}l=l.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();const u=/([+-]?)"([^"]+)"/g;for(;null!==(a=u.exec(l));){const e=a[1],i=a[2].toLowerCase();"+"===e?t.push(i):"-"===e?n.push(i):r.push(i)}l=l.replace(/[+-]?"[^"]+"/g,"").trim();const c=l.split(/\s+/).filter(e=>e.length>0);for(const e of c){const r=e.toLowerCase();e.startsWith("+")&&e.length>1?t.push(r.slice(1)):e.startsWith("-")&&e.length>1?n.push(r.slice(1)):i.push(r)}return{positive:t,negative:n,phrases:r,regular:i,regexPatterns:o,hasModifiers:t.length>0||n.length>0||r.length>0||o.length>0}}(l);if(Object.keys(a).length>0&&(s=function(e,t){const n=Date.now()-2592e6;return e.filter(e=>{if(t.category&&(e.category||"uncategorized").toLowerCase()!==t.category)return!1;if(t.domain&&!(e.domain||"").toLowerCase().includes(t.domain))return!1;if(void 0!==t.accessed){const n=e.accessCount&&e.accessCount>0;if(t.accessed!==n)return!1}if(t.stale){const t=e.dateAdded<n,r=!e.accessCount||0===e.accessCount,i=!1!==e.isAlive;if(!(t&&r&&i))return!1}if(void 0!==t.enriched){const n=Boolean(e.description||e.keywords&&e.keywords.length>0||e.contentSnippet);if(t.enriched!==n)return!1}if(void 0!==t.dead){const n=!1===e.isAlive;if(t.dead!==n)return!1}if(t.folder&&!(e.folderPath||"").toLowerCase().includes(t.folder))return!1;if(t.platform&&(e.platform||"other").toLowerCase()!==t.platform)return!1;if(t.creator){const n=(e.creator||"").toLowerCase(),r=t.creator.toLowerCase();if(!n.includes(r)&&!n.includes(r.replace(/^@/,""))&&!`@${n}`.includes(r))return!1}if(t.repo&&!(e.platformData?.extra?.owner&&e.platformData?.extra?.repo?`${e.platformData.extra.owner}/${e.platformData.extra.repo}`.toLowerCase():"").includes(t.repo))return!1;if(t.contentType){const n=(e.contentType||"").toLowerCase();if(!t.contentType.split("|").map(e=>e.trim()).includes(n))return!1}if(void 0!==t.hasImage){const n=Boolean(e.platformData?.extra?.thumbnail||e.rawMetadata?.openGraph?.["og:image"]||e.rawMetadata?.twitterCard?.["twitter:image"]);if(t.hasImage!==n)return!1}return!(t.playlist&&!(e.platformData?.extra?.playlistId||"").includes(t.playlist))})}(s,a)),l.trim()){if(u.regular.length>0)try{const e=await on(),t=u.regular.join(" "),n=await e.search(t,{limit:1e4,suggest:!0}),r=new Set;Array.isArray(n)&&n.forEach(e=>{e&&Array.isArray(e.result)&&e.result.forEach(e=>r.add(e))}),s=s.filter(e=>r.has(e.id)),s=s.filter(e=>nn(e,u))}catch(e){console.error("FlexSearch failed, falling back to manual search:",e),s=s.filter(e=>nn(e,u))}else s=s.filter(e=>nn(e,u));s=s.map(e=>({...e,_searchScore:rn(e,u)}));const e=me(n.sortBy||"relevance");s.sort(e)}else{const e=me(n.sortBy||"date_desc");s.sort(e)}const c=s.length,h={results:s.slice(i,i+r),total:c,hasMore:i+r<c,parsedQuery:u,specialFilters:a};return o&&(h.stats=ln(s)),h}function ln(e){const t=new Map,n=new Map,r=new Map,i=Date.now(),o=864e5,s=7*o,a=14*o,l=90*o,u=180*o,c=new Date,h=c.getFullYear(),f=new Date(h,c.getMonth(),1).getTime(),d=new Date(h,0,1).getTime();let p=0,g=0,m=0,y=0,v=0,b=0,x=0;for(const o of e){if(o.domain){const e=t.get(o.domain)||{count:0,latestDate:0};e.count++,o.dateAdded>e.latestDate&&(e.latestDate=o.dateAdded),t.set(o.domain,e)}if(o.folderPath){const e=n.get(o.folderPath)||0;n.set(o.folderPath,e+1)}const e=o.topics||[];for(const t of e)r.set(t,(r.get(t)||0)+1);const c=o.dateAdded;i-c<s&&p++,i-c<a&&g++,c>=f&&m++,i-c<l&&y++,i-c<u&&v++,c>=d&&b++,c<d&&x++}return{domains:Array.from(t.entries()).map(([e,t])=>({domain:e,count:t.count,latestDate:t.latestDate})).sort((e,t)=>t.count-e.count),folders:Array.from(n.entries()).map(([e,t])=>({folder:e,count:t})).sort((e,t)=>t.count-e.count),topics:Array.from(r.entries()).map(([e,t])=>({topic:e,count:t})).sort((e,t)=>t.count-e.count),dateCounts:{week:p,twoWeek:g,month:m,threeMonth:y,sixMonth:v,year:b,older:x}}}function un(e,t,n){const r=e.slice();return r[69]=t[n].folder,r[66]=t[n].count,r}function cn(e,t,n){const r=e.slice();return r[65]=t[n].domain,r[66]=t[n].count,r}function hn(e,t,n){const r=e.slice();return r[62]=t[n],r}function fn(e,t,n){const r=e.slice();return r[50]=t[n],r}function dn(e,t,n){const r=e.slice();return r[50]=t[n],r}function pn(e,t,n){const r=e.slice();return r[53]=t[n],r}function gn(e,t,n){const r=e.slice();return r[53]=t[n],r}function mn(e,t,n){const r=e.slice();return r[50]=t[n],r}function yn(e){let t,n;return{c(){t=p("svg"),n=p("path"),b(n,"d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"),b(t,"class","w-4 h-4"),b(t,"fill","currentColor"),b(t,"viewBox","0 0 20 20")},m(e,r){c(e,t,r),u(t,n)},d(e){e&&h(t)}}}function vn(e){let t,n;return{c(){t=p("svg"),n=p("path"),b(n,"fill-rule","evenodd"),b(n,"d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"),b(n,"clip-rule","evenodd"),b(t,"class","w-4 h-4"),b(t,"fill","currentColor"),b(t,"viewBox","0 0 20 20")},m(e,r){c(e,t,r),u(t,n)},d(e){e&&h(t)}}}function bn(e){let t,n;return{c(){t=d("span"),n=g(e[15]),b(t,"class","bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 text-[10px] px-1.5 py-0.5 rounded-full")},m(e,r){c(e,t,r),u(t,n)},p(e,t){32768&t[0]&&x(n,e[15])},d(e){e&&h(t)}}}function xn(e){let t,n,r,i,o,s,a,l,f,p,y,w,k=e[0].length+"";function _(e,t){return"domain"===e[6].type?_n:"folder"===e[6].type?kn:"recent"===e[6].type?wn:void 0}let A=_(e),C=A&&A(e);return{c(){t=d("div"),n=d("div"),r=d("span"),C&&C.c(),i=m(),o=d("span"),s=g("("),a=g(k),l=g(")"),f=m(),p=d("button"),p.textContent="Clear",b(o,"class","text-blue-500 dark:text-blue-400"),b(r,"class","text-xs text-blue-700 dark:text-blue-300"),b(p,"class","text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200"),b(n,"class","flex items-center justify-between"),b(t,"class","flex-shrink-0 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 border-b border-blue-100 dark:border-blue-800")},m(h,d){c(h,t,d),u(t,n),u(n,r),C&&C.m(r,null),u(r,i),u(r,o),u(o,s),u(o,a),u(o,l),u(n,f),u(n,p),y||(w=v(p,"click",e[24]),y=!0)},p(e,t){A===(A=_(e))&&C?C.p(e,t):(C&&C.d(1),C=A&&A(e),C&&(C.c(),C.m(r,i))),1&t[0]&&k!==(k=e[0].length+"")&&x(a,k)},d(e){e&&h(t),C&&C.d(),y=!1,w()}}}function wn(e){let t,n,r=e[6].value+"";return{c(){t=g("üïê "),n=g(r)},m(e,r){c(e,t,r),c(e,n,r)},p(e,t){64&t[0]&&r!==(r=e[6].value+"")&&x(n,r)},d(e){e&&(h(t),h(n))}}}function kn(e){let t,n,r=e[6].value+"";return{c(){t=g("üìÅ "),n=g(r)},m(e,r){c(e,t,r),c(e,n,r)},p(e,t){64&t[0]&&r!==(r=e[6].value+"")&&x(n,r)},d(e){e&&(h(t),h(n))}}}function _n(e){let t,n,r=e[6].value+"";return{c(){t=g("üåê "),n=g(r)},m(e,r){c(e,t,r),c(e,n,r)},p(e,t){64&t[0]&&r!==(r=e[6].value+"")&&x(n,r)},d(e){e&&(h(t),h(n))}}}function An(t){let n,r,i,o,s,a;return{c(){n=d("div"),r=d("span"),r.textContent="Item removed from reading list",i=m(),o=d("button"),o.textContent="Undo",b(r,"class","text-xs"),b(o,"class","text-xs text-blue-400 hover:text-blue-300 font-medium"),b(n,"class","flex-shrink-0 px-3 py-2 bg-gray-800 dark:bg-gray-700 text-white flex items-center justify-between")},m(e,l){c(e,n,l),u(n,r),u(n,i),u(n,o),s||(a=v(o,"click",t[27]),s=!0)},p:e,d(e){e&&h(n),s=!1,a()}}}function Cn(e){let t,n,i,o,s,a,l,f,p,x,w,k,_,A,C,E;function P(e,t){return"recent"===e[9]?Dn:"domains"===e[9]?Mn:"folders"===e[9]?Bn:void 0}let S=P(e),O=S&&S(e);return{c(){t=d("div"),n=d("button"),i=g("üïê Recent"),s=m(),a=d("button"),l=g("üåê Domains"),p=m(),x=d("button"),w=g("üìÅ Folders"),_=m(),O&&O.c(),A=y(),b(n,"class",o="flex-1 px-3 py-1.5 text-xs transition-colors "+("recent"===e[9]?"text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"text-gray-500 dark:text-gray-400")),b(a,"class",f="flex-1 px-3 py-1.5 text-xs transition-colors "+("domains"===e[9]?"text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"text-gray-500 dark:text-gray-400")),b(x,"class",k="flex-1 px-3 py-1.5 text-xs transition-colors "+("folders"===e[9]?"text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"text-gray-500 dark:text-gray-400")),b(t,"class","flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50")},m(r,o){c(r,t,o),u(t,n),u(n,i),u(t,s),u(t,a),u(a,l),u(t,p),u(t,x),u(x,w),c(r,_,o),O&&O.m(r,o),c(r,A,o),C||(E=[v(n,"click",e[41]),v(a,"click",e[42]),v(x,"click",e[43])],C=!0)},p(e,t){512&t[0]&&o!==(o="flex-1 px-3 py-1.5 text-xs transition-colors "+("recent"===e[9]?"text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"text-gray-500 dark:text-gray-400"))&&b(n,"class",o),512&t[0]&&f!==(f="flex-1 px-3 py-1.5 text-xs transition-colors "+("domains"===e[9]?"text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"text-gray-500 dark:text-gray-400"))&&b(a,"class",f),512&t[0]&&k!==(k="flex-1 px-3 py-1.5 text-xs transition-colors "+("folders"===e[9]?"text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-800":"text-gray-500 dark:text-gray-400"))&&b(x,"class",k),S===(S=P(e))&&O?O.p(e,t):(O&&O.d(1),O=S&&S(e),O&&(O.c(),O.m(A.parentNode,A)))},d(e){e&&(h(t),h(_),h(A)),O&&O.d(e),C=!1,r(E)}}}function En(e){let t,n,r,i=e[13].length>0&&qn(e),o=e[12].length>0&&Rn(e),s=0===e[13].length&&0===e[12].length&&Fn();return{c(){t=d("div"),i&&i.c(),n=m(),o&&o.c(),r=m(),s&&s.c(),b(t,"class","p-3 space-y-4")},m(e,a){c(e,t,a),i&&i.m(t,null),u(t,n),o&&o.m(t,null),u(t,r),s&&s.m(t,null)},p(e,a){e[13].length>0?i?i.p(e,a):(i=qn(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null),e[12].length>0?o?o.p(e,a):(o=Rn(e),o.c(),o.m(t,r)):o&&(o.d(1),o=null),0===e[13].length&&0===e[12].length?s||(s=Fn(),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&h(t),i&&i.d(),o&&o.d(),s&&s.d()}}}function Pn(e){let t;function n(e,t){return 0===e[1].length?Nn:$n}let r=n(e),i=r(e);return{c(){t=d("div"),i.c(),b(t,"class","p-3")},m(e,n){c(e,t,n),i.m(t,null)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t,null)))},d(e){e&&h(t),i.d()}}}function Sn(e){let t;function n(e,t){return 0===e[0].length?Yn:Qn}let r=n(e),i=r(e);return{c(){i.c(),t=y()},m(e,n){i.m(e,n),c(e,t,n)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&h(t),i.d(e)}}}function On(e){let t,n,r,i,o,s,a,l;return{c(){t=d("div"),n=d("p"),r=g("Error: "),i=g(e[4]),o=m(),s=d("button"),s.textContent="Retry",b(n,"class","text-sm"),b(s,"class","mt-2 px-3 py-1 text-xs bg-blue-600 text-white rounded-md hover:bg-blue-700"),b(t,"class","text-center text-red-600 dark:text-red-400 p-4")},m(h,f){c(h,t,f),u(t,n),u(n,r),u(n,i),u(t,o),u(t,s),a||(l=v(s,"click",e[19]),a=!0)},p(e,t){16&t[0]&&x(i,e[4])},d(e){e&&h(t),a=!1,l()}}}function jn(t){let n;return{c(){n=d("div"),n.innerHTML='<div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 dark:border-blue-400"></div>',b(n,"class","flex items-center justify-center h-32")},m(e,t){c(e,n,t)},p:e,d(e){e&&h(n)}}}function Bn(e){let t,n,r,i,o,s,a=e[11].length+"",l=R(e[11]),p=[];for(let t=0;t<l.length;t+=1)p[t]=In(un(e,l,t));return{c(){t=d("div"),n=d("h3"),r=g("Folders ("),i=g(a),o=g(")"),s=m();for(let e=0;e<p.length;e+=1)p[e].c();b(n,"class","text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"),b(t,"class","p-3 space-y-1")},m(e,a){c(e,t,a),u(t,n),u(n,r),u(n,i),u(n,o),u(t,s);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(t,null)},p(e,n){if(2048&n[0]&&a!==(a=e[11].length+"")&&x(i,a),4196352&n[0]){let r;for(l=R(e[11]),r=0;r<l.length;r+=1){const i=un(e,l,r);p[r]?p[r].p(i,n):(p[r]=In(i),p[r].c(),p[r].m(t,null))}for(;r<p.length;r+=1)p[r].d(1);p.length=l.length}},d(e){e&&h(t),f(p,e)}}}function Mn(e){let t,n,r,i,o,s,a=e[10].length+"",l=R(e[10]),p=[];for(let t=0;t<l.length;t+=1)p[t]=Tn(cn(e,l,t));return{c(){t=d("div"),n=d("h3"),r=g("Top Domains ("),i=g(a),o=g(")"),s=m();for(let e=0;e<p.length;e+=1)p[e].c();b(n,"class","text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"),b(t,"class","p-3 space-y-1")},m(e,a){c(e,t,a),u(t,n),u(n,r),u(n,i),u(n,o),u(t,s);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(t,null)},p(e,n){if(1024&n[0]&&a!==(a=e[10].length+"")&&x(i,a),2098176&n[0]){let r;for(l=R(e[10]),r=0;r<l.length;r+=1){const i=cn(e,l,r);p[r]?p[r].p(i,n):(p[r]=Tn(i),p[r].c(),p[r].m(t,null))}for(;r<p.length;r+=1)p[r].d(1);p.length=l.length}},d(e){e&&h(t),f(p,e)}}}function Dn(e){let t,n,r,i=R([{days:1,label:"Today"},{days:7,label:"Last 7 days"},{days:14,label:"Last 2 weeks"},{days:30,label:"Last month"},{days:90,label:"Last 3 months"}]),o=[];for(let t=0;t<5;t+=1)o[t]=Kn(hn(e,i,t));return{c(){t=d("div"),n=d("h3"),n.textContent="Filter by Time",r=m();for(let e=0;e<5;e+=1)o[e].c();b(n,"class","text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"),b(t,"class","p-3 space-y-1")},m(e,i){c(e,t,i),u(t,n),u(t,r);for(let e=0;e<5;e+=1)o[e]&&o[e].m(t,null)},p(e,n){if(8388608&n[0]){let r;for(i=R([{days:1,label:"Today"},{days:7,label:"Last 7 days"},{days:14,label:"Last 2 weeks"},{days:30,label:"Last month"},{days:90,label:"Last 3 months"}]),r=0;r<5;r+=1){const s=hn(e,i,r);o[r]?o[r].p(s,n):(o[r]=Kn(s),o[r].c(),o[r].m(t,null))}for(;r<5;r+=1)o[r].d(1)}},d(e){e&&h(t),f(o,e)}}}function In(e){let t,n,r,i,o,s,a,l,f,y,w,k,_=e[69]+"",A=e[66]+"";function C(){return e[46](e[69])}return{c(){t=d("button"),n=d("span"),r=p("svg"),i=p("path"),o=m(),s=g(_),a=m(),l=d("span"),f=g(A),y=m(),b(i,"d","M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"),b(r,"class","w-4 h-4 text-gray-400 flex-shrink-0"),b(r,"fill","currentColor"),b(r,"viewBox","0 0 20 20"),b(n,"class","truncate flex-1 flex items-center gap-2"),b(l,"class","text-xs text-gray-400 dark:text-gray-500 ml-2"),b(t,"class","w-full px-3 py-2 text-left text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 transition-colors flex items-center justify-between group")},m(e,h){c(e,t,h),u(t,n),u(n,r),u(r,i),u(n,o),u(n,s),u(t,a),u(t,l),u(l,f),u(t,y),w||(k=v(t,"click",C),w=!0)},p(t,n){e=t,2048&n[0]&&_!==(_=e[69]+"")&&x(s,_),2048&n[0]&&A!==(A=e[66]+"")&&x(f,A)},d(e){e&&h(t),w=!1,k()}}}function Tn(e){let t,n,r,i,o,s,a,l,f,p=e[65]+"",y=e[66]+"";function w(){return e[45](e[65])}return{c(){t=d("button"),n=d("span"),r=g(p),i=m(),o=d("span"),s=g(y),a=m(),b(n,"class","truncate flex-1"),b(o,"class","text-xs text-gray-400 dark:text-gray-500 ml-2"),b(t,"class","w-full px-3 py-2 text-left text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 transition-colors flex items-center justify-between group")},m(e,h){c(e,t,h),u(t,n),u(n,r),u(t,i),u(t,o),u(o,s),u(t,a),l||(f=v(t,"click",w),l=!0)},p(t,n){e=t,1024&n[0]&&p!==(p=e[65]+"")&&x(r,p),1024&n[0]&&y!==(y=e[66]+"")&&x(s,y)},d(e){e&&h(t),l=!1,f()}}}function Kn(e){let t,n,r,i,o,s,a,l;function f(){return e[44](e[62])}return{c(){t=d("button"),n=d("span"),n.textContent=`${e[62].label}`,r=m(),i=p("svg"),o=p("path"),s=m(),b(o,"stroke-linecap","round"),b(o,"stroke-linejoin","round"),b(o,"stroke-width","2"),b(o,"d","M9 5l7 7-7 7"),b(i,"class","w-4 h-4 text-gray-400"),b(i,"fill","none"),b(i,"stroke","currentColor"),b(i,"viewBox","0 0 24 24"),b(t,"class","w-full px-3 py-2 text-left text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 transition-colors flex items-center justify-between")},m(e,h){c(e,t,h),u(t,n),u(t,r),u(t,i),u(i,o),u(t,s),a||(l=v(t,"click",f),a=!0)},p(t,n){e=t},d(e){e&&h(t),a=!1,l()}}}function qn(e){let t,n,r,i,o=R(e[13].slice(0,8)),s=[];for(let t=0;t<o.length;t+=1)s[t]=Ln(dn(e,o,t));return{c(){t=d("div"),n=d("h3"),n.textContent="üïê Recently Added",r=m(),i=d("div");for(let e=0;e<s.length;e+=1)s[e].c();b(n,"class","text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 flex items-center gap-1"),b(i,"class","space-y-1")},m(e,o){c(e,t,o),u(t,n),u(t,r),u(t,i);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(i,null)},p(e,t){if(8192&t[0]){let n;for(o=R(e[13].slice(0,8)),n=0;n<o.length;n+=1){const r=dn(e,o,n);s[n]?s[n].p(r,t):(s[n]=Ln(r),s[n].c(),s[n].m(i,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(e){e&&h(t),f(s,e)}}}function Ln(e){let t,n,r,i,o,s,a,f,p,y,w,k,_=(e[50].title||"Untitled")+"",A=de(e[50].dateAdded)+"";function C(...t){return e[39](e[50],...t)}return{c(){t=d("button"),n=d("img"),i=m(),o=d("span"),s=g(_),a=m(),f=d("span"),p=g(A),y=m(),l(n.src,r=pe(e[50]))||b(n,"src",r),b(n,"alt",""),b(n,"class","w-4 h-4 flex-shrink-0 rounded"),b(o,"class","text-sm text-gray-700 dark:text-gray-300 truncate flex-1"),b(f,"class","text-xs text-gray-400 dark:text-gray-500"),b(t,"class","w-full flex items-center gap-2 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-left")},m(e,r){c(e,t,r),u(t,n),u(t,i),u(t,o),u(o,s),u(t,a),u(t,f),u(f,p),u(t,y),w||(k=v(t,"click",C),w=!0)},p(t,i){e=t,8192&i[0]&&!l(n.src,r=pe(e[50]))&&b(n,"src",r),8192&i[0]&&_!==(_=(e[50].title||"Untitled")+"")&&x(s,_),8192&i[0]&&A!==(A=de(e[50].dateAdded)+"")&&x(p,A)},d(e){e&&h(t),w=!1,k()}}}function Rn(e){let t,n,r,i,o=R(e[12]),s=[];for(let t=0;t<o.length;t+=1)s[t]=zn(fn(e,o,t));return{c(){t=d("div"),n=d("h3"),n.textContent="‚≠ê Most Used",r=m(),i=d("div");for(let e=0;e<s.length;e+=1)s[e].c();b(n,"class","text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 flex items-center gap-1"),b(i,"class","space-y-1")},m(e,o){c(e,t,o),u(t,n),u(t,r),u(t,i);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(i,null)},p(e,t){if(4096&t[0]){let n;for(o=R(e[12]),n=0;n<o.length;n+=1){const r=fn(e,o,n);s[n]?s[n].p(r,t):(s[n]=zn(r),s[n].c(),s[n].m(i,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(e){e&&h(t),f(s,e)}}}function zn(e){let t,n,r,i,o,s,a,f,p,y,w,k,_,A=(e[50].title||"Untitled")+"",C=e[50].accessCount+"";function E(...t){return e[40](e[50],...t)}return{c(){t=d("button"),n=d("img"),i=m(),o=d("span"),s=g(A),a=m(),f=d("span"),p=g(C),y=g("√ó"),w=m(),l(n.src,r=pe(e[50]))||b(n,"src",r),b(n,"alt",""),b(n,"class","w-4 h-4 flex-shrink-0 rounded"),b(o,"class","text-sm text-gray-700 dark:text-gray-300 truncate flex-1"),b(f,"class","text-xs text-gray-400 dark:text-gray-500"),b(t,"class","w-full flex items-center gap-2 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-left")},m(e,r){c(e,t,r),u(t,n),u(t,i),u(t,o),u(o,s),u(t,a),u(t,f),u(f,p),u(f,y),u(t,w),k||(_=v(t,"click",E),k=!0)},p(t,i){e=t,4096&i[0]&&!l(n.src,r=pe(e[50]))&&b(n,"src",r),4096&i[0]&&A!==(A=(e[50].title||"Untitled")+"")&&x(s,A),4096&i[0]&&C!==(C=e[50].accessCount+"")&&x(p,C)},d(e){e&&h(t),k=!1,_()}}}function Fn(e){let t;return{c(){t=d("div"),t.innerHTML='<div class="text-4xl mb-2">‚ö°</div> <p class="text-sm text-gray-500 dark:text-gray-400">No quick access bookmarks yet</p> <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Recently added and frequently used bookmarks will appear here</p>',b(t,"class","text-center py-8")},m(e,n){c(e,t,n)},d(e){e&&h(t)}}}function $n(e){let t,n,r=e[1].filter(ar).length>0,i=e[1].filter(sr).length>0,o=r&&Un(e),s=i&&Wn(e);return{c(){o&&o.c(),t=m(),s&&s.c(),n=y()},m(e,r){o&&o.m(e,r),c(e,t,r),s&&s.m(e,r),c(e,n,r)},p(e,a){2&a[0]&&(r=e[1].filter(ar).length>0),r?o?o.p(e,a):(o=Un(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),2&a[0]&&(i=e[1].filter(sr).length>0),i?s?s.p(e,a):(s=Wn(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){e&&(h(t),h(n)),o&&o.d(e),s&&s.d(e)}}}function Nn(t){let n;return{c(){n=d("div"),n.innerHTML='<div class="text-4xl mb-2">üìö</div> <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">Your reading list is empty</p> <p class="text-xs text-gray-400 dark:text-gray-500">Add pages to your reading list from Chrome&#39;s context menu</p>',b(n,"class","text-center py-8")},m(e,t){c(e,n,t)},p:e,d(e){e&&h(n)}}}function Un(e){let t,n,r,i,o,s,a=e[1].filter(lr).length+"",l=R(e[1].filter(ur)),p=[];for(let t=0;t<l.length;t+=1)p[t]=Hn(gn(e,l,t));return{c(){t=d("h3"),n=g("Unread ("),r=g(a),i=g(")"),o=m(),s=d("div");for(let e=0;e<p.length;e+=1)p[e].c();b(t,"class","text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"),b(s,"class","space-y-1 mb-4")},m(e,a){c(e,t,a),u(t,n),u(t,r),u(t,i),c(e,o,a),c(e,s,a);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(s,null)},p(e,t){if(2&t[0]&&a!==(a=e[1].filter(lr).length+"")&&x(r,a),100663298&t[0]){let n;for(l=R(e[1].filter(ur)),n=0;n<l.length;n+=1){const r=gn(e,l,n);p[n]?p[n].p(r,t):(p[n]=Hn(r),p[n].c(),p[n].m(s,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=l.length}},d(e){e&&(h(t),h(o),h(s)),f(p,e)}}}function Hn(e){let t,n,i,o,s,a,f,p,y,w,k,_,A,C,E,P,S,O,j,B,M,D,I,T,K,q=e[53].title+"",L=e[53].domain+"",R=de(e[53].creationTime)+"";function z(){return e[35](e[53])}function F(){return e[36](e[53])}return{c(){t=d("div"),n=d("img"),o=m(),s=d("div"),a=d("a"),f=g(q),y=m(),w=d("div"),k=d("span"),_=g(L),A=m(),C=d("span"),C.textContent="‚Ä¢",E=m(),P=d("span"),S=g(R),O=m(),j=d("div"),B=d("button"),B.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>',M=m(),D=d("button"),D.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',I=m(),l(n.src,i="https://www.google.com/s2/favicons?domain="+e[53].domain+"&sz=32")||b(n,"src",i),b(n,"alt",""),b(n,"class","w-4 h-4 mt-0.5 flex-shrink-0 rounded"),b(a,"href",p=e[53].url),b(a,"target","_blank"),b(a,"rel","noopener noreferrer"),b(a,"class","text-sm font-medium text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 truncate block"),b(k,"class","truncate"),b(w,"class","flex items-center gap-2 text-xs text-gray-400 dark:text-gray-500"),b(s,"class","flex-1 min-w-0"),b(B,"class","p-1 text-gray-400 hover:text-green-600 dark:hover:text-green-400"),b(B,"title","Mark as read"),b(D,"class","p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400"),b(D,"title","Remove"),b(j,"class","flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"),b(t,"class","group flex items-start gap-2 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors")},m(e,r){c(e,t,r),u(t,n),u(t,o),u(t,s),u(s,a),u(a,f),u(s,y),u(s,w),u(w,k),u(k,_),u(w,A),u(w,C),u(w,E),u(w,P),u(P,S),u(t,O),u(t,j),u(j,B),u(j,M),u(j,D),u(t,I),T||(K=[v(B,"click",z),v(D,"click",F)],T=!0)},p(t,r){e=t,2&r[0]&&!l(n.src,i="https://www.google.com/s2/favicons?domain="+e[53].domain+"&sz=32")&&b(n,"src",i),2&r[0]&&q!==(q=e[53].title+"")&&x(f,q),2&r[0]&&p!==(p=e[53].url)&&b(a,"href",p),2&r[0]&&L!==(L=e[53].domain+"")&&x(_,L),2&r[0]&&R!==(R=de(e[53].creationTime)+"")&&x(S,R)},d(e){e&&h(t),T=!1,r(K)}}}function Wn(e){let t,n,r,i,o,s,a=e[1].filter(cr).length+"",l=R(e[1].filter(hr)),p=[];for(let t=0;t<l.length;t+=1)p[t]=Vn(pn(e,l,t));return{c(){t=d("h3"),n=g("Read ("),r=g(a),i=g(")"),o=m(),s=d("div");for(let e=0;e<p.length;e+=1)p[e].c();b(t,"class","text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2"),b(s,"class","space-y-1")},m(e,a){c(e,t,a),u(t,n),u(t,r),u(t,i),c(e,o,a),c(e,s,a);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(s,null)},p(e,t){if(2&t[0]&&a!==(a=e[1].filter(cr).length+"")&&x(r,a),100663298&t[0]){let n;for(l=R(e[1].filter(hr)),n=0;n<l.length;n+=1){const r=pn(e,l,n);p[n]?p[n].p(r,t):(p[n]=Vn(r),p[n].c(),p[n].m(s,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=l.length}},d(e){e&&(h(t),h(o),h(s)),f(p,e)}}}function Vn(e){let t,n,i,o,s,a,f,p,y,w,k,_,A,C,E,P,S,O,j,B=e[53].title+"",M=e[53].domain+"";function D(){return e[37](e[53])}function I(){return e[38](e[53])}return{c(){t=d("div"),n=d("img"),o=m(),s=d("div"),a=d("a"),f=g(B),y=m(),w=d("span"),k=g(M),_=m(),A=d("div"),C=d("button"),C.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg>',E=m(),P=d("button"),P.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',S=m(),l(n.src,i="https://www.google.com/s2/favicons?domain="+e[53].domain+"&sz=32")||b(n,"src",i),b(n,"alt",""),b(n,"class","w-4 h-4 mt-0.5 flex-shrink-0 rounded"),b(a,"href",p=e[53].url),b(a,"target","_blank"),b(a,"rel","noopener noreferrer"),b(a,"class","text-sm font-medium text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 truncate block"),b(w,"class","text-xs text-gray-400 dark:text-gray-500 truncate"),b(s,"class","flex-1 min-w-0"),b(C,"class","p-1 text-gray-400 hover:text-yellow-600 dark:hover:text-yellow-400"),b(C,"title","Mark as unread"),b(P,"class","p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400"),b(P,"title","Remove"),b(A,"class","flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"),b(t,"class","group flex items-start gap-2 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors opacity-60")},m(e,r){c(e,t,r),u(t,n),u(t,o),u(t,s),u(s,a),u(a,f),u(s,y),u(s,w),u(w,k),u(t,_),u(t,A),u(A,C),u(A,E),u(A,P),u(t,S),O||(j=[v(C,"click",D),v(P,"click",I)],O=!0)},p(t,r){e=t,2&r[0]&&!l(n.src,i="https://www.google.com/s2/favicons?domain="+e[53].domain+"&sz=32")&&b(n,"src",i),2&r[0]&&B!==(B=e[53].title+"")&&x(f,B),2&r[0]&&p!==(p=e[53].url)&&b(a,"href",p),2&r[0]&&M!==(M=e[53].domain+"")&&x(k,M)},d(e){e&&h(t),O=!1,r(j)}}}function Qn(e){let t,n,i,o=[],s=new Map,a=R(e[17]);const l=e=>e[50].id;for(let t=0;t<a.length;t+=1){let n=mn(e,a,t),r=l(n);s.set(r,o[t]=Xn(r,n))}let u=e[16]&&Zn(e);return{c(){t=d("div");for(let e=0;e<o.length;e+=1)o[e].c();n=m(),u&&u.c(),i=y(),b(t,"class","divide-y divide-gray-100 dark:divide-gray-800")},m(e,r){c(e,t,r);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);c(e,n,r),u&&u.m(e,r),c(e,i,r)},p(e,n){131072&n[0]&&(a=R(e[17]),o=function(e,t,n,i,o,s,a,l,u,c,h,f){let d=e.length,p=s.length,g=d;const m={};for(;g--;)m[e[g].key]=g;const y=[],v=new Map,b=new Map,x=[];for(g=p;g--;){const e=f(o,s,g),r=n(e);let l=a.get(r);l?i&&x.push(()=>l.p(e,t)):(l=c(r,e),l.c()),v.set(r,y[g]=l),r in m&&b.set(r,Math.abs(g-m[r]))}const w=new Set,k=new Set;function _(e){L(e,1),e.m(l,h),a.set(e.key,e),h=e.first,p--}for(;d&&p;){const t=y[p-1],n=e[d-1],r=t.key,i=n.key;t===n?(h=t.first,d--,p--):v.has(i)?!a.has(r)||w.has(r)?_(t):k.has(i)?d--:b.get(r)>b.get(i)?(k.add(r),_(t)):(w.add(i),d--):(u(n,a),d--)}for(;d--;){const t=e[d];v.has(t.key)||u(t,a)}for(;p;)_(y[p-1]);return r(x),y}(o,n,l,1,e,a,s,t,z,Xn,null,mn)),e[16]?u?u.p(e,n):(u=Zn(e),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},d(e){e&&(h(t),h(n),h(i));for(let e=0;e<o.length;e+=1)o[e].d();u&&u.d(e)}}}function Yn(e){let t;function n(e,t){return e[5]?tr:er}let r=n(e),i=r(e);return{c(){t=d("div"),i.c(),b(t,"class","text-center text-gray-500 dark:text-gray-400 p-4 text-sm")},m(e,n){c(e,t,n),i.m(t,null)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t,null)))},d(e){e&&h(t),i.d()}}}function Gn(e){let t,n,r,i,o,s=e[50].domain+"";return{c(){t=d("span"),n=g(s),i=m(),o=d("span"),o.textContent="‚Ä¢",b(t,"class","text-gray-500 dark:text-gray-400 truncate"),b(t,"title",r=e[50].url),b(o,"class","text-gray-300 dark:text-gray-600")},m(e,r){c(e,t,r),u(t,n),c(e,i,r),c(e,o,r)},p(e,i){131072&i[0]&&s!==(s=e[50].domain+"")&&x(n,s),131072&i[0]&&r!==(r=e[50].url)&&b(t,"title",r)},d(e){e&&(h(t),h(i),h(o))}}}function Jn(e){let t;return{c(){t=d("span"),t.textContent="‚ö†Ô∏è Dead",b(t,"class","text-red-500 dark:text-red-400 text-[10px]")},m(e,n){c(e,t,n)},d(e){e&&h(t)}}}function Xn(e,t){let n,i,o,s,a,f,p,y,w,k,_,A,C,E,P,S,O,j,B=(t[50].title||"Untitled")+"",M=de(t[50].dateAdded)+"",D=t[50].domain&&Gn(t),I=!1===t[50].isAlive&&Jn();function T(...e){return t[33](t[50],...e)}function K(...e){return t[34](t[50],...e)}return{key:e,first:null,c(){n=d("div"),i=d("div"),o=d("img"),a=m(),f=d("div"),p=d("h3"),y=g(B),k=m(),_=d("div"),D&&D.c(),A=m(),C=d("span"),E=g(M),P=m(),I&&I.c(),S=m(),l(o.src,s=pe(t[50]))||b(o,"src",s),b(o,"alt",""),b(o,"class","w-4 h-4 mt-0.5 flex-shrink-0 rounded"),b(p,"class","text-sm font-medium text-gray-900 dark:text-gray-100 truncate"),b(p,"title",w=t[50].title),b(C,"class","text-gray-400 dark:text-gray-500 whitespace-nowrap"),b(_,"class","flex items-center gap-2 mt-0.5 text-xs"),b(f,"class","flex-1 min-w-0"),b(i,"class","flex items-start gap-2"),b(n,"class","px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors group"),b(n,"role","button"),b(n,"tabindex","0"),this.first=n},m(e,t){c(e,n,t),u(n,i),u(i,o),u(i,a),u(i,f),u(f,p),u(p,y),u(f,k),u(f,_),D&&D.m(_,null),u(_,A),u(_,C),u(C,E),u(_,P),I&&I.m(_,null),u(n,S),O||(j=[v(n,"click",T),v(n,"keydown",K)],O=!0)},p(e,n){t=e,131072&n[0]&&!l(o.src,s=pe(t[50]))&&b(o,"src",s),131072&n[0]&&B!==(B=(t[50].title||"Untitled")+"")&&x(y,B),131072&n[0]&&w!==(w=t[50].title)&&b(p,"title",w),t[50].domain?D?D.p(t,n):(D=Gn(t),D.c(),D.m(_,A)):D&&(D.d(1),D=null),131072&n[0]&&M!==(M=de(t[50].dateAdded)+"")&&x(E,M),!1===t[50].isAlive?I||(I=Jn(),I.c(),I.m(_,null)):I&&(I.d(1),I=null)},d(e){e&&h(n),D&&D.d(),I&&I.d(),O=!1,r(j)}}}function Zn(e){let t,n,r,i,o,s,a,l=e[0].length-e[2]+"";return{c(){t=d("div"),n=d("button"),r=g("Load more ("),i=g(l),o=g(" remaining)"),b(n,"class","text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200"),b(t,"class","p-3 text-center")},m(l,h){c(l,t,h),u(t,n),u(n,r),u(n,i),u(n,o),s||(a=v(n,"click",e[28]),s=!0)},p(e,t){5&t[0]&&l!==(l=e[0].length-e[2]+"")&&x(i,l)},d(e){e&&h(t),s=!1,a()}}}function er(t){let n;return{c(){n=g("No bookmarks found")},m(e,t){c(e,n,t)},p:e,d(e){e&&h(n)}}}function tr(e){let t,n,r;return{c(){t=g('No bookmarks found for "'),n=g(e[5]),r=g('"')},m(e,i){c(e,t,i),c(e,n,i),c(e,r,i)},p(e,t){32&t[0]&&x(n,e[5])},d(e){e&&(h(t),h(n),h(r))}}}function nr(e){let t,n,i,o,s,a,l,f,p,y,x,w,k,_,A,C,E,P,S,O,j,B,M,D,I,T,K,R,z,N,U,H,W,V,Q,Y;function G(e,t){return e[7]?vn:yn}let J=G(e),X=J(e);w=new se({props:{placeholder:"Search bookmarks...",value:e[5]}}),w.$on("search",e[20]);let Z=e[15]>0&&bn(e),ee=e[6]&&xn(e),te=e[14]&&An(e);function ne(e,t){return e[3]?jn:e[4]?On:"all"===e[8]?Sn:"reading-list"===e[8]?Pn:"quick-access"===e[8]?En:"browse"===e[8]?Cn:void 0}let re=ne(e),ie=re&&re(e);return{c(){var r;t=d("div"),n=d("div"),i=d("div"),o=d("h1"),o.innerHTML='<svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path></svg>\n        Bookmark Insight',s=m(),a=d("div"),l=d("button"),X.c(),p=m(),y=d("button"),y.innerHTML='<svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>\n          Dashboard',x=m(),(r=w.$$.fragment)&&r.c(),k=m(),_=d("div"),A=d("button"),C=g("All"),P=m(),S=d("button"),O=g("üìö Reading\n      "),Z&&Z.c(),B=m(),M=d("button"),D=g("‚ö° Quick"),T=m(),K=d("button"),R=g("üóÇÔ∏è Browse"),N=m(),ee&&ee.c(),U=m(),te&&te.c(),H=m(),W=d("div"),ie&&ie.c(),b(o,"class","text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2"),b(l,"class","p-1.5 rounded-md text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),b(l,"title",f=e[7]?"Switch to light mode":"Switch to dark mode"),b(y,"class","px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors flex items-center gap-1"),b(y,"title","Open full dashboard"),b(a,"class","flex items-center gap-1"),b(i,"class","flex items-center justify-between mb-2"),b(n,"class","flex-shrink-0 p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"),b(A,"class",E="flex-1 px-2 py-2 text-xs font-medium transition-colors "+("all"===e[8]?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),b(S,"class",j="flex-1 px-2 py-2 text-xs font-medium transition-colors flex items-center justify-center gap-1 "+("reading-list"===e[8]?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),b(M,"class",I="flex-1 px-2 py-2 text-xs font-medium transition-colors "+("quick-access"===e[8]?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),b(K,"class",z="flex-1 px-2 py-2 text-xs font-medium transition-colors "+("browse"===e[8]?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),b(_,"class","flex-shrink-0 flex border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"),b(W,"class","flex-1 overflow-y-auto svelte-116f20l"),b(t,"class","w-full h-screen overflow-hidden flex flex-col bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors")},m(r,h){c(r,t,h),u(t,n),u(n,i),u(i,o),u(i,s),u(i,a),u(a,l),X.m(l,null),u(a,p),u(a,y),u(n,x),F(w,n,null),u(t,k),u(t,_),u(_,A),u(A,C),u(_,P),u(_,S),u(S,O),Z&&Z.m(S,null),u(_,B),u(_,M),u(M,D),u(_,T),u(_,K),u(K,R),u(t,N),ee&&ee.m(t,null),u(t,U),te&&te.m(t,null),u(t,H),u(t,W),ie&&ie.m(W,null),V=!0,Q||(Y=[v(l,"click",e[18]),v(y,"click",ir),v(A,"click",e[29]),v(S,"click",e[30]),v(M,"click",e[31]),v(K,"click",e[32])],Q=!0)},p(e,n){J!==(J=G(e))&&(X.d(1),X=J(e),X&&(X.c(),X.m(l,null))),(!V||128&n[0]&&f!==(f=e[7]?"Switch to light mode":"Switch to dark mode"))&&b(l,"title",f);const r={};32&n[0]&&(r.value=e[5]),w.$set(r),(!V||256&n[0]&&E!==(E="flex-1 px-2 py-2 text-xs font-medium transition-colors "+("all"===e[8]?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")))&&b(A,"class",E),e[15]>0?Z?Z.p(e,n):(Z=bn(e),Z.c(),Z.m(S,null)):Z&&(Z.d(1),Z=null),(!V||256&n[0]&&j!==(j="flex-1 px-2 py-2 text-xs font-medium transition-colors flex items-center justify-center gap-1 "+("reading-list"===e[8]?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")))&&b(S,"class",j),(!V||256&n[0]&&I!==(I="flex-1 px-2 py-2 text-xs font-medium transition-colors "+("quick-access"===e[8]?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")))&&b(M,"class",I),(!V||256&n[0]&&z!==(z="flex-1 px-2 py-2 text-xs font-medium transition-colors "+("browse"===e[8]?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")))&&b(K,"class",z),e[6]?ee?ee.p(e,n):(ee=xn(e),ee.c(),ee.m(t,U)):ee&&(ee.d(1),ee=null),e[14]?te?te.p(e,n):(te=An(e),te.c(),te.m(t,H)):te&&(te.d(1),te=null),re===(re=ne(e))&&ie?ie.p(e,n):(ie&&ie.d(1),ie=re&&re(e),ie&&(ie.c(),ie.m(W,null)))},i(e){V||(L(w.$$.fragment,e),V=!0)},o(e){!function(e,t,n,r){if(e&&e.o){if(q.has(e))return;q.add(e),(void 0).c.push(()=>{q.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}(w.$$.fragment,e),V=!1},d(e){e&&h(t),X.d(),$(w),Z&&Z.d(),ee&&ee.d(),te&&te.d(),ie&&ie.d(),Q=!1,r(Y)}}}function rr(e){e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function ir(){chrome.tabs.create({url:chrome.runtime.getURL("dashboard.html")})}function or(e,t){const n=!(e&&(e.shiftKey||e.metaKey||e.ctrlKey));!function(e,t=!0){chrome.tabs.create({url:e,active:t})}(t.url,n)}const sr=e=>e.hasBeenRead,ar=e=>!e.hasBeenRead,lr=e=>!e.hasBeenRead,ur=e=>!e.hasBeenRead,cr=e=>e.hasBeenRead,hr=e=>e.hasBeenRead;function fr(e,t,n){let r,i,o,s=[],a=[],l=!0,u=null,c="",h=null,f=30,d=!1,p="all",g="recent",m=[],y=[],v=[],b=[],x=null,w=null;async function k(){const e=await ve();n(0,s=e.sort((e,t)=>t.dateAdded-e.dateAdded))}async function _(){try{n(1,a=await xe())}catch(e){console.error("Error loading reading list:",e),n(1,a=[])}}async function C(){const e=await ve(),t={},r={};e.forEach(e=>{e.domain&&(t[e.domain]=(t[e.domain]||0)+1),e.folderPath&&(r[e.folderPath]=(r[e.folderPath]||0)+1)}),n(10,m=Object.entries(t).sort((e,t)=>t[1]-e[1]).slice(0,20).map(([e,t])=>({domain:e,count:t}))),n(11,y=Object.entries(r).sort((e,t)=>t[1]-e[1]).slice(0,20).map(([e,t])=>({folder:e,count:t}))),n(12,v=e.filter(e=>e.accessCount>0).sort((e,t)=>t.accessCount-e.accessCount).slice(0,10));const i=Date.now()-6048e5;n(13,b=e.filter(e=>e.dateAdded>i).sort((e,t)=>t.dateAdded-e.dateAdded).slice(0,15))}async function E(e){try{n(3,l=!0),n(6,h={type:"domain",value:e}),n(5,c=""),n(0,s=await async function(e){try{return await ye.bookmarks.where("domain").equals(e).toArray()}catch(e){return console.error("Error getting bookmarks by domain:",e),[]}}(e)),n(8,p="all")}catch(e){n(4,u=e.message)}finally{n(3,l=!1)}}async function P(e){try{n(3,l=!0),n(6,h={type:"folder",value:e}),n(5,c=""),n(0,s=await async function(e){try{return(await ve()).filter(t=>t.folderPath===e)}catch(e){return console.error("Error getting bookmarks by folder:",e),[]}}(e)),n(8,p="all")}catch(e){n(4,u=e.message)}finally{n(3,l=!1)}}async function S(e){try{n(3,l=!0);const t=Date.now(),r=t-24*e*60*60*1e3;n(6,h={type:"recent",value:`Last ${e} days`}),n(5,c=""),n(0,s=await async function(e,t){try{return await ye.bookmarks.where("dateAdded").between(e,t,!0,!0).toArray()}catch(e){return console.error("Error getting bookmarks by date range:",e),[]}}(r,t)),s.sort((e,t)=>t.dateAdded-e.dateAdded),n(8,p="all")}catch(e){n(4,u=e.message)}finally{n(3,l=!1)}}async function O(e){const t=!e.hasBeenRead;await async function(e,t){try{return chrome.readingList?(await chrome.readingList.updateEntry({url:e,hasBeenRead:t}),!0):(console.warn("Reading List API not available"),!1)}catch(e){return console.error("Error updating reading list item:",e),!1}}(e.url,t),await _()}async function j(e){n(14,x={type:"remove",item:e}),await async function(e){try{return chrome.readingList?(await chrome.readingList.removeEntry({url:e}),!0):(console.warn("Reading List API not available"),!1)}catch(e){return console.error("Error removing from reading list:",e),!1}}(e.url),await _(),w&&clearTimeout(w),w=setTimeout(()=>{n(14,x=null)},5e3)}A(async()=>{const e=await chrome.storage.local.get("darkMode");n(7,d=e.darkMode||!1),rr(d);try{await Promise.all([k(),_(),C()])}catch(e){n(4,u=e.message)}finally{n(3,l=!1)}chrome.readingList&&(chrome.readingList.onEntryAdded?.addListener(_),chrome.readingList.onEntryRemoved?.addListener(_),chrome.readingList.onEntryUpdated?.addListener(_))});return e.$$.update=()=>{5&e.$$.dirty[0]&&n(17,r=s.slice(0,f)),5&e.$$.dirty[0]&&n(16,i=s.length>f),2&e.$$.dirty[0]&&n(15,o=a.filter(e=>!e.hasBeenRead).length)},[s,a,f,l,u,c,h,d,p,g,m,y,v,b,x,o,i,r,async function(){n(7,d=!d),rr(d),await chrome.storage.local.set({darkMode:d})},k,async function(e){const t=e.detail.query;n(5,c=t),n(6,h=null);try{if(n(3,l=!0),t){const e=await an(t);n(0,s=e.results||[])}else await k();n(8,p="all")}catch(e){n(4,u=e.message)}finally{n(3,l=!1)}},E,P,S,async function(){n(6,h=null),n(5,c=""),n(3,l=!0),await k(),n(3,l=!1)},O,j,async function(){if(!x||"remove"!==x.type)return;const{item:e}=x;try{await chrome.readingList.addEntry({title:e.title,url:e.url,hasBeenRead:e.hasBeenRead}),await _()}catch(e){console.error("Error restoring reading list item:",e)}n(14,x=null),w&&clearTimeout(w)},function(){n(2,f+=30)},()=>n(8,p="all"),()=>n(8,p="reading-list"),()=>n(8,p="quick-access"),()=>n(8,p="browse"),(e,t)=>or(t,e),(e,t)=>"Enter"===t.key&&or(t,e),e=>O(e),e=>j(e),e=>O(e),e=>j(e),(e,t)=>or(t,e),(e,t)=>or(t,e),()=>n(9,g="recent"),()=>n(9,g="domains"),()=>n(9,g="folders"),e=>S(e.days),e=>E(e),e=>P(e)]}const dr=new class extends H{constructor(e){super(),U(this,e,fr,nr,o,{},null,[-1,-1,-1])}}({target:document.body});var pr=Object.freeze({__proto__:null,default:{}});export{dr as default};
