function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let o;function a(t,e){return t===e||(o||(o=document.createElement("a")),o.href=e,t===o.href)}function l(t,e,n,r){if(t){const i=c(t,e,n,r);return t[0](i)}}function c(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function u(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function d(t,e,n,r,i,s){if(i){const o=c(e,n,r,s);t.p(o,i)}}function h(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}const f="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function p(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function x(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function v(t){return document.createTextNode(t)}function w(){return v(" ")}function k(){return v("")}function _(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t){return""===t?null:+t}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function D(t,e){t.value=null==e?"":e}function P(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function E(t,e,n){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function T(t){const e=t.querySelector(":checked");return e&&e.__value}function O(t,e,n){t.classList.toggle(e,!!n)}let $;function L(t){$=t}function R(){if(!$)throw new Error("Function called outside component initialization");return $}function B(t){R().$$.on_mount.push(t)}function I(){const t=R();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}(e,n,{cancelable:r});return i.slice().forEach(e=>{e.call(t,s)}),!s.defaultPrevented}return!0}}function j(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t.call(this,e))}const F=[],z=[];let N=[];const W=[],V=Promise.resolve();let H=!1;function q(t){N.push(t)}const U=new Set;let K=0;function Y(){if(0!==K)return;const t=$;do{try{for(;K<F.length;){const t=F[K];K++,L(t),Q(t.$$)}}catch(t){throw F.length=0,K=0,t}for(L(null),F.length=0,K=0;z.length;)z.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];U.has(e)||(U.add(e),e())}N.length=0}while(F.length);for(;W.length;)W.pop()();H=!1,U.clear(),L(t)}function Q(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const G=new Set;let X;function J(){X={r:0,c:[],p:X}}function Z(){X.r||r(X.c),X=X.p}function tt(t,e){t&&t.i&&(G.delete(t),t.i(e))}function et(t,e,n,r){if(t&&t.o){if(G.has(t))return;G.add(t),X.c.push(()=>{G.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function nt(t){return void 0!==t?.length?t:Array.from(t)}function rt(t,e){et(t,1,1,()=>{e.delete(t.key)})}function it(t,e,n,i,s,o,a,l,c,u,d,h){let f=t.length,p=o.length,g=f;const m={};for(;g--;)m[t[g].key]=g;const b=[],y=new Map,x=new Map,v=[];for(g=p;g--;){const t=h(s,o,g),r=n(t);let l=a.get(r);l?i&&v.push(()=>l.p(t,e)):(l=u(r,t),l.c()),y.set(r,b[g]=l),r in m&&x.set(r,Math.abs(g-m[r]))}const w=new Set,k=new Set;function _(t){tt(t,1),t.m(l,d),a.set(t.key,t),d=t.first,p--}for(;f&&p;){const e=b[p-1],n=t[f-1],r=e.key,i=n.key;e===n?(d=e.first,f--,p--):y.has(i)?!a.has(r)||w.has(r)?_(e):k.has(i)?f--:x.get(r)>x.get(i)?(k.add(r),_(e)):(w.add(i),f--):(c(n,a),f--)}for(;f--;){const e=t[f];y.has(e.key)||c(e,a)}for(;p;)_(b[p-1]);return r(v),b}function st(t){t&&t.c()}function ot(t,n,s){const{fragment:o,after_update:a}=t.$$;o&&o.m(n,s),q(()=>{const n=t.$$.on_mount.map(e).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]}),a.forEach(q)}function at(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];N.forEach(r=>-1===t.indexOf(r)?e.push(r):n.push(r)),n.forEach(t=>t()),N=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){-1===t.$$.dirty[0]&&(F.push(t),H||(H=!0,V.then(Y)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ct(e,i,s,o,a,l,c=null,u=[-1]){const d=$;L(e);const h=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||d.$$.root};c&&c(h.root);let f=!1;if(h.ctx=s?s(e,i.props||{},(t,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),f&&lt(e,t)),n}):[],h.update(),f=!0,r(h.before_update),h.fragment=!!o&&o(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(m)}else h.fragment&&h.fragment.c();i.intro&&tt(e.$$.fragment),ot(e,i.target,i.anchor),Y()}L(d)}class ut{$$=void 0;$$set=void 0;$destroy(){at(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function dt(t){return t+.5|0}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const ht=(t,e,n)=>Math.max(Math.min(t,n),e);function ft(t){return ht(dt(2.55*t),0,255)}function pt(t){return ht(dt(255*t),0,255)}function gt(t){return ht(dt(t/2.55)/100,0,1)}function mt(t){return ht(dt(100*t),0,100)}const bt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yt=[..."0123456789ABCDEF"],xt=t=>yt[15&t],vt=t=>yt[(240&t)>>4]+yt[15&t],wt=t=>(240&t)>>4==(15&t);function kt(t){var e=(t=>wt(t.r)&&wt(t.g)&&wt(t.b)&&wt(t.a))(t)?xt:vt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const _t=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ct(t,e,n){const r=e*Math.min(n,1-n),i=(e,i=(e+t/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function Mt(t,e,n){const r=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function St(t,e,n){const r=Ct(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function At(t){const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),s=Math.min(e,n,r),o=(i+s)/2;let a,l,c;return i!==s&&(c=i-s,l=o>.5?c/(2-i-s):c/(i+s),a=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(e,n,r,c,i),a=60*a+.5),[0|a,l||0,o]}function Dt(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(pt)}function Pt(t,e,n){return Dt(Ct,t,e,n)}function Et(t){return(t%360+360)%360}function Tt(t){const e=_t.exec(t);let n,r=255;if(!e)return;e[5]!==n&&(r=e[6]?ft(+e[5]):pt(+e[5]));const i=Et(+e[2]),s=+e[3]/100,o=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return Dt(St,t,e,n)}(i,s,o):"hsv"===e[1]?function(t,e,n){return Dt(Mt,t,e,n)}(i,s,o):Pt(i,s,o),{r:n[0],g:n[1],b:n[2],a:r}}const Ot={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$t={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Lt;function Rt(t){Lt||(Lt=function(){const t={},e=Object.keys($t),n=Object.keys(Ot);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,Ot[s]);s=parseInt($t[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}(),Lt.transparent=[0,0,0,0]);const e=Lt[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const Bt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const It=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,jt=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Ft(t,e,n){if(t){let r=At(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=Pt(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function zt(t,e){return t?Object.assign(e||{},t):t}function Nt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=pt(t[3]))):(e=zt(t,{r:0,g:0,b:0,a:1})).a=pt(e.a),e}function Wt(t){return"r"===t.charAt(0)?function(t){const e=Bt.exec(t);let n,r,i,s=255;if(e){if(e[7]!==n){const t=+e[7];s=e[8]?ft(t):ht(255*t,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?ft(n):ht(n,0,255)),r=255&(e[4]?ft(r):ht(r,0,255)),i=255&(e[6]?ft(i):ht(i,0,255)),{r:n,g:r,b:i,a:s}}}(t):Tt(t)}class Vt{constructor(t){if(t instanceof Vt)return t;const e=typeof t;let n;var r,i,s;"object"===e?n=Nt(t):"string"===e&&(s=(r=t).length,"#"===r[0]&&(4===s||5===s?i={r:255&17*bt[r[1]],g:255&17*bt[r[2]],b:255&17*bt[r[3]],a:5===s?17*bt[r[4]]:255}:7!==s&&9!==s||(i={r:bt[r[1]]<<4|bt[r[2]],g:bt[r[3]]<<4|bt[r[4]],b:bt[r[5]]<<4|bt[r[6]],a:9===s?bt[r[7]]<<4|bt[r[8]]:255})),n=i||Rt(t)||Wt(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=zt(this._rgb);return t&&(t.a=gt(t.a)),t}set rgb(t){this._rgb=Nt(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${gt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?kt(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=At(t),n=e[0],r=mt(e[1]),i=mt(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${gt(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let i;const s=e===i?.5:e,o=2*s-1,a=n.a-r.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const r=jt(gt(t.r)),i=jt(gt(t.g)),s=jt(gt(t.b));return{r:pt(It(r+n*(jt(gt(e.r))-r))),g:pt(It(i+n*(jt(gt(e.g))-i))),b:pt(It(s+n*(jt(gt(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Vt(this.rgb)}alpha(t){return this._rgb.a=pt(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=dt(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ft(this._rgb,2,t),this}darken(t){return Ft(this._rgb,2,-t),this}saturate(t){return Ft(this._rgb,1,t),this}desaturate(t){return Ft(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=At(t);n[0]=Et(n[0]+e),n=Pt(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ht(){}const qt=(()=>{let t=0;return()=>t++})();function Ut(t){return null==t}function Kt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Yt(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Qt(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function Gt(t,e){return Qt(t)?t:e}function Xt(t,e){return void 0===t?e:t}const Jt=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Zt(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function te(t,e,n,r){let i,s,o;if(Kt(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(Yt(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ee(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ne(t){if(Kt(t))return t.map(ne);if(Yt(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ne(t[n[i]]);return e}return t}function re(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function ie(t,e,n,r){if(!re(t))return;const i=e[t],s=n[t];Yt(i)&&Yt(s)?se(i,s,r):e[t]=ne(s)}function se(t,e,n){const r=Kt(e)?e:[e],i=r.length;if(!Yt(t))return t;const s=(n=n||{}).merger||ie;let o;for(let e=0;e<i;++e){if(o=r[e],!Yt(o))continue;const i=Object.keys(o);for(let e=0,r=i.length;e<r;++e)s(i[e],t,o,n)}return t}function oe(t,e){return se(t,e,{merger:ae})}function ae(t,e,n){if(!re(t))return;const r=e[t],i=n[t];Yt(r)&&Yt(i)?oe(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ne(i))}const le={"":t=>t,x:t=>t.x,y:t=>t.y};function ce(t,e){const n=le[e]||(le[e]=function(t){const e=function(t){const e=t.split("."),n=[];let r="";for(const t of e)r+=t,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function ue(t){return t.charAt(0).toUpperCase()+t.slice(1)}const de=t=>void 0!==t,he=t=>"function"==typeof t,fe=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const pe=Math.PI,ge=2*pe,me=ge+pe,be=Number.POSITIVE_INFINITY,ye=pe/180,xe=pe/2,ve=pe/4,we=2*pe/3,ke=Math.log10,_e=Math.sign;function Ce(t,e,n){return Math.abs(t-e)<n}function Me(t){const e=Math.round(t);t=Ce(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ke(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Se(t){return!function(t){return"symbol"==typeof t||"object"==typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Ae(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function De(t){return t*(pe/180)}function Pe(t){return t*(180/pe)}function Ee(t){if(!Qt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Te(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*pe&&(s+=ge),{angle:s,distance:i}}function Oe(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $e(t,e){return(t-e+me)%ge-pe}function Le(t){return(t%ge+ge)%ge}function Re(t,e,n,r){const i=Le(t),s=Le(e),o=Le(n),a=Le(s-i),l=Le(o-i),c=Le(i-s),u=Le(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Be(t,e,n){return Math.max(e,Math.min(n,t))}function Ie(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function je(t,e,n){n=n||(n=>t[n]<e);let r,i=t.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Fe=(t,e,n,r)=>je(t,n,r?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),ze=(t,e,n)=>je(t,n,r=>t[r][e]>=n);const Ne=["push","pop","shift","splice","unshift"];function We(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(Ne.forEach(e=>{delete t[e]}),delete t._chartjs)}function Ve(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const He="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function qe(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,He.call(window,()=>{r=!1,t.apply(e,n)}))}}const Ue=t=>"start"===t?"left":"end"===t?"right":"center",Ke=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Ye(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(i=Math.min(Fe(l,u,d).lo,n?r:Fe(e,u,o.getPixelForValue(d)).lo),c){const t=l.slice(0,i+1).reverse().findIndex(t=>!Ut(t[a.axis]));i-=Math.max(0,t)}i=Be(i,0,r-1)}if(p){let t=Math.max(Fe(l,o.axis,h,!0).hi+1,n?0:Fe(e,u,o.getPixelForValue(h),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!Ut(t[a.axis]));t+=Math.max(0,e)}s=Be(t,i,r)-i}else s=r-i}return{start:i,count:s}}function Qe(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Ge=t=>0===t||1===t,Xe=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*ge/n),Je=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ge/n)+1,Ze={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*xe),easeOutSine:t=>Math.sin(t*xe),easeInOutSine:t=>-.5*(Math.cos(pe*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ge(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ge(t)?t:Xe(t,.075,.3),easeOutElastic:t=>Ge(t)?t:Je(t,.075,.3),easeInOutElastic(t){const e=.1125;return Ge(t)?t:t<.5?.5*Xe(2*t,e,.45):.5+.5*Je(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Ze.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Ze.easeInBounce(2*t):.5*Ze.easeOutBounce(2*t-1)+.5};function tn(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function en(t){return tn(t)?t:new Vt(t)}function nn(t){return tn(t)?t:new Vt(t).saturate(.5).darken(.1).hexString()}const rn=["x","y","borderWidth","radius","tension"],sn=["color","borderColor","backgroundColor"];const on=new Map;function an(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let r=on.get(n);return r||(r=new Intl.NumberFormat(t,e),on.set(n,r)),r}(e,n).format(t)}const ln={values:t=>Kt(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const o=ke(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),an(t,r,l)},logarithmic(t,e,n){if(0===t)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(ke(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?ln.numeric.call(this,t,e,n):""}};var cn={formatters:ln};const un=Object.create(null),dn=Object.create(null);function hn(t,e){if(!e)return t;const n=e.split(".");for(let e=0,r=n.length;e<r;++e){const r=n[e];t=t[r]||(t[r]=Object.create(null))}return t}function fn(t,e,n){return"string"==typeof e?se(hn(t,e),n):se(hn(t,""),e)}class pn{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>nn(e.backgroundColor),this.hoverBorderColor=(t,e)=>nn(e.borderColor),this.hoverColor=(t,e)=>nn(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return fn(this,t,e)}get(t){return hn(this,t)}describe(t,e){return fn(dn,t,e)}override(t,e){return fn(un,t,e)}route(t,e,n,r){const i=hn(this,t),s=hn(this,n),o="_"+e;Object.defineProperties(i,{[o]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=s[r];return Yt(t)?Object.assign({},e,t):Xt(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach(t=>t(this))}}var gn=new pn({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:sn},numbers:{type:"number",properties:rn}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:cn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function mn(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function bn(t,e,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],null==d||Kt(d)){if(Kt(d))for(c=0,u=d.length;c<u;c++)h=d[c],null==h||Kt(h)||(o=mn(t,i,s,o,h))}else o=mn(t,i,s,o,d);t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function yn(t,e,n){const r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function xn(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function vn(t,e,n,r){wn(t,e,n,r,null)}function wn(t,e,n,r,i){let s,o,a,l,c,u,d,h;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*ye;if(f&&"object"==typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,g,0,0,ge):t.arc(n,r,g,0,ge),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=we,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=we,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+ve)*l,d=Math.cos(m+ve)*(i?i/2-c:l),a=Math.sin(m+ve)*l,h=Math.sin(m+ve)*(i?i/2-c:l),t.arc(n-d,r-a,c,m-pe,m-xe),t.arc(n+h,r-o,c,m-xe,m),t.arc(n+d,r+a,c,m,m+xe),t.arc(n-h,r+o,c,m+xe,m+pe),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}m+=ve;case"rectRot":d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":m+=ve;case"cross":d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),m+=ve,d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function kn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function _n(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Cn(t){t.restore()}function Mn(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else"after"===i!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Sn(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function An(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Dn(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Pn(t,e,n,r,i,s={}){const o=Kt(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ut(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Dn(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ut(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),An(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function En(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*pe,pe,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,pe,xe,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,xe,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-xe,!0),t.lineTo(n+o.topLeft,r)}const Tn=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,On=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $n(t,e){const n=(""+t).match(Tn);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const Ln=t=>+t||0;function Rn(t,e){const n={},r=Yt(e),i=r?Object.keys(e):e,s=Yt(t)?r?n=>Xt(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of i)n[t]=Ln(s(t));return n}function Bn(t){return Rn(t,{top:"y",right:"x",bottom:"y",left:"x"})}function In(t){return Rn(t,["topLeft","topRight","bottomLeft","bottomRight"])}function jn(t){const e=Bn(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Fn(t,e){t=t||{},e=e||gn.font;let n=Xt(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let r=Xt(t.style,e.style);r&&!(""+r).match(On)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Xt(t.family,e.family),lineHeight:$n(Xt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Xt(t.weight,e.weight),string:""};return i.string=function(t){return!t||Ut(t.size)||Ut(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function zn(t,e,n,r){let i,s,o,a=!0;for(i=0,s=t.length;i<s;++i)if(o=t[i],void 0!==o&&(void 0!==e&&"function"==typeof o&&(o=o(e),a=!1),void 0!==n&&Kt(o)&&(o=o[n%o.length],a=!1),void 0!==o))return r&&!a&&(r.cacheable=!1),o}function Nn(t,e){return Object.assign(Object.create(t),e)}function Wn(t,e=[""],n,r,i=()=>t[0]){const s=n||t;void 0===r&&(r=Zn("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:n=>Wn([n,...t],e,s,r)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,r)=>Kn(n,r,()=>function(t,e,n,r){let i;for(const s of e)if(i=Zn(qn(s,t),n),void 0!==i)return Un(t,i)?Xn(n,r,t,i):i}(r,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>tr(t).includes(e),ownKeys:t=>tr(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function Vn(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Hn(t,r),setContext:e=>Vn(t,e,n,r),override:i=>Vn(t.override(i),e,n,r)};return new Proxy(i,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Kn(t,e,()=>function(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];he(a)&&o.isScriptable(e)&&(a=function(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);a.delete(t),Un(t,l)&&(l=Xn(i._scopes,i,t,l));return l}(e,a,t,n));Kt(a)&&a.length&&(a=function(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(void 0!==s.index&&r(t))return e[s.index%e.length];if(Yt(e[0])){const n=e,r=i._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=Xn(r,i,t,l);e.push(Vn(n,s,o&&o[t],a))}}return e}(e,a,t,o.isIndexable));Un(e,a)&&(a=Vn(a,i,s&&s[e],o));return a}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,r)=>(t[n]=r,delete e[n],!0)})}function Hn(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:he(n)?n:()=>n,isIndexable:he(r)?r:()=>r}}const qn=(t,e)=>t?t+ue(e):e,Un=(t,e)=>Yt(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Kn(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const r=n();return t[e]=r,r}function Yn(t,e,n){return he(t)?t(e,n):t}const Qn=(t,e)=>!0===t?e:"string"==typeof t?ce(e,t):void 0;function Gn(t,e,n,r,i){for(const s of e){const e=Qn(n,s);if(e){t.add(e);const s=Yn(e._fallback,n,i);if(void 0!==s&&s!==n&&s!==r)return s}else if(!1===e&&void 0!==r&&n!==r)return null}return!1}function Xn(t,e,n,r){const i=e._rootScopes,s=Yn(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Jn(a,o,n,s||n,r);return null!==l&&((void 0===s||s===n||(l=Jn(a,o,s,l,r),null!==l))&&Wn(Array.from(a),[""],i,s,()=>function(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];if(Kt(i)&&Yt(n))return n;return i||{}}(e,n,r)))}function Jn(t,e,n,r,i){for(;n;)n=Gn(t,e,n,r,i);return n}function Zn(t,e){for(const n of e){if(!n)continue;const e=n[t];if(void 0!==e)return e}}function tr(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function er(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse(ce(u,s),c)};return o}const nr=Number.EPSILON||1e-14,rr=(t,e)=>e<t.length&&!t[e].skip&&t[e],ir=t=>"x"===t?"y":"x";function sr(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Oe(s,i),l=Oe(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function or(t,e="x"){const n=ir(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=rr(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=rr(t,o+1),l){if(c){const t=c[e]-l[e];i[o]=0!==t?(c[n]-l[n])/t:0}s[o]=a?c?_e(i[o-1])!==_e(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}!function(t,e,n){const r=t.length;let i,s,o,a,l,c=rr(t,0);for(let u=0;u<r-1;++u)l=c,c=rr(t,u+1),l&&c&&(Ce(e[u],0,nr)?n[u]=n[u+1]=0:(i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])))}(t,i,s),function(t,e,n="x"){const r=ir(n),i=t.length;let s,o,a,l=rr(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=rr(t,c+1),!a)continue;const i=a[n],u=a[r];o&&(s=(i-o[n])/3,a[`cp1${n}`]=i-s,a[`cp1${r}`]=u-s*e[c]),l&&(s=(l[n]-i)/3,a[`cp2${n}`]=i+s,a[`cp2${r}`]=u+s*e[c])}}(t,s,e)}function ar(t,e,n){return Math.max(Math.min(t,n),e)}function lr(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)or(t,i);else{let n=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=sr(n,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&function(t,e){let n,r,i,s,o,a=kn(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&kn(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=ar(i.cp1x,e.left,e.right),i.cp1y=ar(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=ar(i.cp2x,e.left,e.right),i.cp2y=ar(i.cp2y,e.top,e.bottom)))}(t,n)}function cr(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ur(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function dr(t,e,n){let r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}const hr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const fr=["top","right","bottom","left"];function pr(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=fr[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function gr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=hr(n),s="border-box"===i.boxSizing,o=pr(i,"padding"),a=pr(i,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o,a,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(i,s,t.target))o=i,a=s;else{const t=e.getBoundingClientRect();o=r.clientX-t.left,a=r.clientY-t.top,l=!0}return{x:o,y:a,box:l}}(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const mr=t=>Math.round(10*t)/10;function br(t,e,n,r){const i=hr(t),s=pr(i,"margin"),o=dr(i.maxWidth,t,"clientWidth")||be,a=dr(i.maxHeight,t,"clientHeight")||be,l=function(t,e,n){let r,i;if(void 0===e||void 0===n){const s=t&&ur(t);if(s){const t=s.getBoundingClientRect(),o=hr(s),a=pr(o,"border","width"),l=pr(o,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,r=dr(o.maxWidth,s,"clientWidth"),i=dr(o.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||be,maxHeight:i||be}}(t,e,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const t=pr(i,"border","width"),e=pr(i,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=mr(Math.min(c,o,l.maxWidth)),u=mr(Math.min(u,a,l.maxHeight)),c&&!u&&(u=mr(c/2));return(void 0!==e||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=mr(Math.floor(u*r))),{width:c,height:u}}function yr(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0)}const xr=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};cr()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function vr(t,e){const n=function(t,e){return hr(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function wr(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function kr(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function _r(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=wr(t,i,n),a=wr(i,s,n),l=wr(s,e,n),c=wr(o,a,n),u=wr(a,l,n);return wr(c,u,n)}function Cr(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Mr(t,e){let n,r;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Sr(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ar(t){return"angle"===t?{between:Re,compare:$e,normalize:Le}:{between:Ie,compare:(t,e)=>t-e,normalize:t=>t}}function Dr({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n==0,style:i}}function Pr(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=Ar(r),{start:u,end:d,loop:h,style:f}=function(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=Ar(r),l=e.length;let c,u,{start:d,end:h,loop:f}=t;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&o(a(e[d%l][r]),i,s);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:t.style}}(t,e,n),p=[];let g,m,b,y=!1,x=null;const v=()=>y||l(i,b,g)&&0!==a(i,b),w=()=>!y||0===a(s,g)||l(s,b,g);for(let t=u,n=u;t<=d;++t)m=e[t%o],m.skip||(g=c(m[r]),g!==b&&(y=l(g,i,s),null===x&&v()&&(x=0===a(g,i)?t:n),null!==x&&w()&&(p.push(Dr({start:x,end:t,loop:h,count:o,style:f})),x=null),n=t,b=g));return null!==x&&p.push(Dr({start:x,end:d,loop:h,count:o,style:f})),p}function Er(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=Pr(r[i],t.points,e);s.length&&n.push(...s)}return n}function Tr(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){const i=t._chart.getContext(),s=Or(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,h=d;function f(t,e,r,i){const s=a?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=s;for(;n[e%l].skip;)e+=s;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:r,style:i}),u=i,d=e%l)}}for(const t of e){d=a?d:t.start;let e,s=n[d%l];for(h=d+1;h<=t.end;h++){const a=n[h%l];e=Or(r.setContext(Nn(i,{type:"segment",p0:s,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),$r(e,u)&&f(d,h-1,t.loop,u),s=a,u=e}d<h-1&&f(d,h-1,t.loop,u)}return c}(t,e,n,r):e}function Or(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function $r(t,e){if(!e)return!1;const n=[],r=function(t,e){return tn(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Lr(t,e,n){return t.options.clip?t[n]:e[n]}function Rr(t,e){const n=e._clip;if(n.disabled)return!1;const r=function(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Lr(n,e,"left"),right:Lr(n,e,"right"),top:Lr(r,e,"top"),bottom:Lr(r,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:r.bottom+(!0===n.bottom?0:n.bottom)}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Br{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const i=e.listeners[r],s=e.duration;i.forEach(r=>r({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=He.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,o=i.length-1,a=!1;for(;o>=0;--o)s=i[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=i.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ir=new Br;const jr="transparent",Fr={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const r=en(t||jr),i=r.valid&&en(e||jr);return i&&i.valid?i.mix(r,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class zr{constructor(t,e,n,r){const i=e[n];r=zn([t.to,r,i,t.from]);const s=zn([t.from,i,r]);this._active=!0,this._fn=t.fn||Fr[t.type||typeof s],this._easing=Ze[t.easing]||Ze.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=zn([t.to,e,r,t.from]),this._from=zn([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,o=this._to;let a;if(this._active=i!==o&&(s||e<n),!this._active)return this._target[r]=o,void this._notify(!0);e<0?this._target[r]=i:(a=e/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class Nr{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Yt(t))return;const e=Object.keys(gn.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Yt(i))return;const s={};for(const t of e)s[t]=i[t];(Kt(i.properties)&&i.properties||[r]).forEach(t=>{t!==r&&n.has(t)||n.set(t,s)})})}_animateOptions(t,e){const n=e.options,r=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(t,e){const n=[],r=Object.keys(e);for(let e=0;e<r.length;e++){const i=t[r[e]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),i}_createAnimations(t,e){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(t,e));continue}const c=e[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,o);continue}u.cancel()}d&&d.duration?(i[l]=u=new zr(d,t,l,c),r.push(u)):t[l]=c}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Ir.add(this._chart,n),!0):void 0}}function Wr(t,e){const n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:r?s:i,end:r?i:s}}function Vr(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Hr(t,e,n,r={}){const i=t.keys,s="single"===r.mode;let o,a,l,c;if(null===e)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Qt(c)&&(s||0===e||_e(e)===_e(c))&&(e+=c)}return u||r.all?e:0}function qr(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Ur(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Kr(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function Yr(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(s,o,r),d=e.length;let h;for(let t=0;t<d;++t){const n=e[t],{[l]:s,[c]:d}=n;h=(n._stacks||(n._stacks={}))[c]=Ur(i,u,s),h[a]=d,h._top=Kr(h,o,!0,r.type),h._bottom=Kr(h,o,!1,r.type);(h._visualValues||(h._visualValues={}))[a]=d}}function Qr(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function Gr(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][n])return;delete e[r][n],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[n]&&delete e[r]._visualValues[n]}}}const Xr=t=>"reset"===t||"none"===t,Jr=(t,e)=>e?t:Object.assign({},t);class Zr{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=qr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Gr(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(t,e,n,r)=>"x"===t?e:"r"===t?r:n,i=e.xAxisID=Xt(n.xAxisID,Qr(t,"x")),s=e.yAxisID=Xt(n.yAxisID,Qr(t,"y")),o=e.rAxisID=Xt(n.rAxisID,Qr(t,"r")),a=e.indexAxis,l=e.iAxisID=r(a,i,s,o),c=e.vAxisID=r(a,s,i,o);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&We(this._data,this),t._stacked&&Gr(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Yt(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:r}=e,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}(e,t)}else if(n!==e){if(n){We(n,this);const t=this._cachedMeta;Gr(t),t._parsed=[]}e&&Object.isExtensible(e)&&(i=this,(r=e)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),Ne.forEach(t=>{const e="_onData"+ue(t),n=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...t){const i=n.apply(this,t);return r._chartjs.listeners.forEach(n=>{"function"==typeof n[e]&&n[e](...t)}),i}})}))),this._syncList=[],this._data=e}var r,i}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=e._stacked;e._stacked=qr(e.vScale,e),e.stack!==n.stack&&(r=!0,Gr(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&(Yr(this,e._parsed),e._stacked=qr(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,o=i.axis;let a,l,c,u=0===t&&e===r.length||n._sorted,d=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=Kt(r[t])?this.parseArrayData(n,r,t,e):Yt(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);const i=()=>null===l[o]||d&&l[o]<d[o];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],u&&(i()&&(u=!1),d=l);n._sorted=u}s&&Yr(this,c)}parsePrimitiveData(t,e,n,r){const{iScale:i,vScale:s}=t,o=i.axis,a=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[o]:c||i.parse(l[f],f),[a]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,r){const{xScale:i,yScale:s}=t,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(t,e,n,r){const{xScale:i,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=e[d],l[c]={x:i.parse(ce(h,o),d),y:s.parse(ce(h,a),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,i=this._cachedMeta,s=e[t.axis];return Hr({keys:Vr(r,!0),values:e._stacks[t.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const i=n[e.axis];let s=null===i?NaN:i;const o=r&&n._stacks[e.axis];r&&o&&(r.values=o,s=Hr(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&t===n.iScale,s=r.length,o=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Vr(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(o);let d,h;function f(){h=r[d];const e=h[o.axis];return!Qt(h[t.axis])||c>e||u<e}for(d=0;d<s&&(f()||(this.updateRangeFromParsed(l,t,h,a),!i));++d);if(i)for(d=s-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,t,h,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r][t.axis],Qt(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,r,i;return Yt(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}(Xt(this.options.clip,function(t,e,n){if(!1===n)return!1;const r=Wr(t,n),i=Wr(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],i=e.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,i,o,a),c=o;c<o+a;++c){const e=r[c];e.hidden||(e.active&&l?s.push(e):e.draw(t,i))}for(c=0;c<s.length;++c)s[c].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];i=e.$context||(e.$context=function(t,e,n){return Nn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=function(t,e){return Nn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!e,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const r="active"===e,i=this._cachedDataOpts,s=t+"-"+e,o=i[s],a=this.enableOptionSharing&&de(n);if(o)return Jr(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=r?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(gn.elements[t]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,r,e),u);return f.$shared&&(f.$shared=a,i[s]=Object.freeze(Jr(f,a))),f}_resolveAnimations(t,e,n){const r=this.chart,i=this._cachedDataOpts,s=`animation-${e}`,o=i[s];if(o)return o;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,e),s=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(s,this.getContext(t,n,e))}const l=new Nr(r,a&&a.animations);return a&&a._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Xr(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:s}}updateElement(t,e,n,r){Xr(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!Xr(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const r=n.length,i=e.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,e,n=!0){const r=this._cachedMeta,i=r.data,s=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=s;o--)t[o]=t[o-e]};for(a(i),o=t;o<s;++o)i[o]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(t,e),n&&this.updateElements(i,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&Gr(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ti(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let e=0,i=n.length;e<i;e++)r=r.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Ve(r.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let r,i,s,o,a=e._length;const l=()=>{32767!==s&&-32768!==s&&(de(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(r=0,i=n.length;r<i;++r)s=e.getPixelForValue(n[r]),l();for(o=void 0,r=0,i=e.ticks.length;r<i;++r)s=e.getPixelForTick(r),l();return a}function ei(t,e,n,r){return Kt(t)?function(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}(t,e,n,r):e[n.axis]=n.parse(t,r),e}function ni(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(ei(h,d,s,c));return l}function ri(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function ii(t,e,n,r){let i=e.borderSkipped;const s={};if(!i)return void(t.borderSkipped=s);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}(t);"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[si(u,o,a,l)]=!0,i=c)),s[si(i,o,a,l)]=!0,t.borderSkipped=s}function si(t,e,n,r){var i,s,o;return r?(o=n,t=oi(t=(i=t)===(s=e)?o:i===o?s:i,n,e)):t=oi(t,e,n),t}function oi(t,e,n){return"start"===t?e:"end"===t?n:t}function ai(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class li extends Zr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map((e,i)=>{const s=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,o=t=>+n[t];if(Yt(n[t])){const{key:t="value"}=this._parsing;o=e=>+ce(n[e],t)}for(i=t,s=t+e;i<s;++i)r._parsed[i]=o(i)}}_getRotation(){return De(this.options.rotation-90)}_getCircumference(){return De(this.options.circumference)}_getRotationExtents(){let t=ge,e=-ge;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let r=1,i=1,s=0,o=0;if(e<ge){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(t,e,r)=>Re(t,a,l,!0)?1:Math.max(e,e*n,r,r*n),p=(t,e,r)=>Re(t,a,l,!0)?-1:Math.min(e,e*n,r,r*n),g=f(0,c,d),m=f(xe,u,h),b=p(pe,c,d),y=p(pe+xe,u,h);r=(g-b)/2,i=(m-y)/2,s=-(g+b)/2,o=-(m+y)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(h,d,a),b=(n.width-s)/f,y=(n.height-s)/p,x=Math.max(Math.min(b,y)/2,0),v=Jt(this.options.radius,x),w=(v-Math.max(v*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=m*v,r.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/ge)}updateElements(t,e,n,r){const i="reset"===r,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=i&&a.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,r);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,i);for(g=e;g<e+n;++g){const e=this._circumference(g,i),n=t[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:h,innerRadius:d};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=e,this.updateElement(n,g,s,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,r=0;for(n=0;n<e.length;n++){const i=t._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||e[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ge*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=an(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,i,s,o,a;if(!t)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),t=s.data,o=s.controller;break}if(!t)return 0;for(r=0,i=t.length;r<i;++r)a=o.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Xt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ci extends Zr{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map((e,i)=>{const s=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=an(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}parseObjectData(t,e,n,r){return er.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,r){const i="reset"===r,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*pe;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<e;++d)h+=this._computeAngle(d,r,f);for(d=e;d<e+n;d++){const e=t[d];let n=h,p=h+this._computeAngle(d,r,f),g=s.getDataVisibility(d)?a.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=p,i&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(d,e.active?"active":r)};this.updateElement(e,d,m,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?De(this.resolveDataElementOptions(t,e).angle||n):0}}var ui=Object.freeze({__proto__:null,BarController:class extends Zr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,r){return ni(t,e,n,r)}parseArrayData(t,e,n,r){return ni(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:i,vScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?o:a,c="x"===s.axis?o:a,u=[];let d,h,f,p;for(d=n,h=n+r;d<h;++d)p=e[d],f={},f[i.axis]=i.parse(ce(p,l),d),u.push(ei(ce(p,c),f,s,d));return u}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const i=n._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,i=this.getParsed(t),s=i._custom,o=ri(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,r);for(let h=e;h<e+n;h++){const e=this.getParsed(h),n=i||Ut(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(e._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||ri(e._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(g.options=u||this.resolveDataElementOptions(h,t[h].active?"active":r));const m=g.options||t[h].options;ii(g,m,p,s),ai(g,m,c.ratio),this.updateElement(t[h],h,g,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),i=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(e),a=o&&o[n.axis],l=t=>{const e=t._parsed.find(t=>t[n.axis]===a),r=e&&e[t.vScale.axis];if(Ut(r)||isNaN(r))return!0};for(const n of r)if((void 0===e||!l(n))&&((!1===i||-1===s.indexOf(n.stack)||void 0===i&&void 0===n.stack)&&s.push(n.stack),n.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Xt("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let i,s;for(i=0,s=e.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=t.barThickness;return{min:o||ti(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,o=i||0,a=this.getParsed(t),l=a._custom,c=ri(l);let u,d,h=a[e.axis],f=0,p=n?this.applyStack(e,a,n):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&_e(h)!==_e(l.barEnd)&&(f=0),f+=h);const g=Ut(i)||c?f:i;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,d=u-m,Math.abs(d)<s){d=function(t,e,n){return 0!==t?_e(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(d,e,o)*s,h===o&&(m-=d/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),l=Math.min(t,i),f=Math.max(t,i);m=Math.max(Math.min(m,f),l),u=m+d,n&&!c&&(a._stacks[e.axis]._visualValues[r]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=_e(d)*e.getLineWidthForValue(o)/2;m+=t,d-=t}return{size:d,base:m,head:u,center:u+d/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,i=r.skipNull,s=Xt(r.maxBarThickness,1/0);let o,a;const l=this._getAxisCount();if(e.grouped){const n=i?this._getStackCount(t):e.stackCount,c="flex"===r.barThickness?function(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}(t,e,r,n*l):function(t,e,n,r){const i=n.barThickness;let s,o;return Ut(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}(t,e,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(Xt(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+d;o=c.start+c.chunk*h+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(s,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[e.axis]||n[i].hidden||n[i].draw(this._ctx)}},BubbleController:class extends Zr{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,r){const i=super.parsePrimitiveData(t,e,n,r);for(let t=0;t<i.length;t++)i[t]._custom=this.resolveDataElementOptions(t+n).radius;return i}parseArrayData(t,e,n,r){const i=super.parseArrayData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=Xt(r[2],this.resolveDataElementOptions(t+n).radius)}return i}parseObjectData(t,e,n,r){const i=super.parseObjectData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=Xt(r&&r.r&&+r.r,this.resolveDataElementOptions(t+n).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,s=this.getParsed(t),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y),l=s._custom;return{label:n[t]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,r),c=s.axis,u=o.axis;for(let d=e;d<e+n;d++){const e=t[d],n=!i&&this.getParsed(d),h={},f=h[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=h[u]=i?o.getBasePixel():o.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=a||this.resolveDataElementOptions(d,e.active?"active":r),i&&(h.options.radius=0)),this.updateElement(e,d,h,r)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==e&&(r.radius=0),r.radius+=Xt(n&&n._custom,i),r}},DoughnutController:li,LineController:class extends Zr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=e,s=this.chart._animationsDisabled;let{start:o,count:a}=Ye(e,r,s);this._drawStart=o,this._drawCount=a,Qe(e)&&(o=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},t),this.updateElements(r,o,a,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,r),d=s.axis,h=o.axis,{spanGaps:f,segment:p}=this.options,g=Se(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,b=e+n,y=t.length;let x=e>0&&this.getParsed(e-1);for(let n=0;n<y;++n){const f=t[n],y=m?f:{};if(n<e||n>=b){y.skip=!0;continue}const v=this.getParsed(n),w=Ut(v[h]),k=y[d]=s.getPixelForValue(v[d],n),_=y[h]=i||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[h],n);y.skip=isNaN(k)||isNaN(_)||w,y.stop=n>0&&Math.abs(v[d]-x[d])>g,p&&(y.parsed=v,y.raw=l.data[n]),u&&(y.options=c||this.resolveDataElementOptions(n,f.active?"active":r)),m||this.updateElement(f,n,y,r),x=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends li{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:ci,RadarController:class extends Zr{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,r){return er.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":r),a=i.getPointPositionForValue(o,this.getParsed(o).r),l=s?i.xCenter:a.x,c=s?i.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,o,u,r)}}},ScatterController:class extends Zr{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,s=this.getParsed(t),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y);return{label:n[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,r=this.chart._animationsDisabled;let{start:i,count:s}=Ye(e,n,r);if(this._drawStart=i,this._drawCount=s,Qe(e)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=e;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),h=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=Se(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||"none"===r;let y=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),p=b?e:{},x=Ut(n[f]),v=p[h]=s.getPixelForValue(n[h],c),w=p[f]=i||x?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],c);p.skip=isNaN(v)||isNaN(w)||x,p.stop=c>0&&Math.abs(n[h]-y[h])>m,g&&(p.parsed=n,p.raw=l.data[c]),d&&(p.options=u||this.resolveDataElementOptions(c,e.active?"active":r)),b||this.updateElement(e,c,p,r),y=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!e.length)return r;const i=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,i,s)/2}}});function di(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hi{static override(t){Object.assign(hi.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return di()}parse(){return di()}format(){return di()}add(){return di()}diff(){return di()}startOf(){return di()}endOf(){return di()}}var fi=hi;function pi(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const o=a._reversePixels?ze:Fe;if(!r){const r=o(s,e,n);if(l){const{vScale:e}=i._cachedMeta,{_parsed:n}=t,s=n.slice(0,r.lo+1).reverse().findIndex(t=>!Ut(t[e.axis]));r.lo-=Math.max(0,s);const o=n.slice(r.hi).findIndex(t=>!Ut(t[e.axis]));r.hi+=Math.max(0,o)}return r}if(i._sharedOptions){const t=s[0],r="function"==typeof t.getRange&&t.getRange(e);if(r){const t=o(s,e,n-r),i=o(s,e,n+r);return{lo:t.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function gi(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let t=0,n=s.length;t<n;++t){const{index:n,data:a}=s[t],{lo:l,hi:c}=pi(s[t],e,o,i);for(let t=l;t<=c;++t){const e=a[t];e.skip||r(e,n,t)}}}function mi(t,e,n,r,i){const s=[];if(!i&&!t.isPointInArea(e))return s;return gi(t,n,e,function(n,o,a){(i||kn(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&s.push({element:n,datasetIndex:o,index:a})},!0),s}function bi(t,e,n,r,i,s){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){const i=e?Math.abs(t.x-r.x):0,s=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return gi(t,n,e,function(n,c,u){const d=n.inRange(e.x,e.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!(!!s||t.isPointInArea(h))&&!d)return;const f=a(e,h);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})}),o}function yi(t,e,n,r,i,s){return s||t.isPointInArea(e)?"r"!==n||r?bi(t,e,n,r,i,s):function(t,e,n,r){let i=[];return gi(t,n,e,function(t,n,s){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],r),{angle:l}=Te(t,{x:e.x,y:e.y});Re(l,o,a)&&i.push({element:t,datasetIndex:n,index:s})}),i}(t,e,n,i):[]}function xi(t,e,n,r,i){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return gi(t,n,e,(t,r,l)=>{t[o]&&t[o](e[n],i)&&(s.push({element:t,datasetIndex:r,index:l}),a=a||t.inRange(e.x,e.y,i))}),r&&!a?[]:s}var vi={evaluateInteractionItems:gi,modes:{index(t,e,n,r){const i=gr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?mi(t,i,s,r,o):yi(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,r){const i=gr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?mi(t,i,s,r,o):yi(t,i,s,!1,r,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,r)=>mi(t,gr(e,t),n.axis||"xy",r,n.includeInvisible||!1),nearest(t,e,n,r){const i=gr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return yi(t,i,s,n.intersect,r,o)},x:(t,e,n,r)=>xi(t,gr(e,t),"x",n.intersect,r),y:(t,e,n,r)=>xi(t,gr(e,t),"y",n.intersect,r)}};const wi=["left","top","right","bottom"];function ki(t,e){return t.filter(t=>t.pos===e)}function _i(t,e){return t.filter(t=>-1===wi.indexOf(t.pos)&&t.box.axis===e)}function Ci(t,e){return t.sort((t,n)=>{const r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function Mi(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:r,stackWeight:i}=n;if(!t||!wi.includes(r))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:o&&e.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:o&&e.availableHeight)}return n}function Si(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Ai(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Di(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Yt(i)){n.size&&(t[i]-=n.size);const e=r[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[i]+=n.size}s.getPadding&&Ai(o,s.getPadding());const a=Math.max(0,e.outerWidth-Si(o,t,"left","right")),l=Math.max(0,e.outerHeight-Si(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Pi(t,e){const n=e.maxPadding;function r(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{r[t]=Math.max(e[t],n[t])}),r}return r(t?["left","right"]:["top","bottom"])}function Ei(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Pi(a.horizontal,e));const{same:o,other:d}=Di(e,n,a,r);c|=o&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&Ei(i,e,n,r)||u}function Ti(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Oi(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const t=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=e.w*c,s=l.size||t.height;de(l.start)&&(o=l.start),t.fullSize?Ti(t,i.left,o,n.outerWidth-i.right-i.left,s):Ti(t,e.left+l.placed,o,r,s),l.start=o,l.placed+=r,o=t.bottom}else{const r=e.h*c,o=l.size||t.width;de(l.start)&&(s=l.start),t.fullSize?Ti(t,s,i.top,o,n.outerHeight-i.bottom-i.top):Ti(t,s,e.top+l.placed,o,r),l.start=s,l.placed+=r,s=t.right}}e.x=s,e.y=o}var $i={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=jn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=function(t){const e=function(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=i),e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}(t),n=Ci(e.filter(t=>t.box.fullSize),!0),r=Ci(ki(e,"left"),!0),i=Ci(ki(e,"right")),s=Ci(ki(e,"top"),!0),o=Ci(ki(e,"bottom")),a=_i(e,"x"),l=_i(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:ki(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;te(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const u=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);Ai(h,jn(r));const f=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),p=Mi(l.concat(c),d);Ei(a.fullSize,f,d,p),Ei(l,f,d,p),Ei(c,f,d,p)&&Ei(l,f,d,p),function(t){const e=t.maxPadding;function n(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Oi(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Oi(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},te(a.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Li{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class Ri extends Li{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Bi="$chartjs",Ii={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ji=t=>null===t||""===t;const Fi=!!xr&&{passive:!0};function zi(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Fi)}function Ni(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Wi(t,e,n){const r=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Ni(n.addedNodes,r),e=e&&!Ni(n.removedNodes,r);e&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function Vi(t,e,n){const r=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Ni(n.removedNodes,r),e=e&&!Ni(n.addedNodes,r);e&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Hi=new Map;let qi=0;function Ui(){const t=window.devicePixelRatio;t!==qi&&(qi=t,Hi.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Ki(t,e,n){const r=t.canvas,i=r&&ur(r);if(!i)return;const s=qe((t,e)=>{const r=i.clientWidth;n(t,e),r<i.clientWidth&&n()},window),o=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||s(n,r)});return o.observe(i),function(t,e){Hi.size||window.addEventListener("resize",Ui),Hi.set(t,e)}(t,s),o}function Yi(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Hi.delete(t),Hi.size||window.removeEventListener("resize",Ui)}(t)}function Qi(t,e,n){const r=t.canvas,i=qe(e=>{null!==t.ctx&&n(function(t,e){const n=Ii[t.type]||t.type,{x:r,y:i}=gr(t,e);return{type:n,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==i?i:null}}(e,t))},t);return function(t,e,n){t&&t.addEventListener(e,n,Fi)}(r,e,i),i}class Gi extends Li{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Bi]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ji(i)){const e=vr(t,"width");void 0!==e&&(t.width=e)}if(ji(r))if(""===t.style.height)t.height=t.width/(e||2);else{const e=vr(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Bi])return!1;const n=e[Bi].initial;["height","width"].forEach(t=>{const r=n[t];Ut(r)?e.removeAttribute(t):e.setAttribute(t,r)});const r=n.style||{};return Object.keys(r).forEach(t=>{e.style[t]=r[t]}),e.width=e.width,delete e[Bi],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),i={attach:Wi,detach:Vi,resize:Ki}[e]||Qi;r[e]=i(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:Yi,detach:Yi,resize:Yi}[e]||zi)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return br(t,e,n,r)}isAttached(t){const e=t&&ur(t);return!(!e||!e.isConnected)}}class Xi{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Se(this.x)&&Se(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(t=>{r[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),r}}function Ji(t,e){const n=t.options.ticks,r=function(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return function(t,e,n,r){let i,s=0,o=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===o&&(e.push(t[i]),s++,o=n[s*r])}(e,c,s,o/i),c;const u=function(t,e,n){const r=function(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}(t),i=e.length/n;if(!r)return Math.max(i,1);const s=function(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}(r);for(let t=0,e=s.length-1;t<e;t++){const e=s[t];if(e>i)return e}return Math.max(i,1)}(s,e,i);if(o>0){let t,n;const r=o>1?Math.round((l-a)/(o-1)):null;for(Zi(e,c,u,Ut(r)?0:a-r,a),t=0,n=o-1;t<n;t++)Zi(e,c,u,s[t],s[t+1]);return Zi(e,c,u,l,Ut(r)?e.length:l+r),c}return Zi(e,c,u),c}function Zi(t,e,n,r,i){const s=Xt(r,0),o=Math.min(Xt(i,t.length),t.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(e.push(t[l]),u++,c=Math.round(s+u*n))}const ts=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,es=(t,e)=>Math.min(e||t,t);function ns(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function rs(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,o-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function is(t){return t.drawTicks?t.tickLength:0}function ss(t,e){if(!t.display)return 0;const n=Fn(t.font,e),r=jn(t.padding);return(Kt(t.text)?t.text.length:1)*n.lineHeight+r.height}function os(t,e,n){let r=Ue(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class as extends Xi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=Gt(t,Number.POSITIVE_INFINITY),e=Gt(e,Number.NEGATIVE_INFINITY),n=Gt(n,Number.POSITIVE_INFINITY),r=Gt(r,Number.NEGATIVE_INFINITY),{min:Gt(t,n),max:Gt(e,r),minDefined:Qt(t),maxDefined:Qt(e)}}getMinMax(t){let e,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)e=o[a].controller.getMinMax(this,t),i||(n=Math.min(n,e.min)),s||(r=Math.max(r,e.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Gt(n,Gt(r,n)),max:Gt(r,Gt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zt(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:r,max:i}=t,s=Jt(e,(i-r)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?ns(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Ji(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zt(this.options.afterUpdate,[this])}beforeSetDimensions(){Zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Zt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],i.label=Zt(e.callback,[i.value,n,t],this)}afterTickToLabelConversion(){Zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=es(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,i=e.maxRotation;let s,o,a,l=r;if(!this._isVisible()||!e.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=Be(this.chart.width-u,0,this.maxWidth);s=t.offset?this.maxWidth/n:h/(n-1),u+6>s&&(s=h/(n-(t.offset?.5:1)),o=this.maxHeight-is(t.grid)-e.padding-ss(t.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=Pe(Math.min(Math.asin(Be((c.highest.height+6)/s,-1,1)),Math.asin(Be(o/a,-1,1))-Math.asin(Be(d/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=ss(r,e.options.font);if(o?(t.width=this.maxWidth,t.height=is(i)+s):(t.height=this.maxHeight,t.width=is(i)+s),n.display&&this.ticks.length){const{first:e,last:r,widest:i,highest:s}=this._getLabelSizes(),a=2*n.padding,l=De(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const e=n.mirror?0:u*i.width+c*s.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*i.width+u*s.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,r,u,c)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:i,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=r*t.width,d=n*e.height):(u=n*t.height,d=r*e.width):"start"===i?d=e.width:"end"===i?u=t.width:"inner"!==i&&(u=t.width/2,d=e.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let n=e.height/2,r=t.height/2;"start"===i?(n=0,r=t.height):"end"===i&&(n=e.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Ut(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=ns(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:r,_longestTextCache:i}=this,s=[],o=[],a=Math.floor(e/es(e,n));let l,c,u,d,h,f,p,g,m,b,y,x=0,v=0;for(l=0;l<e;l+=a){if(d=t[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,p=i[f]=i[f]||{data:{},gc:[]},g=h.lineHeight,m=b=0,Ut(d)||Kt(d)){if(Kt(d))for(c=0,u=d.length;c<u;++c)y=d[c],Ut(y)||Kt(y)||(m=mn(r,p.data,p.gc,m,y),b+=g)}else m=mn(r,p.data,p.gc,m,d),b=g;s.push(m),o.push(b),x=Math.max(m,x),v=Math.max(b,v)}!function(t,e){te(t,t=>{const n=t.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete t.data[n[i]];n.splice(0,r)}})}(i,e);const w=s.indexOf(x),k=o.indexOf(v),_=t=>({width:s[t]||0,height:o[t]||0});return{first:_(0),last:_(e-1),widest:_(w),highest:_(k),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Be(this._alignToPixels?yn(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Nn(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Nn(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=De(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),s=t.autoSkipPadding||0,o=i?i.widest.width+s:0,a=i?i.highest.height+s:0;return this.isHorizontal()?a*n>o*r?o/n:a/r:a*r<o*n?a/n:o/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:o}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=is(i),d=[],h=o.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,g=function(t){return yn(n,t,f)};let m,b,y,x,v,w,k,_,C,M,S,A;if("top"===s)m=g(this.bottom),w=this.bottom-u,_=m-p,M=g(t.top)+p,A=t.bottom;else if("bottom"===s)m=g(this.top),M=t.top,A=g(t.bottom)-p,w=m+p,_=this.top+u;else if("left"===s)m=g(this.right),v=this.right-u,k=m-p,C=g(t.left)+p,S=t.right;else if("right"===s)m=g(this.left),C=t.left,S=g(t.right)-p,v=m+p,k=this.left+u;else if("x"===e){if("center"===s)m=g((t.top+t.bottom)/2+.5);else if(Yt(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}M=t.top,A=t.bottom,w=m+p,_=w+u}else if("y"===e){if("center"===s)m=g((t.left+t.right)/2);else if(Yt(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}v=m-p,k=v-u,C=t.left,S=t.right}const D=Xt(r.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/D));for(b=0;b<c;b+=P){const t=this.getContext(b),e=i.setContext(t),r=o.setContext(t),s=e.lineWidth,c=e.color,u=r.dash||[],h=r.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=rs(this,b,a),void 0!==y&&(x=yn(n,y,s),l?v=k=C=S=x:w=_=M=A=x,d.push({tx1:v,ty1:w,tx2:k,ty2:_,x1:C,y1:M,x2:S,y2:A,width:s,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,d}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,d=is(n.grid),h=d+c,f=u?-c:h,p=-De(this.labelRotation),g=[];let m,b,y,x,v,w,k,_,C,M,S,A,D="middle";if("top"===r)w=this.bottom-f,k=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,k=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(d);k=t.textAlign,v=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(d);k=t.textAlign,v=t.x}else if("x"===e){if("center"===r)w=(t.top+t.bottom)/2+h;else if(Yt(r)){const t=Object.keys(r)[0],e=r[t];w=this.chart.scales[t].getPixelForValue(e)+h}k=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)v=(t.left+t.right)/2-h;else if(Yt(r)){const t=Object.keys(r)[0],e=r[t];v=this.chart.scales[t].getPixelForValue(e)}k=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===a?D="top":"end"===a&&(D="bottom"));const P=this._getLabelSizes();for(m=0,b=o.length;m<b;++m){y=o[m],x=y.label;const t=i.setContext(this.getContext(m));_=this.getPixelForTick(m)+i.labelOffset,C=this._resolveTickFontOptions(m),M=C.lineHeight,S=Kt(x)?x.length:1;const e=S/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let d,h=k;if(s?(v=_,"inner"===k&&(h=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),A="top"===r?"near"===l||0!==p?-S*M+M/2:"center"===l?-P.highest.height/2-e*M+M:-P.highest.height+M/2:"near"===l||0!==p?M/2:"center"===l?P.highest.height/2-e*M:P.highest.height-S*M,u&&(A*=-1),0===p||t.showLabelBackdrop||(v+=M/2*Math.sin(p))):(w=_,A=(1-S)*M/2),t.showLabelBackdrop){const e=jn(t.backdropPadding),n=P.heights[m],r=P.widths[m];let i=A-e.top,s=0-e.left;switch(D){case"middle":i-=n/2;break;case"bottom":i-=n}switch(k){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":m===b-1?s-=r:m>0&&(s-=r/2)}d={left:s,top:i,width:r+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:x,font:C,textOffset:A,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:D,translation:[v,w],backdrop:d}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-De(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=t+i,o=this._getLabelSizes().widest.width;let a,l;return"left"===e?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===e?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:i,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,s;const o=(t,e,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(i=0,s=r.length;i<s;++i){const t=r[i];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=yn(t,this.left,s)-s/2,c=yn(t,this.right,o)+o/2,u=d=a):(u=yn(t,this.top,s)-s/2,d=yn(t,this.bottom,o)+o/2,l=c=a),e.save(),e.lineWidth=i.width,e.strokeStyle=i.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&_n(e,n);const r=this.getLabelItems(t);for(const t of r){const n=t.options,r=t.font;Pn(e,t.label,0,t.textOffset,r,n)}n&&Cn(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const i=Fn(n.font),s=jn(n.padding),o=n.align;let a=i.lineHeight/2;"bottom"===e||"center"===e||Yt(e)?(a+=s.bottom,Kt(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d,h,f,p=0;const g=o-i,m=a-s;if(t.isHorizontal()){if(h=Ke(r,s,a),Yt(n)){const t=Object.keys(n)[0],r=n[t];f=u[t].getPixelForValue(r)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:ts(t,n,e);d=a-s}else{if(Yt(n)){const t=Object.keys(n)[0],r=n[t];h=u[t].getPixelForValue(r)-m+e}else h="center"===n?(c.left+c.right)/2-m+e:ts(t,n,e);f=Ke(r,o,i),p="left"===n?-xe:xe}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,a,e,o);Pn(t,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:os(o,e,r),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Xt(t.grid&&t.grid.z,-1),r=Xt(t.border&&t.border.z,0);return this._isVisible()&&this.draw===as.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=e.length;i<s;++i){const s=e[i];s[n]!==this.id||t&&s.type!==t||r.push(s)}return r}_resolveTickFontOptions(t){return Fn(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ls{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const r=this.items,i=t.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,function(t,e,n){const r=se(Object.create(null),[n?gn.get(n):{},gn.get(e),t.defaults]);gn.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");gn.route(s,i,l,a)})}(e,t.defaultRoutes);t.descriptors&&gn.describe(e,t.descriptors)}(t,s,n),this.override&&gn.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in gn[r]&&(delete gn[r][n],this.override&&delete un[n])}}class cs{constructor(){this.controllers=new ls(Zr,"datasets",!0),this.elements=new ls(Xi,"elements"),this.plugins=new ls(Object,"plugins"),this.scales=new ls(as,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(e=>{const r=n||this._getRegistryForType(e);n||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):te(e,e=>{const r=n||this._getRegistryForType(e);this._exec(t,r,e)})})}_exec(t,e,n){const r=ue(t);Zt(n["before"+r],[],n),e[t](n),Zt(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var us=new cs;class ds{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),s=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,r){r=r||{};for(const i of t){const t=i.plugin;if(!1===Zt(t[n],[e,r,i.options],t)&&r.cancelable)return!1}return!0}invalidate(){Ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=Xt(n.options&&n.options.plugins,{}),i=function(t){const e={},n=[],r=Object.keys(us.plugins.items);for(let t=0;t<r.length;t++)n.push(us.getPlugin(r[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const r=i[t];-1===n.indexOf(r)&&(n.push(r),e[r.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==r||e?function(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const e=a.id,l=hs(r[e],i);null!==l&&s.push({plugin:a,options:fs(t.config,{plugin:a,local:n[e]},l,o)})}return s}(t,i,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function hs(t,e){return e||!1!==t?!0===t?{}:t:null}function fs(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ps(t,e){const n=gn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function gs(t){if("x"===t||"y"===t||"r"===t)return t}function ms(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function bs(t,...e){if(gs(t))return t;for(const n of e){const e=n.axis||ms(n.position)||t.length>1&&gs(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ys(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function xs(t,e){const n=un[t.type]||{scales:{}},r=e.scales||{},i=ps(t.type,e),s=Object.create(null);return Object.keys(r).forEach(e=>{const o=r[e];if(!Yt(o))return console.error(`Invalid scale configuration for scale: ${e}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=bs(e,o,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return ys(t,"x",n[0])||ys(t,"y",n[0])}return{}}(e,t),gn.scales[o.type]),l=function(t,e){return t===e?"_index_":"_value_"}(a,i),c=n.scales||{};s[e]=oe(Object.create(null),[{axis:a},o,c[a],c[l]])}),t.data.datasets.forEach(n=>{const i=n.type||t.type,o=n.indexAxis||ps(i,e),a=(un[i]||{}).scales||{};Object.keys(a).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,o),i=n[e+"AxisID"]||e;s[i]=s[i]||Object.create(null),oe(s[i],[{axis:e},r[i],a[t]])})}),Object.keys(s).forEach(t=>{const e=s[t];oe(e,[gn.scales[e.type],gn.scale])}),s}function vs(t){const e=t.options||(t.options={});e.plugins=Xt(e.plugins,{}),e.scales=xs(t,e)}function ws(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const ks=new Map,_s=new Set;function Cs(t,e){let n=ks.get(t);return n||(n=e(),ks.set(t,n),_s.add(n)),n}const Ms=(t,e,n)=>{const r=ce(e,n);void 0!==r&&t.add(r)};class Ss{constructor(t){this._config=function(t){return(t=t||{}).data=ws(t.data),vs(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ws(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),vs(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Cs(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Cs(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Cs(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return Cs(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:i}=this,s=this._cachedScopes(t,n),o=s.get(e);if(o)return o;const a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>Ms(a,t,e))),e.forEach(t=>Ms(a,r,t)),e.forEach(t=>Ms(a,un[i]||{},t)),e.forEach(t=>Ms(a,gn,t)),e.forEach(t=>Ms(a,dn,t))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),_s.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,un[e]||{},gn.datasets[e]||{},{type:e},gn,dn]}resolveNamedOptions(t,e,n,r=[""]){const i={$shared:!0},{resolver:s,subPrefixes:o}=As(this._resolverCache,t,r);let a=s;if(function(t,e){const{isScriptable:n,isIndexable:r}=Hn(t);for(const i of e){const e=n(i),s=r(i),o=(s||e)&&t[i];if(e&&(he(o)||Ds(o))||s&&Kt(o))return!0}return!1}(s,e)){i.$shared=!1;a=Vn(s,n=he(n)?n():n,this.createResolver(t,n,o))}for(const t of e)i[t]=a[t];return i}createResolver(t,e,n=[""],r){const{resolver:i}=As(this._resolverCache,t,n);return Yt(e)?Vn(i,e,void 0,r):i}}function As(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:Wn(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},r.set(i,s)}return s}const Ds=t=>Yt(t)&&Object.getOwnPropertyNames(t).some(e=>he(t[e]));const Ps=["top","bottom","left","right","chartArea"];function Es(t,e){return"top"===t||"bottom"===t||-1===Ps.indexOf(t)&&"x"===e}function Ts(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Os(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Zt(n&&n.onComplete,[t],e)}function $s(t){const e=t.chart,n=e.options.animation;Zt(n&&n.onProgress,[t],e)}function Ls(t){return cr()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Rs={},Bs=t=>{const e=Ls(t);return Object.values(Rs).filter(t=>t.canvas===e).pop()};function Is(t,e,n){const r=Object.keys(t);for(const i of r){const r=+i;if(r>=e){const s=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=s)}}}class js{static defaults=gn;static instances=Rs;static overrides=un;static registry=us;static version="4.5.0";static getChart=Bs;static register(...t){us.add(...t),Fs()}static unregister(...t){us.remove(...t),Fs()}constructor(t,e){const n=this.config=new Ss(e),r=Ls(t),i=Bs(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!cr()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Ri:Gi}(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=qt(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ds,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}(t=>this.update(t),s.resizeDelay||0),this._dataChanges=[],Rs[this.id]=this,o&&a?(Ir.listen(this,"complete",Os),Ir.listen(this,"progress",$s),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:i}=this;return Ut(t)?e&&i?i:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return us}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yr(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xn(this.canvas,this.ctx),this}stop(){return Ir.stop(this),this}resize(t,e){Ir.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,t,e,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,yr(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Zt(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){te(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let i=[];e&&(i=i.concat(Object.keys(e).map(t=>{const n=e[t],r=bs(t,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}}))),te(i,e=>{const i=e.options,s=i.id,o=bs(s,i),a=Xt(i.type,e.dtype);void 0!==i.position&&Es(i.position,o)===Es(e.dposition)||(i.position=e.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(us.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,t)}),te(r,(t,e)=>{t||delete n[e]}),te(n,t=>{$i.configure(this,t,t.options),$i.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Ts("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const r=e[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||ps(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const e=us.getController(s),{datasetElementType:r,dataElementType:o}=gn.datasets[s];Object.assign(e,{dataElementType:us.getElement(o),datasetElementType:r&&us.getElement(r)}),i.controller=new e(this,n),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){te(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(n),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||te(i,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ts("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){te(this.scales,t=>{$i.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);fe(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of e){Is(t,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),r=n(0);for(let t=1;t<e;t++)if(!fe(r,n(t)))return;return Array.from(r).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;$i.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],te(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,he(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ir.has(this)?this.attached&&!Ir.running(this)&&Ir.start(this):(this.draw(),Os({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,i;for(r=0,i=e.length;r<i;++r){const i=e[r];t&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},r=Rr(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&_n(e,r),t.controller.draw(),r&&Cn(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return kn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const i=vi.modes[e];return"function"==typeof i?i(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(t=>t&&t._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Nn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",i=this.getDatasetMeta(t),s=i.controller._resolveAnimations(void 0,r);de(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(i,{visible:n}),this.update(e=>e.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ir.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),xn(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Rs[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};te(this.options.events,t=>n(t,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(n,r)=>{t[n]&&(e.removeEventListener(this,n,r),delete t[n])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():s()}unbindEvents(){te(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},te(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let i,s,o,a;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){s=t[o];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}});!ee(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const r=this.options.hover,i=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),s=i(e,t),o=n?t:i(t,e);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:i}=this,s=e,o=this._getActiveElements(t,r,n,s),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,Zt(i.onHover,[t,o,this],this),a&&Zt(i.onClick,[t,o,this],this));const c=!ee(o,r);return(c||e)&&(this._active=o,this._updateHoverStyles(o,r,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}function Fs(){return te(js.instances,t=>t._plugins.invalidate())}function zs(t,e,n,r){const i=Rn(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-e)/2,o=Math.min(s,r*e/2),a=t=>{const e=(n-Math.min(s,t))*r/2;return Be(t,0,Math.min(s,e))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Be(i.innerStart,0,o),innerEnd:Be(i.innerEnd,0,o)}}function Ns(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Ws(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const t=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(p-(0!==t?p*t/(t+r):p))/2}const g=(p-Math.max(.001,p*d-n/pe)/d)/2,m=l+g+f,b=i-g-f,{outerStart:y,outerEnd:x,innerStart:v,innerEnd:w}=zs(e,h,d,b-m),k=d-y,_=d-x,C=m+y/k,M=b-x/_,S=h+v,A=h+w,D=m+v/S,P=b-w/A;if(t.beginPath(),s){const e=(C+M)/2;if(t.arc(o,a,d,C,e),t.arc(o,a,d,e,M),x>0){const e=Ns(_,M,o,a);t.arc(e.x,e.y,x,M,b+xe)}const n=Ns(A,b,o,a);if(t.lineTo(n.x,n.y),w>0){const e=Ns(A,P,o,a);t.arc(e.x,e.y,w,b+xe,P+Math.PI)}const r=(b-w/h+(m+v/h))/2;if(t.arc(o,a,h,b-w/h,r,!0),t.arc(o,a,h,r,m+v/h,!0),v>0){const e=Ns(S,D,o,a);t.arc(e.x,e.y,v,D+Math.PI,m-xe)}const i=Ns(k,m,o,a);if(t.lineTo(i.x,i.y),y>0){const e=Ns(k,C,o,a);t.arc(e.x,e.y,y,m-xe,C)}}else{t.moveTo(o,a);const e=Math.cos(C)*d+o,n=Math.sin(C)*d+a;t.lineTo(e,n);const r=Math.cos(M)*d+o,i=Math.sin(M)*d+a;t.lineTo(r,i)}t.closePath()}function Vs(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=h,p?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let g=e.endAngle;if(s){Ws(t,e,n,r,g,i);for(let e=0;e<s;++e)t.stroke();isNaN(a)||(g=o+(a%ge||ge))}p&&function(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+xe,r-xe),t.closePath(),t.clip()}(t,e,g),l.selfJoin&&g-o>=pe&&0===f&&"miter"!==u&&function(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,Le(r-n));if(t.beginPath(),t.arc(i,s,o-c/2,r+d/2,n-d/2),a>0){const e=Math.min(c/a,Le(r-n));t.arc(i,s,a+c/2,n-e/2,r+e/2,!0)}else{const e=Math.min(c/2,o*Le(r-n));if("round"===u)t.arc(i,s,e,n-pe/2,r+pe/2,!0);else if("bevel"===u){const o=2*e*e,a=-o*Math.cos(n+pe/2)+i,l=-o*Math.sin(n+pe/2)+s,c=o*Math.cos(r+pe/2)+i,u=o*Math.sin(r+pe/2)+s;t.lineTo(a,l),t.lineTo(c,u)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,g),s||(Ws(t,e,n,r,g,i),t.stroke())}function Hs(t,e,n=e){t.lineCap=Xt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Xt(n.borderDash,e.borderDash)),t.lineDashOffset=Xt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Xt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Xt(n.borderWidth,e.borderWidth),t.strokeStyle=Xt(n.borderColor,e.borderColor)}function qs(t,e,n){t.lineTo(n.x,n.y)}function Us(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function Ks(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Us(i,n,r),u=function(t){return t.stepped?Mn:t.tension||"monotone"===t.cubicInterpolationMode?Sn:qs}(s);let d,h,f,{move:p=!0,reverse:g}=r||{};for(d=0;d<=c;++d)h=i[(a+(g?c-d:d))%o],h.skip||(p?(t.moveTo(h.x,h.y),p=!1):u(t,f,h,g,s.stepped),f=h);return l&&(h=i[(a+(g?c:0))%o],u(t,f,h,g,s.stepped)),!!l}function Ys(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=Us(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,p,g,m=0,b=0;const y=t=>(o+(c?a-t:t))%s,x=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(d=i[y(0)],t.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=i[y(u)],d.skip)continue;const e=d.x,n=d.y,r=0|e;r===h?(n<f?f=n:n>p&&(p=n),m=(b*m+e)/++b):(x(),t.lineTo(e,n),h=r,b=0,f=p=n),g=n}x()}function Qs(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?Ys:Ks}const Gs="function"==typeof Path2D;function Xs(t,e,n,r){Gs&&!e.options.segment?function(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),Hs(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){const{segments:i,options:s}=e,o=Qs(e);for(const a of i)Hs(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}(t,e,n,r)}class Js extends Xi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;lr(this._points,n,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=function(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}(n,i,s,r);return Tr(t,!0===r?[{start:o,end:a,loop:s}]:function(t,e,n,r){const i=t.length,s=[];let o,a=e,l=t[e];for(o=e+1;o<=n;++o){const n=t[o%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:e%i,end:(o-1)%i,loop:r}),e=a=n.stop?o:null):(a=o,l.skip&&(e=o)),l=n}return null!==a&&s.push({start:e%i,end:a%i,loop:r}),s}(n,o,a<o?a+i:a,!!t._fullLoop&&0===o&&a===i-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,r=t[e],i=this.points,s=Er(this,{property:e,start:r,end:r});if(!s.length)return;const o=[],a=function(t){return t.stepped?kr:t.tension||"monotone"===t.cubicInterpolationMode?_r:wr}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],d=i[c],h=i[u];if(d===h){o.push(d);continue}const f=a(d,h,Math.abs((r-d[e])/(h[e]-d[e])),n.stepped);f[e]=t[e],o.push(f)}return 1===o.length?o[0]:o}pathSegment(t,e,n){return Qs(this)(t,this,e,n)}path(t,e,n){const r=this.segments,i=Qs(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const o of r)s&=i(t,this,o,{start:e,end:e+n-1});return!!s}draw(t,e,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),Xs(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Zs(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}function to(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function eo(t,e,n,r){return t?0:Be(e,n,r)}function no(t){const e=to(t),n=e.right-e.left,r=e.bottom-e.top,i=function(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=Bn(r);return{t:eo(i.top,s.top,0,n),r:eo(i.right,s.right,0,e),b:eo(i.bottom,s.bottom,0,n),l:eo(i.left,s.left,0,e)}}(t,n/2,r/2),s=function(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=In(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Yt(i);return{topLeft:eo(!l||a.top||a.left,s.topLeft,0,o),topRight:eo(!l||a.top||a.right,s.topRight,0,o),bottomLeft:eo(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:eo(!l||a.bottom||a.right,s.bottomRight,0,o)}}(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function ro(t,e,n,r){const i=null===e,s=null===n,o=t&&!(i&&s)&&to(t,r);return o&&(i||Ie(e,o.left,o.right))&&(s||Ie(n,o.top,o.bottom))}function io(t,e){t.rect(e.x,e.y,e.w,e.h)}function so(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}var oo=Object.freeze({__proto__:null,ArcElement:class extends Xi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=Te(r,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=Xt(u,a-o),f=Re(i,o,a)&&o!==a,p=h>=ge||f,g=Ie(s,l+d,c+d);return p&&g}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(s+o+l+a)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/4,i=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ge?Math.floor(n/ge):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);const a=r*(1-Math.sin(Math.min(pe,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Ws(t,e,n,r,l,i);for(let e=0;e<s;++e)t.fill();isNaN(a)||(l=o+(a%ge||ge))}Ws(t,e,n,r,l,i),t.fill()}(t,this,a,i,s),Vs(t,this,a,i,s),t.restore()}},BarElement:class extends Xi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=no(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?En:io;var a;t.save(),s.w===i.w&&s.h===i.h||(t.beginPath(),o(t,so(s,e,i)),t.clip(),o(t,so(i,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,so(i,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return ro(this,t,e,n)}inXRange(t,e){return ro(this,t,null,e)}inYRange(t,e){return ro(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+r)/2:e,y:i?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:Js,PointElement:class extends Xi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(e-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return Zs(this,t,"x",e)}inYRange(t,e){return Zs(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!kn(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,vn(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const ao=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],lo=ao.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function co(t){return ao[t%ao.length]}function uo(t){return lo[t%lo.length]}function ho(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof li?e=function(t,e){return t.backgroundColor=t.data.map(()=>co(e++)),e}(n,e):i instanceof ci?e=function(t,e){return t.backgroundColor=t.data.map(()=>uo(e++)),e}(n,e):i&&(e=function(t,e){return t.borderColor=co(e),t.backgroundColor=uo(e),++e}(n,e))}}function fo(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var po={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i,o=fo(r)||(a=i)&&(a.borderColor||a.backgroundColor)||s&&fo(s)||"rgba(0,0,0,0.1)"!==gn.borderColor||"rgba(0,0,0,0.1)"!==gn.backgroundColor;var a;if(!n.forceOverride&&o)return;const l=ho(t);r.forEach(l)}};function go(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function mo(t){t.data.datasets.forEach(t=>{go(t)})}var bo={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void mo(t);const r=t.width;t.data.datasets.forEach((e,i)=>{const{_data:s,indexAxis:o}=e,a=t.getDatasetMeta(i),l=s||e.data;if("y"===zn([o,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=t.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:u,count:d}=function(t,e){const n=e.length;let r,i=0;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=Be(Fe(e,s.axis,o).lo,0,n-1)),r=c?Be(Fe(e,s.axis,a).hi+1,i,n)-i:n-i,{start:i,count:r}}(a,l);if(d<=(n.threshold||4*r))return void go(e);let h;switch(Ut(s)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":h=function(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u,d,h,f,p,g=e;for(o[l++]=t[g],u=0;u<s-2;u++){let r,i=0,s=0;const c=Math.floor((u+1)*a)+1+e,m=Math.min(Math.floor((u+2)*a)+1,n)+e,b=m-c;for(r=c;r<m;r++)i+=t[r].x,s+=t[r].y;i/=b,s/=b;const y=Math.floor(u*a)+1+e,x=Math.min(Math.floor((u+1)*a)+1,n)+e,{x:v,y:w}=t[g];for(h=f=-1,r=y;r<x;r++)f=.5*Math.abs((v-i)*(t[r].y-w)-(v-t[r].x)*(s-w)),f>h&&(h=f,d=t[r],p=r);o[l++]=d,g=p}return o[l++]=t[c],o}(l,u,d,r,n);break;case"min-max":h=function(t,e,n,r){let i,s,o,a,l,c,u,d,h,f,p=0,g=0;const m=[],b=e+n-1,y=t[e].x,x=t[b].x-y;for(i=e;i<e+n;++i){s=t[i],o=(s.x-y)/x*r,a=s.y;const e=0|o;if(e===l)a<h?(h=a,c=i):a>f&&(f=a,u=i),p=(g*p+s.x)/++g;else{const n=i-1;if(!Ut(c)&&!Ut(u)){const e=Math.min(c,u),r=Math.max(c,u);e!==d&&e!==n&&m.push({...t[e],x:p}),r!==d&&r!==n&&m.push({...t[r],x:p})}i>0&&n!==d&&m.push(t[n]),m.push(s),l=e,g=0,h=f=a,c=u=d=i}}return m}(l,u,d,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=h})},destroy(t){mo(t)}};function yo(t,e,n,r){if(r)return;let i=e[t],s=n[t];return"angle"===t&&(i=Le(i),s=Le(s)),{property:t,start:i,end:s}}function xo(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function vo(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function wo(t,e){let n=[],r=!1;return Kt(t)?(r=!0,n=t):n=function(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:t,end:e})=>{e=xo(t,e,i);const o=i[t],a=i[e];null!==r?(s.push({x:o.x,y:r}),s.push({x:a.x,y:r})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:a.y}))}),s}(t,e),n.length?new Js({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function ko(t){return t&&!1!==t.fill}function _o(t,e,n){let r=t[e].fill;const i=[e];let s;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!Qt(r))return r;if(s=t[r],!s)return!1;if(s.visible)return r;i.push(r),r=s.fill}return!1}function Co(t,e,n){const r=function(t){const e=t.options,n=e.fill;let r=Xt(n&&n.target,n);void 0===r&&(r=!!e.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(t);if(Yt(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return Qt(i)&&Math.floor(i)===i?function(t,e,n,r){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=r)return!1;return n}(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Mo(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=So(s,e,"x");if(!(!l||o&&a))if(o)r.unshift(l);else if(t.push(l),!a)break}t.push(...r)}function So(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let t=0;t<s.length;t++){const e=s[t],r=o[e.start][n],c=o[e.end][n];if(Ie(i,r,c)){a=i===r,l=i===c;break}}return{first:a,last:l,point:r}}class Ao{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:i,radius:s}=this;return e=e||{start:0,end:ge},t.arc(r,i,s,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,i=t.angle;return{x:e+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function Do(t){const{chart:e,fill:n,line:r}=t;if(Qt(n))return function(t,e){const n=t.getDatasetMeta(e),r=n&&t.isDatasetVisible(e);return r?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=function(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let t=0;t<r.length;t++){const i=r[t];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}(e,n);a.push(wo({x:null,y:e.bottom},r));for(let t=0;t<s.length;t++){const e=s[t];for(let t=e.start;t<=e.end;t++)Mo(i,o[t],a)}return new Js({points:i,options:{}})}(t);if("shape"===n)return!0;const i=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=function(t,e,n){let r;return r="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Yt(t)?t.value:e.getBaseValue(),r}(n,e,s),a=[];if(r.grid.circular){const t=e.getPointPositionForValue(0,s);return new Ao({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(o)})}for(let t=0;t<i;++t)a.push(e.getPointPositionForValue(t,o));return a}(t);return function(t){const{scale:e={},fill:n}=t,r=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Yt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(Qt(r)){const t=e.isHorizontal();return{x:t?r:null,y:t?null:r}}return null}(t)}(t);return i instanceof Ao?i:wo(i,r)}function Po(t,e,n){const r=Do(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},p=i.getDatasetMeta(s),g=Rr(i,p);r&&o.points.length&&(_n(t,n),function(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&("x"===c?(Eo(t,r,o.top),Oo(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Eo(t,r,o.bottom)):"y"===c&&(To(t,r,o.left),Oo(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),To(t,r,o.right),u=i));Oo(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}(t,{line:o,target:r,above:h,below:f,area:n,scale:a,axis:l,clip:g}),Cn(t))}function Eo(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:r,end:l}=a,c=i[r],u=i[xo(r,l,i)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function To(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:r,end:l}=a,c=i[r],u=i[xo(r,l,i)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(n,c.y),t.lineTo(c.x,c.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,u.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Oo(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=function(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const t of r){let{start:r,end:a}=t;a=xo(r,a,i);const l=yo(n,i[r],i[a],t.loop);if(!e.segments){o.push({source:t,target:l,start:i[r],end:i[a]});continue}const c=Er(e,l);for(const e of c){const r=yo(n,s[e.start],s[e.end],e.loop),a=Pr(t,i,r);for(const t of a)o.push({source:t,target:e,start:{[n]:vo(l,r,"start",Math.max)},end:{[n]:vo(l,r,"end",Math.min)}})}}return o}(n,r,i);for(const{source:e,target:c,start:u,end:d}of l){const{style:{backgroundColor:l=s}={}}=e,h=!0!==r;t.save(),t.fillStyle=l,$o(t,o,a,h&&yo(i,u,d)),t.beginPath();const f=!!n.pathSegment(t,e);let p;if(h){f?t.closePath():Lo(t,r,d,i);const e=!!r.pathSegment(t,c,{move:f,reverse:!0});p=f&&e,p||Lo(t,r,u,i)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function $o(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if("x"===s||"y"===s){let e,r,l,c;"x"===s?(e=o,r=i.top,l=a,c=i.bottom):(e=i.left,r=o,l=i.right,c=a),t.beginPath(),n&&(e=Math.max(e,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),t.rect(e,r,l-e,c-r),t.clip()}}function Lo(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Ro={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Js&&(l={visible:t.isDatasetVisible(o),index:o,fill:Co(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],l&&!1!==l.fill&&(l.fill=_o(i,o,n.propagate))},beforeDraw(t,e,n){const r="beforeDraw"===n.drawTime,i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&(n.line.updateControlPoints(s,n.axis),r&&n.fill&&Po(t.ctx,n,s))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=t.getSortedVisibleDatasetMetas();for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;ko(n)&&Po(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;ko(r)&&"beforeDatasetDraw"===n.drawTime&&Po(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Bo=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}};class Io extends Xi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Zt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=Fn(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=Bo(n,i);let l,c;e.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,r,o,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+o;let u=t;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((t,f)=>{const p=n+e/2+i.measureText(t.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),a[f]={left:0,top:h,row:d,width:p,height:r},l[l.length-1]+=p+o}),u}_fitCols(t,e,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-t;let u=o,d=0,h=0,f=0,p=0;return this.legendItems.forEach((t,s)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,r,i){const s=function(t,e,n,r){let i=t.text;i&&"string"!=typeof i&&(i=i.reduce((t,e)=>t.length>e.length?t:e));return e+n.size/2+r.measureText(i).width}(r,t,e,n),o=function(t,e,n){let r=t;"string"!=typeof e.text&&(r=jo(e,n));return r}(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}(n,e,i,t,r);s>0&&h+m+2*o>c&&(u+=d+o,l.push({width:d,height:h}),f+=d+o,p++,d=h=0),a[s]={left:f,top:h,col:p,width:g,height:m},d=Math.max(d,g),h+=m+o}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:i}}=this,s=Cr(i,this.left,this.width);if(this.isHorizontal()){let i=0,o=Ke(n,this.left+r,this.right-this.lineWidths[i]);for(const a of e)i!==a.row&&(i=a.row,o=Ke(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+t+r,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+r}else{let i=0,o=Ke(n,this.top+t+r,this.bottom-this.columnSizes[i].height);for(const a of e)a.col!==i&&(i=a.col,o=Ke(n,this.top+t+r,this.bottom-this.columnSizes[i].height)),a.top=o,a.left+=this.left+r,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;_n(t,this),this._draw(),Cn(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:i,labels:s}=t,o=gn.color,a=Cr(t.rtl,this.left,this.width),l=Fn(s.font),{padding:c}=s,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Bo(s,u),m=this.isHorizontal(),b=this._computeTitleHeight();h=m?{x:Ke(i,this.left+c,this.right-n[0]),y:this.top+c+b,line:0}:{x:this.left+c,y:Ke(i,this.top+b+c,this.bottom-e[0].height),line:0},Mr(this.ctx,t.textDirection);const y=g+c;this.legendItems.forEach((x,v)=>{r.strokeStyle=x.fontColor,r.fillStyle=x.fontColor;const w=r.measureText(x.text).width,k=a.textAlign(x.textAlign||(x.textAlign=s.textAlign)),_=f+d+w;let C=h.x,M=h.y;a.setWidth(this.width),m?v>0&&C+_+c>this.right&&(M=h.y+=y,h.line++,C=h.x=Ke(i,this.left+c,this.right-n[h.line])):v>0&&M+y>this.bottom&&(C=h.x=C+e[h.line].width+c,h.line++,M=h.y=Ke(i,this.top+b+c,this.bottom-e[h.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=Xt(n.lineWidth,1);if(r.fillStyle=Xt(n.fillStyle,o),r.lineCap=Xt(n.lineCap,"butt"),r.lineDashOffset=Xt(n.lineDashOffset,0),r.lineJoin=Xt(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=Xt(n.strokeStyle,o),r.setLineDash(Xt(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(t,f/2);wn(r,o,l,e+d,s.pointStyleWidth&&f)}else{const s=e+Math.max((u-p)/2,0),o=a.leftForLtr(t,f),l=In(n.borderRadius);r.beginPath(),Object.values(l).some(t=>0!==t)?En(r,{x:o,y:s,w:f,h:p,radius:l}):r.rect(o,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(C),M,x),C=((t,e,n,r)=>t===(r?"left":"right")?n:"center"===t?(e+n)/2:e)(k,C+f+d,m?C+_:this.right,t.rtl),function(t,e,n){Pn(r,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(C),M,x),m)h.x+=_+c;else if("string"!=typeof x.text){const t=l.lineHeight;h.y+=jo(x,t)+c}else h.y+=y}),Sr(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Fn(e.font),r=jn(e.padding);if(!e.display)return;const i=Cr(t.rtl,this.left,this.width),s=this.ctx,o=e.position,a=n.size/2,l=r.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=Ke(t.align,u,this.right-d);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+Ke(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const h=Ke(o,u,u+d);s.textAlign=i.textAlign(Ue(o)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,Pn(s,e.text,h,c,n)}_computeTitleHeight(){const t=this.options.title,e=Fn(t.font),n=jn(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,i;if(Ie(t,this.left,this.right)&&Ie(e,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],Ie(t,r.left,r.left+r.width)&&Ie(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,o=(i=n,null!==(r=s)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);s&&!o&&Zt(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&Zt(e.onHover,[t,n,this],this)}else n&&Zt(e.onClick,[t,n,this],this);var r,i}}function jo(t,e){return e*(t.text?t.text.length:0)}var Fo={id:"legend",_element:Io,start(t,e,n){const r=t.legend=new Io({ctx:t.ctx,options:n,chart:t});$i.configure(t,r,n),$i.addBox(t,r)},stop(t){$i.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;$i.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=jn(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class zo extends Xi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Kt(n.text)?n.text.length:1;this._padding=jn(n.padding);const i=r*Fn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:i,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=Ke(o,n,i),c=e+t,a=i-n):("left"===s.position?(l=n+t,c=Ke(o,r,e),u=-.5*pe):(l=i-t,c=Ke(o,e,r),u=.5*pe),a=r-e),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Fn(e.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(r);Pn(t,e.text,0,0,n,{color:e.color,maxWidth:o,rotation:a,textAlign:Ue(e.align),textBaseline:"middle",translation:[i,s]})}}var No={id:"title",_element:zo,start(t,e,n){!function(t,e){const n=new zo({ctx:t.ctx,options:e,chart:t});$i.configure(t,n,e),$i.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;$i.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;$i.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wo=new WeakMap;var Vo={id:"subtitle",start(t,e,n){const r=new zo({ctx:t.ctx,options:n,chart:t});$i.configure(t,r,n),$i.addBox(t,r),Wo.set(t,r)},stop(t){$i.removeBox(t,Wo.get(t)),Wo.delete(t)},beforeUpdate(t,e,n){const r=Wo.get(t);$i.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ho={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();r.add(t.x),i+=t.y,++s}}if(0===s||0===r.size)return!1;return{x:[...r].reduce((t,e)=>t+e)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n,r,i,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){const r=t[n].element;if(r&&r.hasValue()){const t=Oe(e,r.getCenterPoint());t<a&&(a=t,i=r)}}if(i){const t=i.tooltipPosition();s=t.x,o=t.y}return{x:s,y:o}}};function qo(t,e){return e&&(Kt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Uo(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Ko(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Yo(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Fn(e.bodyFont),c=Fn(e.titleFont),u=Fn(e.footerFont),d=s.length,h=i.length,f=r.length,p=jn(e.padding);let g=p.height,m=0,b=r.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let y=0;const x=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=c.string,te(t.title,x),n.font=l.string,te(t.beforeBody.concat(t.afterBody),x),y=e.displayColors?o+2+e.boxPadding:0,te(r,t=>{te(t.before,x),te(t.lines,x),te(t.after,x)}),y=0,n.font=u.string,te(t.footer,x),n.restore(),m+=p.width,{width:m,height:g}}function Qo(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),function(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;return"left"===t&&i+s+o>e.width||"right"===t&&i-s-o<0||void 0}(c,t,e,n)&&(c="center"),c}function Go(t,e,n){const r=n.yAlign||e.yAlign||function(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Qo(t,e,n,r),yAlign:r}}function Xo(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=In(o);let p=function(t,e){let{x:n,width:r}=t;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,a);const g=function(t,e,n){let{y:r,height:i}=t;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,h)+i:"right"===a&&(p+=Math.max(d,f)+i),{x:Be(p,0,r.width-e.width),y:Be(g,0,r.height-e.height)}}function Jo(t,e,n){const r=jn(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function Zo(t){return qo([],Uo(t))}function ta(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ea={beforeTitle:Ht,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ht,beforeBody:Ht,beforeLabel:Ht,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ut(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ht,afterBody:Ht,beforeFooter:Ht,footer:Ht,afterFooter:Ht};function na(t,e,n,r){const i=t[e].call(n,r);return void 0===i?ea[e].call(n,r):i}class ra extends Xi{static positioners=Ho;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new Nr(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Nn(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,r=na(n,"beforeTitle",this,t),i=na(n,"title",this,t),s=na(n,"afterTitle",this,t);let o=[];return o=qo(o,Uo(r)),o=qo(o,Uo(i)),o=qo(o,Uo(s)),o}getBeforeBody(t,e){return Zo(na(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,r=[];return te(t,t=>{const e={before:[],lines:[],after:[]},i=ta(n,t);qo(e.before,Uo(na(i,"beforeLabel",this,t))),qo(e.lines,na(i,"label",this,t)),qo(e.after,Uo(na(i,"afterLabel",this,t))),r.push(e)}),r}getAfterBody(t,e){return Zo(na(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=na(n,"beforeFooter",this,t),i=na(n,"footer",this,t),s=na(n,"afterFooter",this,t);let o=[];return o=qo(o,Uo(r)),o=qo(o,Uo(i)),o=qo(o,Uo(s)),o}_createItems(t){const e=this._active,n=this.chart.data,r=[],i=[],s=[];let o,a,l=[];for(o=0,a=e.length;o<a;++o)l.push(Ko(this.chart,e[o]));return t.filter&&(l=l.filter((e,r,i)=>t.filter(e,r,i,n))),t.itemSort&&(l=l.sort((e,r)=>t.itemSort(e,r,n))),te(l,e=>{const n=ta(t.callbacks,e);r.push(na(n,"labelColor",this,e)),i.push(na(n,"labelPointStyle",this,e)),s.push(na(n,"labelTextColor",this,e))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const t=Ho[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=Yo(this,n),o=Object.assign({},t,e),a=Go(this.chart,n,o),l=Xo(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=In(o),{x:d,y:h}=t,{width:f,height:p}=e;let g,m,b,y,x,v;return"center"===i?(x=h+p/2,"left"===r?(g=d,m=g-s,y=x+s,v=x-s):(g=d+f,m=g+s,y=x-s,v=x+s),b=g):(m="left"===r?d+Math.max(a,c)+s:"right"===r?d+f-Math.max(l,u)-s:this.caretX,"top"===i?(y=h,x=y-s,g=m-s,b=m+s):(y=h+p,x=y+s,g=m+s,b=m-s),v=y),{x1:g,x2:m,x3:b,y1:y,y2:x,y3:v}}drawTitle(t,e,n){const r=this.title,i=r.length;let s,o,a;if(i){const l=Cr(n.rtl,this.x,this.width);for(t.x=Jo(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",s=Fn(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,a=0;a<i;++a)e.fillText(r[a],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+o,a+1===i&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,r,i){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=i,c=Fn(i.bodyFont),u=Jo(this,"left",i),d=r.x(u),h=a<c.lineHeight?(c.lineHeight-a)/2:0,f=e.y+h;if(i.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=f+a/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,vn(t,e,n,c),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,vn(t,e,n,c)}else{t.lineWidth=Yt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),o=In(s.borderRadius);Object.values(o).some(t=>0!==t)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,En(t,{x:e,y:f,w:l,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),En(t,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Fn(n.bodyFont);let d=u.lineHeight,h=0;const f=Cr(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+h),t.y+d/2),t.y+=d+i},g=f.textAlign(s);let m,b,y,x,v,w,k;for(e.textAlign=s,e.textBaseline="middle",e.font=u.string,t.x=Jo(this,g,n),e.fillStyle=n.bodyColor,te(this.beforeBody,p),h=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,x=0,w=r.length;x<w;++x){for(m=r[x],b=this.labelTextColors[x],e.fillStyle=b,te(m.before,p),y=m.lines,o&&y.length&&(this._drawColorBox(e,t,x,f,n),d=Math.max(u.lineHeight,a)),v=0,k=y.length;v<k;++v)p(y[v]),d=u.lineHeight;te(m.after,p)}h=0,d=u.lineHeight,te(this.afterBody,p),t.y-=i}drawFooter(t,e,n){const r=this.footer,i=r.length;let s,o;if(i){const a=Cr(n.rtl,this.x,this.width);for(t.x=Jo(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",s=Fn(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,o=0;o<i;++o)e.fillText(r[o],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:i,yAlign:s}=this,{x:o,y:a}=t,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=In(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===s&&this.drawCaret(t,e,n,r),e.lineTo(o+l-d,a),e.quadraticCurveTo(o+l,a,o+l,a+d),"center"===s&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(o+l,a+c-f),e.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(t,e,n,r),e.lineTo(o+h,a+c),e.quadraticCurveTo(o,a+c,o,a+c-h),"center"===s&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Ho[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Yo(this,t),o=Object.assign({},n,this._size),a=Go(e,t,o),l=Xo(t,o,a,e);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=jn(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),Mr(t,e.textDirection),i.y+=s.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),Sr(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map(({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}),i=!ee(n,r),s=this._positionChanged(r,e);(i||s)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(t,i,e,n),o=this._positionChanged(s,t),a=e||!ee(s,i)||o;return a&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,r){const i=this.options;if("mouseout"===t.type)return[];if(!r)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const s=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:r,options:i}=this,s=Ho[i.position].call(this,t,e);return!1!==s&&(n!==s.x||r!==s.y)}}var ia={id:"tooltip",_element:ra,positioners:Ho,afterInit(t,e,n){n&&(t.tooltip=new ra({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ea},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},sa=Object.freeze({__proto__:null,Colors:po,Decimation:bo,Filler:Ro,Legend:Fo,SubTitle:Vo,Title:No,Tooltip:ia});function oa(t,e,n,r){const i=t.indexOf(e);if(-1===i)return((t,e,n,r)=>("string"==typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,r);return i!==t.lastIndexOf(e)?n:i}function aa(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function la(t,e){const n=[],{bounds:r,step:i,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=t,h=i||1,f=c-1,{min:p,max:g}=e,m=!Ut(s),b=!Ut(o),y=!Ut(l),x=(g-p)/(u+1);let v,w,k,_,C=Me((g-p)/f/h)*h;if(C<1e-14&&!m&&!b)return[{value:p},{value:g}];_=Math.ceil(g/C)-Math.floor(p/C),_>f&&(C=Me(_*C/f/h)*h),Ut(a)||(v=Math.pow(10,a),C=Math.ceil(C*v)/v),"ticks"===r?(w=Math.floor(p/C)*C,k=Math.ceil(g/C)*C):(w=p,k=g),m&&b&&i&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((o-s)/i,C/1e3)?(_=Math.round(Math.min((o-s)/C,c)),C=(o-s)/_,w=s,k=o):y?(w=m?s:w,k=b?o:k,_=l-1,C=(k-w)/_):(_=(k-w)/C,_=Ce(_,Math.round(_),C/1e3)?Math.round(_):Math.ceil(_));const M=Math.max(Ee(C),Ee(w));v=Math.pow(10,Ut(a)?M:a),w=Math.round(w*v)/v,k=Math.round(k*v)/v;let S=0;for(m&&(d&&w!==s?(n.push({value:s}),w<s&&S++,Ce(Math.round((w+S*C)*v)/v,s,ca(s,x,t))&&S++):w<s&&S++);S<_;++S){const t=Math.round((w+S*C)*v)/v;if(b&&t>o)break;n.push({value:t})}return b&&d&&k!==o?n.length&&Ce(n[n.length-1].value,o,ca(o,x,t))?n[n.length-1].value=o:n.push({value:o}):b&&k!==o||n.push({value:k}),n}function ca(t,e,{horizontal:n,minRotation:r}){const i=De(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class ua extends as{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ut(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=t=>r=e?r:t,o=t=>i=n?i:t;if(t){const t=_e(r),e=_e(i);t<0&&e<0?o(0):t>0&&e>0&&s(0)}if(r===i){let e=0===i?1:Math.abs(.05*i);o(i+e),t||s(r-e)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=la({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Ae(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return an(t,this.chart.options.locale,this.options.ticks.format)}}class da extends ua{static id="linear";static defaults={ticks:{callback:cn.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qt(t)?t:0,this.max=Qt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=De(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ha=t=>Math.floor(ke(t)),fa=(t,e)=>Math.pow(10,ha(t)+e);function pa(t){return 1===t/Math.pow(10,ha(t))}function ga(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function ma(t,{min:e,max:n}){e=Gt(t.min,e);const r=[],i=ha(e);let s=function(t,e){let n=ha(e-t);for(;ga(t,e,n)>10;)n++;for(;ga(t,e,n)<10;)n--;return Math.min(n,ha(t))}(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),h=Gt(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<n;)r.push({value:h,major:pa(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;const f=Gt(t.max,h);return r.push({value:f,major:pa(f),significand:d}),r}class ba extends as{static id="logarithmic";static defaults={ticks:{callback:cn.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=ua.prototype.parse.apply(this,[t,e]);if(0!==n)return Qt(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qt(t)?Math.max(0,t):null,this.max=Qt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Qt(this._userMin)&&(this.min=t===fa(this.min,0)?fa(this.min,-1):fa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const i=e=>n=t?n:e,s=t=>r=e?r:t;n===r&&(n<=0?(i(1),s(10)):(i(fa(n,-1)),s(fa(r,1)))),n<=0&&i(fa(r,-1)),r<=0&&s(fa(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,e=ma({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Ae(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":an(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ke(t),this._valueRange=ke(this.max)-ke(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ke(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ya(t){const e=t.ticks;if(e.display&&t.display){const t=jn(e.backdropPadding);return Xt(e.font&&e.font.size,gn.font.size)+t.height}return 0}function xa(t,e,n){return n=Kt(n)?n:[n],{w:bn(t,e.string,n),h:n.length*e.lineHeight}}function va(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function wa(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?pe/s:0;for(let l=0;l<s;l++){const s=o.setContext(t.getPointLabelContext(l));i[l]=s.padding;const c=t.getPointPosition(l,t.drawingArea+i[l],a),u=Fn(s.font),d=xa(t.ctx,u,t._pointLabels[l]);r[l]=d;const h=Le(t.getIndexAngle(l)+a),f=Math.round(Pe(h));ka(n,e,h,va(f,c.x,d.w,0,180),va(f,c.y,d.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:ya(s)/2,additionalAngle:o?pe/i:0};let c;for(let s=0;s<i;s++){l.padding=n[s],l.size=e[s];const i=_a(t,s,l);r.push(i),"auto"===a&&(i.visible=Ca(i,c),i.visible&&(c=i))}return r}(t,r,i)}function ka(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function _a(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Pe(Le(l.angle+xe))),u=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,a.h,c),d=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),h=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function Ca(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(kn({x:n,y:r},e)||kn({x:n,y:s},e)||kn({x:i,y:r},e)||kn({x:i,y:s},e))}function Ma(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Ut(a)){const n=In(e.borderRadius),l=jn(e.backdropPadding);t.fillStyle=a;const c=r-l.left,u=i-l.top,d=s-r+l.width,h=o-i+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),En(t,{x:c,y:u,w:d,h:h,radius:n}),t.fill()):t.fillRect(c,u,d,h)}}function Sa(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,ge);else{let n=t.getPointPosition(0,e);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=t.getPointPosition(s,e),i.lineTo(n.x,n.y)}}class Aa extends ua{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:cn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=jn(ya(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Qt(t)&&!isNaN(t)?t:0,this.max=Qt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ya(this.options))}generateTickLabels(t){ua.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=Zt(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?wa(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return Le(t*(ge/(this._pointLabels.length||1))+De(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Ut(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ut(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Nn(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-xe+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Sa(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r,border:i}=e,s=this._pointLabels.length;let o,a,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const e=t._pointLabelItems[i];if(!e.visible)continue;const s=r.setContext(t.getPointLabelContext(i));Ma(n,s,e);const o=Fn(s.font),{x:a,y:l,textAlign:c}=e;Pn(n,t._pointLabels[i],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),o=r.setContext(n),l=i.setContext(n);!function(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),Sa(t,n,o,r),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}}),n.display){for(t.save(),o=s-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:s}=r;s&&i&&(t.lineWidth=s,t.strokeStyle=i,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((r,o)=>{if(0===o&&this.min>=0&&!e.reverse)return;const a=n.setContext(this.getContext(o)),l=Fn(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=l.string,s=t.measureText(r.label).width,t.fillStyle=a.backdropColor;const e=jn(a.backdropPadding);t.fillRect(-s/2-e.left,-i-l.size/2-e.top,s+e.width,l.size+e.height)}Pn(t,r.label,0,-i,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),t.restore()}drawTitle(){}}const Da={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pa=Object.keys(Da);function Ea(t,e){return t-e}function Ta(t,e){if(Ut(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return"function"==typeof r&&(o=r(o)),Qt(o)||(o="string"==typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&(o="week"!==i||!Se(s)&&!0!==s?n.startOf(o,i):n.startOf(o,"isoWeek",s)),+o)}function Oa(t,e,n,r){const i=Pa.length;for(let s=Pa.indexOf(t);s<i-1;++s){const t=Da[Pa[s]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(i*t.size))<=r)return Pa[s]}return Pa[i-1]}function $a(t,e,n){if(n){if(n.length){const{lo:r,hi:i}=je(n,e);t[n[r]>=e?n[r]:n[i]]=!0}}else t[e]=!0}function La(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&n?function(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}(t,r,i,n):r}class Ra extends as{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),r=this._adapter=new fi(t.adapters.date);r.init(e),oe(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Ta(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function a(t){s||isNaN(t.min)||(r=Math.min(r,t.min)),o||isNaN(t.max)||(i=Math.max(i,t.max))}s&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),r=Qt(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),i=Qt(i)&&!isNaN(i)?i:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}(r,i,this.max);return this._unit=e.unit||(n.autoSkip?Oa(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,n,r,i){for(let s=Pa.length-1;s>=Pa.indexOf(n);s--){const n=Pa[s];if(Da[n].common&&t._adapter.diff(i,r,n)>=e-1)return n}return Pa[n?Pa.indexOf(n):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Pa.indexOf(t)+1,n=Pa.length;e<n;++e)if(Da[Pa[e]].common)return Pa[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&s.reverse(),La(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,n,r=0,i=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),i=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;r=Be(r,0,s),i=Be(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||Oa(i.minUnit,e,n,this._getLabelCapacity(e)),o=Xt(r.ticks.stepSize,1),a="week"===s&&i.isoWeekday,l=Se(a)||!0===a,c={};let u,d,h=e;if(l&&(h=+t.startOf(h,"isoWeek",a)),h=+t.startOf(h,l?"day":s),t.diff(n,e,s)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+t.add(u,o,s),d++)$a(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||$a(c,u,f),Object.keys(c).sort(Ea).map(t=>+t)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,i=e||n[r];return this._adapter.format(t,i)}_tickFormatFunction(t,e,n,r){const i=this.options,s=i.ticks.callback;if(s)return Zt(s,[t,e,n],this);const o=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],d=n[e],h=l&&u&&d&&d.major;return this._adapter.format(t,r||(h?u:c))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=De(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),s=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,La(this,[t],this._majorUnit),r),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(Ta(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Ve(t.sort(Ea))}}function Ba(t,e,n){let r,i,s,o,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Fe(t,"pos",e)),({pos:r,time:s}=t[a]),({pos:i,time:o}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Fe(t,"time",e)),({time:r,pos:s}=t[a]),({time:i,pos:o}=t[l]));const c=i-r;return c?s+(o-s)*(e-r)/c:s}var Ia=Object.freeze({__proto__:null,CategoryScale:class extends as{static id="category";static defaults={ticks:{callback:aa}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:r}of e)t[n]===r&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ut(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Be(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:oa(n,t,Xt(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)r.push({value:n});return r}getLabelForValue(t){return aa.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:da,LogarithmicScale:ba,RadialLinearScale:Aa,TimeScale:Ra,TimeSeriesScale:class extends Ra{static id="timeseries";static defaults=Ra.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ba(e,this.min),this._tableRange=Ba(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],i=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;++s)l=t[s],l>=e&&l<=n&&r.push(l);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,o=r.length;s<o;++s)c=r[s+1],a=r[s-1],l=r[s],Math.round((c+a)/2)!==l&&i.push({time:l,pos:s/(o-1)});return i}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ba(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Ba(this._table,n*this._tableRange+this._minPos,!0)}}});const ja=[ui,oo,sa,Ia];function Fa(t){return new Date(t).toLocaleDateString()}function za(t){if(t.url.startsWith("http://")||t.url.startsWith("https://")){const e=t.domain.charAt(0).toUpperCase(),n=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899"];return`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="${n[t.domain.length%n.length]}"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white" font-weight="bold">${e}</text></svg>`}switch(t.domain){case"chrome-internal":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23EA4335"/><circle cx="8" cy="8" r="3" fill="white"/></svg>';case"local-file":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F59E0B"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';case"javascript-bookmarklet":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F7DF1E"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="black" font-weight="bold">JS</text></svg>';case"data-uri":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%2310B981"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="white" font-weight="bold">D</text></svg>';case"contact-link":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%238B5CF6"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">@</text></svg>';case"other-protocol":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%236B7280"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';default:return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23E5E7EB"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="%236B7280">?</text></svg>'}}function Na(t){switch(t.domain){case"chrome-internal":return"Chrome";case"local-file":return"Local File";case"javascript-bookmarklet":return"Bookmarklet";case"data-uri":return"Data URI";case"contact-link":return"Contact";case"other-protocol":return"Other";case"invalid-url":return"Invalid URL";default:return t.domain}}async function Wa(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}const Va={DATE_DESC:{key:"date_desc",label:"Newest First",sort:(t,e)=>e.dateAdded-t.dateAdded},DATE_ASC:{key:"date_asc",label:"Oldest First",sort:(t,e)=>t.dateAdded-e.dateAdded},TITLE_ASC:{key:"title_asc",label:"Title A-Z",sort:(t,e)=>t.title.localeCompare(e.title)},TITLE_DESC:{key:"title_desc",label:"Title Z-A",sort:(t,e)=>e.title.localeCompare(t.title)},DOMAIN_ASC:{key:"domain_asc",label:"Domain A-Z",sort:(t,e)=>t.domain.localeCompare(e.domain)}};function Ha(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',M(e,"class","text-red-500"),M(e,"title","Dead link")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function qa(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',M(e,"class","text-green-500"),M(e,"title","Enriched with metadata")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Ua(t){let e,n,r,i,s;return{c(){e=y("span"),n=x("svg"),r=x("path"),i=x("path"),M(r,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),M(i,"fill-rule","evenodd"),M(i,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),M(i,"clip-rule","evenodd"),M(n,"class","w-3.5 h-3.5"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","text-blue-500 text-xs"),M(e,"title",s="Accessed "+t[0].accessCount+" times")},m(t,s){g(t,e,s),p(e,n),p(n,r),p(n,i)},p(t,n){1&n&&s!==(s="Accessed "+t[0].accessCount+" times")&&M(e,"title",s)},d(t){t&&m(e)}}}function Ka(t){let e,n,r,i,s=t[0].category+"";return{c(){e=y("span"),n=v(" "),r=v(s),M(e,"class","text-xs text-purple-600 bg-purple-50 px-2 py-0.5 rounded"),M(e,"title",i="Category: "+t[0].category)},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,n){1&n&&s!==(s=t[0].category+"")&&A(r,s),1&n&&i!==(i="Category: "+t[0].category)&&M(e,"title",i)},d(t){t&&m(e)}}}function Ya(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),M(e,"class","w-4 h-4"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){g(t,e,r),p(e,n)},d(t){t&&m(e)}}}function Qa(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M5 13l4 4L19 7"),M(e,"class","w-4 h-4 text-green-500"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){g(t,e,r),p(e,n)},d(t){t&&m(e)}}}function Ga(t){let e,n,r,i,s=t[0].folderPath+"";return{c(){e=y("p"),n=v(" "),r=v(s),M(e,"class","text-xs text-gray-400 mt-1 truncate"),M(e,"title",i=t[0].folderPath)},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,n){1&n&&s!==(s=t[0].folderPath+"")&&A(r,s),1&n&&i!==(i=t[0].folderPath)&&M(e,"title",i)},d(t){t&&m(e)}}}function Xa(e){let n,i,s,o,l,c,u,d,h,f,b,x,k,C,S,D,P,E,T,$,L,R,B,I,j,F,z,N,W,V,H,q,U,K=e[0].title+"",Y=e[0].url+"",Q=Na(e[0])+"",G=Fa(e[0].dateAdded)+"",X=!1===e[0].isAlive&&Ha(),J=(e[0].description||e[0].keywords&&e[0].keywords.length>0)&&qa(),Z=e[0].accessCount>0&&Ua(e),tt=e[0].category&&Ka(e);function et(t,e){return t[1]?Qa:Ya}let nt=et(e),rt=nt(e),it=e[0].folderPath&&Ga(e);return{c(){n=y("div"),i=y("div"),s=y("img"),l=w(),c=y("div"),u=y("div"),d=y("h3"),h=v(K),b=w(),x=y("div"),X&&X.c(),k=w(),J&&J.c(),C=w(),Z&&Z.c(),S=w(),D=y("p"),P=v(Y),T=w(),$=y("div"),L=y("div"),R=y("span"),B=v(Q),I=w(),tt&&tt.c(),j=w(),F=y("div"),z=y("button"),rt.c(),N=w(),W=y("span"),V=v(G),H=w(),it&&it.c(),a(s.src,o=za(e[0]))||M(s,"src",o),M(s,"alt","Favicon"),M(s,"class","w-4 h-4 mt-1 flex-shrink-0"),M(d,"class","text-sm font-medium text-gray-900 truncate flex-1"),M(d,"title",f=e[0].title),M(x,"class","flex items-center gap-1 flex-shrink-0"),M(u,"class","flex items-center gap-1.5"),M(D,"class","text-xs text-gray-500 truncate mt-1"),M(D,"title",E=e[0].url),M(R,"class","text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded"),M(L,"class","flex items-center gap-1.5"),M(z,"class","p-1 text-gray-400 hover:text-blue-600 transition-colors"),M(z,"title","Copy URL"),M(W,"class","text-xs text-gray-400"),M(F,"class","flex items-center space-x-2"),M($,"class","flex items-center justify-between mt-2 gap-2 flex-wrap"),M(c,"class","flex-1 min-w-0"),M(i,"class","flex items-start space-x-3"),M(n,"class","bookmark-card bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 svelte-1oo2sed"),M(n,"role","button"),M(n,"tabindex","0"),O(n,"border-red-200",!1===e[0].isAlive),O(n,"bg-red-50",!1===e[0].isAlive)},m(t,r){g(t,n,r),p(n,i),p(i,s),p(i,l),p(i,c),p(c,u),p(u,d),p(d,h),p(u,b),p(u,x),X&&X.m(x,null),p(x,k),J&&J.m(x,null),p(x,C),Z&&Z.m(x,null),p(c,S),p(c,D),p(D,P),p(c,T),p(c,$),p($,L),p(L,R),p(R,B),p(L,I),tt&&tt.m(L,null),p($,j),p($,F),p(F,z),rt.m(z,null),p(F,N),p(F,W),p(W,V),p(c,H),it&&it.m(c,null),q||(U=[_(z,"click",e[2]),_(n,"click",e[3]),_(n,"keydown",e[4])],q=!0)},p(t,[e]){1&e&&!a(s.src,o=za(t[0]))&&M(s,"src",o),1&e&&K!==(K=t[0].title+"")&&A(h,K),1&e&&f!==(f=t[0].title)&&M(d,"title",f),!1===t[0].isAlive?X||(X=Ha(),X.c(),X.m(x,k)):X&&(X.d(1),X=null),t[0].description||t[0].keywords&&t[0].keywords.length>0?J||(J=qa(),J.c(),J.m(x,C)):J&&(J.d(1),J=null),t[0].accessCount>0?Z?Z.p(t,e):(Z=Ua(t),Z.c(),Z.m(x,null)):Z&&(Z.d(1),Z=null),1&e&&Y!==(Y=t[0].url+"")&&A(P,Y),1&e&&E!==(E=t[0].url)&&M(D,"title",E),1&e&&Q!==(Q=Na(t[0])+"")&&A(B,Q),t[0].category?tt?tt.p(t,e):(tt=Ka(t),tt.c(),tt.m(L,null)):tt&&(tt.d(1),tt=null),nt!==(nt=et(t))&&(rt.d(1),rt=nt(t),rt&&(rt.c(),rt.m(z,null))),1&e&&G!==(G=Fa(t[0].dateAdded)+"")&&A(V,G),t[0].folderPath?it?it.p(t,e):(it=Ga(t),it.c(),it.m(c,null)):it&&(it.d(1),it=null),1&e&&O(n,"border-red-200",!1===t[0].isAlive),1&e&&O(n,"bg-red-50",!1===t[0].isAlive)},i:t,o:t,d(t){t&&m(n),X&&X.d(),J&&J.d(),Z&&Z.d(),tt&&tt.d(),rt.d(),it&&it.d(),q=!1,r(U)}}}function Ja(t){chrome.tabs.create({url:t})}function Za(t,e,n){let{bookmark:r}=e;I();let i=!1;return t.$$set=t=>{"bookmark"in t&&n(0,r=t.bookmark)},[r,i,async function(t){t.stopPropagation(),await Wa(r.url)&&(n(1,i=!0),setTimeout(()=>n(1,i=!1),2e3))},()=>Ja(r.url),t=>"Enter"===t.key&&Ja(r.url)]}class tl extends ut{constructor(t){super(),ct(this,t,Za,Xa,s,{bookmark:0})}}function el(t){let e,n,r;return{c(){e=y("input"),M(e,"type","checkbox"),e.checked=t[1],M(e,"class","mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded")},m(i,s){g(i,e,s),n||(r=_(e,"change",t[4]),n=!0)},p(t,n){2&n&&(e.checked=t[1])},d(t){t&&m(e),n=!1,r()}}}function nl(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',M(e,"class","text-red-500"),M(e,"title","Dead link")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function rl(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',M(e,"class","text-green-500"),M(e,"title","Enriched with metadata")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function il(t){let e,n,r,i,s;return{c(){e=y("span"),n=x("svg"),r=x("path"),i=x("path"),M(r,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),M(i,"fill-rule","evenodd"),M(i,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),M(i,"clip-rule","evenodd"),M(n,"class","w-3.5 h-3.5"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","text-blue-500 text-xs"),M(e,"title",s="Accessed "+t[0].accessCount+" times")},m(t,s){g(t,e,s),p(e,n),p(n,r),p(n,i)},p(t,n){1&n&&s!==(s="Accessed "+t[0].accessCount+" times")&&M(e,"title",s)},d(t){t&&m(e)}}}function sl(t){let e,n,r,i=t[0].category+"";return{c(){e=y("span"),n=v(" "),r=v(i),M(e,"class","text-xs text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded whitespace-nowrap flex-shrink-0 hidden sm:inline-block"),M(e,"title","Category")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){1&e&&i!==(i=t[0].category+"")&&A(r,i)},d(t){t&&m(e)}}}function ol(t){let e,n,r,i,s=t[0].folderPath+"";return{c(){e=y("p"),n=v(" "),r=v(s),M(e,"class","text-xs text-gray-400 mt-1 truncate"),M(e,"title",i=t[0].folderPath)},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,n){1&n&&s!==(s=t[0].folderPath+"")&&A(r,s),1&n&&i!==(i=t[0].folderPath)&&M(e,"title",i)},d(t){t&&m(e)}}}function al(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),M(e,"class","w-4 h-4"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){g(t,e,r),p(e,n)},d(t){t&&m(e)}}}function ll(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M5 13l4 4L19 7"),M(e,"class","w-4 h-4 text-green-500"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){g(t,e,r),p(e,n)},d(t){t&&m(e)}}}function cl(e){let n,i,s,o,l,c,u,d,h,f,b,x,k,C,S,D,P,E,T,$,L,R,B,I,j,F,z,N,W,V,H,q,U,K,Y,Q,G,X,J=e[0].title+"",Z=e[0].url+"",tt=Na(e[0])+"",et=Fa(e[0].dateAdded)+"",nt=e[2]&&el(e),rt=!1===e[0].isAlive&&nl(),it=(e[0].description||e[0].keywords&&e[0].keywords.length>0)&&rl(),st=e[0].accessCount>0&&il(e),ot=e[0].category&&sl(e),at=e[0].folderPath&&ol(e);function lt(t,e){return t[3]?ll:al}let ct=lt(e),ut=ct(e);return{c(){n=y("div"),i=y("div"),nt&&nt.c(),s=w(),o=y("img"),c=w(),u=y("div"),d=y("div"),h=y("div"),f=y("div"),b=y("h3"),x=v(J),C=w(),S=y("div"),rt&&rt.c(),D=w(),it&&it.c(),P=w(),st&&st.c(),E=w(),T=y("div"),$=y("p"),L=y("span"),R=v(Z),I=w(),j=y("span"),F=v(tt),z=w(),ot&&ot.c(),N=w(),at&&at.c(),W=w(),V=y("div"),H=y("span"),q=v(et),U=w(),K=y("button"),ut.c(),Y=w(),Q=y("button"),Q.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',a(o.src,l=za(e[0]))||M(o,"src",l),M(o,"alt","Favicon"),M(o,"class","w-4 h-4 mr-3 flex-shrink-0"),M(b,"class","text-sm font-medium text-gray-900 truncate hover:text-blue-600 flex-1"),M(b,"title",k=e[0].title),M(S,"class","flex items-center gap-1 flex-shrink-0"),M(f,"class","flex items-center gap-1.5"),M(L,"class","truncate block"),M($,"class","text-xs text-gray-500 flex-1 min-w-0"),M($,"title",B=e[0].url),M(j,"class","text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded whitespace-nowrap flex-shrink-0"),M(T,"class","flex items-center mt-1 space-x-2 sm:space-x-4"),M(h,"class","flex-1 min-w-0"),M(H,"class","text-xs text-gray-400 whitespace-nowrap hidden sm:block"),M(K,"class","p-1 text-gray-400 hover:text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity svelte-hs6pz6"),M(K,"title","Copy URL"),M(Q,"class","p-1 text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity svelte-hs6pz6"),M(Q,"title","Delete bookmark"),M(V,"class","flex items-center ml-2 sm:ml-4 space-x-2 flex-shrink-0"),M(d,"class","flex items-center justify-between"),M(u,"class","flex-1 min-w-0 cursor-pointer"),M(u,"role","button"),M(u,"tabindex","0"),M(i,"class","flex items-center px-4 py-3"),M(n,"class","bookmark-list-item group bg-white border-b border-gray-200 hover:bg-gray-50 transition-colors svelte-hs6pz6"),O(n,"selected",e[1]),O(n,"bg-red-50",!1===e[0].isAlive),O(n,"border-red-200",!1===e[0].isAlive)},m(t,r){g(t,n,r),p(n,i),nt&&nt.m(i,null),p(i,s),p(i,o),p(i,c),p(i,u),p(u,d),p(d,h),p(h,f),p(f,b),p(b,x),p(f,C),p(f,S),rt&&rt.m(S,null),p(S,D),it&&it.m(S,null),p(S,P),st&&st.m(S,null),p(h,E),p(h,T),p(T,$),p($,L),p(L,R),p(T,I),p(T,j),p(j,F),p(T,z),ot&&ot.m(T,null),p(h,N),at&&at.m(h,null),p(d,W),p(d,V),p(V,H),p(H,q),p(V,U),p(V,K),ut.m(K,null),p(V,Y),p(V,Q),G||(X=[_(K,"click",e[7]),_(Q,"click",e[6]),_(u,"click",e[5]),_(u,"keydown",e[8])],G=!0)},p(t,[e]){t[2]?nt?nt.p(t,e):(nt=el(t),nt.c(),nt.m(i,s)):nt&&(nt.d(1),nt=null),1&e&&!a(o.src,l=za(t[0]))&&M(o,"src",l),1&e&&J!==(J=t[0].title+"")&&A(x,J),1&e&&k!==(k=t[0].title)&&M(b,"title",k),!1===t[0].isAlive?rt||(rt=nl(),rt.c(),rt.m(S,D)):rt&&(rt.d(1),rt=null),t[0].description||t[0].keywords&&t[0].keywords.length>0?it||(it=rl(),it.c(),it.m(S,P)):it&&(it.d(1),it=null),t[0].accessCount>0?st?st.p(t,e):(st=il(t),st.c(),st.m(S,null)):st&&(st.d(1),st=null),1&e&&Z!==(Z=t[0].url+"")&&A(R,Z),1&e&&B!==(B=t[0].url)&&M($,"title",B),1&e&&tt!==(tt=Na(t[0])+"")&&A(F,tt),t[0].category?ot?ot.p(t,e):(ot=sl(t),ot.c(),ot.m(T,null)):ot&&(ot.d(1),ot=null),t[0].folderPath?at?at.p(t,e):(at=ol(t),at.c(),at.m(h,null)):at&&(at.d(1),at=null),1&e&&et!==(et=Fa(t[0].dateAdded)+"")&&A(q,et),ct!==(ct=lt(t))&&(ut.d(1),ut=ct(t),ut&&(ut.c(),ut.m(K,null))),2&e&&O(n,"selected",t[1]),1&e&&O(n,"bg-red-50",!1===t[0].isAlive),1&e&&O(n,"border-red-200",!1===t[0].isAlive)},i:t,o:t,d(t){t&&m(n),nt&&nt.d(),rt&&rt.d(),it&&it.d(),st&&st.d(),ot&&ot.d(),at&&at.d(),ut.d(),G=!1,r(X)}}}function ul(t,e,n){let{bookmark:r}=e,{isSelected:i=!1}=e,{multiSelectMode:s=!1}=e;const o=I();let a=!1;function l(){var t;s||(t=r.url,chrome.tabs.create({url:t}))}return t.$$set=t=>{"bookmark"in t&&n(0,r=t.bookmark),"isSelected"in t&&n(1,i=t.isSelected),"multiSelectMode"in t&&n(2,s=t.multiSelectMode)},[r,i,s,a,function(t){o("toggle-select",{bookmarkId:r.id,selected:t.target.checked})},l,function(t){t.stopPropagation(),o("delete",{bookmarkId:r.id})},async function(t){t.stopPropagation(),await Wa(r.url)&&(n(3,a=!0),setTimeout(()=>n(3,a=!1),2e3))},t=>"Enter"===t.key&&l()]}class dl extends ut{constructor(t){super(),ct(this,t,ul,cl,s,{bookmark:0,isSelected:1,multiSelectMode:2})}}function hl(t,e,n){const r=t.slice();return r[13]=e[n],r}function fl(t,e,n){const r=t.slice();return r[16]=e[n],r}function pl(t,e,n){const r=t.slice();return r[19]=e[n],r}function gl(t,e,n){const r=t.slice();return r[19]=e[n],r}function ml(e){let n,r,i;return{c(){n=y("button"),n.innerHTML='<svg class="h-5 w-5 text-gray-400 hover:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',M(n,"class","absolute inset-y-0 right-0 pr-3 flex items-center"),M(n,"type","button"),M(n,"title","Clear search (Esc)")},m(t,s){g(t,n,s),r||(i=_(n,"click",e[7]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}function bl(t){let e,n,r,i,s=nt(t[4].positive),o=[];for(let e=0;e<s.length;e+=1)o[e]=yl(gl(t,s,e));let a=nt(t[4].negative),l=[];for(let e=0;e<a.length;e+=1)l[e]=xl(pl(t,a,e));let c=nt(t[4].phrases),u=[];for(let e=0;e<c.length;e+=1)u[e]=vl(fl(t,c,e));let d=nt(t[4].regexPatterns),h=[];for(let e=0;e<d.length;e+=1)h[e]=wl(hl(t,d,e));return{c(){e=y("div");for(let t=0;t<o.length;t+=1)o[t].c();n=w();for(let t=0;t<l.length;t+=1)l[t].c();r=w();for(let t=0;t<u.length;t+=1)u[t].c();i=w();for(let t=0;t<h.length;t+=1)h[t].c();M(e,"class","flex flex-wrap gap-1.5 mt-2")},m(t,s){g(t,e,s);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);p(e,n);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);p(e,r);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(e,null);p(e,i);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null)},p(t,f){if(16&f){let r;for(s=nt(t[4].positive),r=0;r<s.length;r+=1){const i=gl(t,s,r);o[r]?o[r].p(i,f):(o[r]=yl(i),o[r].c(),o[r].m(e,n))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}if(16&f){let n;for(a=nt(t[4].negative),n=0;n<a.length;n+=1){const i=pl(t,a,n);l[n]?l[n].p(i,f):(l[n]=xl(i),l[n].c(),l[n].m(e,r))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}if(16&f){let n;for(c=nt(t[4].phrases),n=0;n<c.length;n+=1){const r=fl(t,c,n);u[n]?u[n].p(r,f):(u[n]=vl(r),u[n].c(),u[n].m(e,i))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}if(16&f){let n;for(d=nt(t[4].regexPatterns),n=0;n<d.length;n+=1){const r=hl(t,d,n);h[n]?h[n].p(r,f):(h[n]=wl(r),h[n].c(),h[n].m(e,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}},d(t){t&&m(e),b(o,t),b(l,t),b(u,t),b(h,t)}}}function yl(t){let e,n,r,i,s,o=t[19]+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=w(),s=v(o),M(r,"fill-rule","evenodd"),M(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),M(r,"clip-rule","evenodd"),M(n,"class","w-3 h-3 mr-1"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800")},m(t,o){g(t,e,o),p(e,n),p(n,r),p(e,i),p(e,s)},p(t,e){16&e&&o!==(o=t[19]+"")&&A(s,o)},d(t){t&&m(e)}}}function xl(t){let e,n,r,i,s,o=t[19]+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=w(),s=v(o),M(r,"fill-rule","evenodd"),M(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),M(r,"clip-rule","evenodd"),M(n,"class","w-3 h-3 mr-1"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800")},m(t,o){g(t,e,o),p(e,n),p(n,r),p(e,i),p(e,s)},p(t,e){16&e&&o!==(o=t[19]+"")&&A(s,o)},d(t){t&&m(e)}}}function vl(t){let e,n,r,i,s,o,a=t[16]+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=v('\n          "'),s=v(a),o=v('"'),M(r,"fill-rule","evenodd"),M(r,"d","M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z"),M(r,"clip-rule","evenodd"),M(n,"class","w-3 h-3 mr-1"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800")},m(t,a){g(t,e,a),p(e,n),p(n,r),p(e,i),p(e,s),p(e,o)},p(t,e){16&e&&a!==(a=t[16]+"")&&A(s,a)},d(t){t&&m(e)}}}function wl(t){let e,n,r,i,s,o,a=t[13]+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=w(),s=v(a),o=w(),M(r,"stroke-linecap","round"),M(r,"stroke-linejoin","round"),M(r,"stroke-width","2"),M(r,"d","M10 20l4-16m4 4l-4 4 4 4M6 16l-4-4 4-4"),M(n,"class","w-3 h-3 mr-1"),M(n,"fill","none"),M(n,"stroke","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800")},m(t,a){g(t,e,a),p(e,n),p(n,r),p(e,i),p(e,s),p(e,o)},p(t,e){16&e&&a!==(a=t[13]+"")&&A(s,a)},d(t){t&&m(e)}}}function kl(t){let e;return{c(){e=y("div"),e.innerHTML='<h4 class="font-medium text-gray-900 mb-3 flex items-center gap-2"><svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>\n        Search Syntax</h4> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-green-100 text-green-800 rounded text-xs whitespace-nowrap">+term</code> <span class="text-gray-600">Must include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-800 rounded text-xs whitespace-nowrap">-term</code> <span class="text-gray-600">Must NOT include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-blue-100 text-blue-800 rounded text-xs whitespace-nowrap">&quot;exact phrase&quot;</code> <span class="text-gray-600">Match exact phrase</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-gray-100 text-gray-700 rounded text-xs whitespace-nowrap">word</code> <span class="text-gray-600">Regular search term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-purple-100 text-purple-800 rounded text-xs whitespace-nowrap">/regex/</code> <span class="text-gray-600">Regular expression pattern</span></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><svg class="w-4 h-4 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>\n          Special Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">category:tech</code> <span class="text-gray-600"> Filter by category</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">domain:github.com</code> <span class="text-gray-600"> Filter by domain</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">folder:&quot;Work/Projects&quot;</code> <span class="text-gray-600"> Filter by folder path</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">accessed:yes</code> <span class="text-gray-600"> Has been accessed (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">stale:yes</code> <span class="text-gray-600"> Old &amp; never accessed</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-teal-100 text-teal-800 rounded text-xs whitespace-nowrap">enriched:yes</code> <span class="text-gray-600"> Has metadata (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-700 rounded text-xs whitespace-nowrap">dead:yes</code> <span class="text-gray-600"> Dead links (yes/no)</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><span class="text-lg"></span>\n          Platform Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">platform:youtube</code> <span class="text-gray-600"> Filter by platform (youtube, github, medium, etc.)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">channel:@mkbhd</code> <span class="text-gray-600"> YouTube channel (with or without @)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">repo:facebook/react</code> <span class="text-gray-600"> GitHub repository (owner/repo)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">author:username</code> <span class="text-gray-600"> Blog/article author</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">type:video</code> <span class="text-gray-600"> Content type (video, issue, article, repo, pr)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">hasimage:yes</code> <span class="text-gray-600"> Has thumbnail image (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">playlist:PLxxx</code> <span class="text-gray-600"> YouTube playlist ID</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><p class="text-xs text-gray-500"><strong>Example:</strong> <code class="bg-gray-100 px-1 rounded">javascript +tutorial -video &quot;best practices&quot;</code></p> <p class="text-xs text-gray-500 mt-1"><strong>With filters:</strong> <code class="bg-gray-100 px-1 rounded">domain:github.com category:development enriched:yes</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Platform:</strong> <code class="bg-gray-100 px-1 rounded">platform:youtube channel:@fireship type:video</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Regex:</strong> <code class="bg-gray-100 px-1 rounded">/react.*hooks?/</code></p></div>',M(e,"class","absolute z-20 w-full mt-2 p-4 bg-white border border-gray-200 rounded-lg shadow-lg max-h-[70vh] overflow-y-auto")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function _l(e){let n,i,s,o,a,l,c,u,d,h,f,b,x,v=e[0]&&ml(e),k=e[0]&&(e[4].positive.length>0||e[4].negative.length>0||e[4].phrases.length>0||e[4].regexPatterns.length>0)&&bl(e),C=e[3]&&kl();return{c(){n=y("div"),i=y("div"),s=y("div"),o=y("div"),o.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',a=w(),l=y("input"),c=w(),v&&v.c(),u=w(),d=y("button"),d.innerHTML='<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',h=w(),k&&k.c(),f=w(),C&&C.c(),M(o,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),M(l,"type","text"),M(l,"placeholder",e[1]),M(l,"class","block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"),M(l,"autocomplete","off"),M(l,"spellcheck","false"),M(s,"class","relative flex-1"),M(d,"class","p-2.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg border border-gray-300 transition-colors"),M(d,"type","button"),M(d,"title","Search help"),M(i,"class","flex items-center gap-2"),M(n,"class","relative mb-4")},m(t,r){g(t,n,r),p(n,i),p(i,s),p(s,o),p(s,a),p(s,l),e[9](l),D(l,e[0]),p(s,c),v&&v.m(s,null),p(i,u),p(i,d),p(n,h),k&&k.m(n,null),p(n,f),C&&C.m(n,null),b||(x=[_(l,"input",e[10]),_(l,"input",e[5]),_(l,"keydown",e[6]),_(d,"click",e[8])],b=!0)},p(t,[e]){2&e&&M(l,"placeholder",t[1]),1&e&&l.value!==t[0]&&D(l,t[0]),t[0]?v?v.p(t,e):(v=ml(t),v.c(),v.m(s,null)):v&&(v.d(1),v=null),t[0]&&(t[4].positive.length>0||t[4].negative.length>0||t[4].phrases.length>0||t[4].regexPatterns.length>0)?k?k.p(t,e):(k=bl(t),k.c(),k.m(n,f)):k&&(k.d(1),k=null),t[3]?C||(C=kl(),C.c(),C.m(n,null)):C&&(C.d(1),C=null)},i:t,o:t,d(t){t&&m(n),e[9](null),v&&v.d(),k&&k.d(),C&&C.d(),b=!1,r(x)}}}function Cl(t,e,n){let r;const i=I();let s,o,{value:a=""}=e,{placeholder:l='Search: use +term (must include), -term (exclude), "exact phrase"'}=e,c=!1;function u(){n(0,a=""),i("search",{query:""}),o?.focus()}return t.$$set=t=>{"value"in t&&n(0,a=t.value),"placeholder"in t&&n(1,l=t.placeholder)},t.$$.update=()=>{1&t.$$.dirty&&n(4,r=function(t){if(!t)return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[]};const e=[],n=[],r=[],i=[],s=[];(t.match(/\/([^\/]+)\/([gimsuvy]*)?/g)||[]).forEach(t=>s.push(t));let o=t.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();return(o.match(/"([^"]+)"/g)||[]).forEach(t=>r.push(t.slice(1,-1))),o=o.replace(/"[^"]+"/g,"").trim(),o.split(/\s+/).filter(t=>t.length>0).forEach(t=>{t.startsWith("+")&&t.length>1?e.push(t.slice(1)):t.startsWith("-")&&t.length>1?n.push(t.slice(1)):i.push(t)}),{positive:e,negative:n,phrases:r,regular:i,regexPatterns:s}}(a))},[a,l,o,c,r,function(t){n(0,a=t.target.value),clearTimeout(s),s=setTimeout(()=>{i("search",{query:a})},200)},function(t){"Escape"===t.key?u():"Enter"===t.key&&(clearTimeout(s),i("search",{query:a}))},u,function(){n(3,c=!c)},function(t){z[t?"unshift":"push"](()=>{o=t,n(2,o)})},function(){a=this.value,n(0,a)}]}class Ml extends ut{constructor(t){super(),ct(this,t,Cl,_l,s,{value:0,placeholder:1})}}var Sl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Al(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dl={exports:{}};Dl.exports=function(){
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation.
	    Permission to use, copy, modify, and/or distribute this software for any
	    purpose with or without fee is hereby granted.
	    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	    PERFORMANCE OF THIS SOFTWARE.
	    ***************************************************************************** */
var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};function r(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Sl,s=Object.keys,o=Array.isArray;function a(t,e){return"object"!=typeof e||s(e).forEach(function(n){t[n]=e[n]}),t}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function u(t,e){return c.call(t,e)}function d(t,e){"function"==typeof e&&(e=e(l(t))),("undefined"==typeof Reflect?s:Reflect.ownKeys)(e).forEach(function(n){f(t,n,e[n])})}var h=Object.defineProperty;function f(t,e,n,r){h(t,e,a(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(t){return{from:function(e){return t.prototype=Object.create(e.prototype),f(t.prototype,"constructor",t),{extend:d.bind(null,t.prototype)}}}}var g=Object.getOwnPropertyDescriptor;function m(t,e){var n;return g(t,e)||(n=l(t))&&m(n,e)}var b=[].slice;function y(t,e,n){return b.call(t,e,n)}function x(t,e){return e(t)}function v(t){if(!t)throw new Error("Assertion Failed")}function w(t){i.setImmediate?setImmediate(t):setTimeout(t,0)}function k(t,e){return t.reduce(function(t,n,r){var i=e(n,r);return i&&(t[i[0]]=i[1]),t},{})}function _(t,e){if("string"==typeof e&&u(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var s=_(t,e[r]);n.push(s)}return n}var o=e.indexOf(".");if(-1!==o){var a=t[e.substr(0,o)];return null==a?void 0:_(a,e.substr(o+1))}}function C(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){v("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)C(t,e[r],n[r])}else{var s=e.indexOf(".");if(-1!==s){var a=e.substr(0,s),l=e.substr(s+1);if(""===l)void 0===n?o(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var c=t[a];c&&u(t,a)||(c=t[a]={}),C(c,l,n)}}else void 0===n?o(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function M(t,e){"string"==typeof e?C(t,e,void 0):"length"in e&&[].map.call(e,function(e){C(t,e,void 0)})}function S(t){var e={};for(var n in t)u(t,n)&&(e[n]=t[n]);return e}var A=[].concat;function D(t){return A.apply([],t)}var P="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return i[t]}),E=new Set(P.map(function(t){return i[t]}));function T(t){var e={};for(var n in t)if(u(t,n)){var r=t[n];e[n]=!r||"object"!=typeof r||E.has(r.constructor)?r:T(r)}return e}function O(t){for(var e in t)if(u(t,e))return!1;return!0}var $=null;function L(t){$=new WeakMap;var e=R(t);return $=null,e}function R(t){if(!t||"object"!=typeof t)return t;var e=$.get(t);if(e)return e;if(o(t)){e=[],$.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(R(t[n]))}else if(E.has(t.constructor))e=t;else{var i=l(t);for(var s in e=i===Object.prototype?{}:Object.create(i),$.set(t,e),t)u(t,s)&&(e[s]=R(t[s]))}return e}var B={}.toString;function I(t){return B.call(t).slice(8,-1)}var j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",F="symbol"==typeof j?function(t){var e;return null!=t&&(e=t[j])&&e.apply(t)}:function(){return null};function z(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n>=0}var N={};function W(t){var e,n,r,i;if(1===arguments.length){if(o(t))return t.slice();if(this===N&&"string"==typeof t)return[t];if(i=F(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var V="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},H=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],q=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(H),U={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(t,e){this.name=t,this.message=e}function Y(t,e){return t+". Errors: "+Object.keys(e).map(function(t){return e[t].toString()}).filter(function(t,e,n){return n.indexOf(t)===e}).join("\n")}function Q(t,e,n,r){this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Y(t,e)}function G(t,e){this.name="BulkError",this.failures=Object.keys(e).map(function(t){return e[t]}),this.failuresByPos=e,this.message=Y(t,this.failures)}p(K).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(Q).from(K),p(G).from(K);var X=q.reduce(function(t,e){return t[e]=e+"Error",t},{}),J=K,Z=q.reduce(function(t,e){var n=e+"Error";function r(t,r){this.name=n,t?"string"==typeof t?(this.message="".concat(t).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=U[e]||n,this.inner=null)}return p(r).from(J),t[e]=r,t},{});Z.Syntax=SyntaxError,Z.Type=TypeError,Z.Range=RangeError;var tt=H.reduce(function(t,e){return t[e+"Error"]=Z[e],t},{});function et(t,e){if(!t||t instanceof K||t instanceof TypeError||t instanceof SyntaxError||!t.name||!tt[t.name])return t;var n=new tt[t.name](e||t.message,t);return"stack"in t&&f(n,"stack",{get:function(){return this.inner.stack}}),n}var nt=q.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=Z[e]),t},{});function rt(){}function it(t){return t}function st(t,e){return null==t||t===it?e:function(n){return e(t(n))}}function ot(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function at(t,e){return t===rt?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ot(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ot(i,this.onerror):i),void 0!==s?s:n}}function lt(t,e){return t===rt?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ot(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ot(r,this.onerror):r)}}function ct(t,e){return t===rt?e:function(n){var r=t.apply(this,arguments);a(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ot(i,this.onsuccess):i),s&&(this.onerror=this.onerror?ot(s,this.onerror):s),void 0===r?void 0===o?void 0:o:a(r,o)}}function ut(t,e){return t===rt?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function dt(t,e){return t===rt?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}nt.ModifyError=Q,nt.DexieError=K,nt.BulkError=G;var ht="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ft(t,e){ht=t}var pt={},gt=100,mt="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,l(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,l(e),t]}(),bt=mt[0],yt=mt[1],xt=mt[2],vt=yt&&yt.then,wt=bt&&bt.constructor,kt=!!xt;function _t(){queueMicrotask(Vt)}var Ct=function(t,e){Ot.push([t,e]),St&&(_t(),St=!1)},Mt=!0,St=!0,At=[],Dt=[],Pt=it,Et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:rt,pgp:!1,env:{},finalize:rt},Tt=Et,Ot=[],$t=0,Lt=[];function Rt(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=Tt;if("function"!=typeof t){if(t!==pt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ft(this,this._value))}this._state=null,this._value=null,++e.ref,jt(this,t)}var Bt={get:function(){var t=Tt,e=ne;function n(n,r){var i=this,s=!t.global&&(t!==Tt||e!==ne),o=s&&!oe(),a=new Rt(function(e,a){Nt(i,new It(fe(n,t,s,o),fe(r,t,s,o),e,a,t))});return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return n.prototype=pt,n},set:function(t){f(this,"then",t&&t.prototype===pt?Bt:{get:function(){return t},set:Bt.set})}};function It(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function jt(t,e){try{e(function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Ht();e&&"function"==typeof e.then?jt(t,function(t,n){e instanceof Rt?e._then(t,n):e.then(t,n)}):(t._state=!0,t._value=e,zt(t)),n&&qt()}},Ft.bind(null,t))}catch(e){Ft(t,e)}}function Ft(t,e){if(Dt.push(e),null===t._state){var n=t._lib&&Ht();e=Pt(e),t._state=!1,t._value=e,Yt(t),zt(t),n&&qt()}}function zt(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Nt(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===$t&&(++$t,Ct(function(){0===--$t&&Ut()},[]))}function Nt(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++$t,Ct(Wt,[n,t,e])}else t._listeners.push(e)}function Wt(t,e,n){try{var r,i=e._value;!e._state&&Dt.length&&(Dt=[]),r=ht&&e._consoleTask?e._consoleTask.run(function(){return t(i)}):t(i),e._state||-1!==Dt.indexOf(i)||Qt(e),n.resolve(r)}catch(t){n.reject(t)}finally{0===--$t&&Ut(),--n.psd.ref||n.psd.finalize()}}function Vt(){he(Et,function(){Ht()&&qt()})}function Ht(){var t=Mt;return Mt=!1,St=!1,t}function qt(){var t,e,n;do{for(;Ot.length>0;)for(t=Ot,Ot=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Ot.length>0);Mt=!0,St=!0}function Ut(){var t=At;At=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=Lt.slice(0),n=e.length;n;)e[--n]()}function Kt(t){function e(){t(),Lt.splice(Lt.indexOf(e),1)}Lt.push(e),++$t,Ct(function(){0===--$t&&Ut()},[])}function Yt(t){At.some(function(e){return e._value===t._value})||At.push(t)}function Qt(t){for(var e=At.length;e;)if(At[--e]._value===t._value)return void At.splice(e,1)}function Gt(t){return new Rt(pt,!1,t)}function Xt(t,e){var n=Tt;return function(){var r=Ht(),i=Tt;try{return ue(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{ue(i,!1),r&&qt()}}}d(Rt.prototype,{then:Bt,_then:function(t,e){Nt(this,new It(null,null,t,e,Tt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?n(t):Gt(t)}):this.then(null,function(t){return t&&t.name===e?n(t):Gt(t)})},finally:function(t){return this.then(function(e){return Rt.resolve(t()).then(function(){return e})},function(e){return Rt.resolve(t()).then(function(){return Gt(e)})})},timeout:function(t,e){var n=this;return t<1/0?new Rt(function(r,i){var s=setTimeout(function(){return i(new Z.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Rt.prototype,Symbol.toStringTag,"Dexie.Promise"),Et.env=de(),d(Rt,{all:function(){var t=W.apply(null,arguments).map(ae);return new Rt(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach(function(i,s){return Rt.resolve(i).then(function(n){t[s]=n,--r||e(t)},n)})})},resolve:function(t){return t instanceof Rt?t:t&&"function"==typeof t.then?new Rt(function(e,n){t.then(e,n)}):new Rt(pt,!0,t)},reject:Gt,race:function(){var t=W.apply(null,arguments).map(ae);return new Rt(function(e,n){t.map(function(t){return Rt.resolve(t).then(e,n)})})},PSD:{get:function(){return Tt},set:function(t){return Tt=t}},totalEchoes:{get:function(){return ne}},newPSD:ie,usePSD:he,scheduler:{get:function(){return Ct},set:function(t){Ct=t}},rejectionMapper:{get:function(){return Pt},set:function(t){Pt=t}},follow:function(t,e){return new Rt(function(n,r){return ie(function(e,n){var r=Tt;r.unhandleds=[],r.onunhandled=n,r.finalize=ot(function(){var t=this;Kt(function(){0===t.unhandleds.length?e():n(t.unhandleds[0])})},r.finalize),t()},e,n,r)})}}),wt&&(wt.allSettled&&f(Rt,"allSettled",function(){var t=W.apply(null,arguments).map(ae);return new Rt(function(e){0===t.length&&e([]);var n=t.length,r=new Array(n);t.forEach(function(t,i){return Rt.resolve(t).then(function(t){return r[i]={status:"fulfilled",value:t}},function(t){return r[i]={status:"rejected",reason:t}}).then(function(){return--n||e(r)})})})}),wt.any&&"undefined"!=typeof AggregateError&&f(Rt,"any",function(){var t=W.apply(null,arguments).map(ae);return new Rt(function(e,n){0===t.length&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(t,s){return Rt.resolve(t).then(function(t){return e(t)},function(t){i[s]=t,--r||n(new AggregateError(i))})})})}),wt.withResolvers&&(Rt.withResolvers=wt.withResolvers));var Jt={awaits:0,echoes:0,id:0},Zt=0,te=[],ee=0,ne=0,re=0;function ie(t,e,n,r){var i=Tt,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++re,Et.env,s.env=kt?{Promise:Rt,PromiseProp:{value:Rt,configurable:!0,writable:!0},all:Rt.all,race:Rt.race,allSettled:Rt.allSettled,any:Rt.any,resolve:Rt.resolve,reject:Rt.reject}:{},e&&a(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=he(s,t,n,r);return 0===s.ref&&s.finalize(),o}function se(){return Jt.id||(Jt.id=++Zt),++Jt.awaits,Jt.echoes+=gt,Jt.id}function oe(){return!!Jt.awaits&&(0===--Jt.awaits&&(Jt.id=0),Jt.echoes=Jt.awaits*gt,!0)}function ae(t){return Jt.echoes&&t&&t.constructor===wt?(se(),t.then(function(t){return oe(),t},function(t){return oe(),ge(t)})):t}function le(t){++ne,Jt.echoes&&0!==--Jt.echoes||(Jt.echoes=Jt.awaits=Jt.id=0),te.push(Tt),ue(t,!0)}function ce(){var t=te[te.length-1];te.pop(),ue(t,!1)}function ue(t,e){var n=Tt;if((e?!Jt.echoes||ee++&&t===Tt:!ee||--ee&&t===Tt)||queueMicrotask(e?le.bind(null,t):ce),t!==Tt&&(Tt=t,n===Et&&(Et.env=de()),kt)){var r=Et.env.Promise,s=t.env;(n.global||t.global)&&(Object.defineProperty(i,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function de(){var t=i.Promise;return kt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function he(t,e,n,r,i){var s=Tt;try{return ue(t,!0),e(n,r,i)}finally{ue(s,!1)}}function fe(t,e,n,r){return"function"!=typeof t?t:function(){var i=Tt;n&&se(),ue(e,!0);try{return t.apply(this,arguments)}finally{ue(i,!1),r&&queueMicrotask(oe)}}}function pe(t){Promise===wt&&0===Jt.echoes?0===ee?t():enqueueNativeMicroTask(t):setTimeout(t,0)}-1===(""+vt).indexOf("[native code]")&&(se=oe=rt);var ge=Rt.reject;function me(t,e,n,r){if(t.idbdb&&(t._state.openComplete||Tt.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===X.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return me(t,e,n,r)})):ge(i)}return i._promise(e,function(t,e){return ie(function(){return Tt.trans=i,r(t,e,i)})}).then(function(t){if("readwrite"===e)try{i.idbtrans.commit()}catch(t){}return"readonly"===e?t:i._completion.then(function(){return t})})}if(t._state.openComplete)return ge(new Z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return ge(new Z.DatabaseClosed);t.open().catch(rt)}return t._state.dbReadyPromise.then(function(){return me(t,e,n,r)})}var be="4.2.1",ye=String.fromCharCode(65535),xe=-1/0,ve="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",we="String expected.",ke=[],_e="__dbnames",Ce="readonly",Me="readwrite";function Se(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Ae={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function De(t){return"string"!=typeof t||/\./.test(t)?function(t){return t}:function(e){return void 0===e[t]&&t in e&&delete(e=L(e))[t],e}}function Pe(){throw Z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ee(t,e){try{var n=$e(t),r=$e(e);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Oe(Le(t),Le(e));case"Array":return Te(t,e)}}catch(t){}return NaN}function Te(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,s=0;s<i;++s){var o=Ee(t[s],e[s]);if(0!==o)return o}return n===r?0:n<r?-1:1}function Oe(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,s=0;s<i;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===r?0:n<r?-1:1}function $e(t){var e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";var n=I(t);return"ArrayBuffer"===n?"binary":n}function Le(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Re(t,e,n){var r=t.schema.yProps;return r?(e&&n.numFailures>0&&(e=e.filter(function(t,e){return!n.failures[e]})),Promise.all(r.map(function(n){var r=n.updatesTable;return e?t.db.table(r).where("k").anyOf(e).delete():t.db.table(r).clear()})).then(function(){return n})):n}var Be=function(){function t(t){this["@@propmod"]=t}return t.prototype.execute=function(t){var e,n=this["@@propmod"];if(void 0!==n.add){var i=n.add;if(o(i))return r(r([],o(t)?t:[],!0),i,!0).sort();if("number"==typeof i)return(Number(t)||0)+i;if("bigint"==typeof i)try{return BigInt(t)+i}catch(t){return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(void 0!==n.remove){var s=n.remove;if(o(s))return o(t)?t.filter(function(t){return!s.includes(t)}).sort():[];if("number"==typeof s)return Number(t)-s;if("bigint"==typeof s)try{return BigInt(t)-s}catch(t){return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}var a=null===(e=n.replacePrefix)||void 0===e?void 0:e[0];return a&&"string"==typeof t&&t.startsWith(a)?n.replacePrefix[1]+t.substring(a.length):t},t}();function Ie(t,e){for(var n=s(e),r=n.length,i=!1,o=0;o<r;++o){var a=n[o],l=e[a],c=_(t,a);l instanceof Be?(C(t,a,l.execute(c)),i=!0):c!==l&&(C(t,a,l),i=!0)}return i}var je=function(){function t(){}return t.prototype._trans=function(t,e,n){var r=this._tx||Tt.trans,i=this.name,s=ht&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===t?"read":"write"," ").concat(this.name));function o(t,n,r){if(!r.schema[i])throw new Z.NotFound("Table "+i+" not part of transaction");return e(r.idbtrans,r)}var a=Ht();try{var l=r&&r.db._novip===this.db._novip?r===Tt.trans?r._promise(t,o,n):ie(function(){return r._promise(t,o,n)},{trans:r,transless:Tt.transless||Tt}):me(this.db,t,[this.name],o);return s&&(l._consoleTask=s,l=l.catch(function(t){return console.trace(t),ge(t)})),l}finally{a&&qt()}},t.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):null==t?ge(new Z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(e){return n.core.get({trans:e,key:t}).then(function(t){return n.hook.reading.fire(t)})}).then(e)},t.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(o(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var e=s(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(t){if(t.compound&&e.every(function(e){return t.keyPath.indexOf(e)>=0})){for(var n=0;n<e.length;++n)if(-1===e.indexOf(t.keyPath[n]))return!1;return!0}return!1}).sort(function(t,e){return t.keyPath.length-e.keyPath.length})[0];if(n&&this.db._maxKey!==ye){var r=n.keyPath.slice(0,e.length);return this.where(r).equals(r.map(function(e){return t[e]}))}!n&&ht&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(e.join("+"),"]"));var i=this.schema.idxByName;function a(t,e){return 0===Ee(t,e)}var l=e.reduce(function(e,n){var r=e[0],s=e[1],l=i[n],c=t[n];return[r||l,r||!l?Se(s,l&&l.multi?function(t){var e=_(t,n);return o(e)&&e.some(function(t){return a(c,t)})}:function(t){return a(c,_(t,n))}):s]},[null,null]),c=l[0],u=l[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(u):n?this.filter(u):this.where(e).equals("")},t.prototype.filter=function(t){return this.toCollection().and(t)},t.prototype.count=function(t){return this.toCollection().count(t)},t.prototype.offset=function(t){return this.toCollection().offset(t)},t.prototype.limit=function(t){return this.toCollection().limit(t)},t.prototype.each=function(t){return this.toCollection().each(t)},t.prototype.toArray=function(t){return this.toCollection().toArray(t)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,o(t)?"[".concat(t.join("+"),"]"):t))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(t){var n=this,r=n.db,i=n.name;this.schema.mappedClass=t,t.prototype instanceof Pe&&(t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),Object.defineProperty(n.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),n.prototype.table=function(){return i},n}(t));for(var s=new Set,o=t.prototype;o;o=l(o))Object.getOwnPropertyNames(o).forEach(function(t){return s.add(t)});var a=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(!s.has(r))try{n[r]=e[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=a,this.hook("reading",a),t},t.prototype.defineClass=function(){function t(t){a(this,t)}return this.mapToClass(t)},t.prototype.add=function(t,e){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,o=t;return s&&i&&(o=De(s)(t)),this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[o]})}).then(function(t){return t.numFailures?Rt.reject(t.failures[0]):t.lastResult}).then(function(e){if(s)try{C(t,s,e)}catch(t){}return e})},t.prototype.upsert=function(t,e){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return n.core.get({trans:i,key:t}).then(function(s){var o=null!=s?s:{};return Ie(o,e),r&&C(o,r,t),n.core.mutate({trans:i,type:"put",values:[o],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[e]}}).then(function(t){return t.numFailures?Rt.reject(t.failures[0]):!!s})})})},t.prototype.update=function(t,e){if("object"!=typeof t||o(t))return this.where(":id").equals(t).modify(e);var n=_(t,this.schema.primKey.keyPath);return void 0===n?ge(new Z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)},t.prototype.put=function(t,e){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,o=t;return s&&i&&(o=De(s)(t)),this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"put",values:[o],keys:null!=e?[e]:null})}).then(function(t){return t.numFailures?Rt.reject(t.failures[0]):t.lastResult}).then(function(e){if(s)try{C(t,s,e)}catch(t){}return e})},t.prototype.delete=function(t){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]}).then(function(n){return Re(e,[t],n)}).then(function(t){return t.numFailures?Rt.reject(t.failures[0]):void 0})})},t.prototype.clear=function(){var t=this;return this._trans("readwrite",function(e){return t.core.mutate({trans:e,type:"deleteRange",range:Ae}).then(function(e){return Re(t,null,e)})}).then(function(t){return t.numFailures?Rt.reject(t.failures[0]):void 0})},t.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",function(n){return e.core.getMany({keys:t,trans:n}).then(function(t){return t.map(function(t){return e.hook.reading.fire(t)})})})},t.prototype.bulkAdd=function(t,e,n){var r=this,i=Array.isArray(e)?e:void 0,s=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(e){var n=r.schema.primKey,o=n.auto,a=n.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&o?t.map(De(a)):t;return r.core.mutate({trans:e,type:"add",keys:i,values:c,wantResults:s}).then(function(t){var e=t.numFailures,n=t.results,i=t.lastResult,o=t.failures;if(0===e)return s?n:i;throw new G("".concat(r.name,".bulkAdd(): ").concat(e," of ").concat(l," operations failed"),o)})})},t.prototype.bulkPut=function(t,e,n){var r=this,i=Array.isArray(e)?e:void 0,s=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(e){var n=r.schema.primKey,o=n.auto,a=n.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&o?t.map(De(a)):t;return r.core.mutate({trans:e,type:"put",keys:i,values:c,wantResults:s}).then(function(t){var e=t.numFailures,n=t.results,i=t.lastResult,o=t.failures;if(0===e)return s?n:i;throw new G("".concat(r.name,".bulkPut(): ").concat(e," of ").concat(l," operations failed"),o)})})},t.prototype.bulkUpdate=function(t){var e=this,n=this.core,r=t.map(function(t){return t.key}),i=t.map(function(t){return t.changes}),s=[];return this._trans("readwrite",function(o){return n.getMany({trans:o,keys:r,cache:"clone"}).then(function(a){var l=[],c=[];t.forEach(function(t,n){var r=t.key,i=t.changes,o=a[n];if(o){for(var u=0,d=Object.keys(i);u<d.length;u++){var h=d[u],f=i[h];if(h===e.schema.primKey.keyPath){if(0!==Ee(f,r))throw new Z.Constraint("Cannot update primary key in bulkUpdate()")}else C(o,h,f)}s.push(n),l.push(r),c.push(o)}});var u=l.length;return n.mutate({trans:o,type:"put",keys:l,values:c,updates:{keys:r,changeSpecs:i}}).then(function(t){var n=t.numFailures,r=t.failures;if(0===n)return u;for(var i=0,o=Object.keys(r);i<o.length;i++){var a=o[i],l=s[Number(a)];if(null!=l){var c=r[a];delete r[a],r[l]=c}}throw new G("".concat(e.name,".bulkUpdate(): ").concat(n," of ").concat(u," operations failed"),r)})})})},t.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"delete",keys:t}).then(function(n){return Re(e,t,n)})}).then(function(t){var r=t.numFailures,i=t.lastResult,s=t.failures;if(0===r)return i;throw new G("".concat(e.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),s)})},t}();function Fe(t){var e={},n=function(n,r){if(r){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return e[n].subscribe.apply(null,s),t}if("string"==typeof n)return e[n]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(t,r,i){if("object"==typeof t)return l(t);r||(r=ut),i||(i=rt);var s={subscribers:[],fire:i,subscribe:function(t){-1===s.subscribers.indexOf(t)&&(s.subscribers.push(t),s.fire=r(s.fire,t))},unsubscribe:function(t){s.subscribers=s.subscribers.filter(function(e){return e!==t}),s.fire=s.subscribers.reduce(r,i)}};return e[t]=n[t]=s,s}function l(t){s(t).forEach(function(e){var n=t[e];if(o(n))a(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new Z.InvalidArgument("Invalid event config");var r=a(e,it,function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];r.subscribers.forEach(function(t){w(function(){t.apply(null,e)})})})}})}}function ze(t,e){return p(e).from({prototype:t}),e}function Ne(t){return ze(je.prototype,function(e,n,r){this.db=t,this._tx=r,this.name=e,this.schema=n,this.hook=t._allTables[e]?t._allTables[e].hook:Fe(null,{creating:[at,rt],reading:[st,it],updating:[ct,rt],deleting:[lt,rt]})})}function We(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Ve(t,e){t.filter=Se(t.filter,e)}function He(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Se(r(),e())}:e,t.justLimit=n&&!r}function qe(t,e){t.isMatch=Se(t.isMatch,e)}function Ue(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new Z.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Ke(t,e,n){var r=Ue(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function Ye(t,e,n,r){var i=t.replayFilter?Se(t.filter,t.replayFilter()):t.filter;if(t.or){var s={},o=function(t,n,r){if(!i||i(n,r,function(t){return n.stop(t)},function(t){return n.fail(t)})){var o=n.primaryKey,a=""+o;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(o)),u(s,a)||(s[a]=!0,e(t,n,r))}};return Promise.all([t.or._iterate(o,n),Qe(Ke(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return Qe(Ke(t,r,n),Se(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Qe(t,e,n,r){var i=Xt(r?function(t,e,i){return n(r(t),e,i)}:n);return t.then(function(t){if(t)return t.start(function(){var n=function(){return t.continue()};e&&!e(t,function(t){return n=t},function(e){t.stop(e),n=rt},function(e){t.fail(e),n=rt})||i(t.value,t,function(t){return n=t}),n()})})}var Ge=function(){function t(){}return t.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,ge.bind(null,n.error)):n.table._trans("readonly",t).then(e)},t.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,ge.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},t.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=Se(e.algorithm,t)},t.prototype._iterate=function(t,e){return Ye(this._ctx,t,e,this._ctx.table.core)},t.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&a(n,t),e._ctx=n,e},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(t){var e=this._ctx;return this._read(function(n){return Ye(e,t,n,e.table.core)})},t.prototype.count=function(t){var e=this;return this._read(function(t){var n=e._ctx,r=n.table.core;if(We(n,!0))return r.count({trans:t,query:{index:Ue(n,r.schema),range:n.range}}).then(function(t){return Math.min(t,n.limit)});var i=0;return Ye(n,function(){return++i,!1},t,r).then(function(){return i})}).then(t)},t.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),r=n[0],i=n.length-1;function s(t,e){return e?s(t[n[e]],e-1):t[r]}var o="next"===this._ctx.dir?1:-1;function a(t,e){return Ee(s(t,i),s(e,i))*o}return this.toArray(function(t){return t.sort(a)}).then(e)},t.prototype.toArray=function(t){var e=this;return this._read(function(t){var n=e._ctx;if("next"===n.dir&&We(n,!0)&&n.limit>0){var r=n.valueMapper,i=Ue(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then(function(t){var e=t.result;return r?e.map(r):e})}var s=[];return Ye(n,function(t){return s.push(t)},t,n.table.core).then(function(){return s})},t)},t.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,We(e)?He(e,function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n(function(){t.advance(e),e=0}),!1))}}):He(e,function(){var e=t;return function(){return--e<0}})),this},t.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),He(this._ctx,function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}},!0),this},t.prototype.until=function(t,e){return Ve(this._ctx,function(n,r,i){return!t(n.value)||(r(i),e)}),this},t.prototype.first=function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},t.prototype.last=function(t){return this.reverse().first(t)},t.prototype.filter=function(t){return Ve(this._ctx,function(e){return t(e.value)}),qe(this._ctx,t),this},t.prototype.and=function(t){return this.filter(t)},t.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},t.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.key,n)})},t.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},t.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.primaryKey,n)})},t.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.key)}).then(function(){return n}).then(t)},t.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&We(e,!0)&&e.limit>0)return this._read(function(t){var n=Ue(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})}).then(function(t){return t.result}).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.primaryKey)}).then(function(){return n}).then(t)},t.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},t.prototype.firstKey=function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},t.prototype.lastKey=function(t){return this.reverse().firstKey(t)},t.prototype.distinct=function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return Ve(this._ctx,function(t){var e=t.primaryKey.toString(),r=u(n,e);return n[e]=!0,!r}),this},t.prototype.modify=function(t){var e=this,n=this._ctx;return this._write(function(r){var i;i="function"==typeof t?t:function(e){return Ie(e,t)};var o=n.table.core,a=o.schema.primaryKey,l=a.outbound,c=a.extractKey,u=200,d=e.db._options.modifyChunkSize;d&&(u="object"==typeof d?d[o.name]||d["*"]||200:d);var h=[],f=0,p=[],g=function(t,e){var n=e.failures,r=e.numFailures;f+=t-r;for(var i=0,o=s(n);i<o.length;i++){var a=o[i];h.push(n[a])}},m=t===Xe;return e.clone().primaryKeys().then(function(e){var s=We(n)&&n.limit===1/0&&("function"!=typeof t||m)&&{index:n.index,range:n.range},a=function(d){var h=Math.min(u,e.length-d),f=e.slice(d,d+h);return(m?Promise.resolve([]):o.getMany({trans:r,keys:f,cache:"immutable"})).then(function(p){var b=[],y=[],x=l?[]:null,v=m?f:[];if(!m)for(var w=0;w<h;++w){var k=p[w],_={value:L(k),primKey:e[d+w]};!1!==i.call(_,_.value,_)&&(null==_.value?v.push(e[d+w]):l||0===Ee(c(k),c(_.value))?(y.push(_.value),l&&x.push(e[d+w])):(v.push(e[d+w]),b.push(_.value)))}return Promise.resolve(b.length>0&&o.mutate({trans:r,type:"add",values:b}).then(function(t){for(var e in t.failures)v.splice(parseInt(e),1);g(b.length,t)})).then(function(){return(y.length>0||s&&"object"==typeof t)&&o.mutate({trans:r,type:"put",keys:x,values:y,criteria:s,changeSpec:"function"!=typeof t&&t,isAdditionalChunk:d>0}).then(function(t){return g(y.length,t)})}).then(function(){return(v.length>0||s&&m)&&o.mutate({trans:r,type:"delete",keys:v,criteria:s,isAdditionalChunk:d>0}).then(function(t){return Re(n.table,v,t)}).then(function(t){return g(v.length,t)})}).then(function(){return e.length>d+h&&a(d+u)})})};return a(0).then(function(){if(h.length>0)throw new Q("Error modifying one or more objects",h,f,p);return e.length})})})},t.prototype.delete=function(){var t=this._ctx,e=t.range;return!We(t)||t.table.schema.yProps||!t.isPrimKey&&3!==e.type?this.modify(Xe):this._write(function(n){var r=t.table.core.schema.primaryKey,i=e;return t.table.core.count({trans:n,query:{index:r,range:i}}).then(function(e){return t.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(t){var n=t.failures,r=t.numFailures;if(r)throw new Q("Could not delete some values",Object.keys(n).map(function(t){return n[t]}),e-r);return e-r})})})},t}(),Xe=function(t,e){return e.value=null};function Je(t){return ze(Ge.prototype,function(e,n){this.db=t;var r=Ae,i=null;if(n)try{r=n()}catch(t){i=t}var s=e._ctx,o=s.table,a=o.hook.reading.fire;this._ctx={table:o,index:s.index,isPrimKey:!s.index||o.schema.primKey.keyPath&&s.index===o.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:s.or,valueMapper:a!==it?a:null}})}function Ze(t,e){return t<e?-1:t===e?0:1}function tn(t,e){return t>e?-1:t===e?0:1}function en(t,e,n){var r=t instanceof un?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function nn(t){return new t.Collection(t,function(){return cn("")}).limit(0)}function rn(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function sn(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function on(t,e,n,r,i,s){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],c)<0&&(a=l)}return o<r.length&&"next"===s?t+n.substr(t.length):o<t.length&&"prev"===s?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function an(t,e,n,r){var i,s,o,a,l,c,u,d=n.length;if(!n.every(function(t){return"string"==typeof t}))return en(t,we);function h(t){i=rn(t),s=sn(t),o="next"===t?Ze:tn;var e=n.map(function(t){return{lower:s(t),upper:i(t)}}).sort(function(t,e){return o(t.lower,e.lower)});a=e.map(function(t){return t.upper}),l=e.map(function(t){return t.lower}),c=t,u="next"===t?"":r}h("next");var f=new t.Collection(t,function(){return ln(a[0],l[d-1]+r)});f._ondirectionchange=function(t){h(t)};var p=0;return f._addAlgorithm(function(t,n,r){var i=t.key;if("string"!=typeof i)return!1;var h=s(i);if(e(h,l,p))return!0;for(var f=null,g=p;g<d;++g){var m=on(i,h,a[g],l[g],o,c);null===m&&null===f?p=g+1:(null===f||o(f,m)>0)&&(f=m)}return n(null!==f?function(){t.continue(f+u)}:r),!1}),f}function ln(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function cn(t){return{type:1,lower:t,upper:t}}var un=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(t,e,n,r){n=!1!==n,r=!0===r;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(n||r)&&(!n||!r)?nn(this):new this.Collection(this,function(){return ln(t,e,!n,!r)})}catch(t){return en(this,ve)}},t.prototype.equals=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return cn(t)})},t.prototype.above=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(t,void 0,!0)})},t.prototype.aboveOrEqual=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(t,void 0,!1)})},t.prototype.below=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(void 0,t,!1,!0)})},t.prototype.belowOrEqual=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(void 0,t)})},t.prototype.startsWith=function(t){return"string"!=typeof t?en(this,we):this.between(t,t+ye,!0,!0)},t.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):an(this,function(t,e){return 0===t.indexOf(e[0])},[t],ye)},t.prototype.equalsIgnoreCase=function(t){return an(this,function(t,e){return t===e[0]},[t],"")},t.prototype.anyOfIgnoreCase=function(){var t=W.apply(N,arguments);return 0===t.length?nn(this):an(this,function(t,e){return-1!==e.indexOf(t)},t,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var t=W.apply(N,arguments);return 0===t.length?nn(this):an(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},t,ye)},t.prototype.anyOf=function(){var t=this,e=W.apply(N,arguments),n=this._cmp;try{e.sort(n)}catch(t){return en(this,ve)}if(0===e.length)return nn(this);var r=new this.Collection(this,function(){return ln(e[0],e[e.length-1])});r._ondirectionchange=function(r){n="next"===r?t._ascending:t._descending,e.sort(n)};var i=0;return r._addAlgorithm(function(t,r,s){for(var o=t.key;n(o,e[i])>0;)if(++i===e.length)return r(s),!1;return 0===n(o,e[i])||(r(function(){t.continue(e[i])}),!1)}),r},t.prototype.notEqual=function(t){return this.inAnyRange([[xe,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var t=W.apply(N,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return en(this,ve)}var e=t.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[xe,e]]},null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(t,e){var n=this,r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(0===t.length)return nn(this);if(!t.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&i(t[0],t[1])<=0}))return en(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Z.InvalidArgument);var l=!e||!1!==e.includeLowers,c=e&&!0===e.includeUppers;function u(t,e){for(var n=0,i=t.length;n<i;++n){var s=t[n];if(r(e[0],s[1])<0&&r(e[1],s[0])>0){s[0]=o(s[0],e[0]),s[1]=a(s[1],e[1]);break}}return n===i&&t.push(e),t}var d,h=i;function f(t,e){return h(t[0],e[0])}try{(d=t.reduce(u,[])).sort(f)}catch(t){return en(this,ve)}var p=0,g=c?function(t){return i(t,d[p][1])>0}:function(t){return i(t,d[p][1])>=0},m=l?function(t){return s(t,d[p][0])>0}:function(t){return s(t,d[p][0])>=0};function b(t){return!g(t)&&!m(t)}var y=g,x=new this.Collection(this,function(){return ln(d[0][0],d[d.length-1][1],!l,!c)});return x._ondirectionchange=function(t){"next"===t?(y=g,h=i):(y=m,h=s),d.sort(f)},x._addAlgorithm(function(t,e,r){for(var s=t.key;y(s);)if(++p===d.length)return e(r),!1;return!!b(s)||(0===n._cmp(s,d[p][1])||0===n._cmp(s,d[p][0])||e(function(){h===i?t.continue(d[p][0]):t.continue(d[p][1])}),!1)}),x},t.prototype.startsWithAnyOf=function(){var t=W.apply(N,arguments);return t.every(function(t){return"string"==typeof t})?0===t.length?nn(this):this.inAnyRange(t.map(function(t){return[t,t+ye]})):en(this,"startsWithAnyOf() only works with strings")},t}();function dn(t){return ze(un.prototype,function(e,n,r){if(this.db=t,this._ctx={table:e,index:":id"===n?null:n,or:r},this._cmp=this._ascending=Ee,this._descending=function(t,e){return Ee(e,t)},this._max=function(t,e){return Ee(t,e)>0?t:e},this._min=function(t,e){return Ee(t,e)<0?t:e},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new Z.MissingAPI})}function hn(t){return Xt(function(e){return fn(e),t(e.target.error),!1})}function fn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var pn="storagemutated",gn="x-storagemutated-1",mn=Fe(null,pn),bn=function(){function t(){}return t.prototype._lock=function(){return v(!Tt.global),++this._reculock,1!==this._reculock||Tt.global||(Tt.lockOwnerFor=this),this},t.prototype._unlock=function(){if(v(!Tt.global),0===--this._reculock)for(Tt.global||(Tt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{he(t[1],t[0])}catch(t){}}return this},t.prototype._locked=function(){return this._reculock&&Tt.lockOwnerFor!==this},t.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(v(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Z.DatabaseClosed(r);case"MissingAPIError":throw new Z.MissingAPI(r.message,r);default:throw new Z.OpenFailed(r)}if(!this.active)throw new Z.TransactionInactive;return v(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Xt(function(n){fn(n),e._reject(t.error)}),t.onabort=Xt(function(n){fn(n),e.active&&e._reject(new Z.Abort(t.error)),e.active=!1,e.on("abort").fire(n)}),t.oncomplete=Xt(function(){e.active=!1,e._resolve(),"mutatedParts"in t&&mn.storagemutated.fire(t.mutatedParts)}),this},t.prototype._promise=function(t,e,n){var r=this;if("readwrite"===t&&"readwrite"!==this.mode)return ge(new Z.ReadOnly("Transaction is readonly"));if(!this.active)return ge(new Z.TransactionInactive);if(this._locked())return new Rt(function(i,s){r._blockedFuncs.push([function(){r._promise(t,e,n).then(i,s)},Tt])});if(n)return ie(function(){var t=new Rt(function(t,n){r._lock();var i=e(t,n,r);i&&i.then&&i.then(t,n)});return t.finally(function(){return r._unlock()}),t._lib=!0,t});var i=new Rt(function(t,n){var i=e(t,n,r);i&&i.then&&i.then(t,n)});return i._lib=!0,i},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(t){var e=this._root(),n=Rt.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return n});else{e._waitingFor=n,e._waitingQueue=[];var r=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(r.get(-1/0).onsuccess=t)}()}var i=e._waitingFor;return new Rt(function(t,r){n.then(function(n){return e._waitingQueue.push(Xt(t.bind(null,n)))},function(t){return e._waitingQueue.push(Xt(r.bind(null,t)))}).finally(function(){e._waitingFor===i&&(e._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Z.Abort))},t.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(u(e,t))return e[t];var n=this.schema[t];if(!n)throw new Z.NotFound("Table "+t+" not part of transaction");var r=new this.db.Table(t,n,this);return r.core=this.db.core.table(t),e[t]=r,r},t}();function yn(t){return ze(bn.prototype,function(e,n,r,i,s){var o=this;"readonly"!==e&&n.forEach(function(t){var e,i=null===(e=r[t])||void 0===e?void 0:e.yProps;i&&(n=n.concat(i.map(function(t){return t.updatesTable})))}),this.db=t,this.mode=e,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Fe(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Rt(function(t,e){o._resolve=t,o._reject=e}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(t){var e=o.active;return o.active=!1,o.on.error.fire(t),o.parent?o.parent._reject(t):e&&o.idbtrans&&o.idbtrans.abort(),ge(t)})})}function xn(t,e,n,r,i,s,o,a){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+vn(e),type:a}}function vn(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function wn(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:k(n,function(t){return[t.name,t]})}}function kn(t){return 1===t.length?t[0]:t}var _n=function(t){try{return t.only([[]]),_n=function(){return[[]]},[[]]}catch(t){return _n=function(){return ye},ye}};function Cn(t){return null==t?function(){}:"string"==typeof t?Mn(t):function(e){return _(e,t)}}function Mn(t){return 1===t.split(".").length?function(e){return e[t]}:function(e){return _(e,t)}}function Sn(t){return[].slice.call(t)}var An=0;function Dn(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function Pn(t,e,n){function r(t,e){var n=Sn(t.objectStoreNames);return{schema:{name:t.name,tables:n.map(function(t){return e.objectStore(t)}).map(function(t){var e=t.keyPath,n=t.autoIncrement,r=o(e),i=null==e,s={},a={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:e,autoIncrement:n,unique:!0,extractKey:Cn(e)},indexes:Sn(t.indexNames).map(function(e){return t.index(e)}).map(function(t){var e=t.name,n=t.unique,r=t.multiEntry,i=t.keyPath,a={name:e,compound:o(i),keyPath:i,unique:n,multiEntry:r,extractKey:Cn(i)};return s[Dn(i)]=a,a}),getIndexByKeyPath:function(t){return s[Dn(t)]}};return s[":id"]=a.primaryKey,null!=e&&(s[Dn(e)]=a.primaryKey),a})},hasGetAll:n.length>0&&"getAll"in e.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=t.lower,r=t.upper,i=t.lowerOpen,s=t.upperOpen;return void 0===n?void 0===r?null:e.upperBound(r,!!s):void 0===r?e.lowerBound(n,!!i):e.bound(n,r,!!i,!!s)}function s(t){var e=t.name;function n(t){var n=t.trans,r=t.type,s=t.keys,o=t.values,a=t.range;return new Promise(function(t,l){t=Xt(t);var c=n.objectStore(e),u=null==c.keyPath,d="put"===r||"add"===r;if(!d&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var h,f=(s||o||{length:1}).length;if(s&&o&&s.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return t({numFailures:0,failures:{},results:[],lastResult:void 0});var p=[],g=[],m=0,b=function(t){++m,fn(t)};if("deleteRange"===r){if(4===a.type)return t({numFailures:m,failures:g,results:[],lastResult:void 0});3===a.type?p.push(h=c.clear()):p.push(h=c.delete(i(a)))}else{var y=d?u?[o,s]:[o,null]:[s,null],x=y[0],v=y[1];if(d)for(var w=0;w<f;++w)p.push(h=v&&void 0!==v[w]?c[r](x[w],v[w]):c[r](x[w])),h.onerror=b;else for(w=0;w<f;++w)p.push(h=c[r](x[w])),h.onerror=b}var k=function(e){var n=e.target.result;p.forEach(function(t,e){return null!=t.error&&(g[e]=t.error)}),t({numFailures:m,failures:g,results:"delete"===r?s:p.map(function(t){return t.result}),lastResult:n})};h.onerror=function(t){b(t),k(t)},h.onsuccess=k})}function r(t){var n=t.trans,r=t.values,s=t.query,o=t.reverse,a=t.unique;return new Promise(function(t,l){t=Xt(t);var c=s.index,u=s.range,d=n.objectStore(e),h=c.isPrimaryKey?d:d.index(c.name),f=o?a?"prevunique":"prev":a?"nextunique":"next",p=r||!("openKeyCursor"in h)?h.openCursor(i(u),f):h.openKeyCursor(i(u),f);p.onerror=hn(l),p.onsuccess=Xt(function(e){var r=p.result;if(r){r.___id=++An,r.done=!1;var i=r.continue.bind(r),s=r.continuePrimaryKey;s&&(s=s.bind(r));var o=r.advance.bind(r),a=function(){throw new Error("Cursor not started")},c=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=a,r.fail=Xt(l),r.next=function(){var t=this,e=1;return this.start(function(){return e--?t.continue():t.stop()}).then(function(){return t})},r.start=function(t){var e=new Promise(function(t,e){t=Xt(t),p.onerror=hn(e),r.fail=e,r.stop=function(e){r.stop=r.continue=r.continuePrimaryKey=r.advance=c,t(e)}}),n=function(){if(p.result)try{t()}catch(t){r.fail(t)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Xt(function(t){p.onsuccess=n,n()}),r.continue=i,r.continuePrimaryKey=s,r.advance=o,n(),e},t(r)}else t(null)},l)})}function s(t){return function(n){return new Promise(function(r,s){r=Xt(r);var o=n.trans,a=n.values,l=n.limit,c=n.query,u=l===1/0?void 0:l,d=c.index,h=c.range,f=o.objectStore(e),p=d.isPrimaryKey?f:f.index(d.name),g=i(h);if(0===l)return r({result:[]});if(t){var m=a?p.getAll(g,u):p.getAllKeys(g,u);m.onsuccess=function(t){return r({result:t.target.result})},m.onerror=hn(s)}else{var b=0,y=a||!("openKeyCursor"in p)?p.openCursor(g):p.openKeyCursor(g),x=[];y.onsuccess=function(t){var e=y.result;return e?(x.push(a?e.value:e.primaryKey),++b===l?r({result:x}):void e.continue()):r({result:x})},y.onerror=hn(s)}})}}return{name:e,schema:t,mutate:n,getMany:function(t){var n=t.trans,r=t.keys;return new Promise(function(t,i){t=Xt(t);for(var s,o=n.objectStore(e),a=r.length,l=new Array(a),c=0,u=0,d=function(e){var n=e.target;l[n._pos]=n.result,++u===c&&t(l)},h=hn(i),f=0;f<a;++f)null!=r[f]&&((s=o.get(r[f]))._pos=f,s.onsuccess=d,s.onerror=h,++c);0===c&&t(l)})},get:function(t){var n=t.trans,r=t.key;return new Promise(function(t,i){t=Xt(t);var s=n.objectStore(e).get(r);s.onsuccess=function(e){return t(e.target.result)},s.onerror=hn(i)})},query:s(c),openCursor:r,count:function(t){var n=t.query,r=t.trans,s=n.index,o=n.range;return new Promise(function(t,n){var a=r.objectStore(e),l=s.isPrimaryKey?a:a.index(s.name),c=i(o),u=c?l.count(c):l.count();u.onsuccess=Xt(function(e){return t(e.target.result)}),u.onerror=hn(n)})}}}var a=r(t,n),l=a.schema,c=a.hasGetAll,u=l.tables.map(function(t){return s(t)}),d={};return u.forEach(function(t){return d[t.name]=t}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!d[t])throw new Error("Table '".concat(t,"' not found"));return d[t]},MIN_KEY:-1/0,MAX_KEY:_n(e),schema:l}}function En(t,e){return e.reduce(function(t,e){var r=e.create;return n(n({},t),r(t))},t)}function Tn(t,e,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:En(Pn(e,i,r),t.dbcore)}}function On(t,e){var n=e.db,r=Tn(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(function(e){var n=e.name;t.core.schema.tables.some(function(t){return t.name===n})&&(e.core=t.core.table(n),t[n]instanceof t.Table&&(t[n].core=e.core))})}function $n(t,e,n,r){n.forEach(function(n){var i=r[n];e.forEach(function(e){var r=m(e,n);(!r||"value"in r&&void 0===r.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?f(e,n,{get:function(){return this.table(n)},set:function(t){h(this,n,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[n]=new t.Table(n,i))})})}function Ln(t,e){e.forEach(function(e){for(var n in e)e[n]instanceof t.Table&&delete e[n]})}function Rn(t,e){return t._cfg.version-e._cfg.version}function Bn(t,e,n,r){var i=t._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=wn("$meta",Qn("")[0],[]),t._storeNames.push("$meta"));var o=t._createTransaction("readwrite",t._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),l=Tt.transless||Tt;ie(function(){if(Tt.trans=o,Tt.transless=l,0!==e)return On(t,n),jn(t,o,e).then(function(e){return Fn(t,e,o,n)}).catch(a);s(i).forEach(function(t){Nn(n,t,i[t].primKey,i[t].indexes)}),On(t,n),Rt.follow(function(){return t.on.populate.fire(o)}).catch(a)})}function In(t,e){Wn(t._dbSchema,e),e.db.version%10!=0||e.objectStoreNames.contains("$meta")||e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var n=qn(t,t.idbdb,e);Yn(t,t._dbSchema,e);for(var r=function(t){if(t.change.length||t.recreate)return console.warn("Unable to patch indexes of table ".concat(t.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=e.objectStore(t.name);t.add.forEach(function(e){ht&&console.debug("Dexie upgrade patch: Creating missing index ".concat(t.name,".").concat(e.src)),Hn(n,e)})},i=0,s=zn(n,t._dbSchema).change;i<s.length;i++){var o=r(s[i]);if("object"==typeof o)return o.value}}function jn(t,e,n){return e.storeNames.includes("$meta")?e.table("$meta").get("version").then(function(t){return null!=t?t:n}):Rt.resolve(n)}function Fn(t,e,n,r){var i=[],o=t._versions,a=t._dbSchema=qn(t,t.idbdb,r),l=o.filter(function(t){return t._cfg.version>=e});if(0===l.length)return Rt.resolve();function c(){return i.length?Rt.resolve(i.shift()(n.idbtrans)).then(c):Rt.resolve()}return l.forEach(function(o){i.push(function(){var i=a,l=o._cfg.dbschema;Yn(t,i,r),Yn(t,l,r),a=t._dbSchema=l;var c=zn(i,l);c.add.forEach(function(t){Nn(r,t[0],t[1].primKey,t[1].indexes)}),c.change.forEach(function(t){if(t.recreate)throw new Z.Upgrade("Not yet support for changing primary key");var e=r.objectStore(t.name);t.add.forEach(function(t){return Hn(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),Hn(e,t)}),t.del.forEach(function(t){return e.deleteIndex(t)})});var u=o._cfg.contentUpgrade;if(u&&o._cfg.version>e){On(t,r),n._memoizedTables={};var d=S(l);c.del.forEach(function(t){d[t]=i[t]}),Ln(t,[t.Transaction.prototype]),$n(t,[t.Transaction.prototype],s(d),d),n.schema=d;var h,f=V(u);f&&se();var p=Rt.follow(function(){if((h=u(n))&&f){var t=oe.bind(null,null);h.then(t,t)}});return h&&"function"==typeof h.then?Rt.resolve(h):p.then(function(){return h})}}),i.push(function(e){Vn(o._cfg.dbschema,e),Ln(t,[t.Transaction.prototype]),$n(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),n.schema=t._dbSchema}),i.push(function(e){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===o._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(t){return"$meta"!==t})):e.objectStore("$meta").put(o._cfg.version,"version"))})}),c().then(function(){Wn(a,r)})}function zn(t,e){var n,r={del:[],add:[],change:[]};for(n in t)e[n]||r.del.push(n);for(n in e){var i=t[n],s=e[n];if(i){var o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)o.recreate=!0,r.change.push(o);else{var a=i.idxByName,l=s.idxByName,c=void 0;for(c in a)l[c]||o.del.push(c);for(c in l){var u=a[c],d=l[c];u?u.src!==d.src&&o.change.push(d):o.add.push(d)}(o.del.length>0||o.add.length>0||o.change.length>0)&&r.change.push(o)}}else r.add.push([n,s])}return r}function Nn(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(t){return Hn(i,t)}),i}function Wn(t,e){s(t).forEach(function(n){e.db.objectStoreNames.contains(n)||(ht&&console.debug("Dexie: Creating missing table",n),Nn(e,n,t[n].primKey,t[n].indexes))})}function Vn(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return null==t[n]&&e.db.deleteObjectStore(n)})}function Hn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function qn(t,e,n){var r={};return y(e.objectStoreNames,0).forEach(function(t){for(var e=n.objectStore(t),i=e.keyPath,s=xn(vn(i),i||"",!0,!1,!!e.autoIncrement,i&&"string"!=typeof i,!0),o=[],a=0;a<e.indexNames.length;++a){var l=e.index(e.indexNames[a]);i=l.keyPath;var c=xn(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);o.push(c)}r[t]=wn(t,s,o)}),r}function Un(t,e,n){t.verno=e.version/10;var r=t._dbSchema=qn(t,e,n);t._storeNames=y(e.objectStoreNames,0),$n(t,[t._allTables],s(r),r)}function Kn(t,e){var n=zn(qn(t,t.idbdb,e),t._dbSchema);return!(n.add.length||n.change.some(function(t){return t.add.length||t.change.length}))}function Yn(t,e,n){for(var r=n.db.objectStoreNames,s=0;s<r.length;++s){var o=r[s],a=n.objectStore(o);t._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var c=a.indexNames[l],u=a.index(c).keyPath,d="string"==typeof u?u:"["+y(u).join("+")+"]";if(e[o]){var h=e[o].idxByName[d];h&&(h.name=c,delete e[o].idxByName[d],e[o].idxByName[c]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Qn(t){return t.split(",").map(function(t,e){var n,r=t.split(":"),i=null===(n=r[1])||void 0===n?void 0:n.trim(),s=(t=r[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return xn(s,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),o(a),0===e,i)})}var Gn,Xn=function(){function t(){}return t.prototype._createTableSchema=function(t,e,n){return wn(t,e,n)},t.prototype._parseIndexSyntax=function(t){return Qn(t)},t.prototype._parseStoresSpec=function(t,e){var n=this;s(t).forEach(function(r){if(null!==t[r]){var i=n._parseIndexSyntax(t[r]),s=i.shift();if(!s)throw new Z.Schema("Invalid schema for table "+r+": "+t[r]);if(s.unique=!0,s.multi)throw new Z.Schema("Primary key cannot be multiEntry*");i.forEach(function(t){if(t.auto)throw new Z.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new Z.Schema("Index must have a name and cannot be an empty string")});var o=n._createTableSchema(r,s,i);e[r]=o}})},t.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,t):t;var n=e._versions,r={},i={};return n.forEach(function(t){a(r,t._cfg.storesSource),i=t._cfg.dbschema={},t._parseStoresSpec(r,i)}),e._dbSchema=i,Ln(e,[e._allTables,e,e.Transaction.prototype]),$n(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],s(i),i),e._storeNames=s(i),this},t.prototype.upgrade=function(t){return this._cfg.contentUpgrade=dt(this._cfg.contentUpgrade||rt,t),this},t}();function Jn(t){return ze(Xn.prototype,function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new ti(_e,{addons:[],indexedDB:t,IDBKeyRange:e})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function tr(t){return t&&"function"==typeof t.databases}function er(t){var e=t.indexedDB,n=t.IDBKeyRange;return tr(e)?Promise.resolve(e.databases()).then(function(t){return t.map(function(t){return t.name}).filter(function(t){return t!==_e})}):Zn(e,n).toCollection().primaryKeys()}function nr(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!tr(n)&&e!==_e&&Zn(n,r).put({name:e}).catch(rt)}function rr(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!tr(n)&&e!==_e&&Zn(n,r).delete(e).catch(rt)}function ir(t){return ie(function(){return Tt.letThrough=!0,t()})}function sr(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function or(t){return!("from"in t)}var ar=function(t,e){if(!this){var n=new ar;return t&&"d"in t&&a(n,t),n}a(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function lr(t,e,n){var r=Ee(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(or(t))return a(t,{from:e,to:n,d:1});var i=t.l,s=t.r;if(Ee(n,t.from)<0)return i?lr(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},hr(t);if(Ee(e,t.to)>0)return s?lr(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},hr(t);Ee(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),Ee(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var o=!t.r;i&&!t.l&&cr(t,i),s&&o&&cr(t,s)}}function cr(t,e){function n(t,e){var r=e.from,i=e.to,s=e.l,o=e.r;lr(t,r,i),s&&n(t,s),o&&n(t,o)}or(e)||n(t,e)}function ur(t,e){var n=dr(e),r=n.next();if(r.done)return!1;for(var i=r.value,s=dr(t),o=s.next(i.from),a=o.value;!r.done&&!o.done;){if(Ee(a.from,i.to)<=0&&Ee(a.to,i.from)>=0)return!0;Ee(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function dr(t){var e=or(t)?null:{s:0,n:t};return{next:function(t){for(var n=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&Ee(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||Ee(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function hr(t){var e,r,i=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(r=t.l)||void 0===r?void 0:r.d)||0),s=i>1?"r":i<-1?"l":"";if(s){var o="r"===s?"l":"r",a=n({},t),l=t[s];t.from=l.from,t.to=l.to,t[s]=l[s],a[s]=l[o],t[o]=a,a.d=fr(a)}t.d=fr(t)}function fr(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}function pr(t,e){return s(e).forEach(function(n){t[n]?cr(t[n],e[n]):t[n]=T(e[n])}),t}function gr(t,e){return t.all||e.all||Object.keys(t).some(function(n){return e[n]&&ur(e[n],t[n])})}d(ar.prototype,((Gn={add:function(t){return cr(this,t),this},addKey:function(t){return lr(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(t){return lr(e,t,t)}),this},hasKey:function(t){var e=dr(this).next(t).value;return e&&Ee(e.from,t)<=0&&Ee(e.to,t)>=0}})[j]=function(){return dr(this)},Gn));var mr={},br={},yr=!1;function xr(t,e){pr(br,t),yr||(yr=!0,setTimeout(function(){yr=!1;var t=br;br={},vr(t,!1)},0))}function vr(t,e){void 0===e&&(e=!1);var n=new Set;if(t.all)for(var r=0,i=Object.values(mr);r<i.length;r++)wr(a=i[r],t,n,e);else for(var s in t){var o=/^idb\:\/\/(.*)\/(.*)\//.exec(s);if(o){var a,l=o[1],c=o[2];(a=mr["idb://".concat(l,"/").concat(c)])&&wr(a,t,n,e)}}n.forEach(function(t){return t()})}function wr(t,e,n,r){for(var i=[],s=0,o=Object.entries(t.queries.query);s<o.length;s++){for(var a=o[s],l=a[0],c=[],u=0,d=a[1];u<d.length;u++){var h=d[u];gr(e,h.obsSet)?h.subscribers.forEach(function(t){return n.add(t)}):r&&c.push(h)}r&&i.push([l,c])}if(r)for(var f=0,p=i;f<p.length;f++){var g=p[f];l=g[0],c=g[1],t.queries.query[l]=c}}function kr(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?ge(e.dbOpenError):t});e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller,i=Math.round(10*t.verno),s=!1;function o(){if(e.openCanceller!==r)throw new Z.DatabaseClosed("db.open() was cancelled")}var a=e.dbReadyResolve,l=null,c=!1,u=function(){return new Rt(function(r,a){if(o(),!n)throw new Z.MissingAPI;var d=t.name,h=e.autoSchema||!i?n.open(d):n.open(d,i);if(!h)throw new Z.MissingAPI;h.onerror=hn(a),h.onblocked=Xt(t._fireOnBlocked),h.onupgradeneeded=Xt(function(r){if(l=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=fn,l.abort(),h.result.close();var i=n.deleteDatabase(d);i.onsuccess=i.onerror=Xt(function(){a(new Z.NoSuchDatabase("Database ".concat(d," doesnt exist")))})}else{l.onerror=hn(a);var o=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;c=o<1,t.idbdb=h.result,s&&In(t,l),Bn(t,o/10,l,a)}},a),h.onsuccess=Xt(function(){l=null;var n=t.idbdb=h.result,o=y(n.objectStoreNames);if(o.length>0)try{var a=n.transaction(kn(o),"readonly");if(e.autoSchema)Un(t,n,a);else if(Yn(t,t._dbSchema,a),!Kn(t,a)&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),n.close(),i=n.version+1,s=!0,r(u());On(t,a)}catch(t){}ke.push(t),n.onversionchange=Xt(function(n){e.vcFired=!0,t.on("versionchange").fire(n)}),n.onclose=Xt(function(){t.close({disableAutoOpen:!1})}),c&&nr(t._deps,d),r()},a)}).catch(function(t){switch(null==t?void 0:t.name){case"UnknownError":if(e.PR1398_maxLoop>0)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),u();break;case"VersionError":if(i>0)return i=0,u()}return Rt.reject(t)})};return Rt.race([r,("undefined"==typeof navigator?Rt.resolve():sr()).then(u)]).then(function(){return o(),e.onReadyBeingFired=[],Rt.resolve(ir(function(){return t.on.ready.fire(t.vip)})).then(function n(){if(e.onReadyBeingFired.length>0){var r=e.onReadyBeingFired.reduce(dt,rt);return e.onReadyBeingFired=[],Rt.resolve(ir(function(){return r(t.vip)})).then(n)}})}).finally(function(){e.openCanceller===r&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)}).catch(function(n){e.dbOpenError=n;try{l&&l.abort()}catch(t){}return r===e.openCanceller&&t._close(),ge(n)}).finally(function(){e.openComplete=!0,a()}).then(function(){if(c){var e={};t.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(e["idb://".concat(t.name,"/").concat(n.name,"/").concat(r.name)]=new ar(-1/0,[[[]]]))}),e["idb://".concat(t.name,"/").concat(n.name,"/")]=e["idb://".concat(t.name,"/").concat(n.name,"/:dels")]=new ar(-1/0,[[[]]])}),mn(pn).fire(e),vr(e,!0)}return t})}function _r(t){var e=function(e){return t.next(e)},n=function(e){return t.throw(e)},r=s(e),i=s(n);function s(t){return function(e){var n=t(e),s=n.value;return n.done?s:s&&"function"==typeof s.then?s.then(r,i):o(s)?Promise.all(s).then(r,i):r(s)}}return s(e)()}function Cr(t,e,n){var r=arguments.length;if(r<2)throw new Z.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,D(i),n]}function Mr(t,e,n,r,i){return Rt.resolve().then(function(){var s=Tt.transless||Tt,o=t._createTransaction(e,n,t._dbSchema,r);o.explicit=!0;var a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(r){return r.name===X.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Mr(t,e,n,null,i)})):ge(r)}var l,c=V(i);c&&se();var u=Rt.follow(function(){if(l=i.call(o,o))if(c){var t=oe.bind(null,null);l.then(t,t)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=_r(l))},a);return(l&&"function"==typeof l.then?Rt.resolve(l).then(function(t){return o.active?t:ge(new Z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return l})).then(function(t){return r&&o._resolve(),o._completion.then(function(){return t})}).catch(function(t){return o._reject(t),ge(t)})})}function Sr(t,e,n){for(var r=o(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function Ar(t){return n(n({},t),{table:function(e){var r=t.table(e),i=r.schema,s={},o=[];function a(t,e,r){var i=Dn(t),l=s[i]=s[i]||[],c=null==t?0:"string"==typeof t?1:t.length,u=e>0,d=n(n({},r),{name:u?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:u,keyTail:e,keyLength:c,extractKey:Cn(t),unique:!u&&r.unique});return l.push(d),d.isPrimaryKey||o.push(d),c>1&&a(2===c?t[0]:t.slice(0,c-1),e+1,r),l.sort(function(t,e){return t.keyTail-e.keyTail}),d}var l=a(i.primaryKey.keyPath,0,i.primaryKey);s[":id"]=[l];for(var c=0,u=i.indexes;c<u.length;c++){var d=u[c];a(d.keyPath,0,d)}function h(t){var e=s[Dn(t)];return e&&e[0]}function f(e,n){return{type:1===e.type?2:e.type,lower:Sr(e.lower,e.lowerOpen?t.MAX_KEY:t.MIN_KEY,n),lowerOpen:!0,upper:Sr(e.upper,e.upperOpen?t.MIN_KEY:t.MAX_KEY,n),upperOpen:!0}}function p(t){var e=t.query.index;return e.isVirtual?n(n({},t),{query:{index:e.lowLevelIndex,range:f(t.query.range,e.keyTail)}}):t}var g=n(n({},r),{schema:n(n({},i),{primaryKey:l,indexes:o,getIndexByKeyPath:h}),count:function(t){return r.count(p(t))},query:function(t){return r.query(p(t))},openCursor:function(e){var n=e.query.index,i=n.keyTail,s=n.isVirtual,o=n.keyLength;if(!s)return r.openCursor(e);function a(n){function r(r){null!=r?n.continue(Sr(r,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?n.continue(n.key.slice(0,o).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,i)):n.continue()}var s=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(e,r){n.continuePrimaryKey(Sr(e,t.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var t=n.key;return 1===o?t[0]:t.slice(0,o)}},value:{get:function(){return n.value}}});return s}return r.openCursor(p(e)).then(function(t){return t&&a(t)})}});return g}})}var Dr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ar};function Pr(t,e,n,r){return n=n||{},r=r||"",s(t).forEach(function(i){if(u(e,i)){var s=t[i],o=e[i];if("object"==typeof s&&"object"==typeof o&&s&&o){var a=I(s);a!==I(o)?n[r+i]=e[i]:"Object"===a?Pr(s,o,n,r+i+"."):s!==o&&(n[r+i]=e[i])}else s!==o&&(n[r+i]=e[i])}else n[r+i]=void 0}),s(e).forEach(function(i){u(t,i)||(n[r+i]=e[i])}),n}function Er(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}var Tr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return n(n({},t),{table:function(e){var i=t.table(e),s=i.schema.primaryKey,o=n(n({},i),{mutate:function(t){var o=Tt.trans,a=o.table(e).hook,l=a.deleting,c=a.creating,d=a.updating;switch(t.type){case"add":if(c.fire===rt)break;return o._promise("readwrite",function(){return h(t)},!0);case"put":if(c.fire===rt&&d.fire===rt)break;return o._promise("readwrite",function(){return h(t)},!0);case"delete":if(l.fire===rt)break;return o._promise("readwrite",function(){return h(t)},!0);case"deleteRange":if(l.fire===rt)break;return o._promise("readwrite",function(){return f(t)},!0)}return i.mutate(t);function h(t){var e=Tt.trans,o=t.keys||Er(s,t);if(!o)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?n(n({},t),{keys:o}):n({},t)).type&&(t.values=r([],t.values,!0)),t.keys&&(t.keys=r([],t.keys,!0)),Or(i,t,o).then(function(n){var r=o.map(function(r,i){var o=n[i],a={onerror:null,onsuccess:null};if("delete"===t.type)l.fire.call(a,r,o,e);else if("add"===t.type||void 0===o){var h=c.fire.call(a,r,t.values[i],e);null==r&&null!=h&&(r=h,t.keys[i]=r,s.outbound||C(t.values[i],s.keyPath,r))}else{var f=Pr(o,t.values[i]),p=d.fire.call(a,f,r,o,e);if(p){var g=t.values[i];Object.keys(p).forEach(function(t){u(g,t)?g[t]=p[t]:C(g,t,p[t])})}}return a});return i.mutate(t).then(function(e){for(var i=e.failures,s=e.results,a=e.numFailures,l=e.lastResult,c=0;c<o.length;++c){var u=s?s[c]:o[c],d=r[c];null==u?d.onerror&&d.onerror(i[c]):d.onsuccess&&d.onsuccess("put"===t.type&&n[c]?t.values[c]:u)}return{failures:i,results:s,numFailures:a,lastResult:l}}).catch(function(t){return r.forEach(function(e){return e.onerror&&e.onerror(t)}),Promise.reject(t)})})}function f(t){return p(t.trans,t.range,1e4)}function p(t,e,r){return i.query({trans:t,values:!1,query:{index:s,range:e},limit:r}).then(function(i){var s=i.result;return h({type:"delete",keys:s,trans:t}).then(function(i){return i.numFailures>0?Promise.reject(i.failures[0]):s.length<r?{failures:[],numFailures:0,lastResult:void 0}:p(t,n(n({},e),{lower:s[s.length-1],lowerOpen:!0}),r)})})}}});return o}})}};function Or(t,e,n){return"add"===e.type?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function $r(t,e,n){try{if(!e)return null;if(e.keys.length<t.length)return null;for(var r=[],i=0,s=0;i<e.keys.length&&s<t.length;++i)0===Ee(e.keys[i],t[s])&&(r.push(n?L(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch(t){return null}}var Lr={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var r=t.table(e);return n(n({},r),{getMany:function(t){if(!t.cache)return r.getMany(t);var e=$r(t.keys,t.trans._cache,"clone"===t.cache);return e?Rt.resolve(e):r.getMany(t).then(function(e){return t.trans._cache={keys:t.keys,values:"clone"===t.cache?L(e):e},e})},mutate:function(t){return"add"!==t.type&&(t.trans._cache=null),r.mutate(t)}})}}}};function Rr(t,e){return"readonly"===t.trans.mode&&!!t.subscr&&!t.trans.explicit&&"disabled"!==t.trans.db._options.cache&&!e.schema.primaryKey.outbound}function Br(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ir={stack:"dbcore",level:0,name:"Observability",create:function(t){var e=t.schema.name,r=new ar(t.MIN_KEY,t.MAX_KEY);return n(n({},t),{transaction:function(e,n,r){if(Tt.subscr&&"readonly"!==n)throw new Z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Tt.querier));return t.transaction(e,n,r)},table:function(i){var a=t.table(i),l=a.schema,c=l.primaryKey,u=l.indexes,d=c.extractKey,h=c.outbound,f=c.autoIncrement&&u.filter(function(t){return t.compound&&t.keyPath.includes(c.keyPath)}),p=n(n({},a),{mutate:function(n){var s,u,d=n.trans,h=n.mutatedParts||(n.mutatedParts={}),p=function(t){var n="idb://".concat(e,"/").concat(i,"/").concat(t);return h[n]||(h[n]=new ar)},g=p(""),m=p(":dels"),b=n.type,y="deleteRange"===n.type?[n.range]:"delete"===n.type?[n.keys]:n.values.length<50?[Er(c,n).filter(function(t){return t}),n.values]:[],x=y[0],v=y[1],w=n.trans._cache;if(o(x)){g.addKeys(x);var k="delete"===b||x.length===v.length?$r(x,w):null;k||m.addKeys(x),(k||v)&&jr(p,l,k,v)}else if(x){var _={from:null!==(s=x.lower)&&void 0!==s?s:t.MIN_KEY,to:null!==(u=x.upper)&&void 0!==u?u:t.MAX_KEY};m.add(_),g.add(_)}else g.add(r),m.add(r),l.indexes.forEach(function(t){return p(t.name).add(r)});return a.mutate(n).then(function(t){return!x||"add"!==n.type&&"put"!==n.type||(g.addKeys(t.results),f&&f.forEach(function(e){for(var r=n.values.map(function(t){return e.extractKey(t)}),i=e.keyPath.findIndex(function(t){return t===c.keyPath}),s=0,o=t.results.length;s<o;++s)r[s][i]=t.results[s];p(e.name).addKeys(r)})),d.mutatedParts=pr(d.mutatedParts||{},h),t})}}),g=function(e){var n,r,i=e.query,s=i.index,o=i.range;return[s,new ar(null!==(n=o.lower)&&void 0!==n?n:t.MIN_KEY,null!==(r=o.upper)&&void 0!==r?r:t.MAX_KEY)]},m={get:function(t){return[c,new ar(t.key)]},getMany:function(t){return[c,(new ar).addKeys(t.keys)]},count:g,query:g,openCursor:g};return s(m).forEach(function(t){p[t]=function(s){var o=Tt.subscr,l=!!o,c=Rr(Tt,a)&&Br(t,s)?s.obsSet={}:o;if(l){var u=function(t){var n="idb://".concat(e,"/").concat(i,"/").concat(t);return c[n]||(c[n]=new ar)},f=u(""),p=u(":dels"),g=m[t](s),b=g[0],y=g[1];if("query"===t&&b.isPrimaryKey&&!s.values?p.add(y):u(b.name||"").add(y),!b.isPrimaryKey){if("count"!==t){var x="query"===t&&h&&s.values&&a.query(n(n({},s),{values:!1}));return a[t].apply(this,arguments).then(function(e){if("query"===t){if(h&&s.values)return x.then(function(t){var n=t.result;return f.addKeys(n),e});var n=s.values?e.result.map(d):e.result;s.values?f.addKeys(n):p.addKeys(n)}else if("openCursor"===t){var r=e,i=s.values;return r&&Object.create(r,{key:{get:function(){return p.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var t=r.primaryKey;return p.addKey(t),t}},value:{get:function(){return i&&f.addKey(r.primaryKey),r.value}}})}return e})}p.add(r)}}return a[t].apply(this,arguments)}}),p}})}};function jr(t,e,n,r){function i(e){var i=t(e.name||"");function s(t){return null!=t?e.extractKey(t):null}var a=function(t){return e.multiEntry&&o(t)?t.forEach(function(t){return i.addKey(t)}):i.addKey(t)};(n||r).forEach(function(t,e){var i=n&&s(n[e]),o=r&&s(r[e]);0!==Ee(i,o)&&(null!=i&&a(i),null!=o&&a(o))})}e.indexes.forEach(i)}function Fr(t,e,r){if(0===r.numFailures)return e;if("deleteRange"===e.type)return null;var i=e.keys?e.keys.length:"values"in e&&e.values?e.values.length:1;if(r.numFailures===i)return null;var s=n({},e);return o(s.keys)&&(s.keys=s.keys.filter(function(t,e){return!(e in r.failures)})),"values"in s&&o(s.values)&&(s.values=s.values.filter(function(t,e){return!(e in r.failures)})),s}function zr(t,e){return void 0===e.lower||(e.lowerOpen?Ee(t,e.lower)>0:Ee(t,e.lower)>=0)}function Nr(t,e){return void 0===e.upper||(e.upperOpen?Ee(t,e.upper)<0:Ee(t,e.upper)<=0)}function Wr(t,e){return zr(t,e)&&Nr(t,e)}function Vr(t,e,n,r,i,s){if(!n||0===n.length)return t;var a=e.query.index,l=a.multiEntry,c=e.query.range,u=r.schema.primaryKey.extractKey,d=a.extractKey,h=(a.lowLevelIndex||a).extractKey,f=n.reduce(function(t,n){var r=t,i=[];if("add"===n.type||"put"===n.type)for(var s=new ar,a=n.values.length-1;a>=0;--a){var h=n.values[a],f=u(h);if(!s.hasKey(f)){var p=d(h);(l&&o(p)?p.some(function(t){return Wr(t,c)}):Wr(p,c))&&(s.addKey(f),i.push(h))}}switch(n.type){case"add":var g=(new ar).addKeys(e.values?t.map(function(t){return u(t)}):t);r=t.concat(e.values?i.filter(function(t){var e=u(t);return!g.hasKey(e)&&(g.addKey(e),!0)}):i.map(function(t){return u(t)}).filter(function(t){return!g.hasKey(t)&&(g.addKey(t),!0)}));break;case"put":var m=(new ar).addKeys(n.values.map(function(t){return u(t)}));r=t.filter(function(t){return!m.hasKey(e.values?u(t):t)}).concat(e.values?i:i.map(function(t){return u(t)}));break;case"delete":var b=(new ar).addKeys(n.keys);r=t.filter(function(t){return!b.hasKey(e.values?u(t):t)});break;case"deleteRange":var y=n.range;r=t.filter(function(t){return!Wr(u(t),y)})}return r},t);return f===t?t:(f.sort(function(t,e){return Ee(h(t),h(e))||Ee(u(t),u(e))}),e.limit&&e.limit<1/0&&(f.length>e.limit?f.length=e.limit:t.length===e.limit&&f.length<e.limit&&(i.dirty=!0)),s?Object.freeze(f):f)}function Hr(t,e){return 0===Ee(t.lower,e.lower)&&0===Ee(t.upper,e.upper)&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function qr(t,e,n,r){if(void 0===t)return void 0!==e?-1:0;if(void 0===e)return 1;var i=Ee(t,e);if(0===i){if(n&&r)return 0;if(n)return 1;if(r)return-1}return i}function Ur(t,e,n,r){if(void 0===t)return void 0!==e?1:0;if(void 0===e)return-1;var i=Ee(t,e);if(0===i){if(n&&r)return 0;if(n)return-1;if(r)return 1}return i}function Kr(t,e){return qr(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&Ur(t.upper,e.upper,t.upperOpen,e.upperOpen)>=0}function Yr(t,e,n,r){var i=mr["idb://".concat(t,"/").concat(e)];if(!i)return[];var s=i.queries[n];if(!s)return[null,!1,i,null];var o=s[(r.query?r.query.index.name:null)||""];if(!o)return[null,!1,i,null];switch(n){case"query":var a=o.find(function(t){return t.req.limit===r.limit&&t.req.values===r.values&&Hr(t.req.query.range,r.query.range)});return a?[a,!0,i,o]:[o.find(function(t){return("limit"in t.req?t.req.limit:1/0)>=r.limit&&(!r.values||t.req.values)&&Kr(t.req.query.range,r.query.range)}),!1,i,o];case"count":var l=o.find(function(t){return Hr(t.req.query.range,r.query.range)});return[l,!!l,i,o]}}function Qr(t,e,n,r){t.subscribers.add(n),r.addEventListener("abort",function(){t.subscribers.delete(n),0===t.subscribers.size&&Gr(t,e)})}function Gr(t,e){setTimeout(function(){0===t.subscribers.size&&z(e,t)},3e3)}var Xr={stack:"dbcore",level:0,name:"Cache",create:function(t){var e=t.schema.name,r=n(n({},t),{transaction:function(n,r,i){var s=t.transaction(n,r,i);if("readwrite"===r){var o=new AbortController,a=o.signal,l=function(i){return function(){if(o.abort(),"readwrite"===r){for(var a=new Set,l=0,c=n;l<c.length;l++){var u=c[l],d=mr["idb://".concat(e,"/").concat(u)];if(d){var h=t.table(u),f=d.optimisticOps.filter(function(t){return t.trans===s});if(s._explicit&&i&&s.mutatedParts)for(var p=0,g=Object.values(d.queries.query);p<g.length;p++)for(var m=0,b=(v=g[p]).slice();m<b.length;m++)gr((_=b[m]).obsSet,s.mutatedParts)&&(z(v,_),_.subscribers.forEach(function(t){return a.add(t)}));else if(f.length>0){d.optimisticOps=d.optimisticOps.filter(function(t){return t.trans!==s});for(var y=0,x=Object.values(d.queries.query);y<x.length;y++)for(var v,w=0,k=(v=x[y]).slice();w<k.length;w++){var _;if(null!=(_=k[w]).res&&s.mutatedParts)if(i&&!_.dirty){var C=Object.isFrozen(_.res),M=Vr(_.res,_.req,f,h,_,C);_.dirty?(z(v,_),_.subscribers.forEach(function(t){return a.add(t)})):M!==_.res&&(_.res=M,_.promise=Rt.resolve({result:M}))}else _.dirty&&z(v,_),_.subscribers.forEach(function(t){return a.add(t)})}}}}a.forEach(function(t){return t()})}}};s.addEventListener("abort",l(!1),{signal:a}),s.addEventListener("error",l(!1),{signal:a}),s.addEventListener("complete",l(!0),{signal:a})}return s},table:function(r){var i=t.table(r),s=i.schema.primaryKey,o=n(n({},i),{mutate:function(t){var o=Tt.trans;if(s.outbound||"disabled"===o.db._options.cache||o.explicit||"readwrite"!==o.idbtrans.mode)return i.mutate(t);var a=mr["idb://".concat(e,"/").concat(r)];if(!a)return i.mutate(t);var l=i.mutate(t);return"add"!==t.type&&"put"!==t.type||!(t.values.length>=50||Er(s,t).some(function(t){return null==t}))?(a.optimisticOps.push(t),t.mutatedParts&&xr(t.mutatedParts),l.then(function(e){if(e.numFailures>0){z(a.optimisticOps,t);var n=Fr(a,t,e);n&&a.optimisticOps.push(n),t.mutatedParts&&xr(t.mutatedParts)}}),l.catch(function(){z(a.optimisticOps,t),t.mutatedParts&&xr(t.mutatedParts)})):l.then(function(e){var r=n(n({},t),{values:t.values.map(function(t,r){var i;if(e.failures[r])return t;var o=(null===(i=s.keyPath)||void 0===i?void 0:i.includes("."))?L(t):n({},t);return C(o,s.keyPath,e.results[r]),o})}),i=Fr(a,r,e);a.optimisticOps.push(i),queueMicrotask(function(){return t.mutatedParts&&xr(t.mutatedParts)})}),l},query:function(t){var n;if(!Rr(Tt,i)||!Br("query",t))return i.query(t);var s="immutable"===(null===(n=Tt.trans)||void 0===n?void 0:n.db._options.cache),o=Tt,a=o.requery,l=o.signal,c=Yr(e,r,"query",t),u=c[0],d=c[1],h=c[2],f=c[3];if(u&&d)u.obsSet=t.obsSet;else{var p=i.query(t).then(function(t){var e=t.result;if(u&&(u.res=e),s){for(var n=0,r=e.length;n<r;++n)Object.freeze(e[n]);Object.freeze(e)}else t.result=L(e);return t}).catch(function(t){return f&&u&&z(f,u),Promise.reject(t)});u={obsSet:t.obsSet,promise:p,subscribers:new Set,type:"query",req:t,dirty:!1},f?f.push(u):(f=[u],h||(h=mr["idb://".concat(e,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),h.queries.query[t.query.index.name||""]=f)}return Qr(u,f,a,l),u.promise.then(function(e){return{result:Vr(e.result,t,null==h?void 0:h.optimisticOps,i,u,s)}})}});return o}});return r}};function Jr(t,e){return new Proxy(t,{get:function(t,n,r){return"db"===n?e:Reflect.get(t,n,r)}})}var Zr,ti=function(){function t(e,r){var i=this;this._middlewares={},this.verno=0;var s=t.dependencies;this._options=r=n({addons:t.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var o=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:rt,dbReadyPromise:null,cancelOpen:rt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};a.dbReadyPromise=new Rt(function(t){a.dbReadyResolve=t}),a.openCanceller=new Rt(function(t,e){a.cancelOpen=e}),this._state=a,this.name=e,this.on=Fe(this,"populate","blocked","versionchange","close",{ready:[dt,rt]}),this.once=function(t,e){var n=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];i.on(t).unsubscribe(n),e.apply(i,r)};return i.on(t,n)},this.on.ready.subscribe=x(this.on.ready.subscribe,function(e){return function(n,r){t.vip(function(){var t=i._state;if(t.openComplete)t.dbOpenError||Rt.resolve().then(n),r&&e(n);else if(t.onReadyBeingFired)t.onReadyBeingFired.push(n),r&&e(n);else{e(n);var s=i;r||e(function t(){s.on.ready.unsubscribe(n),s.on.ready.unsubscribe(t)})}})}}),this.Collection=Je(this),this.Table=Ne(this),this.Transaction=yn(this),this.Version=Jn(this),this.WhereClause=dn(this),this.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))}),this._maxKey=_n(r.IDBKeyRange),this._createTransaction=function(t,e,n,r){return new i.Transaction(t,e,n,i._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(t){i.on("blocked").fire(t),ke.filter(function(t){return t.name===i.name&&t!==i&&!t._state.vcFired}).map(function(e){return e.on("versionchange").fire(t)})},this.use(Lr),this.use(Xr),this.use(Ir),this.use(Dr),this.use(Tr);var l=new Proxy(this,{get:function(t,e,n){if("_vip"===e)return!0;if("table"===e)return function(t){return Jr(i.table(t),l)};var r=Reflect.get(t,e,n);return r instanceof je?Jr(r,l):"tables"===e?r.map(function(t){return Jr(t,l)}):"_createTransaction"===e?function(){return Jr(r.apply(this,arguments),l)}:r}});this.vip=l,o.forEach(function(t){return t(i)})}return t.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Z.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter(function(e){return e._cfg.version===t})[0];return n||(n=new this.Version(t),e.push(n),e.sort(Rn),n.stores({}),this._state.autoSchema=!1,n)},t.prototype._whenReady=function(t){var e=this;return this.idbdb&&(this._state.openComplete||Tt.letThrough||this._vip)?t():new Rt(function(t,n){if(e._state.openComplete)return n(new Z.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return void n(new Z.DatabaseClosed);e.open().catch(rt)}e._state.dbReadyPromise.then(t,n)}).then(t)},t.prototype.use=function(t){var e=t.stack,n=t.create,r=t.level,i=t.name;i&&this.unuse({stack:e,name:i});var s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:null==r?10:r,name:i}),s.sort(function(t,e){return t.level-e.level}),this},t.prototype.unuse=function(t){var e=t.stack,n=t.name,r=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(function(t){return r?t.create!==r:!!n&&t.name!==n})),this},t.prototype.open=function(){var t=this;return he(Et,function(){return kr(t)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,e=ke.indexOf(this);if(e>=0&&ke.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new Rt(function(e){t.dbReadyResolve=e}),t.openCanceller=new Rt(function(e,n){t.cancelOpen=n}))},t.prototype.close=function(t){var e=(void 0===t?{disableAutoOpen:!0}:t).disableAutoOpen,n=this._state;e?(n.isBeingOpened&&n.cancelOpen(new Z.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new Z.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},t.prototype.delete=function(t){var e=this;void 0===t&&(t={disableAutoOpen:!0});var n=arguments.length>0&&"object"!=typeof arguments[0],r=this._state;return new Rt(function(i,s){var o=function(){e.close(t);var n=e._deps.indexedDB.deleteDatabase(e.name);n.onsuccess=Xt(function(){rr(e._deps,e.name),i()}),n.onerror=hn(s),n.onblocked=e._fireOnBlocked};if(n)throw new Z.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return null!==this.idbdb},t.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var t=this;return s(this._allTables).map(function(e){return t._allTables[e]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var t=Cr.apply(this,arguments);return this._transaction.apply(this,t)},t.prototype._transaction=function(t,e,n){var r=this,i=Tt.trans;i&&i.db===this&&-1===t.indexOf("!")||(i=null);var s,o,a=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(o=e.map(function(t){var e=t instanceof r.Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==t||t===Ce)s=Ce;else{if("rw"!=t&&t!=Me)throw new Z.InvalidArgument("Invalid transaction mode: "+t);s=Me}if(i){if(i.mode===Ce&&s===Me){if(!a)throw new Z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach(function(t){if(i&&-1===i.storeNames.indexOf(t)){if(!a)throw new Z.SubTransaction("Table "+t+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(t){return i?i._promise(null,function(e,n){n(t)}):ge(t)}var l=Mr.bind(null,this,s,o,i,n);return i?i._promise(s,l,"lock"):Tt.trans?he(Tt.transless,function(){return r._whenReady(l)}):this._whenReady(l)},t.prototype.table=function(t){if(!u(this._allTables,t))throw new Z.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},t}(),ei="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",ni=function(){function t(t){this._subscribe=t}return t.prototype.subscribe=function(t,e,n){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:n})},t.prototype[ei]=function(){return this},t}();try{Zr={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(t){Zr={indexedDB:null,IDBKeyRange:null}}function ri(t){var e,n=!1,r=new ni(function(r){var i=V(t);function s(e){var n=Ht();try{i&&se();var r=ie(t,e);return i&&(r=r.finally(oe)),r}finally{n&&qt()}}var o,a=!1,l={},c={},u={get closed(){return a},unsubscribe:function(){a||(a=!0,o&&o.abort(),d&&mn.storagemutated.unsubscribe(p))}};r.start&&r.start(u);var d=!1,h=function(){return pe(g)};function f(){return gr(c,l)}var p=function(t){pr(l,t),f()&&h()},g=function(){if(!a&&Zr.indexedDB){l={};var i={};o&&o.abort(),o=new AbortController;var u={subscr:i,signal:o.signal,requery:h,querier:t,trans:null},f=s(u);Promise.resolve(f).then(function(t){n=!0,e=t,a||u.signal.aborted||(l={},O(c=i)||d||(mn(pn,p),d=!0),pe(function(){return!a&&r.next&&r.next(t)}))},function(t){n=!1,["DatabaseClosedError","AbortError"].includes(null==t?void 0:t.name)||a||pe(function(){a||r.error&&r.error(t)})})}};return setTimeout(h,0),u});return r.hasValue=function(){return n},r.getValue=function(){return e},r}var ii=ti;function si(t){var e=ai;try{ai=!0,mn.storagemutated.fire(t),vr(t,!0)}finally{ai=e}}d(ii,n(n({},nt),{delete:function(t){return new ii(t,{addons:[]}).delete()},exists:function(t){return new ii(t,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return er(ii.dependencies).then(t)}catch(t){return ge(new Z.MissingAPI)}},defineClass:function(){function t(t){a(this,t)}return t},ignoreTransaction:function(t){return Tt.trans?he(Tt.transless,t):t()},vip:ir,async:function(t){return function(){try{var e=_r(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Rt.resolve(e)}catch(t){return ge(t)}}},spawn:function(t,e,n){try{var r=_r(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:Rt.resolve(r)}catch(t){return ge(t)}},currentTransaction:{get:function(){return Tt.trans||null}},waitFor:function(t,e){var n=Rt.resolve("function"==typeof t?ii.ignoreTransaction(t):t).timeout(e||6e4);return Tt.trans?Tt.trans.waitFor(n):n},Promise:Rt,debug:{get:function(){return ht},set:function(t){ft(t)}},derive:p,extend:a,props:d,override:x,Events:Fe,on:mn,liveQuery:ri,extendObservabilitySet:pr,getByKeyPath:_,setByKeyPath:C,delByKeyPath:M,shallowClone:S,deepClone:L,getObjectDiff:Pr,cmp:Ee,asap:w,minKey:xe,addons:[],connections:ke,errnames:X,dependencies:Zr,cache:mr,semVer:be,version:be.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,2*n)})})),ii.maxKey=_n(ii.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(mn(pn,function(t){var e;ai||(e=new CustomEvent(gn,{detail:t}),ai=!0,dispatchEvent(e),ai=!1)}),addEventListener(gn,function(t){var e=t.detail;ai||si(e)}));var oi,ai=!1,li=function(){};function ci(t){return new Be({add:t})}function ui(t){return new Be({remove:t})}function di(t,e){return new Be({replacePrefix:[t,e]})}return"undefined"!=typeof BroadcastChannel&&((li=function(){(oi=new BroadcastChannel(gn)).onmessage=function(t){return t.data&&si(t.data)}})(),"function"==typeof oi.unref&&oi.unref(),mn(pn,function(t){ai||oi.postMessage(t)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(t){if(!ti.disableBfCache&&t.persisted){ht&&console.debug("Dexie: handling persisted pagehide"),null==oi||oi.close();for(var e=0,n=ke;e<n.length;e++)n[e].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!ti.disableBfCache&&t.persisted&&(ht&&console.debug("Dexie: handling persisted pageshow"),li(),si({all:new ar(-1/0,[[]])}))})),Rt.rejectionMapper=et,ft(ht),n(ti,Object.freeze({__proto__:null,Dexie:ti,liveQuery:ri,Entity:Pe,cmp:Ee,PropModification:Be,replacePrefix:di,add:ci,remove:ui,default:ti,RangeSet:ar,mergeRanges:cr,rangesOverlap:ur}),{default:ti}),ti}();var Pl=Al(Dl.exports);const El=Symbol.for("Dexie"),Tl=globalThis[El]||(globalThis[El]=Pl);if(Pl.semVer!==Tl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Pl.semVer} and ${Tl.semVer}`);function Ol(t){if(!t)return null;try{const e=new URL(t),n=e.hostname.toLowerCase();return function(t){return"youtube.com"===t||"www.youtube.com"===t||"m.youtube.com"===t||"youtu.be"===t||"music.youtube.com"===t}(n)?function(t){const e=t.pathname,n=t.searchParams,r=t.hostname,i={platform:"youtube",type:null,creator:null,identifier:null,subtype:null,extra:{}};if("youtu.be"===r){const t=e.slice(1);if(t){i.type="video",i.identifier=t;const e=n.get("t");e&&(i.extra.timestamp=e)}return i}"music.youtube.com"===r&&(i.subtype="music");if("/watch"===e){const t=n.get("v");if(t){i.type="video",i.identifier=t;const e=n.get("list");e&&(i.extra.playlistId=e);const r=n.get("t");r&&(i.extra.timestamp=r)}return i}if(e.startsWith("/shorts/")){const t=e.split("/shorts/")[1]?.split("/")[0];return t&&(i.type="video",i.subtype="short",i.identifier=t),i}if(e.startsWith("/live/")){const t=e.split("/live/")[1]?.split("/")[0];return t&&(i.type="video",i.subtype="live",i.identifier=t),i}if(e.startsWith("/@")){const t=e.slice(2).split("/"),n=t[0];return i.type="channel",i.creator=`@${n}`,i.identifier=n,t[1]&&(i.extra.section=t[1]),i}if(e.startsWith("/channel/")){const t=e.split("/channel/")[1]?.split("/"),n=t?.[0];return n&&(i.type="channel",i.identifier=n,t?.[1]&&(i.extra.section=t[1])),i}if(e.startsWith("/c/")||e.startsWith("/user/")){const t=e.match(/^\/(c|user)\/([^\/]+)/);return t&&(i.type="channel",i.identifier=t[2],i.extra.urlType=t[1]),i}if("/playlist"===e){const t=n.get("list");return t&&(i.type="playlist",i.identifier=t),i}if("/results"===e){const t=n.get("search_query");return t&&(i.type="search",i.extra.query=t),i}return i}(e):function(t){return"github.com"===t||"www.github.com"===t||"gist.github.com"===t}(n)?function(t){const e=t.pathname,n=t.hostname,r={platform:"github",type:null,creator:null,identifier:null,subtype:null,extra:{}};if("gist.github.com"===n){const t=e.slice(1).split("/").filter(Boolean);return t.length>=1&&(r.type="gist",r.creator=t[0],t.length>=2&&(r.identifier=t[1])),r}const i=e.slice(1).split("/").filter(Boolean);if(0===i.length)return r.type="home",r;if(1===i.length){const t=i[0];return["explore","trending","topics","collections","sponsors","marketplace","settings","notifications"].includes(t)?(r.type="special",r.identifier=t):(r.type="profile",r.creator=t,r.identifier=t),r}const s=i[0],o=i[1];if(r.creator=s,r.identifier=o,r.extra.owner=s,r.extra.repo=o,2===i.length)return r.type="repo",r;const a=i[2];if("issues"===a){if(3===i.length)r.type="issues",r.subtype="list";else{const t=i[3];"new"===t?(r.type="issues",r.subtype="new"):/^\d+$/.test(t)&&(r.type="issue",r.extra.number=parseInt(t,10))}return r}if("pull"===a){if(i.length>=4){const t=i[3];/^\d+$/.test(t)&&(r.type="pr",r.extra.number=parseInt(t,10),i.length>=5&&(r.extra.tab=i[4]))}return r}if("pulls"===a)return r.type="pulls",r.subtype="list",r;if("actions"===a)return r.type="actions",i.length>=4&&("runs"===i[3]&&i[4]?(r.subtype="run",r.extra.runId=i[4]):"workflows"===i[3]&&i[4]&&(r.subtype="workflow",r.extra.workflowFile=i[4])),r;if("releases"===a)return r.type="releases",i.length>=4&&("tag"===i[3]?(r.subtype="tag",r.extra.tag=i[4]):"latest"===i[3]&&(r.subtype="latest")),r;if("wiki"===a)return r.type="wiki",i.length>=4&&(r.extra.page=i.slice(3).join("/")),r;if("discussions"===a)return r.type="discussions",i.length>=4&&/^\d+$/.test(i[3])&&(r.subtype="discussion",r.extra.number=parseInt(i[3],10)),r;if("commits"===a||"commit"===a)return"commit"===a&&i.length>=4?(r.type="commit",r.extra.sha=i[3]):(r.type="commits",i.length>=4&&(r.extra.branch=i[3])),r;if("branches"===a)return r.type="branches",r;if("tags"===a)return r.type="tags",r;if("blob"===a||"tree"===a){if(r.type="file",r.subtype=a,i.length>=4&&(r.extra.branch=i[3],i.length>=5&&(r.extra.path=i.slice(4).join("/"),"blob"===a))){const t=i[i.length-1].match(/\.([a-zA-Z0-9]+)$/);t&&(r.extra.extension=t[1].toLowerCase())}return r}if("search"===a)return r.type="search",r.extra.query=t.searchParams.get("q"),r;return r.type="repo",r.extra.subPath=i.slice(2).join("/"),r}(e):function(t){return"medium.com"===t||t.endsWith(".medium.com")}(n)?function(t){const e=t.hostname,n=t.pathname,r={platform:"medium",type:"article",creator:null,identifier:null,subtype:null,extra:{}};if("medium.com"!==e&&e.endsWith(".medium.com")){const t=e.replace(".medium.com","");r.extra.publication=t;const i=n.slice(1).split("/").filter(Boolean);i.length>0&&i[0].startsWith("@")&&(r.creator=i[0]);const s=i[i.length-1];return s&&s.includes("-")&&(r.identifier=s),r}const i=n.slice(1).split("/").filter(Boolean);if(i.length>=1&&i[0].startsWith("@"))return r.creator=i[0],1===i.length?r.type="profile":(r.type="article",r.identifier=i[1]),r;i.length>=1&&(r.extra.publication=i[0],i.length>=2&&(r.identifier=i[i.length-1]));return r}(e):function(t){return"dev.to"===t||"www.dev.to"===t}(n)?function(t){const e=t.pathname,n=e.slice(1).split("/").filter(Boolean),r={platform:"devto",type:"article",creator:null,identifier:null,subtype:null,extra:{}};if(0===n.length)return r.type="home",r;if("t"===n[0]&&n.length>=2)return r.type="tag",r.identifier=n[1],r;if(1===n.length)return r.type="profile",r.creator=n[0],r.identifier=n[0],r;n.length>=2&&(r.type="article",r.creator=n[0],r.identifier=n[1]);return r}(e):function(t){return t.endsWith(".substack.com")}(n)?function(t){const e=t.hostname,n=t.pathname,r=e.replace(".substack.com",""),i=n.slice(1).split("/").filter(Boolean),s={platform:"substack",type:"publication",creator:r,identifier:r,subtype:null,extra:{publication:r}};if(i.length>=2&&"p"===i[0])return s.type="article",s.identifier=i[1],s;if(i.length>=1&&"archive"===i[0])return s.type="archive",s;if(i.length>=1&&"about"===i[0])return s.type="about",s;return s}(e):function(t){return"twitter.com"===t||"www.twitter.com"===t||"x.com"===t||"www.x.com"===t}(n)?function(t){const e=t.pathname,n=e.slice(1).split("/").filter(Boolean),r={platform:"twitter",type:null,creator:null,identifier:null,subtype:null,extra:{}};if(0===n.length)return r.type="home",r;if(["home","explore","search","notifications","messages","settings","i"].includes(n[0]))return r.type="special",r.identifier=n[0],r;if("hashtag"===n[0]&&n.length>=2)return r.type="hashtag",r.identifier=n[1],r;const i=n[0];if(r.creator=`@${i}`,1===n.length)return r.type="profile",r.identifier=i,r;if("status"===n[1]&&n.length>=3)return r.type="tweet",r.identifier=n[2],r;if(["followers","following","likes","lists","moments"].includes(n[1]))return r.type="profile",r.identifier=i,r.extra.section=n[1],r;return r}(e):function(t){return"reddit.com"===t||"www.reddit.com"===t||"old.reddit.com"===t||t.endsWith(".reddit.com")}(n)?function(t){const e=t.pathname,n=e.slice(1).split("/").filter(Boolean),r={platform:"reddit",type:null,creator:null,identifier:null,subtype:null,extra:{}};if(0===n.length)return r.type="home",r;if("r"===n[0]&&n.length>=2){const t=n[1];return r.type="subreddit",r.creator=`r/${t}`,r.identifier=t,n.length>=4&&"comments"===n[2]&&(r.type="post",r.extra.postId=n[3],r.extra.subreddit=t,n.length>=5&&(r.extra.title=n[4])),r}if(("u"===n[0]||"user"===n[0])&&n.length>=2)return r.type="profile",r.creator=`u/${n[1]}`,r.identifier=n[1],n.length>=3&&(r.extra.section=n[2]),r;return r}(e):function(t){return"stackoverflow.com"===t||"www.stackoverflow.com"===t||t.endsWith(".stackexchange.com")}(n)?function(t){const e=t.hostname,n=t.pathname,r=n.slice(1).split("/").filter(Boolean),i={platform:"stackoverflow",type:null,creator:null,identifier:null,subtype:null,extra:{}};e.endsWith(".stackexchange.com")&&(i.extra.site=e.replace(".stackexchange.com",""));if(0===r.length)return i.type="home",i;if("questions"===r[0]&&r.length>=2){const e=r[1];if(/^\d+$/.test(e)){i.type="question",i.identifier=e,i.extra.questionId=parseInt(e,10);const n=t.hash;if(n&&n.startsWith("#")){const t=n.match(/^#(\d+)$/);t&&(i.subtype="answer",i.extra.answerId=parseInt(t[1],10))}}else"tagged"===e&&(i.type="tag",i.identifier=r[2]);return i}if("users"===r[0]&&r.length>=2)return i.type="profile",i.identifier=r[1],r.length>=3&&(i.creator=r[2]),i;if("tags"===r[0])return i.type="tags",r.length>=2&&(i.identifier=r[1]),i;return i}(e):function(t){return"npmjs.com"===t||"www.npmjs.com"===t}(n)?function(t){const e=t.pathname,n=e.slice(1).split("/").filter(Boolean),r={platform:"npm",type:"home",creator:null,identifier:null,subtype:null,extra:{}};if(0===n.length)return r;if("package"===n[0]){r.type="package",n.length>=2&&n[1].startsWith("@")?(r.identifier=`${n[1]}/${n[2]||""}`,r.creator=n[1]):n.length>=2&&(r.identifier=n[1]);const t=n[n.length-1];return["readme","versions","dependencies","dependents","code"].includes(t)&&(r.extra.tab=t),r}if(n[0].startsWith("~"))return r.type="profile",r.creator=n[0].slice(1),r.identifier=n[0].slice(1),r;if("org"===n[0]&&n.length>=2)return r.type="org",r.creator=n[1],r.identifier=n[1],r;if("search"===n[0])return r.type="search",r.extra.query=t.searchParams.get("q"),r;return r}(e):function(t){const e=t.hostname,n=t.pathname,r=n.slice(1).split("/").filter(Boolean),i={platform:"other",type:"page",creator:null,identifier:null,subtype:null,extra:{domain:e.replace(/^www\./,"")}};(n.includes("/blog/")||n.includes("/article/")||n.includes("/post/"))&&(i.type="article",i.identifier=r[r.length-1]);(n.includes("/docs/")||n.includes("/documentation/")||n.includes("/api/"))&&(i.type="documentation",i.identifier=r[r.length-1]);r.length>=1&&(r[0].startsWith("@")||"user"===r[0]||"profile"===r[0])&&(i.type="profile",i.creator=r[0].startsWith("@")?r[0]:r[1]||r[0]);return i}(e)}catch(e){return console.warn("Error parsing URL:",t,e),null}}function $l(t){return{youtube:"YouTube",github:"GitHub",medium:"Medium",devto:"DEV Community",substack:"Substack",twitter:"Twitter/X",reddit:"Reddit",stackoverflow:"Stack Overflow",npm:"npm",other:"Other"}[t]||t}function Ll(t){return{youtube:"",github:"",medium:"",devto:"",substack:"",twitter:"",reddit:"",stackoverflow:"",npm:"",other:""}[t]||""}function Rl(t){return{video:"Video",short:"Short",channel:"Channel",playlist:"Playlist",repo:"Repository",issue:"Issue",pr:"Pull Request",gist:"Gist",file:"File",wiki:"Wiki",article:"Article",profile:"Profile",question:"Question",package:"Package",subreddit:"Subreddit",post:"Post",tweet:"Tweet",home:"Home",search:"Search",page:"Page"}[t]||t}const Bl=new Tl("BookmarkInsightsDB");Bl.version(1).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}),Bl.version(2).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}).upgrade(t=>{console.log("Upgrading database to version 2 - adding rawMetadata support")}),Bl.version(3).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 3 - adding similarities and computedMetrics tables")}),Bl.version(4).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId, platform, creator, contentType",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 4 - adding platformData indexes")});const Il={enrichmentEnabled:!0,enrichmentSchedule:"manual",enrichmentBatchSize:20,enrichmentConcurrency:3,enrichmentRateLimit:1e3,enrichmentFreshnessDays:30,autoCategorizationEnabled:!0,deadLinkCheckEnabled:!0,privacyMode:!1,trackBrowsingBehavior:!1};async function jl(){try{return await Bl.bookmarks.toArray()}catch(t){return console.error("Error getting bookmarks:",t),[]}}async function Fl(t){try{return await Bl.bookmarks.delete(t),!0}catch(t){return console.error("Error deleting bookmark:",t),!1}}async function zl(){try{const t=await Bl.bookmarks.toArray(),e={};return t.forEach(t=>{t.domain&&(e[t.domain]=(e[t.domain]||0)+1)}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,10)}catch(t){return console.error("Error getting domain stats:",t),[]}}async function Nl(){try{const t=await Bl.bookmarks.toArray(),e={};return t.forEach(t=>{const n=new Date(t.dateAdded),r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;e[r]=(e[r]||0)+1}),Object.entries(e).sort()}catch(t){return console.error("Error getting activity timeline:",t),[]}}const Wl={domainStats:36e5,activityTimeline:216e5,wordFrequency:864e5,ageDistribution:216e5,categoryTrends:864e5,expertiseAreas:864e5,quickStats:3e5,duplicates:864e5,similarities:864e5,insightsSummary:3e5};async function Vl(t,e,n){try{const r=await Bl.computedMetrics.get(t);if(r&&r.validUntil>Date.now())return console.log(`Cache hit for metric: ${t}`),r.data;console.log(`Cache miss for metric: ${t}, computing...`);const i=await e();return await Bl.computedMetrics.put({key:t,data:i,computedAt:Date.now(),validUntil:Date.now()+n}),i}catch(n){return console.error(`Error getting cached metric ${t}:`,n),e()}}async function Hl(){return Vl("domainAnalytics",async()=>{const t=await jl(),e={};t.forEach(t=>{if(!t.domain)return;e[t.domain]||(e[t.domain]={domain:t.domain,count:0,latestDate:0,oldestDate:1/0,enrichedCount:0});const n=e[t.domain];n.count++,t.lastChecked&&n.enrichedCount++,t.dateAdded>n.latestDate&&(n.latestDate=t.dateAdded),t.dateAdded<n.oldestDate&&(n.oldestDate=t.dateAdded)});const n=Object.values(e),r=t.length;return n.forEach(t=>{t.percentage=r>0?Math.round(t.count/r*100):0,t.dateAdded=t.latestDate}),{byRecency:[...n].sort((t,e)=>e.latestDate-t.latestDate),byCount:[...n].sort((t,e)=>e.count-t.count),top10:[...n].sort((t,e)=>e.count-t.count).slice(0,10),totalDomains:n.length,totalBookmarks:r}},Wl.domainStats)}async function ql(){return Vl("ageDistribution",async()=>{const t=await jl(),e=Date.now(),n={"Last 24 hours":0,"Last week":0,"Last month":0,"Last 3 months":0,"Last 6 months":0,"Last year":0,"Over 1 year":0},r=864e5,i=7*r,s=30*r;return t.forEach(t=>{const o=e-t.dateAdded;o<=r?n["Last 24 hours"]++:o<=i?n["Last week"]++:o<=s?n["Last month"]++:o<=3*s?n["Last 3 months"]++:o<=6*s?n["Last 6 months"]++:o<=365*r?n["Last year"]++:n["Over 1 year"]++}),Object.entries(n)},Wl.ageDistribution)}async function Ul(){return Vl("creationPatterns",async()=>{const t=await jl(),e=new Array(24).fill(0),n=new Array(7).fill(0),r=new Array(12).fill(0),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t.forEach(t=>{const i=new Date(t.dateAdded);e[i.getHours()]++,n[i.getDay()]++,r[i.getMonth()]++}),{hourly:e.map((t,e)=>[`${e}:00`,t]),daily:n.map((t,e)=>[i[e],t]),monthly:r.map((t,e)=>[s[e],t])}},Wl.ageDistribution)}async function Kl(){return Vl("wordFrequency",async()=>{const t=await jl(),e={},n=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","about","from","up","out"]);return t.forEach(t=>{if(t.title){t.title.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>2&&!n.has(t)).forEach(t=>{e[t]=(e[t]||0)+1})}}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,20)},Wl.wordFrequency)}async function Yl(){return Vl("duplicates",async()=>{const t=await jl(),e={};return t.forEach(t=>{const n=t.url.toLowerCase().replace(/\/$/,"");e[n]||(e[n]=[]),e[n].push(t)}),Object.values(e).filter(t=>t.length>1)},Wl.duplicates)}async function Ql(){try{const t=await jl(),e=["http://","https://","chrome://","chrome-extension://","file://","javascript:","data:","about:","mailto:","tel:","ftp://","sftp://","ssh://"];return t.filter(t=>{const n=t.url||"";return!e.some(t=>n.startsWith(t))||""===n.trim()})}catch(t){return console.error("Error finding malformed URLs:",t),[]}}async function Gl(){return Vl("quickStats",async()=>{const t=await jl(),e=await Yl(),n=await async function(){try{const t=await jl(),e=["Bookmarks Bar","Other Bookmarks","Mobile Bookmarks",""];return t.filter(t=>{const n=t.folderPath||"";return e.includes(n)||!n.includes("/")})}catch(t){return console.error("Error finding uncategorized bookmarks:",t),[]}}(),r=await Ql(),i=Date.now(),s=t.filter(t=>t.lastChecked).length,o=t.filter(t=>!1===t.isAlive).length,a=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{total:t.length,enriched:s,pending:t.length-s,enrichedPercentage:t.length>0?Math.round(s/t.length*100):0,duplicateGroups:e.length,uncategorized:n.length,malformed:r.length,deadLinks:o,uniqueDomains:a,addedThisWeek:t.filter(t=>i-t.dateAdded<6048e5).length,addedThisMonth:t.filter(t=>i-t.dateAdded<2592e6).length,oldestBookmark:t.reduce((t,e)=>e.dateAdded<t?e.dateAdded:t,Date.now()),newestBookmark:t.reduce((t,e)=>e.dateAdded>t?e.dateAdded:t,0)}},Wl.quickStats)}async function Xl(t){try{const e=[];for(const n of t)try{await chrome.bookmarks.remove(n)}catch(t){console.error(`Error deleting bookmark ${n}:`,t),e.push({id:n,error:t.message})}return await Bl.bookmarks.bulkDelete(t),await async function(t){const e={add:["domainStats","quickStats","activityTimeline","ageDistribution","insightsSummary"],delete:["domainStats","quickStats","duplicates","similarities","insightsSummary"],update:["quickStats","insightsSummary"],enrich:["categoryTrends","expertiseAreas","insightsSummary","quickStats"],all:Object.keys(Wl)}[t]||[];try{for(const t of e)await Bl.computedMetrics.delete(t);console.log(`Invalidated caches for change type: ${t}`,e)}catch(t){console.error("Error invalidating metric caches:",t)}}("delete"),{success:t.length-e.length,errors:e}}catch(t){throw console.error("Error deleting bookmarks:",t),t}}async function Jl(){try{const t=await jl(),e={};return t.forEach(t=>{if(t.title){const n=t.title.toLowerCase();n.includes("how to")&&(e["How-to guides"]=(e["How-to guides"]||0)+1),n.includes("tutorial")&&(e.Tutorials=(e.Tutorials||0)+1),(n.includes("documentation")||n.includes("docs"))&&(e.Documentation=(e.Documentation||0)+1),(n.includes("api")||n.includes("reference"))&&(e["API/Reference"]=(e["API/Reference"]||0)+1),(n.includes("blog")||n.includes("article"))&&(e["Blog/Articles"]=(e["Blog/Articles"]||0)+1),(n.includes("github")||n.includes("repository"))&&(e["Code Repositories"]=(e["Code Repositories"]||0)+1),(n.includes("video")||n.includes("youtube"))&&(e.Videos=(e.Videos||0)+1),(n.includes("tool")||n.includes("app"))&&(e["Tools/Apps"]=(e["Tools/Apps"]||0)+1),n.length>60&&(e["Long titles (60+ chars)"]=(e["Long titles (60+ chars)"]||0)+1),n.split(" ").length<=3&&(e["Short titles (3 words)"]=(e["Short titles (3 words)"]||0)+1)}}),Object.entries(e).sort(([,t],[,e])=>e-t)}catch(t){return console.error("Error getting title patterns:",t),[]}}async function Zl(){try{const t=await jl(),e={},n={},r={},i={};return t.forEach(t=>{try{const s=new URL(t.url);e[s.protocol]=(e[s.protocol]||0)+1;const o=s.hostname.split(".");if(o.length>1){const t=o[o.length-1];n[t]=(n[t]||0)+1}if(o.length>2){const t=o[0];"www"!==t&&(i[t]=(i[t]||0)+1)}const a=s.pathname.split("/").filter(t=>t.length>0);if(a.length>0){const t=a[0];r[t]=(r[t]||0)+1}}catch(t){}}),{protocols:Object.entries(e).sort(([,t],[,e])=>e-t),topLevelDomains:Object.entries(n).sort(([,t],[,e])=>e-t).slice(0,10),subdomains:Object.entries(i).sort(([,t],[,e])=>e-t).slice(0,10),pathPatterns:Object.entries(r).sort(([,t],[,e])=>e-t).slice(0,15)}}catch(t){return console.error("Error getting URL patterns:",t),{protocols:[],topLevelDomains:[],subdomains:[],pathPatterns:[]}}}async function tc(){try{const t=await jl(),e={};let n=0,r=0;t.forEach(t=>{r++;try{const r=new URL(t.url).searchParams;if(r.toString()){n++;for(const[t]of r)e[t]=(e[t]||0)+1}}catch(t){}});return{parameters:Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,15),urlsWithParams:n,totalUrls:r,percentage:r>0?Math.round(n/r*100):0}}catch(t){return console.error("Error getting URL parameter usage:",t),{parameters:[],urlsWithParams:0,totalUrls:0,percentage:0}}}async function ec(){try{const t=await jl(),e={};t.forEach(t=>{e[t.domain]=(e[t.domain]||0)+1});const n=Object.entries(e).sort(([,t],[,e])=>e-t),r=t.length,i=n.slice(0,10),s=n.slice(10).reduce((t,[,e])=>t+e,0),o=i.map(([t,e])=>({domain:t,count:e,percentage:Math.round(e/r*100)}));return s>0&&o.push({domain:"Others",count:s,percentage:Math.round(s/r*100)}),o}catch(t){return console.error("Error getting domain distribution:",t),[]}}async function nc(){try{return(await jl()).filter(t=>!1===t.isAlive)}catch(t){return console.error("Error getting dead links:",t),[]}}async function rc(){try{const t=await Bl.bookmarks.toArray(),e=await Bl.settings.toArray(),n=await Bl.events.orderBy("timestamp").reverse().limit(1e3).toArray(),r=await Bl.similarities.toArray(),i=t.filter(t=>t.lastChecked).length,s=t.filter(t=>t.category).length;return{version:"2.1",schemaVersion:3,createdAt:(new Date).toISOString(),metadata:{totalBookmarks:t.length,enrichedCount:i,categorizedCount:s,eventsCount:n.length,similaritiesCount:r.length},data:{bookmarks:t,settings:e,events:n,similarities:r}}}catch(t){throw console.error("Error creating backup:",t),t}}async function ic(t,e={}){const{restoreBookmarks:n=!0,restoreSettings:r=!0,restoreEvents:i=!1,restoreSimilarities:s=!0,mergeMode:o=!1}=e;try{if(!t||!t.version||!t.data)throw new Error("Invalid backup format");if(!t.data.bookmarks||!Array.isArray(t.data.bookmarks))throw new Error("Backup does not contain valid bookmarks data");const e={bookmarksRestored:0,settingsRestored:0,eventsRestored:0,similaritiesRestored:0,errors:[]};if(n&&t.data.bookmarks.length>0)if(o||await Bl.bookmarks.clear(),o){const n=await Bl.bookmarks.toArray(),r=new Map(n.map(t=>[t.id,t]));for(const n of t.data.bookmarks){const t=r.get(n.id);if(t){const r=t.lastChecked||0;(n.lastChecked||0)>r&&(await Bl.bookmarks.put(n),e.bookmarksRestored++)}else await Bl.bookmarks.put(n),e.bookmarksRestored++}}else await Bl.bookmarks.bulkPut(t.data.bookmarks),e.bookmarksRestored=t.data.bookmarks.length;return r&&t.data.settings&&t.data.settings.length>0&&(o||await Bl.settings.clear(),await Bl.settings.bulkPut(t.data.settings),e.settingsRestored=t.data.settings.length),i&&t.data.events&&t.data.events.length>0&&(o||await Bl.events.clear(),await Bl.events.bulkPut(t.data.events),e.eventsRestored=t.data.events.length),s&&t.data.similarities&&t.data.similarities.length>0&&(o||await Bl.similarities.clear(),await Bl.similarities.bulkPut(t.data.similarities),e.similaritiesRestored=t.data.similarities.length),await async function(){try{return await Bl.computedMetrics.clear(),console.log("Cleared all metric caches"),!0}catch(t){return console.error("Error clearing metric caches:",t),!1}}(),{success:!0,results:e,backupMetadata:t.metadata}}catch(t){throw console.error("Error restoring from backup:",t),t}}async function sc(){try{const t=await rc();let e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];return e.unshift({createdAt:t.createdAt,metadata:t.metadata,data:t.data}),e.length>3&&(e=e.slice(0,3)),await chrome.storage.local.set({autoBackups:e}),console.log("Auto-backup created:",t.metadata),{success:!0,metadata:t.metadata}}catch(t){return console.error("Error creating auto-backup:",t),{success:!1,error:t.message}}}function oc(t,e,n){const r=t.slice();return r[58]=e[n],r}function ac(t,e,n){const r=t.slice();r[61]=e[n];const i=r[1].creators.some(function(...e){return t[47](r[61],...e)});return r[62]=i,r}function lc(t,e,n){const r=t.slice();return r[65]=e[n],r}function cc(t,e,n){const r=t.slice();return r[68]=e[n],r}function uc(t,e,n){const r=t.slice();return r[71]=e[n],r}function dc(t,e,n){const r=t.slice();return r[68]=e[n],r}function hc(t,e,n){const r=t.slice();return r[76]=e[n],r}function fc(t,e,n){const r=t.slice();return r[79]=e[n],r}function pc(t,e,n){const r=t.slice();return r[82]=e[n],r}function gc(t,e,n){const r=t.slice();return r[85]=e[n],r}function mc(e){let n,r,i;return{c(){n=y("button"),n.textContent="Clear All",M(n,"class","text-xs text-blue-600 hover:text-blue-800")},m(t,s){g(t,n,s),r||(i=_(n,"click",e[22]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}function bc(t){let e,n,r,i,s,o,a=nt(t[1].platforms),l=[];for(let e=0;e<a.length;e+=1)l[e]=yc(gc(t,a,e));let c=nt(t[1].creators),u=[];for(let e=0;e<c.length;e+=1)u[e]=xc(pc(t,c,e));let d=nt(t[1].contentTypes),h=[];for(let e=0;e<d.length;e+=1)h[e]=vc(fc(t,d,e));let f=nt(t[1].domains),x=[];for(let e=0;e<f.length;e+=1)x[e]=wc(hc(t,f,e));let v=nt(t[1].folders),k=[];for(let e=0;e<v.length;e+=1)k[e]=kc(dc(t,v,e));let _=t[1].dateRange&&_c(t);return{c(){e=y("div");for(let t=0;t<l.length;t+=1)l[t].c();n=w();for(let t=0;t<u.length;t+=1)u[t].c();r=w();for(let t=0;t<h.length;t+=1)h[t].c();i=w();for(let t=0;t<x.length;t+=1)x[t].c();s=w();for(let t=0;t<k.length;t+=1)k[t].c();o=w(),_&&_.c(),M(e,"class","mb-4 space-y-2")},m(t,a){g(t,e,a);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);p(e,n);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(e,null);p(e,r);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null);p(e,i);for(let t=0;t<x.length;t+=1)x[t]&&x[t].m(e,null);p(e,s);for(let t=0;t<k.length;t+=1)k[t]&&k[t].m(e,null);p(e,o),_&&_.m(e,null)},p(t,p){if(524290&p[0]){let r;for(a=nt(t[1].platforms),r=0;r<a.length;r+=1){const i=gc(t,a,r);l[r]?l[r].p(i,p):(l[r]=yc(i),l[r].c(),l[r].m(e,n))}for(;r<l.length;r+=1)l[r].d(1);l.length=a.length}if(1048578&p[0]){let n;for(c=nt(t[1].creators),n=0;n<c.length;n+=1){const i=pc(t,c,n);u[n]?u[n].p(i,p):(u[n]=xc(i),u[n].c(),u[n].m(e,r))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}if(2097154&p[0]){let n;for(d=nt(t[1].contentTypes),n=0;n<d.length;n+=1){const r=fc(t,d,n);h[n]?h[n].p(r,p):(h[n]=vc(r),h[n].c(),h[n].m(e,i))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}if(131074&p[0]){let n;for(f=nt(t[1].domains),n=0;n<f.length;n+=1){const r=hc(t,f,n);x[n]?x[n].p(r,p):(x[n]=wc(r),x[n].c(),x[n].m(e,s))}for(;n<x.length;n+=1)x[n].d(1);x.length=f.length}if(262146&p[0]){let n;for(v=nt(t[1].folders),n=0;n<v.length;n+=1){const r=dc(t,v,n);k[n]?k[n].p(r,p):(k[n]=kc(r),k[n].c(),k[n].m(e,o))}for(;n<k.length;n+=1)k[n].d(1);k.length=v.length}t[1].dateRange?_?_.p(t,p):(_=_c(t),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(t){t&&m(e),b(l,t),b(u,t),b(h,t),b(x,t),b(k,t),_&&_.d()}}}function yc(t){let e,n,r,i,s,o,a,l,c,u=Ll(t[85])+"",d=$l(t[85])+"";function h(){return t[31](t[85])}return{c(){e=y("div"),n=y("div"),r=v(u),i=w(),s=v(d),o=w(),a=y("button"),a.textContent="",M(n,"class","text-xs text-indigo-800"),M(a,"class","text-indigo-600 hover:text-indigo-800"),M(e,"class","flex items-center justify-between p-2 bg-indigo-50 rounded-md")},m(t,u){g(t,e,u),p(e,n),p(n,r),p(n,i),p(n,s),p(e,o),p(e,a),l||(c=_(a,"click",h),l=!0)},p(e,n){t=e,2&n[0]&&u!==(u=Ll(t[85])+"")&&A(r,u),2&n[0]&&d!==(d=$l(t[85])+"")&&A(s,d)},d(t){t&&m(e),l=!1,c()}}}function xc(t){let e,n,r,i,s,o,a,l,c,u=Ll(t[82].platform)+"",d=t[82].creator+"";function h(){return t[32](t[82])}return{c(){e=y("div"),n=y("div"),r=v(u),i=w(),s=v(d),o=w(),a=y("button"),a.textContent="",M(n,"class","text-xs text-pink-800"),M(a,"class","text-pink-600 hover:text-pink-800"),M(e,"class","flex items-center justify-between p-2 bg-pink-50 rounded-md")},m(t,u){g(t,e,u),p(e,n),p(n,r),p(n,i),p(n,s),p(e,o),p(e,a),l||(c=_(a,"click",h),l=!0)},p(e,n){t=e,2&n[0]&&u!==(u=Ll(t[82].platform)+"")&&A(r,u),2&n[0]&&d!==(d=t[82].creator+"")&&A(s,d)},d(t){t&&m(e),l=!1,c()}}}function vc(t){let e,n,r,i,s,o,a,l,c=Rl(t[79])+"";function u(){return t[33](t[79])}return{c(){e=y("div"),n=y("div"),r=v("Type: "),i=v(c),s=w(),o=y("button"),o.textContent="",M(n,"class","text-xs text-orange-800"),M(o,"class","text-orange-600 hover:text-orange-800"),M(e,"class","flex items-center justify-between p-2 bg-orange-50 rounded-md")},m(t,c){g(t,e,c),p(e,n),p(n,r),p(n,i),p(e,s),p(e,o),a||(l=_(o,"click",u),a=!0)},p(e,n){t=e,2&n[0]&&c!==(c=Rl(t[79])+"")&&A(i,c)},d(t){t&&m(e),a=!1,l()}}}function wc(t){let e,n,r,i,s,o,a,l,c=t[76]+"";function u(){return t[34](t[76])}return{c(){e=y("div"),n=y("div"),r=v("Domain: "),i=v(c),s=w(),o=y("button"),o.textContent="",M(n,"class","text-xs text-blue-800"),M(o,"class","text-blue-600 hover:text-blue-800"),M(e,"class","flex items-center justify-between p-2 bg-blue-50 rounded-md")},m(t,c){g(t,e,c),p(e,n),p(n,r),p(n,i),p(e,s),p(e,o),a||(l=_(o,"click",u),a=!0)},p(e,n){t=e,2&n[0]&&c!==(c=t[76]+"")&&A(i,c)},d(t){t&&m(e),a=!1,l()}}}function kc(t){let e,n,r,i,s,o,a,l,c=t[68]+"";function u(){return t[35](t[68])}return{c(){e=y("div"),n=y("div"),r=v("Folder: "),i=v(c),s=w(),o=y("button"),o.textContent="",M(n,"class","text-xs text-green-800"),M(o,"class","text-green-600 hover:text-green-800"),M(e,"class","flex items-center justify-between p-2 bg-green-50 rounded-md")},m(t,c){g(t,e,c),p(e,n),p(n,r),p(n,i),p(e,s),p(e,o),a||(l=_(o,"click",u),a=!0)},p(e,n){t=e,2&n[0]&&c!==(c=t[68]+"")&&A(i,c)},d(t){t&&m(e),a=!1,l()}}}function _c(t){let e,n,r,i,s,o,a,l="week"===t[1].dateRange.period?"This Week":"month"===t[1].dateRange.period?"This Month":"This Year";return{c(){e=y("div"),n=y("div"),r=v(l),i=w(),s=y("button"),s.textContent="",M(n,"class","text-xs text-purple-800"),M(s,"class","text-purple-600 hover:text-purple-800"),M(e,"class","flex items-center justify-between p-2 bg-purple-50 rounded-md")},m(l,c){g(l,e,c),p(e,n),p(n,r),p(e,i),p(e,s),o||(a=_(s,"click",t[36]),o=!0)},p(t,e){2&e[0]&&l!==(l="week"===t[1].dateRange.period?"This Week":"month"===t[1].dateRange.period?"This Month":"This Year")&&A(r,l)},d(t){t&&m(e),o=!1,a()}}}function Cc(t){let e,n,r,i=t[12].length+"";return{c(){e=v(" Domains ("),n=v(i),r=v(")")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i)},p(t,e){4096&e[0]&&i!==(i=t[12].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function Mc(t){let e,n,r,i,s=t[12].length+"";return{c(){e=y("span"),n=v("Matching Domains ("),r=v(s),i=v(")"),M(e,"class","text-blue-600")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i)},p(t,e){4096&e[0]&&s!==(s=t[12].length+"")&&A(r,s)},d(t){t&&m(e)}}}function Sc(t){let e,n,r,i,s=!t[0]&&Ac(t),o=nt(t[12].slice(0,t[6])),a=[];for(let e=0;e<o.length;e+=1)a[e]=Pc(uc(t,o,e));let l=t[12].length>t[6]&&Ec(t),c=0===t[12].length&&Tc();return{c(){s&&s.c(),e=w(),n=y("div");for(let t=0;t<a.length;t+=1)a[t].c();r=w(),l&&l.c(),i=w(),c&&c.c(),M(n,"class","space-y-1 max-h-64 overflow-y-auto")},m(t,o){s&&s.m(t,o),g(t,e,o),g(t,n,o);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(n,null);p(n,r),l&&l.m(n,null),p(n,i),c&&c.m(n,null)},p(t,u){if(t[0]?s&&(s.d(1),s=null):s?s.p(t,u):(s=Ac(t),s.c(),s.m(e.parentNode,e)),135239&u[0]){let e;for(o=nt(t[12].slice(0,t[6])),e=0;e<o.length;e+=1){const i=uc(t,o,e);a[e]?a[e].p(i,u):(a[e]=Pc(i),a[e].c(),a[e].m(n,r))}for(;e<a.length;e+=1)a[e].d(1);a.length=o.length}t[12].length>t[6]?l?l.p(t,u):(l=Ec(t),l.c(),l.m(n,i)):l&&(l.d(1),l=null),0===t[12].length?c||(c=Tc(),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},d(t){t&&(m(e),m(n)),s&&s.d(t),b(a,t),l&&l.d(),c&&c.d()}}}function Ac(t){let e,n,i,s,o,a;return{c(){e=y("div"),n=y("button"),n.textContent="Recent",i=w(),s=y("button"),s.textContent="Count",M(n,"class","text-xs px-2 py-1 rounded"),M(n,"title","Sort by most recent bookmark"),O(n,"bg-blue-100","recency"===t[2]),O(n,"text-blue-700","recency"===t[2]),O(n,"text-gray-500","recency"!==t[2]),M(s,"class","text-xs px-2 py-1 rounded"),M(s,"title","Sort by bookmark count"),O(s,"bg-blue-100","count"===t[2]),O(s,"text-blue-700","count"===t[2]),O(s,"text-gray-500","count"!==t[2]),M(e,"class","flex space-x-1 mb-2")},m(r,l){g(r,e,l),p(e,n),p(e,i),p(e,s),o||(a=[_(n,"click",t[38]),_(s,"click",t[39])],o=!0)},p(t,e){4&e[0]&&O(n,"bg-blue-100","recency"===t[2]),4&e[0]&&O(n,"text-blue-700","recency"===t[2]),4&e[0]&&O(n,"text-gray-500","recency"!==t[2]),4&e[0]&&O(s,"bg-blue-100","count"===t[2]),4&e[0]&&O(s,"text-blue-700","count"===t[2]),4&e[0]&&O(s,"text-gray-500","count"!==t[2])},d(t){t&&m(e),o=!1,r(a)}}}function Dc(t){let e,n,r=Qc(t[71].dateAdded||t[71].latestDate)+"";return{c(){e=y("span"),n=v(r)},m(t,r){g(t,e,r),p(e,n)},p(t,e){4160&e[0]&&r!==(r=Qc(t[71].dateAdded||t[71].latestDate)+"")&&A(n,r)},d(t){t&&m(e)}}}function Pc(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b=t[71].domain+"",x=t[71].count+"",k=1!==t[71].count?"s":"",C=!t[0]&&"recency"===t[2]&&(t[71].dateAdded||t[71].latestDate)&&Dc(t);function S(){return t[40](t[71])}return{c(){e=y("button"),n=y("div"),r=v(b),i=w(),s=y("div"),o=y("span"),a=v(x),l=v(" bookmark"),c=v(k),u=w(),C&&C.c(),M(n,"class","truncate font-medium"),M(s,"class","flex justify-between items-center text-xs text-gray-500 mt-1"),M(e,"class","w-full text-left px-2 py-2 text-sm hover:bg-gray-100 rounded border"),M(e,"title",d=t[71].domain),O(e,"bg-blue-50",t[1].domains.includes(t[71].domain)),O(e,"text-blue-700",t[1].domains.includes(t[71].domain)),O(e,"border-blue-200",t[1].domains.includes(t[71].domain)),O(e,"text-gray-600",!t[1].domains.includes(t[71].domain)),O(e,"border-transparent",!t[1].domains.includes(t[71].domain))},m(t,d){g(t,e,d),p(e,n),p(n,r),p(e,i),p(e,s),p(s,o),p(o,a),p(o,l),p(o,c),p(s,u),C&&C.m(s,null),h||(f=_(e,"click",S),h=!0)},p(n,i){t=n,4160&i[0]&&b!==(b=t[71].domain+"")&&A(r,b),4160&i[0]&&x!==(x=t[71].count+"")&&A(a,x),4160&i[0]&&k!==(k=1!==t[71].count?"s":"")&&A(c,k),t[0]||"recency"!==t[2]||!t[71].dateAdded&&!t[71].latestDate?C&&(C.d(1),C=null):C?C.p(t,i):(C=Dc(t),C.c(),C.m(s,null)),4160&i[0]&&d!==(d=t[71].domain)&&M(e,"title",d),4162&i[0]&&O(e,"bg-blue-50",t[1].domains.includes(t[71].domain)),4162&i[0]&&O(e,"text-blue-700",t[1].domains.includes(t[71].domain)),4162&i[0]&&O(e,"border-blue-200",t[1].domains.includes(t[71].domain)),4162&i[0]&&O(e,"text-gray-600",!t[1].domains.includes(t[71].domain)),4162&i[0]&&O(e,"border-transparent",!t[1].domains.includes(t[71].domain))},d(t){t&&m(e),C&&C.d(),h=!1,f()}}}function Ec(t){let e,n,r,i,s,o,a,l,c=t[12].length+"";return{c(){e=y("button"),n=v("Load More ("),r=v(t[6]),i=v(" of "),s=v(c),o=v(" shown)"),M(e,"class","w-full text-center px-2 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded border border-blue-200 mt-2")},m(c,u){g(c,e,u),p(e,n),p(e,r),p(e,i),p(e,s),p(e,o),a||(l=_(e,"click",t[13]),a=!0)},p(t,e){64&e[0]&&A(r,t[6]),4096&e[0]&&c!==(c=t[12].length+"")&&A(s,c)},d(t){t&&m(e),a=!1,l()}}}function Tc(t){let e;return{c(){e=y("div"),e.textContent="No domains found",M(e,"class","text-xs text-gray-400 px-2 py-2 italic")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Oc(t){let e,n,r,i=t[11].length+"";return{c(){e=v(" Folders ("),n=v(i),r=v(")")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i)},p(t,e){2048&e[0]&&i!==(i=t[11].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function $c(t){let e,n,r,i,s=t[11].length+"";return{c(){e=y("span"),n=v("Matching Folders ("),r=v(s),i=v(")"),M(e,"class","text-blue-600")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i)},p(t,e){2048&e[0]&&s!==(s=t[11].length+"")&&A(r,s)},d(t){t&&m(e)}}}function Lc(t){let e,n,r,i=nt(t[11].slice(0,t[7])),s=[];for(let e=0;e<i.length;e+=1)s[e]=Rc(cc(t,i,e));let o=t[11].length>t[7]&&Bc(t),a=0===t[11].length&&Ic();return{c(){e=y("div");for(let t=0;t<s.length;t+=1)s[t].c();n=w(),o&&o.c(),r=w(),a&&a.c(),M(e,"class","space-y-1 max-h-64 overflow-y-auto")},m(t,i){g(t,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);p(e,n),o&&o.m(e,null),p(e,r),a&&a.m(e,null)},p(t,l){if(264322&l[0]){let r;for(i=nt(t[11].slice(0,t[7])),r=0;r<i.length;r+=1){const o=cc(t,i,r);s[r]?s[r].p(o,l):(s[r]=Rc(o),s[r].c(),s[r].m(e,n))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}t[11].length>t[7]?o?o.p(t,l):(o=Bc(t),o.c(),o.m(e,r)):o&&(o.d(1),o=null),0===t[11].length?a||(a=Ic(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(t){t&&m(e),b(s,t),o&&o.d(),a&&a.d()}}}function Rc(t){let e,n,r,i,s,o,a,l=t[68]+"";function c(){return t[42](t[68])}return{c(){e=y("button"),n=y("span"),r=v(" "),i=v(l),M(n,"class","truncate block"),M(e,"class","w-full text-left px-2 py-1 text-sm hover:bg-gray-100 rounded border"),M(e,"title",s=t[68]),O(e,"bg-green-50",t[1].folders.includes(t[68])),O(e,"text-green-700",t[1].folders.includes(t[68])),O(e,"border-green-200",t[1].folders.includes(t[68])),O(e,"text-gray-600",!t[1].folders.includes(t[68])),O(e,"border-transparent",!t[1].folders.includes(t[68]))},m(t,s){g(t,e,s),p(e,n),p(n,r),p(n,i),o||(a=_(e,"click",c),o=!0)},p(n,r){t=n,2176&r[0]&&l!==(l=t[68]+"")&&A(i,l),2176&r[0]&&s!==(s=t[68])&&M(e,"title",s),2178&r[0]&&O(e,"bg-green-50",t[1].folders.includes(t[68])),2178&r[0]&&O(e,"text-green-700",t[1].folders.includes(t[68])),2178&r[0]&&O(e,"border-green-200",t[1].folders.includes(t[68])),2178&r[0]&&O(e,"text-gray-600",!t[1].folders.includes(t[68])),2178&r[0]&&O(e,"border-transparent",!t[1].folders.includes(t[68]))},d(t){t&&m(e),o=!1,a()}}}function Bc(t){let e,n,r,i,s,o,a,l,c=t[11].length+"";return{c(){e=y("button"),n=v("Load More ("),r=v(t[7]),i=v(" of "),s=v(c),o=v(" shown)"),M(e,"class","w-full text-center px-2 py-2 text-sm text-green-600 hover:bg-green-50 rounded border border-green-200 mt-2")},m(c,u){g(c,e,u),p(e,n),p(e,r),p(e,i),p(e,s),p(e,o),a||(l=_(e,"click",t[14]),a=!0)},p(t,e){128&e[0]&&A(r,t[7]),2048&e[0]&&c!==(c=t[11].length+"")&&A(s,c)},d(t){t&&m(e),a=!1,l()}}}function Ic(t){let e;return{c(){e=y("div"),e.textContent="No folders found",M(e,"class","text-xs text-gray-400 px-2 py-2 italic")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function jc(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[3].length+"",b=t[9].platforms?"":"",x=t[9].platforms&&Fc(t);return{c(){e=y("div"),n=y("button"),r=y("span"),i=v(" Platforms ("),s=v(f),o=v(")"),a=w(),l=y("span"),c=v(b),u=w(),x&&x.c(),M(l,"class","text-gray-400"),M(n,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),M(e,"class","mb-4")},m(f,m){g(f,e,m),p(e,n),p(n,r),p(r,i),p(r,s),p(r,o),p(n,a),p(n,l),p(l,c),p(e,u),x&&x.m(e,null),d||(h=_(n,"click",t[43]),d=!0)},p(t,n){8&n[0]&&f!==(f=t[3].length+"")&&A(s,f),512&n[0]&&b!==(b=t[9].platforms?"":"")&&A(c,b),t[9].platforms?x?x.p(t,n):(x=Fc(t),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},d(t){t&&m(e),x&&x.d(),d=!1,h()}}}function Fc(t){let e,n=nt(t[3]),r=[];for(let e=0;e<n.length;e+=1)r[e]=zc(lc(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-1")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(524298&i[0]){let s;for(n=nt(t[3]),s=0;s<n.length;s+=1){const o=lc(t,n,s);r[s]?r[s].p(o,i):(r[s]=zc(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function zc(t){let e,n,r,i,s,o,a,l,c,u,d,h=Ll(t[65].platform)+"",f=$l(t[65].platform)+"",b=t[65].count+"";function x(){return t[44](t[65])}return{c(){e=y("button"),n=y("span"),r=v(h),i=w(),s=v(f),o=w(),a=y("span"),l=v(b),c=w(),M(a,"class","text-xs text-gray-400"),M(e,"class","w-full text-left px-2 py-1.5 text-sm hover:bg-gray-100 rounded border flex items-center justify-between"),O(e,"bg-indigo-50",t[1].platforms.includes(t[65].platform)),O(e,"text-indigo-700",t[1].platforms.includes(t[65].platform)),O(e,"border-indigo-200",t[1].platforms.includes(t[65].platform)),O(e,"text-gray-600",!t[1].platforms.includes(t[65].platform)),O(e,"border-transparent",!t[1].platforms.includes(t[65].platform))},m(t,h){g(t,e,h),p(e,n),p(n,r),p(n,i),p(n,s),p(e,o),p(e,a),p(a,l),p(e,c),u||(d=_(e,"click",x),u=!0)},p(n,i){t=n,8&i[0]&&h!==(h=Ll(t[65].platform)+"")&&A(r,h),8&i[0]&&f!==(f=$l(t[65].platform)+"")&&A(s,f),8&i[0]&&b!==(b=t[65].count+"")&&A(l,b),10&i[0]&&O(e,"bg-indigo-50",t[1].platforms.includes(t[65].platform)),10&i[0]&&O(e,"text-indigo-700",t[1].platforms.includes(t[65].platform)),10&i[0]&&O(e,"border-indigo-200",t[1].platforms.includes(t[65].platform)),10&i[0]&&O(e,"text-gray-600",!t[1].platforms.includes(t[65].platform)),10&i[0]&&O(e,"border-transparent",!t[1].platforms.includes(t[65].platform))},d(t){t&&m(e),u=!1,d()}}}function Nc(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[4].length+"",b=t[9].creators?"":"",x=t[9].creators&&Wc(t);return{c(){e=y("div"),n=y("button"),r=y("span"),i=v(" Top Creators ("),s=v(f),o=v(")"),a=w(),l=y("span"),c=v(b),u=w(),x&&x.c(),M(l,"class","text-gray-400"),M(n,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),M(e,"class","mb-4")},m(f,m){g(f,e,m),p(e,n),p(n,r),p(r,i),p(r,s),p(r,o),p(n,a),p(n,l),p(l,c),p(e,u),x&&x.m(e,null),d||(h=_(n,"click",t[45]),d=!0)},p(t,n){16&n[0]&&f!==(f=t[4].length+"")&&A(s,f),512&n[0]&&b!==(b=t[9].creators?"":"")&&A(c,b),t[9].creators?x?x.p(t,n):(x=Wc(t),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},d(t){t&&m(e),x&&x.d(),d=!1,h()}}}function Wc(t){let e,n,r=nt(t[4].slice(0,t[8])),i=[];for(let e=0;e<r.length;e+=1)i[e]=Vc(ac(t,r,e));let s=t[4].length>t[8]&&Hc(t);return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();n=w(),s&&s.c(),M(e,"class","space-y-1 max-h-48 overflow-y-auto")},m(t,r){g(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);p(e,n),s&&s.m(e,null)},p(t,o){if(1048850&o[0]){let s;for(r=nt(t[4].slice(0,t[8])),s=0;s<r.length;s+=1){const a=ac(t,r,s);i[s]?i[s].p(a,o):(i[s]=Vc(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}t[4].length>t[8]?s?s.p(t,o):(s=Hc(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&m(e),b(i,t),s&&s.d()}}}function Vc(t){let e,n,r,i,s,o,a,l,c,u,d,h=Ll(t[61].platform)+"",f=t[61].creator+"",b=t[61].count+"";function x(){return t[46](t[61])}return{c(){e=y("button"),n=y("div"),r=y("span"),i=v(h),s=w(),o=v(f),a=w(),l=y("span"),c=v(b),M(r,"class","truncate"),M(l,"class","text-xs text-gray-400 ml-1"),M(n,"class","flex items-center justify-between"),M(e,"class","w-full text-left px-2 py-1.5 text-sm hover:bg-gray-100 rounded border"),O(e,"bg-pink-50",t[62]),O(e,"text-pink-700",t[62]),O(e,"border-pink-200",t[62]),O(e,"text-gray-600",!t[62]),O(e,"border-transparent",!t[62])},m(t,h){g(t,e,h),p(e,n),p(n,r),p(r,i),p(r,s),p(r,o),p(n,a),p(n,l),p(l,c),u||(d=_(e,"click",x),u=!0)},p(n,r){t=n,272&r[0]&&h!==(h=Ll(t[61].platform)+"")&&A(i,h),272&r[0]&&f!==(f=t[61].creator+"")&&A(o,f),272&r[0]&&b!==(b=t[61].count+"")&&A(c,b),274&r[0]&&O(e,"bg-pink-50",t[62]),274&r[0]&&O(e,"text-pink-700",t[62]),274&r[0]&&O(e,"border-pink-200",t[62]),274&r[0]&&O(e,"text-gray-600",!t[62]),274&r[0]&&O(e,"border-transparent",!t[62])},d(t){t&&m(e),u=!1,d()}}}function Hc(t){let e,n,r,i,s,o,a=t[4].length-t[8]+"";return{c(){e=y("button"),n=v("Show more ("),r=v(a),i=v(" more)"),M(e,"class","w-full text-center px-2 py-1 text-xs text-pink-600 hover:bg-pink-50 rounded")},m(a,l){g(a,e,l),p(e,n),p(e,r),p(e,i),s||(o=_(e,"click",t[15]),s=!0)},p(t,e){272&e[0]&&a!==(a=t[4].length-t[8]+"")&&A(r,a)},d(t){t&&m(e),s=!1,o()}}}function qc(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[5].length+"",b=t[9].contentTypes?"":"",x=t[9].contentTypes&&Uc(t);return{c(){e=y("div"),n=y("button"),r=y("span"),i=v(" Content Types ("),s=v(f),o=v(")"),a=w(),l=y("span"),c=v(b),u=w(),x&&x.c(),M(l,"class","text-gray-400"),M(n,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),M(e,"class","mb-4")},m(f,m){g(f,e,m),p(e,n),p(n,r),p(r,i),p(r,s),p(r,o),p(n,a),p(n,l),p(l,c),p(e,u),x&&x.m(e,null),d||(h=_(n,"click",t[48]),d=!0)},p(t,n){32&n[0]&&f!==(f=t[5].length+"")&&A(s,f),512&n[0]&&b!==(b=t[9].contentTypes?"":"")&&A(c,b),t[9].contentTypes?x?x.p(t,n):(x=Uc(t),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},d(t){t&&m(e),x&&x.d(),d=!1,h()}}}function Uc(t){let e,n=nt(t[5]),r=[];for(let e=0;e<n.length;e+=1)r[e]=Kc(oc(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-1")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(2097186&i[0]){let s;for(n=nt(t[5]),s=0;s<n.length;s+=1){const o=oc(t,n,s);r[s]?r[s].p(o,i):(r[s]=Kc(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Kc(t){let e,n,r,i,s,o,a,l,c,u=Rl(t[58].type)+"",d=t[58].count+"";function h(){return t[49](t[58])}return{c(){e=y("button"),n=y("span"),r=v(u),i=w(),s=y("span"),o=v(d),a=w(),M(s,"class","text-xs text-gray-400"),M(e,"class","w-full text-left px-2 py-1.5 text-sm hover:bg-gray-100 rounded border flex items-center justify-between"),O(e,"bg-orange-50",t[1].contentTypes.includes(t[58].type)),O(e,"text-orange-700",t[1].contentTypes.includes(t[58].type)),O(e,"border-orange-200",t[1].contentTypes.includes(t[58].type)),O(e,"text-gray-600",!t[1].contentTypes.includes(t[58].type)),O(e,"border-transparent",!t[1].contentTypes.includes(t[58].type))},m(t,u){g(t,e,u),p(e,n),p(n,r),p(e,i),p(e,s),p(s,o),p(e,a),l||(c=_(e,"click",h),l=!0)},p(n,i){t=n,32&i[0]&&u!==(u=Rl(t[58].type)+"")&&A(r,u),32&i[0]&&d!==(d=t[58].count+"")&&A(o,d),34&i[0]&&O(e,"bg-orange-50",t[1].contentTypes.includes(t[58].type)),34&i[0]&&O(e,"text-orange-700",t[1].contentTypes.includes(t[58].type)),34&i[0]&&O(e,"border-orange-200",t[1].contentTypes.includes(t[58].type)),34&i[0]&&O(e,"text-gray-600",!t[1].contentTypes.includes(t[58].type)),34&i[0]&&O(e,"border-transparent",!t[1].contentTypes.includes(t[58].type))},d(t){t&&m(e),l=!1,c()}}}function Yc(e){let n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,T,$,L,R,B,I,j,F,z,N,W,V,H,q,U,K,Y,Q,G=e[9].domains?"":"",X=e[9].folders?"":"",J=e[10]&&mc(e),Z=e[10]&&bc(e);function tt(t,e){return t[0]?Mc:Cc}let et=tt(e),nt=et(e),rt=e[9].domains&&Sc(e);function it(t,e){return t[0]?$c:Oc}let st=it(e),ot=st(e),at=e[9].folders&&Lc(e),lt=e[3].length>0&&jc(e),ct=e[4].length>0&&Nc(e),ut=e[5].length>0&&qc(e);return{c(){n=y("div"),i=y("div"),s=y("div"),o=y("h3"),o.textContent="Filters",a=w(),J&&J.c(),l=w(),Z&&Z.c(),c=w(),u=y("div"),d=y("button"),h=y("span"),nt.c(),f=w(),b=y("span"),x=v(G),k=w(),rt&&rt.c(),C=w(),S=y("div"),D=y("button"),P=y("span"),ot.c(),E=w(),T=y("span"),$=v(X),L=w(),at&&at.c(),R=w(),lt&&lt.c(),B=w(),ct&&ct.c(),I=w(),ut&&ut.c(),j=w(),F=y("div"),z=y("h4"),z.textContent="Date Added",N=w(),W=y("div"),V=y("button"),V.textContent="This Week",H=w(),q=y("button"),q.textContent="This Month",U=w(),K=y("button"),K.textContent="This Year",M(o,"class","text-sm font-medium text-gray-900"),M(s,"class","flex items-center justify-between mb-3"),M(i,"class","mb-6"),M(b,"class","text-gray-400"),M(d,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),M(u,"class","mb-4"),M(T,"class","text-gray-400"),M(D,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),M(S,"class","mb-4"),M(z,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),M(V,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),O(V,"bg-blue-50","week"===e[1].dateRange?.period),O(V,"text-blue-700","week"===e[1].dateRange?.period),M(q,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),O(q,"bg-blue-50","month"===e[1].dateRange?.period),O(q,"text-blue-700","month"===e[1].dateRange?.period),M(K,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),O(K,"bg-blue-50","year"===e[1].dateRange?.period),O(K,"text-blue-700","year"===e[1].dateRange?.period),M(W,"class","space-y-1"),M(F,"class","mb-4"),M(n,"class","w-64 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0")},m(t,r){g(t,n,r),p(n,i),p(i,s),p(s,o),p(s,a),J&&J.m(s,null),p(i,l),Z&&Z.m(i,null),p(n,c),p(n,u),p(u,d),p(d,h),nt.m(h,null),p(d,f),p(d,b),p(b,x),p(u,k),rt&&rt.m(u,null),p(n,C),p(n,S),p(S,D),p(D,P),ot.m(P,null),p(D,E),p(D,T),p(T,$),p(S,L),at&&at.m(S,null),p(n,R),lt&&lt.m(n,null),p(n,B),ct&&ct.m(n,null),p(n,I),ut&&ut.m(n,null),p(n,j),p(n,F),p(F,z),p(F,N),p(F,W),p(W,V),p(W,H),p(W,q),p(W,U),p(W,K),Y||(Q=[_(d,"click",e[37]),_(D,"click",e[41]),_(V,"click",e[50]),_(q,"click",e[51]),_(K,"click",e[52])],Y=!0)},p(t,e){t[10]?J?J.p(t,e):(J=mc(t),J.c(),J.m(s,null)):J&&(J.d(1),J=null),t[10]?Z?Z.p(t,e):(Z=bc(t),Z.c(),Z.m(i,null)):Z&&(Z.d(1),Z=null),et===(et=tt(t))&&nt?nt.p(t,e):(nt.d(1),nt=et(t),nt&&(nt.c(),nt.m(h,null))),512&e[0]&&G!==(G=t[9].domains?"":"")&&A(x,G),t[9].domains?rt?rt.p(t,e):(rt=Sc(t),rt.c(),rt.m(u,null)):rt&&(rt.d(1),rt=null),st===(st=it(t))&&ot?ot.p(t,e):(ot.d(1),ot=st(t),ot&&(ot.c(),ot.m(P,null))),512&e[0]&&X!==(X=t[9].folders?"":"")&&A($,X),t[9].folders?at?at.p(t,e):(at=Lc(t),at.c(),at.m(S,null)):at&&(at.d(1),at=null),t[3].length>0?lt?lt.p(t,e):(lt=jc(t),lt.c(),lt.m(n,B)):lt&&(lt.d(1),lt=null),t[4].length>0?ct?ct.p(t,e):(ct=Nc(t),ct.c(),ct.m(n,I)):ct&&(ct.d(1),ct=null),t[5].length>0?ut?ut.p(t,e):(ut=qc(t),ut.c(),ut.m(n,j)):ut&&(ut.d(1),ut=null),2&e[0]&&O(V,"bg-blue-50","week"===t[1].dateRange?.period),2&e[0]&&O(V,"text-blue-700","week"===t[1].dateRange?.period),2&e[0]&&O(q,"bg-blue-50","month"===t[1].dateRange?.period),2&e[0]&&O(q,"text-blue-700","month"===t[1].dateRange?.period),2&e[0]&&O(K,"bg-blue-50","year"===t[1].dateRange?.period),2&e[0]&&O(K,"text-blue-700","year"===t[1].dateRange?.period)},i:t,o:t,d(t){t&&m(n),J&&J.d(),Z&&Z.d(),nt.d(),rt&&rt.d(),ot.d(),at&&at.d(),lt&&lt.d(),ct&&ct.d(),ut&&ut.d(),Y=!1,r(Q)}}}function Qc(t){const e=Date.now()-t,n=Math.floor(e/864e5);return 0===n?"Today":1===n?"1 day ago":n<7?`${n} days ago`:n<30?`${Math.floor(n/7)} weeks ago`:n<365?`${Math.floor(n/30)} months ago`:`${Math.floor(n/365)} years ago`}function Gc(t,e,n){let r,i,s;const o=I();let{searchResultStats:a=null}=e,{isSearchActive:l=!1}=e,c=[],u=[],d=[],h=[],f=[],p=[],g={domains:[],folders:[],platforms:[],creators:[],contentTypes:[],dateRange:null},m="count",b=30,y=15,x=10,v={platforms:!0,creators:!0,contentTypes:!1,domains:!0,folders:!1};function w(t){n(9,v[t]=!v[t],v)}function k(t){g.domains.includes(t)?n(1,g.domains=g.domains.filter(e=>e!==t),g):n(1,g.domains=[...g.domains,t],g),D()}function _(t){g.folders.includes(t)?n(1,g.folders=g.folders.filter(e=>e!==t),g):n(1,g.folders=[...g.folders,t],g),D()}function C(t){g.platforms.includes(t)?n(1,g.platforms=g.platforms.filter(e=>e!==t),g):n(1,g.platforms=[...g.platforms,t],g),D()}function M(t,e){const r=`${e}:${t}`,i=g.creators.find(t=>t.key===r);n(1,g.creators=i?g.creators.filter(t=>t.key!==r):[...g.creators,{key:r,creator:t,platform:e}],g),D()}function S(t){g.contentTypes.includes(t)?n(1,g.contentTypes=g.contentTypes.filter(e=>e!==t),g):n(1,g.contentTypes=[...g.contentTypes,t],g),D()}function A(){n(1,g={domains:[],folders:[],platforms:[],creators:[],contentTypes:[],dateRange:null}),D()}function D(){o("filter",g)}function P(t){const e=new Date;let r;switch(t){case"week":r=new Date(e.getTime()-6048e5);break;case"month":r=new Date(e.getFullYear(),e.getMonth(),1);break;case"year":r=new Date(e.getFullYear(),0,1)}!function(t,e,r){n(1,g.dateRange={startDate:t,endDate:e,period:r},g),D()}(r.getTime(),e.getTime(),t)}B(async()=>{try{await async function(){n(28,c=await async function(){return(await Hl()).byRecency}()),n(29,u=await async function(){return(await Hl()).byCount}())}(),await async function(){const t=await jl(),e={},r={},i={};t.forEach(t=>{const n=t.platform||"other";if(e[n]=(e[n]||0)+1,t.creator){const e=`${t.platform||"other"}:${t.creator}`;r[e]||(r[e]={creator:t.creator,platform:t.platform||"other",count:0}),r[e].count++}t.contentType&&(i[t.contentType]=(i[t.contentType]||0)+1)}),n(3,h=Object.entries(e).map(([t,e])=>({platform:t,count:e})).sort((t,e)=>e.count-t.count)),n(4,f=Object.values(r).sort((t,e)=>e.count-t.count)),n(5,p=Object.entries(i).map(([t,e])=>({type:t,count:e})).sort((t,e)=>e.count-t.count))}(),n(30,d=await async function(){try{const t=await jl();return[...new Set(t.map(t=>t.folderPath).filter(t=>t))].sort()}catch(t){return console.error("Error getting unique folders:",t),[]}}())}catch(t){console.error("Error loading filters:",t)}});return t.$$set=t=>{"searchResultStats"in t&&n(25,a=t.searchResultStats),"isSearchActive"in t&&n(0,l=t.isSearchActive)},t.$$.update=()=>{838860805&t.$$.dirty[0]&&n(12,r=l&&a?.domains?a.domains:"recency"===m?c:u),1107296257&t.$$.dirty[0]&&n(11,i=l&&a?.folders?a.folders.map(t=>t.folder):d),2&t.$$.dirty[0]&&n(10,s=g.domains.length>0||g.folders.length>0||g.platforms.length>0||g.creators.length>0||g.contentTypes.length>0||null!==g.dateRange)},[l,g,m,h,f,p,b,y,x,v,s,i,r,function(){n(6,b+=30)},function(){n(7,y+=15)},function(){n(8,x+=10)},w,k,_,C,M,S,A,D,P,a,function(){return s},function(){A()},c,u,d,t=>C(t),t=>M(t.creator,t.platform),t=>S(t),t=>k(t),t=>_(t),()=>{n(1,g.dateRange=null,g),D()},()=>w("domains"),()=>n(2,m="recency"),()=>n(2,m="count"),t=>k(t.domain),()=>w("folders"),t=>_(t),()=>w("platforms"),t=>C(t.platform),()=>w("creators"),t=>M(t.creator,t.platform),(t,e)=>e.key===`${t.platform}:${t.creator}`,()=>w("contentTypes"),t=>S(t.type),()=>P("week"),()=>P("month"),()=>P("year")]}class Xc extends ut{constructor(t){super(),ct(this,t,Gc,Yc,s,{searchResultStats:25,isSearchActive:0,getHasActiveFilters:26,clearAllFilters:27},null,[-1,-1,-1])}get getHasActiveFilters(){return this.$$.ctx[26]}get clearAllFilters(){return this.$$.ctx[27]}}const Jc={bookmarks:{icon:"",description:"Primary bookmark data with enrichment fields"},events:{icon:"",description:"Activity log (create, delete, access, enrichment events)"},cache:{icon:"",description:"General purpose cache storage"},settings:{icon:"",description:"Application settings and preferences"},similarities:{icon:"",description:"Precomputed bookmark similarity scores"},computedMetrics:{icon:"",description:"Cached computed metrics with TTL"},enrichmentQueue:{icon:"",description:"Queue of bookmarks pending enrichment"}},Zc=[{key:"domainStats",ttl:"1 hour",description:"Top domains by bookmark count"},{key:"activityTimeline",ttl:"6 hours",description:"Monthly bookmark creation timeline"},{key:"quickStats",ttl:"5 minutes",description:"Dashboard quick statistics"},{key:"wordFrequency",ttl:"24 hours",description:"Title word frequency analysis"},{key:"ageDistribution",ttl:"6 hours",description:"Bookmark age distribution"},{key:"categoryTrends",ttl:"24 hours",description:"Category distribution over time"},{key:"expertiseAreas",ttl:"24 hours",description:"User expertise based on bookmarks"},{key:"duplicates",ttl:"24 hours",description:"Detected duplicate bookmarks"},{key:"similarities",ttl:"24 hours",description:"Similar bookmark pairs"},{key:"insightsSummary",ttl:"5 minutes",description:"Aggregated insights summary"}];async function tu(){const t=Object.keys(Jc),e=await Promise.all(t.map(async t=>{try{return{name:t,count:await Bl[t].count(),...Jc[t]}}catch(e){return{name:t,count:0,...Jc[t],error:e.message}}})),n=e.reduce((t,e)=>t+e.count,0),r=await async function(){let t=0;const e=Object.keys(Jc);for(const n of e)try{const e=await Bl[n].toArray();t+=JSON.stringify(e).length}catch(t){}if(t>1048576)return`~${(t/1048576).toFixed(1)} MB`;return`~${(t/1024).toFixed(0)} KB`}();return{tables:e,totalRecords:n,estimatedSize:r,lastChecked:Date.now()}}async function eu(t,e={}){const{page:n=0,pageSize:r=50,sortBy:i=null,sortOrder:s="desc",searchQuery:o="",searchField:a="all",fieldFilter:l=null}=e;let c=await Bl[t].toArray();if(l&&(c=c.filter(t=>{const e=t[l.field],n=null!=e&&""!==e&&!(Array.isArray(e)&&0===e.length);return l.hasValue?n:!n})),o){const t=o.toLowerCase();c=c.filter(e=>{if("all"===a)return JSON.stringify(e).toLowerCase().includes(t);const n=e[a];return n&&String(n).toLowerCase().includes(t)})}i&&c.sort((t,e)=>{const n=t[i],r=e[i];if(n===r)return 0;if(null==n)return 1;if(null==r)return-1;if("number"==typeof n&&"number"==typeof r)return"desc"===s?r-n:n-r;const o=String(n).localeCompare(String(r));return"desc"===s?-o:o});const u=c.length,d=Math.ceil(u/r);return{records:c.slice(n*r,(n+1)*r),totalCount:u,page:n,pageSize:r,totalPages:d,hasMore:(n+1)*r<u,hasPrev:n>0}}async function nu(){let t=[];try{t=await Bl.computedMetrics.toArray()}catch(t){console.error("Error fetching computedMetrics:",t)}const e=Date.now(),n=new Set(t.map(t=>t.key)),r=t.map(t=>{const n=t.validUntil-e;let r="valid";n<=0?r="stale":n<36e5&&(r="expiring");const i=Zc.find(e=>e.key===t.key);return{key:t.key,description:i?.description||"Custom metric",expectedTtl:i?.ttl||"Unknown",computedAt:t.computedAt,validUntil:t.validUntil,timeRemaining:n,status:r,dataSize:JSON.stringify(t.data||{}).length,hasData:!!t.data}});return Zc.forEach(t=>{n.has(t.key)||r.push({key:t.key,description:t.description,expectedTtl:t.ttl,computedAt:null,validUntil:null,timeRemaining:null,status:"never",dataSize:0,hasData:!1})}),r.sort((t,e)=>t.key.localeCompare(e.key))}function ru(t){if(!t)return"-";const e=new Date(t),n=new Date-e,r=Math.floor(n/6e4),i=Math.floor(n/36e5),s=Math.floor(n/864e5);return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:s<7?`${s}d ago`:e.toLocaleDateString()}function iu(t){if(!t||t<=0)return"expired";const e=Math.floor(t/6e4),n=Math.floor(t/36e5),r=Math.floor(t/864e5);return e<60?`${e}m`:n<24?`${n}h`:`${r}d`}function su(t,e,n){const r=t.slice();return r[61]=e[n],r}function ou(t,e,n){const r=t.slice();return r[64]=e[n],r}function au(t,e,n){const r=t.slice();return r[67]=e[n],r}function lu(t,e,n){const r=t.slice();return r[70]=e[n],r}function cu(t,e,n){const r=t.slice();return r[73]=e[n],r[75]=n,r}function uu(t,e,n){const r=t.slice();return r[76]=e[n][0],r[77]=e[n][1],r}function du(t,e,n){const r=t.slice();return r[80]=e[n],r}function hu(t,e,n){const r=t.slice();return r[80]=e[n],r}function fu(t,e,n){const r=t.slice();return r[70]=e[n],r}function pu(t,e,n){const r=t.slice();return r[87]=e[n],r}function gu(t){let e;return{c(){e=v("")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function mu(t){let e;return{c(){e=y("span"),e.textContent="",M(e,"class","animate-spin")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function bu(t){let e,n;return{c(){e=y("div"),n=v(t[1]),M(e,"class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg")},m(t,r){g(t,e,r),p(e,n)},p(t,e){2&e[0]&&A(n,t[1])},d(t){t&&m(e)}}}function yu(t){let e,n,r,i,s,o,a,l,c,u,d,h=t[2].totalRecords.toLocaleString()+"",f=t[2].estimatedSize+"",x=nt(t[2].tables),k=[];for(let e=0;e<x.length;e+=1)k[e]=xu(pu(t,x,e));return{c(){e=y("div"),n=y("h3"),r=y("span"),r.textContent="",i=v(" Database Overview\n        "),s=y("span"),o=v("Total: "),a=v(h),l=v(" records  "),c=v(f),u=w(),d=y("div");for(let t=0;t<k.length;t+=1)k[t].c();M(s,"class","text-xs font-normal text-gray-400"),M(n,"class","text-sm font-semibold text-gray-600 mb-3 flex items-center gap-2"),M(d,"class","grid grid-cols-4 md:grid-cols-7 gap-2"),M(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4")},m(t,h){g(t,e,h),p(e,n),p(n,r),p(n,i),p(n,s),p(s,o),p(s,a),p(s,l),p(s,c),p(e,u),p(e,d);for(let t=0;t<k.length;t+=1)k[t]&&k[t].m(d,null)},p(t,e){if(4&e[0]&&h!==(h=t[2].totalRecords.toLocaleString()+"")&&A(a,h),4&e[0]&&f!==(f=t[2].estimatedSize+"")&&A(c,f),524300&e[0]){let n;for(x=nt(t[2].tables),n=0;n<x.length;n+=1){const r=pu(t,x,n);k[n]?k[n].p(r,e):(k[n]=xu(r),k[n].c(),k[n].m(d,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=x.length}},d(t){t&&m(e),b(k,t)}}}function xu(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b=t[87].icon+"",x=t[87].count.toLocaleString()+"",k=t[87].name+"";function C(){return t[37](t[87])}return{c(){e=y("button"),n=y("div"),r=v(b),i=w(),s=y("div"),o=v(x),a=w(),l=y("div"),c=v(k),u=w(),M(n,"class","text-2xl"),M(s,"class","text-lg font-bold text-gray-800"),M(l,"class","text-xs text-gray-500 truncate"),M(e,"class",d="p-3 rounded-lg border transition-all hover:shadow-md "+(t[3]===t[87].name?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200 hover:bg-gray-100"))},m(t,d){g(t,e,d),p(e,n),p(n,r),p(e,i),p(e,s),p(s,o),p(e,a),p(e,l),p(l,c),p(e,u),h||(f=_(e,"click",C),h=!0)},p(n,i){t=n,4&i[0]&&b!==(b=t[87].icon+"")&&A(r,b),4&i[0]&&x!==(x=t[87].count.toLocaleString()+"")&&A(o,x),4&i[0]&&k!==(k=t[87].name+"")&&A(c,k),12&i[0]&&d!==(d="p-3 rounded-lg border transition-all hover:shadow-md "+(t[3]===t[87].name?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200 hover:bg-gray-100"))&&M(e,"class",d)},d(t){t&&m(e),h=!1,f()}}}function vu(t){let e,n,r,i=t[70]+"";return{c(){e=y("option"),n=v(i),e.__value=r=t[70],D(e,e.__value)},m(t,r){g(t,e,r),p(e,n)},p(t,s){32&s[0]&&i!==(i=t[70]+"")&&A(n,i),32&s[0]&&r!==(r=t[70])&&(e.__value=r,D(e,e.__value))},d(t){t&&m(e)}}}function wu(e){let n,r,i;return{c(){n=y("button"),n.textContent=" Clear",M(n,"class","px-3 py-2 text-gray-500 hover:text-gray-700")},m(t,s){g(t,n,s),r||(i=_(n,"click",e[44]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}function ku(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[14].hasValue?"Has":"Missing",b=t[14].field+"";return{c(){e=y("div"),n=y("span"),n.textContent="Filter:",r=w(),i=y("span"),s=v(f),o=v(' "'),a=v(b),l=v('"'),c=w(),u=y("button"),u.textContent="",M(n,"class","text-gray-500"),M(i,"class","px-2 py-1 bg-blue-100 text-blue-700 rounded"),M(u,"class","text-gray-400 hover:text-gray-600"),M(e,"class","mt-2 flex items-center gap-2 text-sm")},m(f,m){g(f,e,m),p(e,n),p(e,r),p(e,i),p(i,s),p(i,o),p(i,a),p(i,l),p(e,c),p(e,u),d||(h=_(u,"click",t[26]),d=!0)},p(t,e){16384&e[0]&&f!==(f=t[14].hasValue?"Has":"Missing")&&A(s,f),16384&e[0]&&b!==(b=t[14].field+"")&&A(a,b)},d(t){t&&m(e),d=!1,h()}}}function _u(t){let e,n,r,i,s,o,a,l=nt(t[35](t[3])),c=[];for(let e=0;e<l.length;e+=1)c[e]=Du(hu(t,l,e));let u=nt(t[4]),d=[];for(let e=0;e<u.length;e+=1)d[e]=Bu(cu(t,u,e));return{c(){e=y("table"),n=y("thead"),r=y("tr"),i=y("th"),s=w();for(let t=0;t<c.length;t+=1)c[t].c();o=w(),a=y("tbody");for(let t=0;t<d.length;t+=1)d[t].c();M(i,"class","w-8 px-2 py-3"),M(n,"class","bg-gray-50 border-b border-gray-200"),M(a,"class","divide-y divide-gray-200"),M(e,"class","w-full text-sm")},m(t,l){g(t,e,l),p(e,n),p(n,r),p(r,i),p(r,s);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(r,null);p(e,o),p(e,a);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(a,null)},p(t,e){if(4197384&e[0]|16&e[1]){let n;for(l=nt(t[35](t[3])),n=0;n<l.length;n+=1){const i=hu(t,l,n);c[n]?c[n].p(i,e):(c[n]=Du(i),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}if(134221848&e[0]|16&e[1]){let n;for(u=nt(t[4]),n=0;n<u.length;n+=1){const r=cu(t,u,n);d[n]?d[n].p(r,e):(d[n]=Bu(r),d[n].c(),d[n].m(a,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}},d(t){t&&m(e),b(c,t),b(d,t)}}}function Cu(e){let n;return{c(){n=y("div"),n.textContent="No records found",M(n,"class","p-8 text-center text-gray-500")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Mu(e){let n;return{c(){n=y("div"),n.innerHTML='<span class="animate-spin inline-block mr-2"></span> Loading...',M(n,"class","p-8 text-center text-gray-500")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Su(e){let n;return{c(){n=y("span"),n.textContent="",M(n,"class","text-gray-300")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Au(t){let e,n,r="asc"===t[11]?"":"";return{c(){e=y("span"),n=v(r),M(e,"class","text-blue-500")},m(t,r){g(t,e,r),p(e,n)},p(t,e){2048&e[0]&&r!==(r="asc"===t[11]?"":"")&&A(n,r)},d(t){t&&m(e)}}}function Du(t){let e,n,r,i,s,o,a,l=t[80]+"";function c(t,e){return t[10]===t[80]?Au:Su}let u=c(t),d=u(t);function h(){return t[45](t[80])}return{c(){e=y("th"),n=y("span"),r=v(l),i=w(),d.c(),s=w(),M(n,"class","flex items-center gap-1"),M(e,"class","px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100")},m(t,l){g(t,e,l),p(e,n),p(n,r),p(n,i),d.m(n,null),p(e,s),o||(a=_(e,"click",h),o=!0)},p(e,i){t=e,8&i[0]&&l!==(l=t[80]+"")&&A(r,l),u===(u=c(t))&&d?d.p(t,i):(d.d(1),d=u(t),d&&(d.c(),d.m(n,null)))},d(t){t&&m(e),d.d(),o=!1,a()}}}function Pu(t){let e,n,r,i,s=Gu(t[73][t[80]])+"";return{c(){e=y("td"),n=v(s),r=w(),M(e,"class","px-4 py-3 text-gray-700 max-w-xs truncate"),M(e,"title",i=String(t[73][t[80]]??""))},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,r){24&r[0]&&s!==(s=Gu(t[73][t[80]])+"")&&A(n,s),24&r[0]&&i!==(i=String(t[73][t[80]]??""))&&M(e,"title",i)},d(t){t&&m(e)}}}function Eu(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,v;function k(){return t[47](t[73])}let S=t[73].url&&Tu(t),A=nt(Object.entries(t[73])),D=[];for(let e=0;e<A.length;e+=1)D[e]=Ru(uu(t,A,e));return{c(){e=y("tr"),n=y("td"),r=y("div"),i=y("div"),s=y("h4"),s.textContent="Record Details",o=w(),a=y("div"),l=y("button"),l.textContent=" Copy JSON",c=w(),S&&S.c(),u=w(),d=y("div");for(let t=0;t<D.length;t+=1)D[t].c();f=w(),M(s,"class","font-semibold text-gray-800"),M(l,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded"),M(a,"class","flex gap-2"),M(i,"class","flex items-center justify-between mb-3"),M(d,"class","grid grid-cols-2 md:grid-cols-3 gap-3 text-sm"),M(r,"class","bg-white rounded-lg border border-blue-200 p-4"),M(n,"colspan",h=t[35](t[3]).length+1),M(n,"class","px-4 py-4"),M(e,"class","bg-blue-50")},m(t,h){g(t,e,h),p(e,n),p(n,r),p(r,i),p(i,s),p(i,o),p(i,a),p(a,l),p(a,c),S&&S.m(a,null),p(r,u),p(r,d);for(let t=0;t<D.length;t+=1)D[t]&&D[t].m(d,null);p(e,f),x||(v=_(l,"click",C(k)),x=!0)},p(e,r){if((t=e)[73].url?S?S.p(t,r):(S=Tu(t),S.c(),S.m(a,null)):S&&(S.d(1),S=null),16&r[0]){let e;for(A=nt(Object.entries(t[73])),e=0;e<A.length;e+=1){const n=uu(t,A,e);D[e]?D[e].p(n,r):(D[e]=Ru(n),D[e].c(),D[e].m(d,null))}for(;e<D.length;e+=1)D[e].d(1);D.length=A.length}8&r[0]&&h!==(h=t[35](t[3]).length+1)&&M(n,"colspan",h)},d(t){t&&m(e),S&&S.d(),b(D,t),x=!1,v()}}}function Tu(t){let e,n,r,i,s;return{c(){e=y("a"),n=v(" Open URL"),M(e,"href",r=t[73].url),M(e,"target","_blank"),M(e,"rel","noopener"),M(e,"class","px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded")},m(r,o){g(r,e,o),p(e,n),i||(s=_(e,"click",C(t[36])),i=!0)},p(t,n){16&n[0]&&r!==(r=t[73].url)&&M(e,"href",r)},d(t){t&&m(e),i=!1,s()}}}function Ou(t){let e,n=Gu(t[77])+"";return{c(){e=v(n)},m(t,n){g(t,e,n)},p(t,r){16&r[0]&&n!==(n=Gu(t[77])+"")&&A(e,n)},d(t){t&&m(e)}}}function $u(t){let e,n=(t[77]?new Date(t[77]).toLocaleString():"-")+"";return{c(){e=v(n)},m(t,n){g(t,e,n)},p(t,r){16&r[0]&&n!==(n=(t[77]?new Date(t[77]).toLocaleString():"-")+"")&&A(e,n)},d(t){t&&m(e)}}}function Lu(t){let e,n,r=JSON.stringify(t[77],null,2)+"";return{c(){e=y("pre"),n=v(r),M(e,"class","text-xs overflow-auto max-h-24")},m(t,r){g(t,e,r),p(e,n)},p(t,e){16&e[0]&&r!==(r=JSON.stringify(t[77],null,2)+"")&&A(n,r)},d(t){t&&m(e)}}}function Ru(t){let e,n,r,i,s,o,a,l=t[76]+"";function c(t,e){return 16&e[0]&&(o=null),"object"==typeof t[77]&&null!==t[77]?Lu:(null==o&&(o=!!(t[76].includes("date")||t[76].includes("time")||t[76].includes("At")||"timestamp"===t[76])),o?$u:Ou)}let u=c(t,[-1,-1,-1]),d=u(t);return{c(){e=y("div"),n=y("div"),r=v(l),i=w(),s=y("div"),d.c(),a=w(),M(n,"class","text-xs text-gray-500 font-medium"),M(s,"class","text-gray-800 break-all"),M(e,"class","bg-gray-50 rounded p-2")},m(t,o){g(t,e,o),p(e,n),p(n,r),p(e,i),p(e,s),d.m(s,null),p(e,a)},p(t,e){16&e[0]&&l!==(l=t[76]+"")&&A(r,l),u===(u=c(t,e))&&d?d.p(t,e):(d.d(1),d=u(t),d&&(d.c(),d.m(s,null)))},d(t){t&&m(e),d.d()}}}function Bu(t){let e,n,r,i,s,o,a,l,c,u=t[12]===t[75]?"":"",d=nt(t[35](t[3])),h=[];for(let e=0;e<d.length;e+=1)h[e]=Pu(du(t,d,e));function f(){return t[46](t[75])}let x=t[12]===t[75]&&Eu(t);return{c(){e=y("tr"),n=y("td"),r=v(u),i=w();for(let t=0;t<h.length;t+=1)h[t].c();o=w(),x&&x.c(),a=k(),M(n,"class","px-2 py-3 text-center text-gray-400"),M(e,"class",s="hover:bg-gray-50 cursor-pointer "+(t[12]===t[75]?"bg-blue-50":""))},m(t,s){g(t,e,s),p(e,n),p(n,r),p(e,i);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null);g(t,o,s),x&&x.m(t,s),g(t,a,s),l||(c=_(e,"click",f),l=!0)},p(n,i){if(t=n,4096&i[0]&&u!==(u=t[12]===t[75]?"":"")&&A(r,u),24&i[0]|16&i[1]){let n;for(d=nt(t[35](t[3])),n=0;n<d.length;n+=1){const r=du(t,d,n);h[n]?h[n].p(r,i):(h[n]=Pu(r),h[n].c(),h[n].m(e,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}4096&i[0]&&s!==(s="hover:bg-gray-50 cursor-pointer "+(t[12]===t[75]?"bg-blue-50":""))&&M(e,"class",s),t[12]===t[75]?x?x.p(t,i):(x=Eu(t),x.c(),x.m(a.parentNode,a)):x&&(x.d(1),x=null)},d(t){t&&(m(e),m(o),m(a)),b(h,t),x&&x.d(t),l=!1,c()}}}function Iu(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,P,T,O,$,L,R,B,I,j,F,z,N,W,V,H=t[7].page+1+"",q=(t[7].totalPages||1)+"";return{c(){e=y("div"),n=y("div"),i=y("span"),i.textContent="Show",s=w(),o=y("select"),a=y("option"),a.textContent="10",l=y("option"),l.textContent="25",c=y("option"),c.textContent="50",u=y("option"),u.textContent="100",h=w(),f=y("span"),f.textContent="per page",b=w(),x=y("div"),k=y("button"),C=v(" Prev"),T=w(),O=y("span"),$=v("Page "),L=v(H),R=v(" of "),B=v(q),I=w(),j=y("button"),F=v("Next "),a.__value=10,D(a,a.__value),l.__value=25,D(l,l.__value),c.__value=50,D(c,c.__value),u.__value=100,D(u,u.__value),M(o,"class","px-2 py-1 border border-gray-300 rounded"),M(n,"class","flex items-center gap-2 text-sm text-gray-600"),k.disabled=S=!t[7].hasPrev,M(k,"class",P="px-3 py-1 rounded border "+(t[7].hasPrev?"hover:bg-gray-100":"opacity-50 cursor-not-allowed")),M(O,"class","text-sm text-gray-600"),j.disabled=z=!t[7].hasMore,M(j,"class",N="px-3 py-1 rounded border "+(t[7].hasMore?"hover:bg-gray-100":"opacity-50 cursor-not-allowed")),M(x,"class","flex items-center gap-2"),M(e,"class","p-4 border-t border-gray-200 flex items-center justify-between")},m(r,d){g(r,e,d),p(e,n),p(n,i),p(n,s),p(n,o),p(o,a),p(o,l),p(o,c),p(o,u),E(o,t[7].pageSize),p(n,h),p(n,f),p(e,b),p(e,x),p(x,k),p(k,C),p(x,T),p(x,O),p(O,$),p(O,L),p(O,R),p(O,B),p(x,I),p(x,j),p(j,F),W||(V=[_(o,"change",t[48]),_(k,"click",t[49]),_(j,"click",t[50])],W=!0)},p(t,e){128&e[0]&&d!==(d=t[7].pageSize)&&E(o,t[7].pageSize),128&e[0]&&S!==(S=!t[7].hasPrev)&&(k.disabled=S),128&e[0]&&P!==(P="px-3 py-1 rounded border "+(t[7].hasPrev?"hover:bg-gray-100":"opacity-50 cursor-not-allowed"))&&M(k,"class",P),128&e[0]&&H!==(H=t[7].page+1+"")&&A(L,H),128&e[0]&&q!==(q=(t[7].totalPages||1)+"")&&A(B,q),128&e[0]&&z!==(z=!t[7].hasMore)&&(j.disabled=z),128&e[0]&&N!==(N="px-3 py-1 rounded border "+(t[7].hasMore?"hover:bg-gray-100":"opacity-50 cursor-not-allowed"))&&M(j,"class",N)},d(t){t&&m(e),W=!1,r(V)}}}function ju(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,E,T,O=t[70].field+"",$=t[70].coverage+"",L=t[70].populated+"";function R(){return t[51](t[70])}function B(){return t[52](t[70])}return{c(){e=y("div"),n=y("div"),i=v(O),o=w(),a=y("div"),l=y("button"),u=w(),d=y("button"),f=w(),b=y("div"),x=v($),k=v("% ("),C=v(L),S=v(")"),D=w(),M(n,"class","w-28 text-gray-600 truncate font-mono text-xs"),M(n,"title",s=t[70].field),M(l,"class","h-full bg-green-400 hover:bg-green-500 transition-colors"),P(l,"width",t[70].coverage+"%"),M(l,"title",c="Show "+t[70].populated+" records with this field"),M(d,"class","h-full bg-gray-200 hover:bg-gray-300 transition-colors flex-1"),M(d,"title",h="Show "+t[70].empty+" records without this field"),M(a,"class","flex-1 h-5 bg-gray-100 rounded-full overflow-hidden flex cursor-pointer"),M(a,"title","Click to filter"),M(b,"class","w-20 text-right text-gray-500 text-xs"),M(e,"class","flex items-center gap-3 text-sm")},m(t,r){g(t,e,r),p(e,n),p(n,i),p(e,o),p(e,a),p(a,l),p(a,u),p(a,d),p(e,f),p(e,b),p(b,x),p(b,k),p(b,C),p(b,S),p(e,D),E||(T=[_(l,"click",R),_(d,"click",B)],E=!0)},p(e,r){t=e,64&r[0]&&O!==(O=t[70].field+"")&&A(i,O),64&r[0]&&s!==(s=t[70].field)&&M(n,"title",s),64&r[0]&&P(l,"width",t[70].coverage+"%"),64&r[0]&&c!==(c="Show "+t[70].populated+" records with this field")&&M(l,"title",c),64&r[0]&&h!==(h="Show "+t[70].empty+" records without this field")&&M(d,"title",h),64&r[0]&&$!==($=t[70].coverage+"")&&A(x,$),64&r[0]&&L!==(L=t[70].populated+"")&&A(C,L)},d(t){t&&m(e),E=!1,r(T)}}}function Fu(t){let e,n,r,i,s,o,a=t[16].size+"";return{c(){e=y("button"),n=v(" Clear Selected ("),r=v(a),i=v(")"),M(e,"class","px-3 py-1.5 text-sm bg-red-100 text-red-700 hover:bg-red-200 rounded-lg")},m(a,l){g(a,e,l),p(e,n),p(e,r),p(e,i),s||(o=_(e,"click",t[31]),s=!0)},p(t,e){65536&e[0]&&a!==(a=t[16].size+"")&&A(r,a)},d(t){t&&m(e),s=!1,o()}}}function zu(t){let e,n,r;function i(){return t[54](t[67])}return{c(){e=y("button"),e.textContent=" View",M(e,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded")},m(t,s){g(t,e,s),n||(r=_(e,"click",i),n=!0)},p(e,n){t=e},d(t){t&&m(e),n=!1,r()}}}function Nu(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,T,O,$,L,R,B,I,j=Ju(t[67].status)+"",F=t[67].key+"",z=t[67].description+"",N=(t[67].computedAt?ru(t[67].computedAt):"never")+"",W=t[67].timeRemaining?`expires in ${iu(t[67].timeRemaining)}`:"-",V=t[67].status+"";function H(){return t[53](t[67])}let q=t[67].hasData&&zu(t);return{c(){e=y("div"),n=y("input"),i=w(),s=y("span"),o=v(j),a=w(),l=y("div"),c=y("div"),u=v(F),d=w(),h=y("div"),f=v(z),b=w(),x=y("div"),k=y("div"),C=v(N),S=w(),D=y("div"),P=v(W),E=w(),T=y("span"),O=v(V),L=w(),q&&q.c(),R=w(),M(n,"type","checkbox"),n.checked=r=t[16].has(t[67].key),M(n,"class","rounded"),M(s,"class","text-lg"),M(c,"class","font-mono text-gray-800"),M(h,"class","text-xs text-gray-500 truncate"),M(l,"class","flex-1 min-w-0"),M(x,"class","text-xs text-gray-500 text-right"),M(T,"class",$="px-2 py-0.5 text-xs rounded-full "+Xu(t[67].status)),M(e,"class","flex items-center gap-3 p-2 hover:bg-gray-50 rounded text-sm")},m(t,r){g(t,e,r),p(e,n),p(e,i),p(e,s),p(s,o),p(e,a),p(e,l),p(l,c),p(c,u),p(l,d),p(l,h),p(h,f),p(e,b),p(e,x),p(x,k),p(k,C),p(x,S),p(x,D),p(D,P),p(e,E),p(e,T),p(T,O),p(e,L),q&&q.m(e,null),p(e,R),B||(I=_(n,"change",H),B=!0)},p(i,s){t=i,98304&s[0]&&r!==(r=t[16].has(t[67].key))&&(n.checked=r),32768&s[0]&&j!==(j=Ju(t[67].status)+"")&&A(o,j),32768&s[0]&&F!==(F=t[67].key+"")&&A(u,F),32768&s[0]&&z!==(z=t[67].description+"")&&A(f,z),32768&s[0]&&N!==(N=(t[67].computedAt?ru(t[67].computedAt):"never")+"")&&A(C,N),32768&s[0]&&W!==(W=t[67].timeRemaining?`expires in ${iu(t[67].timeRemaining)}`:"-")&&A(P,W),32768&s[0]&&V!==(V=t[67].status+"")&&A(O,V),32768&s[0]&&$!==($="px-2 py-0.5 text-xs rounded-full "+Xu(t[67].status))&&M(T,"class",$),t[67].hasData?q?q.p(t,s):(q=zu(t),q.c(),q.m(e,R)):q&&(q.d(1),q=null)},d(t){t&&m(e),q&&q.d(),B=!1,I()}}}function Wu(e){let n;return{c(){n=y("div"),n.innerHTML='<span class="animate-spin inline-block mr-2"></span> Loading...',M(n,"class","text-center text-gray-500 py-8")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Vu(t){let e,n=nt(t[18].layers),r=[];for(let e=0;e<n.length;e+=1)r[e]=Uu(su(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","bg-gray-50 rounded-lg p-4 space-y-4")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(262144&i[0]){let s;for(n=nt(t[18].layers),s=0;s<n.length;s+=1){const o=su(t,n,s);r[s]?r[s].p(o,i):(r[s]=Uu(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Hu(t){let e,n,r,i,s=t[64].label+"";return{c(){e=y("span"),n=v(s),r=w(),M(e,"class",i="px-3 py-1.5 rounded-lg text-xs font-medium "+Qu(t[64].status))},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,r){262144&r[0]&&s!==(s=t[64].label+"")&&A(n,s),262144&r[0]&&i!==(i="px-3 py-1.5 rounded-lg text-xs font-medium "+Qu(t[64].status))&&M(e,"class",i)},d(t){t&&m(e)}}}function qu(t){let e;return{c(){e=y("div"),e.textContent="",M(e,"class","text-center text-gray-300 text-lg")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Uu(t){let e,n,r,i,s,o,a,l=t[61].title+"",c=nt(t[61].items),u=[];for(let e=0;e<c.length;e+=1)u[e]=Hu(ou(t,c,e));let d=t[61]!==t[18].layers[t[18].layers.length-1]&&qu();return{c(){e=y("div"),n=y("div"),r=v(l),i=w(),s=y("div");for(let t=0;t<u.length;t+=1)u[t].c();o=w(),d&&d.c(),a=k(),M(n,"class","text-xs font-semibold text-gray-500 mb-2"),M(s,"class","flex flex-wrap justify-center gap-2"),M(e,"class","text-center")},m(t,l){g(t,e,l),p(e,n),p(n,r),p(e,i),p(e,s);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(s,null);g(t,o,l),d&&d.m(t,l),g(t,a,l)},p(t,e){if(262144&e[0]&&l!==(l=t[61].title+"")&&A(r,l),262144&e[0]){let n;for(c=nt(t[61].items),n=0;n<c.length;n+=1){const r=ou(t,c,n);u[n]?u[n].p(r,e):(u[n]=Hu(r),u[n].c(),u[n].m(s,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}t[61]!==t[18].layers[t[18].layers.length-1]?d||(d=qu(),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null)},d(t){t&&(m(e),m(o),m(a)),b(u,t),d&&d.d(t)}}}function Ku(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,T=t[17].key+"",O=JSON.stringify(t[17].data,null,2)+"";return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("h3"),o=v("Cached Data: "),a=y("span"),l=v(T),c=w(),u=y("button"),u.textContent="",d=w(),h=y("div"),f=y("pre"),b=v(O),x=w(),k=y("div"),C=y("button"),C.textContent=" Copy JSON",S=w(),D=y("button"),D.textContent="Close",M(a,"class","font-mono text-blue-600"),M(s,"class","font-semibold text-gray-800"),M(u,"class","text-gray-400 hover:text-gray-600 text-xl"),M(i,"class","p-4 border-b border-gray-200 flex items-center justify-between"),M(f,"class","text-xs bg-gray-50 p-4 rounded-lg overflow-auto"),M(h,"class","p-4 overflow-auto max-h-[60vh]"),M(C,"class","px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg"),M(D,"class","px-4 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded-lg"),M(k,"class","p-4 border-t border-gray-200 flex justify-end gap-2"),M(n,"class","bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden"),M(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4")},m(r,m){g(r,e,m),p(e,n),p(n,i),p(i,s),p(s,o),p(s,a),p(a,l),p(i,c),p(i,u),p(n,d),p(n,h),p(h,f),p(f,b),p(n,x),p(n,k),p(k,C),p(k,S),p(k,D),P||(E=[_(u,"click",t[33]),_(C,"click",t[55]),_(D,"click",t[33])],P=!0)},p(t,e){131072&e[0]&&T!==(T=t[17].key+"")&&A(l,T),131072&e[0]&&O!==(O=JSON.stringify(t[17].data,null,2)+"")&&A(b,O)},d(t){t&&m(e),P=!1,r(E)}}}function Yu(e){let n,i,s,o,a,l,c,u,d,h,f,x,k,C,S,P,T,O,$,L,R,B,I,j,F,z,N,W,V,H,U,K,Y,Q,G,X,J,Z,tt,et,rt,it,st,ot,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,bt,yt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Pt,Et,Tt,Ot,$t,Lt,Rt,Bt,It=(e[2]?.tables.find(e[38])?.icon||"")+"",jt=e[7].totalCount.toLocaleString()+"",Ft=e[15].filter(Zu).length+"",zt=e[15].length+"";function Nt(t,e){return t[0]?mu:gu}let Wt=Nt(e),Vt=Wt(e),Ht=e[1]&&bu(e),qt=e[2]&&yu(e),Ut=nt(e[5]),Kt=[];for(let t=0;t<Ut.length;t+=1)Kt[t]=vu(fu(e,Ut,t));let Yt=(e[8]||e[14])&&wu(e),Qt=e[14]&&ku(e);function Gt(t,e){return t[13]?Mu:0===t[4].length?Cu:_u}let Xt=Gt(e),Jt=Xt(e),Zt=e[4].length>0&&Iu(e),te=nt(e[6].slice(0,12)),ee=[];for(let t=0;t<te.length;t+=1)ee[t]=ju(lu(e,te,t));let ne=e[16].size>0&&Fu(e),re=nt(e[15]),ie=[];for(let t=0;t<re.length;t+=1)ie[t]=Nu(au(e,re,t));function se(t,e){return t[18]?Vu:Wu}let oe=se(e),ae=oe(e),le=e[17]&&Ku(e);return{c(){n=y("div"),i=y("div"),s=y("h2"),s.textContent=" Data Explorer",o=w(),a=y("button"),Vt.c(),l=v("\n      Refresh"),c=w(),Ht&&Ht.c(),u=w(),qt&&qt.c(),d=w(),h=y("div"),f=y("div"),x=y("div"),k=y("h3"),C=v(It),S=w(),P=v(e[3]),T=w(),O=y("span"),$=v("("),L=v(jt),R=v(" records)"),B=w(),I=y("div"),j=y("button"),j.textContent=" Export Filtered",F=w(),z=y("button"),z.textContent=" Export All",N=w(),W=y("div"),V=y("div"),H=y("input"),U=w(),K=y("span"),K.textContent="",Y=w(),Q=y("select"),G=y("option"),G.textContent="All Fields";for(let t=0;t<Kt.length;t+=1)Kt[t].c();X=w(),J=y("button"),J.textContent="Search",Z=w(),Yt&&Yt.c(),tt=w(),Qt&&Qt.c(),et=w(),rt=y("div"),Jt.c(),it=w(),Zt&&Zt.c(),st=w(),ot=y("div"),at=y("h3"),at.innerHTML=' Field Coverage\n      <span class="text-sm font-normal text-gray-500">Click bars to filter</span>',lt=w(),ct=y("div");for(let t=0;t<ee.length;t+=1)ee[t].c();ut=w(),dt=y("div"),ht=y("div"),ft=y("h3"),pt=v(" Cached Metrics\n        "),gt=y("span"),mt=v(Ft),bt=v(" valid / "),yt=v(zt),xt=v(" total"),vt=w(),ne&&ne.c(),wt=w(),kt=y("div"),_t=y("label"),Ct=y("input"),St=v("\n        Select All"),At=w();for(let t=0;t<ie.length;t+=1)ie[t].c();Dt=w(),Pt=y("div"),Et=y("h3"),Et.innerHTML=' Metrics Dependency Flow\n      <span class="text-sm font-normal text-gray-500">Colors indicate cache status</span>',Tt=w(),Ot=y("div"),Ot.innerHTML="<span> Valid</span> <span> Expiring Soon</span> <span> Stale/Expired</span> <span> Never Computed</span>",$t=w(),ae.c(),Lt=w(),le&&le.c(),M(s,"class","text-xl font-bold text-gray-800 flex items-center gap-2"),M(a,"class","px-3 py-1.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2 text-sm"),a.disabled=e[0],M(i,"class","flex items-center justify-between"),M(O,"class","text-sm font-normal text-gray-500"),M(k,"class","font-semibold text-gray-800 flex items-center gap-2"),M(j,"class","px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg"),M(j,"title","Export visible/filtered records"),M(z,"class","px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg"),M(z,"title","Export all records"),M(I,"class","flex gap-2"),M(x,"class","flex items-center justify-between mb-3"),M(H,"type","text"),M(H,"placeholder","Search records..."),M(H,"class","w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),M(K,"class","absolute left-2.5 top-2.5 text-gray-400"),M(V,"class","flex-1 relative"),G.__value="all",D(G,G.__value),M(Q,"class","px-3 py-2 border border-gray-300 rounded-lg bg-white"),void 0===e[9]&&q(()=>e[43].call(Q)),M(J,"class","px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"),M(W,"class","flex gap-2"),M(f,"class","p-4 border-b border-gray-200"),M(rt,"class","overflow-x-auto"),M(h,"class","bg-white rounded-lg shadow-sm border border-gray-200"),M(at,"class","font-semibold text-gray-800 mb-3 flex items-center gap-2"),M(ct,"class","space-y-2"),M(ot,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),M(gt,"class","text-sm font-normal text-gray-500"),M(ft,"class","font-semibold text-gray-800 flex items-center gap-2"),M(ht,"class","flex items-center justify-between mb-3"),M(Ct,"type","checkbox"),Ct.checked=Mt=e[16].size===e[15].length&&e[15].length>0,M(Ct,"class","rounded"),M(_t,"class","flex items-center gap-2 p-2 text-sm text-gray-500 hover:bg-gray-50 rounded cursor-pointer"),M(kt,"class","space-y-1"),M(dt,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),M(Et,"class","font-semibold text-gray-800 mb-3 flex items-center gap-2"),M(Ot,"class","flex gap-4 text-xs text-gray-600 mb-4"),M(Pt,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),M(n,"class","data-explorer p-4 space-y-4")},m(t,r){g(t,n,r),p(n,i),p(i,s),p(i,o),p(i,a),Vt.m(a,null),p(a,l),p(n,c),Ht&&Ht.m(n,null),p(n,u),qt&&qt.m(n,null),p(n,d),p(n,h),p(h,f),p(f,x),p(x,k),p(k,C),p(k,S),p(k,P),p(k,T),p(k,O),p(O,$),p(O,L),p(O,R),p(x,B),p(x,I),p(I,j),p(I,F),p(I,z),p(f,N),p(f,W),p(W,V),p(V,H),D(H,e[8]),p(V,U),p(V,K),p(W,Y),p(W,Q),p(Q,G);for(let t=0;t<Kt.length;t+=1)Kt[t]&&Kt[t].m(Q,null);E(Q,e[9],!0),p(W,X),p(W,J),p(W,Z),Yt&&Yt.m(W,null),p(f,tt),Qt&&Qt.m(f,null),p(h,et),p(h,rt),Jt.m(rt,null),p(h,it),Zt&&Zt.m(h,null),p(n,st),p(n,ot),p(ot,at),p(ot,lt),p(ot,ct);for(let t=0;t<ee.length;t+=1)ee[t]&&ee[t].m(ct,null);p(n,ut),p(n,dt),p(dt,ht),p(ht,ft),p(ft,pt),p(ft,gt),p(gt,mt),p(gt,bt),p(gt,yt),p(gt,xt),p(ht,vt),ne&&ne.m(ht,null),p(dt,wt),p(dt,kt),p(kt,_t),p(_t,Ct),p(_t,St),p(kt,At);for(let t=0;t<ie.length;t+=1)ie[t]&&ie[t].m(kt,null);p(n,Dt),p(n,Pt),p(Pt,Et),p(Pt,Tt),p(Pt,Ot),p(Pt,$t),ae.m(Pt,null),p(n,Lt),le&&le.m(n,null),Rt||(Bt=[_(a,"click",e[34]),_(j,"click",e[39]),_(z,"click",e[40]),_(H,"input",e[41]),_(H,"keydown",e[42]),_(Q,"change",e[43]),_(J,"click",e[23]),_(Ct,"change",e[30])],Rt=!0)},p(t,e){if(Wt!==(Wt=Nt(t))&&(Vt.d(1),Vt=Wt(t),Vt&&(Vt.c(),Vt.m(a,l))),1&e[0]&&(a.disabled=t[0]),t[1]?Ht?Ht.p(t,e):(Ht=bu(t),Ht.c(),Ht.m(n,u)):Ht&&(Ht.d(1),Ht=null),t[2]?qt?qt.p(t,e):(qt=yu(t),qt.c(),qt.m(n,d)):qt&&(qt.d(1),qt=null),12&e[0]&&It!==(It=(t[2]?.tables.find(t[38])?.icon||"")+"")&&A(C,It),8&e[0]&&A(P,t[3]),128&e[0]&&jt!==(jt=t[7].totalCount.toLocaleString()+"")&&A(L,jt),256&e[0]&&H.value!==t[8]&&D(H,t[8]),32&e[0]){let n;for(Ut=nt(t[5]),n=0;n<Ut.length;n+=1){const r=fu(t,Ut,n);Kt[n]?Kt[n].p(r,e):(Kt[n]=vu(r),Kt[n].c(),Kt[n].m(Q,null))}for(;n<Kt.length;n+=1)Kt[n].d(1);Kt.length=Ut.length}if(544&e[0]&&E(Q,t[9]),t[8]||t[14]?Yt?Yt.p(t,e):(Yt=wu(t),Yt.c(),Yt.m(W,null)):Yt&&(Yt.d(1),Yt=null),t[14]?Qt?Qt.p(t,e):(Qt=ku(t),Qt.c(),Qt.m(f,null)):Qt&&(Qt.d(1),Qt=null),Xt===(Xt=Gt(t))&&Jt?Jt.p(t,e):(Jt.d(1),Jt=Xt(t),Jt&&(Jt.c(),Jt.m(rt,null))),t[4].length>0?Zt?Zt.p(t,e):(Zt=Iu(t),Zt.c(),Zt.m(h,null)):Zt&&(Zt.d(1),Zt=null),33554496&e[0]){let n;for(te=nt(t[6].slice(0,12)),n=0;n<te.length;n+=1){const r=lu(t,te,n);ee[n]?ee[n].p(r,e):(ee[n]=ju(r),ee[n].c(),ee[n].m(ct,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=te.length}if(32768&e[0]&&Ft!==(Ft=t[15].filter(Zu).length+"")&&A(mt,Ft),32768&e[0]&&zt!==(zt=t[15].length+"")&&A(yt,zt),t[16].size>0?ne?ne.p(t,e):(ne=Fu(t),ne.c(),ne.m(ht,null)):ne&&(ne.d(1),ne=null),98304&e[0]&&Mt!==(Mt=t[16].size===t[15].length&&t[15].length>0)&&(Ct.checked=Mt),536969216&e[0]|2&e[1]){let n;for(re=nt(t[15]),n=0;n<re.length;n+=1){const r=au(t,re,n);ie[n]?ie[n].p(r,e):(ie[n]=Nu(r),ie[n].c(),ie[n].m(kt,null))}for(;n<ie.length;n+=1)ie[n].d(1);ie.length=re.length}oe===(oe=se(t))&&ae?ae.p(t,e):(ae.d(1),ae=oe(t),ae&&(ae.c(),ae.m(Pt,null))),t[17]?le?le.p(t,e):(le=Ku(t),le.c(),le.m(n,null)):le&&(le.d(1),le=null)},i:t,o:t,d(t){t&&m(n),Vt.d(),Ht&&Ht.d(),qt&&qt.d(),b(Kt,t),Yt&&Yt.d(),Qt&&Qt.d(),Jt.d(),Zt&&Zt.d(),b(ee,t),ne&&ne.d(),b(ie,t),ae.d(),le&&le.d(),Rt=!1,r(Bt)}}}function Qu(t){switch(t){case"valid":return"bg-green-500 text-white";case"expiring":return"bg-yellow-500 text-white";case"stale":return"bg-red-500 text-white";case"source":return"bg-blue-500 text-white";case"storage":return"bg-purple-500 text-white";default:return"bg-gray-400 text-white"}}function Gu(t){return null==t?"<null>":"boolean"==typeof t?t?" true":" false":"number"==typeof t?t.toLocaleString():Array.isArray(t)?0===t.length?"[]":`[${t.length} items]`:"object"==typeof t?"{...}":"string"==typeof t&&t.length>60?t.substring(0,60)+"...":String(t)}function Xu(t){switch(t){case"valid":return"bg-green-100 text-green-800";case"expiring":return"bg-yellow-100 text-yellow-800";case"stale":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-600"}}function Ju(t){switch(t){case"valid":return"";case"expiring":return"";case"stale":return"";default:return""}}const Zu=t=>"valid"===t.status;function td(t,e,n){let r=!0,i=null,s=null,o="bookmarks",a=[],l=[],c=[],u={page:0,pageSize:25,totalCount:0,totalPages:0},d="",h="all",f=null,p="desc",g=null,m=!1,b=null,y=[],x=new Set,v=null,w=null;async function k(){n(2,s=await tu())}async function _(){n(18,w=await async function(){const t=await nu(),e=Object.fromEntries(t.map(t=>[t.key,t.status]));return{layers:[{title:" Data Sources",items:[{id:"chromeApi",label:"Chrome Bookmarks API",status:"source"},{id:"activity",label:"User Activity",status:"source"}]},{title:" Storage",items:[{id:"bookmarks",label:"Bookmarks Table",status:"storage"},{id:"events",label:"Events Table",status:"storage"}]},{title:" Computed Metrics",items:[{id:"domainStats",label:"Domain Stats",status:e.domainStats||"none"},{id:"activityTimeline",label:"Activity Timeline",status:e.activityTimeline||"none"},{id:"quickStats",label:"Quick Stats",status:e.quickStats||"none"},{id:"similarities",label:"Similarities",status:e.similarities||"none"},{id:"wordFrequency",label:"Word Frequency",status:e.wordFrequency||"none"}]},{title:" Insights",items:[{id:"insightsSummary",label:"Summary",status:e.insightsSummary||"none"},{id:"expertiseAreas",label:"Expertise",status:e.expertiseAreas||"none"}]}]}}())}async function C(){n(13,m=!0);try{const t={page:u.page,pageSize:u.pageSize,sortBy:f,sortOrder:p,searchQuery:d,searchField:h,fieldFilter:b},e=await eu(o,t);n(4,a=e.records),n(7,u={page:e.page,pageSize:e.pageSize,totalCount:e.totalCount,totalPages:e.totalPages,hasMore:e.hasMore,hasPrev:e.hasPrev}),n(5,l=await async function(t){const e=await Bl[t].limit(100).toArray(),n=new Set;return e.forEach(t=>{Object.keys(t).forEach(t=>n.add(t))}),[...n].sort()}(o)),n(6,c=await async function(t){const e=await Bl[t].toArray(),n={};e.forEach(t=>{Object.keys(t).forEach(e=>{n[e]||(n[e]={field:e,populated:0,empty:0,samples:[],types:new Set});const r=t[e];if(null==r||""===r||Array.isArray(r)&&0===r.length)n[e].empty++;else if(n[e].populated++,n[e].types.add(Array.isArray(r)?"array":typeof r),n[e].samples.length<3){let t=r;"string"==typeof r&&r.length>50?t=r.substring(0,50)+"...":Array.isArray(r)?t=r.slice(0,3):"object"==typeof r&&(t="{...}"),n[e].samples.push(t)}})});const r=e.length;return Object.values(n).map(t=>({...t,types:[...t.types],total:r,coverage:r>0?parseFloat((t.populated/r*100).toFixed(1)):0})).sort((t,e)=>e.coverage-t.coverage)}(o))}catch(t){console.error("Error loading table data:",t)}finally{n(13,m=!1)}}async function M(){try{n(15,y=await nu())}catch(t){console.error("Error loading cached metrics:",t)}}async function S(t){n(3,o=t),n(7,u.page=0,u),n(8,d=""),n(10,f=null),n(12,g=null),n(14,b=null),await C()}async function A(t){n(7,u.page=t,u),n(12,g=null),await C()}async function D(t){n(7,u.pageSize=t,u),n(7,u.page=0,u),await C()}async function P(t){f===t?n(11,p="asc"===p?"desc":"asc"):(n(10,f=t),n(11,p="desc")),n(7,u.page=0,u),await C()}async function E(){n(7,u.page=0,u),await C()}function O(){n(8,d=""),n(9,h="all"),E()}async function $(t,e){n(14,b=b?.field===t&&b?.hasValue===e?null:{field:t,hasValue:e}),n(7,u.page=0,u),await C()}function L(){n(14,b=null),C()}function R(t){n(12,g=g===t?null:t)}async function I(t=!1){const e=t?{}:{searchQuery:d,searchField:h,fieldFilter:b},n=await async function(t,e={}){const{records:n}=await eu(t,{...e,pageSize:999999});return JSON.stringify(n,null,2)}(o,e);!function(t,e){const n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}(n,`${o}_${(new Date).toISOString().split("T")[0]}.json`)}function F(t){x.has(t)?x.delete(t):x.add(t),n(16,x)}async function z(t){const e=await async function(t){try{const e=await Bl.computedMetrics.get(t);return e?.data||null}catch(e){return console.error(`Error getting cached metric ${t}:`,e),null}}(t);n(17,v={key:t,data:e})}B(async()=>{try{await k(),await C(),await M(),await _()}catch(t){n(1,i=t.message)}finally{n(0,r=!1)}});return[r,i,s,o,a,l,c,u,d,h,f,p,g,m,b,y,x,v,w,S,A,D,P,E,O,$,L,R,I,F,function(){x.size===y.length?x.clear():y.forEach(t=>x.add(t.key)),n(16,x)},async function(){const t=[...x];await async function(t){try{return await Bl.computedMetrics.bulkDelete(t),!0}catch(t){return console.error("Error invalidating metrics:",t),!1}}(t),x.clear(),await M(),await _()},z,function(){n(17,v=null)},async function(){n(0,r=!0);try{await k(),await C(),await M(),await _()}finally{n(0,r=!1)}},function(t){return{bookmarks:["id","title","domain","category","isAlive"],events:["eventId","bookmarkId","type","timestamp"],cache:["key","timestamp","ttl"],settings:["key"],similarities:["id","bookmark1Id","bookmark2Id","score"],computedMetrics:["key","computedAt","validUntil"],enrichmentQueue:["queueId","bookmarkId","addedAt","priority"]}[t]||l.slice(0,5)},function(e){j.call(this,t,e)},t=>S(t.name),t=>t.name===o,()=>I(!1),()=>I(!0),function(){d=this.value,n(8,d)},t=>"Enter"===t.key&&E(),function(){h=T(this),n(9,h),n(5,l)},()=>{O(),L()},t=>P(t),t=>R(t),t=>function(t){navigator.clipboard.writeText(JSON.stringify(t,null,2))}(t),t=>D(parseInt(t.target.value)),()=>A(u.page-1),()=>A(u.page+1),t=>$(t.field,!0),t=>$(t.field,!1),t=>F(t.key),t=>z(t.key),()=>{navigator.clipboard.writeText(JSON.stringify(v.data,null,2))}]}class ed extends ut{constructor(t){super(),ct(this,t,td,Yu,s,{},null,[-1,-1,-1])}}const nd=t=>({}),rd=t=>({});function id(t){let e,n;return{c(){e=y("p"),n=v(t[2]),M(e,"class","text-xs text-gray-500")},m(t,r){g(t,e,r),p(e,n)},p(t,e){4&e&&A(n,t[2])},d(t){t&&m(e)}}}function sd(t){let e,n,r;return{c(){e=y("span"),n=v(""),M(e,"class",r="text-gray-400 transform transition-transform "+(t[0]?"":"rotate-180"))},m(t,r){g(t,e,r),p(e,n)},p(t,n){1&n&&r!==(r="text-gray-400 transform transition-transform "+(t[0]?"":"rotate-180"))&&M(e,"class",r)},d(t){t&&m(e)}}}function od(t){let e,n,r,i;const s=[ld,ad],o=[];function a(t,e){return t[4]?0:1}return n=a(t),r=o[n]=s[n](t),{c(){e=y("div"),r.c(),M(e,"class","p-4")},m(t,r){g(t,e,r),o[n].m(e,null),i=!0},p(t,i){let l=n;n=a(t),n===l?o[n].p(t,i):(J(),et(o[l],1,1,()=>{o[l]=null}),Z(),r=o[n],r?r.p(t,i):(r=o[n]=s[n](t),r.c()),tt(r,1),r.m(e,null))},i(t){i||(tt(r),i=!0)},o(t){et(r),i=!1},d(t){t&&m(e),o[n].d()}}}function ad(t){let e;const n=t[11].default,r=l(n,t,t[10],null);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||1024&i)&&d(r,n,t,t[10],e?u(n,t[10],i,null):h(t[10]),null)},i(t){e||(tt(r,t),e=!0)},o(t){et(r,t),e=!1},d(t){r&&r.d(t)}}}function ld(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div> <span class="ml-2 text-sm text-gray-500">Loading...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function cd(t){let e,n,i,s,o,a,c,f,b,x,k,C,S,D,P,E,T,O,$,L,R,B,I=t[2]&&id(t);const j=t[11]["header-actions"],F=l(j,t,t[10],rd);let z=t[5]&&sd(t),N=!t[0]&&od(t);return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("span"),o=v(t[3]),a=w(),c=y("div"),f=y("h3"),b=v(t[1]),k=w(),I&&I.c(),C=w(),S=y("div"),F&&F.c(),D=w(),z&&z.c(),O=w(),N&&N.c(),M(s,"class","text-lg"),M(f,"class",x="text-sm font-semibold "+(t[9][t[6]]||t[9].default)),M(i,"class","flex items-center gap-2"),M(S,"class","flex items-center gap-2"),M(n,"class",P="px-4 py-3 border-b border-gray-100 flex items-center justify-between "+(t[5]?"cursor-pointer hover:bg-gray-50":"")),M(n,"role",E=t[5]?"button":"heading"),M(n,"tabindex",T=t[5]?0:-1),M(e,"class",$="rounded-lg border shadow-sm "+(t[8][t[6]]||t[8].default))},m(r,l){g(r,e,l),p(e,n),p(n,i),p(i,s),p(s,o),p(i,a),p(i,c),p(c,f),p(f,b),p(c,k),I&&I.m(c,null),p(n,C),p(n,S),F&&F.m(S,null),p(S,D),z&&z.m(S,null),p(e,O),N&&N.m(e,null),L=!0,R||(B=[_(n,"click",t[7]),_(n,"keypress",t[12])],R=!0)},p(t,[r]){(!L||8&r)&&A(o,t[3]),(!L||2&r)&&A(b,t[1]),(!L||64&r&&x!==(x="text-sm font-semibold "+(t[9][t[6]]||t[9].default)))&&M(f,"class",x),t[2]?I?I.p(t,r):(I=id(t),I.c(),I.m(c,null)):I&&(I.d(1),I=null),F&&F.p&&(!L||1024&r)&&d(F,j,t,t[10],L?u(j,t[10],r,nd):h(t[10]),rd),t[5]?z?z.p(t,r):(z=sd(t),z.c(),z.m(S,null)):z&&(z.d(1),z=null),(!L||32&r&&P!==(P="px-4 py-3 border-b border-gray-100 flex items-center justify-between "+(t[5]?"cursor-pointer hover:bg-gray-50":"")))&&M(n,"class",P),(!L||32&r&&E!==(E=t[5]?"button":"heading"))&&M(n,"role",E),(!L||32&r&&T!==(T=t[5]?0:-1))&&M(n,"tabindex",T),t[0]?N&&(J(),et(N,1,1,()=>{N=null}),Z()):N?(N.p(t,r),1&r&&tt(N,1)):(N=od(t),N.c(),tt(N,1),N.m(e,null)),(!L||64&r&&$!==($="rounded-lg border shadow-sm "+(t[8][t[6]]||t[8].default)))&&M(e,"class",$)},i(t){L||(tt(F,t),tt(N),L=!0)},o(t){et(F,t),et(N),L=!1},d(t){t&&m(e),I&&I.d(),F&&F.d(t),z&&z.d(),N&&N.d(),R=!1,r(B)}}}function ud(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:s=""}=e,{subtitle:o=""}=e,{icon:a=""}=e,{loading:l=!1}=e,{collapsible:c=!1}=e,{collapsed:u=!1}=e,{variant:d="default"}=e;function h(){c&&n(0,u=!u)}I();return t.$$set=t=>{"title"in t&&n(1,s=t.title),"subtitle"in t&&n(2,o=t.subtitle),"icon"in t&&n(3,a=t.icon),"loading"in t&&n(4,l=t.loading),"collapsible"in t&&n(5,c=t.collapsible),"collapsed"in t&&n(0,u=t.collapsed),"variant"in t&&n(6,d=t.variant),"$$scope"in t&&n(10,i=t.$$scope)},[u,s,o,a,l,c,d,h,{default:"bg-white border-gray-200",success:"bg-green-50 border-green-200",warning:"bg-yellow-50 border-yellow-200",danger:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200"},{default:"text-gray-900",success:"text-green-800",warning:"text-yellow-800",danger:"text-red-800",info:"text-blue-800"},i,r,t=>"Enter"===t.key&&h()]}class dd extends ut{constructor(t){super(),ct(this,t,ud,cd,s,{title:1,subtitle:2,icon:3,loading:4,collapsible:5,collapsed:0,variant:6})}}async function hd(){try{const t=await Bl.bookmarks.toArray(),e={};t.forEach(t=>{if(t.url)try{const n=new URL(t.url),r=n.hostname,i=n.pathname,s=r.split(".").reverse(),o=s[0],a=s[1]||"",l=s.length>2?s.slice(2).reverse().join("."):"www",c=`${a}.${o}`;e[c]||(e[c]={name:c,count:0,subdomains:{}}),e[c].count++,e[c].subdomains[l]||(e[c].subdomains[l]={name:l,count:0,paths:{}}),e[c].subdomains[l].count++;const u=i.split("/").filter(t=>t)[0]||"/";e[c].subdomains[l].paths[u]||(e[c].subdomains[l].paths[u]=0),e[c].subdomains[l].paths[u]++}catch(t){}});return Object.values(e).map(t=>({...t,subdomains:Object.values(t.subdomains).map(t=>({...t,paths:Object.entries(t.paths).map(([t,e])=>({name:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10)})).sort((t,e)=>e.count-t.count)})).sort((t,e)=>e.count-t.count)}catch(t){return console.error("Error building domain hierarchy:",t),[]}}async function fd(){try{const t=await Bl.bookmarks.toArray(),e=Date.now(),n={"Last 7 days":0,"Last 30 days":0,"Last 90 days":0,"Last year":0,Older:0},r={"Last 7 days":6048e5,"Last 30 days":2592e6,"Last 90 days":7776e6,"Last year":31536e6};return t.forEach(t=>{const i=e-t.dateAdded;i<=r["Last 7 days"]?n["Last 7 days"]++:i<=r["Last 30 days"]?n["Last 30 days"]++:i<=r["Last 90 days"]?n["Last 90 days"]++:i<=r["Last year"]?n["Last year"]++:n.Older++}),Object.entries(n).map(([t,e])=>({period:t,count:e}))}catch(t){return console.error("Error analyzing content freshness:",t),[]}}async function pd(){try{const t=await Bl.bookmarks.toArray(),e=await Bl.events.toArray(),n=Date.now(),r=n-6048e5,i=n-2592e6,s=t.length,o=t.filter(t=>t.category).length,a=t.filter(t=>t.description||t.keywords?.length>0).length,l=t.filter(t=>null!==t.isAlive).length,c=t.filter(t=>!1===t.isAlive).length,u=t.filter(t=>!(t.lastAccessed||t.accessCount&&0!==t.accessCount)).length,d=t.filter(t=>t.dateAdded>r).length,h=t.filter(t=>t.dateAdded>i).length,f=e.filter(t=>t.timestamp>r),p=f.filter(t=>"access"===t.type).length,g=f.filter(t=>"create"===t.type).length,m={};t.forEach(t=>{t.category&&(m[t.category]=(m[t.category]||0)+1)});const b=Object.entries(m).sort(([,t],[,e])=>e-t).slice(0,5),y=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{totalBookmarks:s,categorized:o,categorizedPercentage:s>0?(o/s*100).toFixed(1):0,enriched:a,enrichedPercentage:s>0?(a/s*100).toFixed(1):0,aliveChecked:l,deadLinks:c,neverAccessed:u,neverAccessedPercentage:s>0?(u/s*100).toFixed(1):0,addedThisWeek:d,addedThisMonth:h,accessEventsThisWeek:p,createEventsThisWeek:g,topCategories:b,uniqueDomains:y}}catch(t){return console.error("Error getting insights summary:",t),{}}}async function gd(){try{const t=await Bl.events.toArray(),e=Date.now(),n={},r={};t.forEach(t=>{n[t.type]=(n[t.type]||0)+1;const e=new Date(t.timestamp).toISOString().split("T")[0];r[e]||(r[e]={total:0,byType:{}}),r[e].total++,r[e].byType[t.type]=(r[e].byType[t.type]||0)+1});const i=[];for(let t=29;t>=0;t--){const n=new Date(e-24*t*60*60*1e3).toISOString().split("T")[0];i.push({date:n,total:r[n]?.total||0,...r[n]?.byType||{}})}return{summary:n,timeline:i,totalEvents:t.length}}catch(t){return console.error("Error getting event statistics:",t),{summary:{},timeline:[],totalEvents:0}}}async function md(){try{const t=await Bl.bookmarks.toArray(),e=t.filter(t=>!1===t.isAlive),n=Date.now();if(0===e.length)return{total:0,byDomain:[],byAge:{recent:0,moderate:0,old:0,ancient:0},byCategory:[],oldestDeadLinks:[],recentlyDied:[],deadLinkRate:0,checkedCount:0};const r={};e.forEach(t=>{const e=t.domain||"Unknown";r[e]=(r[e]||0)+1});const i=Object.entries(r).map(([t,e])=>({domain:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10),s=n-6048e5,o=n-2592e6,a=n-31536e6,l={recent:e.filter(t=>t.dateAdded>s).length,moderate:e.filter(t=>t.dateAdded<=s&&t.dateAdded>o).length,old:e.filter(t=>t.dateAdded<=o&&t.dateAdded>a).length,ancient:e.filter(t=>t.dateAdded<=a).length},c={};e.forEach(t=>{const e=t.category||"Uncategorized";c[e]=(c[e]||0)+1});const u=Object.entries(c).map(([t,e])=>({category:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10),d=[...e].sort((t,e)=>t.dateAdded-e.dateAdded).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,lastChecked:t.lastChecked})),h=[...e].filter(t=>t.lastChecked).sort((t,e)=>e.lastChecked-t.lastChecked).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,lastChecked:t.lastChecked})),f=t.filter(t=>null!==t.isAlive&&void 0!==t.isAlive).length,p=f>0?(e.length/f*100).toFixed(1):0;return{total:e.length,byDomain:i,byAge:l,byCategory:u,oldestDeadLinks:d,recentlyDied:h,deadLinkRate:parseFloat(p),checkedCount:f}}catch(t){return console.error("Error getting dead link insights:",t),{total:0,byDomain:[],byAge:{recent:0,moderate:0,old:0,ancient:0},byCategory:[],oldestDeadLinks:[],recentlyDied:[],deadLinkRate:0,checkedCount:0}}}async function bd(){try{const t=await Bl.bookmarks.toArray(),e=t.length;if(0===e)return{total:0,roi:0,decayRate:0,deadLinkRatio:0,enrichmentCoverage:0,categorizationCoverage:0,duplicateScore:0,healthScore:0,metrics:{}};const n=Date.now()-7776e6,r=t.filter(t=>t.accessCount&&t.accessCount>0),i=r.length/e*100,s=t.filter(t=>t.dateAdded<n),o=s.filter(t=>!t.accessCount||0===t.accessCount),a=s.length>0?o.length/s.length*100:0,l=t.filter(t=>null!==t.isAlive&&void 0!==t.isAlive),c=t.filter(t=>!1===t.isAlive),u=l.length>0?c.length/l.length*100:0,d=t.filter(t=>t.description||t.keywords&&t.keywords.length>0||t.contentSnippet),h=d.length/e*100,f=t.filter(t=>t.category),p=f.length/e*100,g={};t.forEach(t=>{if(t.url){const e=t.url.replace(/\/$/,"").toLowerCase();g[e]=(g[e]||0)+1}});const m=Object.values(g).filter(t=>t>1).reduce((t,e)=>t+(e-1),0),b=m/e*100,y=Math.round(.25*i+.2*(100-a)+.2*(100-u)+.15*h+.1*p+.1*(100-b));return{total:e,roi:Math.round(10*i)/10,decayRate:Math.round(10*a)/10,deadLinkRatio:Math.round(10*u)/10,enrichmentCoverage:Math.round(10*h)/10,categorizationCoverage:Math.round(10*p)/10,duplicateScore:Math.round(10*b)/10,healthScore:Math.min(100,Math.max(0,y)),metrics:{accessed:r.length,neverAccessed:e-r.length,old:s.length,decayed:o.length,checked:l.length,dead:c.length,enriched:d.length,categorized:f.length,duplicates:m}}}catch(t){return console.error("Error getting collection health metrics:",t),{total:0,roi:0,decayRate:0,deadLinkRatio:0,enrichmentCoverage:0,categorizationCoverage:0,duplicateScore:0,healthScore:0,metrics:{}}}}async function yd(){try{const t=await Bl.bookmarks.toArray(),e={};t.forEach(t=>{const n=t.category||"uncategorized";e[n]=(e[n]||0)+1});const n=Object.entries(e).map(([e,n])=>({category:e,count:n,percentage:Math.round(n/t.length*1e3)/10})).sort((t,e)=>e.count-t.count),r={};t.forEach(t=>{t.keywords&&Array.isArray(t.keywords)&&t.keywords.forEach(t=>{const e=t.toLowerCase().trim();e.length>2&&(r[e]=(r[e]||0)+1)})});const i=Object.entries(r).map(([t,e])=>({keyword:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,30),s={articles:0,videos:0,documentation:0,tools:0,social:0,code:0,shopping:0,other:0};t.forEach(t=>{const e=(t.url||"").toLowerCase(),n=t.category||"";"video"===n||e.includes("youtube")||e.includes("vimeo")||e.includes("video")?s.videos++:"documentation"===n||e.includes("/docs")||e.includes("/api")||e.includes("/reference")?s.documentation++:"code"===n||e.includes("github")||e.includes("gitlab")||e.includes("stackoverflow")?s.code++:"tool"===n||e.includes("app.")||e.includes("/app")?s.tools++:"social"===n||e.includes("twitter")||e.includes("linkedin")||e.includes("reddit")?s.social++:"shopping"===n||e.includes("amazon")||e.includes("ebay")||e.includes("shop")?s.shopping++:"blog"===n||e.includes("blog")||e.includes("article")||e.includes("medium")?s.articles++:s.other++});const o=Object.entries(s).map(([e,n])=>({type:e,count:n,percentage:Math.round(n/t.length*1e3)/10})).filter(t=>t.count>0).sort((t,e)=>e.count-t.count),a={};t.forEach(t=>{let e="unknown";t.rawMetadata?.other?.language&&(e=t.rawMetadata.other.language.split("-")[0].toLowerCase()),a[e]=(a[e]||0)+1});const l=Object.entries(a).map(([e,n])=>({language:"unknown"===e?"Unknown":e.toUpperCase(),count:n,percentage:Math.round(n/t.length*1e3)/10})).sort((t,e)=>e.count-t.count),c={};t.forEach(t=>{const e=t.folderPath||"Root";c[e]=(c[e]||0)+1});return{categoryBreakdown:n,topicClusters:i,contentTypeMix:o,languageDistribution:l,folderDistribution:Object.entries(c).map(([e,n])=>({folder:e,count:n,percentage:Math.round(n/t.length*1e3)/10})).sort((t,e)=>e.count-t.count).slice(0,15),totalBookmarks:t.length}}catch(t){return console.error("Error getting content analysis:",t),{categoryBreakdown:[],topicClusters:[],contentTypeMix:[],languageDistribution:[],folderDistribution:[],totalBookmarks:0}}}async function xd(){try{const t=await Bl.bookmarks.toArray(),e=Date.now(),n=e-2592e6,r=e-7776e6,i=e-31536e6,s=t.filter(t=>{const e=t.dateAdded<n,r=!t.accessCount||0===t.accessCount,i=!1!==t.isAlive;return e&&r&&i}).sort((t,e)=>t.dateAdded-e.dateAdded).slice(0,50).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,category:t.category,folderPath:t.folderPath,ageInDays:Math.floor((e-t.dateAdded)/864e5)})),o=t.filter(t=>{const e=!1===t.isAlive,n=!t.accessCount||0===t.accessCount,r=t.dateAdded<i&&n;return e||r}).sort((t,e)=>!1===t.isAlive&&!1!==e.isAlive?-1:!1===e.isAlive&&!1!==t.isAlive?1:t.dateAdded-e.dateAdded).slice(0,50).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,isAlive:t.isAlive,accessCount:t.accessCount||0,reason:!1===t.isAlive?"Dead link":"Old & unused",ageInDays:Math.floor((e-t.dateAdded)/864e5)})),a=t.filter(t=>{const e=t.dateAdded<r,n=!1!==t.isAlive,i=t.title&&t.url;return e&&n&&i}),l=[...a].sort(()=>Math.random()-.5).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,category:t.category,description:t.description,ageInDays:Math.floor((e-t.dateAdded)/864e5)})),c={};t.forEach(t=>{t.domain&&(c[t.domain]||(c[t.domain]=[]),c[t.domain].push(t))});const u=Object.entries(c).filter(([,t])=>t.length<=2).map(([t,e])=>({domain:t,count:e.length,bookmarks:e.map(t=>({id:t.id,title:t.title,url:t.url,dateAdded:t.dateAdded}))})).sort((t,e)=>t.count-e.count).slice(0,20);return{staleQueue:s,cleanupCandidates:o,rediscoveryFeed:l,lowValueDomains:u,stats:{totalStale:s.length,totalCleanupCandidates:o.length,totalLowValueDomains:u.length,deadLinksCount:t.filter(t=>!1===t.isAlive).length,oldUnusedCount:t.filter(t=>t.dateAdded<i&&(!t.accessCount||0===t.accessCount)).length}}}catch(t){return console.error("Error getting actionable insights:",t),{staleQueue:[],cleanupCandidates:[],rediscoveryFeed:[],lowValueDomains:[],stats:{}}}}async function vd(){try{const t=await Bl.bookmarks.toArray(),e={};t.forEach(t=>{if(!t.domain)return;e[t.domain]||(e[t.domain]={domain:t.domain,total:0,dead:0,checked:0,accessed:0,totalAccess:0,oldestBookmark:1/0,newestBookmark:0,categories:{}});const n=e[t.domain];n.total++,null!==t.isAlive&&void 0!==t.isAlive&&(n.checked++,!1===t.isAlive&&n.dead++),t.accessCount&&t.accessCount>0&&(n.accessed++,n.totalAccess+=t.accessCount),t.dateAdded<n.oldestBookmark&&(n.oldestBookmark=t.dateAdded),t.dateAdded>n.newestBookmark&&(n.newestBookmark=t.dateAdded),t.category&&(n.categories[t.category]=(n.categories[t.category]||0)+1)});const n=Object.values(e).filter(t=>t.checked>=3).map(t=>({domain:t.domain,total:t.total,dead:t.dead,checked:t.checked,reliabilityScore:Math.round((t.checked-t.dead)/t.checked*100),deadRate:Math.round(t.dead/t.checked*100)})).sort((t,e)=>t.reliabilityScore-e.reliabilityScore).slice(0,15),r=n.filter(t=>t.deadRate>=30).sort((t,e)=>e.deadRate-t.deadRate),i=Object.values(e).map(t=>({domain:t.domain,total:t.total,accessed:t.accessed,totalAccess:t.totalAccess,engagementRate:t.total>0?Math.round(t.accessed/t.total*100):0,avgAccess:t.accessed>0?Math.round(t.totalAccess/t.accessed*10)/10:0})).filter(t=>t.totalAccess>0).sort((t,e)=>e.totalAccess-t.totalAccess).slice(0,10),s=t.length,o=Object.values(e).filter(t=>t.total/s>=.1).map(t=>({domain:t.domain,count:t.total,percentage:Math.round(t.total/s*100),topCategory:Object.entries(t.categories).sort(([,t],[,e])=>e-t)[0]?.[0]||"unknown"})).sort((t,e)=>e.percentage-t.percentage),a=Object.keys(e).length,l=s>0?Math.min(100,Math.round(a/s*100*3)):0;return{reliabilityScores:n,ephemeralSources:r,valuableDomains:i,dependencyWarnings:o,knowledgeMap:Object.values(e).map(t=>({domain:t.domain,total:t.total,accessed:t.accessed,dead:t.dead,checked:t.checked,percentage:Math.round(t.total/s*1e3)/10,topCategory:Object.entries(t.categories).sort(([,t],[,e])=>e-t)[0]?.[0]||null,categories:Object.entries(t.categories).map(([t,e])=>({category:t,count:e})).sort((t,e)=>e.count-t.count)})).sort((t,e)=>e.total-t.total).slice(0,25),diversityScore:l,uniqueDomains:a,totalBookmarks:s}}catch(t){return console.error("Error getting domain intelligence:",t),{reliabilityScores:[],ephemeralSources:[],valuableDomains:[],dependencyWarnings:[],knowledgeMap:[],diversityScore:0,uniqueDomains:0,totalBookmarks:0}}}async function wd(){try{const t=await Bl.bookmarks.toArray(),e=Date.now(),n=Array(24).fill(0);t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded).getHours();n[e]++}});const r=n.map((t,e)=>({hour:e,hourLabel:`${e.toString().padStart(2,"0")}:00`,count:t})),i=Math.max(...n),s=r.filter(t=>t.count===i).map(t=>t.hourLabel),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=Array(7).fill(0);t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded).getDay();a[e]++}});const l=a.map((t,e)=>({day:e,dayName:o[e],count:t})),c=a[0]+a[6],u=a.slice(1,6).reduce((t,e)=>t+e,0),d={weekday:{count:u,percentage:Math.round(u/t.length*100)},weekend:{count:c,percentage:Math.round(c/t.length*100)}},h={Today:0,"1-7 days":0,"1-4 weeks":0,"1-3 months":0,"3-6 months":0,"6-12 months":0,"1-2 years":0,"2+ years":0},f=e-864e5,p=e-6048e5,g=e-24192e5,m=e-7776e6,b=e-15552e6,y=e-31536e6,x=e-63072e6;t.forEach(t=>{t.dateAdded&&(t.dateAdded>=f?h.Today++:t.dateAdded>=p?h["1-7 days"]++:t.dateAdded>=g?h["1-4 weeks"]++:t.dateAdded>=m?h["1-3 months"]++:t.dateAdded>=b?h["3-6 months"]++:t.dateAdded>=y?h["6-12 months"]++:t.dateAdded>=x?h["1-2 years"]++:h["2+ years"]++)});const v=Object.entries(h).map(([e,n])=>({period:e,count:n,percentage:Math.round(n/t.length*100)})),w=t.reduce((t,n)=>t+(e-(n.dateAdded||e)),0),k=t.length>0?w/t.length:0,_=Math.round(k/864e5),C={};for(let t=11;t>=0;t--){const n=new Date(e);n.setMonth(n.getMonth()-t);const r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;C[r]=0}t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded),n=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;n in C&&C[n]++}});return{bookmarkingHours:r,peakHours:s,dayOfWeekDistribution:l,weekdayVsWeekend:d,ageDistribution:v,avgAgeDays:_,monthlyCreationTrend:Object.entries(C).map(([t,e])=>({month:t,monthLabel:new Date(t+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"}),count:e})),totalBookmarks:t.length}}catch(t){return console.error("Error getting time-based analysis:",t),{bookmarkingHours:[],peakHours:[],dayOfWeekDistribution:[],weekdayVsWeekend:{weekday:{count:0,percentage:0},weekend:{count:0,percentage:0}},ageDistribution:[],avgAgeDays:0,monthlyCreationTrend:[],totalBookmarks:0}}}async function kd(){try{const t=await Bl.bookmarks.toArray(),e=t.length;if(0===e)return{platforms:[],total:0};const n={};t.forEach(t=>{const e=t.platform||"other";n[e]=(n[e]||0)+1});return{platforms:Object.entries(n).map(([t,n])=>({platform:t,count:n,percentage:Math.round(n/e*100)})).sort((t,e)=>e.count-t.count),total:e}}catch(t){return console.error("Error getting platform distribution:",t),{platforms:[],total:0}}}async function _d(){try{const t=(await Bl.bookmarks.toArray()).filter(t=>"github"===t.platform),e={};return t.forEach(t=>{const n=t.platformData?.extra?.owner,r=t.platformData?.extra?.repo;if(!n||!r)return;const i=`${n}/${r}`;e[i]||(e[i]={repoName:i,owner:n,repo:r,totalCount:0,breakdown:{repo:0,issue:0,issues:0,pr:0,pulls:0,file:0,wiki:0,discussions:0,releases:0,actions:0,commits:0,other:0},bookmarks:[]}),e[i].totalCount++;const s=t.contentType||"other";e[i].breakdown.hasOwnProperty(s)?e[i].breakdown[s]++:e[i].breakdown.other++,e[i].bookmarks.push({id:t.id,title:t.title,url:t.url,contentType:t.contentType,extra:t.platformData?.extra})}),Object.values(e).sort((t,e)=>e.totalCount-t.totalCount)}catch(t){return console.error("Error getting repository groups:",t),[]}}async function Cd(t=10){try{const e=await Bl.bookmarks.toArray(),n=Date.now(),r=n-2592e6,i={};e.forEach(t=>{if(!t.creator)return;const e=`${t.platform}:${t.creator}`;i[e]||(i[e]={creator:t.creator,platform:t.platform||"other",totalCount:0,recentCount:0,contentTypes:new Set,thumbnail:null,firstSaved:1/0,lastSaved:0}),i[e].totalCount++,t.dateAdded>r&&i[e].recentCount++,t.contentType&&i[e].contentTypes.add(t.contentType),t.dateAdded<i[e].firstSaved&&(i[e].firstSaved=t.dateAdded),t.dateAdded>i[e].lastSaved&&(i[e].lastSaved=t.dateAdded),!i[e].thumbnail&&t.platformData?.extra?.thumbnail&&(i[e].thumbnail=t.platformData.extra.thumbnail)});return Object.values(i).map(t=>({...t,contentTypes:Array.from(t.contentTypes),velocity:t.firstSaved!==1/0?(t.totalCount/Math.max(1,(n-t.firstSaved)/2592e6)).toFixed(1):0})).sort((t,e)=>e.totalCount-t.totalCount).slice(0,t)}catch(t){return console.error("Error getting creator leaderboard:",t),[]}}async function Md(t=50){try{const e=await Bl.bookmarks.toArray();return e.filter(t=>t.platformData?.extra?.thumbnail||t.rawMetadata?.openGraph?.["og:image"]||t.rawMetadata?.twitterCard?.["twitter:image"]).map(t=>({id:t.id,title:t.title,url:t.url,platform:t.platform,creator:t.creator,contentType:t.contentType,thumbnail:t.platformData?.extra?.thumbnail||t.rawMetadata?.openGraph?.["og:image"]||t.rawMetadata?.twitterCard?.["twitter:image"],dateAdded:t.dateAdded})).sort((t,e)=>e.dateAdded-t.dateAdded).slice(0,t)}catch(t){return console.error("Error getting visual gallery:",t),[]}}async function Sd(){try{const t=await Bl.bookmarks.toArray(),e={youtube:{total:0,channels:new Set,videos:0,shorts:0,playlists:0},github:{total:0,repos:new Set,owners:new Set,issues:0,prs:0,files:0},blogs:{total:0,authors:new Set,platforms:{medium:0,devto:0,substack:0}},social:{total:0,twitter:0,reddit:0}};return t.forEach(t=>{switch(t.platform){case"youtube":e.youtube.total++,t.creator&&e.youtube.channels.add(t.creator),"video"===t.contentType&&("short"===t.platformData?.subtype?e.youtube.shorts++:e.youtube.videos++),"playlist"===t.contentType&&e.youtube.playlists++;break;case"github":e.github.total++,t.platformData?.extra?.repo&&e.github.repos.add(`${t.platformData.extra.owner}/${t.platformData.extra.repo}`),t.platformData?.extra?.owner&&e.github.owners.add(t.platformData.extra.owner),"issue"!==t.contentType&&"issues"!==t.contentType||e.github.issues++,"pr"!==t.contentType&&"pulls"!==t.contentType||e.github.prs++,"file"===t.contentType&&e.github.files++;break;case"medium":e.blogs.total++,e.blogs.platforms.medium++,t.creator&&e.blogs.authors.add(t.creator);break;case"devto":e.blogs.total++,e.blogs.platforms.devto++,t.creator&&e.blogs.authors.add(t.creator);break;case"substack":e.blogs.total++,e.blogs.platforms.substack++,t.creator&&e.blogs.authors.add(t.creator);break;case"twitter":e.social.total++,e.social.twitter++;break;case"reddit":e.social.total++,e.social.reddit++}}),{youtube:{...e.youtube,channels:e.youtube.channels.size},github:{...e.github,repos:e.github.repos.size,owners:e.github.owners.size},blogs:{...e.blogs,authors:e.blogs.authors.size},social:e.social}}catch(t){return console.error("Error getting platform insights summary:",t),{youtube:{total:0,channels:0,videos:0,shorts:0,playlists:0},github:{total:0,repos:0,owners:0,issues:0,prs:0,files:0},blogs:{total:0,authors:0,platforms:{medium:0,devto:0,substack:0}},social:{total:0,twitter:0,reddit:0}}}}function Ad(t,e,n){const r=t.slice();r[58]=e[n];const i=Math.max(...r[6].monthlyCreationTrend.map(t=>t.count));return r[59]=i,r}function Dd(t,e,n){const r=t.slice();return r[62]=e[n],r}function Pd(t,e,n){const r=t.slice();return r[62]=e[n],r}function Ed(t,e,n){const r=t.slice();return r[62]=e[n],r}function Td(t,e,n){const r=t.slice();return r[69]=e[n],r}function Od(t,e,n){const r=t.slice();return r[72]=e[n],r}function $d(t,e,n){const r=t.slice();return r[72]=e[n],r}function Ld(t,e,n){const r=t.slice();return r[72]=e[n],r}function Rd(t,e,n){const r=t.slice();return r[79]=e[n],r}function Bd(t,e,n){const r=t.slice();return r[82]=e[n],r}function Id(t,e,n){const r=t.slice();r[85]=e[n];const i=Math.min(1.5,.7+r[85].count/r[3].topicClusters[0].count);return r[86]=i,r}function jd(t,e,n){const r=t.slice();return r[89]=e[n],r}function Fd(t,e,n){const r=t.slice();return r[92]=e[n][0],r[93]=e[n][1],r}function zd(t,e,n){const r=t.slice();return r[72]=e[n],r}function Nd(t,e,n){const r=t.slice();return r[98]=e[n],r}function Wd(t,e,n){const r=t.slice();return r[101]=e[n],r[103]=n,r}function Vd(t,e,n){const r=t.slice();return r[104]=e[n],r}function Hd(t){let e,n,r,i,s,o,a,l=t[104].label+"";function c(){return t[23](t[104])}return{c(){e=y("button"),n=y("span"),n.textContent=`${t[104].icon}`,r=w(),i=v(l),M(n,"class","mr-1"),M(e,"class",s="px-4 py-2 rounded-t-lg text-sm font-medium transition-colors "+(t[1]===t[104].id?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"))},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i),o||(a=_(e,"click",c),o=!0)},p(n,r){t=n,2&r[0]&&s!==(s="px-4 py-2 rounded-t-lg text-sm font-medium transition-colors "+(t[1]===t[104].id?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"))&&M(e,"class",s)},d(t){t&&m(e),o=!1,a()}}}function qd(t){let e,n,r,i,s,o,a,l="health"===t[1]&&t[2]&&Kd(t),c="platforms"===t[1]&&t[7]&&th(t),u="content"===t[1]&&t[3]&&kh(t),d="actions"===t[1]&&t[4]&&Oh(t),h="domains"===t[1]&&t[5]&&Kh(t),f="time"===t[1]&&t[6]&&af(t);return{c(){l&&l.c(),e=w(),c&&c.c(),n=w(),u&&u.c(),r=w(),d&&d.c(),i=w(),h&&h.c(),s=w(),f&&f.c(),o=k()},m(t,p){l&&l.m(t,p),g(t,e,p),c&&c.m(t,p),g(t,n,p),u&&u.m(t,p),g(t,r,p),d&&d.m(t,p),g(t,i,p),h&&h.m(t,p),g(t,s,p),f&&f.m(t,p),g(t,o,p),a=!0},p(t,a){"health"===t[1]&&t[2]?l?(l.p(t,a),6&a[0]&&tt(l,1)):(l=Kd(t),l.c(),tt(l,1),l.m(e.parentNode,e)):l&&(J(),et(l,1,1,()=>{l=null}),Z()),"platforms"===t[1]&&t[7]?c?(c.p(t,a),130&a[0]&&tt(c,1)):(c=th(t),c.c(),tt(c,1),c.m(n.parentNode,n)):c&&(J(),et(c,1,1,()=>{c=null}),Z()),"content"===t[1]&&t[3]?u?(u.p(t,a),10&a[0]&&tt(u,1)):(u=kh(t),u.c(),tt(u,1),u.m(r.parentNode,r)):u&&(J(),et(u,1,1,()=>{u=null}),Z()),"actions"===t[1]&&t[4]?d?(d.p(t,a),18&a[0]&&tt(d,1)):(d=Oh(t),d.c(),tt(d,1),d.m(i.parentNode,i)):d&&(J(),et(d,1,1,()=>{d=null}),Z()),"domains"===t[1]&&t[5]?h?(h.p(t,a),34&a[0]&&tt(h,1)):(h=Kh(t),h.c(),tt(h,1),h.m(s.parentNode,s)):h&&(J(),et(h,1,1,()=>{h=null}),Z()),"time"===t[1]&&t[6]?f?(f.p(t,a),66&a[0]&&tt(f,1)):(f=af(t),f.c(),tt(f,1),f.m(o.parentNode,o)):f&&(J(),et(f,1,1,()=>{f=null}),Z())},i(t){a||(tt(l),tt(c),tt(u),tt(d),tt(h),tt(f),a=!0)},o(t){et(l),et(c),et(u),et(d),et(h),et(f),a=!1},d(t){t&&(m(e),m(n),m(r),m(i),m(s),m(o)),l&&l.d(t),c&&c.d(t),u&&u.d(t),d&&d.d(t),h&&h.d(t),f&&f.d(t)}}}function Ud(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-500">Loading insights...</span>',M(n,"class","flex items-center justify-center py-16")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function Kd(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H,q,U,K,Y,Q,G,X,J,Z,nt,rt,it,lt,ct,ut,dt,ht,ft,pt,gt,mt,bt,yt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Pt,Et,Tt,Ot,$t,Lt,Rt,Bt,It,jt,Ft,zt,Nt,Wt,Vt,Ht,qt,Ut,Kt,Yt,Qt,Gt,Xt,Jt,Zt,te,ee,ne,re,ie,se,oe,ae,le,ce=t[2].total.toLocaleString()+"",ue=t[2].healthScore+"",de=t[2].roi+"",he=t[2].metrics.accessed+"",fe=t[2].total+"",pe=t[2].decayRate+"",ge=t[2].metrics.decayed+"",me=t[2].deadLinkRatio+"",be=t[2].metrics.dead+"",ye=t[2].metrics.checked+"",xe=t[2].enrichmentCoverage+"",ve=t[2].metrics.enriched+"",we=t[2].categorizationCoverage+"",ke=t[2].metrics.categorized+"",_e=t[2].duplicateScore+"",Ce=t[2].metrics.duplicates+"";return se=new dd({props:{title:"Improvement Tips",icon:"",variant:"info",$$slots:{default:[Zd]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),i=y("div"),s=y("div"),o=y("h2"),o.textContent="Collection Health Score",a=w(),l=y("p"),c=v(ce),u=v(" total bookmarks"),d=w(),h=y("div"),f=y("div"),b=v(ue),x=w(),k=y("div"),k.textContent="out of 100",C=w(),S=y("div"),D=y("div"),E=w(),T=y("div"),O=y("div"),$=y("div"),$.textContent="Bookmark ROI",L=w(),R=y("div"),B=v(de),I=v("%"),F=w(),z=y("div"),N=v(he),W=v(" of "),V=v(fe),H=v(" used"),q=w(),U=y("div"),K=y("div"),K.textContent="Decay Rate",Y=w(),Q=y("div"),G=v(pe),X=v("%"),Z=w(),nt=y("div"),rt=v(ge),it=v(" old & unused"),lt=w(),ct=y("div"),ut=y("div"),ut.textContent="Dead Links",dt=w(),ht=y("div"),ft=v(me),pt=v("%"),mt=w(),bt=y("div"),yt=v(be),xt=v(" of "),vt=v(ye),wt=v(" checked"),kt=w(),_t=y("div"),Ct=y("div"),Ct.textContent="Enriched",Mt=w(),St=y("div"),At=v(xe),Dt=v("%"),Et=w(),Tt=y("div"),Ot=v(ve),$t=v(" with metadata"),Lt=w(),Rt=y("div"),Bt=y("div"),Bt.textContent="Categorized",It=w(),jt=y("div"),Ft=v(we),zt=v("%"),Wt=w(),Vt=y("div"),Ht=v(ke),qt=v(" tagged"),Ut=w(),Kt=y("div"),Yt=y("div"),Yt.textContent="Duplicates",Qt=w(),Gt=y("div"),Xt=v(_e),Jt=v("%"),te=w(),ee=y("div"),ne=v(Ce),re=v(" duplicate URLs"),ie=w(),st(se.$$.fragment),M(o,"class","text-lg font-medium opacity-90"),M(l,"class","text-sm opacity-75 mt-1"),M(f,"class","text-5xl font-bold"),M(k,"class","text-sm opacity-75"),M(h,"class","text-right"),M(i,"class","flex items-center justify-between"),M(D,"class","h-full bg-white rounded-full transition-all duration-500"),P(D,"width",t[2].healthScore+"%"),M(S,"class","mt-4 bg-white/20 rounded-full h-3 overflow-hidden"),M(n,"class","bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 text-white"),M($,"class","text-xs text-gray-500 uppercase tracking-wide"),M(R,"class",j="text-2xl font-bold mt-1 "+gf(t[2].roi)+" svelte-12ctnp6"),M(z,"class","text-xs text-gray-400 mt-1"),M(O,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(O,"role","button"),M(O,"tabindex","0"),M(K,"class","text-xs text-gray-500 uppercase tracking-wide"),M(Q,"class",J="text-2xl font-bold mt-1 "+gf(t[2].decayRate,!0)+" svelte-12ctnp6"),M(nt,"class","text-xs text-gray-400 mt-1"),M(U,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(U,"role","button"),M(U,"tabindex","0"),M(ut,"class","text-xs text-gray-500 uppercase tracking-wide"),M(ht,"class",gt="text-2xl font-bold mt-1 "+gf(t[2].deadLinkRatio,!0)+" svelte-12ctnp6"),M(bt,"class","text-xs text-gray-400 mt-1"),M(ct,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(ct,"role","button"),M(ct,"tabindex","0"),M(Ct,"class","text-xs text-gray-500 uppercase tracking-wide"),M(St,"class",Pt="text-2xl font-bold mt-1 "+gf(t[2].enrichmentCoverage)+" svelte-12ctnp6"),M(Tt,"class","text-xs text-gray-400 mt-1"),M(_t,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(_t,"role","button"),M(_t,"tabindex","0"),M(Bt,"class","text-xs text-gray-500 uppercase tracking-wide"),M(jt,"class",Nt="text-2xl font-bold mt-1 "+gf(t[2].categorizationCoverage)+" svelte-12ctnp6"),M(Vt,"class","text-xs text-gray-400 mt-1"),M(Rt,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(Rt,"role","button"),M(Rt,"tabindex","0"),M(Yt,"class","text-xs text-gray-500 uppercase tracking-wide"),M(Gt,"class",Zt="text-2xl font-bold mt-1 "+gf(t[2].duplicateScore,!0)+" svelte-12ctnp6"),M(ee,"class","text-xs text-gray-400 mt-1"),M(Kt,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(Kt,"role","button"),M(Kt,"tabindex","0"),M(T,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"),M(e,"class","space-y-6")},m(r,m){g(r,e,m),p(e,n),p(n,i),p(i,s),p(s,o),p(s,a),p(s,l),p(l,c),p(l,u),p(i,d),p(i,h),p(h,f),p(f,b),p(h,x),p(h,k),p(n,C),p(n,S),p(S,D),p(e,E),p(e,T),p(T,O),p(O,$),p(O,L),p(O,R),p(R,B),p(R,I),p(O,F),p(O,z),p(z,N),p(z,W),p(z,V),p(z,H),p(T,q),p(T,U),p(U,K),p(U,Y),p(U,Q),p(Q,G),p(Q,X),p(U,Z),p(U,nt),p(nt,rt),p(nt,it),p(T,lt),p(T,ct),p(ct,ut),p(ct,dt),p(ct,ht),p(ht,ft),p(ht,pt),p(ct,mt),p(ct,bt),p(bt,yt),p(bt,xt),p(bt,vt),p(bt,wt),p(T,kt),p(T,_t),p(_t,Ct),p(_t,Mt),p(_t,St),p(St,At),p(St,Dt),p(_t,Et),p(_t,Tt),p(Tt,Ot),p(Tt,$t),p(T,Lt),p(T,Rt),p(Rt,Bt),p(Rt,It),p(Rt,jt),p(jt,Ft),p(jt,zt),p(Rt,Wt),p(Rt,Vt),p(Vt,Ht),p(Vt,qt),p(T,Ut),p(T,Kt),p(Kt,Yt),p(Kt,Qt),p(Kt,Gt),p(Gt,Xt),p(Gt,Jt),p(Kt,te),p(Kt,ee),p(ee,ne),p(ee,re),p(e,ie),ot(se,e,null),oe=!0,ae||(le=[_(O,"click",t[24]),_(O,"keypress",t[25]),_(U,"click",t[26]),_(U,"keypress",t[27]),_(ct,"click",t[28]),_(ct,"keypress",t[29]),_(_t,"click",t[30]),_(_t,"keypress",t[31]),_(Rt,"click",t[32]),_(Rt,"keypress",t[33]),_(Kt,"click",t[34]),_(Kt,"keypress",t[35])],ae=!0)},p(t,e){(!oe||4&e[0])&&ce!==(ce=t[2].total.toLocaleString()+"")&&A(c,ce),(!oe||4&e[0])&&ue!==(ue=t[2].healthScore+"")&&A(b,ue),(!oe||4&e[0])&&P(D,"width",t[2].healthScore+"%"),(!oe||4&e[0])&&de!==(de=t[2].roi+"")&&A(B,de),(!oe||4&e[0]&&j!==(j="text-2xl font-bold mt-1 "+gf(t[2].roi)+" svelte-12ctnp6"))&&M(R,"class",j),(!oe||4&e[0])&&he!==(he=t[2].metrics.accessed+"")&&A(N,he),(!oe||4&e[0])&&fe!==(fe=t[2].total+"")&&A(V,fe),(!oe||4&e[0])&&pe!==(pe=t[2].decayRate+"")&&A(G,pe),(!oe||4&e[0]&&J!==(J="text-2xl font-bold mt-1 "+gf(t[2].decayRate,!0)+" svelte-12ctnp6"))&&M(Q,"class",J),(!oe||4&e[0])&&ge!==(ge=t[2].metrics.decayed+"")&&A(rt,ge),(!oe||4&e[0])&&me!==(me=t[2].deadLinkRatio+"")&&A(ft,me),(!oe||4&e[0]&&gt!==(gt="text-2xl font-bold mt-1 "+gf(t[2].deadLinkRatio,!0)+" svelte-12ctnp6"))&&M(ht,"class",gt),(!oe||4&e[0])&&be!==(be=t[2].metrics.dead+"")&&A(yt,be),(!oe||4&e[0])&&ye!==(ye=t[2].metrics.checked+"")&&A(vt,ye),(!oe||4&e[0])&&xe!==(xe=t[2].enrichmentCoverage+"")&&A(At,xe),(!oe||4&e[0]&&Pt!==(Pt="text-2xl font-bold mt-1 "+gf(t[2].enrichmentCoverage)+" svelte-12ctnp6"))&&M(St,"class",Pt),(!oe||4&e[0])&&ve!==(ve=t[2].metrics.enriched+"")&&A(Ot,ve),(!oe||4&e[0])&&we!==(we=t[2].categorizationCoverage+"")&&A(Ft,we),(!oe||4&e[0]&&Nt!==(Nt="text-2xl font-bold mt-1 "+gf(t[2].categorizationCoverage)+" svelte-12ctnp6"))&&M(jt,"class",Nt),(!oe||4&e[0])&&ke!==(ke=t[2].metrics.categorized+"")&&A(Ht,ke),(!oe||4&e[0])&&_e!==(_e=t[2].duplicateScore+"")&&A(Xt,_e),(!oe||4&e[0]&&Zt!==(Zt="text-2xl font-bold mt-1 "+gf(t[2].duplicateScore,!0)+" svelte-12ctnp6"))&&M(Gt,"class",Zt),(!oe||4&e[0])&&Ce!==(Ce=t[2].metrics.duplicates+"")&&A(ne,Ce);const n={};4&e[0]|16384&e[3]&&(n.$$scope={dirty:e,ctx:t}),se.$set(n)},i(t){oe||(tt(se.$$.fragment,t),oe=!0)},o(t){et(se.$$.fragment,t),oe=!1},d(t){t&&m(e),at(se),ae=!1,r(le)}}}function Yd(t){let e,n,r,i,s,o,a,l=t[2].roi+"";return{c(){e=y("div"),n=y("span"),n.textContent="",r=w(),i=y("span"),s=v("Low bookmark ROI ("),o=v(l),a=v("%)  consider reviewing and removing unused bookmarks"),M(n,"class","text-yellow-500"),M(e,"class","flex items-start gap-2")},m(t,l){g(t,e,l),p(e,n),p(e,r),p(e,i),p(i,s),p(i,o),p(i,a)},p(t,e){4&e[0]&&l!==(l=t[2].roi+"")&&A(o,l)},d(t){t&&m(e)}}}function Qd(t){let e,n,r,i,s,o,a,l=t[2].decayRate+"";return{c(){e=y("div"),n=y("span"),n.textContent="",r=w(),i=y("span"),s=v("High decay rate ("),o=v(l),a=v("%)  many old bookmarks never accessed"),M(n,"class","text-yellow-500"),M(e,"class","flex items-start gap-2")},m(t,l){g(t,e,l),p(e,n),p(e,r),p(e,i),p(i,s),p(i,o),p(i,a)},p(t,e){4&e[0]&&l!==(l=t[2].decayRate+"")&&A(o,l)},d(t){t&&m(e)}}}function Gd(t){let e,n,r,i,s,o,a=t[2].metrics.dead+"";return{c(){e=y("div"),n=y("span"),n.textContent="",r=w(),i=y("span"),s=v(a),o=v(" dead links detected  consider cleanup"),M(n,"class","text-red-500"),M(e,"class","flex items-start gap-2")},m(t,a){g(t,e,a),p(e,n),p(e,r),p(e,i),p(i,s),p(i,o)},p(t,e){4&e[0]&&a!==(a=t[2].metrics.dead+"")&&A(s,a)},d(t){t&&m(e)}}}function Xd(t){let e,n,r,i,s,o,a,l=t[2].enrichmentCoverage+"";return{c(){e=y("div"),n=y("span"),n.textContent="",r=w(),i=y("span"),s=v("Run enrichment to improve metadata coverage ("),o=v(l),a=v("%)"),M(n,"class","text-blue-500"),M(e,"class","flex items-start gap-2")},m(t,l){g(t,e,l),p(e,n),p(e,r),p(e,i),p(i,s),p(i,o),p(i,a)},p(t,e){4&e[0]&&l!==(l=t[2].enrichmentCoverage+"")&&A(o,l)},d(t){t&&m(e)}}}function Jd(t){let e;return{c(){e=y("div"),e.innerHTML='<span class="text-green-500"></span> <span>Your collection is in good health!</span>',M(e,"class","flex items-start gap-2")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Zd(t){let e,n,r,i,s,o=t[2].roi<30&&Yd(t),a=t[2].decayRate>50&&Qd(t),l=t[2].deadLinkRatio>10&&Gd(t),c=t[2].enrichmentCoverage<50&&Xd(t),u=t[2].healthScore>=70&&Jd();return{c(){e=y("div"),o&&o.c(),n=w(),a&&a.c(),r=w(),l&&l.c(),i=w(),c&&c.c(),s=w(),u&&u.c(),M(e,"class","space-y-2 text-sm")},m(t,d){g(t,e,d),o&&o.m(e,null),p(e,n),a&&a.m(e,null),p(e,r),l&&l.m(e,null),p(e,i),c&&c.m(e,null),p(e,s),u&&u.m(e,null)},p(t,d){t[2].roi<30?o?o.p(t,d):(o=Yd(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),t[2].decayRate>50?a?a.p(t,d):(a=Qd(t),a.c(),a.m(e,r)):a&&(a.d(1),a=null),t[2].deadLinkRatio>10?l?l.p(t,d):(l=Gd(t),l.c(),l.m(e,i)):l&&(l.d(1),l=null),t[2].enrichmentCoverage<50?c?c.p(t,d):(c=Xd(t),c.c(),c.m(e,s)):c&&(c.d(1),c=null),t[2].healthScore>=70?u||(u=Jd(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(t){t&&m(e),o&&o.d(),a&&a.d(),l&&l.d(),c&&c.d(),u&&u.d()}}}function th(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H,q,U,K,Y,Q,G,X,nt,rt,it=(t[11]?.totalPlatformBookmarks||0)+"",lt=(t[7].platforms?.length||0)+"",ct=(t[11]?.uniqueCreators||0)+"",ut=(t[9]?.length||0)+"",dt=(t[10]?.length||0)+"";U=new dd({props:{title:"Platform Breakdown",icon:"",subtitle:"Click to filter by platform",$$slots:{default:[eh]},$$scope:{ctx:t}}}),Y=new dd({props:{title:"Creator Leaderboard",icon:"",subtitle:"Your most bookmarked creators",$$slots:{default:[sh]},$$scope:{ctx:t}}});let ht=t[9]&&t[9].length>0&&oh(t),ft=t[10]&&t[10].length>0&&fh(t);return nt=new dd({props:{title:"Content Types by Platform",icon:"",collapsible:!0,collapsed:!0,$$slots:{default:[wh]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v(it),o=w(),a=y("div"),a.textContent="Platform bookmarks",l=w(),c=y("div"),u=v(lt),d=v(" platforms"),h=w(),f=y("div"),b=y("div"),x=v(ct),k=w(),_=y("div"),_.textContent="Unique creators",C=w(),S=y("div"),S.textContent="Channels & authors",D=w(),P=y("div"),E=y("div"),T=v(ut),O=w(),$=y("div"),$.textContent="GitHub repos",L=w(),R=y("div"),R.textContent="With issues & PRs",B=w(),I=y("div"),j=y("div"),F=v(dt),z=w(),N=y("div"),N.textContent="Visual bookmarks",W=w(),V=y("div"),V.textContent="With thumbnails",H=w(),q=y("div"),st(U.$$.fragment),K=w(),st(Y.$$.fragment),Q=w(),ht&&ht.c(),G=w(),ft&&ft.c(),X=w(),st(nt.$$.fragment),M(i,"class","text-2xl font-bold text-red-700"),M(a,"class","text-sm text-red-600"),M(c,"class","text-xs text-red-500 mt-1"),M(r,"class","bg-gradient-to-br from-red-50 to-red-100 border border-red-200 rounded-lg p-4"),M(b,"class","text-2xl font-bold text-blue-700"),M(_,"class","text-sm text-blue-600"),M(S,"class","text-xs text-blue-500 mt-1"),M(f,"class","bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-4"),M(E,"class","text-2xl font-bold text-purple-700"),M($,"class","text-sm text-purple-600"),M(R,"class","text-xs text-purple-500 mt-1"),M(P,"class","bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4"),M(j,"class","text-2xl font-bold text-green-700"),M(N,"class","text-sm text-green-600"),M(V,"class","text-xs text-green-500 mt-1"),M(I,"class","bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg p-4"),M(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),M(q,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),M(e,"class","space-y-6")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(i,s),p(r,o),p(r,a),p(r,l),p(r,c),p(c,u),p(c,d),p(n,h),p(n,f),p(f,b),p(b,x),p(f,k),p(f,_),p(f,C),p(f,S),p(n,D),p(n,P),p(P,E),p(E,T),p(P,O),p(P,$),p(P,L),p(P,R),p(n,B),p(n,I),p(I,j),p(j,F),p(I,z),p(I,N),p(I,W),p(I,V),p(e,H),p(e,q),ot(U,q,null),p(q,K),ot(Y,q,null),p(e,Q),ht&&ht.m(e,null),p(e,G),ft&&ft.m(e,null),p(e,X),ot(nt,e,null),rt=!0},p(t,n){(!rt||2048&n[0])&&it!==(it=(t[11]?.totalPlatformBookmarks||0)+"")&&A(s,it),(!rt||128&n[0])&&lt!==(lt=(t[7].platforms?.length||0)+"")&&A(u,lt),(!rt||2048&n[0])&&ct!==(ct=(t[11]?.uniqueCreators||0)+"")&&A(x,ct),(!rt||512&n[0])&&ut!==(ut=(t[9]?.length||0)+"")&&A(T,ut),(!rt||1024&n[0])&&dt!==(dt=(t[10]?.length||0)+"")&&A(F,dt);const r={};16384&n[3]&&(r.$$scope={dirty:n,ctx:t}),U.$set(r);const i={};256&n[0]|16384&n[3]&&(i.$$scope={dirty:n,ctx:t}),Y.$set(i),t[9]&&t[9].length>0?ht?(ht.p(t,n),512&n[0]&&tt(ht,1)):(ht=oh(t),ht.c(),tt(ht,1),ht.m(e,G)):ht&&(J(),et(ht,1,1,()=>{ht=null}),Z()),t[10]&&t[10].length>0?ft?(ft.p(t,n),1024&n[0]&&tt(ft,1)):(ft=fh(t),ft.c(),tt(ft,1),ft.m(e,X)):ft&&(J(),et(ft,1,1,()=>{ft=null}),Z());const o={};128&n[0]|16384&n[3]&&(o.$$scope={dirty:n,ctx:t}),nt.$set(o)},i(t){rt||(tt(U.$$.fragment,t),tt(Y.$$.fragment,t),tt(ht),tt(ft),tt(nt.$$.fragment,t),rt=!0)},o(t){et(U.$$.fragment,t),et(Y.$$.fragment,t),et(ht),et(ft),et(nt.$$.fragment,t),rt=!1},d(t){t&&m(e),at(U),at(Y),ht&&ht.d(),ft&&ft.d(),at(nt)}}}function eh(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="platformDonutChart"></canvas>',M(n,"class","h-64")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function nh(e){let n;return{c(){n=y("p"),n.textContent="No creators detected yet. Run enrichment to identify channels and authors.",M(n,"class","text-gray-500 text-sm py-4 text-center")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function rh(t){let e,n=nt(t[8].slice(0,10)),r=[];for(let e=0;e<n.length;e+=1)r[e]=ih(Wd(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=k()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);g(t,e,n)},p(t,i){if(16640&i[0]){let s;for(n=nt(t[8].slice(0,10)),s=0;s<n.length;s+=1){const o=Wd(t,n,s);r[s]?r[s].p(o,i):(r[s]=ih(o),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function ih(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,T,O,$,L,R=t[101].creator+"",B=Ll(t[101].platform)+"",I=t[101].count+"",j=(t[101].recentCount||0)+"";function F(){return t[36](t[101])}return{c(){e=y("button"),n=y("div"),n.textContent=`${t[103]+1}`,r=w(),i=y("div"),s=y("div"),o=y("span"),a=v(R),l=w(),c=y("span"),u=v(B),h=w(),f=y("div"),b=v(I),x=v(" bookmarks"),k=w(),C=y("div"),S=y("div"),D=v("+"),P=v(j),E=w(),T=y("div"),T.textContent="last 30d",O=w(),M(n,"class","w-6 h-6 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-xs font-bold"),M(o,"class","font-medium text-sm truncate"),M(c,"class","text-xs px-1.5 py-0.5 bg-gray-100 rounded"),M(c,"title",d=$l(t[101].platform)),M(s,"class","flex items-center gap-2"),M(f,"class","text-xs text-gray-500"),M(i,"class","flex-1 min-w-0"),M(S,"class","text-xs font-medium text-green-600"),M(T,"class","text-xs text-gray-400"),M(C,"class","text-right"),M(e,"class","w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors text-left")},m(t,d){g(t,e,d),p(e,n),p(e,r),p(e,i),p(i,s),p(s,o),p(o,a),p(s,l),p(s,c),p(c,u),p(i,h),p(i,f),p(f,b),p(f,x),p(e,k),p(e,C),p(C,S),p(S,D),p(S,P),p(C,E),p(C,T),p(e,O),$||(L=_(e,"click",F),$=!0)},p(e,n){t=e,256&n[0]&&R!==(R=t[101].creator+"")&&A(a,R),256&n[0]&&B!==(B=Ll(t[101].platform)+"")&&A(u,B),256&n[0]&&d!==(d=$l(t[101].platform))&&M(c,"title",d),256&n[0]&&I!==(I=t[101].count+"")&&A(b,I),256&n[0]&&j!==(j=(t[101].recentCount||0)+"")&&A(P,j)},d(t){t&&m(e),$=!1,L()}}}function sh(t){let e;function n(t,e){return t[8]&&t[8].length>0?rh:nh}let r=n(t),i=r(t);return{c(){e=y("div"),i.c(),M(e,"class","space-y-2 insight-scrollable")},m(t,n){g(t,e,n),i.m(e,null)},p(t,s){r===(r=n(t))&&i?i.p(t,s):(i.d(1),i=r(t),i&&(i.c(),i.m(e,null)))},d(t){t&&m(e),i.d()}}}function oh(t){let e,n;return e=new dd({props:{title:"GitHub Repository Map",icon:"",subtitle:"Your bookmarked repos and their content",$$slots:{default:[hh]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ot(e,t,r),n=!0},p(t,n){const r={};512&n[0]|16384&n[3]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function ah(t){let e,n,r,i=t[98].issues+"";return{c(){e=y("span"),n=v(i),r=v(" issues"),M(e,"class","px-1.5 py-0.5 bg-green-100 text-green-700 rounded")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){512&e[0]&&i!==(i=t[98].issues+"")&&A(n,i)},d(t){t&&m(e)}}}function lh(t){let e,n,r,i=t[98].pulls+"";return{c(){e=y("span"),n=v(i),r=v(" PRs"),M(e,"class","px-1.5 py-0.5 bg-purple-100 text-purple-700 rounded")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){512&e[0]&&i!==(i=t[98].pulls+"")&&A(n,i)},d(t){t&&m(e)}}}function ch(t){let e,n,r,i=t[98].files+"";return{c(){e=y("span"),n=v(i),r=v(" files"),M(e,"class","px-1.5 py-0.5 bg-yellow-100 text-yellow-700 rounded")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){512&e[0]&&i!==(i=t[98].files+"")&&A(n,i)},d(t){t&&m(e)}}}function uh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D=t[98].fullName+"",P=t[98].totalCount+"",E=t[98].issues>0&&ah(t),T=t[98].pulls>0&&lh(t),O=t[98].files>0&&ch(t);function $(){return t[37](t[98])}return{c(){e=y("button"),n=y("div"),r=y("span"),r.textContent="",i=w(),s=y("span"),o=v(D),l=w(),c=y("div"),u=y("span"),d=v(P),h=v(" total"),f=w(),E&&E.c(),b=w(),T&&T.c(),x=w(),O&&O.c(),k=w(),M(r,"class","text-lg"),M(s,"class","font-medium text-sm truncate"),M(s,"title",a=t[98].fullName),M(n,"class","flex items-center gap-2 mb-2"),M(u,"class","px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded"),M(c,"class","flex flex-wrap gap-1 text-xs"),M(e,"class","p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 text-left transition-colors")},m(t,a){g(t,e,a),p(e,n),p(n,r),p(n,i),p(n,s),p(s,o),p(e,l),p(e,c),p(c,u),p(u,d),p(u,h),p(c,f),E&&E.m(c,null),p(c,b),T&&T.m(c,null),p(c,x),O&&O.m(c,null),p(e,k),C||(S=_(e,"click",$),C=!0)},p(e,n){t=e,512&n[0]&&D!==(D=t[98].fullName+"")&&A(o,D),512&n[0]&&a!==(a=t[98].fullName)&&M(s,"title",a),512&n[0]&&P!==(P=t[98].totalCount+"")&&A(d,P),t[98].issues>0?E?E.p(t,n):(E=ah(t),E.c(),E.m(c,b)):E&&(E.d(1),E=null),t[98].pulls>0?T?T.p(t,n):(T=lh(t),T.c(),T.m(c,x)):T&&(T.d(1),T=null),t[98].files>0?O?O.p(t,n):(O=ch(t),O.c(),O.m(c,null)):O&&(O.d(1),O=null)},d(t){t&&m(e),E&&E.d(),T&&T.d(),O&&O.d(),C=!1,S()}}}function dh(t){let e,n,r,i,s=t[9].length-12+"";return{c(){e=y("p"),n=v("...and "),r=v(s),i=v(" more repositories"),M(e,"class","text-xs text-gray-500 mt-3 text-center")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i)},p(t,e){512&e[0]&&s!==(s=t[9].length-12+"")&&A(r,s)},d(t){t&&m(e)}}}function hh(t){let e,n,r,i=nt(t[9].slice(0,12)),s=[];for(let e=0;e<i.length;e+=1)s[e]=uh(Nd(t,i,e));let o=t[9].length>12&&dh(t);return{c(){e=y("div");for(let t=0;t<s.length;t+=1)s[t].c();n=w(),o&&o.c(),r=k(),M(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 insight-scrollable")},m(t,i){g(t,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);g(t,n,i),o&&o.m(t,i),g(t,r,i)},p(t,n){if(16896&n[0]){let r;for(i=nt(t[9].slice(0,12)),r=0;r<i.length;r+=1){const o=Nd(t,i,r);s[r]?s[r].p(o,n):(s[r]=uh(o),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}t[9].length>12?o?o.p(t,n):(o=dh(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(t){t&&(m(e),m(n),m(r)),b(s,t),o&&o.d(t)}}}function fh(t){let e,n;return e=new dd({props:{title:"Visual Gallery",icon:"",subtitle:"Bookmarks with thumbnail images",$$slots:{default:[mh]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ot(e,t,r),n=!0},p(t,n){const r={};1024&n[0]|16384&n[3]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function ph(t){let e,n,r=Ll(t[72].platform)+"";return{c(){e=y("div"),n=v(r),M(e,"class","absolute top-1 right-1 bg-white/90 rounded px-1 text-xs")},m(t,r){g(t,e,r),p(e,n)},p(t,e){1024&e[0]&&r!==(r=Ll(t[72].platform)+"")&&A(n,r)},d(t){t&&m(e)}}}function gh(t){let e,n,r,i,s,o,l,c,u,d,h,f,b,x,k=t[72].title+"",C=t[72].platform&&ph(t);return{c(){e=y("a"),n=y("img"),s=w(),o=y("div"),l=y("div"),c=v(k),u=w(),C&&C.c(),d=w(),a(n.src,r=t[72].thumbnail)||M(n,"src",r),M(n,"alt",i=t[72].title),M(n,"class","w-full h-full object-cover group-hover:scale-105 transition-transform"),M(n,"loading","lazy"),M(l,"class","text-white text-xs line-clamp-2 leading-tight svelte-12ctnp6"),M(o,"class","absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2"),M(e,"href",h=t[72].url),M(e,"target","_blank"),M(e,"rel","noopener noreferrer"),M(e,"class","group block aspect-video bg-gray-100 rounded-lg overflow-hidden relative hover:ring-2 hover:ring-blue-400 transition-all"),M(e,"title",f=t[72].title)},m(t,r){g(t,e,r),p(e,n),p(e,s),p(e,o),p(o,l),p(l,c),p(e,u),C&&C.m(e,null),p(e,d),b||(x=_(n,"error",mf),b=!0)},p(t,s){1024&s[0]&&!a(n.src,r=t[72].thumbnail)&&M(n,"src",r),1024&s[0]&&i!==(i=t[72].title)&&M(n,"alt",i),1024&s[0]&&k!==(k=t[72].title+"")&&A(c,k),t[72].platform?C?C.p(t,s):(C=ph(t),C.c(),C.m(e,d)):C&&(C.d(1),C=null),1024&s[0]&&h!==(h=t[72].url)&&M(e,"href",h),1024&s[0]&&f!==(f=t[72].title)&&M(e,"title",f)},d(t){t&&m(e),C&&C.d(),b=!1,x()}}}function mh(t){let e,n=nt(t[10]),r=[];for(let e=0;e<n.length;e+=1)r[e]=gh(zd(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(1024&i[0]){let s;for(n=nt(t[10]),s=0;s<n.length;s+=1){const o=zd(t,n,s);r[s]?r[s].p(o,i):(r[s]=gh(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function bh(e){let n;return{c(){n=y("p"),n.textContent="No platform data available.",M(n,"class","text-gray-500 text-sm")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function yh(t){let e,n=nt(t[7].platforms.slice(0,5)),r=[];for(let e=0;e<n.length;e+=1)r[e]=vh(jd(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=k()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);g(t,e,n)},p(t,i){if(128&i[0]){let s;for(n=nt(t[7].platforms.slice(0,5)),s=0;s<n.length;s+=1){const o=jd(t,n,s);r[s]?r[s].p(o,i):(r[s]=vh(o),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function xh(t){let e,n,r,i,s,o=Rl(t[92])+"",a=t[93]+"";return{c(){e=y("span"),n=v(o),r=v(": "),i=v(a),s=w(),M(e,"class","px-2 py-0.5 bg-gray-100 rounded text-xs")},m(t,o){g(t,e,o),p(e,n),p(e,r),p(e,i),p(e,s)},p(t,e){128&e[0]&&o!==(o=Rl(t[92])+"")&&A(n,o),128&e[0]&&a!==(a=t[93]+"")&&A(i,a)},d(t){t&&m(e)}}}function vh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k,_=Ll(t[89].platform)+"",C=$l(t[89].platform)+"",S=t[89].count+"",D=nt(Object.entries(t[89].contentTypes||{})),P=[];for(let e=0;e<D.length;e+=1)P[e]=xh(Fd(t,D,e));return{c(){e=y("div"),n=y("div"),r=y("span"),i=v(_),s=w(),o=y("span"),a=v(C),l=w(),c=y("span"),u=v("("),d=v(S),h=v(" bookmarks)"),f=w(),x=y("div");for(let t=0;t<P.length;t+=1)P[t].c();k=w(),M(o,"class","font-medium text-sm"),M(c,"class","text-xs text-gray-500"),M(n,"class","flex items-center gap-2"),M(x,"class","flex flex-wrap gap-1"),M(e,"class","space-y-1")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(o,a),p(n,l),p(n,c),p(c,u),p(c,d),p(c,h),p(e,f),p(e,x);for(let t=0;t<P.length;t+=1)P[t]&&P[t].m(x,null);p(e,k)},p(t,e){if(128&e[0]&&_!==(_=Ll(t[89].platform)+"")&&A(i,_),128&e[0]&&C!==(C=$l(t[89].platform)+"")&&A(a,C),128&e[0]&&S!==(S=t[89].count+"")&&A(d,S),128&e[0]){let n;for(D=nt(Object.entries(t[89].contentTypes||{})),n=0;n<D.length;n+=1){const r=Fd(t,D,n);P[n]?P[n].p(r,e):(P[n]=xh(r),P[n].c(),P[n].m(x,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=D.length}},d(t){t&&m(e),b(P,t)}}}function wh(t){let e;function n(t,e){return t[7]?.platforms?yh:bh}let r=n(t),i=r(t);return{c(){e=y("div"),i.c(),M(e,"class","space-y-4")},m(t,n){g(t,e,n),i.m(e,null)},p(t,s){r===(r=n(t))&&i?i.p(t,s):(i.d(1),i=r(t),i&&(i.c(),i.m(e,null)))},d(t){t&&m(e),i.d()}}}function kh(t){let e,n,r,i,s,o,a,l,c,u,d;return n=new dd({props:{title:"Category Distribution",icon:"",subtitle:"Click a segment to filter",$$slots:{default:[_h]},$$scope:{ctx:t}}}),i=new dd({props:{title:"Content Type Mix",icon:"",$$slots:{default:[Ch]},$$scope:{ctx:t}}}),o=new dd({props:{title:"Topic Clusters",icon:"",subtitle:"Most common keywords from your bookmarks",$$slots:{default:[Ah]},$$scope:{ctx:t}}}),l=new dd({props:{title:"Folder Distribution",icon:"",subtitle:"Where your bookmarks live",$$slots:{default:[Ph]},$$scope:{ctx:t}}}),u=new dd({props:{title:"Language Distribution",icon:"",collapsible:!0,collapsed:!0,$$slots:{default:[Th]},$$scope:{ctx:t}}}),{c(){e=y("div"),st(n.$$.fragment),r=w(),st(i.$$.fragment),s=w(),st(o.$$.fragment),a=w(),st(l.$$.fragment),c=w(),st(u.$$.fragment),M(e,"class","grid grid-cols-1 lg:grid-cols-2 gap-6")},m(t,h){g(t,e,h),ot(n,e,null),p(e,r),ot(i,e,null),p(e,s),ot(o,e,null),p(e,a),ot(l,e,null),p(e,c),ot(u,e,null),d=!0},p(t,e){const r={};16384&e[3]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);const s={};16384&e[3]&&(s.$$scope={dirty:e,ctx:t}),i.$set(s);const a={};8&e[0]|16384&e[3]&&(a.$$scope={dirty:e,ctx:t}),o.$set(a);const c={};8&e[0]|16384&e[3]&&(c.$$scope={dirty:e,ctx:t}),l.$set(c);const d={};8&e[0]|16384&e[3]&&(d.$$scope={dirty:e,ctx:t}),u.$set(d)},i(t){d||(tt(n.$$.fragment,t),tt(i.$$.fragment,t),tt(o.$$.fragment,t),tt(l.$$.fragment,t),tt(u.$$.fragment,t),d=!0)},o(t){et(n.$$.fragment,t),et(i.$$.fragment,t),et(o.$$.fragment,t),et(l.$$.fragment,t),et(u.$$.fragment,t),d=!1},d(t){t&&m(e),at(n),at(i),at(o),at(l),at(u)}}}function _h(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="categoryDonutChart"></canvas>',M(n,"class","h-64")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Ch(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="contentTypeChart"></canvas>',M(n,"class","h-64")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Mh(t){let e,n,r,i,s,o,a,l,c,u=t[85].keyword+"",d=t[85].count+"";function h(){return t[38](t[85])}return{c(){e=y("button"),n=v(u),r=w(),i=y("span"),s=v("("),o=v(d),a=v(")"),M(i,"class","text-xs opacity-60 ml-1"),M(e,"class","px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors"),P(e,"font-size",t[86]+"rem")},m(t,u){g(t,e,u),p(e,n),p(e,r),p(e,i),p(i,s),p(i,o),p(i,a),l||(c=_(e,"click",h),l=!0)},p(r,i){t=r,8&i[0]&&u!==(u=t[85].keyword+"")&&A(n,u),8&i[0]&&d!==(d=t[85].count+"")&&A(o,d),8&i[0]&&P(e,"font-size",t[86]+"rem")},d(t){t&&m(e),l=!1,c()}}}function Sh(t){let e;return{c(){e=y("p"),e.textContent="No keywords found. Run enrichment to extract keywords.",M(e,"class","text-gray-500 text-sm")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Ah(t){let e,n,r=nt(t[3].topicClusters.slice(0,25)),i=[];for(let e=0;e<r.length;e+=1)i[e]=Mh(Id(t,r,e));let s=0===t[3].topicClusters.length&&Sh();return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();n=w(),s&&s.c(),M(e,"class","flex flex-wrap gap-2")},m(t,r){g(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);p(e,n),s&&s.m(e,null)},p(t,o){if(16392&o[0]){let s;for(r=nt(t[3].topicClusters.slice(0,25)),s=0;s<r.length;s+=1){const a=Id(t,r,s);i[s]?i[s].p(a,o):(i[s]=Mh(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}0===t[3].topicClusters.length?s||(s=Sh(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&m(e),b(i,t),s&&s.d()}}}function Dh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b=t[82].folder+"",x=t[82].count+"";return{c(){e=y("div"),n=y("div"),r=y("div"),i=y("span"),s=v(b),a=w(),l=y("span"),c=v(x),u=w(),d=y("div"),h=y("div"),f=w(),M(i,"class","text-sm truncate"),M(i,"title",o=t[82].folder),M(l,"class","text-xs text-gray-500"),M(r,"class","flex items-center justify-between mb-1"),M(h,"class","h-full bg-purple-500 rounded-full"),P(h,"width",t[82].percentage+"%"),M(d,"class","w-full bg-gray-100 rounded-full h-2 overflow-hidden"),M(n,"class","flex-1 min-w-0"),M(e,"class","flex items-center gap-2")},m(t,o){g(t,e,o),p(e,n),p(n,r),p(r,i),p(i,s),p(r,a),p(r,l),p(l,c),p(n,u),p(n,d),p(d,h),p(e,f)},p(t,e){8&e[0]&&b!==(b=t[82].folder+"")&&A(s,b),8&e[0]&&o!==(o=t[82].folder)&&M(i,"title",o),8&e[0]&&x!==(x=t[82].count+"")&&A(c,x),8&e[0]&&P(h,"width",t[82].percentage+"%")},d(t){t&&m(e)}}}function Ph(t){let e,n=nt(t[3].folderDistribution),r=[];for(let e=0;e<n.length;e+=1)r[e]=Dh(Bd(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2 insight-scrollable")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(8&i[0]){let s;for(n=nt(t[3].folderDistribution),s=0;s<n.length;s+=1){const o=Bd(t,n,s);r[s]?r[s].p(o,i):(r[s]=Dh(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Eh(t){let e,n,r,i,s,o,a,l,c,u,d=t[79].language+"",h=t[79].count+"",f=t[79].percentage+"";return{c(){e=y("div"),n=y("span"),r=v(d),i=w(),s=y("span"),o=v(h),a=v(" ("),l=v(f),c=v("%)"),u=w(),M(n,"class","text-sm"),M(s,"class","text-sm font-medium"),M(e,"class","flex items-center justify-between")},m(t,d){g(t,e,d),p(e,n),p(n,r),p(e,i),p(e,s),p(s,o),p(s,a),p(s,l),p(s,c),p(e,u)},p(t,e){8&e[0]&&d!==(d=t[79].language+"")&&A(r,d),8&e[0]&&h!==(h=t[79].count+"")&&A(o,h),8&e[0]&&f!==(f=t[79].percentage+"")&&A(l,f)},d(t){t&&m(e)}}}function Th(t){let e,n=nt(t[3].languageDistribution.slice(0,10)),r=[];for(let e=0;e<n.length;e+=1)r[e]=Eh(Rd(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(8&i[0]){let s;for(n=nt(t[3].languageDistribution.slice(0,10)),s=0;s<n.length;s+=1){const o=Rd(t,n,s);r[s]?r[s].p(o,i):(r[s]=Eh(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Oh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,T,O,$,L,R,B,I,j,F,z,N=t[4].stats.totalStale+"",W=t[4].stats.totalCleanupCandidates+"",V=t[4].stats.deadLinksCount+"",H=t[4].stats.totalLowValueDomains+"";return R=new dd({props:{title:"Rediscovery Feed",icon:"",subtitle:"Random old bookmarks you might have forgotten",$$slots:{"header-actions":[Ih],default:[Bh]},$$scope:{ctx:t}}}),I=new dd({props:{title:"Cleanup Candidates",icon:"",variant:"danger",subtitle:"Dead links and old unused bookmarks",$$slots:{"header-actions":[Vh],default:[zh]},$$scope:{ctx:t}}}),F=new dd({props:{title:"Stale Queue",icon:"",variant:"warning",subtitle:"Unread bookmarks older than 30 days",collapsible:!0,$$slots:{default:[Uh]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v(N),o=w(),a=y("div"),a.textContent="Stale bookmarks",l=w(),c=y("div"),u=y("div"),d=v(W),h=w(),f=y("div"),f.textContent="Cleanup candidates",b=w(),x=y("div"),k=y("div"),_=v(V),C=w(),S=y("div"),S.textContent="Dead links",D=w(),P=y("div"),E=y("div"),T=v(H),O=w(),$=y("div"),$.textContent="Low-value domains",L=w(),st(R.$$.fragment),B=w(),st(I.$$.fragment),j=w(),st(F.$$.fragment),M(i,"class","text-2xl font-bold text-yellow-700"),M(a,"class","text-sm text-yellow-600"),M(r,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4"),M(u,"class","text-2xl font-bold text-red-700"),M(f,"class","text-sm text-red-600"),M(c,"class","bg-red-50 border border-red-200 rounded-lg p-4"),M(k,"class","text-2xl font-bold text-gray-700"),M(S,"class","text-sm text-gray-600"),M(x,"class","bg-gray-50 border border-gray-200 rounded-lg p-4"),M(E,"class","text-2xl font-bold text-orange-700"),M($,"class","text-sm text-orange-600"),M(P,"class","bg-orange-50 border border-orange-200 rounded-lg p-4"),M(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),M(e,"class","space-y-6")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(i,s),p(r,o),p(r,a),p(n,l),p(n,c),p(c,u),p(u,d),p(c,h),p(c,f),p(n,b),p(n,x),p(x,k),p(k,_),p(x,C),p(x,S),p(n,D),p(n,P),p(P,E),p(E,T),p(P,O),p(P,$),p(e,L),ot(R,e,null),p(e,B),ot(I,e,null),p(e,j),ot(F,e,null),z=!0},p(t,e){(!z||16&e[0])&&N!==(N=t[4].stats.totalStale+"")&&A(s,N),(!z||16&e[0])&&W!==(W=t[4].stats.totalCleanupCandidates+"")&&A(d,W),(!z||16&e[0])&&V!==(V=t[4].stats.deadLinksCount+"")&&A(_,V),(!z||16&e[0])&&H!==(H=t[4].stats.totalLowValueDomains+"")&&A(T,H);const n={};4112&e[0]|16384&e[3]&&(n.$$scope={dirty:e,ctx:t}),R.$set(n);const r={};8208&e[0]|16384&e[3]&&(r.$$scope={dirty:e,ctx:t}),I.$set(r);const i={};16&e[0]|16384&e[3]&&(i.$$scope={dirty:e,ctx:t}),F.$set(i)},i(t){z||(tt(R.$$.fragment,t),tt(I.$$.fragment,t),tt(F.$$.fragment,t),z=!0)},o(t){et(R.$$.fragment,t),et(I.$$.fragment,t),et(F.$$.fragment,t),z=!1},d(t){t&&m(e),at(R),at(I),at(F)}}}function $h(t){let e,n,r=t[72].description+"";return{c(){e=y("p"),n=v(r),M(e,"class","text-xs text-gray-600 mt-1 line-clamp-2 svelte-12ctnp6")},m(t,r){g(t,e,r),p(e,n)},p(t,e){16&e[0]&&r!==(r=t[72].description+"")&&A(n,r)},d(t){t&&m(e)}}}function Lh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k=t[72].title+"",C=t[72].domain+"",S=pf(t[72].ageInDays)+"",D=t[72].description&&$h(t);function P(){return t[39](t[72])}return{c(){e=y("div"),n=y("div"),r=y("a"),i=v(k),o=w(),a=y("div"),l=v(C),c=v("  "),u=v(S),d=w(),D&&D.c(),h=w(),f=y("button"),f.textContent="",M(r,"href",s=t[72].url),M(r,"target","_blank"),M(r,"rel","noopener noreferrer"),M(r,"class","text-sm font-medium text-gray-900 hover:text-blue-600 line-clamp-1 svelte-12ctnp6"),M(a,"class","text-xs text-gray-500 mt-1"),M(n,"class","flex-1 min-w-0"),M(f,"class","p-2 text-gray-400 hover:text-blue-600 hover:bg-white rounded-lg transition-colors"),M(f,"title","Open in new tab"),M(e,"class","flex items-start gap-3 p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-100")},m(t,s){g(t,e,s),p(e,n),p(n,r),p(r,i),p(n,o),p(n,a),p(a,l),p(a,c),p(a,u),p(n,d),D&&D.m(n,null),p(e,h),p(e,f),b||(x=_(f,"click",P),b=!0)},p(e,o){t=e,16&o[0]&&k!==(k=t[72].title+"")&&A(i,k),16&o[0]&&s!==(s=t[72].url)&&M(r,"href",s),16&o[0]&&C!==(C=t[72].domain+"")&&A(l,C),16&o[0]&&S!==(S=pf(t[72].ageInDays)+"")&&A(u,S),t[72].description?D?D.p(t,o):(D=$h(t),D.c(),D.m(n,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),D&&D.d(),b=!1,x()}}}function Rh(t){let e;return{c(){e=y("p"),e.textContent="No old bookmarks to rediscover",M(e,"class","text-gray-500 text-sm")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Bh(t){let e,n,r=nt(t[4].rediscoveryFeed),i=[];for(let e=0;e<r.length;e+=1)i[e]=Lh(Ld(t,r,e));let s=0===t[4].rediscoveryFeed.length&&Rh();return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();n=w(),s&&s.c(),M(e,"class","space-y-3")},m(t,r){g(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);p(e,n),s&&s.m(e,null)},p(t,o){if(16&o[0]){let s;for(r=nt(t[4].rediscoveryFeed),s=0;s<r.length;s+=1){const a=Ld(t,r,s);i[s]?i[s].p(a,o):(i[s]=Lh(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}0===t[4].rediscoveryFeed.length?s||(s=Rh(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&m(e),b(i,t),s&&s.d()}}}function Ih(t){let e,n,r,i,s,o,a,l;return{c(){e=y("div"),n=y("button"),r=y("span"),i=v(""),o=v("\n              Shuffle"),M(r,"class",s="transform "+(t[12]?"animate-spin":"")),M(n,"class","px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1"),n.disabled=t[12],M(e,"slot","header-actions")},m(s,c){g(s,e,c),p(e,n),p(n,r),p(r,i),p(n,o),a||(l=_(n,"click",t[18]),a=!0)},p(t,e){4096&e[0]&&s!==(s="transform "+(t[12]?"animate-spin":""))&&M(r,"class",s),4096&e[0]&&(n.disabled=t[12])},d(t){t&&m(e),a=!1,l()}}}function jh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P=t[72].title+"",E=t[72].reason+"",T=t[72].domain+"",O=pf(t[72].ageInDays)+"";function $(){return t[40](t[72])}return{c(){e=y("div"),n=y("input"),i=w(),s=y("div"),o=y("div"),a=y("span"),l=v(P),c=w(),u=y("span"),d=v(E),f=w(),b=y("div"),x=v(T),k=v("  "),C=v(O),M(n,"type","checkbox"),n.checked=r=t[13].has(t[72].id),M(n,"class","rounded border-gray-300 text-red-600 focus:ring-red-500"),M(a,"class","text-sm truncate"),M(u,"class",h="px-1.5 py-0.5 text-xs rounded "+(!1===t[72].isAlive?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600")),M(o,"class","flex items-center gap-2"),M(b,"class","text-xs text-gray-500"),M(s,"class","flex-1 min-w-0"),M(e,"class","flex items-center gap-3 p-2 rounded-lg hover:bg-red-50 border border-transparent hover:border-red-200")},m(t,r){g(t,e,r),p(e,n),p(e,i),p(e,s),p(s,o),p(o,a),p(a,l),p(o,c),p(o,u),p(u,d),p(s,f),p(s,b),p(b,x),p(b,k),p(b,C),S||(D=_(n,"change",$),S=!0)},p(e,i){t=e,8208&i[0]&&r!==(r=t[13].has(t[72].id))&&(n.checked=r),16&i[0]&&P!==(P=t[72].title+"")&&A(l,P),16&i[0]&&E!==(E=t[72].reason+"")&&A(d,E),16&i[0]&&h!==(h="px-1.5 py-0.5 text-xs rounded "+(!1===t[72].isAlive?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"))&&M(u,"class",h),16&i[0]&&T!==(T=t[72].domain+"")&&A(x,T),16&i[0]&&O!==(O=pf(t[72].ageInDays)+"")&&A(C,O)},d(t){t&&m(e),S=!1,D()}}}function Fh(t){let e;return{c(){e=y("p"),e.textContent="No cleanup candidates found. Great job keeping things tidy!",M(e,"class","text-gray-500 text-sm")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function zh(t){let e,n,r=nt(t[4].cleanupCandidates),i=[];for(let e=0;e<r.length;e+=1)i[e]=jh($d(t,r,e));let s=0===t[4].cleanupCandidates.length&&Fh();return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();n=w(),s&&s.c(),M(e,"class","space-y-2 insight-scrollable")},m(t,r){g(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);p(e,n),s&&s.m(e,null)},p(t,o){if(532496&o[0]){let s;for(r=nt(t[4].cleanupCandidates),s=0;s<r.length;s+=1){const a=$d(t,r,s);i[s]?i[s].p(a,o):(i[s]=jh(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}0===t[4].cleanupCandidates.length?s||(s=Fh(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&m(e),b(i,t),s&&s.d()}}}function Nh(e){let n,r,i;return{c(){n=y("button"),n.textContent="Select All",M(n,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300")},m(t,s){g(t,n,s),r||(i=_(n,"click",e[20]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}function Wh(t){let e,n,i,s,o,a,l,c,u=t[13].size+"";return{c(){e=y("button"),n=v("Delete "),i=v(u),s=v(" selected"),o=w(),a=y("button"),a.textContent="Deselect",M(e,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(a,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300")},m(r,u){g(r,e,u),p(e,n),p(e,i),p(e,s),g(r,o,u),g(r,a,u),l||(c=[_(e,"click",t[22]),_(a,"click",t[21])],l=!0)},p(t,e){8192&e[0]&&u!==(u=t[13].size+"")&&A(i,u)},d(t){t&&(m(e),m(o),m(a)),l=!1,r(c)}}}function Vh(t){let e;function n(t,e){return t[13].size>0?Wh:Nh}let r=n(t),i=r(t);return{c(){e=y("div"),i.c(),M(e,"slot","header-actions"),M(e,"class","flex gap-2")},m(t,n){g(t,e,n),i.m(e,null)},p(t,s){r===(r=n(t))&&i?i.p(t,s):(i.d(1),i=r(t),i&&(i.c(),i.m(e,null)))},d(t){t&&m(e),i.d()}}}function Hh(t){let e,n,r,i,s,o,a,l,c,u,d=t[72].title+"",h=t[72].domain+"",f=pf(t[72].ageInDays)+"";return{c(){e=y("div"),n=y("div"),r=y("a"),i=v(d),o=w(),a=y("div"),l=v(h),c=v("  "),u=v(f),M(r,"href",s=t[72].url),M(r,"target","_blank"),M(r,"rel","noopener noreferrer"),M(r,"class","text-sm text-gray-900 hover:text-blue-600 truncate block"),M(a,"class","text-xs text-gray-500"),M(n,"class","flex-1 min-w-0"),M(e,"class","flex items-center gap-3 p-2 rounded-lg hover:bg-yellow-50")},m(t,s){g(t,e,s),p(e,n),p(n,r),p(r,i),p(n,o),p(n,a),p(a,l),p(a,c),p(a,u)},p(t,e){16&e[0]&&d!==(d=t[72].title+"")&&A(i,d),16&e[0]&&s!==(s=t[72].url)&&M(r,"href",s),16&e[0]&&h!==(h=t[72].domain+"")&&A(l,h),16&e[0]&&f!==(f=pf(t[72].ageInDays)+"")&&A(u,f)},d(t){t&&m(e)}}}function qh(t){let e,n,r,i,s=t[4].staleQueue.length-20+"";return{c(){e=y("p"),n=v("...and "),r=v(s),i=v(" more"),M(e,"class","text-xs text-gray-500 pt-2")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i)},p(t,e){16&e[0]&&s!==(s=t[4].staleQueue.length-20+"")&&A(r,s)},d(t){t&&m(e)}}}function Uh(t){let e,n,r=nt(t[4].staleQueue.slice(0,20)),i=[];for(let e=0;e<r.length;e+=1)i[e]=Hh(Od(t,r,e));let s=t[4].staleQueue.length>20&&qh(t);return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();n=w(),s&&s.c(),M(e,"class","space-y-2 insight-scrollable")},m(t,r){g(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);p(e,n),s&&s.m(e,null)},p(t,o){if(16&o[0]){let s;for(r=nt(t[4].staleQueue.slice(0,20)),s=0;s<r.length;s+=1){const a=Od(t,r,s);i[s]?i[s].p(a,o):(i[s]=Hh(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}t[4].staleQueue.length>20?s?s.p(t,o):(s=qh(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&m(e),b(i,t),s&&s.d()}}}function Kh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H=t[5].uniqueDomains+"",q=t[5].diversityScore+"",U=t[5].valuableDomains.length+"",K=t[5].ephemeralSources.length+"",Y=t[5].dependencyWarnings.length>0&&Yh(t);I=new dd({props:{title:"Domain Reliability",icon:"",subtitle:"Click to filter by domain",$$slots:{default:[Xh]},$$scope:{ctx:t}}}),F=new dd({props:{title:"Most Valuable Domains",icon:"",subtitle:"Domains you actually use",$$slots:{default:[Zh]},$$scope:{ctx:t}}});let Q=t[5].ephemeralSources.length>0&&tf(t);return W=new dd({props:{title:"Knowledge Map",icon:"",subtitle:"Top 25 domains in your collection",collapsible:!0,$$slots:{default:[of]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v(H),o=w(),a=y("div"),a.textContent="Unique domains",l=w(),c=y("div"),u=y("div"),d=v(q),h=v("%"),f=w(),b=y("div"),b.textContent="Diversity score",x=w(),k=y("div"),_=y("div"),C=v(U),S=w(),D=y("div"),D.textContent="High-value domains",P=w(),E=y("div"),T=y("div"),O=v(K),$=w(),L=y("div"),L.textContent="Unreliable domains",R=w(),Y&&Y.c(),B=w(),st(I.$$.fragment),j=w(),st(F.$$.fragment),z=w(),Q&&Q.c(),N=w(),st(W.$$.fragment),M(i,"class","text-2xl font-bold text-blue-700"),M(a,"class","text-sm text-blue-600"),M(r,"class","bg-blue-50 border border-blue-200 rounded-lg p-4"),M(u,"class","text-2xl font-bold text-green-700"),M(b,"class","text-sm text-green-600"),M(c,"class","bg-green-50 border border-green-200 rounded-lg p-4"),M(_,"class","text-2xl font-bold text-purple-700"),M(D,"class","text-sm text-purple-600"),M(k,"class","bg-purple-50 border border-purple-200 rounded-lg p-4"),M(T,"class","text-2xl font-bold text-red-700"),M(L,"class","text-sm text-red-600"),M(E,"class","bg-red-50 border border-red-200 rounded-lg p-4"),M(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),M(e,"class","space-y-6")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(i,s),p(r,o),p(r,a),p(n,l),p(n,c),p(c,u),p(u,d),p(u,h),p(c,f),p(c,b),p(n,x),p(n,k),p(k,_),p(_,C),p(k,S),p(k,D),p(n,P),p(n,E),p(E,T),p(T,O),p(E,$),p(E,L),p(e,R),Y&&Y.m(e,null),p(e,B),ot(I,e,null),p(e,j),ot(F,e,null),p(e,z),Q&&Q.m(e,null),p(e,N),ot(W,e,null),V=!0},p(t,n){(!V||32&n[0])&&H!==(H=t[5].uniqueDomains+"")&&A(s,H),(!V||32&n[0])&&q!==(q=t[5].diversityScore+"")&&A(d,q),(!V||32&n[0])&&U!==(U=t[5].valuableDomains.length+"")&&A(C,U),(!V||32&n[0])&&K!==(K=t[5].ephemeralSources.length+"")&&A(O,K),t[5].dependencyWarnings.length>0?Y?(Y.p(t,n),32&n[0]&&tt(Y,1)):(Y=Yh(t),Y.c(),tt(Y,1),Y.m(e,B)):Y&&(J(),et(Y,1,1,()=>{Y=null}),Z());const r={};16384&n[3]&&(r.$$scope={dirty:n,ctx:t}),I.$set(r);const i={};32&n[0]|16384&n[3]&&(i.$$scope={dirty:n,ctx:t}),F.$set(i),t[5].ephemeralSources.length>0?Q?(Q.p(t,n),32&n[0]&&tt(Q,1)):(Q=tf(t),Q.c(),tt(Q,1),Q.m(e,N)):Q&&(J(),et(Q,1,1,()=>{Q=null}),Z());const o={};32&n[0]|16384&n[3]&&(o.$$scope={dirty:n,ctx:t}),W.$set(o)},i(t){V||(tt(Y),tt(I.$$.fragment,t),tt(F.$$.fragment,t),tt(Q),tt(W.$$.fragment,t),V=!0)},o(t){et(Y),et(I.$$.fragment,t),et(F.$$.fragment,t),et(Q),et(W.$$.fragment,t),V=!1},d(t){t&&m(e),Y&&Y.d(),at(I),at(F),Q&&Q.d(),at(W)}}}function Yh(t){let e,n;return e=new dd({props:{title:"Concentration Warnings",icon:"",variant:"warning",subtitle:"Domains with >10% of your bookmarks",$$slots:{default:[Gh]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ot(e,t,r),n=!0},p(t,n){const r={};32&n[0]|16384&n[3]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Qh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E=t[69].domain+"",T=t[69].topCategory+"",O=t[69].percentage+"",$=t[69].count+"";function L(){return t[41](t[69])}return{c(){e=y("div"),n=y("div"),r=y("button"),i=v(E),s=w(),o=y("div"),a=v("Category: "),l=v(T),c=w(),u=y("div"),d=y("div"),h=v(O),f=v("%"),b=w(),x=y("div"),k=v($),C=v(" bookmarks"),S=w(),M(r,"class","font-medium text-gray-900 hover:text-blue-600"),M(o,"class","text-xs text-gray-500"),M(d,"class","text-lg font-bold text-yellow-700"),M(x,"class","text-xs text-gray-500"),M(u,"class","text-right"),M(e,"class","flex items-center justify-between p-3 bg-yellow-50 rounded-lg")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(o,a),p(o,l),p(e,c),p(e,u),p(u,d),p(d,h),p(d,f),p(u,b),p(u,x),p(x,k),p(x,C),p(e,S),D||(P=_(r,"click",L),D=!0)},p(e,n){t=e,32&n[0]&&E!==(E=t[69].domain+"")&&A(i,E),32&n[0]&&T!==(T=t[69].topCategory+"")&&A(l,T),32&n[0]&&O!==(O=t[69].percentage+"")&&A(h,O),32&n[0]&&$!==($=t[69].count+"")&&A(k,$)},d(t){t&&m(e),D=!1,P()}}}function Gh(t){let e,n=nt(t[5].dependencyWarnings),r=[];for(let e=0;e<n.length;e+=1)r[e]=Qh(Td(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-3")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(16416&i[0]){let s;for(n=nt(t[5].dependencyWarnings),s=0;s<n.length;s+=1){const o=Td(t,n,s);r[s]?r[s].p(o,i):(r[s]=Qh(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Xh(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="domainReliabilityChart"></canvas>',M(n,"class","h-72")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Jh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P=t[62].domain+"",E=t[62].total+"",T=t[62].totalAccess+"",O=t[62].engagementRate+"";function $(){return t[42](t[62])}return{c(){e=y("div"),n=y("button"),r=v(P),i=w(),s=y("div"),o=y("span"),a=v(E),l=v(" bookmarks"),c=w(),u=y("span"),d=v(T),h=v(" visits"),f=w(),b=y("span"),x=v(O),k=v("% engaged"),C=w(),M(n,"class","text-sm font-medium text-gray-900 hover:text-blue-600"),M(o,"class","text-gray-500"),M(u,"class","text-green-600"),M(b,"class","text-blue-600"),M(s,"class","flex items-center gap-4 text-sm"),M(e,"class","flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(e,i),p(e,s),p(s,o),p(o,a),p(o,l),p(s,c),p(s,u),p(u,d),p(u,h),p(s,f),p(s,b),p(b,x),p(b,k),p(e,C),S||(D=_(n,"click",$),S=!0)},p(e,n){t=e,32&n[0]&&P!==(P=t[62].domain+"")&&A(r,P),32&n[0]&&E!==(E=t[62].total+"")&&A(a,E),32&n[0]&&T!==(T=t[62].totalAccess+"")&&A(d,T),32&n[0]&&O!==(O=t[62].engagementRate+"")&&A(x,O)},d(t){t&&m(e),S=!1,D()}}}function Zh(t){let e,n=nt(t[5].valuableDomains),r=[];for(let e=0;e<n.length;e+=1)r[e]=Jh(Ed(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(16416&i[0]){let s;for(n=nt(t[5].valuableDomains),s=0;s<n.length;s+=1){const o=Ed(t,n,s);r[s]?r[s].p(o,i):(r[s]=Jh(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function tf(t){let e,n;return e=new dd({props:{title:"Ephemeral Sources",icon:"",variant:"danger",subtitle:"Domains with high dead link rates",$$slots:{default:[nf]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ot(e,t,r),n=!0},p(t,n){const r={};32&n[0]|16384&n[3]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function ef(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x=t[62].domain+"",k=t[62].deadRate+"",_=t[62].dead+"",C=t[62].checked+"";return{c(){e=y("div"),n=y("span"),r=v(x),i=w(),s=y("div"),o=y("span"),a=v(k),l=v("% dead"),c=w(),u=y("span"),d=v(_),h=v(" of "),f=v(C),b=w(),M(n,"class","text-sm font-medium text-gray-900"),M(o,"class","text-red-600"),M(u,"class","text-gray-500"),M(s,"class","flex items-center gap-4 text-sm"),M(e,"class","flex items-center justify-between p-2 bg-red-50 rounded-lg")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(e,i),p(e,s),p(s,o),p(o,a),p(o,l),p(s,c),p(s,u),p(u,d),p(u,h),p(u,f),p(e,b)},p(t,e){32&e[0]&&x!==(x=t[62].domain+"")&&A(r,x),32&e[0]&&k!==(k=t[62].deadRate+"")&&A(a,k),32&e[0]&&_!==(_=t[62].dead+"")&&A(d,_),32&e[0]&&C!==(C=t[62].checked+"")&&A(f,C)},d(t){t&&m(e)}}}function nf(t){let e,n=nt(t[5].ephemeralSources),r=[];for(let e=0;e<n.length;e+=1)r[e]=ef(Pd(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(32&i[0]){let s;for(n=nt(t[5].ephemeralSources),s=0;s<n.length;s+=1){const o=Pd(t,n,s);r[s]?r[s].p(o,i):(r[s]=ef(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function rf(t){let e,n,r=t[62].topCategory+"";return{c(){e=y("span"),n=v(r),M(e,"class","px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded")},m(t,r){g(t,e,r),p(e,n)},p(t,e){32&e[0]&&r!==(r=t[62].topCategory+"")&&A(n,r)},d(t){t&&m(e)}}}function sf(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[62].domain+"",b=t[62].total+"",x=t[62].topCategory&&rf(t);function k(){return t[43](t[62])}return{c(){e=y("button"),n=y("div"),r=v(f),i=w(),s=y("div"),o=y("span"),a=v(b),l=v(" bookmarks"),c=w(),x&&x.c(),u=w(),M(n,"class","font-medium text-sm truncate"),M(s,"class","flex items-center gap-2 mt-1 text-xs text-gray-500"),M(e,"class","p-3 bg-gray-50 rounded-lg hover:bg-blue-50 hover:border-blue-200 border border-gray-200 text-left transition-colors")},m(t,f){g(t,e,f),p(e,n),p(n,r),p(e,i),p(e,s),p(s,o),p(o,a),p(o,l),p(s,c),x&&x.m(s,null),p(e,u),d||(h=_(e,"click",k),d=!0)},p(e,n){t=e,32&n[0]&&f!==(f=t[62].domain+"")&&A(r,f),32&n[0]&&b!==(b=t[62].total+"")&&A(a,b),t[62].topCategory?x?x.p(t,n):(x=rf(t),x.c(),x.m(s,null)):x&&(x.d(1),x=null)},d(t){t&&m(e),x&&x.d(),d=!1,h()}}}function of(t){let e,n=nt(t[5].knowledgeMap),r=[];for(let e=0;e<n.length;e+=1)r[e]=sf(Dd(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 insight-scrollable")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(16416&i[0]){let s;for(n=nt(t[5].knowledgeMap),s=0;s<n.length;s+=1){const o=Dd(t,n,s);r[s]?r[s].p(o,i):(r[s]=sf(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function af(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H,q=t[6].avgAgeDays+"",U=t[6].peakHours.join(", ")+"",K=t[6].weekdayVsWeekend.weekday.percentage+"",Y=t[6].weekdayVsWeekend.weekend.percentage+"";return I=new dd({props:{title:"Bookmarking by Hour",icon:"",subtitle:"When do you save bookmarks?",$$slots:{default:[lf]},$$scope:{ctx:t}}}),F=new dd({props:{title:"Bookmarking by Day",icon:"",$$slots:{default:[cf]},$$scope:{ctx:t}}}),N=new dd({props:{title:"Collection Age Distribution",icon:"",subtitle:"How old are your bookmarks?",$$slots:{default:[uf]},$$scope:{ctx:t}}}),V=new dd({props:{title:"Monthly Save Activity",icon:"",subtitle:"Last 12 months",$$slots:{default:[hf]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v(q),o=w(),a=y("div"),a.textContent="Avg age (days)",l=w(),c=y("div"),u=y("div"),d=v(U),h=w(),f=y("div"),f.textContent="Peak hours",b=w(),x=y("div"),k=y("div"),_=v(K),C=v("%"),S=w(),D=y("div"),D.textContent="Weekday saves",P=w(),E=y("div"),T=y("div"),O=v(Y),$=v("%"),L=w(),R=y("div"),R.textContent="Weekend saves",B=w(),st(I.$$.fragment),j=w(),st(F.$$.fragment),z=w(),st(N.$$.fragment),W=w(),st(V.$$.fragment),M(i,"class","text-2xl font-bold text-blue-700"),M(a,"class","text-sm text-blue-600"),M(r,"class","bg-blue-50 border border-blue-200 rounded-lg p-4"),M(u,"class","text-2xl font-bold text-green-700"),M(f,"class","text-sm text-green-600"),M(c,"class","bg-green-50 border border-green-200 rounded-lg p-4"),M(k,"class","text-2xl font-bold text-purple-700"),M(D,"class","text-sm text-purple-600"),M(x,"class","bg-purple-50 border border-purple-200 rounded-lg p-4"),M(T,"class","text-2xl font-bold text-orange-700"),M(R,"class","text-sm text-orange-600"),M(E,"class","bg-orange-50 border border-orange-200 rounded-lg p-4"),M(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),M(e,"class","space-y-6")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(i,s),p(r,o),p(r,a),p(n,l),p(n,c),p(c,u),p(u,d),p(c,h),p(c,f),p(n,b),p(n,x),p(x,k),p(k,_),p(k,C),p(x,S),p(x,D),p(n,P),p(n,E),p(E,T),p(T,O),p(T,$),p(E,L),p(E,R),p(e,B),ot(I,e,null),p(e,j),ot(F,e,null),p(e,z),ot(N,e,null),p(e,W),ot(V,e,null),H=!0},p(t,e){(!H||64&e[0])&&q!==(q=t[6].avgAgeDays+"")&&A(s,q),(!H||64&e[0])&&U!==(U=t[6].peakHours.join(", ")+"")&&A(d,U),(!H||64&e[0])&&K!==(K=t[6].weekdayVsWeekend.weekday.percentage+"")&&A(_,K),(!H||64&e[0])&&Y!==(Y=t[6].weekdayVsWeekend.weekend.percentage+"")&&A(O,Y);const n={};16384&e[3]&&(n.$$scope={dirty:e,ctx:t}),I.$set(n);const r={};16384&e[3]&&(r.$$scope={dirty:e,ctx:t}),F.$set(r);const i={};16384&e[3]&&(i.$$scope={dirty:e,ctx:t}),N.$set(i);const o={};64&e[0]|16384&e[3]&&(o.$$scope={dirty:e,ctx:t}),V.$set(o)},i(t){H||(tt(I.$$.fragment,t),tt(F.$$.fragment,t),tt(N.$$.fragment,t),tt(V.$$.fragment,t),H=!0)},o(t){et(I.$$.fragment,t),et(F.$$.fragment,t),et(N.$$.fragment,t),et(V.$$.fragment,t),H=!1},d(t){t&&m(e),at(I),at(F),at(N),at(V)}}}function lf(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="hourlyChart"></canvas>',M(n,"class","h-48")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function cf(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="weekdayChart"></canvas>',M(n,"class","h-48")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function uf(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="ageDistributionChart"></canvas>',M(n,"class","h-56")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function df(t){let e,n,r,i,s,o,a,l,c,u,d=t[58].monthLabel+"",h=t[58].count+"";return{c(){e=y("div"),n=y("span"),r=v(d),i=w(),s=y("div"),o=y("div"),a=w(),l=y("span"),c=v(h),u=w(),M(n,"class","text-xs text-gray-500 w-16"),M(o,"class","h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full"),P(o,"width",(t[59]>0?t[58].count/t[59]*100:0)+"%"),M(s,"class","flex-1 bg-gray-100 rounded-full h-4 overflow-hidden"),M(l,"class","text-xs font-medium text-gray-700 w-10 text-right"),M(e,"class","flex items-center gap-3")},m(t,d){g(t,e,d),p(e,n),p(n,r),p(e,i),p(e,s),p(s,o),p(e,a),p(e,l),p(l,c),p(e,u)},p(t,e){64&e[0]&&d!==(d=t[58].monthLabel+"")&&A(r,d),64&e[0]&&P(o,"width",(t[59]>0?t[58].count/t[59]*100:0)+"%"),64&e[0]&&h!==(h=t[58].count+"")&&A(c,h)},d(t){t&&m(e)}}}function hf(t){let e,n=nt(t[6].monthlyCreationTrend),r=[];for(let e=0;e<n.length;e+=1)r[e]=df(Ad(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(64&i[0]){let s;for(n=nt(t[6].monthlyCreationTrend),s=0;s<n.length;s+=1){const o=Ad(t,n,s);r[s]?r[s].p(o,i):(r[s]=df(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function ff(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=nt(t[15]),C=[];for(let e=0;e<k.length;e+=1)C[e]=Hd(Vd(t,k,e));const S=[Ud,qd],A=[];function D(t,e){return t[0]?0:1}return u=D(t),d=A[u]=S[u](t),{c(){e=y("div"),n=y("div");for(let t=0;t<C.length;t+=1)C[t].c();r=w(),i=y("button"),s=y("span"),o=v(""),l=v("\n      Refresh"),c=w(),d.c(),M(s,"class",a="transform "+(t[0]?"animate-spin":"")),M(i,"class","ml-auto px-3 py-2 text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1"),i.disabled=t[0],M(n,"class","flex flex-wrap gap-2 border-b border-gray-200 pb-2"),M(e,"class","space-y-6")},m(a,d){g(a,e,d),p(e,n);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(n,null);p(n,r),p(n,i),p(i,s),p(s,o),p(i,l),p(e,c),A[u].m(e,null),h=!0,f||(x=_(i,"click",t[16]),f=!0)},p(t,o){if(163842&o[0]){let e;for(k=nt(t[15]),e=0;e<k.length;e+=1){const i=Vd(t,k,e);C[e]?C[e].p(i,o):(C[e]=Hd(i),C[e].c(),C[e].m(n,r))}for(;e<C.length;e+=1)C[e].d(1);C.length=k.length}(!h||1&o[0]&&a!==(a="transform "+(t[0]?"animate-spin":"")))&&M(s,"class",a),(!h||1&o[0])&&(i.disabled=t[0]);let l=u;u=D(t),u===l?A[u].p(t,o):(J(),et(A[l],1,1,()=>{A[l]=null}),Z(),d=A[u],d?d.p(t,o):(d=A[u]=S[u](t),d.c()),tt(d,1),d.m(e,null))},i(t){h||(tt(d),h=!0)},o(t){et(d),h=!1},d(t){t&&m(e),b(C,t),A[u].d(),f=!1,x()}}}function pf(t){return t<1?"Today":1===t?"1 day ago":t<7?`${t} days ago`:t<30?`${Math.floor(t/7)} weeks ago`:t<365?`${Math.floor(t/30)} months ago`:`${Math.floor(t/365)} years ago`}function gf(t,e=!1){const n=e?100-t:t;return n>=70?"text-green-600":n>=40?"text-yellow-600":"text-red-600"}const mf=t=>t.target.parentElement.style.display="none";function bf(t,e,n){js.register(...ja);const r=I();let i=!0,s="health",o=null,a=null,l=null,c=null,u=null,d=null,h=null,f=null,p=null,g=null,m=null,b=null,y=null,x=null,v=null,w=null,k=null,_=!1,C=new Set;async function M(){n(0,i=!0);try{const[t,e,r,i,s,m,b,y,x,v]=await Promise.all([bd(),yd(),xd(),vd(),wd(),kd(),Cd(15),_d(),Md(24),Sd()]);n(2,o=t),n(3,a=e),n(4,l=r),n(5,c=i),n(6,u=s),n(7,d=m),n(8,h=b),n(9,f=y),n(10,p=x),n(11,g=v),setTimeout(()=>{S()},100)}catch(t){console.error("Error loading insights:",t)}finally{n(0,i=!1)}}function S(){!function(){const t=document.getElementById("categoryDonutChart");if(!t||!a?.categoryBreakdown)return;m&&m.destroy();const e=a.categoryBreakdown.slice(0,8),n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#6B7280"];m=new js(t,{type:"doughnut",data:{labels:e.map(t=>t.category),datasets:[{data:e.map(t=>t.count),backgroundColor:n,borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:8,font:{size:11}}},tooltip:{callbacks:{label:t=>`${t.label}: ${t.raw} (${e[t.dataIndex].percentage}%)`}}},onClick:(t,n)=>{if(n.length>0){const t=e[n[0].index].category;r("filterByCategory",{category:t})}}}})}(),function(){const t=document.getElementById("contentTypeChart");if(!t||!a?.contentTypeMix)return;b&&b.destroy();const e=a.contentTypeMix,n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#6B7280"];b=new js(t,{type:"bar",data:{labels:e.map(t=>t.type.charAt(0).toUpperCase()+t.type.slice(1)),datasets:[{label:"Bookmarks",data:e.map(t=>t.count),backgroundColor:n.slice(0,e.length),borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,grid:{display:!1}},y:{grid:{display:!1}}}}})}(),function(){const t=document.getElementById("ageDistributionChart");if(!t||!u?.ageDistribution)return;y&&y.destroy();const e=u.ageDistribution;y=new js(t,{type:"bar",data:{labels:e.map(t=>t.period),datasets:[{label:"Bookmarks",data:e.map(t=>t.count),backgroundColor:e.map((t,e)=>{const n=.3+.1*e;return`rgba(59, 130, 246, ${Math.min(n,.9)})`}),borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>`${t.raw} bookmarks (${e[t.dataIndex].percentage}%)`}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#f3f4f6"}}}}})}(),function(){const t=document.getElementById("hourlyChart");if(!t||!u?.bookmarkingHours)return;x&&x.destroy();const e=u.bookmarkingHours,n=Math.max(...e.map(t=>t.count));x=new js(t,{type:"bar",data:{labels:e.map(t=>t.hour),datasets:[{label:"Bookmarks",data:e.map(t=>t.count),backgroundColor:e.map(t=>`rgba(16, 185, 129, ${.2+.7*(t.count/n)})`),borderRadius:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:t=>`${t[0].label}:00 - ${t[0].label}:59`,label:t=>`${t.raw} bookmarks saved`}}},scales:{x:{grid:{display:!1},ticks:{callback:(t,e)=>e%3==0?`${e}h`:"",maxRotation:0}},y:{beginAtZero:!0,grid:{color:"#f3f4f6"}}}}})}(),function(){const t=document.getElementById("weekdayChart");if(!t||!u?.dayOfWeekDistribution)return;v&&v.destroy();const e=u.dayOfWeekDistribution,n=["#EF4444","#3B82F6","#3B82F6","#3B82F6","#3B82F6","#3B82F6","#EF4444"];v=new js(t,{type:"bar",data:{labels:e.map(t=>t.dayName.slice(0,3)),datasets:[{label:"Bookmarks",data:e.map(t=>t.count),backgroundColor:n,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#f3f4f6"}}}}})}(),function(){const t=document.getElementById("domainReliabilityChart");if(!t||!c?.reliabilityScores)return;w&&w.destroy();const e=c.reliabilityScores.slice(0,10);w=new js(t,{type:"bar",data:{labels:e.map(t=>t.domain.length>20?t.domain.slice(0,20)+"...":t.domain),datasets:[{label:"Reliability %",data:e.map(t=>t.reliabilityScore),backgroundColor:e.map(t=>t.reliabilityScore>=80?"#10B981":t.reliabilityScore>=50?"#F59E0B":"#EF4444"),borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>`${t.raw}% alive (${e[t.dataIndex].dead} dead of ${e[t.dataIndex].checked})`}}},scales:{x:{beginAtZero:!0,max:100,grid:{color:"#f3f4f6"},ticks:{callback:t=>t+"%"}},y:{grid:{display:!1}}},onClick:(t,n)=>{if(n.length>0){const t=e[n[0].index].domain;r("filterByDomain",{domain:t})}}}})}(),function(){const t=document.getElementById("platformDonutChart");if(!t||!d?.platforms)return;k&&k.destroy();const e=d.platforms.slice(0,8),n={youtube:"#FF0000",github:"#24292F",medium:"#00AB6C",devto:"#0A0A0A",substack:"#FF6719",twitter:"#1DA1F2",reddit:"#FF4500",stackoverflow:"#F48024",npm:"#CB3837",other:"#6B7280"};k=new js(t,{type:"doughnut",data:{labels:e.map(t=>$l(t.platform)),datasets:[{data:e.map(t=>t.count),backgroundColor:e.map(t=>n[t.platform]||n.other),borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:8,font:{size:11}}},tooltip:{callbacks:{label:t=>`${t.label}: ${t.raw} (${e[t.dataIndex].percentage}%)`}}},onClick:(t,n)=>{if(n.length>0){const t=e[n[0].index].platform;r("filterByPlatform",{platform:t})}}}})}()}function A(t){C.has(t)?C.delete(t):C.add(t),n(13,C)}B(async()=>{await M()});return[i,s,o,a,l,c,u,d,h,f,p,g,_,C,r,[{id:"health",label:"Health",icon:""},{id:"platforms",label:"Platforms",icon:""},{id:"content",label:"Content",icon:""},{id:"actions",label:"Actions",icon:""},{id:"domains",label:"Domains",icon:""},{id:"time",label:"Time",icon:""}],M,S,async function(){n(12,_=!0);try{const t=await xd();n(4,l={...l,rediscoveryFeed:t.rediscoveryFeed})}finally{n(12,_=!1)}},A,function(){l?.cleanupCandidates&&(l.cleanupCandidates.forEach(t=>C.add(t.id)),n(13,C))},function(){C.clear(),n(13,C)},function(){const t=Array.from(C);r("deleteBookmarks",{ids:t}),C.clear(),n(13,C)},t=>{n(1,s=t.id),setTimeout(S,100)},()=>r("filterByAccessed",{accessed:!0}),t=>"Enter"===t.key&&r("filterByAccessed",{accessed:!0}),()=>r("filterByStale"),t=>"Enter"===t.key&&r("filterByStale"),()=>r("filterByDead"),t=>"Enter"===t.key&&r("filterByDead"),()=>r("filterByUnenriched"),t=>"Enter"===t.key&&r("filterByUnenriched"),()=>r("filterByUncategorized"),t=>"Enter"===t.key&&r("filterByUncategorized"),()=>r("showDuplicates"),t=>"Enter"===t.key&&r("showDuplicates"),t=>r("filterByCreator",{creator:t.creator}),t=>r("filterByRepo",{repo:t.fullName}),t=>r("searchQuery",{query:t.keyword}),t=>{return e=t.url,void window.open(e,"_blank");var e},t=>A(t.id),t=>r("filterByDomain",{domain:t.domain}),t=>r("filterByDomain",{domain:t.domain}),t=>r("filterByDomain",{domain:t.domain})]}class yf extends ut{constructor(t){super(),ct(this,t,bf,ff,s,{},null,[-1,-1,-1,-1])}}
/**!
 * FlexSearch.js v0.8.212 (Bundle/Module)
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/flexsearch
 */var xf;function vf(t,e,n){const r=typeof n,i=typeof t;if("undefined"!==r){if("undefined"!==i){if(n){if("function"===i&&r===i)return function(e){return t(n(e))};if((e=t.constructor)===n.constructor){if(e===Array)return n.concat(t);if(e===Map){var s=new Map(n);for(var o of t)s.set(o[0],o[1]);return s}if(e===Set){for(s of(o=new Set(n),t.values()))o.add(s);return o}}}return t}return n}return"undefined"===i?e:t}function wf(t,e){return void 0===t?e:t}function kf(){return Object.create(null)}function _f(t){return"string"==typeof t}function Cf(t){return"object"==typeof t}function Mf(t,e){if(_f(e))t=t[e];else for(let n=0;t&&n<e.length;n++)t=t[e[n]];return t}const Sf=/[^\p{L}\p{N}]+/u,Af=/(\d{3})/g,Df=/(\D)(\d{3})/g,Pf=/(\d{3})(\D)/g,Ef=/[\u0300-\u036f]/g;function Tf(t={}){if(!this||this.constructor!==Tf)return new Tf(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}function Of(t){t.F=null,t.B.clear(),t.D.clear()}function $f(t,e,n){n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):n=t),n&&(t=n.query||t,e=n.limit||e);let r=""+(e||0);n&&(r+=(n.offset||0)+!!n.context+!!n.suggest+(!1!==n.resolve)+(n.resolution||this.resolution)+(n.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new Lf);let i=this.cache.get(t+r);if(!i){const s=n&&n.cache;s&&(n.cache=!1),i=this.search(t,e,n),s&&(n.cache=s),this.cache.set(t+r,i)}return i}function Lf(t){this.limit=t&&!0!==t?t:1e3,this.cache=new Map,this.h=""}(xf=Tf.prototype).assign=function(t){this.normalize=vf(t.normalize,!0,this.normalize);let e,n=t.include,r=n||t.exclude||t.split;if(r||""===r){if("object"==typeof r&&r.constructor!==RegExp){let t="";e=!n,n||(t+="\\p{Z}"),r.letter&&(t+="\\p{L}"),r.number&&(t+="\\p{N}",e=!!n),r.symbol&&(t+="\\p{S}"),r.punctuation&&(t+="\\p{P}"),r.control&&(t+="\\p{C}"),(r=r.char)&&(t+="object"==typeof r?r.join(""):r);try{this.split=new RegExp("["+(n?"^":"")+t+"]+","u")}catch(t){this.split=/\s+/}}else this.split=r,e=!1===r||"a1a".split(r).length<2;this.numeric=vf(t.numeric,e)}else{try{this.split=vf(this.split,Sf)}catch(t){this.split=/\s+/}this.numeric=vf(t.numeric,vf(this.numeric,!0))}if(this.prepare=vf(t.prepare,null,this.prepare),this.finalize=vf(t.finalize,null,this.finalize),r=t.filter,this.filter="function"==typeof r?r:vf(r&&new Set(r),null,this.filter),this.dedupe=vf(t.dedupe,!0,this.dedupe),this.matcher=vf((r=t.matcher)&&new Map(r),null,this.matcher),this.mapper=vf((r=t.mapper)&&new Map(r),null,this.mapper),this.stemmer=vf((r=t.stemmer)&&new Map(r),null,this.stemmer),this.replacer=vf(t.replacer,null,this.replacer),this.minlength=vf(t.minlength,1,this.minlength),this.maxlength=vf(t.maxlength,1024,this.maxlength),this.rtl=vf(t.rtl,!1,this.rtl),(this.cache=r=vf(t.cache,!0,this.cache))&&(this.F=null,this.L="number"==typeof r?r:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const t of this.matcher.keys())this.h+=(this.h?"|":"")+t;if(this.stemmer)for(const t of this.stemmer.keys())this.A+=(this.A?"|":"")+t;return this},xf.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&Of(this),this},xf.addFilter=function(t){return"function"==typeof t?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&Of(this),this},xf.addMapper=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length>1?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&Of(this),this)},xf.addMatcher=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&Of(this),this)},xf.addReplacer=function(t,e){return"string"==typeof t?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&Of(this),this)},xf.encode=function(t,e){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(Of,50,this);this.normalize&&(t="function"==typeof this.normalize?this.normalize(t):Ef?t.normalize("NFKD").replace(Ef,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(Df,"$1 $2").replace(Pf,"$1 $2").replace(Af,"$1 "));const n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let r,i,s=[],o=kf(),a=this.split||""===this.split?t.split(this.split):[t];for(let t,c,u=0;u<a.length;u++)if((t=c=a[u])&&!(t.length<this.minlength||t.length>this.maxlength)){if(e){if(o[t])continue;o[t]=1}else{if(r===t)continue;r=t}if(n)s.push(t);else if(!this.filter||("function"==typeof this.filter?this.filter(t):!this.filter.has(t))){if(this.cache&&t.length<=this.I)if(this.F){var l=this.D.get(t);if(l||""===l){l&&s.push(l);continue}}else this.F=setTimeout(Of,50,this);if(this.stemmer){let e;for(this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));e!==t&&t.length>2;)e=t,t=t.replace(this.K,t=>this.stemmer.get(t))}if(t&&(this.mapper||this.dedupe&&t.length>1)){l="";for(let e,n,r=0,i="";r<t.length;r++)e=t.charAt(r),e===i&&this.dedupe||((n=this.mapper&&this.mapper.get(e))||""===n?n===i&&this.dedupe||!(i=n)||(l+=n):l+=i=e);t=l}if(this.matcher&&t.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),t=t.replace(this.J,t=>this.matcher.get(t))),t&&this.replacer)for(l=0;t&&l<this.replacer.length;l+=2)t=t.replace(this.replacer[l],this.replacer[l+1]);if(this.cache&&c.length<=this.I&&(this.D.set(c,t),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),t){if(t!==c)if(e){if(o[t])continue;o[t]=1}else{if(i===t)continue;i=t}s.push(t)}}}return this.finalize&&(s=this.finalize(s)||s),this.cache&&t.length<=this.H&&(this.B.set(t,s),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),s},Lf.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},Lf.prototype.get=function(t){const e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e},Lf.prototype.remove=function(t){for(const e of this.cache){const n=e[0];e[1].includes(t)&&this.cache.delete(n)}},Lf.prototype.clear=function(){this.cache.clear(),this.h=""};const Rf={normalize:!1,numeric:!1,dedupe:!1},Bf={},If=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),jf=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Ff=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],zf={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,"":2,d:3,t:3,l:4,m:5,n:5,r:6};var Nf={Exact:Rf,Default:Bf,Normalize:Bf,LatinBalance:{mapper:If},LatinAdvanced:{mapper:If,matcher:jf,replacer:Ff},LatinExtra:{mapper:If,replacer:Ff.concat([/(?!^)[aeo]/g,""]),matcher:jf},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let n=0;n<t.length;n++){var e=t[n];let r=e.charAt(0),i=zf[r];for(let t,n=1;n<e.length&&(t=e.charAt(n),"h"===t||"w"===t||!(t=zf[t])||t===i||(r+=t,i=t,4!==r.length));n++);t[n]=r}}},CJK:{split:""},LatinExact:Rf,LatinDefault:Bf,LatinSimple:Bf};function Wf(t,e,n,r){let i=[];for(let s,o=0;o<t.index.length;o++)if(s=t.index[o],e>=s.length)e-=s.length;else{const o=(e=s[r?"splice":"slice"](e,n)).length;if(o&&(i=i.length?i.concat(e):e,n-=o,r&&(t.length-=o),!n))break;e=0}return i}function Vf(t){if(!this||this.constructor!==Vf)return new Vf(t);this.index=t?[t]:[],this.length=t?t.length:0;const e=this;return new Proxy([],{get:(t,n)=>"length"===n?e.length:"push"===n?function(t){e.index[e.index.length-1].push(t),e.length++}:"pop"===n?function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()}:"indexOf"===n?function(t){let n=0;for(let r,i,s=0;s<e.index.length;s++){if(r=e.index[s],i=r.indexOf(t),i>=0)return n+i;n+=r.length}return-1}:"includes"===n?function(t){for(let n=0;n<e.index.length;n++)if(e.index[n].includes(t))return!0;return!1}:"slice"===n?function(t,n){return Wf(e,t||0,n||e.length,!1)}:"splice"===n?function(t,n){return Wf(e,t||0,n||e.length,!0)}:"constructor"===n?Array:"symbol"!=typeof n?(t=e.index[n/2**31|0])&&t[n]:void 0,set:(t,n,r)=>(t=n/2**31|0,(e.index[t]||(e.index[t]=[]))[n]=r,e.length++,!0)})}function Hf(t=8){if(!this||this.constructor!==Hf)return new Hf(t);this.index=kf(),this.h=[],this.size=0,t>32?(this.B=Kf,this.A=BigInt(t)):(this.B=Uf,this.A=t)}function qf(t=8){if(!this||this.constructor!==qf)return new qf(t);this.index=kf(),this.h=[],this.size=0,t>32?(this.B=Kf,this.A=BigInt(t)):(this.B=Uf,this.A=t)}function Uf(t){let e=2**this.A-1;if("number"==typeof t)return t&e;let n=0,r=this.A+1;for(let i=0;i<t.length;i++)n=(n*r^t.charCodeAt(i))&e;return 32===this.A?n+2**31:n}function Kf(t){let e=BigInt(2)**this.A-BigInt(1);var n=typeof t;if("bigint"===n)return t&e;if("number"===n)return BigInt(t)&e;n=BigInt(0);let r=this.A+BigInt(1);for(let i=0;i<t.length;i++)n=(n*r^BigInt(t.charCodeAt(i)))&e;return n}let Yf,Qf,Gf,Xf,Jf;async function Zf(t){var e=(t=t.data).task;const n=t.id;let r=t.args;if("init"===e)Qf=t.options||{},(e=t.factory)?(Function("return "+e)()(self),Yf=new self.FlexSearch.Index(Qf),delete self.FlexSearch):Yf=new Vp(Qf),postMessage({id:n});else{let i;"export"===e&&(r[1]?(r[0]=Qf.export,r[2]=0,r[3]=1):r=null),"import"===e?r[0]&&(t=await Qf.import.call(Yf,r[0]),Yf.import(r[0],t)):((i=r&&Yf[e].apply(Yf,r))&&i.then&&(i=await i),i&&i.await&&(i=await i.await),"search"===e&&i.result&&(i=i.result)),postMessage("search"===e?{id:n,msg:i}:{id:n})}}function tp(t){np.call(t,"add"),np.call(t,"append"),np.call(t,"search"),np.call(t,"update"),np.call(t,"remove"),np.call(t,"searchCache")}function ep(){Gf=Jf=0}function np(t){this[t+"Async"]=function(){const e=arguments;var n=e[e.length-1];let r;if("function"==typeof n&&(r=n,delete e[e.length-1]),Gf?Jf||(Jf=Date.now()-Xf>=this.priority*this.priority*3):(Gf=setTimeout(ep,0),Xf=Date.now()),Jf){const n=this;return new Promise(r=>{setTimeout(function(){r(n[t+"Async"].apply(n,e))},0)})}const i=this[t].apply(this,e);return n=i.then?i:new Promise(t=>t(i)),r&&n.then(r),n}}Vf.prototype.clear=function(){this.index.length=0},Vf.prototype.push=function(){},Hf.prototype.get=function(t){const e=this.index[this.B(t)];return e&&e.get(t)},Hf.prototype.set=function(t,e){var n=this.B(t);let r=this.index[n];r?(n=r.size,r.set(t,e),(n-=r.size)&&this.size++):(this.index[n]=r=new Map([[t,e]]),this.h.push(r),this.size++)},qf.prototype.add=function(t){var e=this.B(t);let n=this.index[e];n?(e=n.size,n.add(t),(e-=n.size)&&this.size++):(this.index[e]=n=new Set([t]),this.h.push(n),this.size++)},(xf=Hf.prototype).has=qf.prototype.has=function(t){const e=this.index[this.B(t)];return e&&e.has(t)},xf.delete=qf.prototype.delete=function(t){const e=this.index[this.B(t)];e&&e.delete(t)&&this.size--},xf.clear=qf.prototype.clear=function(){this.index=kf(),this.h=[],this.size=0},xf.values=qf.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e},xf.keys=qf.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e},xf.entries=qf.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};let rp=0;function ip(t={},e){function n(n){function o(t){const e=(t=t.data||t).id,n=e&&s.h[e];n&&(n(t.msg),delete s.h[e])}if(this.worker=n,this.h=kf(),this.worker)return i?this.worker.on("message",o):this.worker.onmessage=o,t.config?new Promise(function(e){rp>1e9&&(rp=0),s.h[++rp]=function(){e(s)},s.worker.postMessage({id:rp,task:"init",factory:r,options:t})}):(this.priority=t.priority||4,this.encoder=e||null,this.worker.postMessage({task:"init",factory:r,options:t}),this)}if(!this||this.constructor!==ip)return new ip(t);let r="undefined"!=typeof self?self._factory:"undefined"!=typeof window?window._factory:null;r&&(r=r.toString());const i="undefined"==typeof window,s=this,o=function(t,e,n){return e?"undefined"!=typeof module?new(require("worker_threads").Worker)(__dirname+"/worker/node.js"):Promise.resolve().then(function(){return ey}).then(function(t){return new t.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Zf.toString()],{type:"text/javascript"}))):new window.Worker("string"==typeof n?n:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}(r,i,t.worker);return o.then?o.then(function(t){return n.call(s,t)}):n.call(this,o)}function sp(t){ip.prototype[t]=function(){const e=this,n=[].slice.call(arguments);var r=n[n.length-1];let i;return"function"==typeof r&&(i=r,n.pop()),r=new Promise(function(r){"export"===t&&"function"==typeof n[0]&&(n[0]=null),rp>1e9&&(rp=0),e.h[++rp]=r,e.worker.postMessage({task:t,id:rp,args:n})}),i?(r.then(i),this):r}}function op(t,e,n,r,i,s){if(t=t[i],r===n.length-1)e[i]=s||t;else if(t)if(t.constructor===Array)for(e=e[i]=Array(t.length),i=0;i<t.length;i++)op(t,e,n,r,i);else e=e[i]||(e[i]=kf()),i=n[++r],op(t,e,n,r,i)}function ap(t,e,n,r,i,s,o,a){if(t=t[o])if(r===e.length-1){if(t.constructor===Array){if(n[r]){for(e=0;e<t.length;e++)i.add(s,t[e],!0,!0);return}t=t.join(" ")}i.add(s,t,a,!0)}else if(t.constructor===Array)for(o=0;o<t.length;o++)ap(t,e,n,r,i,s,o,a);else o=e[++r],ap(t,e,n,r,i,s,o,a)}function lp(t,e,n,r){if(!t.length)return t;if(1===t.length)return t=t[0],t=n||t.length>e?t.slice(n,n+e):t,r?_p.call(this,t):t;let i=[];for(let s,o,a=0;a<t.length;a++)if((s=t[a])&&(o=s.length)){if(n){if(n>=o){n-=o;continue}s=s.slice(n,n+e),o=s.length,n=0}if(o>e&&(s=s.slice(0,e),o=e),!i.length&&o>=e)return r?_p.call(this,s):s;if(i.push(s),!(e-=o))break}return i=i.length>1?[].concat.apply([],i):i[0],r?_p.call(this,i):i}function cp(t,e,n,r){var i=r[0];if(i[0]&&i[0].query)return t[e].apply(t,i);if(!("and"!==e&&"not"!==e||t.result.length||t.await||i.suggest))return r.length>1&&(i=r[r.length-1]),(r=i.resolve)?t.await||t.result:t;let s,o,a,l,c,u=[],d=0,h=0;for(e=0;e<r.length;e++)if(i=r[e]){var f=void 0;if(i.constructor===mp)f=i.await||i.result;else if(i.then||i.constructor===Array)f=i;else{d=i.limit||0,h=i.offset||0,a=i.suggest,o=i.resolve,s=((l=i.highlight||t.highlight)||i.enrich)&&o,f=i.queue;let n=i.async||f,r=i.index,p=i.query;if(r?t.index||(t.index=r):r=t.index,p||i.tag){const s=i.field||i.pluck;if(s&&(!p||t.query&&!l||(t.query=p,t.field=s,t.highlight=l),r=r.index.get(s)),f&&(c||t.await)){let s;c=1;const o=t.C.length,a=new Promise(function(t){s=t});(function(e,r){a.h=function(){r.index=null,r.resolve=!1;let i=n?e.searchAsync(r):e.search(r);return i.then?i.then(function(e){return t.C[o]=e=e.result||e,s(e),e}):(i=i.result||i,s(i),i)}})(r,Object.assign({},i)),t.C.push(a),u[e]=a;continue}i.resolve=!1,i.index=null,f=n?r.searchAsync(i):r.search(i),i.resolve=o,i.index=r}else if(i.and)f=up(i,"and",r);else if(i.or)f=up(i,"or",r);else if(i.not)f=up(i,"not",r);else{if(!i.xor)continue;f=up(i,"xor",r)}}f.await?(c=1,f=f.await):f.then?(c=1,f=f.then(function(t){return t.result||t})):f=f.result||f,u[e]=f}if(c&&!t.await&&(t.await=new Promise(function(e){t.return=e})),c){const e=Promise.all(u).then(function(r){for(let i=0;i<t.C.length;i++)if(t.C[i]===e){t.C[i]=function(){return n.call(t,r,d,h,s,o,a,l)};break}bp(t)});t.C.push(e)}else{if(!t.await)return n.call(t,u,d,h,s,o,a,l);t.C.push(function(){return n.call(t,u,d,h,s,o,a,l)})}return o?t.await||t.result:t}function up(t,e,n){const r=(t=t[e])[0]||t;return r.index||(r.index=n),n=new mp(r),t.length>1&&(n=n[e].apply(n,t.slice(1))),n}function dp(t,e,n,r,i,s,o){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=xp(t,e,n,!1,this.h),n=0)),i&&(this.await=null),i?this.resolve(e,n,r,o):this}function hp(t,e,n,r,i,s,o){if(!s&&!this.result.length)return i?this.result:this;let a;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let r=0;for(let e,n,i=0;i<t.length;i++)if((e=t[i])&&(n=e.length))r<n&&(r=n);else if(!s){r=0;break}r?(this.result=yp(t,r,e,n,s,this.h,i),a=!0):this.result=[]}else s||(this.result=t);return i&&(this.await=null),i?this.resolve(e,n,r,o,a):this}function fp(t,e,n,r,i,s,o){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{s=n;var a=this.h;const r=[],o=kf();let l=0;for(let e,n=0;n<t.length;n++)if(e=t[n]){l<e.length&&(l=e.length);for(let t,n=0;n<e.length;n++)if(t=e[n])for(let e,n=0;n<t.length;n++)e=t[n],o[e]=o[e]?2:1}for(let n,c=0,u=0;c<l;c++)for(let l,d=0;d<t.length;d++)if((l=t[d])&&(n=l[c]))for(let l,h=0;h<n.length;h++)if(l=n[h],1===o[l])if(s)s--;else if(i){if(r.push(l),r.length===e){t=r;break t}}else{const n=c+(d?a:0);if(r[n]||(r[n]=[]),r[n].push(l),++u===e){t=r;break t}}t=r}this.result=t,a=!0}else s||(this.result=t);return i&&(this.await=null),i?this.resolve(e,n,r,o,a):this}function pp(t,e,n,r,i,s,o){if(!s&&!this.result.length)return i?this.result:this;if(t.length&&this.result.length){t:{s=n;var a=[];t=new Set(t.flat().flat());for(let n,r=0,o=0;r<this.result.length;r++)if(n=this.result[r])for(let l,c=0;c<n.length;c++)if(l=n[c],!t.has(l))if(s)s--;else if(i){if(a.push(l),a.length===e){t=a;break t}}else if(a[r]||(a[r]=[]),a[r].push(l),++o===e){t=a;break t}t=a}this.result=t,a=!0}return i&&(this.await=null),i?this.resolve(e,n,r,o,a):this}function gp(t,e,n,r,i){let s,o,a;"string"==typeof i?(s=i,i=""):s=i.template,o=s.indexOf("$1"),a=s.substring(o+2),o=s.substring(0,o);let l=i&&i.boundary,c=!i||!1!==i.clip,u=i&&i.merge&&a&&o&&new RegExp(a+" "+o,"g");var d=0;if("object"==typeof(i=i&&i.ellipsis)){var h=i.template;d=h.length-2,i=i.pattern}let f,p;"string"!=typeof i&&(i=!1===i?"":"..."),d&&(i=h.replace("$1",i)),h=i.length-d,"object"==typeof l&&(f=l.before,0===f&&(f=-1),p=l.after,0===p&&(p=-1),l=l.total||9e5),d=new Map;for(let $,L,R,B=0;B<e.length;B++){let I;if(r)I=e,R=r;else{var g=e[B];if(R=g.field,!R)continue;I=g.result}L=n.get(R),$=L.encoder,"string"!=typeof(g=d.get($))&&(g=$.encode(t),d.set($,g));for(let t=0;t<I.length;t++){var m=I[t].doc;if(!m)continue;if(!(m=Mf(m,R)))continue;var b=m.trim().split(/\s+/);if(!b.length)continue;m="";var y=[];let e=[];for(var x=-1,v=-1,w=0,k=0;k<b.length;k++){var _=b[k],C=$.encode(_);let t;if((C=C.length>1?C.join(" "):C[0])&&_){for(var M=_.length,S=($.split?_.replace($.split,""):_).length-C.length,A="",D=0,P=0;P<g.length;P++){var E=g[P];if(E){var T=E.length;T+=S<0?0:S,D&&T<=D||(E=C.indexOf(E))>-1&&(A=(E?_.substring(0,E):"")+o+_.substring(E,E+T)+a+(E+T<M?_.substring(E+T):""),D=T,t=!0)}}A&&(l&&(x<0&&(x=m.length+(m?1:0)),v=m.length+(m?1:0)+A.length,w+=M,e.push(y.length),y.push({match:A})),m+=(m?" ":"")+A)}if(t){if(l&&w>=l)break}else m+=(m?" ":"")+(_=b[k]),l&&y.push({text:_})}if(w=e.length*(s.length-2),f||p||l&&m.length-w>l)if(k=v-x,f>0&&(k+=f),p>0&&(k+=p),k<=(w=l+w-2*h))b=f?x-(f>0?f:0):x-((w-k)/2|0),y=p?v+(p>0?p:0):b+w,c||(b>0&&" "!==m.charAt(b)&&" "!==m.charAt(b-1)&&((b=m.indexOf(" ",b))<0&&(b=0)),y<m.length&&" "!==m.charAt(y-1)&&" "!==m.charAt(y)&&((y=m.lastIndexOf(" ",y))<v?y=v:++y)),m=(b?i:"")+m.substring(b,y)+(y<m.length?i:"");else{for(v=[],x={},w={},k={},_={},C={},A=S=M=0,P=D=1;;){var O=void 0;for(let t,n=0;n<e.length;n++){if(t=e[n],A)if(S!==A){if(k[n+1])continue;if(t+=A,x[t]){M-=h,w[n+1]=1,k[n+1]=1;continue}if(t>=y.length-1){if(t>=y.length){k[n+1]=1,t>=b.length&&(w[n+1]=1);continue}M-=h}if(m=y[t].text,T=p&&C[n]){if(!(T>0)){k[n+1]=1;continue}if(m.length>T){if(k[n+1]=1,!c)continue;m=m.substring(0,T)}(T-=m.length)||(T=-1),C[n]=T}if(M+m.length+1<=l)m=" "+m,v[n]+=m;else{if(!c){k[n+1]=1;continue}(O=l-M-1)>0&&(m=" "+m.substring(0,O),v[n]+=m),k[n+1]=1}}else{if(k[n])continue;if(t-=S,x[t]){M-=h,k[n]=1,w[n]=1;continue}if(t<=0){if(t<0){k[n]=1,w[n]=1;continue}M-=h}if(m=y[t].text,T=f&&_[n]){if(!(T>0)){k[n]=1;continue}if(m.length>T){if(k[n]=1,!c)continue;m=m.substring(m.length-T)}(T-=m.length)||(T=-1),_[n]=T}if(M+m.length+1<=l)m+=" ",v[n]=m+v[n];else{if(!c){k[n]=1;continue}(O=m.length+1-(l-M))>=0&&O<m.length&&(m=m.substring(O)+" ",v[n]=m+v[n]),k[n]=1}}else{let e;if(m=y[t].match,f&&(_[n]=f),p&&(C[n]=p),n&&M++,t?!n&&h&&(M+=h):(w[n]=1,k[n]=1),t>=b.length-1||t<y.length-1&&y[t+1].match?e=1:h&&(M+=h),M-=s.length-2,n&&!(M+m.length<=l)){O=D=P=w[n]=0;break}v[n]=m,e&&(w[n+1]=1,k[n+1]=1)}M+=m.length,O=x[t]=1}if(O)S===A?A++:S++;else{if(S===A?D=0:P=0,!D&&!P)break;D?A=++S:A++}}m="";for(let t,e=0;e<v.length;e++)t=(w[e]?e?" ":"":(e&&!i?" ":"")+i)+v[e],m+=t;i&&!w[v.length]&&(m+=i)}u&&(m=m.replace(u," ")),I[t].highlight=m}if(r)break}return e}function mp(t,e){if(!this||this.constructor!==mp)return new mp(t,e);let n,r,i,s,o,a,l=0;if(t&&t.index){const n=t;if(e=n.index,l=n.boost||0,r=n.query){i=n.field||n.pluck,s=n.highlight;const r=n.resolve;t=n.async||n.queue,n.resolve=!1,n.index=null,t=t?e.searchAsync(n):e.search(n),n.resolve=r,n.index=e,t=t.result||t}else t=[]}if(t&&t.then){const e=this;n=[t=t.then(function(t){e.C[0]=e.result=t.result||t,bp(e)})],t=[],o=new Promise(function(t){a=t})}this.index=e||null,this.result=t||[],this.h=l,this.C=n||[],this.await=o||null,this.return=a||null,this.highlight=s||null,this.query=r||"",this.field=i||""}function bp(t,e){let n=t.result;var r=t.await;t.await=null;for(let e,i=0;i<t.C.length;i++)if(e=t.C[i])if("function"==typeof e)n=e(),t.C[i]=n=n.result||n,i--;else if(e.h)n=e.h(),t.C[i]=n=n.result||n,i--;else if(e.then)return t.await=r;return r=t.return,t.C=[],t.return=null,e||r(n),n}function yp(t,e,n,r,i,s,o){const a=t.length;let l,c,u=[];l=kf();for(let d,h,f,p,g=0;g<e;g++)for(let e=0;e<a;e++)if(f=t[e],g<f.length&&(d=f[g]))for(let t=0;t<d.length;t++){if(h=d[t],(c=l[h])?l[h]++:(c=0,l[h]=1),p=u[c]||(u[c]=[]),!o){let t=g+(e||!i?0:s||0);p=p[t]||(p[t]=[])}if(p.push(h),o&&n&&c===a-1&&p.length-r===n)return r?p.slice(r):p}if(t=u.length)if(i)u=u.length>1?xp(u,n,r,o,s):(u=u[0])&&n&&u.length>n||r?u.slice(r,n+r):u;else{if(t<a)return[];if(u=u[t-1],n||r)if(o)(u.length>n||r)&&(u=u.slice(r,n+r));else{i=[];for(let t,e=0;e<u.length;e++)if(t=u[e])if(r&&t.length>r)r-=t.length;else if((n&&t.length>n||r)&&(t=t.slice(r,n+r),n-=t.length,r&&(r-=t.length)),i.push(t),!n)break;u=i}}return u}function xp(t,e,n,r,i){const s=[],o=kf();let a;var l=t.length;let c;if(r){for(i=l-1;i>=0;i--)if(c=(r=t[i])&&r.length)for(l=0;l<c;l++)if(a=r[l],!o[a])if(o[a]=1,n)n--;else if(s.push(a),s.length===e)return s}else for(let u,d=l-1,h=0;d>=0;d--){u=t[d];for(let t=0;t<u.length;t++)if(c=(r=u[t])&&r.length)for(let u=0;u<c;u++)if(a=r[u],!o[a])if(o[a]=1,n)n--;else{let n=(t+(d<l-1&&i||0))/(d+1)|0;if((s[n]||(s[n]=[])).push(a),++h===e)return s}}return s}function vp(t,e,n,r,i){const s=kf(),o=[];for(let t,n=0;n<e.length;n++){t=e[n];for(let e=0;e<t.length;e++)s[t[e]]=1}if(i){for(let e,i=0;i<t.length;i++)if(e=t[i],s[e])if(r)r--;else if(o.push(e),s[e]=0,n&&0===--n)break}else for(let n,r,i=0;i<t.result.length;i++)for(n=t.result[i],e=0;e<n.length;e++)r=n[e],s[r]&&((o[i]||(o[i]=[])).push(r),s[r]=0);return o}function wp(t){const e=[],n=kf(),r=kf();for(let i,s,o,a,l,c,u,d=0;d<t.length;d++){i=t[d],s=i.field,o=i.result;for(let t=0;t<o.length;t++)l=o[t],"object"!=typeof l?l={id:a=l}:a=l.id,(c=n[a])?c.push(s):(l.field=n[a]=[s],e.push(l)),(u=l.highlight)&&(c=r[a],c||(r[a]=c={},l.highlight=c),c[s]=u)}return e}function kp(t,e,n,r,i){return(t=this.tag.get(t))&&(t=t.get(e))?((e=t.length-r)>0&&((n&&e>n||r)&&(t=t.slice(r,r+n)),i&&(t=_p.call(this,t))),t):[]}function _p(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);const e=Array(t.length);for(let n,r=0;r<t.length;r++)n=t[r],e[r]={id:n,doc:this.store.get(n)};return e}function Cp(t){if(!this||this.constructor!==Cp)return new Cp(t);const e=t.document||t.doc||t;let n,r;if(this.B=[],this.field=[],this.D=[],this.key=(n=e.key||e.id)&&Sp(n,this.D)||"id",(r=t.keystore||0)&&(this.keystore=r),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?r?new qf(r):new Set:r?new Hf(r):new Map,this.h=(n=e.store||null)&&n&&!0!==n&&[],this.store=n?r?new Hf(r):new Map:null,this.cache=(n=t.cache||null)&&new Lf(n),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=Mp.call(this,t,e),this.tag=null,(n=e.tag)&&("string"==typeof n&&(n=[n]),n.length)){this.tag=new Map,this.A=[],this.F=[];for(let t,e,r=0;r<n.length;r++){if(t=n[r],e=t.field||t,!e)throw Error("The tag field from the document descriptor is undefined.");t.custom?this.A[r]=t.custom:(this.A[r]=Sp(e,this.D),t.filter&&("string"==typeof this.A[r]&&(this.A[r]=new String(this.A[r])),this.A[r].G=t.filter)),this.F[r]=e,this.tag.set(e,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const e of this.index.values())e.then&&t.push(e);if(t.length){const e=this;return Promise.all(t).then(function(t){let n=0;for(const r of e.index.entries()){const i=r[0];let s=r[1];s.then&&(s=t[n],e.index.set(i,s),n++)}return e})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}function Mp(t,e){const n=new Map;let r=e.index||e.field||e;_f(r)&&(r=[r]);for(let e,s,o=0;o<r.length;o++){if(e=r[o],_f(e)||(s=e,e=e.field),s=Cf(s)?Object.assign({},t,s):t,this.worker){var i=void 0;i=new ip(s,i=(i=s.encoder)&&i.encode?i:new Tf("string"==typeof i?Nf[i]:i||{})),n.set(e,i)}this.worker||n.set(e,new Vp(s,this.reg)),s.custom?this.B[o]=s.custom:(this.B[o]=Sp(e,this.D),s.filter&&("string"==typeof this.B[o]&&(this.B[o]=new String(this.B[o])),this.B[o].G=s.filter)),this.field[o]=e}if(this.h){_f(t=e.store)&&(t=[t]);for(let e,n,r=0;r<t.length;r++)e=t[r],n=e.field||e,e.custom?(this.h[r]=e.custom,e.custom.O=n):(this.h[r]=Sp(n,this.D),e.filter&&("string"==typeof this.h[r]&&(this.h[r]=new String(this.h[r])),this.h[r].G=e.filter))}return n}function Sp(t,e){const n=t.split(":");let r=0;for(let i=0;i<n.length;i++)"]"===(t=n[i])[t.length-1]&&(t=t.substring(0,t.length-2))&&(e[r]=!0),t&&(n[r++]=t);return r<n.length&&(n.length=r),r>1?n:n[0]}function Ap(t,e=0){let n=[],r=[];e&&(e=25e4/e*5e3|0);for(const i of t.entries())r.push(i),r.length===e&&(n.push(r),r=[]);return r.length&&n.push(r),n}function Dp(t,e){e||(e=new Map);for(let n,r=0;r<t.length;r++)n=t[r],e.set(n[0],n[1]);return e}function Pp(t,e=0){let n=[],r=[];e&&(e=25e4/e*1e3|0);for(const i of t.entries())r.push([i[0],Ap(i[1])[0]||[]]),r.length===e&&(n.push(r),r=[]);return r.length&&n.push(r),n}function Ep(t,e){e||(e=new Map);for(let n,r,i=0;i<t.length;i++)n=t[i],r=e.get(n[0]),e.set(n[0],Dp(n[1],r));return e}function Tp(t){let e=[],n=[];for(const r of t.keys())n.push(r),25e4===n.length&&(e.push(n),n=[]);return n.length&&e.push(n),e}function Op(t,e){e||(e=new Set);for(let n=0;n<t.length;n++)e.add(t[n]);return e}function $p(t,e,n,r,i,s,o=0){const a=r&&r.constructor===Array;var l=a?r.shift():r;if(!l)return this.export(t,e,i,s+1);if((l=t((e?e+".":"")+(o+1)+"."+n,JSON.stringify(l)))&&l.then){const c=this;return l.then(function(){return $p.call(c,t,e,n,a?r:null,i,s,o+1)})}return $p.call(this,t,e,n,a?r:null,i,s,o+1)}function Lp(t,e){let n="";for(const r of t.entries()){t=r[0];const i=r[1];let s="";for(let t,n=0;n<i.length;n++){t=i[n]||[""];let r="";for(let n=0;n<t.length;n++)r+=(r?",":"")+("string"===e?'"'+t[n]+'"':t[n]);r="["+r+"]",s+=(s?",":"")+r}s='["'+t+'",['+s+"]]",n+=(n?",":"")+s}return n}function Rp(t,e){let n=0;var r=void 0===e;if(t.constructor===Array){for(let i,s,o,a=0;a<t.length;a++)if((i=t[a])&&i.length){if(r)return 1;if(s=i.indexOf(e),s>=0){if(i.length>1)return i.splice(s,1),1;if(delete t[a],n)return 1;o=1}else{if(o)return 1;n++}}}else for(let i of t.entries())r=i[0],Rp(i[1],e)?n++:t.delete(r);return n}sp("add"),sp("append"),sp("search"),sp("update"),sp("remove"),sp("clear"),sp("export"),sp("import"),ip.prototype.searchCache=$f,tp(ip.prototype),Cp.prototype.add=function(t,e,n){if(Cf(t)&&(t=Mf(e=t,this.key)),e&&(t||0===t)){if(!n&&this.reg.has(t))return this.update(t,e);for(let s,o=0;o<this.field.length;o++){s=this.B[o];var r=this.index.get(this.field[o]);if("function"==typeof s){var i=s(e);i&&r.add(t,i,n,!0)}else(!(i=s.G)||i(e))&&(s.constructor===String?s=[""+s]:_f(s)&&(s=[s]),ap(e,s,this.D,0,r,t,s[0],n))}if(this.tag)for(r=0;r<this.A.length;r++){var s=this.A[r];i=this.tag.get(this.F[r]);let a=kf();if("function"==typeof s){if(!(s=s(e)))continue}else{var o=s.G;if(o&&!o(e))continue;s.constructor===String&&(s=""+s),s=Mf(e,s)}if(i&&s){_f(s)&&(s=[s]);for(let e,r,l=0;l<s.length;l++)if(e=s[l],!a[e]&&(a[e]=1,(o=i.get(e))?r=o:i.set(e,r=[]),!n||!r.includes(t))){if(r.length===2**31-1){if(o=new Vf(r),this.fastupdate)for(let t of this.reg.values())t.includes(r)&&(t[t.indexOf(r)]=o);i.set(e,r=o)}r.push(t),this.fastupdate&&((o=this.reg.get(t))?o.push(r):this.reg.set(t,[r]))}}}if(this.store&&(!n||!this.store.has(t))){let r;if(this.h){r=kf();for(let t,i=0;i<this.h.length;i++){if(t=this.h[i],(n=t.G)&&!n(e))continue;let s;if("function"==typeof t){if(s=t(e),!s)continue;t=[t.O]}else if(_f(t)||t.constructor===String){r[t]=e[t];continue}op(e,r,t,0,t[0],s)}}this.store.set(t,r||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this},mp.prototype.or=function(){return cp(this,"or",dp,arguments)},mp.prototype.and=function(){return cp(this,"and",hp,arguments)},mp.prototype.xor=function(){return cp(this,"xor",fp,arguments)},mp.prototype.not=function(){return cp(this,"not",pp,arguments)},(xf=mp.prototype).limit=function(t){if(this.await){const e=this;this.C.push(function(){return e.limit(t).result})}else if(this.result.length){const e=[];for(let n,r=0;r<this.result.length;r++)if(n=this.result[r]){if(!(n.length<=t)){e[r]=n.slice(0,t);break}if(e[r]=n,!(t-=n.length))break}this.result=e}return this},xf.offset=function(t){if(this.await){const e=this;this.C.push(function(){return e.offset(t).result})}else if(this.result.length){const e=[];for(let n,r=0;r<this.result.length;r++)(n=this.result[r])&&(n.length<=t?t-=n.length:(e[r]=n.slice(t),t=0));this.result=e}return this},xf.boost=function(t){if(this.await){const e=this;this.C.push(function(){return e.boost(t).result})}else this.h+=t;return this},xf.resolve=function(t,e,n,r,i){let s=this.await?bp(this,!0):this.result;if(s.then){const o=this;return s.then(function(){return o.resolve(t,e,n,r,i)})}return s.length&&("object"==typeof t?(r=t.highlight||this.highlight,n=!!r||t.enrich,e=t.offset,t=t.limit):(r=r||this.highlight,n=!!r||n),s=i?n?_p.call(this.index,s):s:lp.call(this.index,s,t||100,e,n)),this.finalize(s,r)},xf.finalize=function(t,e){if(t.then){const n=this;return t.then(function(t){return n.finalize(t,e)})}e&&t.length&&this.query&&(t=gp(this.query,t,this.index.index,this.field,e));const n=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",n&&n(t),t},Cp.prototype.search=function(t,e,n,r){n||(!e&&Cf(t)?(n=t,t=""):Cf(e)&&(n=e,e=0));let i=[];var s=[];let o,a,l,c,u,d,h,f,p=0,g=!0;if(n){n.constructor===Array&&(n={index:n}),t=n.query||t,o=n.pluck,a=n.merge,c=n.boost,d=o||n.field||(d=n.index)&&(d.index?null:d);var m=this.tag&&n.tag;l=n.suggest,g=!1!==n.resolve,u=n.cache,h=g&&this.store&&n.highlight;var b=!!h||g&&this.store&&n.enrich;e=n.limit||e;var y=n.offset||0;if(e||(e=g?100:0),m&&(!this.db||!r)){m.constructor!==Array&&(m=[m]);var x=[];for(let t,e=0;e<m.length;e++)if(t=m[e],t.field&&t.tag){var v=t.tag;if(v.constructor===Array)for(var w=0;w<v.length;w++)x.push(t.field,v[w]);else x.push(t.field,v)}else{v=Object.keys(t);for(let e,n,r=0;r<v.length;r++)if(e=v[r],n=t[e],n.constructor===Array)for(w=0;w<n.length;w++)x.push(e,n[w]);else x.push(e,n)}if(m=x,!t){if(s=[],x.length)for(m=0;m<x.length;m+=2){if(this.db){if(!(r=this.index.get(x[m])))continue;s.push(r=r.db.tag(x[m+1],e,y,b))}else r=kp.call(this,x[m],x[m+1],e,y,b);i.push(g?{field:x[m],tag:x[m+1],result:r}:[r])}if(s.length){const t=this;return Promise.all(s).then(function(e){for(let t=0;t<e.length;t++)g?i[t].result=e[t]:i[t]=e[t];return g?i:new mp(i.length>1?yp(i,1,0,0,l,c):i[0],t)})}return g?i:new mp(i.length>1?yp(i,1,0,0,l,c):i[0],this)}}g||o||!(d=d||this.field)||(_f(d)?o=d:(d.constructor===Array&&1===d.length&&(d=d[0]),o=d.field||d.index)),d&&d.constructor!==Array&&(d=[d])}d||(d=this.field),x=(this.worker||this.db)&&!r&&[];for(let o,a,c,_=0;_<d.length;_++){if(a=d[_],this.db&&this.tag&&!this.B[_])continue;let C;if(_f(a)||(C=a,a=C.field,t=C.query||t,e=wf(C.limit,e),y=wf(C.offset,y),l=wf(C.suggest,l),h=g&&this.store&&wf(C.highlight,h),b=!!h||g&&this.store&&wf(C.enrich,b),u=wf(C.cache,u)),r)o=r[_];else{w=(v=C||n||{}).enrich;var k=this.index.get(a);if(m&&(this.db&&(v.tag=m,v.field=d,f=k.db.support_tag_search),!f&&w&&(v.enrich=!1),f||(v.limit=0,v.offset=0)),o=u?k.searchCache(t,m&&!f?0:e,v):k.search(t,m&&!f?0:e,v),m&&!f&&(v.limit=e,v.offset=y),w&&(v.enrich=w),x){x[_]=o;continue}}if(c=(o=o.result||o)&&o.length,m&&c){if(v=[],w=0,this.db&&r){if(!f)for(k=d.length;k<r.length;k++){let t=r[k];if(t&&t.length)w++,v.push(t);else if(!l)return g?i:new mp(i,this)}}else for(let t,e,n=0;n<m.length;n+=2){if(t=this.tag.get(m[n]),!t){if(l)continue;return g?i:new mp(i,this)}if(e=(t=t&&t.get(m[n+1]))&&t.length)w++,v.push(t);else if(!l)return g?i:new mp(i,this)}if(w){if(o=vp(o,v,e,y,g),c=o.length,!c&&!l)return g?o:new mp(o,this);w--}}if(c)s[p]=a,i.push(o),p++;else if(1===d.length)return g?i:new mp(i,this)}if(x){if(this.db&&m&&m.length&&!f)for(b=0;b<m.length;b+=2){if(!(s=this.index.get(m[b]))){if(l)continue;return g?i:new mp(i,this)}x.push(s.db.tag(m[b+1],e,y,!1))}const r=this;return Promise.all(x).then(function(i){return n&&(n.resolve=g),i.length&&(i=r.search(t,e,n,i)),i})}if(!p)return g?i:new mp(i,this);if(o&&(!b||!this.store))return i=i[0],g?i:new mp(i,this);for(x=[],y=0;y<s.length;y++){if(m=i[y],b&&m.length&&void 0===m[0].doc&&(this.db?x.push(m=this.index.get(this.field[0]).db.enrich(m)):m=_p.call(this,m)),o)return g?h?gp(t,m,this.index,o,h):m:new mp(m,this);i[y]={field:s[y],result:m}}if(b&&this.db&&x.length){const e=this;return Promise.all(x).then(function(n){for(let t=0;t<n.length;t++)i[t].result=n[t];return h&&(i=gp(t,i,e.index,o,h)),a?wp(i):i})}return h&&(i=gp(t,i,this.index,o,h)),a?wp(i):i},(xf=Cp.prototype).mount=function(t){let e=this.field;if(this.tag)for(let t,r=0;r<this.F.length;r++){t=this.F[r];var n=void 0;this.index.set(t,n=new Vp({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(t),n.tag=this.tag.get(t)}n=[];const r={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let i,s,o=0;o<e.length;o++){r.field=s=e[o],i=this.index.get(s);const a=new t.constructor(t.id,r);a.id=t.id,n[o]=a.mount(i),i.document=!0,o?i.bypass=!0:i.store=this.store}const i=this;return this.db=Promise.all(n).then(function(){i.db=!0})},xf.commit=async function(){const t=[];for(const e of this.index.values())t.push(e.commit());await Promise.all(t),this.reg.clear()},xf.destroy=function(){const t=[];for(const e of this.index.values())t.push(e.destroy());return Promise.all(t)},xf.append=function(t,e){return this.add(t,e,!0)},xf.update=function(t,e){return this.remove(t).add(t,e)},xf.remove=function(t){for(var e of(Cf(t)&&(t=Mf(t,this.key)),this.index.values()))e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let r of n){e=r[0];const i=r[1],s=i.indexOf(t);s>-1&&(i.length>1?i.splice(s,1):n.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this},xf.clear=function(){const t=[];for(const e of this.index.values()){const n=e.clear();n.then&&t.push(n)}if(this.tag)for(const t of this.tag.values())t.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this},xf.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)},xf.cleanup=function(){for(const t of this.index.values())t.cleanup();return this},xf.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(t){return t[0]&&t[0].doc||null}):this.store.get(t)||null},xf.set=function(t,e){return"object"==typeof t&&(t=Mf(e=t,this.key)),this.store.set(t,e),this},xf.searchCache=$f,xf.export=function(t,e,n=0,r=0){if(n<this.field.length){const i=this.field[n];if((e=this.index.get(i).export(t,i,n,r=1))&&e.then){const r=this;return e.then(function(){return r.export(t,i,n+1)})}return this.export(t,i,n+1)}let i,s;switch(r){case 0:i="reg",s=Tp(this.reg),e=null;break;case 1:i="tag",s=this.tag&&Pp(this.tag,this.reg.size),e=null;break;case 2:i="doc",s=this.store&&Ap(this.store),e=null;break;default:return}return $p.call(this,t,e,i,s||null,n,r)},xf.import=function(t,e){var n=t.split(".");"json"===n[n.length-1]&&n.pop();const r=n.length>2?n[0]:"";if(n=n.length>2?n[2]:n[1],this.worker&&r)return this.index.get(r).import(t);if(e){if("string"==typeof e&&(e=JSON.parse(e)),r)return this.index.get(r).import(n,e);switch(n){case"reg":this.fastupdate=!1,this.reg=Op(e,this.reg);for(let t,e=0;e<this.field.length;e++)t=this.index.get(this.field[e]),t.fastupdate=!1,t.reg=this.reg;if(this.worker){e=[];for(const n of this.index.values())e.push(n.import(t));return Promise.all(e)}break;case"tag":this.tag=Ep(e,this.tag);break;case"doc":this.store=Dp(e,this.store)}}},tp(Cp.prototype),Vp.prototype.remove=function(t,e){const n=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(n){if(this.fastupdate){for(let e,r,i=0;i<n.length;i++)if((e=n[i])&&(r=e.length))if(e[r-1]===t)e.pop();else{const n=e.indexOf(t);n>=0&&e.splice(n,1)}}else Rp(this.map,t),this.depth&&Rp(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&Hp(this)),this.cache&&this.cache.remove(t),this};const Bp={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};function Ip(t,e,n,r,i,s,o){let a,l;if(!(a=e[n])||o&&!a[o]){if(o?((e=a||(e[n]=kf()))[o]=1,l=t.ctx,(a=l.get(o))?l=a:l.set(o,l=t.keystore?new Hf(t.keystore):new Map)):(l=t.map,e[n]=1),(a=l.get(n))?l=a:l.set(n,l=a=[]),s)for(let n,s=0;s<a.length;s++)if((n=a[s])&&n.includes(i)){if(s<=r)return;n.splice(n.indexOf(i),1),t.fastupdate&&(e=t.reg.get(i))&&e.splice(e.indexOf(n),1);break}if(l=l[r]||(l[r]=[]),l.push(i),l.length===2**31-1){if(e=new Vf(l),t.fastupdate)for(let n of t.reg.values())n.includes(l)&&(n[n.indexOf(l)]=e);a[r]=l=e}t.fastupdate&&((r=t.reg.get(i))?r.push(l):t.reg.set(i,[l]))}}function jp(t,e,n,r,i){return n&&t>1?e+(r||0)<=t?n+(i||0):(t-1)/(e+(r||0))*(n+(i||0))+1|0:0}function Fp(t,e,n,r,i,s,o){let a=t.length,l=t;if(a>1)l=yp(t,e,n,r,i,s,o);else if(1===a)return o?lp.call(null,t[0],n,r):new mp(t[0],this);return o?l:new mp(l,this)}function zp(t,e,n,r,i,s,o){return t=Wp(this,t,e,n,r,i,s,o),this.db?t.then(function(t){return i?t||[]:new mp(t,this)}):t&&t.length?i?lp.call(this,t,n,r):new mp(t,this):i?[]:new mp([],this)}function Np(t,e,n,r){let i=[];if(t&&t.length){if(t.length<=r)return void e.push(t);for(let e,n=0;n<r;n++)(e=t[n])&&(i[n]=e);if(i.length)return void e.push(i)}if(!n)return i}function Wp(t,e,n,r,i,s,o,a){let l;return n&&(l=t.bidirectional&&e>n)&&(l=n,n=e,e=l),t.db?t.db.get(e,n,r,i,s,o,a):t=n?(t=t.ctx.get(n))&&t.get(e):t.map.get(e)}function Vp(t,e){if(!this||this.constructor!==Vp)return new Vp(t);if(t){var n=_f(t)?t:t.preset;n&&(t=Object.assign({},Bp[n],t))}else t={};const r=!0===(n=t.context)?{depth:1}:n||{},i=_f(t.encoder)?Nf[t.encoder]:t.encode||t.encoder||{};this.encoder=i.encode?i:"object"==typeof i?new Tf(i):{encode:i},this.resolution=t.resolution||9,this.tokenize=n=(n=t.tokenize)&&"default"!==n&&"exact"!==n&&n||"strict",this.depth="strict"===n&&r.depth||0,this.bidirectional=!1!==r.bidirectional,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(n=t.keystore||0)&&(this.keystore=n),this.map=n?new Hf(n):new Map,this.ctx=n?new Hf(n):new Map,this.reg=e||(this.fastupdate?n?new Hf(n):new Map:n?new qf(n):new Set),this.N=r.resolution||3,this.rtl=i.rtl||t.rtl||!1,this.cache=(n=t.cache||null)&&new Lf(n),this.resolve=!1!==t.resolve,(n=t.db)&&(this.db=this.mount(n)),this.M=!1!==t.commit,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}function Hp(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}Vp.prototype.add=function(t,e,n,r){if(e&&(t||0===t)){if(!r&&!n&&this.reg.has(t))return this.update(t,e);r=this.depth;const c=(e=this.encoder.encode(e,!r)).length;if(c){const u=kf(),d=kf(),h=this.resolution;for(let f=0;f<c;f++){let p=e[this.rtl?c-1-f:f];var i=p.length;if(i&&(r||!d[p])){var s=this.score?this.score(e,p,f,null,0):jp(h,c,f),o="";switch(this.tokenize){case"tolerant":if(Ip(this,d,p,s,t,n),i>2){for(let e,r,a,l,c=1;c<i-1;c++)e=p.charAt(c),r=p.charAt(c+1),a=p.substring(0,c)+r,l=p.substring(c+2),Ip(this,d,o=a+e+l,s,t,n),Ip(this,d,o=a+l,s,t,n);Ip(this,d,p.substring(0,p.length-1),s,t,n)}break;case"full":if(i>2){for(let r,l=0;l<i;l++)for(s=i;s>l;s--){o=p.substring(l,s),r=this.rtl?i-1-l:l;var a=this.score?this.score(e,p,f,o,r):jp(h,c,f,i,r);Ip(this,d,o,a,t,n)}break}case"bidirectional":case"reverse":if(i>1){for(a=i-1;a>0;a--){o=p[this.rtl?i-1-a:a]+o;var l=this.score?this.score(e,p,f,o,a):jp(h,c,f,i,a);Ip(this,d,o,l,t,n)}o=""}case"forward":if(i>1){for(a=0;a<i;a++)Ip(this,d,o+=p[this.rtl?i-1-a:a],s,t,n);break}default:if(Ip(this,d,p,s,t,n),r&&c>1&&f<c-1)for(i=this.N,o=p,s=Math.min(r+1,this.rtl?f+1:c-f),a=1;a<s;a++){p=e[this.rtl?c-1-f-a:f+a];Ip(this,u,(l=this.bidirectional&&p>o)?o:p,this.score?this.score(e,o,f,p,a-1):jp(i+(c/2>i?0:1),c,f,s-1,a-1),t,n,l?p:o)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(n?{ins:t}:{del:t}),this.M&&Hp(this)),this},Vp.prototype.search=function(t,e,n){if(n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):(n=t,t="")),n&&n.cache)return n.cache=!1,t=this.searchCache(t,e,n),n.cache=!0,t;let r,i,s,o,a,l,c,u,d=[],h=0;n&&(t=n.query||t,e=n.limit||e,h=n.offset||0,i=n.context,s=n.suggest,u=(o=n.resolve)&&n.enrich,l=n.boost,c=n.resolution,a=this.db&&n.tag),void 0===o&&(o=this.resolve),i=this.depth&&!1!==i;let f=this.encoder.encode(t,!i);if(r=f.length,e=e||(o?100:0),1===r)return zp.call(this,f[0],"",e,h,o,u,a);if(2===r&&i&&!s)return zp.call(this,f[1],f[0],e,h,o,u,a);let p,g=kf(),m=0;if(i&&(p=f[0],m=1),c||0===c||(c=p?this.N:this.resolution),this.db){if(this.db.search&&!1!==(n=this.db.search(this,f,e,h,s,o,u,a)))return n;const t=this;return async function(){for(let e,n;m<r;m++){if((n=f[m])&&!g[n]){if(g[n]=1,e=await Wp(t,n,p,0,0,!1,!1),e=Np(e,d,s,c)){d=e;break}p&&(s&&e&&d.length||(p=n))}s&&p&&m===r-1&&!d.length&&(c=t.resolution,p="",m=-1,g=kf())}return Fp(d,c,e,h,s,l,o)}()}for(let t,e;m<r;m++){if((e=f[m])&&!g[e]){if(g[e]=1,t=Wp(this,e,p,0,0,!1,!1),t=Np(t,d,s,c)){d=t;break}p&&(s&&t&&d.length||(p=e))}s&&p&&m===r-1&&!d.length&&(c=this.resolution,p="",m=-1,g=kf())}return Fp(d,c,e,h,s,l,o)},(xf=Vp.prototype).mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)},xf.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},xf.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()},xf.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},xf.append=function(t,e){return this.add(t,e,!0)},xf.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)},xf.update=function(t,e){const n=this,r=this.remove(t);return r&&r.then?r.then(()=>n.add(t,e)):this.add(t,e)},xf.cleanup=function(){return this.fastupdate?(Rp(this.map),this.depth&&Rp(this.ctx),this):this},xf.searchCache=$f,xf.export=function(t,e,n=0,r=0){let i,s;switch(r){case 0:i="reg",s=Tp(this.reg);break;case 1:i="cfg",s=null;break;case 2:i="map",s=Ap(this.map,this.reg.size);break;case 3:i="ctx",s=Pp(this.ctx,this.reg.size);break;default:return}return $p.call(this,t,e,i,s,n,r)},xf.import=function(t,e){if(e)switch("string"==typeof e&&(e=JSON.parse(e)),t=t.split("."),"json"===t[t.length-1]&&t.pop(),3===t.length&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=Op(e,this.reg);break;case"map":this.map=Dp(e,this.map);break;case"ctx":this.ctx=Ep(e,this.ctx)}},xf.serialize=function(t=!0){let e="",n="",r="";if(this.reg.size){let t;for(var i of this.reg.keys())t||(t=typeof i),e+=(e?",":"")+("string"===t?'"'+i+'"':i);e="index.reg=new Set(["+e+"]);",n=Lp(this.map,t),n="index.map=new Map(["+n+"]);";for(const e of this.ctx.entries()){i=e[0];let n=Lp(e[1],t);n="new Map(["+n+"])",n='["'+i+'",'+n+"]",r+=(r?",":"")+n}r="index.ctx=new Map(["+r+"]);"}return t?"function inject(index){"+e+n+r+"}":e+n+r},tp(Vp.prototype);const qp="undefined"!=typeof window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Up=["map","ctx","tag","reg","cfg"],Kp=kf();function Yp(t,e,n){const r=t.value;let i,s=0;for(let t,o=0;o<r.length;o++){if(t=n?r:r[o]){for(let n,s,a=0;a<e.length;a++)if(s=e[a],n=t.indexOf(s),n>=0){if(i=1,!(t.length>1)){r[o]=[];break}t.splice(n,1)}s+=t.length}if(n)break}s?i&&t.update(r):t.delete(),t.continue()}function Qp(t,e){return new Promise((n,r)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,n(this.result)},t.onerror=t.onblocked=r,t=null})}function Gp(t,e){const{positive:n,phrases:r,regular:i,regexPatterns:s=[]}=e;let o=0;const a=(t.title||"").toLowerCase(),l=(t.url||"").toLowerCase(),c=(t.domain||"").toLowerCase(),u=(t.description||"").toLowerCase(),d=(t.category||"").toLowerCase(),h=[...n,...r,...i];for(const t of h)a.includes(t)&&(o+=10,a.startsWith(t)&&(o+=5)),c.includes(t)&&(o+=5),d.includes(t)&&(o+=4),u.includes(t)&&(o+=2),l.includes(t)&&(o+=1);for(const e of s)e.test(t.title||"")&&(o+=8),e.test(t.url||"")&&(o+=3),e.test(t.description||"")&&(o+=2);return o}async function Xp(t,e={}){const{limit:n=50,offset:r=0}=e;if(!t||!t.trim()){const t=await jl();return{results:t.sort((t,e)=>e.dateAdded-t.dateAdded).slice(r,r+n),total:t.length,hasMore:r+n<t.length,parsedQuery:null}}const{filters:i,remainingQuery:s}=function(t){if(!t||!t.trim())return{filters:{},remainingQuery:""};const e={};let n=t;const r=n.match(/category:(\S+)/i);r&&(e.category=r[1].toLowerCase(),n=n.replace(r[0],"").trim());const i=n.match(/domain:(\S+)/i);i&&(e.domain=i[1].toLowerCase(),n=n.replace(i[0],"").trim());const s=n.match(/platform:(\S+)/i);s&&(e.platform=s[1].toLowerCase(),n=n.replace(s[0],"").trim());const o=n.match(/channel:(@?\S+)/i);o&&(e.creator=o[1],n=n.replace(o[0],"").trim());const a=n.match(/author:(@?\S+)/i);a&&(e.creator=a[1],n=n.replace(a[0],"").trim());const l=n.match(/repo:(\S+)/i);l&&(e.repo=l[1].toLowerCase(),n=n.replace(l[0],"").trim());const c=n.match(/type:(\S+)/i);c&&(e.contentType=c[1].toLowerCase(),n=n.replace(c[0],"").trim());const u=n.match(/hasimage:(yes|no)/i);u&&(e.hasImage="yes"===u[1].toLowerCase(),n=n.replace(u[0],"").trim());const d=n.match(/playlist:(\S+)/i);d&&(e.playlist=d[1],n=n.replace(d[0],"").trim());const h=n.match(/accessed:(yes|no)/i);h&&(e.accessed="yes"===h[1].toLowerCase(),n=n.replace(h[0],"").trim());const f=n.match(/stale:(yes|no)/i);f&&(e.stale="yes"===f[1].toLowerCase(),n=n.replace(f[0],"").trim());const p=n.match(/enriched:(yes|no)/i);p&&(e.enriched="yes"===p[1].toLowerCase(),n=n.replace(p[0],"").trim());const g=n.match(/dead:(yes|no)/i);g&&(e.dead="yes"===g[1].toLowerCase(),n=n.replace(g[0],"").trim());const m=n.match(/folder:(?:"([^"]+)"|(\S+))/i);return m&&(e.folder=(m[1]||m[2]).toLowerCase(),n=n.replace(m[0],"").trim()),{filters:e,remainingQuery:n}}(t),o=function(t){if(!t||!t.trim())return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[],hasModifiers:!1};const e=[],n=[],r=[],i=[],s=[],o=/\/([^\/]+)\/([gimsuvy]*)?/g;let a,l=t;for(;null!==(a=o.exec(t));)try{const t=a[1],e=a[2]||"i",n=new RegExp(t,e);s.push(n)}catch(t){console.warn("Invalid regex pattern:",a[0],t.message)}l=l.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();const c=/([+-]?)"([^"]+)"/g;for(;null!==(a=c.exec(l));){const t=a[1],i=a[2].toLowerCase();"+"===t?e.push(i):"-"===t?n.push(i):r.push(i)}l=l.replace(/[+-]?"[^"]+"/g,"").trim();const u=l.split(/\s+/).filter(t=>t.length>0);for(const t of u){const r=t.toLowerCase();t.startsWith("+")&&t.length>1?e.push(r.slice(1)):t.startsWith("-")&&t.length>1?n.push(r.slice(1)):i.push(r)}return{positive:e,negative:n,phrases:r,regular:i,regexPatterns:s,hasModifiers:e.length>0||n.length>0||r.length>0||s.length>0}}(s);let a,l=await jl();Object.keys(i).length>0&&(l=function(t,e){const n=Date.now()-2592e6;return t.filter(t=>{if(e.category&&(t.category||"uncategorized").toLowerCase()!==e.category)return!1;if(e.domain&&!(t.domain||"").toLowerCase().includes(e.domain))return!1;if(void 0!==e.accessed){const n=t.accessCount&&t.accessCount>0;if(e.accessed!==n)return!1}if(e.stale){const e=t.dateAdded<n,r=!t.accessCount||0===t.accessCount,i=!1!==t.isAlive;if(!(e&&r&&i))return!1}if(void 0!==e.enriched){const n=Boolean(t.description||t.keywords&&t.keywords.length>0||t.contentSnippet);if(e.enriched!==n)return!1}if(void 0!==e.dead){const n=!1===t.isAlive;if(e.dead!==n)return!1}if(e.folder&&!(t.folderPath||"").toLowerCase().includes(e.folder))return!1;if(e.platform&&(t.platform||"other").toLowerCase()!==e.platform)return!1;if(e.creator){const n=(t.creator||"").toLowerCase(),r=e.creator.toLowerCase();if(!n.includes(r)&&!n.includes(r.replace(/^@/,""))&&!`@${n}`.includes(r))return!1}if(e.repo&&!(t.platformData?.extra?.owner&&t.platformData?.extra?.repo?`${t.platformData.extra.owner}/${t.platformData.extra.repo}`.toLowerCase():"").includes(e.repo))return!1;if(e.contentType){const n=(t.contentType||"").toLowerCase();if(!e.contentType.split("|").map(t=>t.trim()).includes(n))return!1}if(void 0!==e.hasImage){const n=Boolean(t.platformData?.extra?.thumbnail||t.rawMetadata?.openGraph?.["og:image"]||t.rawMetadata?.twitterCard?.["twitter:image"]);if(e.hasImage!==n)return!1}return!(e.playlist&&!(t.platformData?.extra?.playlistId||"").includes(e.playlist))})}(l,i)),s.trim()?(a=l.filter(t=>function(t,e){const{positive:n,negative:r,phrases:i,regular:s,regexPatterns:o=[]}=e,a=[t.title||"",t.url||"",t.description||"",t.domain||"",t.category||"",Array.isArray(t.keywords)?t.keywords.join(" "):""].join(" ").toLowerCase(),l=[t.title||"",t.url||"",t.description||"",t.domain||"",t.category||"",Array.isArray(t.keywords)?t.keywords.join(" "):""].join(" ");for(const t of n)if(!a.includes(t))return!1;for(const t of r)if(a.includes(t))return!1;for(const t of i)if(!a.includes(t))return!1;for(const t of o){const e=t.flags.includes("i")?a:l;if(!t.test(e))return!1}if(s.length>0&&!s.some(t=>a.includes(t)))return!1;return!0}(t,o)),a=a.map(t=>({...t,_searchScore:Gp(t,o)})),a.sort((t,e)=>e._searchScore-t._searchScore)):a=l.sort((t,e)=>e.dateAdded-t.dateAdded);const c=a.length;return{results:a.slice(r,r+n),total:c,hasMore:r+n<c,parsedQuery:o,specialFilters:i}}function Jp(t,e){const n=t.toLowerCase().trim(),r=e.toLowerCase().trim();if(n===r)return 1;const i=Math.max(n.length,r.length);if(0===i)return 0;return 1-function(t,e){const n=t.length,r=e.length;if(0===n)return r;if(0===r)return n;const i=Array(n+1).fill(null).map(()=>Array(r+1).fill(0));for(let t=0;t<=n;t++)i[t][0]=t;for(let t=0;t<=r;t++)i[0][t]=t;for(let s=1;s<=n;s++)for(let n=1;n<=r;n++){const r=t[s-1]===e[n-1]?0:1;i[s][n]=Math.min(i[s-1][n]+1,i[s][n-1]+1,i[s-1][n-1]+r)}return i[n][r]}(n,r)/i}function Zp(t,e){const n=new Set(t.toLowerCase().split(/\s+/).filter(t=>t.length>2)),r=new Set(e.toLowerCase().split(/\s+/).filter(t=>t.length>2));if(0===n.size||0===r.size)return 0;const i=[...n].filter(t=>r.has(t)).length;return i/new Set([...n,...r]).size}function tg(t){let e=0,n=0;return t.title&&t.title.length>3&&(e+=1,n++),t.description&&t.description.length>10&&(e+=1,n++),t.keywords&&t.keywords.length>0&&(e+=1,n++),t.category&&(e+=1,n++),t.domain&&(e+=1,n++),{coverage:e,fields:n,percentage:n>0?e/5*100:0}}function eg(t,e){const n={titleFuzzy:0,titleWords:0,descriptionWords:0,keywordsOverlap:0,categoryMatch:0,domainMatch:0,urlPathSimilarity:0};if(t.title&&e.title&&(n.titleFuzzy=Jp(t.title,e.title),n.titleWords=Zp(t.title,e.title)),t.description&&e.description&&(n.descriptionWords=Zp(t.description,e.description)),t.keywords?.length>0&&e.keywords?.length>0){const r=new Set(t.keywords.map(t=>t.toLowerCase())),i=new Set(e.keywords.map(t=>t.toLowerCase())),s=[...r].filter(t=>i.has(t)).length,o=new Set([...r,...i]).size;n.keywordsOverlap=s/o}if(t.category&&e.category&&(n.categoryMatch=t.category===e.category?1:0),t.domain&&e.domain&&(n.domainMatch=t.domain===e.domain?1:0),1===n.domainMatch)try{const r=new URL(t.url).pathname,i=new URL(e.url).pathname;n.urlPathSimilarity=Jp(r,i)}catch(t){}let r;return r=1===n.domainMatch?.25*n.titleFuzzy+.2*n.titleWords+.2*n.urlPathSimilarity+.15*n.descriptionWords+.1*n.keywordsOverlap+.1*n.categoryMatch:.3*n.titleFuzzy+.25*n.titleWords+.2*n.descriptionWords+.15*n.keywordsOverlap+.1*n.categoryMatch,{combined:r,breakdown:n,sameDomain:1===n.domainMatch,sameCategory:1===n.categoryMatch}}async function ng(t={}){const{minSimilarity:e=.5,maxPairs:n=100,prioritizeSameDomain:r=!0,requireHighCoverage:i=!1,minCoveragePercent:s=40,useCache:o=!0,forceRefresh:a=!1}=t;try{const t=`enhanced_similar_${e}_${n}`;if(o&&!a){const e=await async function(t){try{const e=await Bl.cache.get(t);return e?e.ttl&&Date.now()-e.timestamp>e.ttl?(await Bl.cache.delete(t),null):e.value:null}catch(t){return console.error("Error getting cache:",t),null}}(t);if(e&&e.pairs&&Date.now()-e.timestamp<(Wl.similarities||864e5))return console.log("Returning cached enhanced similar results"),{pairs:e.pairs,stats:e.stats,fromCache:!0,cachedAt:e.timestamp,cacheAge:Date.now()-e.timestamp}}const l=await jl();if(l.length<2)return{pairs:[],stats:{total:0,sameDomain:0,crossDomain:0},fromCache:!1};let c=l;i&&(c=l.filter(t=>{const{percentage:e}=tg(t);return e>=s}));const u=new Map;c.forEach(t=>{const e=t.domain||"unknown";u.has(e)||u.set(e,[]),u.get(e).push(t)});const d=[];for(const[t,n]of u.entries())if(!(n.length<2))for(let t=0;t<n.length;t++)for(let r=t+1;r<n.length;r++){const i=n[t],s=n[r];if(i.url===s.url)continue;const o=eg(i,s);o.combined>=e&&d.push({bookmark1:i,bookmark2:s,similarity:o.combined,breakdown:o.breakdown,sameDomain:!0,sameCategory:o.sameCategory,coverage1:tg(i),coverage2:tg(s)})}if(!r||d.length<n/2){const t=Math.min(200,c.length),r=c.sort(()=>Math.random()-.5).slice(0,t);for(let t=0;t<r.length;t++){for(let n=t+1;n<r.length;n++){const i=r[t],s=r[n];if(i.domain===s.domain||i.url===s.url)continue;const o=eg(i,s);o.combined>=e+.1&&d.push({bookmark1:i,bookmark2:s,similarity:o.combined,breakdown:o.breakdown,sameDomain:!1,sameCategory:o.sameCategory,coverage1:tg(i),coverage2:tg(s)})}if(d.length>=2*n)break}}const h=d.sort((t,e)=>e.similarity-t.similarity).slice(0,n),f={total:h.length,sameDomain:h.filter(t=>t.sameDomain).length,crossDomain:h.filter(t=>!t.sameDomain).length,avgSimilarity:h.length>0?h.reduce((t,e)=>t+e.similarity,0)/h.length:0};return o&&(await async function(t,e,n=null){try{return await Bl.cache.put({key:t,value:e,timestamp:Date.now(),ttl:n}),!0}catch(t){return console.error("Error setting cache:",t),!1}}(t,{pairs:h,stats:f,timestamp:Date.now()}),console.log("Cached enhanced similar results")),{pairs:h,stats:f,fromCache:!1}}catch(t){return console.error("Error finding similar bookmarks with fuzzy matching:",t),{pairs:[],stats:{total:0,sameDomain:0,crossDomain:0},fromCache:!1}}}xf=function t(e,n={}){if(!this||this.constructor!==t)return new t(e,n);"object"==typeof e&&(n=e,e=e.name),e||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(e?":"+e.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}.prototype,xf.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())},xf.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),Kp[t.id]||(Kp[t.id]=[]),Kp[t.id].push(t.field);const e=qp.open(t.id,1);return e.onupgradeneeded=function(){const e=t.db=this.result;for(let n,r=0;r<Up.length;r++){n=Up[r];for(let r,i=0;i<Kp[t.id].length;i++)r=Kp[t.id][i],e.objectStoreNames.contains(n+("reg"!==n&&r?":"+r:""))||e.createObjectStore(n+("reg"!==n&&r?":"+r:""))}},t.db=Qp(e,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})},xf.close=function(){this.db&&this.db.close(),this.db=null},xf.destroy=function(){return Qp(qp.deleteDatabase(this.id))},xf.clear=function(){const t=[];for(let e,n=0;n<Up.length;n++){e=Up[n];for(let n,r=0;r<Kp[this.id].length;r++)n=Kp[this.id][r],t.push(e+("reg"!==e&&n?":"+n:""))}const e=this.db.transaction(t,"readwrite");for(let n=0;n<t.length;n++)e.objectStore(t[n]).clear();return Qp(e)},xf.get=function(t,e,n=0,r=0,i=!0,s=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);const o=this;return Qp(t).then(function(t){let e=[];if(!t||!t.length)return e;if(i){if(!n&&!r&&1===t.length)return t[0];for(let i,s=0;s<t.length;s++)if((i=t[s])&&i.length){if(r>=i.length){r-=i.length;continue}const t=n?r+Math.min(i.length-r,n):i.length;for(let n=r;n<t;n++)e.push(i[n]);if(r=0,e.length===n)break}return s?o.enrich(e):e}return t})},xf.tag=function(t,e=0,n=0,r=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const i=this;return Qp(t).then(function(t){return!t||!t.length||n>=t.length?[]:e||n?(t=t.slice(n,n+e),r?i.enrich(t):t):t})},xf.enrich=function(t){"object"!=typeof t&&(t=[t]);const e=this.db.transaction("reg","readonly").objectStore("reg"),n=[];for(let r=0;r<t.length;r++)n[r]=Qp(e.get(t[r]));return Promise.all(n).then(function(e){for(let n=0;n<e.length;n++)e[n]={id:t[n],doc:e[n]?JSON.parse(e[n]):null};return e})},xf.has=function(t){return Qp(t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t)).then(function(t){return!!t})},xf.search=null,xf.info=function(){},xf.transaction=function(t,e,n){t+="reg"!==t&&this.field?":"+this.field:"";let r=this.h[t+":"+e];if(r)return n.call(this,r);let i=this.db.transaction(t,e);this.h[t+":"+e]=r=i.objectStore(t);const s=n.call(this,r);return this.h[t+":"+e]=null,Qp(i).finally(function(){return s})},xf.commit=async function(t){let e=t.commit_task,n=[];t.commit_task=[];for(let t,r=0;r<e.length;r++)t=e[r],t.del&&n.push(t.del);n.length&&await this.remove(n),t.reg.size&&(await this.transaction("map","readwrite",function(e){for(const n of t.map){const t=n[0],r=n[1];r.length&&(e.get(t).onsuccess=function(){let n=this.result;var i;if(n&&n.length){const t=Math.max(n.length,r.length);for(let e,s,o=0;o<t;o++)if((s=r[o])&&s.length){if((e=n[o])&&e.length)for(i=0;i<s.length;i++)e.push(s[i]);else n[o]=s;i=1}}else n=r,i=1;i&&e.put(n,t)})}}),await this.transaction("ctx","readwrite",function(e){for(const n of t.ctx){const t=n[0],r=n[1];for(const n of r){const r=n[0],i=n[1];i.length&&(e.get(t+":"+r).onsuccess=function(){let n=this.result;var s;if(n&&n.length){const t=Math.max(n.length,i.length);for(let e,r,o=0;o<t;o++)if((r=i[o])&&r.length){if((e=n[o])&&e.length)for(s=0;s<r.length;s++)e.push(r[s]);else n[o]=r;s=1}}else n=i,s=1;s&&e.put(n,t+":"+r)})}}}),t.store?await this.transaction("reg","readwrite",function(e){for(const n of t.store){const t=n[0],r=n[1];e.put("object"==typeof r?JSON.stringify(r):1,t)}}):t.bypass||await this.transaction("reg","readwrite",function(e){for(const n of t.reg.keys())e.put(1,n)}),t.tag&&await this.transaction("tag","readwrite",function(e){for(const n of t.tag){const t=n[0],r=n[1];r.length&&(e.get(t).onsuccess=function(){let n=this.result;n=n&&n.length?n.concat(r):r,e.put(n,t)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())},xf.remove=function(t){return"object"!=typeof t&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Yp(e,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Yp(e,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Yp(e,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let n=0;n<t.length;n++)e.delete(t[n])})])};const{document:rg}=f;function ig(t,e,n){const r=t.slice();return r[162]=e[n],r}function sg(t,e,n){const r=t.slice();return r[162]=e[n],r}function og(t,e,n){const r=t.slice();return r[175]=e[n],r[177]=n,r}function ag(t,e,n){const r=t.slice();return r[178]=e[n],r}function lg(t,e,n){const r=t.slice();return r[167]=e[n],r}function cg(t,e,n){const r=t.slice();return r[167]=e[n],r}function ug(t,e,n){const r=t.slice();return r[167]=e[n],r}function dg(t,e,n){const r=t.slice();return r[167]=e[n],r}function hg(t,e,n){const r=t.slice();return r[167]=e[n],r}function fg(t,e,n){const r=t.slice();return r[191]=e[n],r[193]=n,r}function pg(t,e,n){const r=t.slice();return r[194]=e[n],r[196]=n,r}function gg(t,e,n){const r=t.slice();return r[167]=e[n],r[177]=n,r}function mg(t,e,n){const r=t.slice();return r[167]=e[n],r}function bg(t,e,n){const r=t.slice();return r[200]=e[n],r}function yg(t,e,n){const r=t.slice();return r[203]=e[n],r}function xg(t,e,n){const r=t.slice();return r[206]=e[n][0],r[207]=e[n][1],r}function vg(t,e,n){const r=t.slice();return r[210]=e[n],r}function wg(t,e,n){const r=t.slice();return r[167]=e[n],r}function kg(t,e,n){const r=t.slice();return r[167]=e[n],r}function _g(t,e,n){const r=t.slice();return r[172]=e[n],r}function Cg(e){let n,r;return n=new ed({}),{c(){st(n.$$.fragment)},m(t,e){ot(n,t,e),r=!0},p:t,i(t){r||(tt(n.$$.fragment,t),r=!0)},o(t){et(n.$$.fragment,t),r=!1},d(t){at(n,t)}}}function Mg(t){let e,n,r,i;const s=[Pg,Dg],o=[];function a(t,e){return t[1]?0:1}return n=a(t),r=o[n]=s[n](t),{c(){e=y("div"),r.c(),M(e,"class","space-y-8")},m(t,r){g(t,e,r),o[n].m(e,null),i=!0},p(t,i){let l=n;n=a(t),n===l?o[n].p(t,i):(J(),et(o[l],1,1,()=>{o[l]=null}),Z(),r=o[n],r?r.p(t,i):(r=o[n]=s[n](t),r.c()),tt(r,1),r.m(e,null))},i(t){i||(tt(r),i=!0)},o(t){et(r),i=!1},d(t){t&&m(e),o[n].d()}}}function Sg(e){let n,r;return n=new yf({}),n.$on("filterByCategory",e[61]),n.$on("filterByDomain",e[62]),n.$on("filterByAccessed",e[63]),n.$on("filterByStale",e[64]),n.$on("filterByDead",e[65]),n.$on("filterByUnenriched",e[66]),n.$on("filterByUncategorized",e[67]),n.$on("showDuplicates",e[68]),n.$on("deleteBookmarks",e[69]),n.$on("searchQuery",e[70]),{c(){st(n.$$.fragment)},m(t,e){ot(n,t,e),r=!0},p:t,i(t){r||(tt(n.$$.fragment,t),r=!0)},o(t){et(n.$$.fragment,t),r=!1},d(t){at(n,t)}}}function Ag(t){let e,n,r,i,s,o,a,l,c,u,d;n=new Ml({}),n.$on("search",t[57]);let h={searchResultStats:t[14],isSearchActive:!!t[4]};o=new Xc({props:h}),t[105](o),o.$on("filter",t[58]);const f=[Pb,Db,Ab,Sb],b=[];function x(t,e){return t[1]?0:t[2]?1:0===t[0].length?2:3}return c=x(t),u=b[c]=f[c](t),{c(){e=y("div"),st(n.$$.fragment),r=w(),i=y("div"),s=y("div"),st(o.$$.fragment),a=w(),l=y("div"),u.c(),M(e,"class","mb-4"),M(s,"class","flex-shrink-0"),M(l,"class","flex-1 min-w-0 overflow-hidden"),M(i,"class","flex gap-6 min-h-0")},m(t,u){g(t,e,u),ot(n,e,null),g(t,r,u),g(t,i,u),p(i,s),ot(o,s,null),p(i,a),p(i,l),b[c].m(l,null),d=!0},p(t,e){const n={};16384&e[0]&&(n.searchResultStats=t[14]),16&e[0]&&(n.isSearchActive=!!t[4]),o.$set(n);let r=c;c=x(t),c===r?b[c].p(t,e):(J(),et(b[r],1,1,()=>{b[r]=null}),Z(),u=b[c],u?u.p(t,e):(u=b[c]=f[c](t),u.c()),tt(u,1),u.m(l,null))},i(t){d||(tt(n.$$.fragment,t),tt(o.$$.fragment,t),tt(u),d=!0)},o(t){et(n.$$.fragment,t),et(o.$$.fragment,t),et(u),d=!1},d(s){s&&(m(e),m(r),m(i)),at(n),t[105](null),at(o),b[c].d()}}}function Dg(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,P,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H,q,U,K,Y,Q,G,X,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,bt,yt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Pt,Et,Tt,Ot,$t,Lt,Rt,Bt,It,jt,Ft,zt,Nt,Wt,Vt,Ht,qt,Ut,Kt,Yt,Qt,Gt,Xt,Jt,Zt,te,ee,ne,re,ie,se,oe,ae,le,ce,ue,de,he,fe,pe,ge,me,be,ye,xe,ve,we,ke,_e,Ce,Me,Se,Ae,De,Pe,Ee,Te,Oe,$e,Le,Re,Be,Ie,je,Fe,ze,Ne,We,Ve,He,qe,Ue,Ke,Ye,Qe,Ge,Xe=t[13]&&Eg(t);function Je(t,e){return t[16]?Og:Tg}let Ze=Je(t),tn=Ze(t),en=t[15]&&$g(t),nn=t[22]&&Rg(),rn=t[18]&&t[16]&&Bg(t),sn=t[17]&&jg(t);function on(t,e){return t[19].length>0?Hg:t[17]?void 0:Vg}let an=on(t),ln=an&&an(t);function cn(t,e){return t[23]?Kg:Ug}let un=cn(t),dn=un(t),hn=t[23]&&t[24]&&Yg(t);function fn(t,e){return t[25]?Gg:t[23]?void 0:Qg}let pn=fn(t),gn=pn&&pn(t),mn=!t[12]&&nm(t),bn=t[11].length>0&&rm(t),yn=t[11].length>0&&!t[50]&&lm(t),xn=t[50]&&t[51]&&cm(t),vn=t[52]&&!t[50]&&dm(t);function wn(t,e){return t[12]?gm:0===t[11].length?pm:fm}let kn=wn(t),_n=kn(t),Cn=!t[27]&&Pm(t);function Mn(t,e){return t[27]?Om:0===t[9].length?Tm:Em}let Sn=Mn(t),An=Sn(t),Dn=t[36]&&Bm(t);function Pn(t,e){return t[37]?.fromCache?jm:t[36]?Im:void 0}let En=Pn(t),Tn=En&&En(t);function On(t,e){return t[31]?zm:Fm}let $n=On(t),Ln=$n(t);function Rn(t,e){return t[31]?Hm:0!==t[35].length||t[36]?0===t[35].length?Wm:Nm:Vm}let Bn=Rn(t),In=Bn(t),jn=t[39]&&Gm(t);function Fn(t,e){return t[30]?Zm:t[39]&&0!==t[39].summary.total?Xm:Jm}let zn=Fn(t),Nn=zn(t),Wn=!t[28]&&hb(t);const Vn=[gb,pb,fb],Hn=[];function qn(t,e){return t[28]?0:0===t[10].length?1:2}function Un(t,e){return t[42]?yb:bb}pe=qn(t),ge=Hn[pe]=Vn[pe](t);let Kn=Un(t),Yn=Kn(t),Qn=t[45]&&xb(t);function Gn(t,e){return 0===t[44].length?Cb:_b}let Xn=Gn(t),Jn=Xn(t);return{c(){Xe&&Xe.c(),e=w(),n=y("div"),i=y("div"),s=y("div"),s.innerHTML='<h3 class="text-lg font-medium text-gray-900"><svg class="w-5 h-5 inline-block mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>\n                  Bookmark Enrichment</h3> <p class="text-sm text-gray-500 mt-1">Fetch metadata (descriptions, categories, keywords) for your bookmarks</p>',o=w(),a=y("button"),tn.c(),l=w(),c=y("div"),en&&en.c(),u=w(),d=y("div"),h=y("div"),f=y("label"),b=v("Batch Size\n                    "),x=y("span"),x.textContent="(how many bookmarks to process)",k=w(),C=y("input"),P=w(),E=y("div"),T=y("label"),O=v("Concurrency\n                    "),$=y("span"),$.textContent="(parallel requests)",L=w(),R=y("input"),B=w(),I=y("p"),I.textContent="Higher = faster, but more resource intensive (recommended: 3-5)",j=w(),F=y("div"),z=y("label"),N=y("input"),W=w(),V=y("div"),H=y("span"),H.textContent="Force Re-enrich",q=w(),U=y("p"),K=v("Re-fetch metadata for bookmarks even if already enriched. Bypasses the queue and processes "),Y=v(t[20]),Q=v(" bookmarks directly."),G=w(),nn&&nn.c(),X=w(),rn&&rn.c(),nt=w(),sn&&sn.c(),rt=w(),ln&&ln.c(),it=w(),st=y("div"),ot=y("div"),at=y("div"),at.innerHTML='<h3 class="text-lg font-medium text-gray-900"><span class="inline-block mr-2"></span>\n                  Platform Detection</h3> <p class="text-sm text-gray-500 mt-1">Extract platform, creator, and content type from bookmark URLs (no network requests)</p>',lt=w(),ct=y("button"),dn.c(),ut=w(),dt=y("div"),ht=y("div"),ht.innerHTML='<p>Parses URLs to identify:</p> <div class="flex flex-wrap gap-2 mt-2"><span class="px-2 py-1 bg-red-100 text-red-700 rounded text-xs"> YouTube</span> <span class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs"> GitHub</span> <span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs"> Medium</span> <span class="px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs"> dev.to</span> <span class="px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs"> Substack</span> <span class="px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs"> Twitter</span> <span class="px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs"> Reddit</span> <span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs"> Stack Overflow</span> <span class="px-2 py-1 bg-red-100 text-red-700 rounded text-xs"> npm</span></div>',ft=w(),hn&&hn.c(),pt=w(),gn&&gn.c(),gt=w(),mt=y("div"),bt=y("div"),yt=y("div"),xt=y("h3"),vt=v("Dead Links "),mn&&mn.c(),wt=w(),kt=y("p"),kt.textContent="Bookmarks detected as unreachable during enrichment",_t=w(),bn&&bn.c(),Ct=w(),Mt=y("div"),yn&&yn.c(),St=w(),xn&&xn.c(),At=w(),vn&&vn.c(),Dt=w(),_n.c(),Pt=w(),Et=y("div"),Tt=y("div"),Ot=y("h3"),$t=v("Duplicate Bookmarks "),Cn&&Cn.c(),Lt=w(),Rt=y("div"),An.c(),Bt=w(),It=y("div"),jt=y("div"),Ft=y("div"),zt=y("h3"),Nt=v(" Smart Similar Detection "),Dn&&Dn.c(),Wt=w(),Vt=y("p"),Vt.textContent="Advanced fuzzy matching using title, description, keywords & domain analysis",Ht=w(),qt=y("div"),Tn&&Tn.c(),Ut=w(),Kt=y("button"),Ln.c(),Yt=w(),Qt=y("div"),In.c(),Gt=w(),Xt=y("div"),Jt=y("div"),Zt=y("h3"),te=v(" Cleanup Candidates "),jn&&jn.c(),ee=w(),ne=y("p"),ne.textContent="Bookmarks that may be candidates for removal based on various criteria",re=w(),ie=y("div"),Nn.c(),se=w(),oe=y("div"),ae=y("div"),le=y("h3"),ce=v("Invalid URLs "),Wn&&Wn.c(),ue=w(),de=y("p"),de.textContent="Bookmarks with unrecognized URL schemes",he=w(),fe=y("div"),ge.c(),me=w(),be=y("div"),ye=y("div"),ye.innerHTML='<h3 class="text-lg font-medium text-gray-900"><svg class="w-5 h-5 inline-block mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg>\n                Backup &amp; Restore</h3> <p class="text-sm text-gray-500 mt-1">Protect your enrichment data - backup regularly!</p>',xe=w(),ve=y("div"),we=y("div"),ke=y("div"),_e=y("h4"),_e.textContent="Create Backup",Ce=w(),Me=y("p"),Me.textContent="Download a complete backup of your bookmarks including all enrichment data, categories, and metadata.",Se=w(),Ae=y("button"),Yn.c(),De=w(),Pe=y("div"),Ee=y("h4"),Ee.textContent="Restore Backup",Te=w(),Oe=y("p"),Oe.textContent="Restore from a backup file. Your current data will be auto-backed up first.",$e=w(),Le=y("label"),Re=y("span"),Re.textContent="Choose backup file",Be=w(),Ie=y("input"),je=w(),Qn&&Qn.c(),Fe=w(),ze=y("div"),Ne=y("div"),We=y("h4"),We.textContent="Auto-Backups",Ve=w(),He=y("button"),He.textContent="Refresh",qe=w(),Ue=y("p"),Ue.textContent="Auto-backups are created before restore operations and enrichment runs. Last 3 are kept.",Ke=w(),Jn.c(),a.disabled=t[16],M(a,"class","px-4 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex-shrink-0"),M(i,"class","px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"),M(x,"class","text-xs text-gray-500 font-normal"),M(C,"type","number"),M(C,"min","5"),M(C,"max","100"),M(C,"class","mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),C.disabled=t[16],M(f,"class","block text-sm font-medium text-gray-700 mb-1"),M($,"class","text-xs text-gray-500 font-normal"),M(R,"type","number"),M(R,"min","1"),M(R,"max","10"),M(R,"class","mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),R.disabled=t[16],M(T,"class","block text-sm font-medium text-gray-700 mb-1"),M(I,"class","text-xs text-gray-500 mt-1"),M(N,"type","checkbox"),M(N,"class","mt-0.5 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"),N.disabled=t[16],M(H,"class","text-sm font-medium text-gray-700"),M(U,"class","text-xs text-gray-500 mt-0.5"),M(z,"class","flex items-start gap-2 cursor-pointer mt-2"),M(d,"class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"),M(c,"class","p-6"),M(n,"class","bg-white rounded-lg shadow"),ct.disabled=t[23],M(ct,"class","px-4 py-2 bg-pink-600 text-white text-sm rounded-md hover:bg-pink-700 disabled:opacity-50 flex-shrink-0"),M(ot,"class","px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"),M(ht,"class","text-sm text-gray-600 mb-4"),M(dt,"class","p-6"),M(st,"class","bg-white rounded-lg shadow"),M(xt,"class","text-lg font-medium text-gray-900"),M(kt,"class","text-xs text-gray-500 mt-1"),M(bt,"class","px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"),M(Mt,"class","p-6"),M(mt,"class","bg-white rounded-lg shadow"),M(Ot,"class","text-lg font-medium text-gray-900"),M(Tt,"class","px-6 py-4 border-b border-gray-200"),M(Rt,"class","p-6"),M(Et,"class","bg-white rounded-lg shadow"),M(zt,"class","text-lg font-medium text-gray-900"),M(Vt,"class","text-xs text-gray-500 mt-1"),Kt.disabled=t[31],M(Kt,"class","px-3 py-1.5 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),M(qt,"class","flex items-center gap-2"),M(jt,"class","px-6 py-4 border-b border-gray-200 flex items-center justify-between flex-wrap gap-3"),M(Qt,"class","p-6"),M(It,"class","bg-white rounded-lg shadow"),M(Zt,"class","text-lg font-medium text-gray-900"),M(ne,"class","text-xs text-gray-500 mt-1"),M(Jt,"class","px-6 py-4 border-b border-gray-200"),M(ie,"class","p-6"),M(Xt,"class","bg-white rounded-lg shadow"),M(le,"class","text-lg font-medium text-gray-900"),M(de,"class","text-xs text-gray-500 mt-1"),M(ae,"class","px-6 py-4 border-b border-gray-200"),M(fe,"class","p-6"),M(oe,"class","bg-white rounded-lg shadow"),M(ye,"class","px-6 py-4 border-b border-gray-200"),M(_e,"class","font-medium text-gray-900 mb-3"),M(Me,"class","text-sm text-gray-600 mb-4"),Ae.disabled=t[42],M(Ae,"class","w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center justify-center"),M(ke,"class","border border-gray-200 rounded-lg p-4"),M(Ee,"class","font-medium text-gray-900 mb-3"),M(Oe,"class","text-sm text-gray-600 mb-4"),M(Re,"class","sr-only"),M(Ie,"type","file"),M(Ie,"accept",".json"),M(Ie,"class","block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"),M(Le,"class","block"),M(Pe,"class","border border-gray-200 rounded-lg p-4"),M(we,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),M(We,"class","font-medium text-gray-900"),M(He,"class","text-sm text-blue-600 hover:text-blue-800"),M(Ne,"class","flex justify-between items-center mb-3"),M(Ue,"class","text-sm text-gray-600 mb-3"),M(ze,"class","mt-6 border-t border-gray-200 pt-6"),M(ve,"class","p-6"),M(be,"class","bg-white rounded-lg shadow")},m(r,m){Xe&&Xe.m(r,m),g(r,e,m),g(r,n,m),p(n,i),p(i,s),p(i,o),p(i,a),tn.m(a,null),p(n,l),p(n,c),en&&en.m(c,null),p(c,u),p(c,d),p(d,h),p(h,f),p(f,b),p(f,x),p(f,k),p(f,C),D(C,t[20]),p(d,P),p(d,E),p(E,T),p(T,O),p(T,$),p(T,L),p(T,R),D(R,t[21]),p(E,B),p(E,I),p(d,j),p(d,F),p(F,z),p(z,N),N.checked=t[22],p(z,W),p(z,V),p(V,H),p(V,q),p(V,U),p(U,K),p(U,Y),p(U,Q),p(V,G),nn&&nn.m(V,null),p(c,X),rn&&rn.m(c,null),p(c,nt),sn&&sn.m(c,null),p(c,rt),ln&&ln.m(c,null),g(r,it,m),g(r,st,m),p(st,ot),p(ot,at),p(ot,lt),p(ot,ct),dn.m(ct,null),p(st,ut),p(st,dt),p(dt,ht),p(dt,ft),hn&&hn.m(dt,null),p(dt,pt),gn&&gn.m(dt,null),g(r,gt,m),g(r,mt,m),p(mt,bt),p(bt,yt),p(yt,xt),p(xt,vt),mn&&mn.m(xt,null),p(yt,wt),p(yt,kt),p(bt,_t),bn&&bn.m(bt,null),p(mt,Ct),p(mt,Mt),yn&&yn.m(Mt,null),p(Mt,St),xn&&xn.m(Mt,null),p(Mt,At),vn&&vn.m(Mt,null),p(Mt,Dt),_n.m(Mt,null),g(r,Pt,m),g(r,Et,m),p(Et,Tt),p(Tt,Ot),p(Ot,$t),Cn&&Cn.m(Ot,null),p(Et,Lt),p(Et,Rt),An.m(Rt,null),g(r,Bt,m),g(r,It,m),p(It,jt),p(jt,Ft),p(Ft,zt),p(zt,Nt),Dn&&Dn.m(zt,null),p(Ft,Wt),p(Ft,Vt),p(jt,Ht),p(jt,qt),Tn&&Tn.m(qt,null),p(qt,Ut),p(qt,Kt),Ln.m(Kt,null),p(It,Yt),p(It,Qt),In.m(Qt,null),g(r,Gt,m),g(r,Xt,m),p(Xt,Jt),p(Jt,Zt),p(Zt,te),jn&&jn.m(Zt,null),p(Jt,ee),p(Jt,ne),p(Xt,re),p(Xt,ie),Nn.m(ie,null),g(r,se,m),g(r,oe,m),p(oe,ae),p(ae,le),p(le,ce),Wn&&Wn.m(le,null),p(ae,ue),p(ae,de),p(oe,he),p(oe,fe),Hn[pe].m(fe,null),g(r,me,m),g(r,be,m),p(be,ye),p(be,xe),p(be,ve),p(ve,we),p(we,ke),p(ke,_e),p(ke,Ce),p(ke,Me),p(ke,Se),p(ke,Ae),Yn.m(Ae,null),p(we,De),p(we,Pe),p(Pe,Ee),p(Pe,Te),p(Pe,Oe),p(Pe,$e),p(Pe,Le),p(Le,Re),p(Le,Be),p(Le,Ie),p(Pe,je),Qn&&Qn.m(Pe,null),p(ve,Fe),p(ve,ze),p(ze,Ne),p(Ne,We),p(Ne,Ve),p(Ne,He),p(ze,qe),p(ze,Ue),p(ze,Ke),Jn.m(ze,null),Ye=!0,Qe||(Ge=[_(a,"click",t[71]),_(C,"input",t[110]),_(R,"input",t[111]),_(N,"change",t[112]),_(ct,"click",t[72]),_(Kt,"click",t[118]),_(Ae,"click",t[94]),_(Ie,"change",t[96]),_(He,"click",t[97])],Qe=!0)},p(t,n){t[13]?Xe?Xe.p(t,n):(Xe=Eg(t),Xe.c(),Xe.m(e.parentNode,e)):Xe&&(Xe.d(1),Xe=null),Ze!==(Ze=Je(t))&&(tn.d(1),tn=Ze(t),tn&&(tn.c(),tn.m(a,null))),(!Ye||65536&n[0])&&(a.disabled=t[16]),t[15]?en?en.p(t,n):(en=$g(t),en.c(),en.m(c,u)):en&&(en.d(1),en=null),(!Ye||65536&n[0])&&(C.disabled=t[16]),1048576&n[0]&&S(C.value)!==t[20]&&D(C,t[20]),(!Ye||65536&n[0])&&(R.disabled=t[16]),2097152&n[0]&&S(R.value)!==t[21]&&D(R,t[21]),(!Ye||65536&n[0])&&(N.disabled=t[16]),4194304&n[0]&&(N.checked=t[22]),(!Ye||1048576&n[0])&&A(Y,t[20]),t[22]?nn||(nn=Rg(),nn.c(),nn.m(V,null)):nn&&(nn.d(1),nn=null),t[18]&&t[16]?rn?rn.p(t,n):(rn=Bg(t),rn.c(),rn.m(c,nt)):rn&&(rn.d(1),rn=null),t[17]?sn?sn.p(t,n):(sn=jg(t),sn.c(),sn.m(c,rt)):sn&&(sn.d(1),sn=null),an===(an=on(t))&&ln?ln.p(t,n):(ln&&ln.d(1),ln=an&&an(t),ln&&(ln.c(),ln.m(c,null))),un!==(un=cn(t))&&(dn.d(1),dn=un(t),dn&&(dn.c(),dn.m(ct,null))),(!Ye||8388608&n[0])&&(ct.disabled=t[23]),t[23]&&t[24]?hn?hn.p(t,n):(hn=Yg(t),hn.c(),hn.m(dt,pt)):hn&&(hn.d(1),hn=null),pn===(pn=fn(t))&&gn?gn.p(t,n):(gn&&gn.d(1),gn=pn&&pn(t),gn&&(gn.c(),gn.m(dt,null))),t[12]?mn&&(mn.d(1),mn=null):mn?mn.p(t,n):(mn=nm(t),mn.c(),mn.m(xt,null)),t[11].length>0?bn?bn.p(t,n):(bn=rm(t),bn.c(),bn.m(bt,null)):bn&&(bn.d(1),bn=null),t[11].length>0&&!t[50]?yn?yn.p(t,n):(yn=lm(t),yn.c(),yn.m(Mt,St)):yn&&(yn.d(1),yn=null),t[50]&&t[51]?xn?xn.p(t,n):(xn=cm(t),xn.c(),xn.m(Mt,At)):xn&&(xn.d(1),xn=null),t[52]&&!t[50]?vn?vn.p(t,n):(vn=dm(t),vn.c(),vn.m(Mt,Dt)):vn&&(vn.d(1),vn=null),kn===(kn=wn(t))&&_n?_n.p(t,n):(_n.d(1),_n=kn(t),_n&&(_n.c(),_n.m(Mt,null))),t[27]?Cn&&(Cn.d(1),Cn=null):Cn?Cn.p(t,n):(Cn=Pm(t),Cn.c(),Cn.m(Ot,null)),Sn===(Sn=Mn(t))&&An?An.p(t,n):(An.d(1),An=Sn(t),An&&(An.c(),An.m(Rt,null))),t[36]?Dn?Dn.p(t,n):(Dn=Bm(t),Dn.c(),Dn.m(zt,null)):Dn&&(Dn.d(1),Dn=null),En===(En=Pn(t))&&Tn?Tn.p(t,n):(Tn&&Tn.d(1),Tn=En&&En(t),Tn&&(Tn.c(),Tn.m(qt,Ut))),$n!==($n=On(t))&&(Ln.d(1),Ln=$n(t),Ln&&(Ln.c(),Ln.m(Kt,null))),(!Ye||1&n[1])&&(Kt.disabled=t[31]),Bn===(Bn=Rn(t))&&In?In.p(t,n):(In.d(1),In=Bn(t),In&&(In.c(),In.m(Qt,null))),t[39]?jn?jn.p(t,n):(jn=Gm(t),jn.c(),jn.m(Zt,null)):jn&&(jn.d(1),jn=null),zn===(zn=Fn(t))&&Nn?Nn.p(t,n):(Nn.d(1),Nn=zn(t),Nn&&(Nn.c(),Nn.m(ie,null))),t[28]?Wn&&(Wn.d(1),Wn=null):Wn?Wn.p(t,n):(Wn=hb(t),Wn.c(),Wn.m(le,null));let r=pe;pe=qn(t),pe===r?Hn[pe].p(t,n):(J(),et(Hn[r],1,1,()=>{Hn[r]=null}),Z(),ge=Hn[pe],ge?ge.p(t,n):(ge=Hn[pe]=Vn[pe](t),ge.c()),tt(ge,1),ge.m(fe,null)),Kn!==(Kn=Un(t))&&(Yn.d(1),Yn=Kn(t),Yn&&(Yn.c(),Yn.m(Ae,null))),(!Ye||2048&n[1])&&(Ae.disabled=t[42]),t[45]?Qn?Qn.p(t,n):(Qn=xb(t),Qn.c(),Qn.m(Pe,null)):Qn&&(Qn.d(1),Qn=null),Xn===(Xn=Gn(t))&&Jn?Jn.p(t,n):(Jn.d(1),Jn=Xn(t),Jn&&(Jn.c(),Jn.m(ze,null)))},i(t){Ye||(tt(ge),Ye=!0)},o(t){et(ge),Ye=!1},d(t){t&&(m(e),m(n),m(it),m(st),m(gt),m(mt),m(Pt),m(Et),m(Bt),m(It),m(Gt),m(Xt),m(se),m(oe),m(me),m(be)),Xe&&Xe.d(t),tn.d(),en&&en.d(),nn&&nn.d(),rn&&rn.d(),sn&&sn.d(),ln&&ln.d(),dn.d(),hn&&hn.d(),gn&&gn.d(),mn&&mn.d(),bn&&bn.d(),yn&&yn.d(),xn&&xn.d(),vn&&vn.d(),_n.d(),Cn&&Cn.d(),An.d(),Dn&&Dn.d(),Tn&&Tn.d(),Ln.d(),In.d(),jn&&jn.d(),Nn.d(),Wn&&Wn.d(),Hn[pe].d(),Yn.d(),Qn&&Qn.d(),Jn.d(),Qe=!1,r(Ge)}}}function Pg(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',M(n,"class","flex items-center justify-center h-64")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function Eg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H,q=t[13].total+"",U=t[13].duplicateGroups+"",K=t[13].deadLinks+"",Y=t[13].uniqueDomains+"",Q=t[13].addedThisWeek+"",G=t[13].addedThisMonth+"";return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(q),s=w(),o=y("div"),o.textContent="Total Bookmarks",a=w(),l=y("div"),c=y("div"),u=v(U),d=w(),h=y("div"),h.textContent="Duplicate Groups",f=w(),b=y("div"),x=y("div"),k=v(K),_=w(),C=y("div"),C.textContent="Dead Links",S=w(),D=y("div"),P=y("div"),E=v(Y),T=w(),O=y("div"),O.textContent="Unique Domains",$=w(),L=y("div"),R=y("div"),B=v(Q),I=w(),j=y("div"),j.textContent="Added This Week",F=w(),z=y("div"),N=y("div"),W=v(G),V=w(),H=y("div"),H.textContent="Added This Month",M(r,"class","text-2xl font-bold text-blue-600"),M(o,"class","text-xs text-gray-500"),M(n,"class","bg-white p-4 rounded-lg shadow text-center"),M(c,"class","text-2xl font-bold text-red-600"),M(h,"class","text-xs text-gray-500"),M(l,"class","bg-white p-4 rounded-lg shadow text-center"),M(x,"class","text-2xl font-bold text-orange-600"),M(C,"class","text-xs text-gray-500"),M(b,"class","bg-white p-4 rounded-lg shadow text-center"),M(P,"class","text-2xl font-bold text-purple-600"),M(O,"class","text-xs text-gray-500"),M(D,"class","bg-white p-4 rounded-lg shadow text-center"),M(R,"class","text-2xl font-bold text-green-600"),M(j,"class","text-xs text-gray-500"),M(L,"class","bg-white p-4 rounded-lg shadow text-center"),M(N,"class","text-2xl font-bold text-cyan-600"),M(H,"class","text-xs text-gray-500"),M(z,"class","bg-white p-4 rounded-lg shadow text-center"),M(e,"class","grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(e,a),p(e,l),p(l,c),p(c,u),p(l,d),p(l,h),p(e,f),p(e,b),p(b,x),p(x,k),p(b,_),p(b,C),p(e,S),p(e,D),p(D,P),p(P,E),p(D,T),p(D,O),p(e,$),p(e,L),p(L,R),p(R,B),p(L,I),p(L,j),p(e,F),p(e,z),p(z,N),p(N,W),p(z,V),p(z,H)},p(t,e){8192&e[0]&&q!==(q=t[13].total+"")&&A(i,q),8192&e[0]&&U!==(U=t[13].duplicateGroups+"")&&A(u,U),8192&e[0]&&K!==(K=t[13].deadLinks+"")&&A(k,K),8192&e[0]&&Y!==(Y=t[13].uniqueDomains+"")&&A(E,Y),8192&e[0]&&Q!==(Q=t[13].addedThisWeek+"")&&A(B,Q),8192&e[0]&&G!==(G=t[13].addedThisMonth+"")&&A(W,G)},d(t){t&&m(e)}}}function Tg(t){let e;return{c(){e=v("Run Enrichment")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Og(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n                    Enriching...',M(e,"class","flex items-center")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function $g(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,T,O,$,L,R,B,I,j=(t[15].pendingCount||t[15].queueSize||0)+"",F=(t[15].enrichedCount||0)+"",z=(t[15].totalBookmarks||0)+"",N=t[15].enabled?"":"",W=t[15].enabled?"Enabled":"Disabled",V=t[15].pendingCount>0&&t[15].totalBookmarks>0&&Lg(t);return{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v(j),o=w(),a=y("div"),a.textContent="Pending",l=w(),c=y("div"),u=y("div"),d=v(F),h=w(),f=y("div"),f.textContent="Enriched",b=w(),x=y("div"),k=y("div"),_=v(z),C=w(),S=y("div"),S.textContent="Total HTTP",D=w(),P=y("div"),E=y("div"),T=v(N),$=w(),L=y("div"),R=v(W),I=w(),V&&V.c(),M(i,"class","text-xl font-bold text-purple-700"),M(a,"class","text-xs text-purple-600"),M(r,"class","text-center"),M(u,"class","text-xl font-bold text-green-700"),M(f,"class","text-xs text-green-600"),M(c,"class","text-center"),M(k,"class","text-xl font-bold text-blue-700"),M(S,"class","text-xs text-blue-600"),M(x,"class","text-center"),M(E,"class",O="text-xl font-bold "+(t[15].enabled?"text-green-700":"text-gray-500")),M(L,"class",B="text-xs "+(t[15].enabled?"text-green-600":"text-gray-500")),M(P,"class","text-center"),M(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"),M(e,"class","mb-4 p-4 bg-purple-50 rounded-lg border border-purple-200")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(i,s),p(r,o),p(r,a),p(n,l),p(n,c),p(c,u),p(u,d),p(c,h),p(c,f),p(n,b),p(n,x),p(x,k),p(k,_),p(x,C),p(x,S),p(n,D),p(n,P),p(P,E),p(E,T),p(P,$),p(P,L),p(L,R),p(e,I),V&&V.m(e,null)},p(t,n){32768&n[0]&&j!==(j=(t[15].pendingCount||t[15].queueSize||0)+"")&&A(s,j),32768&n[0]&&F!==(F=(t[15].enrichedCount||0)+"")&&A(d,F),32768&n[0]&&z!==(z=(t[15].totalBookmarks||0)+"")&&A(_,z),32768&n[0]&&N!==(N=t[15].enabled?"":"")&&A(T,N),32768&n[0]&&O!==(O="text-xl font-bold "+(t[15].enabled?"text-green-700":"text-gray-500"))&&M(E,"class",O),32768&n[0]&&W!==(W=t[15].enabled?"Enabled":"Disabled")&&A(R,W),32768&n[0]&&B!==(B="text-xs "+(t[15].enabled?"text-green-600":"text-gray-500"))&&M(L,"class",B),t[15].pendingCount>0&&t[15].totalBookmarks>0?V?V.p(t,n):(V=Lg(t),V.c(),V.m(e,null)):V&&(V.d(1),V=null)},d(t){t&&m(e),V&&V.d()}}}function Lg(t){let e,n,r,i,s,o,a,l,c,u,d=(t[15].enrichedCount/t[15].totalBookmarks*100).toFixed(1)+"";return{c(){e=y("div"),n=y("div"),r=y("span"),r.textContent="Progress",i=w(),s=y("span"),o=v(d),a=v("%"),l=w(),c=y("div"),u=y("div"),M(n,"class","flex justify-between text-xs text-purple-600 mb-1"),M(u,"class","bg-purple-600 h-2 rounded-full transition-all duration-300"),P(u,"width",t[15].enrichedCount/t[15].totalBookmarks*100+"%"),M(c,"class","w-full bg-purple-200 rounded-full h-2"),M(e,"class","mt-3")},m(t,d){g(t,e,d),p(e,n),p(n,r),p(n,i),p(n,s),p(s,o),p(s,a),p(e,l),p(e,c),p(c,u)},p(t,e){32768&e[0]&&d!==(d=(t[15].enrichedCount/t[15].totalBookmarks*100).toFixed(1)+"")&&A(o,d),32768&e[0]&&P(u,"width",t[15].enrichedCount/t[15].totalBookmarks*100+"%")},d(t){t&&m(e)}}}function Rg(t){let e;return{c(){e=y("p"),e.textContent=" Will process unenriched bookmarks first, then oldest enriched",M(e,"class","text-xs text-purple-600 mt-1 font-medium")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Bg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x=(t[18].completed||t[18].current)+"",k=t[18].total+"",_=t[18].title&&Ig(t);return{c(){e=y("div"),n=y("div"),r=y("div"),i=y("span"),i.textContent="Processing...",s=w(),o=y("span"),a=v(x),l=v(" / "),c=v(k),u=v(" completed"),d=w(),h=y("div"),f=y("div"),b=w(),_&&_.c(),M(i,"class","text-sm font-medium text-blue-900"),M(o,"class","text-sm text-blue-700"),M(r,"class","flex justify-between items-center mb-2"),M(f,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),P(f,"width",(t[18].completed||t[18].current)/t[18].total*100+"%"),M(h,"class","w-full bg-blue-200 rounded-full h-2"),M(n,"class","mb-3"),M(e,"class","mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(r,s),p(r,o),p(o,a),p(o,l),p(o,c),p(o,u),p(n,d),p(n,h),p(h,f),p(e,b),_&&_.m(e,null)},p(t,n){262144&n[0]&&x!==(x=(t[18].completed||t[18].current)+"")&&A(a,x),262144&n[0]&&k!==(k=t[18].total+"")&&A(c,k),262144&n[0]&&P(f,"width",(t[18].completed||t[18].current)/t[18].total*100+"%"),t[18].title?_?_.p(t,n):(_=Ig(t),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(t){t&&m(e),_&&_.d()}}}function Ig(t){let e,n,r,i,s,o,a,l,c,u="processing"===t[18].status?"":"completed"===t[18].status?"":"",d=t[18].title+"",h=t[18].url+"";return{c(){e=y("div"),n=y("div"),r=v(u),i=w(),s=v(d),a=w(),l=y("div"),c=v(h),M(n,"class","font-medium truncate"),M(n,"title",o=t[18].url),M(l,"class","text-blue-600 truncate text-[10px]"),M(e,"class","text-xs text-blue-800 space-y-1")},m(t,o){g(t,e,o),p(e,n),p(n,r),p(n,i),p(n,s),p(e,a),p(e,l),p(l,c)},p(t,e){262144&e[0]&&u!==(u="processing"===t[18].status?"":"completed"===t[18].status?"":"")&&A(r,u),262144&e[0]&&d!==(d=t[18].title+"")&&A(s,d),262144&e[0]&&o!==(o=t[18].url)&&M(n,"title",o),262144&e[0]&&h!==(h=t[18].url+"")&&A(c,h)},d(t){t&&m(e)}}}function jg(t){let e,n;function r(t,e){return t[17].error?zg:Fg}let i=r(t),s=i(t);return{c(){e=y("div"),s.c(),M(e,"class",n="mt-4 p-4 rounded-lg "+(t[17].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))},m(t,n){g(t,e,n),s.m(e,null)},p(t,o){i===(i=r(t))&&s?s.p(t,o):(s.d(1),s=i(t),s&&(s.c(),s.m(e,null))),131072&o[0]&&n!==(n="mt-4 p-4 rounded-lg "+(t[17].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))&&M(e,"class",n)},d(t){t&&m(e),s.d()}}}function Fg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b=(t[17].processed||0)+"",x=(t[17].success||0)+"",k=t[17].failed>0&&Ng(t),_=t[17].skipped>0&&Wg(t);return{c(){e=y("div"),n=y("div"),n.innerHTML="<strong>Enrichment Complete!</strong>",r=w(),i=y("div"),s=v("Processed: "),o=v(b),a=v(" bookmarks"),l=w(),c=y("div"),u=v("Successful: "),d=v(x),h=w(),k&&k.c(),f=w(),_&&_.c(),M(e,"class","text-green-700 text-sm space-y-1")},m(t,m){g(t,e,m),p(e,n),p(e,r),p(e,i),p(i,s),p(i,o),p(i,a),p(e,l),p(e,c),p(c,u),p(c,d),p(e,h),k&&k.m(e,null),p(e,f),_&&_.m(e,null)},p(t,n){131072&n[0]&&b!==(b=(t[17].processed||0)+"")&&A(o,b),131072&n[0]&&x!==(x=(t[17].success||0)+"")&&A(d,x),t[17].failed>0?k?k.p(t,n):(k=Ng(t),k.c(),k.m(e,f)):k&&(k.d(1),k=null),t[17].skipped>0?_?_.p(t,n):(_=Wg(t),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(t){t&&m(e),k&&k.d(),_&&_.d()}}}function zg(t){let e,n,r,i,s=t[17].error+"";return{c(){e=y("div"),n=y("strong"),n.textContent="Error:",r=w(),i=v(s),M(e,"class","text-red-700 text-sm")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i)},p(t,e){131072&e[0]&&s!==(s=t[17].error+"")&&A(i,s)},d(t){t&&m(e)}}}function Ng(t){let e,n,r,i=t[17].failed+"";return{c(){e=y("div"),n=v("Failed: "),r=v(i),M(e,"class","text-orange-600")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){131072&e[0]&&i!==(i=t[17].failed+"")&&A(r,i)},d(t){t&&m(e)}}}function Wg(t){let e,n,r,i=t[17].skipped+"";return{c(){e=y("div"),n=v("Skipped (already enriched): "),r=v(i),M(e,"class","text-gray-600")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){131072&e[0]&&i!==(i=t[17].skipped+"")&&A(r,i)},d(t){t&&m(e)}}}function Vg(e){let n;return{c(){n=y("p"),n.textContent='Click "Run Enrichment" to fetch metadata for bookmarks that haven\'t been enriched yet. \n                  Only new bookmarks without descriptions or categories will be processed.',M(n,"class","text-gray-500 text-sm")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Hg(t){let e,n,r,i,s,o,a,l=t[19].length+"",c=nt(t[19].slice().reverse()),u=[];for(let e=0;e<c.length;e+=1)u[e]=qg(vg(t,c,e));return{c(){e=y("details"),n=y("summary"),r=v("View Detailed Logs ("),i=v(l),s=v(")"),o=w(),a=y("div");for(let t=0;t<u.length;t+=1)u[t].c();M(n,"class","cursor-pointer text-sm text-gray-600 hover:text-gray-800 font-medium"),M(a,"class","mt-2 max-h-64 overflow-y-auto bg-gray-50 rounded p-3 space-y-1 text-xs font-mono"),M(e,"class","mt-4")},m(t,l){g(t,e,l),p(e,n),p(n,r),p(n,i),p(n,s),p(e,o),p(e,a);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(a,null)},p(t,e){if(524288&e[0]&&l!==(l=t[19].length+"")&&A(i,l),524288&e[0]){let n;for(c=nt(t[19].slice().reverse()),n=0;n<c.length;n+=1){const r=vg(t,c,n);u[n]?u[n].p(r,e):(u[n]=qg(r),u[n].c(),u[n].m(a,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}},d(t){t&&m(e),b(u,t)}}}function qg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k=new Date(t[210].timestamp).toLocaleTimeString()+"",_=t[210].current+"",C=t[210].total+"",S="completed"===t[210].status?"":"failed"===t[210].status||"error"===t[210].status?"":"",D=(t[210].title||t[210].url)+"";return{c(){e=y("div"),n=y("span"),r=v(k),i=v(" \n                        ["),s=v(_),o=v("/"),a=v(C),l=v("] \n                        "),c=v(S),u=w(),d=y("span"),h=v(D),b=w(),M(n,"class","text-gray-400"),M(d,"class","truncate inline-block max-w-md"),M(d,"title",f=t[210].url),M(e,"class",x="completed"===t[210].status?"text-green-700":"failed"===t[210].status||"error"===t[210].status?"text-red-700":"text-gray-600")},m(t,f){g(t,e,f),p(e,n),p(n,r),p(e,i),p(e,s),p(e,o),p(e,a),p(e,l),p(e,c),p(e,u),p(e,d),p(d,h),p(e,b)},p(t,n){524288&n[0]&&k!==(k=new Date(t[210].timestamp).toLocaleTimeString()+"")&&A(r,k),524288&n[0]&&_!==(_=t[210].current+"")&&A(s,_),524288&n[0]&&C!==(C=t[210].total+"")&&A(a,C),524288&n[0]&&S!==(S="completed"===t[210].status?"":"failed"===t[210].status||"error"===t[210].status?"":"")&&A(c,S),524288&n[0]&&D!==(D=(t[210].title||t[210].url)+"")&&A(h,D),524288&n[0]&&f!==(f=t[210].url)&&M(d,"title",f),524288&n[0]&&x!==(x="completed"===t[210].status?"text-green-700":"failed"===t[210].status||"error"===t[210].status?"text-red-700":"text-gray-600")&&M(e,"class",x)},d(t){t&&m(e)}}}function Ug(t){let e;return{c(){e=v("Detect Platforms")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Kg(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n                    Processing...',M(e,"class","flex items-center")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Yg(t){let e,n,r,i,s,o,a,l,c,u,d,h=t[24].processed+"",f=t[24].total+"";return{c(){e=y("div"),n=y("div"),r=y("span"),r.textContent="Processing bookmarks...",i=w(),s=y("span"),o=v(h),a=v(" / "),l=v(f),c=w(),u=y("div"),d=y("div"),M(n,"class","flex justify-between text-sm text-gray-600 mb-1"),M(d,"class","bg-pink-600 h-2 rounded-full transition-all duration-300"),P(d,"width",t[24].processed/t[24].total*100+"%"),M(u,"class","w-full bg-gray-200 rounded-full h-2"),M(e,"class","mb-4")},m(t,h){g(t,e,h),p(e,n),p(n,r),p(n,i),p(n,s),p(s,o),p(s,a),p(s,l),p(e,c),p(e,u),p(u,d)},p(t,e){16777216&e[0]&&h!==(h=t[24].processed+"")&&A(o,h),16777216&e[0]&&f!==(f=t[24].total+"")&&A(l,f),16777216&e[0]&&P(d,"width",t[24].processed/t[24].total*100+"%")},d(t){t&&m(e)}}}function Qg(e){let n;return{c(){n=y("p"),n.textContent='Click "Detect Platforms" to parse all bookmark URLs and extract platform-specific data.\n                  This enables filtering by platform, channel, repo, and more.',M(n,"class","text-gray-500 text-sm")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Gg(t){let e,n;function r(t,e){return t[25].error?Jg:Xg}let i=r(t),s=i(t);return{c(){e=y("div"),s.c(),M(e,"class",n="p-4 rounded-lg "+(t[25].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))},m(t,n){g(t,e,n),s.m(e,null)},p(t,o){i===(i=r(t))&&s?s.p(t,o):(s.d(1),s=i(t),s&&(s.c(),s.m(e,null))),33554432&o[0]&&n!==(n="p-4 rounded-lg "+(t[25].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))&&M(e,"class",n)},d(t){t&&m(e),s.d()}}}function Xg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k=t[25].processed+"",_=t[25].updated+"",C=t[25].platforms&&Object.keys(t[25].platforms).length>0,S=t[25].errors>0&&Zg(t),D=C&&tm(t);return{c(){e=y("div"),n=y("div"),n.textContent=" Platform Detection Complete!",r=w(),i=y("div"),s=y("span"),o=v("Processed: "),a=y("strong"),l=v(k),c=w(),u=y("span"),d=v("Updated: "),h=y("strong"),f=v(_),b=w(),S&&S.c(),x=w(),D&&D.c(),M(n,"class","font-medium"),M(i,"class","flex flex-wrap gap-4 text-xs"),M(e,"class","text-green-700 text-sm space-y-2")},m(t,m){g(t,e,m),p(e,n),p(e,r),p(e,i),p(i,s),p(s,o),p(s,a),p(a,l),p(i,c),p(i,u),p(u,d),p(u,h),p(h,f),p(i,b),S&&S.m(i,null),p(e,x),D&&D.m(e,null)},p(t,n){33554432&n[0]&&k!==(k=t[25].processed+"")&&A(l,k),33554432&n[0]&&_!==(_=t[25].updated+"")&&A(f,_),t[25].errors>0?S?S.p(t,n):(S=Zg(t),S.c(),S.m(i,null)):S&&(S.d(1),S=null),33554432&n[0]&&(C=t[25].platforms&&Object.keys(t[25].platforms).length>0),C?D?D.p(t,n):(D=tm(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),S&&S.d(),D&&D.d()}}}function Jg(t){let e,n,r,i,s=t[25].error+"";return{c(){e=y("div"),n=y("strong"),n.textContent="Error:",r=w(),i=v(s),M(e,"class","text-red-700 text-sm")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i)},p(t,e){33554432&e[0]&&s!==(s=t[25].error+"")&&A(i,s)},d(t){t&&m(e)}}}function Zg(t){let e,n,r,i=t[25].errors+"";return{c(){e=y("span"),n=v("Errors: "),r=v(i),M(e,"class","text-orange-600")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){33554432&e[0]&&i!==(i=t[25].errors+"")&&A(r,i)},d(t){t&&m(e)}}}function tm(t){let e,n,r,i,s=nt(Object.entries(t[25].platforms)),o=[];for(let e=0;e<s.length;e+=1)o[e]=em(xg(t,s,e));return{c(){e=y("div"),n=y("div"),n.textContent="Platforms detected:",r=w(),i=y("div");for(let t=0;t<o.length;t+=1)o[t].c();M(n,"class","text-xs text-green-600 mb-1"),M(i,"class","flex flex-wrap gap-1"),M(e,"class","mt-2 pt-2 border-t border-green-200")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(i,null)},p(t,e){if(33554432&e[0]){let n;for(s=nt(Object.entries(t[25].platforms)),n=0;n<s.length;n+=1){const r=xg(t,s,n);o[n]?o[n].p(r,e):(o[n]=em(r),o[n].c(),o[n].m(i,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=s.length}},d(t){t&&m(e),b(o,t)}}}function em(t){let e,n,r,i,s=t[206]+"",o=t[207]+"";return{c(){e=y("span"),n=v(s),r=v(": "),i=v(o),M(e,"class","px-2 py-0.5 bg-white rounded text-xs")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i)},p(t,e){33554432&e[0]&&s!==(s=t[206]+"")&&A(n,s),33554432&e[0]&&o!==(o=t[207]+"")&&A(i,o)},d(t){t&&m(e)}}}function nm(t){let e,n,r,i=t[11].length+"";return{c(){e=v("("),n=v(i),r=v(")")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i)},p(t,e){2048&e[0]&&i!==(i=t[11].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function rm(t){let e,n,i,s,o,a,l,c;function u(t,e){return t[50]?sm:im}let d=u(t),h=d(t);function f(t,e){return t[29]?am:om}let b=f(t),x=b(t);return{c(){e=y("div"),n=y("button"),h.c(),s=w(),o=y("button"),x.c(),n.disabled=i=t[50]||t[29],M(n,"class","px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),M(n,"title","Re-check dead links to see if they're alive again"),o.disabled=a=t[29]||t[50],M(o,"class","px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),M(e,"class","flex gap-2 flex-shrink-0")},m(r,i){g(r,e,i),p(e,n),h.m(n,null),p(e,s),p(e,o),x.m(o,null),l||(c=[_(n,"click",t[78]),_(o,"click",t[77])],l=!0)},p(t,e){d!==(d=u(t))&&(h.d(1),h=d(t),h&&(h.c(),h.m(n,null))),536870912&e[0]|524288&e[1]&&i!==(i=t[50]||t[29])&&(n.disabled=i),b!==(b=f(t))&&(x.d(1),x=b(t),x&&(x.c(),x.m(o,null))),536870912&e[0]|524288&e[1]&&a!==(a=t[29]||t[50])&&(o.disabled=a)},d(t){t&&m(e),h.d(),x.d(),l=!1,r(c)}}}function im(t){let e;return{c(){e=v(" Re-check")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function sm(t){let e,n;return{c(){e=y("div"),n=v("\n                      Re-checking..."),M(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,r){g(t,e,r),g(t,n,r)},d(t){t&&(m(e),m(n))}}}function om(t){let e;return{c(){e=v(" Delete All")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function am(t){let e,n;return{c(){e=y("div"),n=v("\n                      Deleting..."),M(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,r){g(t,e,r),g(t,n,r)},d(t){t&&(m(e),m(n))}}}function lm(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,P,E,T,O,$,L,R,B,I,j=(t[53]>0&&t[53]<t[11].length?t[53]:t[11].length)+"",F=t[11].length+"";return{c(){e=y("div"),n=y("h4"),n.textContent="Re-check Configuration",i=w(),s=y("div"),o=y("div"),a=y("label"),a.innerHTML='Batch Size\n                        <span class="text-xs text-gray-500 font-normal">(0 = all)</span>',l=w(),c=y("input"),d=w(),h=y("p"),f=v("Will process "),b=v(j),x=v(" of "),k=v(F),C=v(" dead links"),P=w(),E=y("div"),T=y("label"),T.innerHTML='Concurrency\n                        <span class="text-xs text-gray-500 font-normal">(parallel requests)</span>',O=w(),$=y("input"),L=w(),R=y("p"),R.textContent="Higher = faster, but more resource intensive",M(n,"class","text-sm font-medium text-gray-700 mb-3"),M(a,"for","deadLinkBatchSize"),M(a,"class","block text-sm font-medium text-gray-700 mb-1"),M(c,"id","deadLinkBatchSize"),M(c,"type","number"),M(c,"min","0"),M(c,"max",u=t[11].length),M(c,"class","w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),c.disabled=t[50],M(h,"class","text-xs text-gray-500 mt-1"),M(T,"for","deadLinkConcurrency"),M(T,"class","block text-sm font-medium text-gray-700 mb-1"),M($,"id","deadLinkConcurrency"),M($,"type","number"),M($,"min","1"),M($,"max","10"),M($,"class","w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),$.disabled=t[50],M(R,"class","text-xs text-gray-500 mt-1"),M(s,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),M(e,"class","mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200")},m(r,u){g(r,e,u),p(e,n),p(e,i),p(e,s),p(s,o),p(o,a),p(o,l),p(o,c),D(c,t[53]),p(o,d),p(o,h),p(h,f),p(h,b),p(h,x),p(h,k),p(h,C),p(s,P),p(s,E),p(E,T),p(E,O),p(E,$),D($,t[54]),p(E,L),p(E,R),B||(I=[_(c,"input",t[113]),_($,"input",t[114])],B=!0)},p(t,e){2048&e[0]&&u!==(u=t[11].length)&&M(c,"max",u),524288&e[1]&&(c.disabled=t[50]),4194304&e[1]&&S(c.value)!==t[53]&&D(c,t[53]),2048&e[0]|4194304&e[1]&&j!==(j=(t[53]>0&&t[53]<t[11].length?t[53]:t[11].length)+"")&&A(b,j),2048&e[0]&&F!==(F=t[11].length+"")&&A(k,F),524288&e[1]&&($.disabled=t[50]),8388608&e[1]&&S($.value)!==t[54]&&D($,t[54])},d(t){t&&m(e),B=!1,r(I)}}}function cm(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C=t[51].current+"",S=t[51].total+"",D=(t[51].title||t[51].url)+"",E=t[51].results&&um(t);return{c(){e=y("div"),n=y("div"),r=y("span"),r.textContent="Re-checking dead links...",i=w(),s=y("span"),o=v(C),a=v("/"),l=v(S),c=w(),u=y("div"),d=y("div"),h=w(),f=y("div"),b=y("p"),x=v("Checking: "),k=v(D),_=w(),E&&E.c(),M(r,"class","text-sm font-medium text-blue-800"),M(s,"class","text-sm text-blue-600"),M(n,"class","flex items-center justify-between mb-2"),M(d,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),P(d,"width",t[51].current/t[51].total*100+"%"),M(u,"class","w-full bg-blue-200 rounded-full h-2 mb-2"),M(b,"class","text-xs text-blue-600 truncate flex-1"),M(f,"class","flex items-center justify-between"),M(e,"class","mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(n,i),p(n,s),p(s,o),p(s,a),p(s,l),p(e,c),p(e,u),p(u,d),p(e,h),p(e,f),p(f,b),p(b,x),p(b,k),p(f,_),E&&E.m(f,null)},p(t,e){1048576&e[1]&&C!==(C=t[51].current+"")&&A(o,C),1048576&e[1]&&S!==(S=t[51].total+"")&&A(l,S),1048576&e[1]&&P(d,"width",t[51].current/t[51].total*100+"%"),1048576&e[1]&&D!==(D=(t[51].title||t[51].url)+"")&&A(k,D),t[51].results?E?E.p(t,e):(E=um(t),E.c(),E.m(f,null)):E&&(E.d(1),E=null)},d(t){t&&m(e),E&&E.d()}}}function um(t){let e,n,r,i,s,o,a,l,c=t[51].results.success+"",u=t[51].results.stillDead+"";return{c(){e=y("div"),n=y("span"),r=v(" "),i=v(c),s=w(),o=y("span"),a=v(" "),l=v(u),M(n,"class","text-green-600"),M(o,"class","text-red-600"),M(e,"class","flex gap-2 text-xs text-blue-600 ml-2")},m(t,c){g(t,e,c),p(e,n),p(n,r),p(n,i),p(e,s),p(e,o),p(o,a),p(o,l)},p(t,e){1048576&e[1]&&c!==(c=t[51].results.success+"")&&A(i,c),1048576&e[1]&&u!==(u=t[51].results.stillDead+"")&&A(l,u)},d(t){t&&m(e)}}}function dm(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,T,O,$,L,R,B,I=t[52].total+"",j=t[52].success+"",F=t[52].stillDead+"",z=t[52].errors+"",N=t[52].pending>0&&hm(t);return{c(){e=y("div"),n=y("h4"),n.textContent="Re-check Complete",r=w(),i=y("div"),s=y("div"),o=y("div"),a=v(I),l=w(),c=y("div"),c.textContent="Checked",u=w(),d=y("div"),h=y("div"),f=v(j),b=w(),x=y("div"),x.textContent="Now Alive",k=w(),_=y("div"),C=y("div"),S=v(F),D=w(),P=y("div"),P.textContent="Still Dead",E=w(),T=y("div"),O=y("div"),$=v(z),L=w(),R=y("div"),R.textContent="Errors",B=w(),N&&N.c(),M(n,"class","text-sm font-semibold text-green-800 mb-2"),M(o,"class","text-lg font-bold text-green-700"),M(c,"class","text-xs text-green-600"),M(s,"class","text-center"),M(h,"class","text-lg font-bold text-green-700"),M(x,"class","text-xs text-green-600"),M(d,"class","text-center"),M(C,"class","text-lg font-bold text-red-700"),M(P,"class","text-xs text-red-600"),M(_,"class","text-center"),M(O,"class","text-lg font-bold text-yellow-700"),M(R,"class","text-xs text-yellow-600"),M(T,"class","text-center"),M(i,"class","grid grid-cols-2 md:grid-cols-5 gap-4 text-sm"),M(e,"class","mb-4 p-4 bg-green-50 rounded-lg border border-green-200")},m(t,m){g(t,e,m),p(e,n),p(e,r),p(e,i),p(i,s),p(s,o),p(o,a),p(s,l),p(s,c),p(i,u),p(i,d),p(d,h),p(h,f),p(d,b),p(d,x),p(i,k),p(i,_),p(_,C),p(C,S),p(_,D),p(_,P),p(i,E),p(i,T),p(T,O),p(O,$),p(T,L),p(T,R),p(i,B),N&&N.m(i,null)},p(t,e){2097152&e[1]&&I!==(I=t[52].total+"")&&A(a,I),2097152&e[1]&&j!==(j=t[52].success+"")&&A(f,j),2097152&e[1]&&F!==(F=t[52].stillDead+"")&&A(S,F),2097152&e[1]&&z!==(z=t[52].errors+"")&&A($,z),t[52].pending>0?N?N.p(t,e):(N=hm(t),N.c(),N.m(i,null)):N&&(N.d(1),N=null)},d(t){t&&m(e),N&&N.d()}}}function hm(t){let e,n,r,i,s,o=t[52].pending+"";return{c(){e=y("div"),n=y("div"),r=v(o),i=w(),s=y("div"),s.textContent="Remaining",M(n,"class","text-lg font-bold text-blue-700"),M(s,"class","text-xs text-blue-600"),M(e,"class","text-center")},m(t,o){g(t,e,o),p(e,n),p(n,r),p(e,i),p(e,s)},p(t,e){2097152&e[1]&&o!==(o=t[52].pending+"")&&A(r,o)},d(t){t&&m(e)}}}function fm(t){let e,n,r,i,s=t[26]&&t[26].total>0&&mm(t),o=nt(t[11].slice(0,t[34])),a=[];for(let e=0;e<o.length;e+=1)a[e]=Am(mg(t,o,e));let l=t[11].length>t[34]&&Dm(t);return{c(){s&&s.c(),e=w(),n=y("div");for(let t=0;t<a.length;t+=1)a[t].c();r=w(),l&&l.c(),i=k(),M(n,"class","space-y-2 max-h-[32rem] overflow-y-auto")},m(t,o){s&&s.m(t,o),g(t,e,o),g(t,n,o);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(n,null);g(t,r,o),l&&l.m(t,o),g(t,i,o)},p(t,r){if(t[26]&&t[26].total>0?s?s.p(t,r):(s=mm(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),2048&r[0]|8&r[1]|16384&r[2]){let e;for(o=nt(t[11].slice(0,t[34])),e=0;e<o.length;e+=1){const i=mg(t,o,e);a[e]?a[e].p(i,r):(a[e]=Am(i),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=o.length}t[11].length>t[34]?l?l.p(t,r):(l=Dm(t),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){t&&(m(e),m(n),m(r),m(i)),s&&s.d(t),b(a,t),l&&l.d(t)}}}function pm(e){let n;return{c(){n=y("p"),n.textContent="No dead links detected. Run enrichment to check bookmark availability.",M(n,"class","text-gray-500")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function gm(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"></div> <span class="ml-3 text-gray-500">Loading dead links...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function mm(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H,q,U,K=t[26].total+"",Y=t[26].deadLinkRate+"",Q=t[26].checkedCount+"",G=t[26].byDomain.length+"",X=t[26].byAge.recent>0&&bm(t),J=t[26].byAge.moderate>0&&ym(t),Z=t[26].byAge.old>0&&xm(t),tt=t[26].byAge.ancient>0&&vm(t),et=t[26].byDomain.length>0&&wm(t),nt=t[26].byCategory.length>0&&_m(t);return{c(){e=y("div"),n=y("h4"),n.textContent=" Dead Link Insights",r=w(),i=y("div"),s=y("div"),o=y("div"),a=v(K),l=w(),c=y("div"),c.textContent="Total Dead",u=w(),d=y("div"),h=y("div"),f=v(Y),b=v("%"),x=w(),k=y("div"),k.textContent="Dead Link Rate",_=w(),C=y("div"),S=y("div"),D=v(Q),P=w(),E=y("div"),E.textContent="Total Checked",T=w(),O=y("div"),$=y("div"),L=v(G),R=w(),B=y("div"),B.textContent="Affected Domains",I=w(),j=y("div"),F=y("h5"),F.textContent="By Bookmark Age",z=w(),N=y("div"),X&&X.c(),W=w(),J&&J.c(),V=w(),Z&&Z.c(),H=w(),tt&&tt.c(),q=w(),et&&et.c(),U=w(),nt&&nt.c(),M(n,"class","text-sm font-semibold text-red-800 mb-3"),M(o,"class","text-2xl font-bold text-red-700"),M(c,"class","text-xs text-red-600"),M(s,"class","text-center"),M(h,"class","text-2xl font-bold text-red-700"),M(k,"class","text-xs text-red-600"),M(d,"class","text-center"),M(S,"class","text-2xl font-bold text-red-700"),M(E,"class","text-xs text-red-600"),M(C,"class","text-center"),M($,"class","text-2xl font-bold text-red-700"),M(B,"class","text-xs text-red-600"),M(O,"class","text-center"),M(i,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"),M(F,"class","text-xs font-medium text-red-700 mb-2"),M(N,"class","flex gap-2 flex-wrap"),M(j,"class","mb-4"),M(e,"class","mb-6 p-4 bg-red-50 rounded-lg border border-red-200")},m(t,m){g(t,e,m),p(e,n),p(e,r),p(e,i),p(i,s),p(s,o),p(o,a),p(s,l),p(s,c),p(i,u),p(i,d),p(d,h),p(h,f),p(h,b),p(d,x),p(d,k),p(i,_),p(i,C),p(C,S),p(S,D),p(C,P),p(C,E),p(i,T),p(i,O),p(O,$),p($,L),p(O,R),p(O,B),p(e,I),p(e,j),p(j,F),p(j,z),p(j,N),X&&X.m(N,null),p(N,W),J&&J.m(N,null),p(N,V),Z&&Z.m(N,null),p(N,H),tt&&tt.m(N,null),p(e,q),et&&et.m(e,null),p(e,U),nt&&nt.m(e,null)},p(t,n){67108864&n[0]&&K!==(K=t[26].total+"")&&A(a,K),67108864&n[0]&&Y!==(Y=t[26].deadLinkRate+"")&&A(f,Y),67108864&n[0]&&Q!==(Q=t[26].checkedCount+"")&&A(D,Q),67108864&n[0]&&G!==(G=t[26].byDomain.length+"")&&A(L,G),t[26].byAge.recent>0?X?X.p(t,n):(X=bm(t),X.c(),X.m(N,W)):X&&(X.d(1),X=null),t[26].byAge.moderate>0?J?J.p(t,n):(J=ym(t),J.c(),J.m(N,V)):J&&(J.d(1),J=null),t[26].byAge.old>0?Z?Z.p(t,n):(Z=xm(t),Z.c(),Z.m(N,H)):Z&&(Z.d(1),Z=null),t[26].byAge.ancient>0?tt?tt.p(t,n):(tt=vm(t),tt.c(),tt.m(N,null)):tt&&(tt.d(1),tt=null),t[26].byDomain.length>0?et?et.p(t,n):(et=wm(t),et.c(),et.m(e,U)):et&&(et.d(1),et=null),t[26].byCategory.length>0?nt?nt.p(t,n):(nt=_m(t),nt.c(),nt.m(e,null)):nt&&(nt.d(1),nt=null)},d(t){t&&m(e),X&&X.d(),J&&J.d(),Z&&Z.d(),tt&&tt.d(),et&&et.d(),nt&&nt.d()}}}function bm(t){let e,n,r,i=t[26].byAge.recent+"";return{c(){e=y("span"),n=v("< 1 week: "),r=v(i),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){67108864&e[0]&&i!==(i=t[26].byAge.recent+"")&&A(r,i)},d(t){t&&m(e)}}}function ym(t){let e,n,r,i=t[26].byAge.moderate+"";return{c(){e=y("span"),n=v("1 week - 1 month: "),r=v(i),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){67108864&e[0]&&i!==(i=t[26].byAge.moderate+"")&&A(r,i)},d(t){t&&m(e)}}}function xm(t){let e,n,r,i=t[26].byAge.old+"";return{c(){e=y("span"),n=v("1 month - 1 year: "),r=v(i),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){67108864&e[0]&&i!==(i=t[26].byAge.old+"")&&A(r,i)},d(t){t&&m(e)}}}function vm(t){let e,n,r,i=t[26].byAge.ancient+"";return{c(){e=y("span"),n=v("> 1 year: "),r=v(i),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){67108864&e[0]&&i!==(i=t[26].byAge.ancient+"")&&A(r,i)},d(t){t&&m(e)}}}function wm(t){let e,n,r,i,s=nt(t[26].byDomain.slice(0,5)),o=[];for(let e=0;e<s.length;e+=1)o[e]=km(yg(t,s,e));return{c(){e=y("div"),n=y("h5"),n.textContent="Top Domains with Dead Links",r=w(),i=y("div");for(let t=0;t<o.length;t+=1)o[t].c();M(n,"class","text-xs font-medium text-red-700 mb-2"),M(i,"class","flex gap-2 flex-wrap"),M(e,"class","mb-4")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(i,null)},p(t,e){if(67108864&e[0]){let n;for(s=nt(t[26].byDomain.slice(0,5)),n=0;n<s.length;n+=1){const r=yg(t,s,n);o[n]?o[n].p(r,e):(o[n]=km(r),o[n].c(),o[n].m(i,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=s.length}},d(t){t&&m(e),b(o,t)}}}function km(t){let e,n,r,i,s,o=t[203].domain+"",a=t[203].count+"";return{c(){e=y("span"),n=v(o),r=v(": "),i=v(a),s=w(),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,o){g(t,e,o),p(e,n),p(e,r),p(e,i),p(e,s)},p(t,e){67108864&e[0]&&o!==(o=t[203].domain+"")&&A(n,o),67108864&e[0]&&a!==(a=t[203].count+"")&&A(i,a)},d(t){t&&m(e)}}}function _m(t){let e,n,r,i,s=nt(t[26].byCategory.slice(0,5)),o=[];for(let e=0;e<s.length;e+=1)o[e]=Cm(bg(t,s,e));return{c(){e=y("div"),n=y("h5"),n.textContent="By Category",r=w(),i=y("div");for(let t=0;t<o.length;t+=1)o[t].c();M(n,"class","text-xs font-medium text-red-700 mb-2"),M(i,"class","flex gap-2 flex-wrap")},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(i,null)},p(t,e){if(67108864&e[0]){let n;for(s=nt(t[26].byCategory.slice(0,5)),n=0;n<s.length;n+=1){const r=bg(t,s,n);o[n]?o[n].p(r,e):(o[n]=Cm(r),o[n].c(),o[n].m(i,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=s.length}},d(t){t&&m(e),b(o,t)}}}function Cm(t){let e,n,r,i,s,o=t[200].category+"",a=t[200].count+"";return{c(){e=y("span"),n=v(o),r=v(": "),i=v(a),s=w(),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,o){g(t,e,o),p(e,n),p(e,r),p(e,i),p(e,s)},p(t,e){67108864&e[0]&&o!==(o=t[200].category+"")&&A(n,o),67108864&e[0]&&a!==(a=t[200].count+"")&&A(i,a)},d(t){t&&m(e)}}}function Mm(t){let e,n,r,i=t[167].domain+"";return{c(){e=y("span"),n=v(" "),r=v(i),M(e,"class","text-gray-500")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){2048&e[0]|8&e[1]&&i!==(i=t[167].domain+"")&&A(r,i)},d(t){t&&m(e)}}}function Sm(t){let e,n,r,i=t[167].category+"";return{c(){e=y("span"),n=v(" "),r=v(i),M(e,"class","text-gray-500")},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){2048&e[0]|8&e[1]&&i!==(i=t[167].category+"")&&A(r,i)},d(t){t&&m(e)}}}function Am(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,T,O,$,L,R=t[167].title+"",B=t[167].url+"",I=(t[167].lastChecked?new Date(t[167].lastChecked).toLocaleDateString():"Unknown")+"",j=t[167].domain&&Mm(t),F=t[167].category&&Sm(t);function z(){return t[115](t[167])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v(R),o=w(),a=y("div"),l=v(B),c=w(),u=y("div"),d=y("span"),h=v("Last checked: "),f=v(I),b=w(),j&&j.c(),x=w(),F&&F.c(),k=w(),C=y("div"),S=y("a"),D=v("Try Again"),E=w(),T=y("button"),T.textContent="Delete",O=w(),M(i,"class","text-sm font-medium text-gray-800 truncate"),M(a,"class","text-xs text-gray-500 truncate"),M(u,"class","text-xs text-red-600 mt-1 flex items-center gap-3"),M(r,"class","flex-1 min-w-0"),M(S,"href",P=t[167].url),M(S,"target","_blank"),M(S,"rel","noopener noreferrer"),M(S,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300"),M(T,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(C,"class","flex gap-1 ml-2 flex-shrink-0"),M(n,"class","flex items-start justify-between"),M(e,"class","p-3 bg-red-50 rounded border border-red-200")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(i,s),p(r,o),p(r,a),p(a,l),p(r,c),p(r,u),p(u,d),p(d,h),p(d,f),p(u,b),j&&j.m(u,null),p(u,x),F&&F.m(u,null),p(n,k),p(n,C),p(C,S),p(S,D),p(C,E),p(C,T),p(e,O),$||(L=_(T,"click",z),$=!0)},p(e,n){t=e,2048&n[0]|8&n[1]&&R!==(R=t[167].title+"")&&A(s,R),2048&n[0]|8&n[1]&&B!==(B=t[167].url+"")&&A(l,B),2048&n[0]|8&n[1]&&I!==(I=(t[167].lastChecked?new Date(t[167].lastChecked).toLocaleDateString():"Unknown")+"")&&A(f,I),t[167].domain?j?j.p(t,n):(j=Mm(t),j.c(),j.m(u,x)):j&&(j.d(1),j=null),t[167].category?F?F.p(t,n):(F=Sm(t),F.c(),F.m(u,null)):F&&(F.d(1),F=null),2048&n[0]|8&n[1]&&P!==(P=t[167].url)&&M(S,"href",P)},d(t){t&&m(e),j&&j.d(),F&&F.d(),$=!1,L()}}}function Dm(t){let e,n,r,i,s,o,a,l,c,u=t[11].length+"";return{c(){e=y("div"),n=y("button"),r=v("Load More ("),i=v(t[34]),s=v(" of "),o=v(u),a=v(" shown)"),M(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),M(e,"class","mt-4 text-center")},m(u,d){g(u,e,d),p(e,n),p(n,r),p(n,i),p(n,s),p(n,o),p(n,a),l||(c=_(n,"click",t[75]),l=!0)},p(t,e){8&e[1]&&A(i,t[34]),2048&e[0]&&u!==(u=t[11].length+"")&&A(o,u)},d(t){t&&m(e),l=!1,c()}}}function Pm(t){let e,n,r,i=t[9].length+"";return{c(){e=v("("),n=v(i),r=v(" groups)")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i)},p(t,e){512&e[0]&&i!==(i=t[9].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function Em(t){let e,n,r,i=nt(t[9].slice(0,t[32])),s=[];for(let e=0;e<i.length;e+=1)s[e]=Lm(pg(t,i,e));let o=t[9].length>t[32]&&Rm(t);return{c(){e=y("div");for(let t=0;t<s.length;t+=1)s[t].c();n=w(),o&&o.c(),r=k(),M(e,"class","space-y-6 max-h-[32rem] overflow-y-auto")},m(t,i){g(t,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);g(t,n,i),o&&o.m(t,i),g(t,r,i)},p(t,n){if(512&n[0]|2&n[1]|131072&n[2]){let r;for(i=nt(t[9].slice(0,t[32])),r=0;r<i.length;r+=1){const o=pg(t,i,r);s[r]?s[r].p(o,n):(s[r]=Lm(o),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}t[9].length>t[32]?o?o.p(t,n):(o=Rm(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(t){t&&(m(e),m(n),m(r)),b(s,t),o&&o.d(t)}}}function Tm(e){let n;return{c(){n=y("p"),n.textContent="No duplicate bookmarks found. Great!",M(n,"class","text-gray-500")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Om(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-500">Finding duplicates...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function $m(t){let e,n,r,i,s,o,a,l,c,u=t[167].title+"",d=(t[167].folderPath||"No folder")+"",h=t[177]>0&&function(t){let e,n,r;function i(){return t[116](t[167],t[196])}return{c(){e=y("button"),e.textContent="Delete",M(e,"class","ml-4 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 flex-shrink-0")},m(t,s){g(t,e,s),n||(r=_(e,"click",i),n=!0)},p(e,n){t=e},d(t){t&&m(e),n=!1,r()}}}(t);return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(u),s=w(),o=y("div"),a=v(d),l=w(),h&&h.c(),c=w(),M(r,"class","text-sm font-medium truncate"),M(o,"class","text-xs text-gray-500"),M(n,"class","flex-1 min-w-0"),M(e,"class","flex items-center justify-between p-2 bg-gray-50 rounded")},m(t,u){g(t,e,u),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(o,a),p(e,l),h&&h.m(e,null),p(e,c)},p(t,e){512&e[0]|2&e[1]&&u!==(u=t[167].title+"")&&A(i,u),512&e[0]|2&e[1]&&d!==(d=(t[167].folderPath||"No folder")+"")&&A(a,d),t[177]>0&&h.p(t,e)},d(t){t&&m(e),h&&h.d()}}}function Lm(t){let e,n,r,i,s,o,a,l=t[194][0].url+"",c=nt(t[194]),u=[];for(let e=0;e<c.length;e+=1)u[e]=$m(gg(t,c,e));return{c(){e=y("div"),n=y("h4"),r=v(l),s=w(),o=y("div");for(let t=0;t<u.length;t+=1)u[t].c();a=w(),M(n,"class","font-medium text-gray-900 mb-3 truncate"),M(n,"title",i=t[194][0].url),M(o,"class","space-y-2"),M(e,"class","border border-gray-200 rounded-lg p-4")},m(t,i){g(t,e,i),p(e,n),p(n,r),p(e,s),p(e,o);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(o,null);p(e,a)},p(t,e){if(512&e[0]|2&e[1]&&l!==(l=t[194][0].url+"")&&A(r,l),512&e[0]|2&e[1]&&i!==(i=t[194][0].url)&&M(n,"title",i),512&e[0]|2&e[1]|131072&e[2]){let n;for(c=nt(t[194]),n=0;n<c.length;n+=1){const r=gg(t,c,n);u[n]?u[n].p(r,e):(u[n]=$m(r),u[n].c(),u[n].m(o,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}},d(t){t&&m(e),b(u,t)}}}function Rm(t){let e,n,r,i,s,o,a,l,c,u=t[9].length+"";return{c(){e=y("div"),n=y("button"),r=v("Load More ("),i=v(t[32]),s=v(" of "),o=v(u),a=v(" shown)"),M(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),M(e,"class","mt-4 text-center")},m(u,d){g(u,e,d),p(e,n),p(n,r),p(n,i),p(n,s),p(n,o),p(n,a),l||(c=_(n,"click",t[73]),l=!0)},p(t,e){2&e[1]&&A(i,t[32]),512&e[0]&&u!==(u=t[9].length+"")&&A(o,u)},d(t){t&&m(e),l=!1,c()}}}function Bm(t){let e,n,r,i=t[36].total+"";return{c(){e=v("("),n=v(i),r=v(" pairs)")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i)},p(t,e){32&e[1]&&i!==(i=t[36].total+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function Im(e){let n;return{c(){n=y("span"),n.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>\n                    Fresh analysis',M(n,"class","inline-flex items-center gap-1.5 px-2.5 py-1 text-xs bg-green-50 text-green-700 border border-green-200 rounded-md")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function jm(t){let e,n,r,i,s,o,a,l,c,u,d,h=Math.round((t[37].cacheAge||0)/6e4)+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=v("\n                    Cached "),s=v(h),o=v("m ago"),a=w(),l=y("button"),c=v(" Refresh"),M(r,"fill-rule","evenodd"),M(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"),M(r,"clip-rule","evenodd"),M(n,"class","w-3.5 h-3.5"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center gap-1.5 px-2.5 py-1 text-xs bg-amber-50 text-amber-700 border border-amber-200 rounded-md"),M(e,"title","Loaded from cache"),l.disabled=t[31],M(l,"class","px-2.5 py-1.5 text-xs text-indigo-600 bg-indigo-50 hover:bg-indigo-100 border border-indigo-200 rounded-md disabled:opacity-50"),M(l,"title","Force refresh - recompute similarity analysis")},m(h,f){g(h,e,f),p(e,n),p(n,r),p(e,i),p(e,s),p(e,o),g(h,a,f),g(h,l,f),p(l,c),u||(d=_(l,"click",t[117]),u=!0)},p(t,e){64&e[1]&&h!==(h=Math.round((t[37].cacheAge||0)/6e4)+"")&&A(s,h),1&e[1]&&(l.disabled=t[31])},d(t){t&&(m(e),m(a),m(l)),u=!1,d()}}}function Fm(t){let e;return{c(){e=v(" Run Analysis")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function zm(t){let e,n;return{c(){e=y("div"),n=v("\n                    Analyzing..."),M(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,r){g(t,e,r),g(t,n,r)},d(t){t&&(m(e),m(n))}}}function Nm(t){let e,n,r,i,s=t[36]&&qm(t),o=nt(t[35].slice(0,t[33])),a=[];for(let e=0;e<o.length;e+=1)a[e]=Ym(fg(t,o,e));let l=t[35].length>t[33]&&Qm(t);return{c(){s&&s.c(),e=w(),n=y("div");for(let t=0;t<a.length;t+=1)a[t].c();r=w(),l&&l.c(),i=k(),M(n,"class","space-y-3 max-h-[40rem] overflow-y-auto")},m(t,o){s&&s.m(t,o),g(t,e,o),g(t,n,o);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(n,null);g(t,r,o),l&&l.m(t,o),g(t,i,o)},p(t,r){if(t[36]?s?s.p(t,r):(s=qm(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),20&r[1]|2621440&r[2]){let e;for(o=nt(t[35].slice(0,t[33])),e=0;e<o.length;e+=1){const i=fg(t,o,e);a[e]?a[e].p(i,r):(a[e]=Ym(i),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=o.length}t[35].length>t[33]?l?l.p(t,r):(l=Qm(t),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){t&&(m(e),m(n),m(r),m(i)),s&&s.d(t),b(a,t),l&&l.d(t)}}}function Wm(e){let n;return{c(){n=y("p"),n.textContent="No similar bookmarks detected with enhanced matching.",M(n,"class","text-gray-500")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Vm(e){let n;return{c(){n=y("div"),n.innerHTML='<p class="text-gray-500 mb-4">Click &quot;Run Analysis&quot; to detect similar bookmarks using advanced fuzzy matching.</p> <p class="text-xs text-gray-400">This analysis uses title, description, keywords, and domain information to find similar content.</p>',M(n,"class","text-center py-8")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Hm(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div> <span class="ml-3 text-gray-500">Running smart similarity analysis...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function qm(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S=t[36].sameDomain+"",D=t[36].crossDomain+"",P=(100*t[36].avgSimilarity).toFixed(0)+"";return{c(){e=y("div"),n=y("div"),r=y("span"),i=y("strong"),s=v(S),o=v(" same-domain pairs"),a=w(),l=y("span"),c=y("strong"),u=v(D),d=v(" cross-domain pairs"),h=w(),f=y("span"),b=v("Avg: "),x=y("strong"),k=v(P),_=v("%"),C=v(" similar"),M(r,"class","text-indigo-700"),M(l,"class","text-indigo-600"),M(f,"class","text-indigo-500"),M(n,"class","flex gap-4 text-sm"),M(e,"class","mb-4 p-3 bg-indigo-50 rounded-lg flex items-center justify-between")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(i,s),p(r,o),p(n,a),p(n,l),p(l,c),p(c,u),p(l,d),p(n,h),p(n,f),p(f,b),p(f,x),p(x,k),p(x,_),p(f,C)},p(t,e){32&e[1]&&S!==(S=t[36].sameDomain+"")&&A(s,S),32&e[1]&&D!==(D=t[36].crossDomain+"")&&A(u,D),32&e[1]&&P!==(P=(100*t[36].avgSimilarity).toFixed(0)+"")&&A(k,P)},d(t){t&&m(e)}}}function Um(t){let e;return{c(){e=y("span"),e.textContent="Same Domain",M(e,"class","text-xs px-2 py-1 bg-green-100 text-green-700 rounded")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Km(t){let e;return{c(){e=y("span"),e.textContent="Same Category",M(e,"class","text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Ym(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H,q,U,K,Y,Q,G,X,J,Z,tt,et,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,bt,yt,xt,vt,wt=Math.round(100*t[191].similarity)+"",kt=t[191].bookmark1.title+"",_t=t[191].bookmark1.url+"",Ct=t[191].coverage1.percentage.toFixed(0)+"",Mt=t[191].bookmark2.title+"",St=t[191].bookmark2.url+"",At=t[191].coverage2.percentage.toFixed(0)+"",Dt=t[191].sameDomain&&Um(),Pt=t[191].sameCategory&&Km();function Et(){return t[119](t[191])}function Tt(){return t[120](t[191])}function Ot(){return t[121](t[191])}return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("span"),o=v(wt),a=v("% match"),c=w(),Dt&&Dt.c(),u=w(),Pt&&Pt.c(),d=w(),h=y("button"),h.textContent="Compare Details",f=w(),b=y("div"),x=y("div"),k=y("div"),C=y("div"),S=y("div"),D=v(kt),E=w(),T=y("div"),O=v(_t),L=w(),R=y("div"),B=y("div"),I=v("Coverage: "),j=v(Ct),F=v("%"),z=w(),N=y("div"),W=y("a"),V=v("Open"),q=w(),U=y("button"),U.textContent="Delete",K=w(),Y=y("div"),Q=y("div"),G=y("div"),X=y("div"),J=v(Mt),tt=w(),et=y("div"),nt=v(St),it=w(),st=y("div"),ot=y("div"),at=v("Coverage: "),lt=v(At),ct=v("%"),ut=w(),dt=y("div"),ht=y("a"),ft=v("Open"),gt=w(),mt=y("button"),mt.textContent="Delete",bt=w(),M(s,"class",l="text-xs font-semibold px-2 py-1 rounded "+(t[191].sameDomain?"bg-indigo-200 text-indigo-800":"bg-purple-200 text-purple-800")),M(i,"class","flex items-center gap-2"),M(h,"class","text-xs px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50"),M(n,"class","flex justify-between items-center mb-3"),M(S,"class","text-sm font-medium text-gray-800 truncate"),M(S,"title",P=t[191].bookmark1.title),M(T,"class","text-xs text-gray-500 truncate"),M(T,"title",$=t[191].bookmark1.url),M(C,"class","flex-1 min-w-0"),M(k,"class","flex justify-between items-start mb-2"),M(B,"class","text-xs text-gray-400"),M(W,"href",H=t[191].bookmark1.url),M(W,"target","_blank"),M(W,"rel","noopener"),M(W,"class","px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200"),M(U,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(N,"class","flex gap-1"),M(R,"class","flex items-center justify-between mt-2"),M(x,"class","p-3 bg-white rounded border border-gray-200"),M(X,"class","text-sm font-medium text-gray-800 truncate"),M(X,"title",Z=t[191].bookmark2.title),M(et,"class","text-xs text-gray-500 truncate"),M(et,"title",rt=t[191].bookmark2.url),M(G,"class","flex-1 min-w-0"),M(Q,"class","flex justify-between items-start mb-2"),M(ot,"class","text-xs text-gray-400"),M(ht,"href",pt=t[191].bookmark2.url),M(ht,"target","_blank"),M(ht,"rel","noopener"),M(ht,"class","px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200"),M(mt,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(dt,"class","flex gap-1"),M(st,"class","flex items-center justify-between mt-2"),M(Y,"class","p-3 bg-white rounded border border-gray-200"),M(b,"class","grid grid-cols-1 md:grid-cols-2 gap-3"),M(e,"class",yt="border "+(t[191].sameDomain?"border-indigo-200 bg-indigo-50":"border-purple-200 bg-purple-50")+" rounded-lg p-4")},m(t,r){g(t,e,r),p(e,n),p(n,i),p(i,s),p(s,o),p(s,a),p(i,c),Dt&&Dt.m(i,null),p(i,u),Pt&&Pt.m(i,null),p(n,d),p(n,h),p(e,f),p(e,b),p(b,x),p(x,k),p(k,C),p(C,S),p(S,D),p(C,E),p(C,T),p(T,O),p(x,L),p(x,R),p(R,B),p(B,I),p(B,j),p(B,F),p(R,z),p(R,N),p(N,W),p(W,V),p(N,q),p(N,U),p(b,K),p(b,Y),p(Y,Q),p(Q,G),p(G,X),p(X,J),p(G,tt),p(G,et),p(et,nt),p(Y,it),p(Y,st),p(st,ot),p(ot,at),p(ot,lt),p(ot,ct),p(st,ut),p(st,dt),p(dt,ht),p(ht,ft),p(dt,gt),p(dt,mt),p(e,bt),xt||(vt=[_(h,"click",Et),_(U,"click",Tt),_(mt,"click",Ot)],xt=!0)},p(n,r){t=n,20&r[1]&&wt!==(wt=Math.round(100*t[191].similarity)+"")&&A(o,wt),20&r[1]&&l!==(l="text-xs font-semibold px-2 py-1 rounded "+(t[191].sameDomain?"bg-indigo-200 text-indigo-800":"bg-purple-200 text-purple-800"))&&M(s,"class",l),t[191].sameDomain?Dt||(Dt=Um(),Dt.c(),Dt.m(i,u)):Dt&&(Dt.d(1),Dt=null),t[191].sameCategory?Pt||(Pt=Km(),Pt.c(),Pt.m(i,null)):Pt&&(Pt.d(1),Pt=null),20&r[1]&&kt!==(kt=t[191].bookmark1.title+"")&&A(D,kt),20&r[1]&&P!==(P=t[191].bookmark1.title)&&M(S,"title",P),20&r[1]&&_t!==(_t=t[191].bookmark1.url+"")&&A(O,_t),20&r[1]&&$!==($=t[191].bookmark1.url)&&M(T,"title",$),20&r[1]&&Ct!==(Ct=t[191].coverage1.percentage.toFixed(0)+"")&&A(j,Ct),20&r[1]&&H!==(H=t[191].bookmark1.url)&&M(W,"href",H),20&r[1]&&Mt!==(Mt=t[191].bookmark2.title+"")&&A(J,Mt),20&r[1]&&Z!==(Z=t[191].bookmark2.title)&&M(X,"title",Z),20&r[1]&&St!==(St=t[191].bookmark2.url+"")&&A(nt,St),20&r[1]&&rt!==(rt=t[191].bookmark2.url)&&M(et,"title",rt),20&r[1]&&At!==(At=t[191].coverage2.percentage.toFixed(0)+"")&&A(lt,At),20&r[1]&&pt!==(pt=t[191].bookmark2.url)&&M(ht,"href",pt),20&r[1]&&yt!==(yt="border "+(t[191].sameDomain?"border-indigo-200 bg-indigo-50":"border-purple-200 bg-purple-50")+" rounded-lg p-4")&&M(e,"class",yt)},d(t){t&&m(e),Dt&&Dt.d(),Pt&&Pt.d(),xt=!1,r(vt)}}}function Qm(t){let e,n,r,i,s,o,a,l,c,u=t[35].length+"";return{c(){e=y("div"),n=y("button"),r=v("Load More ("),i=v(t[33]),s=v(" of "),o=v(u),a=v(" shown)"),M(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),M(e,"class","mt-4 text-center")},m(u,d){g(u,e,d),p(e,n),p(n,r),p(n,i),p(n,s),p(n,o),p(n,a),l||(c=_(n,"click",t[74]),l=!0)},p(t,e){4&e[1]&&A(i,t[33]),16&e[1]&&u!==(u=t[35].length+"")&&A(o,u)},d(t){t&&m(e),l=!1,c()}}}function Gm(t){let e,n,r,i=t[39].summary.total+"";return{c(){e=v("("),n=v(i),r=v(" found)")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i)},p(t,e){256&e[1]&&i!==(i=t[39].summary.total+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function Xm(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,_,C,S,D,P,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H,q=(t[39].summary.byCategory.deadLinks||0)+"",U=(t[39].summary.byCategory.oldUnused||0)+"",K=(t[39].summary.byCategory.genericTitles||0)+"",Y=(t[39].summary.byCategory.temporaryUrls||0)+"",Q=(t[39].summary.byCategory.lowScore||0)+"",G=t[39].oldUnused.length>0&&tb(t),X=t[39].genericTitles.length>0&&rb(t),J=t[39].temporaryUrls.length>0&&ob(t),Z=t[39].lowScore.length>0&&cb(t);return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(q),s=w(),o=y("div"),o.textContent="Dead Links",a=w(),l=y("div"),c=y("div"),u=v(U),d=w(),h=y("div"),h.textContent="Old & Unused",f=w(),b=y("div"),x=y("div"),_=v(K),C=w(),S=y("div"),S.textContent="Generic Titles",D=w(),P=y("div"),E=y("div"),T=v(Y),O=w(),$=y("div"),$.textContent="Temp/Dev URLs",L=w(),R=y("div"),B=y("div"),I=v(Q),j=w(),F=y("div"),F.textContent="Low Quality",z=w(),G&&G.c(),N=w(),X&&X.c(),W=w(),J&&J.c(),V=w(),Z&&Z.c(),H=k(),M(r,"class","text-2xl font-bold text-red-600"),M(o,"class","text-xs text-red-500"),M(n,"class","p-3 bg-red-50 rounded-lg text-center"),M(c,"class","text-2xl font-bold text-orange-600"),M(h,"class","text-xs text-orange-500"),M(l,"class","p-3 bg-orange-50 rounded-lg text-center"),M(x,"class","text-2xl font-bold text-yellow-600"),M(S,"class","text-xs text-yellow-600"),M(b,"class","p-3 bg-yellow-50 rounded-lg text-center"),M(E,"class","text-2xl font-bold text-purple-600"),M($,"class","text-xs text-purple-500"),M(P,"class","p-3 bg-purple-50 rounded-lg text-center"),M(B,"class","text-2xl font-bold text-gray-600"),M(F,"class","text-xs text-gray-500"),M(R,"class","p-3 bg-gray-100 rounded-lg text-center"),M(e,"class","grid grid-cols-2 md:grid-cols-5 gap-3 mb-6")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(e,a),p(e,l),p(l,c),p(c,u),p(l,d),p(l,h),p(e,f),p(e,b),p(b,x),p(x,_),p(b,C),p(b,S),p(e,D),p(e,P),p(P,E),p(E,T),p(P,O),p(P,$),p(e,L),p(e,R),p(R,B),p(B,I),p(R,j),p(R,F),g(t,z,m),G&&G.m(t,m),g(t,N,m),X&&X.m(t,m),g(t,W,m),J&&J.m(t,m),g(t,V,m),Z&&Z.m(t,m),g(t,H,m)},p(t,e){256&e[1]&&q!==(q=(t[39].summary.byCategory.deadLinks||0)+"")&&A(i,q),256&e[1]&&U!==(U=(t[39].summary.byCategory.oldUnused||0)+"")&&A(u,U),256&e[1]&&K!==(K=(t[39].summary.byCategory.genericTitles||0)+"")&&A(_,K),256&e[1]&&Y!==(Y=(t[39].summary.byCategory.temporaryUrls||0)+"")&&A(T,Y),256&e[1]&&Q!==(Q=(t[39].summary.byCategory.lowScore||0)+"")&&A(I,Q),t[39].oldUnused.length>0?G?G.p(t,e):(G=tb(t),G.c(),G.m(N.parentNode,N)):G&&(G.d(1),G=null),t[39].genericTitles.length>0?X?X.p(t,e):(X=rb(t),X.c(),X.m(W.parentNode,W)):X&&(X.d(1),X=null),t[39].temporaryUrls.length>0?J?J.p(t,e):(J=ob(t),J.c(),J.m(V.parentNode,V)):J&&(J.d(1),J=null),t[39].lowScore.length>0?Z?Z.p(t,e):(Z=cb(t),Z.c(),Z.m(H.parentNode,H)):Z&&(Z.d(1),Z=null)},d(t){t&&(m(e),m(z),m(N),m(W),m(V),m(H)),G&&G.d(t),X&&X.d(t),J&&J.d(t),Z&&Z.d(t)}}}function Jm(e){let n;return{c(){n=y("p"),n.textContent="No cleanup candidates found. Your bookmarks look great!",M(n,"class","text-gray-500")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Zm(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"></div> <span class="ml-3 text-gray-500">Analyzing bookmarks for cleanup...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function tb(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=t[39].oldUnused.length+"",C=nt(t[39].oldUnused.slice(0,t[40].oldUnused)),S=[];for(let e=0;e<C.length;e+=1)S[e]=eb(hg(t,C,e));let D=t[39].oldUnused.length>t[40].oldUnused&&nb(t);return{c(){e=y("div"),n=y("div"),r=y("h4"),i=v(" Old & Never Accessed ("),s=v(k),o=v(")"),a=w(),l=y("button"),c=v("Delete All"),u=w(),d=y("div");for(let t=0;t<S.length;t+=1)S[t].c();h=w(),D&&D.c(),M(r,"class","text-sm font-semibold text-orange-700"),l.disabled=t[41],M(l,"class","text-xs px-2 py-1 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50"),M(n,"class","flex items-center justify-between mb-3"),M(d,"class","space-y-2 max-h-48 overflow-y-auto"),M(e,"class","mb-6")},m(m,b){g(m,e,b),p(e,n),p(n,r),p(r,i),p(r,s),p(r,o),p(n,a),p(n,l),p(l,c),p(e,u),p(e,d);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(d,null);p(e,h),D&&D.m(e,null),f||(x=_(l,"click",t[122]),f=!0)},p(t,n){if(256&n[1]&&k!==(k=t[39].oldUnused.length+"")&&A(s,k),1024&n[1]&&(l.disabled=t[41]),768&n[1]|8388608&n[2]){let e;for(C=nt(t[39].oldUnused.slice(0,t[40].oldUnused)),e=0;e<C.length;e+=1){const r=hg(t,C,e);S[e]?S[e].p(r,n):(S[e]=eb(r),S[e].c(),S[e].m(d,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=C.length}t[39].oldUnused.length>t[40].oldUnused?D?D.p(t,n):(D=nb(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),b(S,t),D&&D.d(),f=!1,x()}}}function eb(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D=t[167].title+"",P=t[167].url+"",E=t[167].usefulnessScore+"",T=new Date(t[167].dateAdded).toLocaleDateString()+"";function O(){return t[123](t[167])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(D),s=w(),o=y("div"),a=v(P),l=w(),c=y("div"),u=v("Score: "),d=v(E),h=v("  Created: "),f=v(T),b=w(),x=y("button"),x.textContent="Delete",k=w(),M(r,"class","text-sm truncate"),M(o,"class","text-xs text-gray-500 truncate"),M(c,"class","text-xs text-orange-600 mt-1"),M(n,"class","flex-1 min-w-0"),M(x,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(e,"class","p-2 bg-orange-50 rounded border border-orange-200 flex items-center justify-between")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(o,a),p(n,l),p(n,c),p(c,u),p(c,d),p(c,h),p(c,f),p(e,b),p(e,x),p(e,k),C||(S=_(x,"click",O),C=!0)},p(e,n){t=e,768&n[1]&&D!==(D=t[167].title+"")&&A(i,D),768&n[1]&&P!==(P=t[167].url+"")&&A(a,P),768&n[1]&&E!==(E=t[167].usefulnessScore+"")&&A(d,E),768&n[1]&&T!==(T=new Date(t[167].dateAdded).toLocaleDateString()+"")&&A(f,T)},d(t){t&&m(e),C=!1,S()}}}function nb(t){let e,n,r,i,s,o,a,l,c=t[40].oldUnused+"",u=t[39].oldUnused.length+"";return{c(){e=y("button"),n=v("Show more ("),r=v(c),i=v(" of "),s=v(u),o=v(")"),M(e,"class","mt-2 text-xs text-orange-600 hover:underline")},m(c,u){g(c,e,u),p(e,n),p(e,r),p(e,i),p(e,s),p(e,o),a||(l=_(e,"click",t[124]),a=!0)},p(t,e){512&e[1]&&c!==(c=t[40].oldUnused+"")&&A(r,c),256&e[1]&&u!==(u=t[39].oldUnused.length+"")&&A(s,u)},d(t){t&&m(e),a=!1,l()}}}function rb(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=t[39].genericTitles.length+"",C=nt(t[39].genericTitles.slice(0,t[40].genericTitles)),S=[];for(let e=0;e<C.length;e+=1)S[e]=ib(dg(t,C,e));let D=t[39].genericTitles.length>t[40].genericTitles&&sb(t);return{c(){e=y("div"),n=y("div"),r=y("h4"),i=v(" Generic/Placeholder Titles ("),s=v(k),o=v(")"),a=w(),l=y("button"),c=v("Delete All"),u=w(),d=y("div");for(let t=0;t<S.length;t+=1)S[t].c();h=w(),D&&D.c(),M(r,"class","text-sm font-semibold text-yellow-700"),l.disabled=t[41],M(l,"class","text-xs px-2 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 disabled:opacity-50"),M(n,"class","flex items-center justify-between mb-3"),M(d,"class","space-y-2 max-h-48 overflow-y-auto"),M(e,"class","mb-6")},m(m,b){g(m,e,b),p(e,n),p(n,r),p(r,i),p(r,s),p(r,o),p(n,a),p(n,l),p(l,c),p(e,u),p(e,d);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(d,null);p(e,h),D&&D.m(e,null),f||(x=_(l,"click",t[125]),f=!0)},p(t,n){if(256&n[1]&&k!==(k=t[39].genericTitles.length+"")&&A(s,k),1024&n[1]&&(l.disabled=t[41]),768&n[1]|8388608&n[2]){let e;for(C=nt(t[39].genericTitles.slice(0,t[40].genericTitles)),e=0;e<C.length;e+=1){const r=dg(t,C,e);S[e]?S[e].p(r,n):(S[e]=ib(r),S[e].c(),S[e].m(d,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=C.length}t[39].genericTitles.length>t[40].genericTitles?D?D.p(t,n):(D=sb(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),b(S,t),D&&D.d(),f=!1,x()}}}function ib(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[167].title+"",b=t[167].url+"";function x(){return t[126](t[167])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(f),s=w(),o=y("div"),a=v(b),l=w(),c=y("button"),c.textContent="Delete",u=w(),M(r,"class","text-sm truncate"),M(o,"class","text-xs text-gray-500 truncate"),M(n,"class","flex-1 min-w-0"),M(c,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(e,"class","p-2 bg-yellow-50 rounded border border-yellow-200 flex items-center justify-between")},m(t,f){g(t,e,f),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(o,a),p(e,l),p(e,c),p(e,u),d||(h=_(c,"click",x),d=!0)},p(e,n){t=e,768&n[1]&&f!==(f=t[167].title+"")&&A(i,f),768&n[1]&&b!==(b=t[167].url+"")&&A(a,b)},d(t){t&&m(e),d=!1,h()}}}function sb(t){let e,n,r,i,s,o,a,l,c=t[40].genericTitles+"",u=t[39].genericTitles.length+"";return{c(){e=y("button"),n=v("Show more ("),r=v(c),i=v(" of "),s=v(u),o=v(")"),M(e,"class","mt-2 text-xs text-yellow-600 hover:underline")},m(c,u){g(c,e,u),p(e,n),p(e,r),p(e,i),p(e,s),p(e,o),a||(l=_(e,"click",t[127]),a=!0)},p(t,e){512&e[1]&&c!==(c=t[40].genericTitles+"")&&A(r,c),256&e[1]&&u!==(u=t[39].genericTitles.length+"")&&A(s,u)},d(t){t&&m(e),a=!1,l()}}}function ob(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=t[39].temporaryUrls.length+"",C=nt(t[39].temporaryUrls.slice(0,t[40].temporaryUrls)),S=[];for(let e=0;e<C.length;e+=1)S[e]=ab(ug(t,C,e));let D=t[39].temporaryUrls.length>t[40].temporaryUrls&&lb(t);return{c(){e=y("div"),n=y("div"),r=y("h4"),i=v(" Temporary/Dev URLs ("),s=v(k),o=v(")"),a=w(),l=y("button"),c=v("Delete All"),u=w(),d=y("div");for(let t=0;t<S.length;t+=1)S[t].c();h=w(),D&&D.c(),M(r,"class","text-sm font-semibold text-purple-700"),l.disabled=t[41],M(l,"class","text-xs px-2 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50"),M(n,"class","flex items-center justify-between mb-3"),M(d,"class","space-y-2 max-h-48 overflow-y-auto"),M(e,"class","mb-6")},m(m,b){g(m,e,b),p(e,n),p(n,r),p(r,i),p(r,s),p(r,o),p(n,a),p(n,l),p(l,c),p(e,u),p(e,d);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(d,null);p(e,h),D&&D.m(e,null),f||(x=_(l,"click",t[128]),f=!0)},p(t,n){if(256&n[1]&&k!==(k=t[39].temporaryUrls.length+"")&&A(s,k),1024&n[1]&&(l.disabled=t[41]),768&n[1]|8388608&n[2]){let e;for(C=nt(t[39].temporaryUrls.slice(0,t[40].temporaryUrls)),e=0;e<C.length;e+=1){const r=ug(t,C,e);S[e]?S[e].p(r,n):(S[e]=ab(r),S[e].c(),S[e].m(d,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=C.length}t[39].temporaryUrls.length>t[40].temporaryUrls?D?D.p(t,n):(D=lb(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),b(S,t),D&&D.d(),f=!1,x()}}}function ab(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[167].title+"",b=t[167].url+"";function x(){return t[129](t[167])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(f),s=w(),o=y("div"),a=v(b),l=w(),c=y("button"),c.textContent="Delete",u=w(),M(r,"class","text-sm truncate"),M(o,"class","text-xs text-gray-500 truncate"),M(n,"class","flex-1 min-w-0"),M(c,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(e,"class","p-2 bg-purple-50 rounded border border-purple-200 flex items-center justify-between")},m(t,f){g(t,e,f),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(o,a),p(e,l),p(e,c),p(e,u),d||(h=_(c,"click",x),d=!0)},p(e,n){t=e,768&n[1]&&f!==(f=t[167].title+"")&&A(i,f),768&n[1]&&b!==(b=t[167].url+"")&&A(a,b)},d(t){t&&m(e),d=!1,h()}}}function lb(t){let e,n,r,i,s,o,a,l,c=t[40].temporaryUrls+"",u=t[39].temporaryUrls.length+"";return{c(){e=y("button"),n=v("Show more ("),r=v(c),i=v(" of "),s=v(u),o=v(")"),M(e,"class","mt-2 text-xs text-purple-600 hover:underline")},m(c,u){g(c,e,u),p(e,n),p(e,r),p(e,i),p(e,s),p(e,o),a||(l=_(e,"click",t[130]),a=!0)},p(t,e){512&e[1]&&c!==(c=t[40].temporaryUrls+"")&&A(r,c),256&e[1]&&u!==(u=t[39].temporaryUrls.length+"")&&A(s,u)},d(t){t&&m(e),a=!1,l()}}}function cb(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=t[39].lowScore.length+"",C=nt(t[39].lowScore.slice(0,t[40].lowScore)),S=[];for(let e=0;e<C.length;e+=1)S[e]=ub(cg(t,C,e));let D=t[39].lowScore.length>t[40].lowScore&&db(t);return{c(){e=y("div"),n=y("div"),r=y("h4"),i=v(" Low Quality Score ("),s=v(k),o=v(")"),a=w(),l=y("button"),c=v("Delete All"),u=w(),d=y("div");for(let t=0;t<S.length;t+=1)S[t].c();h=w(),D&&D.c(),M(r,"class","text-sm font-semibold text-gray-700"),l.disabled=t[41],M(l,"class","text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 disabled:opacity-50"),M(n,"class","flex items-center justify-between mb-3"),M(d,"class","space-y-2 max-h-48 overflow-y-auto")},m(m,b){g(m,e,b),p(e,n),p(n,r),p(r,i),p(r,s),p(r,o),p(n,a),p(n,l),p(l,c),p(e,u),p(e,d);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(d,null);p(e,h),D&&D.m(e,null),f||(x=_(l,"click",t[131]),f=!0)},p(t,n){if(256&n[1]&&k!==(k=t[39].lowScore.length+"")&&A(s,k),1024&n[1]&&(l.disabled=t[41]),768&n[1]|8388608&n[2]){let e;for(C=nt(t[39].lowScore.slice(0,t[40].lowScore)),e=0;e<C.length;e+=1){const r=cg(t,C,e);S[e]?S[e].p(r,n):(S[e]=ub(r),S[e].c(),S[e].m(d,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=C.length}t[39].lowScore.length>t[40].lowScore?D?D.p(t,n):(D=db(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),b(S,t),D&&D.d(),f=!1,x()}}}function ub(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D=t[167].title+"",P=t[167].url+"",E=t[167].usefulnessScore+"",T=t[167].uselessReasons?.join(", ")+"";function O(){return t[132](t[167])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(D),s=w(),o=y("div"),a=v(P),l=w(),c=y("div"),u=v("Score: "),d=v(E),h=v("  "),f=v(T),b=w(),x=y("button"),x.textContent="Delete",k=w(),M(r,"class","text-sm truncate"),M(o,"class","text-xs text-gray-500 truncate"),M(c,"class","text-xs text-gray-400 mt-1"),M(n,"class","flex-1 min-w-0"),M(x,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(e,"class","p-2 bg-gray-50 rounded border border-gray-200 flex items-center justify-between")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(o,a),p(n,l),p(n,c),p(c,u),p(c,d),p(c,h),p(c,f),p(e,b),p(e,x),p(e,k),C||(S=_(x,"click",O),C=!0)},p(e,n){t=e,768&n[1]&&D!==(D=t[167].title+"")&&A(i,D),768&n[1]&&P!==(P=t[167].url+"")&&A(a,P),768&n[1]&&E!==(E=t[167].usefulnessScore+"")&&A(d,E),768&n[1]&&T!==(T=t[167].uselessReasons?.join(", ")+"")&&A(f,T)},d(t){t&&m(e),C=!1,S()}}}function db(t){let e,n,r,i,s,o,a,l,c=t[40].lowScore+"",u=t[39].lowScore.length+"";return{c(){e=y("button"),n=v("Show more ("),r=v(c),i=v(" of "),s=v(u),o=v(")"),M(e,"class","mt-2 text-xs text-gray-600 hover:underline")},m(c,u){g(c,e,u),p(e,n),p(e,r),p(e,i),p(e,s),p(e,o),a||(l=_(e,"click",t[133]),a=!0)},p(t,e){512&e[1]&&c!==(c=t[40].lowScore+"")&&A(r,c),256&e[1]&&u!==(u=t[39].lowScore.length+"")&&A(s,u)},d(t){t&&m(e),a=!1,l()}}}function hb(t){let e,n,r,i=t[10].length+"";return{c(){e=v("("),n=v(i),r=v(")")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i)},p(t,e){1024&e[0]&&i!==(i=t[10].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function fb(t){let e,n,r=nt(t[10]),i=[];for(let e=0;e<r.length;e+=1)i[e]=mb(lg(t,r,e));const s=t=>et(i[t],1,1,()=>{i[t]=null});return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();M(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,r){g(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);n=!0},p(t,n){if(1024&n[0]){let o;for(r=nt(t[10]),o=0;o<r.length;o+=1){const s=lg(t,r,o);i[o]?(i[o].p(s,n),tt(i[o],1)):(i[o]=mb(s),i[o].c(),tt(i[o],1),i[o].m(e,null))}for(J(),o=r.length;o<i.length;o+=1)s(o);Z()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)tt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)et(i[t]);n=!1},d(t){t&&m(e),b(i,t)}}}function pb(e){let n;return{c(){n=y("p"),n.textContent="All bookmark URLs are valid.",M(n,"class","text-gray-500")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function gb(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div> <span class="ml-3 text-gray-500">Checking URLs...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function mb(t){let e,n;return e=new tl({props:{bookmark:t[167]}}),{c(){st(e.$$.fragment)},m(t,r){ot(e,t,r),n=!0},p(t,n){const r={};1024&n[0]&&(r.bookmark=t[167]),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function bb(t){let e,n,r;return{c(){e=x("svg"),n=x("path"),r=v("\n                      Download Backup"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),M(e,"class","w-4 h-4 mr-2"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,i){g(t,e,i),p(e,n),g(t,r,i)},d(t){t&&(m(e),m(r))}}}function yb(t){let e,n,r,i;return{c(){e=x("svg"),n=x("circle"),r=x("path"),i=v("\n                      Creating Backup..."),M(n,"class","opacity-25"),M(n,"cx","12"),M(n,"cy","12"),M(n,"r","10"),M(n,"stroke","currentColor"),M(n,"stroke-width","4"),M(r,"class","opacity-75"),M(r,"fill","currentColor"),M(r,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),M(e,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),M(e,"fill","none"),M(e,"viewBox","0 0 24 24")},m(t,s){g(t,e,s),p(e,n),p(e,r),g(t,i,s)},d(t){t&&(m(e),m(i))}}}function xb(t){let e,n;function r(t,e){return t[45].valid?wb:vb}let i=r(t),s=i(t);return{c(){e=y("div"),s.c(),M(e,"class",n="mt-3 p-3 rounded-md "+(t[45].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))},m(t,n){g(t,e,n),s.m(e,null)},p(t,o){i===(i=r(t))&&s?s.p(t,o):(s.d(1),s=i(t),s&&(s.c(),s.m(e,null))),16384&o[1]&&n!==(n="mt-3 p-3 rounded-md "+(t[45].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))&&M(e,"class",n)},d(t){t&&m(e),s.d()}}}function vb(t){let e,n,r,i=nt(t[45].issues),s=[];for(let e=0;e<i.length;e+=1)s[e]=kb(ag(t,i,e));return{c(){e=y("p"),e.textContent=" Invalid backup file",n=w(),r=y("ul");for(let t=0;t<s.length;t+=1)s[t].c();M(e,"class","text-sm text-red-800"),M(r,"class","text-xs text-red-600 mt-1")},m(t,i){g(t,e,i),g(t,n,i),g(t,r,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(r,null)},p(t,e){if(16384&e[1]){let n;for(i=nt(t[45].issues),n=0;n<i.length;n+=1){const o=ag(t,i,n);s[n]?s[n].p(o,e):(s[n]=kb(o),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(t){t&&(m(e),m(n),m(r)),b(s,t)}}}function wb(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k=t[45].createdAt+"",C=(t[45].metadata?.totalBookmarks||0)+"",S=(t[45].metadata?.enrichedCount||0)+"",D=t[43]?"Restoring...":"Restore This Backup";return{c(){e=y("p"),n=v(" Valid backup from "),r=v(k),i=y("br"),s=w(),o=y("span"),a=v(C),l=v(" bookmarks, \n                            "),c=v(S),u=v(" enriched"),d=w(),h=y("button"),f=v(D),M(o,"class","text-xs text-green-600"),M(e,"class","text-sm text-green-800"),h.disabled=t[43],M(h,"class","mt-2 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 text-sm")},m(m,y){g(m,e,y),p(e,n),p(e,r),p(e,i),p(e,s),p(e,o),p(o,a),p(o,l),p(o,c),p(o,u),g(m,d,y),g(m,h,y),p(h,f),b||(x=_(h,"click",t[95]),b=!0)},p(t,e){16384&e[1]&&k!==(k=t[45].createdAt+"")&&A(r,k),16384&e[1]&&C!==(C=(t[45].metadata?.totalBookmarks||0)+"")&&A(a,C),16384&e[1]&&S!==(S=(t[45].metadata?.enrichedCount||0)+"")&&A(c,S),4096&e[1]&&D!==(D=t[43]?"Restoring...":"Restore This Backup")&&A(f,D),4096&e[1]&&(h.disabled=t[43])},d(t){t&&(m(e),m(d),m(h)),b=!1,x()}}}function kb(t){let e,n,r,i=t[178]+"";return{c(){e=y("li"),n=v(" "),r=v(i)},m(t,i){g(t,e,i),p(e,n),p(e,r)},p(t,e){16384&e[1]&&i!==(i=t[178]+"")&&A(r,i)},d(t){t&&m(e)}}}function _b(t){let e,n=nt(t[44]),r=[];for(let e=0;e<n.length;e+=1)r[e]=Mb(og(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){g(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(12288&i[1]|32&i[3]){let s;for(n=nt(t[44]),s=0;s<n.length;s+=1){const o=og(t,n,s);r[s]?r[s].p(o,i):(r[s]=Mb(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Cb(e){let n;return{c(){n=y("p"),n.textContent="No auto-backups yet. They will appear after your first restore or enrichment run.",M(n,"class","text-gray-500 text-sm")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Mb(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S=new Date(t[175].createdAt).toLocaleString()+"",D=(t[175].metadata?.totalBookmarks||0)+"",P=(t[175].metadata?.enrichedCount||0)+"";function E(){return t[134](t[177])}return{c(){e=y("div"),n=y("div"),r=y("span"),i=v(S),s=w(),o=y("span"),a=v("("),l=v(D),c=v(" bookmarks, "),u=v(P),d=v(" enriched)"),h=w(),f=y("button"),b=v("Restore"),x=w(),M(r,"class","text-sm font-medium text-gray-900"),M(o,"class","text-xs text-gray-500 ml-2"),f.disabled=t[43],M(f,"class","text-sm px-3 py-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded"),M(e,"class","flex justify-between items-center p-3 bg-gray-50 rounded-md")},m(t,m){g(t,e,m),p(e,n),p(n,r),p(r,i),p(n,s),p(n,o),p(o,a),p(o,l),p(o,c),p(o,u),p(o,d),p(e,h),p(e,f),p(f,b),p(e,x),k||(C=_(f,"click",E),k=!0)},p(e,n){t=e,8192&n[1]&&S!==(S=new Date(t[175].createdAt).toLocaleString()+"")&&A(i,S),8192&n[1]&&D!==(D=(t[175].metadata?.totalBookmarks||0)+"")&&A(l,D),8192&n[1]&&P!==(P=(t[175].metadata?.enrichedCount||0)+"")&&A(u,P),4096&n[1]&&(f.disabled=t[43])},d(t){t&&m(e),k=!1,C()}}}function Sb(t){let e,n,i,s,o,a,l,c,u,d,h,f,x,C,S,D,P,T,$,L,R,B,I,j,F,z,N,W,V,H,U,K=1!==t[5]?"s":"",Y=t[0].length+"",Q=t[47]?"Cancel":"Select",G=(t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange||t[8].searchQuery)&&Eb(),X=(t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange)&&Tb(t),rt=nt(Object.values(Va)),it=[];for(let e=0;e<rt.length;e+=1)it[e]=Ob(_g(t,rt,e));function st(t,e){return"list"===t[48]?Lb:$b}let ot=st(t),at=ot(t),lt=t[47]&&Rb(t);const ct=[Ib,Bb],ut=[];function dt(t,e){return"list"===t[48]?0:1}F=dt(t),z=ut[F]=ct[F](t);let ht=t[6]&&zb(t);return{c(){e=y("div"),n=y("div"),i=y("h2"),s=v(t[5]),o=v(" bookmark"),a=v(K),l=w(),G&&G.c(),c=w(),X&&X.c(),u=w(),d=y("div"),h=y("div"),f=v("Showing "),x=v(Y),C=v(" of "),S=v(t[5]),D=w(),P=y("select");for(let t=0;t<it.length;t+=1)it[t].c();T=w(),$=y("button"),L=v(Q),R=w(),B=y("button"),at.c(),I=w(),lt&&lt.c(),j=w(),z.c(),N=w(),ht&&ht.c(),W=k(),M(i,"class","text-lg font-medium text-gray-900"),M(n,"class","flex items-center gap-3"),M(h,"class","text-sm text-gray-500"),M(P,"class","text-sm border border-gray-300 rounded-md px-2 py-1 bg-white"),void 0===t[7]&&q(()=>t[108].call(P)),M($,"class","px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50"),O($,"bg-blue-50",t[47]),O($,"border-blue-300",t[47]),O($,"text-blue-700",t[47]),M(B,"class","p-2 text-gray-500 hover:text-gray-700 border border-gray-300 rounded-md"),M(B,"title","Toggle view mode"),M(d,"class","flex flex-wrap items-center gap-2 sm:gap-4"),M(e,"class","mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4")},m(r,m){g(r,e,m),p(e,n),p(n,i),p(i,s),p(i,o),p(i,a),p(i,l),G&&G.m(i,null),p(n,c),X&&X.m(n,null),p(e,u),p(e,d),p(d,h),p(h,f),p(h,x),p(h,C),p(h,S),p(d,D),p(d,P);for(let t=0;t<it.length;t+=1)it[t]&&it[t].m(P,null);E(P,t[7],!0),p(d,T),p(d,$),p($,L),p(d,R),p(d,B),at.m(B,null),g(r,I,m),lt&&lt.m(r,m),g(r,j,m),ut[F].m(r,m),g(r,N,m),ht&&ht.m(r,m),g(r,W,m),V=!0,H||(U=[_(P,"change",t[108]),_(P,"change",t[109]),_($,"click",t[87]),_(B,"click",t[93])],H=!0)},p(t,e){if((!V||32&e[0])&&A(s,t[5]),(!V||32&e[0])&&K!==(K=1!==t[5]?"s":"")&&A(a,K),t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange||t[8].searchQuery?G||(G=Eb(),G.c(),G.m(i,null)):G&&(G.d(1),G=null),t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange?X?X.p(t,e):(X=Tb(t),X.c(),X.m(n,null)):X&&(X.d(1),X=null),(!V||1&e[0])&&Y!==(Y=t[0].length+"")&&A(x,Y),(!V||32&e[0])&&A(S,t[5]),0&e){let n;for(rt=nt(Object.values(Va)),n=0;n<rt.length;n+=1){const r=_g(t,rt,n);it[n]?it[n].p(r,e):(it[n]=Ob(r),it[n].c(),it[n].m(P,null))}for(;n<it.length;n+=1)it[n].d(1);it.length=rt.length}128&e[0]&&E(P,t[7]),(!V||65536&e[1])&&Q!==(Q=t[47]?"Cancel":"Select")&&A(L,Q),(!V||65536&e[1])&&O($,"bg-blue-50",t[47]),(!V||65536&e[1])&&O($,"border-blue-300",t[47]),(!V||65536&e[1])&&O($,"text-blue-700",t[47]),ot!==(ot=st(t))&&(at.d(1),at=ot(t),at&&(at.c(),at.m(B,null))),t[47]?lt?lt.p(t,e):(lt=Rb(t),lt.c(),lt.m(j.parentNode,j)):lt&&(lt.d(1),lt=null);let r=F;F=dt(t),F===r?ut[F].p(t,e):(J(),et(ut[r],1,1,()=>{ut[r]=null}),Z(),z=ut[F],z?z.p(t,e):(z=ut[F]=ct[F](t),z.c()),tt(z,1),z.m(N.parentNode,N)),t[6]?ht?ht.p(t,e):(ht=zb(t),ht.c(),ht.m(W.parentNode,W)):ht&&(ht.d(1),ht=null)},i(t){V||(tt(z),V=!0)},o(t){et(z),V=!1},d(t){t&&(m(e),m(I),m(j),m(N),m(W)),G&&G.d(),X&&X.d(),b(it,t),at.d(),lt&&lt.d(t),ut[F].d(t),ht&&ht.d(t),H=!1,r(U)}}}function Ab(e){let n;function r(t,e){return t[4]?Hb:Vb}let i=r(e),s=i(e);return{c(){n=y("div"),s.c(),M(n,"class","text-center text-gray-500 p-8")},m(t,e){g(t,n,e),s.m(n,null)},p(t,e){i===(i=r(t))&&s?s.p(t,e):(s.d(1),s=i(t),s&&(s.c(),s.m(n,null)))},i:t,o:t,d(t){t&&m(n),s.d()}}}function Db(e){let n,r,i,s,o,a,l,c;return{c(){n=y("div"),r=y("p"),i=v("Error: "),s=v(e[2]),o=w(),a=y("button"),a.textContent="Retry",M(a,"class","mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"),M(n,"class","text-center text-red-600 p-8")},m(t,u){g(t,n,u),p(n,r),p(r,i),p(r,s),p(n,o),p(n,a),l||(c=_(a,"click",e[106]),l=!0)},p(t,e){4&e[0]&&A(s,t[2])},i:t,o:t,d(t){t&&m(n),l=!1,c()}}}function Pb(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',M(n,"class","flex items-center justify-center h-64")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function Eb(t){let e;return{c(){e=y("span"),e.textContent="(filtered)",M(e,"class","text-sm text-gray-500")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Tb(e){let n,r,i;return{c(){n=y("button"),n.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>\n                    Clear Filters',M(n,"class","inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 border border-red-200 rounded-md transition-colors"),M(n,"title","Clear all sidebar filters")},m(t,s){g(t,n,s),r||(i=_(n,"click",e[107]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}function Ob(e){let n,r,i=e[172].label+"";return{c(){n=y("option"),r=v(i),n.__value=e[172].key,D(n,n.__value)},m(t,e){g(t,n,e),p(n,r)},p:t,d(t){t&&m(n)}}}function $b(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M4 6h16M4 10h16M4 14h16M4 18h16"),M(e,"class","w-4 h-4"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){g(t,e,r),p(e,n)},d(t){t&&m(e)}}}function Lb(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"),M(e,"class","w-4 h-4"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){g(t,e,r),p(e,n)},d(t){t&&m(e)}}}function Rb(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S=t[46].size+"";return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("span"),o=v(S),a=v(" selected"),l=w(),c=y("button"),c.textContent="Select All",u=w(),d=y("button"),d.textContent="Deselect All",h=w(),f=y("button"),b=v("Delete Selected"),M(s,"class","text-sm text-blue-700"),M(c,"class","text-sm text-blue-600 hover:text-blue-800"),M(d,"class","text-sm text-blue-600 hover:text-blue-800"),M(i,"class","flex flex-wrap items-center gap-2 sm:gap-4"),f.disabled=x=0===t[46].size,M(f,"class","px-4 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed self-start sm:self-auto"),M(n,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"),M(e,"class","mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md")},m(r,m){g(r,e,m),p(e,n),p(n,i),p(i,s),p(s,o),p(s,a),p(i,l),p(i,c),p(i,u),p(i,d),p(n,h),p(n,f),p(f,b),k||(C=[_(c,"click",t[89]),_(d,"click",t[90]),_(f,"click",t[91])],k=!0)},p(t,e){32768&e[1]&&S!==(S=t[46].size+"")&&A(o,S),32768&e[1]&&x!==(x=0===t[46].size)&&(f.disabled=x)},d(t){t&&m(e),k=!1,r(C)}}}function Bb(t){let e,n,r=[],i=new Map,s=nt(t[0]);const o=t=>t[167].id;for(let e=0;e<s.length;e+=1){let n=wg(t,s,e),a=o(n);i.set(a,r[e]=jb(a,n))}return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,i){g(t,e,i);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null);n=!0},p(t,n){1&n[0]&&(s=nt(t[0]),J(),r=it(r,n,o,1,t,s,i,e,rt,jb,null,wg),Z())},i(t){if(!n){for(let t=0;t<s.length;t+=1)tt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)et(r[t]);n=!1},d(t){t&&m(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Ib(t){let e,n,r,i=[],s=new Map,o=nt(t[0]);const a=t=>t[167].id;for(let e=0;e<o.length;e+=1){let n=kg(t,o,e),r=a(n);s.set(r,i[e]=Fb(r,n))}return{c(){e=y("div"),n=y("div");for(let t=0;t<i.length;t+=1)i[t].c();M(n,"class","max-w-full overflow-x-auto"),M(e,"class","bg-white rounded-lg shadow overflow-hidden")},m(t,s){g(t,e,s),p(e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(n,null);r=!0},p(t,e){1&e[0]|98304&e[1]|1140850688&e[2]&&(o=nt(t[0]),J(),i=it(i,e,a,1,t,o,s,n,rt,Fb,null,kg),Z())},i(t){if(!r){for(let t=0;t<o.length;t+=1)tt(i[t]);r=!0}},o(t){for(let t=0;t<i.length;t+=1)et(i[t]);r=!1},d(t){t&&m(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function jb(t,e){let n,r,i;return r=new tl({props:{bookmark:e[167]}}),{key:t,first:null,c(){n=k(),st(r.$$.fragment),this.first=n},m(t,e){g(t,n,e),ot(r,t,e),i=!0},p(t,n){e=t;const i={};1&n[0]&&(i.bookmark=e[167]),r.$set(i)},i(t){i||(tt(r.$$.fragment,t),i=!0)},o(t){et(r.$$.fragment,t),i=!1},d(t){t&&m(n),at(r,t)}}}function Fb(t,e){let n,r,i;return r=new dl({props:{bookmark:e[167],multiSelectMode:e[47],isSelected:e[46].has(e[167].id)}}),r.$on("toggle-select",e[88]),r.$on("delete",e[92]),{key:t,first:null,c(){n=k(),st(r.$$.fragment),this.first=n},m(t,e){g(t,n,e),ot(r,t,e),i=!0},p(t,n){e=t;const i={};1&n[0]&&(i.bookmark=e[167]),65536&n[1]&&(i.multiSelectMode=e[47]),1&n[0]|32768&n[1]&&(i.isSelected=e[46].has(e[167].id)),r.$set(i)},i(t){i||(tt(r.$$.fragment,t),i=!0)},o(t){et(r.$$.fragment,t),i=!1},d(t){t&&m(n),at(r,t)}}}function zb(t){let e,n,r,i;function s(t,e){return t[1]?Wb:Nb}let o=s(t),a=o(t);return{c(){e=y("div"),n=y("button"),a.c(),n.disabled=t[1],M(n,"class","px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"),M(e,"class","mt-8 text-center")},m(s,o){g(s,e,o),p(e,n),a.m(n,null),r||(i=_(n,"click",t[56]),r=!0)},p(t,e){o!==(o=s(t))&&(a.d(1),a=o(t),a&&(a.c(),a.m(n,null))),2&e[0]&&(n.disabled=t[1])},d(t){t&&m(e),a.d(),r=!1,i()}}}function Nb(t){let e;return{c(){e=v("Load More")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Wb(t){let e;return{c(){e=y("div"),e.innerHTML='<div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>\n                      Loading...',M(e,"class","flex items-center")},m(t,n){g(t,e,n)},d(t){t&&m(e)}}}function Vb(e){let n;return{c(){n=y("p"),n.textContent="No bookmarks found"},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Hb(t){let e,n,r,i;return{c(){e=y("p"),n=v('No bookmarks found for "'),r=v(t[4]),i=v('"')},m(t,s){g(t,e,s),p(e,n),p(e,r),p(e,i)},p(t,e){16&e[0]&&A(r,t[4])},d(t){t&&m(e)}}}function qb(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,S,D,E,T,O,$,L,R,B,I,j,F,z,N,W,V,H,q,U,K,Y,Q,G,X,J,Z,tt,et,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,bt,yt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Pt,Et,Tt,Ot,$t,Lt,Rt,Bt,It,jt,Ft,zt,Nt,Wt,Vt,Ht,qt,Ut,Kt,Yt,Qt,Gt,Xt,Jt,Zt,te,ee,ne,re,ie,se,oe,ae,le,ce,ue,de,he,fe,pe,ge,me,be,ye,xe,ve,we,ke,_e,Ce,Me,Se,Ae,De,Pe,Ee,Te,Oe,$e,Le,Re,Be,Ie,je,Fe,ze,Ne,We,Ve,He,qe,Ue,Ke,Ye,Qe,Ge,Xe,Je,Ze,tn,en,nn,rn,sn,on,an,ln,cn,un,dn,hn,fn,pn,gn,mn,bn,yn,xn,vn,wn,kn,_n,Cn,Mn,Sn,An,Dn=Math.round(100*t[38].similarity)+"",Pn=Math.round(100*(t[38].breakdown?.titleFuzzy||0))+"",En=Math.round(100*(t[38].breakdown?.titleWords||0))+"",Tn=Math.round(100*(t[38].breakdown?.descriptionWords||0))+"",On=Math.round(100*(t[38].breakdown?.keywordsOverlap||0))+"",$n=t[38].bookmark1.title+"",Ln=t[38].bookmark1.url+"",Rn=(t[38].bookmark1.domain||"N/A")+"",Bn=(t[38].bookmark1.category||"Uncategorized")+"",In=(t[38].bookmark1.description||"No description")+"",jn=new Date(t[38].bookmark1.dateAdded).toLocaleDateString()+"",Fn=t[38].coverage1.percentage.toFixed(0)+"",zn=t[38].bookmark2.title+"",Nn=t[38].bookmark2.url+"",Wn=(t[38].bookmark2.domain||"N/A")+"",Vn=(t[38].bookmark2.category||"Uncategorized")+"",Hn=(t[38].bookmark2.description||"No description")+"",qn=new Date(t[38].bookmark2.dateAdded).toLocaleDateString()+"",Un=t[38].coverage2.percentage.toFixed(0)+"";function Kn(t,e){return t[38].bookmark1.keywords?.length>0?Kb:Ub}let Yn=Kn(t),Qn=Yn(t);function Gn(t,e){return t[38].bookmark2.keywords?.length>0?Gb:Qb}let Xn=Gn(t),Jn=Xn(t);return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("h3"),s.textContent="Compare Similar Bookmarks",o=w(),a=y("button"),a.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',l=w(),c=y("div"),u=y("div"),d=y("div"),h=y("span"),f=v(Dn),b=v("%"),x=w(),k=y("span"),k.textContent="Overall Similarity",S=w(),D=y("div"),E=y("h4"),E.textContent="Similarity Breakdown",T=w(),O=y("div"),$=y("div"),L=y("div"),R=v(Pn),B=v("%"),I=w(),j=y("div"),j.textContent="Title (Fuzzy)",F=w(),z=y("div"),N=y("div"),W=v(En),V=v("%"),H=w(),q=y("div"),q.textContent="Title (Words)",U=w(),K=y("div"),Y=y("div"),Q=v(Tn),G=v("%"),X=w(),J=y("div"),J.textContent="Description",Z=w(),tt=y("div"),et=y("div"),nt=v(On),rt=v("%"),it=w(),st=y("div"),st.textContent="Keywords",ot=w(),at=y("div"),lt=y("div"),ct=y("div"),ct.innerHTML='<span class="text-sm font-medium text-blue-800">Bookmark 1</span>',ut=w(),dt=y("div"),ht=y("div"),ft=y("div"),ft.textContent="Title",pt=w(),gt=y("div"),mt=v($n),bt=w(),yt=y("div"),xt=y("div"),xt.textContent="URL",vt=w(),wt=y("a"),kt=v(Ln),Ct=w(),Mt=y("div"),St=y("div"),St.textContent="Domain",At=w(),Dt=y("div"),Pt=v(Rn),Et=w(),Tt=y("div"),Ot=y("div"),Ot.textContent="Category",$t=w(),Lt=y("div"),Rt=v(Bn),Bt=w(),It=y("div"),jt=y("div"),jt.textContent="Description",Ft=w(),zt=y("div"),Nt=v(In),Wt=w(),Vt=y("div"),Ht=y("div"),Ht.textContent="Keywords",qt=w(),Ut=y("div"),Qn.c(),Kt=w(),Yt=y("div"),Qt=y("div"),Qt.textContent="Added",Gt=w(),Xt=y("div"),Jt=v(jn),Zt=w(),te=y("div"),ee=y("div"),ee.textContent="Metadata Coverage",ne=w(),re=y("div"),ie=y("div"),se=w(),oe=y("div"),ae=v(Fn),le=v("%"),ce=w(),ue=y("div"),de=y("a"),he=v("Open"),pe=w(),ge=y("button"),ge.textContent="Delete This",me=w(),be=y("div"),ye=y("div"),ye.innerHTML='<span class="text-sm font-medium text-green-800">Bookmark 2</span>',xe=w(),ve=y("div"),we=y("div"),ke=y("div"),ke.textContent="Title",_e=w(),Ce=y("div"),Me=v(zn),Se=w(),Ae=y("div"),De=y("div"),De.textContent="URL",Pe=w(),Ee=y("a"),Te=v(Nn),$e=w(),Le=y("div"),Re=y("div"),Re.textContent="Domain",Be=w(),Ie=y("div"),je=v(Wn),Fe=w(),ze=y("div"),Ne=y("div"),Ne.textContent="Category",We=w(),Ve=y("div"),He=v(Vn),qe=w(),Ue=y("div"),Ke=y("div"),Ke.textContent="Description",Ye=w(),Qe=y("div"),Ge=v(Hn),Xe=w(),Je=y("div"),Ze=y("div"),Ze.textContent="Keywords",tn=w(),en=y("div"),Jn.c(),nn=w(),rn=y("div"),sn=y("div"),sn.textContent="Added",on=w(),an=y("div"),ln=v(qn),cn=w(),un=y("div"),dn=y("div"),dn.textContent="Metadata Coverage",hn=w(),fn=y("div"),pn=y("div"),gn=w(),mn=y("div"),bn=v(Un),yn=v("%"),xn=w(),vn=y("div"),wn=y("a"),kn=v("Open"),Cn=w(),Mn=y("button"),Mn.textContent="Delete This",M(s,"class","text-lg font-semibold text-gray-900"),M(a,"class","text-gray-400 hover:text-gray-600"),M(i,"class","sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center"),M(h,"class","text-2xl font-bold text-indigo-700"),M(k,"class","ml-2 text-sm text-indigo-600"),M(d,"class","inline-flex items-center px-4 py-2 bg-indigo-100 rounded-full"),M(u,"class","text-center mb-6"),M(E,"class","text-sm font-semibold text-gray-700 mb-3"),M(L,"class","text-lg font-bold text-blue-600"),M(j,"class","text-xs text-gray-500"),M($,"class","text-center"),M(N,"class","text-lg font-bold text-green-600"),M(q,"class","text-xs text-gray-500"),M(z,"class","text-center"),M(Y,"class","text-lg font-bold text-purple-600"),M(J,"class","text-xs text-gray-500"),M(K,"class","text-center"),M(et,"class","text-lg font-bold text-orange-600"),M(st,"class","text-xs text-gray-500"),M(tt,"class","text-center"),M(O,"class","grid grid-cols-2 md:grid-cols-4 gap-3"),M(D,"class","mb-6 p-4 bg-gray-50 rounded-lg"),M(ct,"class","bg-blue-50 px-4 py-2 border-b border-blue-200"),M(ft,"class","text-xs text-gray-500 uppercase mb-1"),M(gt,"class","text-sm font-medium"),M(xt,"class","text-xs text-gray-500 uppercase mb-1"),M(wt,"href",_t=t[38].bookmark1.url),M(wt,"target","_blank"),M(wt,"rel","noopener"),M(wt,"class","text-sm text-blue-600 hover:underline break-all"),M(St,"class","text-xs text-gray-500 uppercase mb-1"),M(Dt,"class","text-sm"),M(Ot,"class","text-xs text-gray-500 uppercase mb-1"),M(Lt,"class","text-sm"),M(jt,"class","text-xs text-gray-500 uppercase mb-1"),M(zt,"class","text-sm text-gray-600"),M(Ht,"class","text-xs text-gray-500 uppercase mb-1"),M(Ut,"class","flex flex-wrap gap-1"),M(Qt,"class","text-xs text-gray-500 uppercase mb-1"),M(Xt,"class","text-sm"),M(ee,"class","text-xs text-gray-500 uppercase mb-1"),M(ie,"class","bg-blue-600 h-2 rounded-full"),P(ie,"width",t[38].coverage1.percentage+"%"),M(re,"class","w-full bg-gray-200 rounded-full h-2"),M(oe,"class","text-xs text-gray-400 mt-1"),M(de,"href",fe=t[38].bookmark1.url),M(de,"target","_blank"),M(de,"rel","noopener"),M(de,"class","flex-1 px-3 py-2 text-center text-sm bg-gray-100 rounded hover:bg-gray-200"),M(ge,"class","flex-1 px-3 py-2 text-center text-sm bg-red-600 text-white rounded hover:bg-red-700"),M(ue,"class","pt-3 border-t border-gray-200 flex gap-2"),M(dt,"class","p-4 space-y-3"),M(lt,"class","border border-gray-200 rounded-lg overflow-hidden"),M(ye,"class","bg-green-50 px-4 py-2 border-b border-green-200"),M(ke,"class","text-xs text-gray-500 uppercase mb-1"),M(Ce,"class","text-sm font-medium"),M(De,"class","text-xs text-gray-500 uppercase mb-1"),M(Ee,"href",Oe=t[38].bookmark2.url),M(Ee,"target","_blank"),M(Ee,"rel","noopener"),M(Ee,"class","text-sm text-blue-600 hover:underline break-all"),M(Re,"class","text-xs text-gray-500 uppercase mb-1"),M(Ie,"class","text-sm"),M(Ne,"class","text-xs text-gray-500 uppercase mb-1"),M(Ve,"class","text-sm"),M(Ke,"class","text-xs text-gray-500 uppercase mb-1"),M(Qe,"class","text-sm text-gray-600"),M(Ze,"class","text-xs text-gray-500 uppercase mb-1"),M(en,"class","flex flex-wrap gap-1"),M(sn,"class","text-xs text-gray-500 uppercase mb-1"),M(an,"class","text-sm"),M(dn,"class","text-xs text-gray-500 uppercase mb-1"),M(pn,"class","bg-green-600 h-2 rounded-full"),P(pn,"width",t[38].coverage2.percentage+"%"),M(fn,"class","w-full bg-gray-200 rounded-full h-2"),M(mn,"class","text-xs text-gray-400 mt-1"),M(wn,"href",_n=t[38].bookmark2.url),M(wn,"target","_blank"),M(wn,"rel","noopener"),M(wn,"class","flex-1 px-3 py-2 text-center text-sm bg-gray-100 rounded hover:bg-gray-200"),M(Mn,"class","flex-1 px-3 py-2 text-center text-sm bg-red-600 text-white rounded hover:bg-red-700"),M(vn,"class","pt-3 border-t border-gray-200 flex gap-2"),M(ve,"class","p-4 space-y-3"),M(be,"class","border border-gray-200 rounded-lg overflow-hidden"),M(at,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),M(c,"class","p-6"),M(n,"class","bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"),M(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4")},m(r,m){g(r,e,m),p(e,n),p(n,i),p(i,s),p(i,o),p(i,a),p(n,l),p(n,c),p(c,u),p(u,d),p(d,h),p(h,f),p(h,b),p(d,x),p(d,k),p(c,S),p(c,D),p(D,E),p(D,T),p(D,O),p(O,$),p($,L),p(L,R),p(L,B),p($,I),p($,j),p(O,F),p(O,z),p(z,N),p(N,W),p(N,V),p(z,H),p(z,q),p(O,U),p(O,K),p(K,Y),p(Y,Q),p(Y,G),p(K,X),p(K,J),p(O,Z),p(O,tt),p(tt,et),p(et,nt),p(et,rt),p(tt,it),p(tt,st),p(c,ot),p(c,at),p(at,lt),p(lt,ct),p(lt,ut),p(lt,dt),p(dt,ht),p(ht,ft),p(ht,pt),p(ht,gt),p(gt,mt),p(dt,bt),p(dt,yt),p(yt,xt),p(yt,vt),p(yt,wt),p(wt,kt),p(dt,Ct),p(dt,Mt),p(Mt,St),p(Mt,At),p(Mt,Dt),p(Dt,Pt),p(dt,Et),p(dt,Tt),p(Tt,Ot),p(Tt,$t),p(Tt,Lt),p(Lt,Rt),p(dt,Bt),p(dt,It),p(It,jt),p(It,Ft),p(It,zt),p(zt,Nt),p(dt,Wt),p(dt,Vt),p(Vt,Ht),p(Vt,qt),p(Vt,Ut),Qn.m(Ut,null),p(dt,Kt),p(dt,Yt),p(Yt,Qt),p(Yt,Gt),p(Yt,Xt),p(Xt,Jt),p(dt,Zt),p(dt,te),p(te,ee),p(te,ne),p(te,re),p(re,ie),p(te,se),p(te,oe),p(oe,ae),p(oe,le),p(dt,ce),p(dt,ue),p(ue,de),p(de,he),p(ue,pe),p(ue,ge),p(at,me),p(at,be),p(be,ye),p(be,xe),p(be,ve),p(ve,we),p(we,ke),p(we,_e),p(we,Ce),p(Ce,Me),p(ve,Se),p(ve,Ae),p(Ae,De),p(Ae,Pe),p(Ae,Ee),p(Ee,Te),p(ve,$e),p(ve,Le),p(Le,Re),p(Le,Be),p(Le,Ie),p(Ie,je),p(ve,Fe),p(ve,ze),p(ze,Ne),p(ze,We),p(ze,Ve),p(Ve,He),p(ve,qe),p(ve,Ue),p(Ue,Ke),p(Ue,Ye),p(Ue,Qe),p(Qe,Ge),p(ve,Xe),p(ve,Je),p(Je,Ze),p(Je,tn),p(Je,en),Jn.m(en,null),p(ve,nn),p(ve,rn),p(rn,sn),p(rn,on),p(rn,an),p(an,ln),p(ve,cn),p(ve,un),p(un,dn),p(un,hn),p(un,fn),p(fn,pn),p(un,gn),p(un,mn),p(mn,bn),p(mn,yn),p(ve,xn),p(ve,vn),p(vn,wn),p(wn,kn),p(vn,Cn),p(vn,Mn),Sn||(An=[_(a,"click",t[82]),_(ge,"click",t[135]),_(Mn,"click",t[136]),_(n,"click",C(t[100])),_(e,"click",t[82])],Sn=!0)},p(t,e){128&e[1]&&Dn!==(Dn=Math.round(100*t[38].similarity)+"")&&A(f,Dn),128&e[1]&&Pn!==(Pn=Math.round(100*(t[38].breakdown?.titleFuzzy||0))+"")&&A(R,Pn),128&e[1]&&En!==(En=Math.round(100*(t[38].breakdown?.titleWords||0))+"")&&A(W,En),128&e[1]&&Tn!==(Tn=Math.round(100*(t[38].breakdown?.descriptionWords||0))+"")&&A(Q,Tn),128&e[1]&&On!==(On=Math.round(100*(t[38].breakdown?.keywordsOverlap||0))+"")&&A(nt,On),128&e[1]&&$n!==($n=t[38].bookmark1.title+"")&&A(mt,$n),128&e[1]&&Ln!==(Ln=t[38].bookmark1.url+"")&&A(kt,Ln),128&e[1]&&_t!==(_t=t[38].bookmark1.url)&&M(wt,"href",_t),128&e[1]&&Rn!==(Rn=(t[38].bookmark1.domain||"N/A")+"")&&A(Pt,Rn),128&e[1]&&Bn!==(Bn=(t[38].bookmark1.category||"Uncategorized")+"")&&A(Rt,Bn),128&e[1]&&In!==(In=(t[38].bookmark1.description||"No description")+"")&&A(Nt,In),Yn===(Yn=Kn(t))&&Qn?Qn.p(t,e):(Qn.d(1),Qn=Yn(t),Qn&&(Qn.c(),Qn.m(Ut,null))),128&e[1]&&jn!==(jn=new Date(t[38].bookmark1.dateAdded).toLocaleDateString()+"")&&A(Jt,jn),128&e[1]&&P(ie,"width",t[38].coverage1.percentage+"%"),128&e[1]&&Fn!==(Fn=t[38].coverage1.percentage.toFixed(0)+"")&&A(ae,Fn),128&e[1]&&fe!==(fe=t[38].bookmark1.url)&&M(de,"href",fe),128&e[1]&&zn!==(zn=t[38].bookmark2.title+"")&&A(Me,zn),128&e[1]&&Nn!==(Nn=t[38].bookmark2.url+"")&&A(Te,Nn),128&e[1]&&Oe!==(Oe=t[38].bookmark2.url)&&M(Ee,"href",Oe),128&e[1]&&Wn!==(Wn=(t[38].bookmark2.domain||"N/A")+"")&&A(je,Wn),128&e[1]&&Vn!==(Vn=(t[38].bookmark2.category||"Uncategorized")+"")&&A(He,Vn),128&e[1]&&Hn!==(Hn=(t[38].bookmark2.description||"No description")+"")&&A(Ge,Hn),Xn===(Xn=Gn(t))&&Jn?Jn.p(t,e):(Jn.d(1),Jn=Xn(t),Jn&&(Jn.c(),Jn.m(en,null))),128&e[1]&&qn!==(qn=new Date(t[38].bookmark2.dateAdded).toLocaleDateString()+"")&&A(ln,qn),128&e[1]&&P(pn,"width",t[38].coverage2.percentage+"%"),128&e[1]&&Un!==(Un=t[38].coverage2.percentage.toFixed(0)+"")&&A(bn,Un),128&e[1]&&_n!==(_n=t[38].bookmark2.url)&&M(wn,"href",_n)},d(t){t&&m(e),Qn.d(),Jn.d(),Sn=!1,r(An)}}}function Ub(e){let n;return{c(){n=y("span"),n.textContent="No keywords",M(n,"class","text-sm text-gray-400")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Kb(t){let e,n=nt(t[38].bookmark1.keywords.slice(0,5)),r=[];for(let e=0;e<n.length;e+=1)r[e]=Yb(sg(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=k()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);g(t,e,n)},p(t,i){if(128&i[1]){let s;for(n=nt(t[38].bookmark1.keywords.slice(0,5)),s=0;s<n.length;s+=1){const o=sg(t,n,s);r[s]?r[s].p(o,i):(r[s]=Yb(o),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Yb(t){let e,n,r=t[162]+"";return{c(){e=y("span"),n=v(r),M(e,"class","px-2 py-0.5 bg-gray-100 text-xs rounded")},m(t,r){g(t,e,r),p(e,n)},p(t,e){128&e[1]&&r!==(r=t[162]+"")&&A(n,r)},d(t){t&&m(e)}}}function Qb(e){let n;return{c(){n=y("span"),n.textContent="No keywords",M(n,"class","text-sm text-gray-400")},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}function Gb(t){let e,n=nt(t[38].bookmark2.keywords.slice(0,5)),r=[];for(let e=0;e<n.length;e+=1)r[e]=Xb(ig(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=k()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);g(t,e,n)},p(t,i){if(128&i[1]){let s;for(n=nt(t[38].bookmark2.keywords.slice(0,5)),s=0;s<n.length;s+=1){const o=ig(t,n,s);r[s]?r[s].p(o,i):(r[s]=Xb(o),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Xb(t){let e,n,r=t[162]+"";return{c(){e=y("span"),n=v(r),M(e,"class","px-2 py-0.5 bg-gray-100 text-xs rounded")},m(t,r){g(t,e,r),p(e,n)},p(t,e){128&e[1]&&r!==(r=t[162]+"")&&A(n,r)},d(t){t&&m(e)}}}function Jb(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,v,C,S,A,D,P,E,T,$,L,R,B,I;const j=[Ag,Sg,Mg,Cg],F=[];function z(t,e){return"bookmarks"===t[3]?0:"insights"===t[3]?1:"health"===t[3]?2:"dataExplorer"===t[3]?3:-1}~(E=z(t))&&(T=F[E]=j[E](t));let N=t[38]&&qb(t);return{c(){e=w(),n=y("div"),i=y("header"),s=y("div"),o=y("div"),a=y("div"),l=y("h1"),l.textContent="Bookmark Insight",c=w(),u=y("button"),u.innerHTML='<svg class="w-4 h-4 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>\n            Export',d=w(),h=y("nav"),f=y("button"),f.textContent="Bookmarks",b=w(),x=y("button"),x.textContent="Insights",v=w(),C=y("button"),C.textContent="Health",S=w(),A=y("button"),A.textContent=" Data",D=w(),P=y("div"),T&&T.c(),$=w(),N&&N.c(),L=k(),rg.title="Bookmark Insight Dashboard",M(l,"class","text-2xl font-bold text-gray-900"),M(u,"class","px-3 py-1 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"),M(u,"title","Export bookmarks to JSON"),M(a,"class","flex items-center space-x-4"),M(f,"class","px-4 py-2 rounded-md text-sm font-medium"),O(f,"bg-blue-100","bookmarks"===t[3]),O(f,"text-blue-700","bookmarks"===t[3]),O(f,"text-gray-500","bookmarks"!==t[3]),O(f,"hover:text-gray-700","bookmarks"!==t[3]),M(x,"class","px-4 py-2 rounded-md text-sm font-medium"),O(x,"bg-blue-100","insights"===t[3]),O(x,"text-blue-700","insights"===t[3]),O(x,"text-gray-500","insights"!==t[3]),O(x,"hover:text-gray-700","insights"!==t[3]),M(C,"class","px-4 py-2 rounded-md text-sm font-medium"),O(C,"bg-blue-100","health"===t[3]),O(C,"text-blue-700","health"===t[3]),O(C,"text-gray-500","health"!==t[3]),O(C,"hover:text-gray-700","health"!==t[3]),M(A,"class","px-4 py-2 rounded-md text-sm font-medium"),O(A,"bg-blue-100","dataExplorer"===t[3]),O(A,"text-blue-700","dataExplorer"===t[3]),O(A,"text-gray-500","dataExplorer"!==t[3]),O(A,"hover:text-gray-700","dataExplorer"!==t[3]),M(h,"class","flex space-x-4"),M(o,"class","flex justify-between items-center py-4"),M(s,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),M(i,"class","bg-white shadow-sm border-b border-gray-200"),M(P,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),M(n,"class","min-h-screen bg-gray-50")},m(r,m){g(r,e,m),g(r,n,m),p(n,i),p(i,s),p(s,o),p(o,a),p(a,l),p(a,c),p(a,u),p(o,d),p(o,h),p(h,f),p(h,b),p(h,x),p(h,v),p(h,C),p(h,S),p(h,A),p(n,D),p(n,P),~E&&F[E].m(P,null),g(r,$,m),N&&N.m(r,m),g(r,L,m),R=!0,B||(I=[_(u,"click",t[99]),_(f,"click",t[101]),_(x,"click",t[102]),_(C,"click",t[103]),_(A,"click",t[104])],B=!0)},p(t,e){(!R||8&e[0])&&O(f,"bg-blue-100","bookmarks"===t[3]),(!R||8&e[0])&&O(f,"text-blue-700","bookmarks"===t[3]),(!R||8&e[0])&&O(f,"text-gray-500","bookmarks"!==t[3]),(!R||8&e[0])&&O(f,"hover:text-gray-700","bookmarks"!==t[3]),(!R||8&e[0])&&O(x,"bg-blue-100","insights"===t[3]),(!R||8&e[0])&&O(x,"text-blue-700","insights"===t[3]),(!R||8&e[0])&&O(x,"text-gray-500","insights"!==t[3]),(!R||8&e[0])&&O(x,"hover:text-gray-700","insights"!==t[3]),(!R||8&e[0])&&O(C,"bg-blue-100","health"===t[3]),(!R||8&e[0])&&O(C,"text-blue-700","health"===t[3]),(!R||8&e[0])&&O(C,"text-gray-500","health"!==t[3]),(!R||8&e[0])&&O(C,"hover:text-gray-700","health"!==t[3]),(!R||8&e[0])&&O(A,"bg-blue-100","dataExplorer"===t[3]),(!R||8&e[0])&&O(A,"text-blue-700","dataExplorer"===t[3]),(!R||8&e[0])&&O(A,"text-gray-500","dataExplorer"!==t[3]),(!R||8&e[0])&&O(A,"hover:text-gray-700","dataExplorer"!==t[3]);let n=E;E=z(t),E===n?~E&&F[E].p(t,e):(T&&(J(),et(F[n],1,1,()=>{F[n]=null}),Z()),~E?(T=F[E],T?T.p(t,e):(T=F[E]=j[E](t),T.c()),tt(T,1),T.m(P,null)):T=null),t[38]?N?N.p(t,e):(N=qb(t),N.c(),N.m(L.parentNode,L)):N&&(N.d(1),N=null)},i(t){R||(tt(T),R=!0)},o(t){et(T),R=!1},d(t){t&&(m(e),m(n),m($),m(L)),~E&&F[E].d(),N&&N.d(t),B=!1,r(I)}}}function Zb(t,e,n){js.register(...ja);let r,i=[],s=!0,o=null,a="bookmarks",l="",c=0,u=0,d=!1,h="date_desc",f={domains:[],folders:[],dateRange:null,searchQuery:"",sortBy:"date_desc"},p=null,g=null,m=null,b=null,y=null,x=null,v=null,w=null,k=null,_=null,C=[],M=[],A=[],D=[],P=!1,E=null,O=null,$=null,L=!1,R=null,I=null,F=[],N=20,W=3,V=!1,H=!1,q=null,U=null,K=[],Y=[],Q=null,G=null,X=null,J=!1,Z=!1,tt=!1,et=!1,nt=!1,rt=!1,it=10,st=10,ot=10,at=[],lt=null,ct=null,ut=null,dt=null,ht={deadLinks:10,oldUnused:10,genericTitles:10,temporaryUrls:10,lowScore:10},ft=!1,pt=null,gt=!1,mt=!1,bt=[],yt=!1,xt=null,vt=null,wt=new Set,kt=!1,_t="list";async function Ct(t=0,e=!1){try{const r={...f},s=await async function(t=0,e=50,n={}){try{let r=await jl();if(n.domains&&n.domains.length>0&&(r=r.filter(t=>n.domains.includes(t.domain))),n.folders&&n.folders.length>0&&(r=r.filter(t=>n.folders.includes(t.folderPath))),n.dateRange&&(r=r.filter(t=>t.dateAdded>=n.dateRange.startDate&&t.dateAdded<=n.dateRange.endDate)),n.searchQuery){const t=n.searchQuery.toLowerCase();r=r.filter(e=>e.title&&e.title.toLowerCase().includes(t)||e.url&&e.url.toLowerCase().includes(t)||e.domain&&e.domain.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}switch(n.platforms&&n.platforms.length>0&&(r=r.filter(t=>n.platforms.includes(t.platform||"other"))),n.creators&&n.creators.length>0&&(r=r.filter(t=>{if(!t.creator)return!1;const e=`${t.platform||"other"}:${t.creator}`;return n.creators.some(t=>t.key===e)})),n.contentTypes&&n.contentTypes.length>0&&(r=r.filter(t=>n.contentTypes.includes(t.contentType))),n.category&&(r=r.filter(t=>t.category===n.category)),void 0!==n.isEnriched&&(r=n.isEnriched?r.filter(t=>t.lastChecked):r.filter(t=>!t.lastChecked)),n.sortBy||"date_desc"){case"date_asc":r.sort((t,e)=>t.dateAdded-e.dateAdded);break;case"title_asc":r.sort((t,e)=>(t.title||"").localeCompare(e.title||""));break;case"title_desc":r.sort((t,e)=>(e.title||"").localeCompare(t.title||""));break;case"domain_asc":r.sort((t,e)=>(t.domain||"").localeCompare(e.domain||""));break;case"accessed_desc":r.sort((t,e)=>(e.lastAccessed||0)-(t.lastAccessed||0));break;default:r.sort((t,e)=>e.dateAdded-t.dateAdded)}const i=t*e,s=i+e;return{bookmarks:r.slice(i,s),totalCount:r.length,hasMore:s<r.length,currentPage:t,totalPages:Math.ceil(r.length/e)}}catch(t){return console.error("Error getting paginated bookmarks:",t),{bookmarks:[],totalCount:0,hasMore:!1,currentPage:0,totalPages:0}}}(t,50,r);n(0,i=e?[...i,...s.bookmarks]:s.bookmarks),c=s.currentPage,n(5,u=s.totalCount),n(6,d=s.hasMore)}catch(t){throw console.error("Error loading bookmarks:",t),t}}async function Mt(t){const e=t.detail.query;n(4,l=e),n(8,f.searchQuery=e,f);try{if(n(1,s=!0),c=0,e&&e.trim()){const t=(await Xp(e,{limit:1e3})).results||[];n(14,O=function(t){const e=new Map,n=new Map;for(const r of t){if(r.domain){const t=e.get(r.domain)||{count:0,latestDate:0};t.count++,r.dateAdded>t.latestDate&&(t.latestDate=r.dateAdded),e.set(r.domain,t)}if(r.folderPath){const t=n.get(r.folderPath)||0;n.set(r.folderPath,t+1)}}return{domains:Array.from(e.entries()).map(([t,e])=>({domain:t,count:e.count,latestDate:e.latestDate})).sort((t,e)=>e.count-t.count),folders:Array.from(n.entries()).map(([t,e])=>({folder:t,count:e})).sort((t,e)=>e.count-t.count)}}(t));let r=t;f.domains&&f.domains.length>0&&(r=r.filter(t=>f.domains.includes(t.domain))),f.folders&&f.folders.length>0&&(r=r.filter(t=>f.folders.includes(t.folderPath))),f.dateRange&&(r=r.filter(t=>t.dateAdded>=f.dateRange.startDate&&t.dateAdded<=f.dateRange.endDate)),f.platforms&&f.platforms.length>0&&(r=r.filter(t=>f.platforms.includes(t.platform||"other"))),f.creators&&f.creators.length>0&&(r=r.filter(t=>{if(!t.creator)return!1;const e=`${t.platform||"other"}:${t.creator}`;return f.creators.some(t=>t.key===e)})),f.contentTypes&&f.contentTypes.length>0&&(r=r.filter(t=>f.contentTypes.includes(t.contentType)));const s=f.sortBy||"relevance";if("relevance"!==s)switch(s){case"date_desc":r.sort((t,e)=>e.dateAdded-t.dateAdded);break;case"date_asc":r.sort((t,e)=>t.dateAdded-e.dateAdded);break;case"title_asc":r.sort((t,e)=>(t.title||"").localeCompare(e.title||""));break;case"title_desc":r.sort((t,e)=>(e.title||"").localeCompare(t.title||""))}const o=50*c;n(0,i=r.slice(o,o+50)),n(5,u=r.length),n(6,d=o+50<r.length)}else n(14,O=null),await Ct()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}}async function St(t){n(7,h=t),n(8,f.sortBy=t,f);try{n(1,s=!0),c=0,await Ct()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}}async function At(t){n(3,a=t),n(1,s=!0);try{"bookmarks"===t?(c=0,await Ct()):"insights"===t?await Dt():"health"===t&&await Pt()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}}async function Dt(){try{const[t,e,n,r,i,s,o,a,l,c,u,d,h]=await Promise.all([zl(),Nl(),Kl(),Jl(),ql(),Ul(),Zl(),tc(),ec(),hd(),fd(),pd(),gd()]);pt=a,K=c,Y=u,Q=d,G=h,setTimeout(()=>{const a=document.getElementById("domainChart");a&&(p&&p.destroy(),p=new js(a,{type:"bar",data:{labels:t.map(([t])=>t),datasets:[{label:"Bookmarks",data:t.map(([,t])=>t),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top 10 Most Bookmarked Domains"}},scales:{y:{beginAtZero:!0}}}}));const d=document.getElementById("domainDistributionChart");d&&(w&&w.destroy(),w=new js(d,{type:"pie",data:{labels:l.map(t=>t.domain),datasets:[{data:l.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Distribution by Domain"},tooltip:{callbacks:{label(t){const e=l[t.dataIndex];return`${e.domain}: ${e.count} (${e.percentage}%)`}}}}}}));const h=document.getElementById("activityChart");h&&(g&&g.destroy(),g=new js(h,{type:"line",data:{labels:e.map(([t])=>t),datasets:[{label:"Bookmarks Added",data:e.map(([,t])=>t),fill:!1,borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Activity Timeline"}},scales:{y:{beginAtZero:!0}}}}));const f=document.getElementById("wordCloudChart");f&&(m&&m.destroy(),m=new js(f,{type:"bar",data:{labels:n.map(([t])=>t),datasets:[{label:"Frequency",data:n.map(([,t])=>t),backgroundColor:"rgba(168, 85, 247, 0.5)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:1}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Most Frequent Words in Bookmark Titles"}},scales:{x:{beginAtZero:!0}}}}));const C=document.getElementById("titlePatternsChart");C&&(b&&b.destroy(),b=new js(C,{type:"doughnut",data:{labels:r.map(([t])=>t),datasets:[{data:r.map(([,t])=>t),backgroundColor:["#F59E0B","#10B981","#3B82F6","#EF4444","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Common Title Patterns & Types"}}}}));const M=document.getElementById("ageDistributionChart");M&&(y&&y.destroy(),y=new js(M,{type:"bar",data:{labels:i.map(([t])=>t),datasets:[{label:"Bookmarks",data:i.map(([,t])=>t),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Age Distribution"}},scales:{y:{beginAtZero:!0}}}}));const S=document.getElementById("creationPatternsChart");S&&(x&&x.destroy(),x=new js(S,{type:"radar",data:{labels:s.daily.map(([t])=>t),datasets:[{label:"Bookmarks Created",data:s.daily.map(([,t])=>t),backgroundColor:"rgba(245, 158, 11, 0.2)",borderColor:"rgba(245, 158, 11, 1)",borderWidth:2}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Creation Patterns by Day of Week"}},scales:{r:{beginAtZero:!0}}}}));const A=document.getElementById("urlPatternsChart");A&&(v&&v.destroy(),v=new js(A,{type:"bar",data:{labels:o.topLevelDomains.map(([t])=>`.${t}`),datasets:[{label:"Count",data:o.topLevelDomains.map(([,t])=>t),backgroundColor:"rgba(236, 72, 153, 0.5)",borderColor:"rgba(236, 72, 153, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top Level Domains Distribution"}},scales:{y:{beginAtZero:!0}}}}));const D=document.getElementById("domainHierarchyChart");if(D&&c.length>0){k&&k.destroy();const t=c.slice(0,15);k=new js(D,{type:"bar",data:{labels:t.map(t=>t.name),datasets:[{label:"Bookmarks",data:t.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4","#F43F5E","#22C55E","#A855F7","#0EA5E9"]}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Domain Hierarchy (Top 15 Domains)"},legend:{display:!1}},scales:{x:{beginAtZero:!0}}}})}const P=document.getElementById("freshnessChart");P&&u.length>0&&(_&&_.destroy(),_=new js(P,{type:"doughnut",data:{labels:u.map(t=>t.period),datasets:[{data:u.map(t=>t.count),backgroundColor:["#22C55E","#84CC16","#F59E0B","#F97316","#EF4444"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Freshness"}}}}))},100)}catch(t){console.error("Error loading insights:",t)}}async function Pt(){n(32,it=10),n(33,st=10),n(34,ot=10);try{n(27,J=!0),Z=!0,n(12,P=!0),n(28,tt=!0),n(13,E=await Gl()),await Et(),Yl().then(t=>{n(9,C=t),n(27,J=!1)}).catch(t=>{console.error("Error loading duplicates:",t),n(27,J=!1)}),nc().then(t=>{n(11,D=t),n(12,P=!1)}).catch(t=>{console.error("Error loading dead links:",t),n(12,P=!1)}),md().then(t=>{n(26,X=t)}).catch(t=>{console.error("Error loading dead link insights:",t)}),Ql().then(t=>{n(10,M=t),n(28,tt=!1)}).catch(t=>{console.error("Error loading malformed URLs:",t),n(28,tt=!1)}),Z=!1,A=[],n(31,rt=!0),ng({minSimilarity:.4,maxPairs:100,prioritizeSameDomain:!0,forceRefresh:!1,useCache:!0}).then(t=>{t.fromCache&&t.pairs.length>0&&(n(35,at=t.pairs),n(36,lt=t.stats),n(37,ct={fromCache:t.fromCache,cachedAt:t.cachedAt,cacheAge:t.cacheAge})),n(31,rt=!1)}).catch(t=>{console.error("Error loading cached similar pairs:",t),n(31,rt=!1)}),n(30,nt=!1)}catch(t){console.error("Error loading health data:",t)}}async function Et(){try{const t=await chrome.runtime.sendMessage({action:"getEnrichmentStatus"});t.success&&n(15,$=t);const e=await async function(){try{return await Bl.settings.get("app")||Il}catch(t){return console.error("Error getting settings:",t),Il}}();e&&(n(20,N=e.enrichmentBatchSize||20),n(21,W=e.enrichmentConcurrency||3))}catch(t){console.error("Error loading enrichment status:",t)}}async function Tt(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted dead link: ${t}`)):console.log(`Bookmark ${t} no longer exists`),n(11,D=D.filter(e=>e.id!==t)),X&&n(26,X={...X,total:X.total-1}),await Fl(t)}catch(t){console.error("Error deleting dead link:",t)}}B(async()=>{try{await Ct(),"insights"===a?await Dt():"health"===a&&await Pt()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}chrome.runtime.onMessage.addListener((t,e,r)=>{if("enrichmentProgress"===t.action&&t.progress){n(18,I=t.progress);const e={timestamp:Date.now(),...t.progress};n(19,F=[...F,e]),F.length>100&&n(19,F=F.slice(-100))}})});let Ot=!1,$t=null,Lt=null,Rt=50,Bt=3;async function It(t,e){try{const r=await chrome.bookmarks.get([t]);r&&r.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted bookmark: ${t}`)):console.log(`Bookmark ${t} no longer exists`),n(9,C=C.map((n,r)=>r===e?n.filter(e=>e.id!==t):n).filter(t=>t.length>1))}catch(t){console.error("Error deleting bookmark:",t),n(27,J=!0),Yl().then(t=>{n(9,C=t),n(27,J=!1)})}}async function jt(t=!1){n(31,rt=!0),n(35,at=[]),n(36,lt=null),n(37,ct=null);try{const e=await ng({minSimilarity:.4,maxPairs:100,prioritizeSameDomain:!0,forceRefresh:t});n(35,at=e.pairs),n(36,lt=e.stats),n(37,ct={fromCache:e.fromCache,cachedAt:e.cachedAt,cacheAge:e.cacheAge})}catch(t){console.error("Error running smart similar detection:",t)}finally{n(31,rt=!1)}}function Ft(t){n(38,ut=t)}function zt(){n(38,ut=null)}async function Nt(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0&&await chrome.bookmarks.remove(t),await Fl(t),n(35,at=at.filter(e=>e.bookmark1.id!==t&&e.bookmark2.id!==t)),!ut||ut.bookmark1.id!==t&&ut.bookmark2.id!==t||zt()}catch(t){console.error("Error deleting bookmark from comparison:",t)}}function Wt(t){n(40,ht={...ht,[t]:ht[t]+10})}async function Vt(t,e){try{const r=await chrome.bookmarks.get([t]);r&&r.length>0&&await chrome.bookmarks.remove(t),await Fl(t),dt&&n(39,dt={...dt,[e]:dt[e].filter(e=>e.id!==t),summary:{...dt.summary,total:dt.summary.total-1,byCategory:{...dt.summary.byCategory,[e]:dt.summary.byCategory[e]-1}}})}catch(t){console.error("Error deleting useless bookmark:",t)}}async function Ht(t){if(!dt||!dt[t]||0===dt[t].length)return;const e=dt[t].length;if(confirm(`Are you sure you want to delete all ${e} bookmarks in "${t}"? This action cannot be undone.`)){n(41,ft=!0);try{const r=dt[t].map(t=>t.id);await Xl(r),n(39,dt={...dt,[t]:[],summary:{...dt.summary,total:dt.summary.total-e,byCategory:{...dt.summary.byCategory,[t]:0}}})}catch(t){console.error("Error deleting useless bookmarks:",t)}finally{n(41,ft=!1)}}}async function qt(t){if(confirm(`Restore auto-backup from ${bt[t].createdAt}?\n\nThis will replace your current data.`)){n(43,mt=!0);try{const e=await async function(t=0){try{const e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];if(t<0||t>=e.length)throw new Error(`Invalid backup index: ${t}. Available: 0-${e.length-1}`);const n={version:"2.1",...e[t]};return await ic(n)}catch(t){throw console.error("Error restoring from auto-backup:",t),t}}(t);e.success&&(alert("Restore complete! Refreshing..."),window.location.reload())}catch(t){console.error("Error restoring auto-backup:",t),alert("Error: "+t.message)}finally{n(43,mt=!1)}}}return[i,s,o,a,l,u,d,h,f,C,M,D,P,E,O,$,L,R,I,F,N,W,V,H,q,U,X,J,tt,et,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,ft,gt,mt,bt,vt,wt,kt,_t,r,Ot,$t,Lt,Rt,Bt,Ct,async function(){if(d&&!s)try{n(1,s=!0),await Ct(c+1,!0)}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}},Mt,async function(t){const e=t.detail;n(8,f={...f,...e});try{if(n(1,s=!0),c=0,l&&l.trim())return void await Mt({detail:{query:l}});await Ct()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}},St,At,function(t){const{category:e}=t.detail;n(8,f={...f,searchQuery:`category:${e}`}),n(3,a="bookmarks"),Ct(0,!1)},function(t){const{domain:e}=t.detail;n(8,f={...f,domains:[e]}),n(3,a="bookmarks"),Ct(0,!1)},async function(t){n(4,l="accessed:yes"),n(3,a="bookmarks"),await Mt(l)},async function(){n(4,l="stale:yes"),n(3,a="bookmarks"),await Mt(l)},async function(){n(3,a="health"),await Pt()},async function(){n(4,l="enriched:no"),n(3,a="bookmarks"),await Mt(l)},async function(){n(4,l="category:uncategorized"),n(3,a="bookmarks"),await Mt(l)},function(){n(3,a="health"),Pt()},async function(t){const{ids:e}=t.detail;if(e&&0!==e.length&&confirm(`Are you sure you want to delete ${e.length} bookmark(s)?`))try{await Xl(e),await Ct(0,!1)}catch(t){console.error("Error deleting bookmarks:",t),alert("Failed to delete some bookmarks. Please try again.")}},async function(t){const{query:e}=t.detail;n(4,l=e),n(3,a="bookmarks"),await Mt(e)},async function(){n(16,L=!0),n(17,R=null),n(18,I=null),n(19,F=[]);try{console.log("Creating auto-backup before enrichment..."),await sc();const t=await chrome.runtime.sendMessage({action:"runEnrichment",batchSize:N,concurrency:W,force:V});t.success?(n(17,R=t.result),await Et()):n(17,R={error:t.error})}catch(t){console.error("Error running enrichment:",t),n(17,R={error:t.message})}finally{n(16,L=!1)}},async function(){n(23,H=!0),n(24,q=null),n(25,U=null);try{const t=await async function(t=null){console.log("Starting platform data backfill...");const e={processed:0,updated:0,errors:0,platforms:{}};try{const n=await Bl.bookmarks.toArray(),r=n.length;console.log(`Processing ${r} bookmarks for platform data...`);const i=100;for(let s=0;s<n.length;s+=i){const o=n.slice(s,s+i),a=[];for(const t of o){e.processed++;try{if(!t.url)continue;const n=Ol(t.url);if(!n||!n.platform)continue;t.platform===n.platform&&t.creator===n.creator&&t.contentType===n.type||(a.push({id:t.id,platform:n.platform,creator:n.creator||null,contentType:n.type||null,platformData:n}),e.platforms[n.platform]=(e.platforms[n.platform]||0)+1)}catch(n){e.errors++,console.warn(`Error processing bookmark ${t.id}:`,n.message)}}a.length>0&&(await Bl.bookmarks.bulkUpdate(a.map(t=>({key:t.id,changes:{platform:t.platform,creator:t.creator,contentType:t.contentType,platformData:t.platformData}}))),e.updated+=a.length),t&&t(e.processed,r)}return console.log("Platform data backfill complete:",e),e}catch(t){throw console.error("Error during platform data backfill:",t),t}}((t,e)=>{n(24,q={processed:t,total:e})});n(25,U=t),await Ct(0,!1)}catch(t){console.error("Error during platform backfill:",t),n(25,U={error:t.message})}finally{n(23,H=!1)}},function(){n(32,it+=10)},function(){n(33,st+=10)},function(){n(34,ot+=10)},Tt,async function(){if(0===D.length)return;if(confirm(`Are you sure you want to delete all ${D.length} dead links? This action cannot be undone.`)){n(29,et=!0);try{const t=D.map(t=>t.id),e=await Xl(t);console.log(`Deleted ${e.success} dead links, ${e.errors.length} errors`),n(11,D=[]),n(26,X=null),md().then(t=>{n(26,X=t)})}catch(t){console.error("Error deleting all dead links:",t),nc().then(t=>{n(11,D=t)})}finally{n(29,et=!1)}}},async function(){if(0===D.length)return;const t=Rt>0&&Rt<D.length?Rt:D.length,e=D.length-t;if(!confirm(`Re-check ${t} dead links?${e>0?` (${e} will remain for next batch)`:""}\n\nThis will attempt to fetch each URL again to verify if it's still unreachable.`))return;n(50,Ot=!0),n(51,$t=null),n(52,Lt=null);const r=t=>{"reEnrichProgress"===t.action&&t.progress&&n(51,$t=t.progress)};chrome.runtime.onMessage.addListener(r);try{const t=await chrome.runtime.sendMessage({action:"reEnrichDeadLinks",batchSize:Rt,concurrency:Bt});if(t.success){n(52,Lt=t.results);const e=await nc();n(11,D=e);const r=await md();n(26,X=r)}else console.error("Error re-enriching dead links:",t.error),n(52,Lt={error:t.error})}catch(t){console.error("Error re-enriching dead links:",t),n(52,Lt={error:t.message})}finally{n(50,Ot=!1),chrome.runtime.onMessage.removeListener(r)}},It,jt,Ft,zt,Nt,Wt,Vt,Ht,function(){n(47,kt=!kt),kt||(wt.clear(),n(46,wt))},function(t){const{bookmarkId:e,selected:r}=t.detail;r?wt.add(e):wt.delete(e),n(46,wt)},function(){n(46,wt=new Set(i.map(t=>t.id)))},function(){wt.clear(),n(46,wt)},async function(){if(0!==wt.size&&confirm(`Are you sure you want to delete ${wt.size} bookmark(s)?`))try{n(1,s=!0);const t=Array.from(wt),e=await Xl(t);e.errors.length>0?(console.error("Some bookmarks could not be deleted:",e.errors),alert(`${e.success} bookmarks deleted successfully. ${e.errors.length} failed.`)):alert(`${e.success} bookmarks deleted successfully.`),wt.clear(),n(46,wt),n(47,kt=!1),c=0,await Ct()}catch(t){console.error("Error deleting bookmarks:",t),alert("Error deleting bookmarks. Please try again.")}finally{n(1,s=!1)}},async function(t){const{bookmarkId:e}=t.detail;if(confirm("Are you sure you want to delete this bookmark?"))try{await Fl(e),c=0,await Ct()}catch(t){console.error("Error deleting bookmark:",t),alert("Error deleting bookmark. Please try again.")}},function(){n(48,_t="list"===_t?"card":"list")},async function(){n(42,gt=!0);try{const t=await async function(){try{const t=await rc(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=`bookmark-insights-backup-${(new Date).toISOString().slice(0,10)}.json`,i=document.createElement("a");return i.href=n,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),{success:!0,filename:r,metadata:t.metadata}}catch(t){throw console.error("Error downloading backup:",t),t}}();t.success&&alert(`Backup saved: ${t.filename}\n\nContains:\n- ${t.metadata.totalBookmarks} bookmarks\n- ${t.metadata.enrichedCount} enriched\n- ${t.metadata.categorizedCount} categorized`)}catch(t){console.error("Error creating backup:",t),alert("Error creating backup: "+t.message)}finally{n(42,gt=!1)}},async function(){if(xt)if(vt&&vt.valid){if(confirm(`Restore backup from ${vt.createdAt}?\n\nThis will replace your current data with:\n- ${vt.metadata.totalBookmarks} bookmarks\n- ${vt.metadata.enrichedCount} enriched\n\nYour current data will be auto-backed up first.`)){n(43,mt=!0);try{await sc();const t=await xt.text(),e=JSON.parse(t),r=await ic(e);r.success&&(alert(`Restore complete!\n\n- ${r.results.bookmarksRestored} bookmarks restored\n- ${r.results.similaritiesRestored} similarities restored\n\nRefreshing...`),yt=!1,xt=null,n(45,vt=null),window.location.reload())}catch(t){console.error("Error restoring backup:",t),alert("Error restoring backup: "+t.message)}finally{n(43,mt=!1)}}}else alert("Please select a valid backup file");else alert("Please select a backup file first")},async function(t){const e=t.target.files[0];if(e){xt=e;try{const t=await e.text(),r=JSON.parse(t);n(45,vt=function(t){const e=[];if(!t)return{valid:!1,issues:["Backup is empty or null"]};if(t.version||e.push("Missing version field"),t.data){if(t.data.bookmarks&&Array.isArray(t.data.bookmarks)||e.push("Missing or invalid bookmarks array"),t.data.bookmarks&&t.data.bookmarks.length>0){const n=t.data.bookmarks[0];n.id&&n.url||e.push("Bookmarks are missing required fields (id, url)")}}else e.push("Missing data field");return{valid:0===e.length,issues:e,metadata:t.metadata||null,version:t.version||"unknown",createdAt:t.createdAt||"unknown"}}(r))}catch(t){n(45,vt={valid:!1,issues:["Invalid JSON file"]})}}},async function(){n(44,bt=await async function(){try{return((await chrome.storage.local.get(["autoBackups"])).autoBackups||[]).map((t,e)=>({index:e,createdAt:t.createdAt,metadata:t.metadata}))}catch(t){return console.error("Error listing auto-backups:",t),[]}}())},qt,async function(){try{const t=await async function(){try{const t=await jl();return{exportDate:(new Date).toISOString(),version:"2.0",totalBookmarks:t.length,bookmarks:t}}catch(t){throw console.error("Error exporting bookmarks:",t),t}}(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`bookmarks-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}catch(t){console.error("Error exporting bookmarks:",t),alert("Error exporting bookmarks. Please try again.")}},function(e){j.call(this,t,e)},()=>At("bookmarks"),()=>At("insights"),()=>At("health"),()=>At("dataExplorer"),function(t){z[t?"unshift":"push"](()=>{r=t,n(49,r)})},()=>Ct(),()=>{r&&r.clearAllFilters()},function(){h=T(this),n(7,h)},t=>St(t.target.value),function(){N=S(this.value),n(20,N)},function(){W=S(this.value),n(21,W)},function(){V=this.checked,n(22,V)},function(){Rt=S(this.value),n(53,Rt)},function(){Bt=S(this.value),n(54,Bt)},t=>Tt(t.id),(t,e)=>It(t.id,e),()=>jt(!0),()=>jt(!1),t=>Ft(t),t=>Nt(t.bookmark1.id),t=>Nt(t.bookmark2.id),()=>Ht("oldUnused"),t=>Vt(t.id,"oldUnused"),()=>Wt("oldUnused"),()=>Ht("genericTitles"),t=>Vt(t.id,"genericTitles"),()=>Wt("genericTitles"),()=>Ht("temporaryUrls"),t=>Vt(t.id,"temporaryUrls"),()=>Wt("temporaryUrls"),()=>Ht("lowScore"),t=>Vt(t.id,"lowScore"),()=>Wt("lowScore"),t=>qt(t),()=>Nt(ut.bookmark1.id),()=>Nt(ut.bookmark2.id)]}const ty=new class extends ut{constructor(t){super(),ct(this,t,Zb,Jb,s,{},null,[-1,-1,-1,-1,-1,-1,-1])}}({target:document.body});var ey=Object.freeze({__proto__:null,default:{}});export{ty as default};
