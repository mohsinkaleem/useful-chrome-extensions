function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let o;function a(t,e){return t===e||(o||(o=document.createElement("a")),o.href=e,t===o.href)}const l="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function c(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function b(){return g("")}function y(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t){return""===t?null:+t}function w(t,e){e=""+e,t.data!==e&&(t.data=e)}function k(t,e){t.value=null==e?"":e}function _(t,e,n,i){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function M(t,e,n){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e)return void(i.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function C(t,e,n){t.classList.toggle(e,!!n)}let S;function A(t){S=t}function P(){if(!S)throw new Error("Function called outside component initialization");return S}function D(t){P().$$.on_mount.push(t)}function O(){const t=P();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=function(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}(e,n,{cancelable:i});return r.slice().forEach(e=>{e.call(t,s)}),!s.defaultPrevented}return!0}}const E=[],T=[];let L=[];const R=[],B=Promise.resolve();let I=!1;function j(t){L.push(t)}const F=new Set;let z=0;function N(){if(0!==z)return;const t=S;do{try{for(;z<E.length;){const t=E[z];z++,A(t),$(t.$$)}}catch(t){throw E.length=0,z=0,t}for(A(null),E.length=0,z=0;T.length;)T.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];F.has(e)||(F.add(e),e())}L.length=0}while(E.length);for(;R.length;)R.pop()();I=!1,F.clear(),A(t)}function $(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const V=new Set;let W;function H(){W={r:0,c:[],p:W}}function K(){W.r||i(W.c),W=W.p}function q(t,e){t&&t.i&&(V.delete(t),t.i(e))}function U(t,e,n,i){if(t&&t.o){if(V.has(t))return;V.add(t),W.c.push(()=>{V.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Y(t){return void 0!==t?.length?t:Array.from(t)}function X(t,e){U(t,1,1,()=>{e.delete(t.key)})}function G(t,e,n,r,s,o,a,l,c,h,u,d){let f=t.length,p=o.length,g=f;const m={};for(;g--;)m[t[g].key]=g;const b=[],y=new Map,x=new Map,v=[];for(g=p;g--;){const t=d(s,o,g),i=n(t);let l=a.get(i);l?r&&v.push(()=>l.p(t,e)):(l=h(i,t),l.c()),y.set(i,b[g]=l),i in m&&x.set(i,Math.abs(g-m[i]))}const w=new Set,k=new Set;function _(t){q(t,1),t.m(l,u),a.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=b[p-1],n=t[f-1],i=e.key,r=n.key;e===n?(u=e.first,f--,p--):y.has(r)?!a.has(i)||w.has(i)?_(e):k.has(r)?f--:x.get(i)>x.get(r)?(k.add(i),_(e)):(w.add(r),f--):(c(n,a),f--)}for(;f--;){const e=t[f];y.has(e.key)||c(e,a)}for(;p;)_(b[p-1]);return i(v),b}function J(t){t&&t.c()}function Q(t,n,s){const{fragment:o,after_update:a}=t.$$;o&&o.m(n,s),j(()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):i(n),t.$$.on_mount=[]}),a.forEach(j)}function Z(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];L.forEach(i=>-1===t.indexOf(i)?e.push(i):n.push(i)),n.forEach(t=>t()),L=e}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(t,e){-1===t.$$.dirty[0]&&(E.push(t),I||(I=!0,B.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function et(e,r,s,o,a,l,c=null,h=[-1]){const d=S;A(e);const f=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:r.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=s?s(e,r.props||{},(t,n,...i)=>{const r=i.length?i[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),p&&tt(e,t)),n}):[],f.update(),p=!0,i(f.before_update),f.fragment=!!o&&o(f.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);f.fragment&&f.fragment.l(t),t.forEach(u)}else f.fragment&&f.fragment.c();r.intro&&q(e.$$.fragment),Q(e,r.target,r.anchor),N()}A(d)}class nt{$$=void 0;$$set=void 0;$destroy(){Z(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function it(t){return t+.5|0}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const rt=(t,e,n)=>Math.max(Math.min(t,n),e);function st(t){return rt(it(2.55*t),0,255)}function ot(t){return rt(it(255*t),0,255)}function at(t){return rt(it(t/2.55)/100,0,1)}function lt(t){return rt(it(100*t),0,100)}const ct={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ht=[..."0123456789ABCDEF"],ut=t=>ht[15&t],dt=t=>ht[(240&t)>>4]+ht[15&t],ft=t=>(240&t)>>4==(15&t);function pt(t){var e=(t=>ft(t.r)&&ft(t.g)&&ft(t.b)&&ft(t.a))(t)?ut:dt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const gt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function mt(t,e,n){const i=e*Math.min(n,1-n),r=(e,r=(e+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function bt(t,e,n){const i=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function yt(t,e,n){const i=mt(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function xt(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),s=Math.min(e,n,i),o=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=o>.5?c/(2-r-s):c/(r+s),a=function(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,r),a=60*a+.5),[0|a,l||0,o]}function vt(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ot)}function wt(t,e,n){return vt(mt,t,e,n)}function kt(t){return(t%360+360)%360}function _t(t){const e=gt.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?st(+e[5]):ot(+e[5]));const r=kt(+e[2]),s=+e[3]/100,o=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return vt(yt,t,e,n)}(r,s,o):"hsv"===e[1]?function(t,e,n){return vt(bt,t,e,n)}(r,s,o):wt(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const Mt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ct={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let St;function At(t){St||(St=function(){const t={},e=Object.keys(Ct),n=Object.keys(Mt);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Mt[s]);s=parseInt(Ct[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}(),St.transparent=[0,0,0,0]);const e=St[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const Pt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Dt=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Ot=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Et(t,e,n){if(t){let i=xt(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=wt(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Tt(t,e){return t?Object.assign(e||{},t):t}function Lt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ot(t[3]))):(e=Tt(t,{r:0,g:0,b:0,a:1})).a=ot(e.a),e}function Rt(t){return"r"===t.charAt(0)?function(t){const e=Pt.exec(t);let n,i,r,s=255;if(e){if(e[7]!==n){const t=+e[7];s=e[8]?st(t):rt(255*t,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?st(n):rt(n,0,255)),i=255&(e[4]?st(i):rt(i,0,255)),r=255&(e[6]?st(r):rt(r,0,255)),{r:n,g:i,b:r,a:s}}}(t):_t(t)}class Bt{constructor(t){if(t instanceof Bt)return t;const e=typeof t;let n;var i,r,s;"object"===e?n=Lt(t):"string"===e&&(s=(i=t).length,"#"===i[0]&&(4===s||5===s?r={r:255&17*ct[i[1]],g:255&17*ct[i[2]],b:255&17*ct[i[3]],a:5===s?17*ct[i[4]]:255}:7!==s&&9!==s||(r={r:ct[i[1]]<<4|ct[i[2]],g:ct[i[3]]<<4|ct[i[4]],b:ct[i[5]]<<4|ct[i[6]],a:9===s?ct[i[7]]<<4|ct[i[8]]:255})),n=r||At(t)||Rt(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Tt(this._rgb);return t&&(t.a=at(t.a)),t}set rgb(t){this._rgb=Lt(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${at(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?pt(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=xt(t),n=e[0],i=lt(e[1]),r=lt(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${at(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const s=e===r?.5:e,o=2*s-1,a=n.a-i.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=Ot(at(t.r)),r=Ot(at(t.g)),s=Ot(at(t.b));return{r:ot(Dt(i+n*(Ot(at(e.r))-i))),g:ot(Dt(r+n*(Ot(at(e.g))-r))),b:ot(Dt(s+n*(Ot(at(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Bt(this.rgb)}alpha(t){return this._rgb.a=ot(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=it(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Et(this._rgb,2,t),this}darken(t){return Et(this._rgb,2,-t),this}saturate(t){return Et(this._rgb,1,t),this}desaturate(t){return Et(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=xt(t);n[0]=kt(n[0]+e),n=wt(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function It(){}const jt=(()=>{let t=0;return()=>t++})();function Ft(t){return null==t}function zt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Nt(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function $t(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function Vt(t,e){return $t(t)?t:e}function Wt(t,e){return void 0===t?e:t}const Ht=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Kt(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function qt(t,e,n,i){let r,s,o;if(zt(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(Nt(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Ut(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Yt(t){if(zt(t))return t.map(Yt);if(Nt(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Yt(t[n[r]]);return e}return t}function Xt(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function Gt(t,e,n,i){if(!Xt(t))return;const r=e[t],s=n[t];Nt(r)&&Nt(s)?Jt(r,s,i):e[t]=Yt(s)}function Jt(t,e,n){const i=zt(e)?e:[e],r=i.length;if(!Nt(t))return t;const s=(n=n||{}).merger||Gt;let o;for(let e=0;e<r;++e){if(o=i[e],!Nt(o))continue;const r=Object.keys(o);for(let e=0,i=r.length;e<i;++e)s(r[e],t,o,n)}return t}function Qt(t,e){return Jt(t,e,{merger:Zt})}function Zt(t,e,n){if(!Xt(t))return;const i=e[t],r=n[t];Nt(i)&&Nt(r)?Qt(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Yt(r))}const te={"":t=>t,x:t=>t.x,y:t=>t.y};function ee(t,e){const n=te[e]||(te[e]=function(t){const e=function(t){const e=t.split("."),n=[];let i="";for(const t of e)i+=t,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function ne(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ie=t=>void 0!==t,re=t=>"function"==typeof t,se=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const oe=Math.PI,ae=2*oe,le=ae+oe,ce=Number.POSITIVE_INFINITY,he=oe/180,ue=oe/2,de=oe/4,fe=2*oe/3,pe=Math.log10,ge=Math.sign;function me(t,e,n){return Math.abs(t-e)<n}function be(t){const e=Math.round(t);t=me(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(pe(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function ye(t){return!function(t){return"symbol"==typeof t||"object"==typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function xe(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ve(t){return t*(oe/180)}function we(t){return t*(180/oe)}function ke(t){if(!$t(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function _e(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*oe&&(s+=ae),{angle:s,distance:r}}function Me(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ce(t,e){return(t-e+le)%ae-oe}function Se(t){return(t%ae+ae)%ae}function Ae(t,e,n,i){const r=Se(t),s=Se(e),o=Se(n),a=Se(s-r),l=Se(o-r),c=Se(r-s),h=Se(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function Pe(t,e,n){return Math.max(e,Math.min(n,t))}function De(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Oe(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Ee=(t,e,n,i)=>Oe(t,n,i?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),Te=(t,e,n)=>Oe(t,n,i=>t[i][e]>=n);const Le=["push","pop","shift","splice","unshift"];function Re(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(Le.forEach(e=>{delete t[e]}),delete t._chartjs)}function Be(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ie="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function je(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,Ie.call(window,()=>{i=!1,t.apply(e,n)}))}}const Fe=t=>"start"===t?"left":"end"===t?"right":"center",ze=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Ne(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:u,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(r=Math.min(Ee(l,h,u).lo,n?i:Ee(e,h,o.getPixelForValue(u)).lo),c){const t=l.slice(0,r+1).reverse().findIndex(t=>!Ft(t[a.axis]));r-=Math.max(0,t)}r=Pe(r,0,i-1)}if(p){let t=Math.max(Ee(l,o.axis,d,!0).hi+1,n?0:Ee(e,h,o.getPixelForValue(d),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!Ft(t[a.axis]));t+=Math.max(0,e)}s=Pe(t,r,i)-r}else s=i-r}return{start:r,count:s}}function $e(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Ve=t=>0===t||1===t,We=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*ae/n),He=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ae/n)+1,Ke={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*ue),easeOutSine:t=>Math.sin(t*ue),easeInOutSine:t=>-.5*(Math.cos(oe*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ve(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ve(t)?t:We(t,.075,.3),easeOutElastic:t=>Ve(t)?t:He(t,.075,.3),easeInOutElastic(t){const e=.1125;return Ve(t)?t:t<.5?.5*We(2*t,e,.45):.5+.5*He(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Ke.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Ke.easeInBounce(2*t):.5*Ke.easeOutBounce(2*t-1)+.5};function qe(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Ue(t){return qe(t)?t:new Bt(t)}function Ye(t){return qe(t)?t:new Bt(t).saturate(.5).darken(.1).hexString()}const Xe=["x","y","borderWidth","radius","tension"],Ge=["color","borderColor","backgroundColor"];const Je=new Map;function Qe(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Je.get(n);return i||(i=new Intl.NumberFormat(t,e),Je.set(n,i)),i}(e,n).format(t)}const Ze={values:t=>zt(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const o=pe(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Qe(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(pe(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Ze.numeric.call(this,t,e,n):""}};var tn={formatters:Ze};const en=Object.create(null),nn=Object.create(null);function rn(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function sn(t,e,n){return"string"==typeof e?Jt(rn(t,e),n):Jt(rn(t,""),e)}class on{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Ye(e.backgroundColor),this.hoverBorderColor=(t,e)=>Ye(e.borderColor),this.hoverColor=(t,e)=>Ye(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return sn(this,t,e)}get(t){return rn(this,t)}describe(t,e){return sn(nn,t,e)}override(t,e){return sn(en,t,e)}route(t,e,n,i){const r=rn(this,t),s=rn(this,n),o="_"+e;Object.defineProperties(r,{[o]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=s[i];return Nt(t)?Object.assign({},e,t):Wt(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach(t=>t(this))}}var an=new on({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Ge},numbers:{type:"number",properties:Xe}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function ln(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function cn(t,e,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,u,d;for(l=0;l<a;l++)if(u=n[l],null==u||zt(u)){if(zt(u))for(c=0,h=u.length;c<h;c++)d=u[c],null==d||zt(d)||(o=ln(t,r,s,o,d))}else o=ln(t,r,s,o,u);t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function hn(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function un(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function dn(t,e,n,i){fn(t,e,n,i,null)}function fn(t,e,n,i,r){let s,o,a,l,c,h,u,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*he;if(f&&"object"==typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,g,0,0,ae):t.arc(n,i,g,0,ae),t.closePath();break;case"triangle":h=r?r/2:g,t.moveTo(n+Math.sin(m)*h,i-Math.cos(m)*g),m+=fe,t.lineTo(n+Math.sin(m)*h,i-Math.cos(m)*g),m+=fe,t.lineTo(n+Math.sin(m)*h,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+de)*l,u=Math.cos(m+de)*(r?r/2-c:l),a=Math.sin(m+de)*l,d=Math.sin(m+de)*(r?r/2-c:l),t.arc(n-u,i-a,c,m-oe,m-ue),t.arc(n+d,i-o,c,m-ue,m),t.arc(n+u,i+a,c,m,m+ue),t.arc(n-d,i+o,c,m+ue,m+oe),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}m+=de;case"rectRot":u=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-u,i-a),t.lineTo(n+d,i-o),t.lineTo(n+u,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":m+=de;case"cross":u=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-u,i-a),t.lineTo(n+u,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":u=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-u,i-a),t.lineTo(n+u,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),m+=de,u=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-u,i-a),t.lineTo(n+u,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function pn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function gn(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function mn(t){t.restore()}function bn(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function yn(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function xn(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function vn(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function wn(t,e,n,i,r,s={}){const o=zt(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ft(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&vn(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ft(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),xn(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function kn(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*oe,oe,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,oe,ue,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,ue,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-ue,!0),t.lineTo(n+o.topLeft,i)}const _n=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Mn=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Cn(t,e){const n=(""+t).match(_n);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const Sn=t=>+t||0;function An(t,e){const n={},i=Nt(e),r=i?Object.keys(e):e,s=Nt(t)?i?n=>Wt(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of r)n[t]=Sn(s(t));return n}function Pn(t){return An(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Dn(t){return An(t,["topLeft","topRight","bottomLeft","bottomRight"])}function On(t){const e=Pn(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function En(t,e){t=t||{},e=e||an.font;let n=Wt(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let i=Wt(t.style,e.style);i&&!(""+i).match(Mn)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Wt(t.family,e.family),lineHeight:Cn(Wt(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Wt(t.weight,e.weight),string:""};return r.string=function(t){return!t||Ft(t.size)||Ft(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function Tn(t,e,n,i){let r,s,o,a=!0;for(r=0,s=t.length;r<s;++r)if(o=t[r],void 0!==o&&(void 0!==e&&"function"==typeof o&&(o=o(e),a=!1),void 0!==n&&zt(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function Ln(t,e){return Object.assign(Object.create(t),e)}function Rn(t,e=[""],n,i,r=()=>t[0]){const s=n||t;void 0===i&&(i=Kn("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:n=>Rn([n,...t],e,s,i)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>zn(n,i,()=>function(t,e,n,i){let r;for(const s of e)if(r=Kn(jn(s,t),n),void 0!==r)return Fn(t,r)?Wn(n,i,t,r):r}(i,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>qn(t).includes(e),ownKeys:t=>qn(t),set(t,e,n){const i=t._storage||(t._storage=r());return t[e]=i[e]=n,delete t._keys,!0}})}function Bn(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:In(t,i),setContext:e=>Bn(t,e,n,i),override:r=>Bn(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>zn(t,e,()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];re(a)&&o.isScriptable(e)&&(a=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);a.delete(t),Fn(t,l)&&(l=Wn(r._scopes,r,t,l));return l}(e,a,t,n));zt(a)&&a.length&&(a=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(void 0!==s.index&&i(t))return e[s.index%e.length];if(Nt(e[0])){const n=e,i=r._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=Wn(i,r,t,l);e.push(Bn(n,s,o&&o[t],a))}}return e}(e,a,t,o.isIndexable));Fn(e,a)&&(a=Bn(a,r,s&&s[e],o));return a}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function In(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:re(n)?n:()=>n,isIndexable:re(i)?i:()=>i}}const jn=(t,e)=>t?t+ne(e):e,Fn=(t,e)=>Nt(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function zn(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const i=n();return t[e]=i,i}function Nn(t,e,n){return re(t)?t(e,n):t}const $n=(t,e)=>!0===t?e:"string"==typeof t?ee(e,t):void 0;function Vn(t,e,n,i,r){for(const s of e){const e=$n(n,s);if(e){t.add(e);const s=Nn(e._fallback,n,r);if(void 0!==s&&s!==n&&s!==i)return s}else if(!1===e&&void 0!==i&&n!==i)return null}return!1}function Wn(t,e,n,i){const r=e._rootScopes,s=Nn(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=Hn(a,o,n,s||n,i);return null!==l&&((void 0===s||s===n||(l=Hn(a,o,s,l,i),null!==l))&&Rn(Array.from(a),[""],r,s,()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];if(zt(r)&&Nt(n))return n;return r||{}}(e,n,i)))}function Hn(t,e,n,i,r){for(;n;)n=Vn(t,e,n,i,r);return n}function Kn(t,e){for(const n of e){if(!n)continue;const e=n[t];if(void 0!==e)return e}}function qn(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function Un(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+n,h=e[c],o[a]={r:r.parse(ee(h,s),c)};return o}const Yn=Number.EPSILON||1e-14,Xn=(t,e)=>e<t.length&&!t[e].skip&&t[e],Gn=t=>"x"===t?"y":"x";function Jn(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Me(s,r),l=Me(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=i*c,d=i*h;return{previous:{x:s.x-u*(o.x-r.x),y:s.y-u*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function Qn(t,e="x"){const n=Gn(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Xn(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Xn(t,o+1),l){if(c){const t=c[e]-l[e];r[o]=0!==t?(c[n]-l[n])/t:0}s[o]=a?c?ge(r[o-1])!==ge(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(t,e,n){const i=t.length;let r,s,o,a,l,c=Xn(t,0);for(let h=0;h<i-1;++h)l=c,c=Xn(t,h+1),l&&c&&(me(e[h],0,Yn)?n[h]=n[h+1]=0:(r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])))}(t,r,s),function(t,e,n="x"){const i=Gn(n),r=t.length;let s,o,a,l=Xn(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Xn(t,c+1),!a)continue;const r=a[n],h=a[i];o&&(s=(r-o[n])/3,a[`cp1${n}`]=r-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[n]-r)/3,a[`cp2${n}`]=r+s,a[`cp2${i}`]=h+s*e[c])}}(t,s,e)}function Zn(t,e,n){return Math.max(Math.min(t,n),e)}function ti(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)Qn(t,r);else{let n=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Jn(n,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&function(t,e){let n,i,r,s,o,a=pn(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&pn(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Zn(r.cp1x,e.left,e.right),r.cp1y=Zn(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Zn(r.cp2x,e.left,e.right),r.cp2y=Zn(r.cp2y,e.top,e.bottom)))}(t,n)}function ei(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ni(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function ii(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const ri=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const si=["top","right","bottom","left"];function oi(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=si[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function ai(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=ri(n),s="border-box"===r.boxSizing,o=oi(r,"padding"),a=oi(r,"border","width"),{x:l,y:c,box:h}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o,a,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(r,s,t.target))o=r,a=s;else{const t=e.getBoundingClientRect();o=i.clientX-t.left,a=i.clientY-t.top,l=!0}return{x:o,y:a,box:l}}(t,n),u=o.left+(h&&a.left),d=o.top+(h&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-u)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const li=t=>Math.round(10*t)/10;function ci(t,e,n,i){const r=ri(t),s=oi(r,"margin"),o=ii(r.maxWidth,t,"clientWidth")||ce,a=ii(r.maxHeight,t,"clientHeight")||ce,l=function(t,e,n){let i,r;if(void 0===e||void 0===n){const s=t&&ni(t);if(s){const t=s.getBoundingClientRect(),o=ri(s),a=oi(o,"border","width"),l=oi(o,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,i=ii(o.maxWidth,s,"clientWidth"),r=ii(o.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||ce,maxHeight:r||ce}}(t,e,n);let{width:c,height:h}=l;if("content-box"===r.boxSizing){const t=oi(r,"border","width"),e=oi(r,"padding");c-=e.width+t.width,h-=e.height+t.height}c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=li(Math.min(c,o,l.maxWidth)),h=li(Math.min(h,a,l.maxHeight)),c&&!h&&(h=li(c/2));return(void 0!==e||void 0!==n)&&i&&l.height&&h>l.height&&(h=l.height,c=li(Math.floor(h*i))),{width:c,height:h}}function hi(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}const ui=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};ei()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function di(t,e){const n=function(t,e){return ri(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function fi(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function pi(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function gi(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=fi(t,r,n),a=fi(r,s,n),l=fi(s,e,n),c=fi(o,a,n),h=fi(a,l,n);return fi(c,h,n)}function mi(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function bi(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function yi(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function xi(t){return"angle"===t?{between:Ae,compare:Ce,normalize:Se}:{between:De,compare:(t,e)=>t-e,normalize:t=>t}}function vi({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:r}}function wi(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=xi(i),{start:h,end:u,loop:d,style:f}=function(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=xi(i),l=e.length;let c,h,{start:u,end:d,loop:f}=t;if(f){for(u+=l,d+=l,c=0,h=l;c<h&&o(a(e[u%l][i]),r,s);++c)u--,d--;u%=l,d%=l}return d<u&&(d+=l),{start:u,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,b,y=!1,x=null;const v=()=>y||l(r,b,g)&&0!==a(r,b),w=()=>!y||0===a(s,g)||l(s,b,g);for(let t=h,n=h;t<=u;++t)m=e[t%o],m.skip||(g=c(m[i]),g!==b&&(y=l(g,r,s),null===x&&v()&&(x=0===a(g,r)?t:n),null!==x&&w()&&(p.push(vi({start:x,end:t,loop:d,count:o,style:f})),x=null),n=t,b=g));return null!==x&&p.push(vi({start:x,end:u,loop:d,count:o,style:f})),p}function ki(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=wi(i[r],t.points,e);s.length&&n.push(...s)}return n}function _i(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),s=Mi(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,u=e[0].start,d=u;function f(t,e,i,r){const s=a?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=s;for(;n[e%l].skip;)e+=s;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:i,style:r}),h=r,u=e%l)}}for(const t of e){u=a?u:t.start;let e,s=n[u%l];for(d=u+1;d<=t.end;d++){const a=n[d%l];e=Mi(i.setContext(Ln(r,{type:"segment",p0:s,p1:a,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),Ci(e,h)&&f(u,d-1,t.loop,h),s=a,h=e}u<d-1&&f(u,d-1,t.loop,h)}return c}(t,e,n,i):e}function Mi(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Ci(t,e){if(!e)return!1;const n=[],i=function(t,e){return qe(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function Si(t,e,n){return t.options.clip?t[n]:e[n]}function Ai(t,e){const n=e._clip;if(n.disabled)return!1;const i=function(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:Si(n,e,"left"),right:Si(n,e,"right"),top:Si(i,e,"top"),bottom:Si(i,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:i.bottom+(!0===n.bottom?0:n.bottom)}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Pi{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],s=e.duration;r.forEach(i=>i({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Ie.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Di=new Pi;const Oi="transparent",Ei={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=Ue(t||Oi),r=i.valid&&Ue(e||Oi);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Ti{constructor(t,e,n,i){const r=e[n];i=Tn([t.to,i,r,t.from]);const s=Tn([t.from,r,i]);this._active=!0,this._fn=t.fn||Ei[t.type||typeof s],this._easing=Ke[t.easing]||Ke.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Tn([t.to,e,i,t.from]),this._from=Tn([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||e<n),!this._active)return this._target[i]=o,void this._notify(!0);e<0?this._target[i]=r:(a=e/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class Li{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Nt(t))return;const e=Object.keys(an.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Nt(r))return;const s={};for(const t of e)s[t]=r[t];(zt(r.properties)&&r.properties||[i]).forEach(t=>{t!==i&&n.has(t)||n.set(t,s)})})}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const r=t[i[e]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let h=r[l];const u=n.get(l);if(h){if(u&&h.active()){h.update(u,c,o);continue}h.cancel()}u&&u.duration?(r[l]=h=new Ti(u,t,l,c),i.push(h)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Di.add(this._chart,n),!0):void 0}}function Ri(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:r,end:i?r:s}}function Bi(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Ii(t,e,n,i={}){const r=t.keys,s="single"===i.mode;let o,a,l,c;if(null===e)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],$t(c)&&(s||0===e||ge(e)===ge(c))&&(e+=c)}return h||i.all?e:0}function ji(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Fi(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function zi(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function Ni(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(s,o,i),u=e.length;let d;for(let t=0;t<u;++t){const n=e[t],{[l]:s,[c]:u}=n;d=(n._stacks||(n._stacks={}))[c]=Fi(r,h,s),d[a]=u,d._top=zi(d,o,!0,i.type),d._bottom=zi(d,o,!1,i.type);(d._visualValues||(d._visualValues={}))[a]=u}}function $i(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function Vi(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const Wi=t=>"reset"===t||"none"===t,Hi=(t,e)=>e?t:Object.assign({},t);class Ki{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ji(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Vi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=Wt(n.xAxisID,$i(t,"x")),s=e.yAxisID=Wt(n.yAxisID,$i(t,"y")),o=e.rAxisID=Wt(n.rAxisID,$i(t,"r")),a=e.indexAxis,l=e.iAxisID=i(a,r,s,o),c=e.vAxisID=i(a,s,r,o);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Re(this._data,this),t._stacked&&Vi(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Nt(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:i}=e,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}(e,t)}else if(n!==e){if(n){Re(n,this);const t=this._cachedMeta;Vi(t),t._parsed=[]}e&&Object.isExtensible(e)&&(r=this,(i=e)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),Le.forEach(t=>{const e="_onData"+ne(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...t){const r=n.apply(this,t);return i._chartjs.listeners.forEach(n=>{"function"==typeof n[e]&&n[e](...t)}),r}})}))),this._syncList=[],this._data=e}var i,r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=ji(e.vScale,e),e.stack!==n.stack&&(i=!0,Vi(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&(Ni(this,e._parsed),e._stacked=ji(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,l,c,h=0===t&&e===i.length||n._sorted,u=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=zt(i[t])?this.parseArrayData(n,i,t,e):Nt(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const r=()=>null===l[o]||u&&l[o]<u[o];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],h&&(r()&&(h=!1),u=l);n._sorted=h}s&&Ni(this,c)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:s}=t,o=r.axis,a=s.axis,l=r.getLabels(),c=r===s,h=new Array(i);let u,d,f;for(u=0,d=i;u<d;++u)f=u+n,h[u]={[o]:c||r.parse(l[f],f),[a]:s.parse(e[f],f)};return h}parseArrayData(t,e,n,i){const{xScale:r,yScale:s}=t,o=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+n,h=e[c],o[a]={x:r.parse(h[0],c),y:s.parse(h[1],c)};return o}parseObjectData(t,e,n,i){const{xScale:r,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,h,u,d;for(c=0,h=i;c<h;++c)u=c+n,d=e[u],l[c]={x:r.parse(ee(d,o),u),y:s.parse(ee(d,a),u)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,s=e[t.axis];return Ii({keys:Bi(i,!0),values:e._stacks[t.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let s=null===r?NaN:r;const o=i&&n._stacks[e.axis];i&&o&&(i.values=o,s=Ii(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,s=i.length,o=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Bi(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let u,d;function f(){d=i[u];const e=d[o.axis];return!$t(d[t.axis])||c>e||h<e}for(u=0;u<s&&(f()||(this.updateRangeFromParsed(l,t,d,a),!r));++u);if(r)for(u=s-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(l,t,d,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i][t.axis],$t(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return Nt(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(Wt(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=Ri(t,n),r=Ri(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,r,o,a),c=o;c<o+a;++c){const e=i[c];e.hidden||(e.active&&l?s.push(e):e.draw(t,r))}for(c=0;c<s.length;++c)s[c].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return Ln(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Ln(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,r=this._cachedDataOpts,s=t+"-"+e,o=r[s],a=this.enableOptionSharing&&ie(n);if(o)return Hi(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),h=i?[`${t}Hover`,"hover",t,""]:[t,""],u=l.getOptionScopes(this.getDataset(),c),d=Object.keys(an.elements[t]),f=l.resolveNamedOptions(u,d,()=>this.getContext(n,i,e),h);return f.$shared&&(f.$shared=a,r[s]=Object.freeze(Hi(f,a))),f}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,s=`animation-${e}`,o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(t,n,e))}const l=new Li(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Wi(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:s}}updateElement(t,e,n,i){Wi(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Wi(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,r=e.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,s=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=s;o--)t[o]=t[o-e]};for(a(r),o=t;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Vi(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function qi(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=Be(i.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let i,r,s,o,a=e._length;const l=()=>{32767!==s&&-32768!==s&&(ie(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=e.getPixelForValue(n[i]),l();for(o=void 0,i=0,r=e.ticks.length;i<r;++i)s=e.getPixelForTick(i),l();return a}function Ui(t,e,n,i){return zt(t)?function(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Yi(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,h,u,d;for(c=n,h=n+i;c<h;++c)d=e[c],u={},u[r.axis]=a||r.parse(o[c],c),l.push(Ui(d,u,s,c));return l}function Xi(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Gi(t,e,n,i){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:h}=function(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=h:(s[Ji(h,o,a,l)]=!0,r=c)),s[Ji(r,o,a,l)]=!0,t.borderSkipped=s}function Ji(t,e,n,i){var r,s,o;return i?(o=n,t=Qi(t=(r=t)===(s=e)?o:r===o?s:r,n,e)):t=Qi(t,e,n),t}function Qi(t,e,n){return"start"===t?e:"end"===t?n:t}function Zi(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class tr extends Ki{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,r)=>{const s=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=t=>+n[t];if(Nt(n[t])){const{key:t="value"}=this._parsing;o=e=>+ee(n[e],t)}for(r=t,s=t+e;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return ve(this.options.rotation-90)}_getCircumference(){return ve(this.options.circumference)}_getRotationExtents(){let t=ae,e=-ae;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const h=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let i=1,r=1,s=0,o=0;if(e<ae){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),u=Math.cos(l),d=Math.sin(l),f=(t,e,i)=>Ae(t,a,l,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>Ae(t,a,l,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,c,u),m=f(ue,h,d),b=p(oe,c,u),y=p(oe+ue,h,d);i=(g-b)/2,r=(m-y)/2,s=-(g+b)/2,o=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(d,u,a),b=(n.width-s)/f,y=(n.height-s)/p,x=Math.max(Math.min(b,y)/2,0),v=Ht(this.options.radius,x),w=(v-Math.max(v*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=m*v,i.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/ae)}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,h=r&&a.animateScale,u=h?0:this.innerRadius,d=h?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,i);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,r);for(g=e;g<e+n;++g){const e=this._circumference(g,r),n=t[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:u};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=e,this.updateElement(n,g,s,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ae*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Qe(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,s,o,a;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),t=s.data,o=s.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Wt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class er extends Ki{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map((e,r)=>{const s=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Qe(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return Un.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,i){const r="reset"===i,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,h=a.getIndexAngle(0)-.5*oe;let u,d=h;const f=360/this.countVisibleElements();for(u=0;u<e;++u)d+=this._computeAngle(u,i,f);for(u=e;u<e+n;u++){const e=t[u];let n=d,p=d+this._computeAngle(u,i,f),g=s.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;d=p,r&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=h));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(u,e.active?"active":i)};this.updateElement(e,u,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?ve(this.resolveDataElementOptions(t,e).angle||n):0}}var nr=Object.freeze({__proto__:null,BarController:class extends Ki{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,i){return Yi(t,e,n,i)}parseArrayData(t,e,n,i){return Yi(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?o:a,c="x"===s.axis?o:a,h=[];let u,d,f,p;for(u=n,d=n+i;u<d;++u)p=e[u],f={},f[r.axis]=r.parse(ee(p,l),u),h.push(Ui(ee(p,c),f,s,u));return h}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),s=r._custom,o=Xi(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:h,includeOptions:u}=this._getSharedOptions(e,i);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=r||Ft(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(e._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||Xi(e._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};u&&(g.options=h||this.resolveDataElementOptions(d,t[d].active?"active":i));const m=g.options||t[d].options;Gi(g,m,p,s),Zi(g,m,c.ratio),this.updateElement(t[d],d,g,i)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),r=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(e),a=o&&o[n.axis],l=t=>{const e=t._parsed.find(t=>t[n.axis]===a),i=e&&e[t.vScale.axis];if(Ft(i)||isNaN(i))return!0};for(const n of i)if((void 0===e||!l(n))&&((!1===r||-1===s.indexOf(n.stack)||void 0===r&&void 0===n.stack)&&s.push(n.stack),n.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Wt("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,s;for(r=0,s=e.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=t.barThickness;return{min:o||qi(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(t),l=a._custom,c=Xi(l);let h,u,d=a[e.axis],f=0,p=n?this.applyStack(e,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&ge(d)!==ge(l.barEnd)&&(f=0),f+=d);const g=Ft(r)||c?f:r;let m=e.getPixelForValue(g);if(h=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,u=h-m,Math.abs(u)<s){u=function(t,e,n){return 0!==t?ge(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(u,e,o)*s,d===o&&(m-=u/2);const t=e.getPixelForDecimal(0),r=e.getPixelForDecimal(1),l=Math.min(t,r),f=Math.max(t,r);m=Math.max(Math.min(m,f),l),h=m+u,n&&!c&&(a._stacks[e.axis]._visualValues[i]=e.getValueForPixel(h)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=ge(u)*e.getLineWidthForValue(o)/2;m+=t,u-=t}return{size:u,base:m,head:h,center:h+u/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,r=i.skipNull,s=Wt(i.maxBarThickness,1/0);let o,a;const l=this._getAxisCount();if(e.grouped){const n=r?this._getStackCount(t):e.stackCount,c="flex"===i.barThickness?function(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,i,n*l):function(t,e,n,i){const r=n.barThickness;let s,o;return Ft(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}(t,e,i,n*l),h="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(Wt(h,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+u;o=c.start+c.chunk*d+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(s,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[e.axis]||n[r].hidden||n[r].draw(this._ctx)}},BubbleController:class extends Ki{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<r.length;t++)r[t]._custom=this.resolveDataElementOptions(t+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=Wt(i[2],this.resolveDataElementOptions(t+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=Wt(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),l=s._custom;return{label:n[t]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,i),c=s.axis,h=o.axis;for(let u=e;u<e+n;u++){const e=t[u],n=!r&&this.getParsed(u),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[h]=r?o.getBasePixel():o.getPixelForValue(n[h]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(u,e.active?"active":i),r&&(d.options.radius=0)),this.updateElement(e,u,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=Wt(n&&n._custom,r),i}},DoughnutController:tr,LineController:class extends Ki{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,s=this.chart._animationsDisabled;let{start:o,count:a}=Ne(e,i,s);this._drawStart=o,this._drawCount=a,$e(e)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},t),this.updateElements(i,o,a,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(e,i),u=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=ye(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,b=e+n,y=t.length;let x=e>0&&this.getParsed(e-1);for(let n=0;n<y;++n){const f=t[n],y=m?f:{};if(n<e||n>=b){y.skip=!0;continue}const v=this.getParsed(n),w=Ft(v[d]),k=y[u]=s.getPixelForValue(v[u],n),_=y[d]=r||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],n);y.skip=isNaN(k)||isNaN(_)||w,y.stop=n>0&&Math.abs(v[u]-x[u])>g,p&&(y.parsed=v,y.raw=l.data[n]),h&&(y.options=c||this.resolveDataElementOptions(n,f.active?"active":i)),m||this.updateElement(f,n,y,i),x=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends tr{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:er,RadarController:class extends Ki{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Un.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),l=s?r.xCenter:a.x,c=s?r.yCenter:a.y,h={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,o,h,i)}}},ScatterController:class extends Ki{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:s}=Ne(e,n,i);if(this._drawStart=r,this._drawCount=s,$e(e)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,i),h=this.getSharedOptions(c),u=this.includeOptions(i,h),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=ye(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||"none"===i;let y=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),p=b?e:{},x=Ft(n[f]),v=p[d]=s.getPixelForValue(n[d],c),w=p[f]=r||x?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],c);p.skip=isNaN(v)||isNaN(w)||x,p.stop=c>0&&Math.abs(n[d]-y[d])>m,g&&(p.parsed=n,p.raw=l.data[c]),u&&(p.options=h||this.resolveDataElementOptions(c,e.active?"active":i)),b||this.updateElement(e,c,p,i),y=n}this.updateSharedOptions(h,i,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,s)/2}}});function ir(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class rr{static override(t){Object.assign(rr.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ir()}parse(){return ir()}format(){return ir()}add(){return ir()}diff(){return ir()}startOf(){return ir()}endOf(){return ir()}}var sr=rr;function or(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const o=a._reversePixels?Te:Ee;if(!i){const i=o(s,e,n);if(l){const{vScale:e}=r._cachedMeta,{_parsed:n}=t,s=n.slice(0,i.lo+1).reverse().findIndex(t=>!Ft(t[e.axis]));i.lo-=Math.max(0,s);const o=n.slice(i.hi).findIndex(t=>!Ft(t[e.axis]));i.hi+=Math.max(0,o)}return i}if(r._sharedOptions){const t=s[0],i="function"==typeof t.getRange&&t.getRange(e);if(i){const t=o(s,e,n-i),r=o(s,e,n+i);return{lo:t.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function ar(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let t=0,n=s.length;t<n;++t){const{index:n,data:a}=s[t],{lo:l,hi:c}=or(s[t],e,o,r);for(let t=l;t<=c;++t){const e=a[t];e.skip||i(e,n,t)}}}function lr(t,e,n,i,r){const s=[];if(!r&&!t.isPointInArea(e))return s;return ar(t,n,e,function(n,o,a){(r||pn(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&s.push({element:n,datasetIndex:o,index:a})},!0),s}function cr(t,e,n,i,r,s){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,s=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return ar(t,n,e,function(n,c,h){const u=n.inRange(e.x,e.y,r);if(i&&!u)return;const d=n.getCenterPoint(r);if(!(!!s||t.isPointInArea(d))&&!u)return;const f=a(e,d);f<l?(o=[{element:n,datasetIndex:c,index:h}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:h})}),o}function hr(t,e,n,i,r,s){return s||t.isPointInArea(e)?"r"!==n||i?cr(t,e,n,i,r,s):function(t,e,n,i){let r=[];return ar(t,n,e,function(t,n,s){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],i),{angle:l}=_e(t,{x:e.x,y:e.y});Ae(l,o,a)&&r.push({element:t,datasetIndex:n,index:s})}),r}(t,e,n,r):[]}function ur(t,e,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return ar(t,n,e,(t,i,l)=>{t[o]&&t[o](e[n],r)&&(s.push({element:t,datasetIndex:i,index:l}),a=a||t.inRange(e.x,e.y,r))}),i&&!a?[]:s}var dr={evaluateInteractionItems:ar,modes:{index(t,e,n,i){const r=ai(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?lr(t,r,s,i,o):hr(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,i){const r=ai(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?lr(t,r,s,i,o):hr(t,r,s,!1,i,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,i)=>lr(t,ai(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const r=ai(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return hr(t,r,s,n.intersect,i,o)},x:(t,e,n,i)=>ur(t,ai(e,t),"x",n.intersect,i),y:(t,e,n,i)=>ur(t,ai(e,t),"y",n.intersect,i)}};const fr=["left","top","right","bottom"];function pr(t,e){return t.filter(t=>t.pos===e)}function gr(t,e){return t.filter(t=>-1===fr.indexOf(t.pos)&&t.box.axis===e)}function mr(t,e){return t.sort((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function br(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!fr.includes(i))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:o&&e.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:o&&e.availableHeight)}return n}function yr(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function xr(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function vr(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!Nt(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[r]+=n.size}s.getPadding&&xr(o,s.getPadding());const a=Math.max(0,e.outerWidth-yr(o,t,"left","right")),l=Math.max(0,e.outerHeight-yr(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function wr(t,e){const n=e.maxPadding;function i(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{i[t]=Math.max(e[t],n[t])}),i}return i(t?["left","right"]:["top","bottom"])}function kr(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,wr(a.horizontal,e));const{same:o,other:u}=vr(e,n,a,i);c|=o&&r.length,h=h||u,l.fullSize||r.push(a)}return c&&kr(r,e,n,i)||h}function _r(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Mr(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const t=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=e.w*c,s=l.size||t.height;ie(l.start)&&(o=l.start),t.fullSize?_r(t,r.left,o,n.outerWidth-r.right-r.left,s):_r(t,e.left+l.placed,o,i,s),l.start=o,l.placed+=i,o=t.bottom}else{const i=e.h*c,o=l.size||t.width;ie(l.start)&&(s=l.start),t.fullSize?_r(t,s,r.top,o,n.outerHeight-r.bottom-r.top):_r(t,s,e.top+l.placed,o,i),l.start=s,l.placed+=i,s=t.right}}e.x=s,e.y=o}var Cr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=On(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=function(t){const e=function(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}(t),n=mr(e.filter(t=>t.box.fullSize),!0),i=mr(pr(e,"left"),!0),r=mr(pr(e,"right")),s=mr(pr(e,"top"),!0),o=mr(pr(e,"bottom")),a=gr(e,"x"),l=gr(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:pr(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;qt(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const h=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),d=Object.assign({},r);xr(d,On(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=br(l.concat(c),u);kr(a.fullSize,f,u,p),kr(l,f,u,p),kr(c,f,u,p)&&kr(l,f,u,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Mr(a.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,Mr(a.rightAndBottom,f,u,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},qt(a.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Sr{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class Ar extends Sr{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Pr="$chartjs",Dr={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Or=t=>null===t||""===t;const Er=!!ui&&{passive:!0};function Tr(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Er)}function Lr(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Rr(t,e,n){const i=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Lr(n.addedNodes,i),e=e&&!Lr(n.removedNodes,i);e&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Br(t,e,n){const i=t.canvas,r=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Lr(n.removedNodes,i),e=e&&!Lr(n.addedNodes,i);e&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ir=new Map;let jr=0;function Fr(){const t=window.devicePixelRatio;t!==jr&&(jr=t,Ir.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function zr(t,e,n){const i=t.canvas,r=i&&ni(i);if(!r)return;const s=je((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()},window),o=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||s(n,i)});return o.observe(r),function(t,e){Ir.size||window.addEventListener("resize",Fr),Ir.set(t,e)}(t,s),o}function Nr(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Ir.delete(t),Ir.size||window.removeEventListener("resize",Fr)}(t)}function $r(t,e,n){const i=t.canvas,r=je(e=>{null!==t.ctx&&n(function(t,e){const n=Dr[t.type]||t.type,{x:i,y:r}=ai(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))},t);return function(t,e,n){t&&t.addEventListener(e,n,Er)}(i,e,r),r}class Vr extends Sr{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Pr]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Or(r)){const e=di(t,"width");void 0!==e&&(t.width=e)}if(Or(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=di(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Pr])return!1;const n=e[Pr].initial;["height","width"].forEach(t=>{const i=n[t];Ft(i)?e.removeAttribute(t):e.setAttribute(t,i)});const i=n.style||{};return Object.keys(i).forEach(t=>{e.style[t]=i[t]}),e.width=e.width,delete e[Pr],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:Rr,detach:Br,resize:zr}[e]||$r;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];if(!i)return;({attach:Nr,detach:Nr,resize:Nr}[e]||Tr)(t,e,i),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return ci(t,e,n,i)}isAttached(t){const e=t&&ni(t);return!(!e||!e.isConnected)}}class Wr{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return ye(this.x)&&ye(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach(t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),i}}function Hr(t,e){const n=t.options.ticks,i=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function(t,e,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===o&&(e.push(t[r]),s++,o=n[s*i])}(e,c,s,o/r),c;const h=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const s=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}(i);for(let t=0,e=s.length-1;t<e;t++){const e=s[t];if(e>r)return e}return Math.max(r,1)}(s,e,r);if(o>0){let t,n;const i=o>1?Math.round((l-a)/(o-1)):null;for(Kr(e,c,h,Ft(i)?0:a-i,a),t=0,n=o-1;t<n;t++)Kr(e,c,h,s[t],s[t+1]);return Kr(e,c,h,l,Ft(i)?e.length:l+i),c}return Kr(e,c,h),c}function Kr(t,e,n,i,r){const s=Wt(i,0),o=Math.min(Wt(r,t.length),t.length);let a,l,c,h=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=s;c<0;)h++,c=Math.round(s+h*n);for(l=Math.max(s,0);l<o;l++)l===c&&(e.push(t[l]),h++,c=Math.round(s+h*n))}const qr=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Ur=(t,e)=>Math.min(e||t,t);function Yr(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function Xr(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,o-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function Gr(t){return t.drawTicks?t.tickLength:0}function Jr(t,e){if(!t.display)return 0;const n=En(t.font,e),i=On(t.padding);return(zt(t.text)?t.text.length:1)*n.lineHeight+i.height}function Qr(t,e,n){let i=Fe(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class Zr extends Wr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=Vt(t,Number.POSITIVE_INFINITY),e=Vt(e,Number.NEGATIVE_INFINITY),n=Vt(n,Number.POSITIVE_INFINITY),i=Vt(i,Number.NEGATIVE_INFINITY),{min:Vt(t,n),max:Vt(e,i),minDefined:$t(t),maxDefined:$t(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)e=o[a].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),s||(i=Math.max(i,e.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Vt(n,Vt(i,n)),max:Vt(i,Vt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Kt(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:r}=t,s=Ht(e,(r-i)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Yr(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Hr(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Kt(this.options.afterUpdate,[this])}beforeSetDimensions(){Kt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Kt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Kt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Kt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=Kt(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Kt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Kt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Ur(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let s,o,a,l=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),h=c.widest.width,u=c.highest.height,d=Pe(this.chart.width-h,0,this.maxWidth);s=t.offset?this.maxWidth/n:d/(n-1),h+6>s&&(s=d/(n-(t.offset?.5:1)),o=this.maxHeight-Gr(t.grid)-e.padding-Jr(t.title,this.chart.options.font),a=Math.sqrt(h*h+u*u),l=we(Math.min(Math.asin(Pe((c.highest.height+6)/s,-1,1)),Math.asin(Pe(o/a,-1,1))-Math.asin(Pe(u/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Kt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Kt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=Jr(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=Gr(r)+s):(t.height=this.maxHeight,t.width=Gr(r)+s),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=ve(this.labelRotation),c=Math.cos(l),h=Math.sin(l);if(o){const e=n.mirror?0:h*r.width+c*s.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*r.width+h*s.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,i,h,c)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,u=0;a?l?(h=i*t.width,u=n*e.height):(h=n*t.height,u=i*e.width):"start"===r?u=e.width:"end"===r?h=t.width:"inner"!==r&&(h=t.width/2,u=e.width/2),this.paddingLeft=Math.max((h-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((u-c+s)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Kt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Ft(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Yr(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(e/Ur(e,n));let l,c,h,u,d,f,p,g,m,b,y,x=0,v=0;for(l=0;l<e;l+=a){if(u=t[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=b=0,Ft(u)||zt(u)){if(zt(u))for(c=0,h=u.length;c<h;++c)y=u[c],Ft(y)||zt(y)||(m=ln(i,p.data,p.gc,m,y),b+=g)}else m=ln(i,p.data,p.gc,m,u),b=g;s.push(m),o.push(b),x=Math.max(m,x),v=Math.max(b,v)}!function(t,e){qt(t,t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}})}(r,e);const w=s.indexOf(x),k=o.indexOf(v),_=t=>({width:s[t]||0,height:o[t]||0});return{first:_(0),last:_(e-1),widest:_(w),highest:_(k),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Pe(this._alignToPixels?hn(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Ln(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Ln(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=ve(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),s=t.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),h=Gr(r),u=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(t){return hn(n,t,f)};let m,b,y,x,v,w,k,_,M,C,S,A;if("top"===s)m=g(this.bottom),w=this.bottom-h,_=m-p,C=g(t.top)+p,A=t.bottom;else if("bottom"===s)m=g(this.top),C=t.top,A=g(t.bottom)-p,w=m+p,_=this.top+h;else if("left"===s)m=g(this.right),v=this.right-h,k=m-p,M=g(t.left)+p,S=t.right;else if("right"===s)m=g(this.left),M=t.left,S=g(t.right)-p,v=m+p,k=this.left+h;else if("x"===e){if("center"===s)m=g((t.top+t.bottom)/2+.5);else if(Nt(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}C=t.top,A=t.bottom,w=m+p,_=w+h}else if("y"===e){if("center"===s)m=g((t.left+t.right)/2);else if(Nt(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}v=m-p,k=v-h,M=t.left,S=t.right}const P=Wt(i.ticks.maxTicksLimit,c),D=Math.max(1,Math.ceil(c/P));for(b=0;b<c;b+=D){const t=this.getContext(b),e=r.setContext(t),i=o.setContext(t),s=e.lineWidth,c=e.color,h=i.dash||[],d=i.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=Xr(this,b,a),void 0!==y&&(x=hn(n,y,s),l?v=k=M=S=x:w=_=C=A=x,u.push({tx1:v,ty1:w,tx2:k,ty2:_,x1:M,y1:C,x2:S,y2:A,width:s,color:c,borderDash:h,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,u}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:h}=r,u=Gr(n.grid),d=u+c,f=h?-c:d,p=-ve(this.labelRotation),g=[];let m,b,y,x,v,w,k,_,M,C,S,A,P="middle";if("top"===i)w=this.bottom-f,k=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+f,k=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(u);k=t.textAlign,v=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(u);k=t.textAlign,v=t.x}else if("x"===e){if("center"===i)w=(t.top+t.bottom)/2+d;else if(Nt(i)){const t=Object.keys(i)[0],e=i[t];w=this.chart.scales[t].getPixelForValue(e)+d}k=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)v=(t.left+t.right)/2-d;else if(Nt(i)){const t=Object.keys(i)[0],e=i[t];v=this.chart.scales[t].getPixelForValue(e)}k=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===a?P="top":"end"===a&&(P="bottom"));const D=this._getLabelSizes();for(m=0,b=o.length;m<b;++m){y=o[m],x=y.label;const t=r.setContext(this.getContext(m));_=this.getPixelForTick(m)+r.labelOffset,M=this._resolveTickFontOptions(m),C=M.lineHeight,S=zt(x)?x.length:1;const e=S/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let u,d=k;if(s?(v=_,"inner"===k&&(d=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),A="top"===i?"near"===l||0!==p?-S*C+C/2:"center"===l?-D.highest.height/2-e*C+C:-D.highest.height+C/2:"near"===l||0!==p?C/2:"center"===l?D.highest.height/2-e*C:D.highest.height-S*C,h&&(A*=-1),0===p||t.showLabelBackdrop||(v+=C/2*Math.sin(p))):(w=_,A=(1-S)*C/2),t.showLabelBackdrop){const e=On(t.backdropPadding),n=D.heights[m],i=D.widths[m];let r=A-e.top,s=0-e.left;switch(P){case"middle":r-=n/2;break;case"bottom":r-=n}switch(k){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===b-1?s-=i:m>0&&(s-=i/2)}u={left:s,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:x,font:M,textOffset:A,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:P,translation:[v,w],backdrop:u}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ve(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=t+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===e?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,s;const o=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,s=i.length;r<s;++r){const t=i[r];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,h,u;this.isHorizontal()?(l=hn(t,this.left,s)-s/2,c=hn(t,this.right,o)+o/2,h=u=a):(h=hn(t,this.top,s)-s/2,u=hn(t,this.bottom,o)+o/2,l=c=a),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(l,h),e.lineTo(c,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&gn(e,n);const i=this.getLabelItems(t);for(const t of i){const n=t.options,i=t.font;wn(e,t.label,0,t.textOffset,i,n)}n&&mn(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=En(n.font),s=On(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===e||"center"===e||Nt(e)?(a+=s.bottom,zt(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:h,rotation:u}=function(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let u,d,f,p=0;const g=o-r,m=a-s;if(t.isHorizontal()){if(d=ze(i,s,a),Nt(n)){const t=Object.keys(n)[0],i=n[t];f=h[t].getPixelForValue(i)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:qr(t,n,e);u=a-s}else{if(Nt(n)){const t=Object.keys(n)[0],i=n[t];d=h[t].getPixelForValue(i)-m+e}else d="center"===n?(c.left+c.right)/2-m+e:qr(t,n,e);f=ze(i,o,r),p="left"===n?-ue:ue}return{titleX:d,titleY:f,maxWidth:u,rotation:p}}(this,a,e,o);wn(t,n.text,0,0,r,{color:n.color,maxWidth:h,rotation:u,textAlign:Qr(o,e,i),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Wt(t.grid&&t.grid.z,-1),i=Wt(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Zr.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=e.length;r<s;++r){const s=e[r];s[n]!==this.id||t&&s.type!==t||i.push(s)}return i}_resolveTickFontOptions(t){return En(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ts{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=Jt(Object.create(null),[n?an.get(n):{},an.get(e),t.defaults]);an.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");an.route(s,r,l,a)})}(e,t.defaultRoutes);t.descriptors&&an.describe(e,t.descriptors)}(t,s,n),this.override&&an.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in an[i]&&(delete an[i][n],this.override&&delete en[n])}}class es{constructor(){this.controllers=new ts(Ki,"datasets",!0),this.elements=new ts(Wr,"elements"),this.plugins=new ts(Object,"plugins"),this.scales=new ts(Zr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):qt(e,e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)})})}_exec(t,e,n){const i=ne(t);Kt(n["before"+i],[],n),e[t](n),Kt(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}}var ns=new es;class is{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),s=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===Kt(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){Ft(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=Wt(n.options&&n.options.plugins,{}),r=function(t){const e={},n=[],i=Object.keys(ns.plugins.items);for(let t=0;t<i.length;t++)n.push(ns.getPlugin(i[t]));const r=t.plugins||[];for(let t=0;t<r.length;t++){const i=r[t];-1===n.indexOf(i)&&(n.push(i),e[i.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const e=a.id,l=rs(i[e],r);null!==l&&s.push({plugin:a,options:ss(t.config,{plugin:a,local:n[e]},l,o)})}return s}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function rs(t,e){return e||!1!==t?!0===t?{}:t:null}function ss(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function os(t,e){const n=an.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function as(t){if("x"===t||"y"===t||"r"===t)return t}function ls(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function cs(t,...e){if(as(t))return t;for(const n of e){const e=n.axis||ls(n.position)||t.length>1&&as(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function hs(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function us(t,e){const n=en[t.type]||{scales:{}},i=e.scales||{},r=os(t.type,e),s=Object.create(null);return Object.keys(i).forEach(e=>{const o=i[e];if(!Nt(o))return console.error(`Invalid scale configuration for scale: ${e}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=cs(e,o,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return hs(t,"x",n[0])||hs(t,"y",n[0])}return{}}(e,t),an.scales[o.type]),l=function(t,e){return t===e?"_index_":"_value_"}(a,r),c=n.scales||{};s[e]=Qt(Object.create(null),[{axis:a},o,c[a],c[l]])}),t.data.datasets.forEach(n=>{const r=n.type||t.type,o=n.indexAxis||os(r,e),a=(en[r]||{}).scales||{};Object.keys(a).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,o),r=n[e+"AxisID"]||e;s[r]=s[r]||Object.create(null),Qt(s[r],[{axis:e},i[r],a[t]])})}),Object.keys(s).forEach(t=>{const e=s[t];Qt(e,[an.scales[e.type],an.scale])}),s}function ds(t){const e=t.options||(t.options={});e.plugins=Wt(e.plugins,{}),e.scales=us(t,e)}function fs(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const ps=new Map,gs=new Set;function ms(t,e){let n=ps.get(t);return n||(n=e(),ps.set(t,n),gs.add(n)),n}const bs=(t,e,n)=>{const i=ee(e,n);void 0!==i&&t.add(i)};class ys{constructor(t){this._config=function(t){return(t=t||{}).data=fs(t.data),ds(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=fs(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ds(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ms(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return ms(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return ms(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return ms(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,s=this._cachedScopes(t,n),o=s.get(e);if(o)return o;const a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>bs(a,t,e))),e.forEach(t=>bs(a,i,t)),e.forEach(t=>bs(a,en[r]||{},t)),e.forEach(t=>bs(a,an,t)),e.forEach(t=>bs(a,nn,t))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),gs.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,en[e]||{},an.datasets[e]||{},{type:e},an,nn]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:s,subPrefixes:o}=xs(this._resolverCache,t,i);let a=s;if(function(t,e){const{isScriptable:n,isIndexable:i}=In(t);for(const r of e){const e=n(r),s=i(r),o=(s||e)&&t[r];if(e&&(re(o)||vs(o))||s&&zt(o))return!0}return!1}(s,e)){r.$shared=!1;a=Bn(s,n=re(n)?n():n,this.createResolver(t,n,o))}for(const t of e)r[t]=a[t];return r}createResolver(t,e,n=[""],i){const{resolver:r}=xs(this._resolverCache,t,n);return Nt(e)?Bn(r,e,void 0,i):r}}function xs(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:Rn(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},i.set(r,s)}return s}const vs=t=>Nt(t)&&Object.getOwnPropertyNames(t).some(e=>re(t[e]));const ws=["top","bottom","left","right","chartArea"];function ks(t,e){return"top"===t||"bottom"===t||-1===ws.indexOf(t)&&"x"===e}function _s(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Ms(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Kt(n&&n.onComplete,[t],e)}function Cs(t){const e=t.chart,n=e.options.animation;Kt(n&&n.onProgress,[t],e)}function Ss(t){return ei()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const As={},Ps=t=>{const e=Ss(t);return Object.values(As).filter(t=>t.canvas===e).pop()};function Ds(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const s=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=s)}}}class Os{static defaults=an;static instances=As;static overrides=en;static registry=ns;static version="4.5.0";static getChart=Ps;static register(...t){ns.add(...t),Es()}static unregister(...t){ns.remove(...t),Es()}constructor(t,e){const n=this.config=new ys(e),i=Ss(t),r=Ps(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!ei()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Ar:Vr}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=jt(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new is,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}(t=>this.update(t),s.resizeDelay||0),this._dataChanges=[],As[this.id]=this,o&&a?(Di.listen(this,"complete",Ms),Di.listen(this,"progress",Cs),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return Ft(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ns}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return un(this.canvas,this.ctx),this}stop(){return Di.stop(this),this}resize(t,e){Di.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,t,e,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,hi(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Kt(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){qt(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let r=[];e&&(r=r.concat(Object.keys(e).map(t=>{const n=e[t],i=cs(t,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}}))),qt(r,e=>{const r=e.options,s=r.id,o=cs(s,r),a=Wt(r.type,e.dtype);void 0!==r.position&&ks(r.position,o)===ks(e.dposition)||(r.position=e.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(ns.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,t)}),qt(i,(t,e)=>{t||delete n[e]}),qt(n,t=>{Cr.configure(this,t,t.options),Cr.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(_s("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||os(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=ns.getController(s),{datasetElementType:i,dataElementType:o}=an.datasets[s];Object.assign(e,{dataElementType:ns.getElement(o),datasetElementType:i&&ns.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){qt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(n),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||qt(r,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(_s("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){qt(this.scales,t=>{Cr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);se(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e){Ds(t,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),i=n(0);for(let t=1;t<e;t++)if(!se(i,n(t)))return;return Array.from(i).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Cr.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],qt(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,re(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Di.has(this)?this.attached&&!Di.running(this)&&Di.start(this):(this.draw(),Ms({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},i=Ai(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&gn(e,i),t.controller.draw(),i&&mn(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return pn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=dr.modes[e];return"function"==typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter(t=>t&&t._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Ln(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),s=r.controller._resolveAnimations(void 0,i);ie(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(r,{visible:n}),this.update(e=>e.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Di.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),un(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete As[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};qt(this.options.events,t=>n(t,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():s()}unbindEvents(){qt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},qt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){s=t[o];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}});!Ut(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),s=r(e,t),o=n?t:r(t,e);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,s=e,o=this._getActiveElements(t,i,n,s),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,Kt(r.onHover,[t,o,this],this),a&&Kt(r.onClick,[t,o,this],this));const c=!Ut(o,i);return(c||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function Es(){return qt(Os.instances,t=>t._plugins.invalidate())}function Ts(t,e,n,i){const r=An(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-e)/2,o=Math.min(s,i*e/2),a=t=>{const e=(n-Math.min(s,t))*i/2;return Pe(t,0,Math.min(s,e))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Pe(r.innerStart,0,o),innerEnd:Pe(r.innerEnd,0,o)}}function Ls(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Rs(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,u=Math.max(e.outerRadius+i+n-c,0),d=h>0?h+i+n+c:0;let f=0;const p=r-l;if(i){const t=((h>0?h-i:0)+(u>0?u-i:0))/2;f=(p-(0!==t?p*t/(t+i):p))/2}const g=(p-Math.max(.001,p*u-n/oe)/u)/2,m=l+g+f,b=r-g-f,{outerStart:y,outerEnd:x,innerStart:v,innerEnd:w}=Ts(e,d,u,b-m),k=u-y,_=u-x,M=m+y/k,C=b-x/_,S=d+v,A=d+w,P=m+v/S,D=b-w/A;if(t.beginPath(),s){const e=(M+C)/2;if(t.arc(o,a,u,M,e),t.arc(o,a,u,e,C),x>0){const e=Ls(_,C,o,a);t.arc(e.x,e.y,x,C,b+ue)}const n=Ls(A,b,o,a);if(t.lineTo(n.x,n.y),w>0){const e=Ls(A,D,o,a);t.arc(e.x,e.y,w,b+ue,D+Math.PI)}const i=(b-w/d+(m+v/d))/2;if(t.arc(o,a,d,b-w/d,i,!0),t.arc(o,a,d,i,m+v/d,!0),v>0){const e=Ls(S,P,o,a);t.arc(e.x,e.y,v,P+Math.PI,m-ue)}const r=Ls(k,m,o,a);if(t.lineTo(r.x,r.y),y>0){const e=Ls(k,M,o,a);t.arc(e.x,e.y,y,m-ue,M)}}else{t.moveTo(o,a);const e=Math.cos(M)*u+o,n=Math.sin(M)*u+a;t.lineTo(e,n);const i=Math.cos(C)*u+o,r=Math.sin(C)*u+a;t.lineTo(i,r)}t.closePath()}function Bs(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;t.setLineDash(u||[]),t.lineDashOffset=d,p?(t.lineWidth=2*c,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let g=e.endAngle;if(s){Rs(t,e,n,i,g,r);for(let e=0;e<s;++e)t.stroke();isNaN(a)||(g=o+(a%ae||ae))}p&&function(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+ue,i-ue),t.closePath(),t.clip()}(t,e,g),l.selfJoin&&g-o>=oe&&0===f&&"miter"!==h&&function(t,e,n){const{startAngle:i,x:r,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:h}=l,u=Math.min(c/o,Se(i-n));if(t.beginPath(),t.arc(r,s,o-c/2,i+u/2,n-u/2),a>0){const e=Math.min(c/a,Se(i-n));t.arc(r,s,a+c/2,n-e/2,i+e/2,!0)}else{const e=Math.min(c/2,o*Se(i-n));if("round"===h)t.arc(r,s,e,n-oe/2,i+oe/2,!0);else if("bevel"===h){const o=2*e*e,a=-o*Math.cos(n+oe/2)+r,l=-o*Math.sin(n+oe/2)+s,c=o*Math.cos(i+oe/2)+r,h=o*Math.sin(i+oe/2)+s;t.lineTo(a,l),t.lineTo(c,h)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,g),s||(Rs(t,e,n,i,g,r),t.stroke())}function Is(t,e,n=e){t.lineCap=Wt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Wt(n.borderDash,e.borderDash)),t.lineDashOffset=Wt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Wt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Wt(n.borderWidth,e.borderWidth),t.strokeStyle=Wt(n.borderColor,e.borderColor)}function js(t,e,n){t.lineTo(n.x,n.y)}function Fs(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function zs(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Fs(r,n,i),h=function(t){return t.stepped?bn:t.tension||"monotone"===t.cubicInterpolationMode?yn:js}(s);let u,d,f,{move:p=!0,reverse:g}=i||{};for(u=0;u<=c;++u)d=r[(a+(g?c-u:u))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):h(t,f,d,g,s.stepped),f=d);return l&&(d=r[(a+(g?c:0))%o],h(t,f,d,g,s.stepped)),!!l}function Ns(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=Fs(r,n,i),{move:l=!0,reverse:c}=i||{};let h,u,d,f,p,g,m=0,b=0;const y=t=>(o+(c?a-t:t))%s,x=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(u=r[y(0)],t.moveTo(u.x,u.y)),h=0;h<=a;++h){if(u=r[y(h)],u.skip)continue;const e=u.x,n=u.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(b*m+e)/++b):(x(),t.lineTo(e,n),d=i,b=0,f=p=n),g=n}x()}function $s(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?Ns:zs}const Vs="function"==typeof Path2D;function Ws(t,e,n,i){Vs&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Is(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:s}=e,o=$s(e);for(const a of r)Is(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}class Hs extends Wr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;ti(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=function(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}(n,r,s,i);return _i(t,!0===i?[{start:o,end:a,loop:s}]:function(t,e,n,i){const r=t.length,s=[];let o,a=e,l=t[e];for(o=e+1;o<=n;++o){const n=t[o%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:e%r,end:(o-1)%r,loop:i}),e=a=n.stop?o:null):(a=o,l.skip&&(e=o)),l=n}return null!==a&&s.push({start:e%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!t._fullLoop&&0===o&&a===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,s=ki(this,{property:e,start:i,end:i});if(!s.length)return;const o=[],a=function(t){return t.stepped?pi:t.tension||"monotone"===t.cubicInterpolationMode?gi:fi}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:h}=s[l],u=r[c],d=r[h];if(u===d){o.push(u);continue}const f=a(u,d,Math.abs((i-u[e])/(d[e]-u[e])),n.stepped);f[e]=t[e],o.push(f)}return 1===o.length?o[0]:o}pathSegment(t,e,n){return $s(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=$s(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const o of i)s&=r(t,this,o,{start:e,end:e+n-1});return!!s}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),Ws(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Ks(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}function qs(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,u;return t.horizontal?(u=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-u,h=i+u):(u=s/2,a=n-u,l=n+u,c=Math.min(i,r),h=Math.max(i,r)),{left:a,top:c,right:l,bottom:h}}function Us(t,e,n,i){return t?0:Pe(e,n,i)}function Ys(t){const e=qs(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=Pn(i);return{t:Us(r.top,s.top,0,n),r:Us(r.right,s.right,0,e),b:Us(r.bottom,s.bottom,0,n),l:Us(r.left,s.left,0,e)}}(t,n/2,i/2),s=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=Dn(r),o=Math.min(e,n),a=t.borderSkipped,l=i||Nt(r);return{topLeft:Us(!l||a.top||a.left,s.topLeft,0,o),topRight:Us(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Us(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Us(!l||a.bottom||a.right,s.bottomRight,0,o)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Xs(t,e,n,i){const r=null===e,s=null===n,o=t&&!(r&&s)&&qs(t,i);return o&&(r||De(e,o.left,o.right))&&(s||De(n,o.top,o.bottom))}function Gs(t,e){t.rect(e.x,e.y,e.w,e.h)}function Js(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}var Qs=Object.freeze({__proto__:null,ArcElement:class extends Wr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=_e(i,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,d=Wt(h,a-o),f=Ae(r,o,a)&&o!==a,p=d>=ae||f,g=De(s,l+u,c+u);return p&&g}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,c=(i+r)/2,h=(s+o+l+a)/2;return{x:e+Math.cos(c)*h,y:n+Math.sin(c)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ae?Math.floor(n/ae):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(oe,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Rs(t,e,n,i,l,r);for(let e=0;e<s;++e)t.fill();isNaN(a)||(l=o+(a%ae||ae))}Rs(t,e,n,i,l,r),t.fill()}(t,this,a,r,s),Bs(t,this,a,r,s),t.restore()}},BarElement:class extends Wr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=Ys(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?kn:Gs;var a;t.save(),s.w===r.w&&s.h===r.h||(t.beginPath(),o(t,Js(s,e,r)),t.clip(),o(t,Js(r,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,Js(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Xs(this,t,e,n)}inXRange(t,e){return Xs(this,t,null,e)}inYRange(t,e){return Xs(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:Hs,PointElement:class extends Wr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return Ks(this,t,"x",e)}inYRange(t,e){return Ks(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!pn(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,dn(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const Zs=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],to=Zs.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function eo(t){return Zs[t%Zs.length]}function no(t){return to[t%to.length]}function io(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof tr?e=function(t,e){return t.backgroundColor=t.data.map(()=>eo(e++)),e}(n,e):r instanceof er?e=function(t,e){return t.backgroundColor=t.data.map(()=>no(e++)),e}(n,e):r&&(e=function(t,e){return t.borderColor=eo(e),t.backgroundColor=no(e),++e}(n,e))}}function ro(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var so={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:s}=r,o=ro(i)||(a=r)&&(a.borderColor||a.backgroundColor)||s&&ro(s)||"rgba(0,0,0,0.1)"!==an.borderColor||"rgba(0,0,0,0.1)"!==an.backgroundColor;var a;if(!n.forceOverride&&o)return;const l=io(t);i.forEach(l)}};function oo(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function ao(t){t.data.datasets.forEach(t=>{oo(t)})}var lo={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void ao(t);const i=t.width;t.data.datasets.forEach((e,r)=>{const{_data:s,indexAxis:o}=e,a=t.getDatasetMeta(r),l=s||e.data;if("y"===Tn([o,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=t.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:h,count:u}=function(t,e){const n=e.length;let i,r=0;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Pe(Ee(e,s.axis,o).lo,0,n-1)),i=c?Pe(Ee(e,s.axis,a).hi+1,r,n)-r:n-r,{start:r,count:i}}(a,l);if(u<=(n.threshold||4*i))return void oo(e);let d;switch(Ft(s)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":d=function(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let h,u,d,f,p,g=e;for(o[l++]=t[g],h=0;h<s-2;h++){let i,r=0,s=0;const c=Math.floor((h+1)*a)+1+e,m=Math.min(Math.floor((h+2)*a)+1,n)+e,b=m-c;for(i=c;i<m;i++)r+=t[i].x,s+=t[i].y;r/=b,s/=b;const y=Math.floor(h*a)+1+e,x=Math.min(Math.floor((h+1)*a)+1,n)+e,{x:v,y:w}=t[g];for(d=f=-1,i=y;i<x;i++)f=.5*Math.abs((v-r)*(t[i].y-w)-(v-t[i].x)*(s-w)),f>d&&(d=f,u=t[i],p=i);o[l++]=u,g=p}return o[l++]=t[c],o}(l,h,u,i,n);break;case"min-max":d=function(t,e,n,i){let r,s,o,a,l,c,h,u,d,f,p=0,g=0;const m=[],b=e+n-1,y=t[e].x,x=t[b].x-y;for(r=e;r<e+n;++r){s=t[r],o=(s.x-y)/x*i,a=s.y;const e=0|o;if(e===l)a<d?(d=a,c=r):a>f&&(f=a,h=r),p=(g*p+s.x)/++g;else{const n=r-1;if(!Ft(c)&&!Ft(h)){const e=Math.min(c,h),i=Math.max(c,h);e!==u&&e!==n&&m.push({...t[e],x:p}),i!==u&&i!==n&&m.push({...t[i],x:p})}r>0&&n!==u&&m.push(t[n]),m.push(s),l=e,g=0,d=f=a,c=h=u=r}}return m}(l,h,u,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=d})},destroy(t){ao(t)}};function co(t,e,n,i){if(i)return;let r=e[t],s=n[t];return"angle"===t&&(r=Se(r),s=Se(s)),{property:t,start:r,end:s}}function ho(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function uo(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function fo(t,e){let n=[],i=!1;return zt(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:t,end:e})=>{e=ho(t,e,r);const o=r[t],a=r[e];null!==i?(s.push({x:o.x,y:i}),s.push({x:a.x,y:i})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:a.y}))}),s}(t,e),n.length?new Hs({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function po(t){return t&&!1!==t.fill}function go(t,e,n){let i=t[e].fill;const r=[e];let s;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!$t(i))return i;if(s=t[i],!s)return!1;if(s.visible)return i;r.push(i),i=s.fill}return!1}function mo(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=Wt(n&&n.target,n);void 0===i&&(i=!!e.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(t);if(Nt(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return $t(r)&&Math.floor(r)===r?function(t,e,n,i){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=i)return!1;return n}(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function bo(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=yo(s,e,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(t.push(l),!a)break}t.push(...i)}function yo(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let t=0;t<s.length;t++){const e=s[t],i=o[e.start][n],c=o[e.end][n];if(De(r,i,c)){a=r===i,l=r===c;break}}return{first:a,last:l,point:i}}class xo{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:s}=this;return e=e||{start:0,end:ae},t.arc(i,r,s,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function vo(t){const{chart:e,fill:n,line:i}=t;if($t(n))return function(t,e){const n=t.getDatasetMeta(e),i=n&&t.isDatasetVisible(e);return i?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const r=i[t];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}(e,n);a.push(fo({x:null,y:e.bottom},i));for(let t=0;t<s.length;t++){const e=s[t];for(let t=e.start;t<=e.end;t++)bo(r,o[t],a)}return new Hs({points:r,options:{}})}(t);if("shape"===n)return!0;const r=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Nt(t)?t.value:e.getBaseValue(),i}(n,e,s),a=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,s);return new xo({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(o)})}for(let t=0;t<r;++t)a.push(e.getPointPositionForValue(t,o));return a}(t);return function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Nt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if($t(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return r instanceof xo?r:fo(r,i)}function wo(t,e,n){const i=vo(e),{chart:r,index:s,line:o,scale:a,axis:l}=e,c=o.options,h=c.fill,u=c.backgroundColor,{above:d=u,below:f=u}=h||{},p=r.getDatasetMeta(s),g=Ai(r,p);i&&o.points.length&&(gn(t,n),function(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let h=s;s!==r&&("x"===c?(ko(t,i,o.top),Mo(t,{line:n,target:i,color:r,scale:a,property:c,clip:l}),t.restore(),t.save(),ko(t,i,o.bottom)):"y"===c&&(_o(t,i,o.left),Mo(t,{line:n,target:i,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),_o(t,i,o.right),h=r));Mo(t,{line:n,target:i,color:h,scale:a,property:c,clip:l}),t.restore()}(t,{line:o,target:i,above:d,below:f,area:n,scale:a,axis:l,clip:g}),mn(t))}function ko(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:i,end:l}=a,c=r[i],h=r[ho(i,l,r)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function _o(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:i,end:l}=a,c=r[i],h=r[ho(i,l,r)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(n,c.y),t.lineTo(c.x,c.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Mo(t,e){const{line:n,target:i,property:r,color:s,scale:o,clip:a}=e,l=function(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const t of i){let{start:i,end:a}=t;a=ho(i,a,r);const l=co(n,r[i],r[a],t.loop);if(!e.segments){o.push({source:t,target:l,start:r[i],end:r[a]});continue}const c=ki(e,l);for(const e of c){const i=co(n,s[e.start],s[e.end],e.loop),a=wi(t,r,i);for(const t of a)o.push({source:t,target:e,start:{[n]:uo(l,i,"start",Math.max)},end:{[n]:uo(l,i,"end",Math.min)}})}}return o}(n,i,r);for(const{source:e,target:c,start:h,end:u}of l){const{style:{backgroundColor:l=s}={}}=e,d=!0!==i;t.save(),t.fillStyle=l,Co(t,o,a,d&&co(r,h,u)),t.beginPath();const f=!!n.pathSegment(t,e);let p;if(d){f?t.closePath():So(t,i,u,r);const e=!!i.pathSegment(t,c,{move:f,reverse:!0});p=f&&e,p||So(t,i,h,r)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function Co(t,e,n,i){const r=e.chart.chartArea,{property:s,start:o,end:a}=i||{};if("x"===s||"y"===s){let e,i,l,c;"x"===s?(e=o,i=r.top,l=a,c=r.bottom):(e=r.left,i=o,l=r.right,c=a),t.beginPath(),n&&(e=Math.max(e,n.left),l=Math.min(l,n.right),i=Math.max(i,n.top),c=Math.min(c,n.bottom)),t.rect(e,i,l-e,c-i),t.clip()}}function So(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var Ao={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Hs&&(l={visible:t.isDatasetVisible(o),index:o,fill:mo(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],l&&!1!==l.fill&&(l.fill=go(r,o,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;n&&(n.line.updateControlPoints(s,n.axis),i&&n.fill&&wo(t.ctx,n,s))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;po(n)&&wo(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;po(i)&&"beforeDatasetDraw"===n.drawTime&&wo(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Po=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class Do extends Wr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Kt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=En(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=Po(n,r);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,i,o,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let h=t;r.textAlign="left",r.textBaseline="middle";let u=-1,d=-c;return this.legendItems.forEach((t,f)=>{const p=n+e/2+r.measureText(t.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(h+=c,l[l.length-(f>0?0:1)]=0,d+=c,u++),a[f]={left:0,top:d,row:u,width:p,height:i},l[l.length-1]+=p+o}),h}_fitCols(t,e,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-t;let h=o,u=0,d=0,f=0,p=0;return this.legendItems.forEach((t,s)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,i,r){const s=function(t,e,n,i){let r=t.text;r&&"string"!=typeof r&&(r=r.reduce((t,e)=>t.length>e.length?t:e));return e+n.size/2+i.measureText(r).width}(i,t,e,n),o=function(t,e,n){let i=t;"string"!=typeof e.text&&(i=Oo(e,n));return i}(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}(n,e,r,t,i);s>0&&d+m+2*o>c&&(h+=u+o,l.push({width:u,height:d}),f+=u+o,p++,u=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},u=Math.max(u,g),d+=m+o}),h+=u,l.push({width:u,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,s=mi(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=ze(n,this.left+i,this.right-this.lineWidths[r]);for(const a of e)r!==a.row&&(r=a.row,o=ze(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+t+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=ze(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const a of e)a.col!==r&&(r=a.col,o=ze(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;gn(t,this),this._draw(),mn(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:s}=t,o=an.color,a=mi(t.rtl,this.left,this.width),l=En(s.font),{padding:c}=s,h=l.size,u=h/2;let d;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Po(s,h),m=this.isHorizontal(),b=this._computeTitleHeight();d=m?{x:ze(r,this.left+c,this.right-n[0]),y:this.top+c+b,line:0}:{x:this.left+c,y:ze(r,this.top+b+c,this.bottom-e[0].height),line:0},bi(this.ctx,t.textDirection);const y=g+c;this.legendItems.forEach((x,v)=>{i.strokeStyle=x.fontColor,i.fillStyle=x.fontColor;const w=i.measureText(x.text).width,k=a.textAlign(x.textAlign||(x.textAlign=s.textAlign)),_=f+u+w;let M=d.x,C=d.y;a.setWidth(this.width),m?v>0&&M+_+c>this.right&&(C=d.y+=y,d.line++,M=d.x=ze(r,this.left+c,this.right-n[d.line])):v>0&&C+y>this.bottom&&(M=d.x=M+e[d.line].width+c,d.line++,C=d.y=ze(r,this.top+b+c,this.bottom-e[d.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=Wt(n.lineWidth,1);if(i.fillStyle=Wt(n.fillStyle,o),i.lineCap=Wt(n.lineCap,"butt"),i.lineDashOffset=Wt(n.lineDashOffset,0),i.lineJoin=Wt(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Wt(n.strokeStyle,o),i.setLineDash(Wt(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=a.xPlus(t,f/2);fn(i,o,l,e+u,s.pointStyleWidth&&f)}else{const s=e+Math.max((h-p)/2,0),o=a.leftForLtr(t,f),l=Dn(n.borderRadius);i.beginPath(),Object.values(l).some(t=>0!==t)?kn(i,{x:o,y:s,w:f,h:p,radius:l}):i.rect(o,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(M),C,x),M=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(k,M+f+u,m?M+_:this.right,t.rtl),function(t,e,n){wn(i,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(M),C,x),m)d.x+=_+c;else if("string"!=typeof x.text){const t=l.lineHeight;d.y+=Oo(x,t)+c}else d.y+=y}),yi(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=En(e.font),i=On(e.padding);if(!e.display)return;const r=mi(t.rtl,this.left,this.width),s=this.ctx,o=e.position,a=n.size/2,l=i.top+a;let c,h=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,h=ze(t.align,h,this.right-u);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+ze(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=ze(o,h,h+u);s.textAlign=r.textAlign(Fe(o)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,wn(s,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=En(t.font),n=On(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(De(t,this.left,this.right)&&De(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],De(t,i.left,i.left+i.width)&&De(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,o=(r=n,null!==(i=s)&&null!==r&&i.datasetIndex===r.datasetIndex&&i.index===r.index);s&&!o&&Kt(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&Kt(e.onHover,[t,n,this],this)}else n&&Kt(e.onClick,[t,n,this],this);var i,r}}function Oo(t,e){return e*(t.text?t.text.length:0)}var Eo={id:"legend",_element:Do,start(t,e,n){const i=t.legend=new Do({ctx:t.ctx,options:n,chart:t});Cr.configure(t,i,n),Cr.addBox(t,i)},stop(t){Cr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Cr.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=On(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class To extends Wr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=zt(n.text)?n.text.length:1;this._padding=On(n.padding);const r=i*En(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:s}=this,o=s.align;let a,l,c,h=0;return this.isHorizontal()?(l=ze(o,n,r),c=e+t,a=r-n):("left"===s.position?(l=n+t,c=ze(o,i,e),h=-.5*oe):(l=r-t,c=ze(o,e,i),h=.5*oe),a=i-e),{titleX:l,titleY:c,maxWidth:a,rotation:h}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=En(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(i);wn(t,e.text,0,0,n,{color:e.color,maxWidth:o,rotation:a,textAlign:Fe(e.align),textBaseline:"middle",translation:[r,s]})}}var Lo={id:"title",_element:To,start(t,e,n){!function(t,e){const n=new To({ctx:t.ctx,options:e,chart:t});Cr.configure(t,n,e),Cr.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Cr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Cr.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ro=new WeakMap;var Bo={id:"subtitle",start(t,e,n){const i=new To({ctx:t.ctx,options:n,chart:t});Cr.configure(t,i,n),Cr.addBox(t,i),Ro.set(t,i)},stop(t){Cr.removeBox(t,Ro.get(t)),Ro.delete(t)},beforeUpdate(t,e,n){const i=Ro.get(t);Cr.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Io={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i.add(t.x),r+=t.y,++s}}if(0===s||0===i.size)return!1;return{x:[...i].reduce((t,e)=>t+e)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n,i,r,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=Me(e,i.getCenterPoint());t<a&&(a=t,r=i)}}if(r){const t=r.tooltipPosition();s=t.x,o=t.y}return{x:s,y:o}}};function jo(t,e){return e&&(zt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fo(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function zo(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function No(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=En(e.bodyFont),c=En(e.titleFont),h=En(e.footerFont),u=s.length,d=r.length,f=i.length,p=On(e.padding);let g=p.height,m=0,b=i.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),b){g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*h.lineHeight+(d-1)*e.footerSpacing);let y=0;const x=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=c.string,qt(t.title,x),n.font=l.string,qt(t.beforeBody.concat(t.afterBody),x),y=e.displayColors?o+2+e.boxPadding:0,qt(i,t=>{qt(t.before,x),qt(t.lines,x),qt(t.after,x)}),y=0,n.font=h.string,qt(t.footer,x),n.restore(),m+=p.width,{width:m,height:g}}function $o(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===t&&r+s+o>e.width||"right"===t&&r-s-o<0||void 0}(c,t,e,n)&&(c="center"),c}function Vo(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||$o(t,e,n,i),yAlign:i}}function Wo(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=Dn(o);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(h,d)+r:"right"===a&&(p+=Math.max(u,f)+r),{x:Pe(p,0,i.width-e.width),y:Pe(g,0,i.height-e.height)}}function Ho(t,e,n){const i=On(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function Ko(t){return jo([],Fo(t))}function qo(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Uo={beforeTitle:It,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:It,beforeBody:It,beforeLabel:It,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ft(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:It,afterBody:It,beforeFooter:It,footer:It,afterFooter:It};function Yo(t,e,n,i){const r=t[e].call(n,i);return void 0===r?Uo[e].call(n,i):r}class Xo extends Wr{static positioners=Io;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new Li(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Ln(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,i=Yo(n,"beforeTitle",this,t),r=Yo(n,"title",this,t),s=Yo(n,"afterTitle",this,t);let o=[];return o=jo(o,Fo(i)),o=jo(o,Fo(r)),o=jo(o,Fo(s)),o}getBeforeBody(t,e){return Ko(Yo(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return qt(t,t=>{const e={before:[],lines:[],after:[]},r=qo(n,t);jo(e.before,Fo(Yo(r,"beforeLabel",this,t))),jo(e.lines,Yo(r,"label",this,t)),jo(e.after,Fo(Yo(r,"afterLabel",this,t))),i.push(e)}),i}getAfterBody(t,e){return Ko(Yo(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=Yo(n,"beforeFooter",this,t),r=Yo(n,"footer",this,t),s=Yo(n,"afterFooter",this,t);let o=[];return o=jo(o,Fo(i)),o=jo(o,Fo(r)),o=jo(o,Fo(s)),o}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,l=[];for(o=0,a=e.length;o<a;++o)l.push(zo(this.chart,e[o]));return t.filter&&(l=l.filter((e,i,r)=>t.filter(e,i,r,n))),t.itemSort&&(l=l.sort((e,i)=>t.itemSort(e,i,n))),qt(l,e=>{const n=qo(t.callbacks,e);i.push(Yo(n,"labelColor",this,e)),r.push(Yo(n,"labelPointStyle",this,e)),s.push(Yo(n,"labelTextColor",this,e))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const t=Io[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=No(this,n),o=Object.assign({},t,e),a=Vo(this.chart,n,o),l=Wo(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:h}=Dn(o),{x:u,y:d}=t,{width:f,height:p}=e;let g,m,b,y,x,v;return"center"===r?(x=d+p/2,"left"===i?(g=u,m=g-s,y=x+s,v=x-s):(g=u+f,m=g+s,y=x-s,v=x+s),b=g):(m="left"===i?u+Math.max(a,c)+s:"right"===i?u+f-Math.max(l,h)-s:this.caretX,"top"===r?(y=d,x=y-s,g=m-s,b=m+s):(y=d+p,x=y+s,g=m+s,b=m-s),v=y),{x1:g,x2:m,x3:b,y1:y,y2:x,y3:v}}drawTitle(t,e,n){const i=this.title,r=i.length;let s,o,a;if(r){const l=mi(n.rtl,this.x,this.width);for(t.x=Ho(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",s=En(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,a=0;a<r;++a)e.fillText(i[a],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+o,a+1===r&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=r,c=En(r.bodyFont),h=Ho(this,"left",r),u=i.x(h),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=e.y+d;if(r.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(u,l)+l/2,c=f+a/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,dn(t,e,n,c),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,dn(t,e,n,c)}else{t.lineWidth=Nt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=i.leftForLtr(u,l),n=i.leftForLtr(i.xPlus(u,1),l-2),o=Dn(s.borderRadius);Object.values(o).some(t=>0!==t)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,kn(t,{x:e,y:f,w:l,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),kn(t,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,h=En(n.bodyFont);let u=h.lineHeight,d=0;const f=mi(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+u/2),t.y+=u+r},g=f.textAlign(s);let m,b,y,x,v,w,k;for(e.textAlign=s,e.textBaseline="middle",e.font=h.string,t.x=Ho(this,g,n),e.fillStyle=n.bodyColor,qt(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,x=0,w=i.length;x<w;++x){for(m=i[x],b=this.labelTextColors[x],e.fillStyle=b,qt(m.before,p),y=m.lines,o&&y.length&&(this._drawColorBox(e,t,x,f,n),u=Math.max(h.lineHeight,a)),v=0,k=y.length;v<k;++v)p(y[v]),u=h.lineHeight;qt(m.after,p)}d=0,u=h.lineHeight,qt(this.afterBody,p),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let s,o;if(r){const a=mi(n.rtl,this.x,this.width);for(t.x=Ho(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",s=En(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,o=0;o<r;++o)e.fillText(i[o],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=t,{width:l,height:c}=n,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:f}=Dn(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+h,a),"top"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+l-u,a),e.quadraticCurveTo(o+l,a,o+l,a+u),"center"===s&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(o+l,a+c-f),e.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+d,a+c),e.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(o,a+h),e.quadraticCurveTo(o,a,o+h,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=Io[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=No(this,t),o=Object.assign({},n,this._size),a=Vo(e,t,o),l=Wo(t,o,a,e);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=On(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),bi(t,e.textDirection),r.y+=s.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),yi(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map(({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}),r=!Ut(n,i),s=this._positionChanged(i,e);(r||s)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(t,r,e,n),o=this._positionChanged(s,t),a=e||!Ut(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const s=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,s=Io[r.position].call(this,t,e);return!1!==s&&(n!==s.x||i!==s.y)}}var Go={id:"tooltip",_element:Xo,positioners:Io,afterInit(t,e,n){n&&(t.tooltip=new Xo({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Uo},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Jo=Object.freeze({__proto__:null,Colors:so,Decimation:lo,Filler:Ao,Legend:Eo,SubTitle:Bo,Title:Lo,Tooltip:Go});function Qo(t,e,n,i){const r=t.indexOf(e);if(-1===r)return((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i);return r!==t.lastIndexOf(e)?n:r}function Zo(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function ta(t,e){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:h,includeBounds:u}=t,d=r||1,f=c-1,{min:p,max:g}=e,m=!Ft(s),b=!Ft(o),y=!Ft(l),x=(g-p)/(h+1);let v,w,k,_,M=be((g-p)/f/d)*d;if(M<1e-14&&!m&&!b)return[{value:p},{value:g}];_=Math.ceil(g/M)-Math.floor(p/M),_>f&&(M=be(_*M/f/d)*d),Ft(a)||(v=Math.pow(10,a),M=Math.ceil(M*v)/v),"ticks"===i?(w=Math.floor(p/M)*M,k=Math.ceil(g/M)*M):(w=p,k=g),m&&b&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((o-s)/r,M/1e3)?(_=Math.round(Math.min((o-s)/M,c)),M=(o-s)/_,w=s,k=o):y?(w=m?s:w,k=b?o:k,_=l-1,M=(k-w)/_):(_=(k-w)/M,_=me(_,Math.round(_),M/1e3)?Math.round(_):Math.ceil(_));const C=Math.max(ke(M),ke(w));v=Math.pow(10,Ft(a)?C:a),w=Math.round(w*v)/v,k=Math.round(k*v)/v;let S=0;for(m&&(u&&w!==s?(n.push({value:s}),w<s&&S++,me(Math.round((w+S*M)*v)/v,s,ea(s,x,t))&&S++):w<s&&S++);S<_;++S){const t=Math.round((w+S*M)*v)/v;if(b&&t>o)break;n.push({value:t})}return b&&u&&k!==o?n.length&&me(n[n.length-1].value,o,ea(o,x,t))?n[n.length-1].value=o:n.push({value:o}):b&&k!==o||n.push({value:k}),n}function ea(t,e,{horizontal:n,minRotation:i}){const r=ve(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class na extends Zr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ft(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=t=>i=e?i:t,o=t=>r=n?r:t;if(t){const t=ge(i),e=ge(r);t<0&&e<0?o(0):t>0&&e>0&&s(0)}if(i===r){let e=0===r?1:Math.abs(.05*r);o(r+e),t||s(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=ta({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&xe(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Qe(t,this.chart.options.locale,this.options.ticks.format)}}class ia extends na{static id="linear";static defaults={ticks:{callback:tn.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=$t(t)?t:0,this.max=$t(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=ve(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ra=t=>Math.floor(pe(t)),sa=(t,e)=>Math.pow(10,ra(t)+e);function oa(t){return 1===t/Math.pow(10,ra(t))}function aa(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function la(t,{min:e,max:n}){e=Vt(t.min,e);const i=[],r=ra(e);let s=function(t,e){let n=ra(e-t);for(;aa(t,e,n)>10;)n++;for(;aa(t,e,n)<10;)n--;return Math.min(n,ra(t))}(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let u=Math.floor((c-h)/Math.pow(10,s)),d=Vt(t.min,Math.round((l+h+u*Math.pow(10,s))*o)/o);for(;d<n;)i.push({value:d,major:oa(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(s++,u=2,o=s>=0?1:o),d=Math.round((l+h+u*Math.pow(10,s))*o)/o;const f=Vt(t.max,d);return i.push({value:f,major:oa(f),significand:u}),i}class ca extends Zr{static id="logarithmic";static defaults={ticks:{callback:tn.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=na.prototype.parse.apply(this,[t,e]);if(0!==n)return $t(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=$t(t)?Math.max(0,t):null,this.max=$t(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!$t(this._userMin)&&(this.min=t===sa(this.min,0)?sa(this.min,-1):sa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,s=t=>i=e?i:t;n===i&&(n<=0?(r(1),s(10)):(r(sa(n,-1)),s(sa(i,1)))),n<=0&&r(sa(i,-1)),i<=0&&s(sa(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=la({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&xe(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Qe(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=pe(t),this._valueRange=pe(this.max)-pe(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(pe(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ha(t){const e=t.ticks;if(e.display&&t.display){const t=On(e.backdropPadding);return Wt(e.font&&e.font.size,an.font.size)+t.height}return 0}function ua(t,e,n){return n=zt(n)?n:[n],{w:cn(t,e.string,n),h:n.length*e.lineHeight}}function da(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function fa(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?oe/s:0;for(let l=0;l<s;l++){const s=o.setContext(t.getPointLabelContext(l));r[l]=s.padding;const c=t.getPointPosition(l,t.drawingArea+r[l],a),h=En(s.font),u=ua(t.ctx,h,t._pointLabels[l]);i[l]=u;const d=Se(t.getIndexAngle(l)+a),f=Math.round(we(d));pa(n,e,d,da(f,c.x,u.w,0,180),da(f,c.y,u.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:ha(s)/2,additionalAngle:o?oe/r:0};let c;for(let s=0;s<r;s++){l.padding=n[s],l.size=e[s];const r=ga(t,s,l);i.push(r),"auto"===a&&(r.visible=ma(r,c),r.visible&&(c=r))}return i}(t,i,r)}function pa(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function ga(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(we(Se(l.angle+ue))),h=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,a.h,c),u=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),d=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,a.w,u);return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+a.w,bottom:h+a.h}}function ma(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(pn({x:n,y:i},e)||pn({x:n,y:s},e)||pn({x:r,y:i},e)||pn({x:r,y:s},e))}function ba(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Ft(a)){const n=Dn(e.borderRadius),l=On(e.backdropPadding);t.fillStyle=a;const c=i-l.left,h=r-l.top,u=s-i+l.width,d=o-r+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),kn(t,{x:c,y:h,w:u,h:d,radius:n}),t.fill()):t.fillRect(c,h,u,d)}}function ya(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,ae);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.getPointPosition(s,e),r.lineTo(n.x,n.y)}}class xa extends na{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:tn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=On(ha(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=$t(t)&&!isNaN(t)?t:0,this.max=$t(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ha(this.options))}generateTickLabels(t){na.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=Kt(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?fa(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return Se(t*(ae/(this._pointLabels.length||1))+ve(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Ft(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ft(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Ln(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-ue+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),ya(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,s=this._pointLabels.length;let o,a,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=t._pointLabelItems[r];if(!e.visible)continue;const s=i.setContext(t.getPointLabelContext(r));ba(n,s,e);const o=En(s.font),{x:a,y:l,textAlign:c}=e;wn(n,t._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),o=i.setContext(n),l=r.setContext(n);!function(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),ya(t,n,o,i),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}}),n.display){for(t.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(t.lineWidth=s,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((i,o)=>{if(0===o&&this.min>=0&&!e.reverse)return;const a=n.setContext(this.getContext(o)),l=En(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=l.string,s=t.measureText(i.label).width,t.fillStyle=a.backdropColor;const e=On(a.backdropPadding);t.fillRect(-s/2-e.left,-r-l.size/2-e.top,s+e.width,l.size+e.height)}wn(t,i.label,0,-r,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),t.restore()}drawTitle(){}}const va={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wa=Object.keys(va);function ka(t,e){return t-e}function _a(t,e){if(Ft(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return"function"==typeof i&&(o=i(o)),$t(o)||(o="string"==typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!ye(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function Ma(t,e,n,i){const r=wa.length;for(let s=wa.indexOf(t);s<r-1;++s){const t=va[wa[s]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return wa[s]}return wa[r-1]}function Ca(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=Oe(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function Sa(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}class Aa extends Zr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new sr(t.adapters.date);i.init(e),Qt(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:_a(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(t){s||isNaN(t.min)||(i=Math.min(i,t.min)),o||isNaN(t.max)||(r=Math.max(r,t.max))}s&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),i=$t(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=$t(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(i,r,this.max);return this._unit=e.unit||(n.autoSkip?Ma(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let s=wa.length-1;s>=wa.indexOf(n);s--){const n=wa[s];if(va[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return wa[n?wa.indexOf(n):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=wa.indexOf(t)+1,n=wa.length;e<n;++e)if(va[wa[e]].common)return wa[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&s.reverse(),Sa(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,n,i=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),r=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;i=Pe(i,0,s),r=Pe(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||Ma(r.minUnit,e,n,this._getLabelCapacity(e)),o=Wt(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,l=ye(a)||!0===a,c={};let h,u,d=e;if(l&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,l?"day":s),t.diff(n,e,s)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(h=d,u=0;h<n;h=+t.add(h,o,s),u++)Ca(c,h,f);return h!==n&&"ticks"!==i.bounds&&1!==u||Ca(c,h,f),Object.keys(c).sort(ka).map(t=>+t)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,r=e||n[i];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,i){const r=this.options,s=r.ticks.callback;if(s)return Kt(s,[t,e,n],this);const o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],h=l&&o[l],u=n[e],d=l&&h&&u&&u.major;return this._adapter.format(t,i||(d?h:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=ve(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Sa(this,[t],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(_a(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Be(t.sort(ka))}}function Pa(t,e,n){let i,r,s,o,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Ee(t,"pos",e)),({pos:i,time:s}=t[a]),({pos:r,time:o}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Ee(t,"time",e)),({time:i,pos:s}=t[a]),({time:r,pos:o}=t[l]));const c=r-i;return c?s+(o-s)*(e-i)/c:s}var Da=Object.freeze({__proto__:null,CategoryScale:class extends Zr{static id="category";static defaults={ticks:{callback:Zo}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ft(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Pe(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:Qo(n,t,Wt(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){return Zo.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:ia,LogarithmicScale:ca,RadialLinearScale:xa,TimeScale:Aa,TimeSeriesScale:class extends Aa{static id="timeseries";static defaults=Aa.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Pa(e,this.min),this._tableRange=Pa(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;++s)l=t[s],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)c=i[s+1],a=i[s-1],l=i[s],Math.round((c+a)/2)!==l&&r.push({time:l,pos:s/(o-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Pa(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Pa(this._table,n*this._tableRange+this._minPos,!0)}}});const Oa=[nr,Qs,Jo,Da];function Ea(t){return new Date(t).toLocaleDateString()}function Ta(t){if(t.url.startsWith("http://")||t.url.startsWith("https://")){const e=t.domain.charAt(0).toUpperCase(),n=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899"];return`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="${n[t.domain.length%n.length]}"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white" font-weight="bold">${e}</text></svg>`}switch(t.domain){case"chrome-internal":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23EA4335"/><circle cx="8" cy="8" r="3" fill="white"/></svg>';case"local-file":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F59E0B"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';case"javascript-bookmarklet":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F7DF1E"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="black" font-weight="bold">JS</text></svg>';case"data-uri":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%2310B981"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="white" font-weight="bold">D</text></svg>';case"contact-link":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%238B5CF6"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">@</text></svg>';case"other-protocol":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%236B7280"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';default:return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23E5E7EB"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="%236B7280">?</text></svg>'}}function La(t){switch(t.domain){case"chrome-internal":return"Chrome";case"local-file":return"Local File";case"javascript-bookmarklet":return"Bookmarklet";case"data-uri":return"Data URI";case"contact-link":return"Contact";case"other-protocol":return"Other";case"invalid-url":return"Invalid URL";default:return t.domain}}async function Ra(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}const Ba={DATE_DESC:{key:"date_desc",label:"Newest First",sort:(t,e)=>e.dateAdded-t.dateAdded},DATE_ASC:{key:"date_asc",label:"Oldest First",sort:(t,e)=>t.dateAdded-e.dateAdded},TITLE_ASC:{key:"title_asc",label:"Title A-Z",sort:(t,e)=>t.title.localeCompare(e.title)},TITLE_DESC:{key:"title_desc",label:"Title Z-A",sort:(t,e)=>e.title.localeCompare(t.title)},DOMAIN_ASC:{key:"domain_asc",label:"Domain A-Z",sort:(t,e)=>t.domain.localeCompare(e.domain)}};function Ia(t){let e,n;return{c(){e=p("svg"),n=p("path"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round"),x(n,"stroke-width","2"),x(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),x(e,"class","w-4 h-4"),x(e,"fill","none"),x(e,"stroke","currentColor"),x(e,"viewBox","0 0 24 24")},m(t,i){h(t,e,i),c(e,n)},d(t){t&&u(e)}}}function ja(t){let e,n;return{c(){e=p("svg"),n=p("path"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round"),x(n,"stroke-width","2"),x(n,"d","M5 13l4 4L19 7"),x(e,"class","w-4 h-4 text-green-500"),x(e,"fill","none"),x(e,"stroke","currentColor"),x(e,"viewBox","0 0 24 24")},m(t,i){h(t,e,i),c(e,n)},d(t){t&&u(e)}}}function Fa(t){let e,n,i,r,s=t[0].folderPath+"";return{c(){e=f("p"),n=g(" "),i=g(s),x(e,"class","text-xs text-gray-400 mt-1 truncate"),x(e,"title",r=t[0].folderPath)},m(t,r){h(t,e,r),c(e,n),c(e,i)},p(t,n){1&n&&s!==(s=t[0].folderPath+"")&&w(i,s),1&n&&r!==(r=t[0].folderPath)&&x(e,"title",r)},d(t){t&&u(e)}}}function za(e){let n,r,s,o,l,d,p,b,v,k,_,M,C,S,A,P,D,O,E,T,L,R,B,I,j,F,z=e[0].title+"",N=e[0].url+"",$=La(e[0])+"",V=Ea(e[0].dateAdded)+"";function W(t,e){return t[1]?ja:Ia}let H=W(e),K=H(e),q=e[0].folderPath&&Fa(e);return{c(){n=f("div"),r=f("div"),s=f("img"),l=m(),d=f("div"),p=f("h3"),b=g(z),k=m(),_=f("p"),M=g(N),S=m(),A=f("div"),P=f("span"),D=g($),O=m(),E=f("div"),T=f("button"),K.c(),L=m(),R=f("span"),B=g(V),I=m(),q&&q.c(),a(s.src,o=Ta(e[0]))||x(s,"src",o),x(s,"alt","Favicon"),x(s,"class","w-4 h-4 mt-1 flex-shrink-0"),x(p,"class","text-sm font-medium text-gray-900 truncate"),x(p,"title",v=e[0].title),x(_,"class","text-xs text-gray-500 truncate mt-1"),x(_,"title",C=e[0].url),x(P,"class","text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded"),x(T,"class","p-1 text-gray-400 hover:text-blue-600 transition-colors"),x(T,"title","Copy URL"),x(R,"class","text-xs text-gray-400"),x(E,"class","flex items-center space-x-2"),x(A,"class","flex items-center justify-between mt-2"),x(d,"class","flex-1 min-w-0"),x(r,"class","flex items-start space-x-3"),x(n,"class","bookmark-card bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 svelte-1oo2sed"),x(n,"role","button"),x(n,"tabindex","0")},m(t,i){h(t,n,i),c(n,r),c(r,s),c(r,l),c(r,d),c(d,p),c(p,b),c(d,k),c(d,_),c(_,M),c(d,S),c(d,A),c(A,P),c(P,D),c(A,O),c(A,E),c(E,T),K.m(T,null),c(E,L),c(E,R),c(R,B),c(d,I),q&&q.m(d,null),j||(F=[y(T,"click",e[2]),y(n,"click",e[3]),y(n,"keydown",e[4])],j=!0)},p(t,[e]){1&e&&!a(s.src,o=Ta(t[0]))&&x(s,"src",o),1&e&&z!==(z=t[0].title+"")&&w(b,z),1&e&&v!==(v=t[0].title)&&x(p,"title",v),1&e&&N!==(N=t[0].url+"")&&w(M,N),1&e&&C!==(C=t[0].url)&&x(_,"title",C),1&e&&$!==($=La(t[0])+"")&&w(D,$),H!==(H=W(t))&&(K.d(1),K=H(t),K&&(K.c(),K.m(T,null))),1&e&&V!==(V=Ea(t[0].dateAdded)+"")&&w(B,V),t[0].folderPath?q?q.p(t,e):(q=Fa(t),q.c(),q.m(d,null)):q&&(q.d(1),q=null)},i:t,o:t,d(t){t&&u(n),K.d(),q&&q.d(),j=!1,i(F)}}}function Na(t){chrome.tabs.create({url:t})}function $a(t,e,n){let{bookmark:i}=e;O();let r=!1;return t.$$set=t=>{"bookmark"in t&&n(0,i=t.bookmark)},[i,r,async function(t){t.stopPropagation(),await Ra(i.url)&&(n(1,r=!0),setTimeout(()=>n(1,r=!1),2e3))},()=>Na(i.url),t=>"Enter"===t.key&&Na(i.url)]}class Va extends nt{constructor(t){super(),et(this,t,$a,za,s,{bookmark:0})}}function Wa(t){let e,n,i;return{c(){e=f("input"),x(e,"type","checkbox"),e.checked=t[1],x(e,"class","mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded")},m(r,s){h(r,e,s),n||(i=y(e,"change",t[4]),n=!0)},p(t,n){2&n&&(e.checked=t[1])},d(t){t&&u(e),n=!1,i()}}}function Ha(t){let e,n,i,r,s=t[0].folderPath+"";return{c(){e=f("p"),n=g(" "),i=g(s),x(e,"class","text-xs text-gray-400 mt-1 truncate"),x(e,"title",r=t[0].folderPath)},m(t,r){h(t,e,r),c(e,n),c(e,i)},p(t,n){1&n&&s!==(s=t[0].folderPath+"")&&w(i,s),1&n&&r!==(r=t[0].folderPath)&&x(e,"title",r)},d(t){t&&u(e)}}}function Ka(t){let e,n;return{c(){e=p("svg"),n=p("path"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round"),x(n,"stroke-width","2"),x(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),x(e,"class","w-4 h-4"),x(e,"fill","none"),x(e,"stroke","currentColor"),x(e,"viewBox","0 0 24 24")},m(t,i){h(t,e,i),c(e,n)},d(t){t&&u(e)}}}function qa(t){let e,n;return{c(){e=p("svg"),n=p("path"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round"),x(n,"stroke-width","2"),x(n,"d","M5 13l4 4L19 7"),x(e,"class","w-4 h-4 text-green-500"),x(e,"fill","none"),x(e,"stroke","currentColor"),x(e,"viewBox","0 0 24 24")},m(t,i){h(t,e,i),c(e,n)},d(t){t&&u(e)}}}function Ua(e){let n,r,s,o,l,d,p,b,v,k,_,M,S,A,P,D,O,E,T,L,R,B,I,j,F,z,N,$,V,W,H,K,q=e[0].title+"",U=e[0].url+"",Y=La(e[0])+"",X=Ea(e[0].dateAdded)+"",G=e[2]&&Wa(e),J=e[0].folderPath&&Ha(e);function Q(t,e){return t[3]?qa:Ka}let Z=Q(e),tt=Z(e);return{c(){n=f("div"),r=f("div"),G&&G.c(),s=m(),o=f("img"),d=m(),p=f("div"),b=f("div"),v=f("div"),k=f("h3"),_=g(q),S=m(),A=f("div"),P=f("p"),D=f("span"),O=g(U),T=m(),L=f("span"),R=g(Y),B=m(),J&&J.c(),I=m(),j=f("div"),F=f("span"),z=g(X),N=m(),$=f("button"),tt.c(),V=m(),W=f("button"),W.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',a(o.src,l=Ta(e[0]))||x(o,"src",l),x(o,"alt","Favicon"),x(o,"class","w-4 h-4 mr-3 flex-shrink-0"),x(k,"class","text-sm font-medium text-gray-900 truncate hover:text-blue-600"),x(k,"title",M=e[0].title),x(D,"class","truncate block"),x(P,"class","text-xs text-gray-500 flex-1 min-w-0"),x(P,"title",E=e[0].url),x(L,"class","text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded whitespace-nowrap flex-shrink-0"),x(A,"class","flex items-center mt-1 space-x-2 sm:space-x-4"),x(v,"class","flex-1 min-w-0"),x(F,"class","text-xs text-gray-400 whitespace-nowrap hidden sm:block"),x($,"class","p-1 text-gray-400 hover:text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity svelte-hs6pz6"),x($,"title","Copy URL"),x(W,"class","p-1 text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity svelte-hs6pz6"),x(W,"title","Delete bookmark"),x(j,"class","flex items-center ml-2 sm:ml-4 space-x-2 flex-shrink-0"),x(b,"class","flex items-center justify-between"),x(p,"class","flex-1 min-w-0 cursor-pointer"),x(p,"role","button"),x(p,"tabindex","0"),x(r,"class","flex items-center px-4 py-3"),x(n,"class","bookmark-list-item group bg-white border-b border-gray-200 hover:bg-gray-50 transition-colors svelte-hs6pz6"),C(n,"selected",e[1])},m(t,i){h(t,n,i),c(n,r),G&&G.m(r,null),c(r,s),c(r,o),c(r,d),c(r,p),c(p,b),c(b,v),c(v,k),c(k,_),c(v,S),c(v,A),c(A,P),c(P,D),c(D,O),c(A,T),c(A,L),c(L,R),c(v,B),J&&J.m(v,null),c(b,I),c(b,j),c(j,F),c(F,z),c(j,N),c(j,$),tt.m($,null),c(j,V),c(j,W),H||(K=[y($,"click",e[7]),y(W,"click",e[6]),y(p,"click",e[5]),y(p,"keydown",e[8])],H=!0)},p(t,[e]){t[2]?G?G.p(t,e):(G=Wa(t),G.c(),G.m(r,s)):G&&(G.d(1),G=null),1&e&&!a(o.src,l=Ta(t[0]))&&x(o,"src",l),1&e&&q!==(q=t[0].title+"")&&w(_,q),1&e&&M!==(M=t[0].title)&&x(k,"title",M),1&e&&U!==(U=t[0].url+"")&&w(O,U),1&e&&E!==(E=t[0].url)&&x(P,"title",E),1&e&&Y!==(Y=La(t[0])+"")&&w(R,Y),t[0].folderPath?J?J.p(t,e):(J=Ha(t),J.c(),J.m(v,null)):J&&(J.d(1),J=null),1&e&&X!==(X=Ea(t[0].dateAdded)+"")&&w(z,X),Z!==(Z=Q(t))&&(tt.d(1),tt=Z(t),tt&&(tt.c(),tt.m($,null))),2&e&&C(n,"selected",t[1])},i:t,o:t,d(t){t&&u(n),G&&G.d(),J&&J.d(),tt.d(),H=!1,i(K)}}}function Ya(t,e,n){let{bookmark:i}=e,{isSelected:r=!1}=e,{multiSelectMode:s=!1}=e;const o=O();let a=!1;function l(){var t;s||(t=i.url,chrome.tabs.create({url:t}))}return t.$$set=t=>{"bookmark"in t&&n(0,i=t.bookmark),"isSelected"in t&&n(1,r=t.isSelected),"multiSelectMode"in t&&n(2,s=t.multiSelectMode)},[i,r,s,a,function(t){o("toggle-select",{bookmarkId:i.id,selected:t.target.checked})},l,function(t){t.stopPropagation(),o("delete",{bookmarkId:i.id})},async function(t){t.stopPropagation(),await Ra(i.url)&&(n(3,a=!0),setTimeout(()=>n(3,a=!1),2e3))},t=>"Enter"===t.key&&l()]}class Xa extends nt{constructor(t){super(),et(this,t,Ya,Ua,s,{bookmark:0,isSelected:1,multiSelectMode:2})}}
/**!
 * FlexSearch.js v0.8.212 (Bundle/Module)
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/flexsearch
 */var Ga;function Ja(t,e,n){const i=typeof n,r=typeof t;if("undefined"!==i){if("undefined"!==r){if(n){if("function"===r&&i===r)return function(e){return t(n(e))};if((e=t.constructor)===n.constructor){if(e===Array)return n.concat(t);if(e===Map){var s=new Map(n);for(var o of t)s.set(o[0],o[1]);return s}if(e===Set){for(s of(o=new Set(n),t.values()))o.add(s);return o}}}return t}return n}return"undefined"===r?e:t}function Qa(t,e){return void 0===t?e:t}function Za(){return Object.create(null)}function tl(t){return"string"==typeof t}function el(t){return"object"==typeof t}function nl(t,e){if(tl(e))t=t[e];else for(let n=0;t&&n<e.length;n++)t=t[e[n]];return t}const il=/[^\p{L}\p{N}]+/u,rl=/(\d{3})/g,sl=/(\D)(\d{3})/g,ol=/(\d{3})(\D)/g,al=/[\u0300-\u036f]/g;function ll(t={}){if(!this||this.constructor!==ll)return new ll(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}function cl(t){t.F=null,t.B.clear(),t.D.clear()}function hl(t,e,n){n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):n=t),n&&(t=n.query||t,e=n.limit||e);let i=""+(e||0);n&&(i+=(n.offset||0)+!!n.context+!!n.suggest+(!1!==n.resolve)+(n.resolution||this.resolution)+(n.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new ul);let r=this.cache.get(t+i);if(!r){const s=n&&n.cache;s&&(n.cache=!1),r=this.search(t,e,n),s&&(n.cache=s),this.cache.set(t+i,r)}return r}function ul(t){this.limit=t&&!0!==t?t:1e3,this.cache=new Map,this.h=""}(Ga=ll.prototype).assign=function(t){this.normalize=Ja(t.normalize,!0,this.normalize);let e,n=t.include,i=n||t.exclude||t.split;if(i||""===i){if("object"==typeof i&&i.constructor!==RegExp){let t="";e=!n,n||(t+="\\p{Z}"),i.letter&&(t+="\\p{L}"),i.number&&(t+="\\p{N}",e=!!n),i.symbol&&(t+="\\p{S}"),i.punctuation&&(t+="\\p{P}"),i.control&&(t+="\\p{C}"),(i=i.char)&&(t+="object"==typeof i?i.join(""):i);try{this.split=new RegExp("["+(n?"^":"")+t+"]+","u")}catch(t){this.split=/\s+/}}else this.split=i,e=!1===i||"a1a".split(i).length<2;this.numeric=Ja(t.numeric,e)}else{try{this.split=Ja(this.split,il)}catch(t){this.split=/\s+/}this.numeric=Ja(t.numeric,Ja(this.numeric,!0))}if(this.prepare=Ja(t.prepare,null,this.prepare),this.finalize=Ja(t.finalize,null,this.finalize),i=t.filter,this.filter="function"==typeof i?i:Ja(i&&new Set(i),null,this.filter),this.dedupe=Ja(t.dedupe,!0,this.dedupe),this.matcher=Ja((i=t.matcher)&&new Map(i),null,this.matcher),this.mapper=Ja((i=t.mapper)&&new Map(i),null,this.mapper),this.stemmer=Ja((i=t.stemmer)&&new Map(i),null,this.stemmer),this.replacer=Ja(t.replacer,null,this.replacer),this.minlength=Ja(t.minlength,1,this.minlength),this.maxlength=Ja(t.maxlength,1024,this.maxlength),this.rtl=Ja(t.rtl,!1,this.rtl),(this.cache=i=Ja(t.cache,!0,this.cache))&&(this.F=null,this.L="number"==typeof i?i:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const t of this.matcher.keys())this.h+=(this.h?"|":"")+t;if(this.stemmer)for(const t of this.stemmer.keys())this.A+=(this.A?"|":"")+t;return this},Ga.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&cl(this),this},Ga.addFilter=function(t){return"function"==typeof t?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&cl(this),this},Ga.addMapper=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length>1?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&cl(this),this)},Ga.addMatcher=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&cl(this),this)},Ga.addReplacer=function(t,e){return"string"==typeof t?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&cl(this),this)},Ga.encode=function(t,e){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(cl,50,this);this.normalize&&(t="function"==typeof this.normalize?this.normalize(t):al?t.normalize("NFKD").replace(al,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(sl,"$1 $2").replace(ol,"$1 $2").replace(rl,"$1 "));const n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let i,r,s=[],o=Za(),a=this.split||""===this.split?t.split(this.split):[t];for(let t,c,h=0;h<a.length;h++)if((t=c=a[h])&&!(t.length<this.minlength||t.length>this.maxlength)){if(e){if(o[t])continue;o[t]=1}else{if(i===t)continue;i=t}if(n)s.push(t);else if(!this.filter||("function"==typeof this.filter?this.filter(t):!this.filter.has(t))){if(this.cache&&t.length<=this.I)if(this.F){var l=this.D.get(t);if(l||""===l){l&&s.push(l);continue}}else this.F=setTimeout(cl,50,this);if(this.stemmer){let e;for(this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));e!==t&&t.length>2;)e=t,t=t.replace(this.K,t=>this.stemmer.get(t))}if(t&&(this.mapper||this.dedupe&&t.length>1)){l="";for(let e,n,i=0,r="";i<t.length;i++)e=t.charAt(i),e===r&&this.dedupe||((n=this.mapper&&this.mapper.get(e))||""===n?n===r&&this.dedupe||!(r=n)||(l+=n):l+=r=e);t=l}if(this.matcher&&t.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),t=t.replace(this.J,t=>this.matcher.get(t))),t&&this.replacer)for(l=0;t&&l<this.replacer.length;l+=2)t=t.replace(this.replacer[l],this.replacer[l+1]);if(this.cache&&c.length<=this.I&&(this.D.set(c,t),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),t){if(t!==c)if(e){if(o[t])continue;o[t]=1}else{if(r===t)continue;r=t}s.push(t)}}}return this.finalize&&(s=this.finalize(s)||s),this.cache&&t.length<=this.H&&(this.B.set(t,s),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),s},ul.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},ul.prototype.get=function(t){const e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e},ul.prototype.remove=function(t){for(const e of this.cache){const n=e[0];e[1].includes(t)&&this.cache.delete(n)}},ul.prototype.clear=function(){this.cache.clear(),this.h=""};const dl={normalize:!1,numeric:!1,dedupe:!1},fl={},pl=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),gl=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),ml=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],bl={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,"":2,d:3,t:3,l:4,m:5,n:5,r:6};var yl={Exact:dl,Default:fl,Normalize:fl,LatinBalance:{mapper:pl},LatinAdvanced:{mapper:pl,matcher:gl,replacer:ml},LatinExtra:{mapper:pl,replacer:ml.concat([/(?!^)[aeo]/g,""]),matcher:gl},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let n=0;n<t.length;n++){var e=t[n];let i=e.charAt(0),r=bl[i];for(let t,n=1;n<e.length&&(t=e.charAt(n),"h"===t||"w"===t||!(t=bl[t])||t===r||(i+=t,r=t,4!==i.length));n++);t[n]=i}}},CJK:{split:""},LatinExact:dl,LatinDefault:fl,LatinSimple:fl};function xl(t,e,n,i){let r=[];for(let s,o=0;o<t.index.length;o++)if(s=t.index[o],e>=s.length)e-=s.length;else{const o=(e=s[i?"splice":"slice"](e,n)).length;if(o&&(r=r.length?r.concat(e):e,n-=o,i&&(t.length-=o),!n))break;e=0}return r}function vl(t){if(!this||this.constructor!==vl)return new vl(t);this.index=t?[t]:[],this.length=t?t.length:0;const e=this;return new Proxy([],{get:(t,n)=>"length"===n?e.length:"push"===n?function(t){e.index[e.index.length-1].push(t),e.length++}:"pop"===n?function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()}:"indexOf"===n?function(t){let n=0;for(let i,r,s=0;s<e.index.length;s++){if(i=e.index[s],r=i.indexOf(t),r>=0)return n+r;n+=i.length}return-1}:"includes"===n?function(t){for(let n=0;n<e.index.length;n++)if(e.index[n].includes(t))return!0;return!1}:"slice"===n?function(t,n){return xl(e,t||0,n||e.length,!1)}:"splice"===n?function(t,n){return xl(e,t||0,n||e.length,!0)}:"constructor"===n?Array:"symbol"!=typeof n?(t=e.index[n/2**31|0])&&t[n]:void 0,set:(t,n,i)=>(t=n/2**31|0,(e.index[t]||(e.index[t]=[]))[n]=i,e.length++,!0)})}function wl(t=8){if(!this||this.constructor!==wl)return new wl(t);this.index=Za(),this.h=[],this.size=0,t>32?(this.B=Ml,this.A=BigInt(t)):(this.B=_l,this.A=t)}function kl(t=8){if(!this||this.constructor!==kl)return new kl(t);this.index=Za(),this.h=[],this.size=0,t>32?(this.B=Ml,this.A=BigInt(t)):(this.B=_l,this.A=t)}function _l(t){let e=2**this.A-1;if("number"==typeof t)return t&e;let n=0,i=this.A+1;for(let r=0;r<t.length;r++)n=(n*i^t.charCodeAt(r))&e;return 32===this.A?n+2**31:n}function Ml(t){let e=BigInt(2)**this.A-BigInt(1);var n=typeof t;if("bigint"===n)return t&e;if("number"===n)return BigInt(t)&e;n=BigInt(0);let i=this.A+BigInt(1);for(let r=0;r<t.length;r++)n=(n*i^BigInt(t.charCodeAt(r)))&e;return n}let Cl,Sl,Al,Pl,Dl;async function Ol(t){var e=(t=t.data).task;const n=t.id;let i=t.args;if("init"===e)Sl=t.options||{},(e=t.factory)?(Function("return "+e)()(self),Cl=new self.FlexSearch.Index(Sl),delete self.FlexSearch):Cl=new vc(Sl),postMessage({id:n});else{let r;"export"===e&&(i[1]?(i[0]=Sl.export,i[2]=0,i[3]=1):i=null),"import"===e?i[0]&&(t=await Sl.import.call(Cl,i[0]),Cl.import(i[0],t)):((r=i&&Cl[e].apply(Cl,i))&&r.then&&(r=await r),r&&r.await&&(r=await r.await),"search"===e&&r.result&&(r=r.result)),postMessage("search"===e?{id:n,msg:r}:{id:n})}}function El(t){Ll.call(t,"add"),Ll.call(t,"append"),Ll.call(t,"search"),Ll.call(t,"update"),Ll.call(t,"remove"),Ll.call(t,"searchCache")}function Tl(){Al=Dl=0}function Ll(t){this[t+"Async"]=function(){const e=arguments;var n=e[e.length-1];let i;if("function"==typeof n&&(i=n,delete e[e.length-1]),Al?Dl||(Dl=Date.now()-Pl>=this.priority*this.priority*3):(Al=setTimeout(Tl,0),Pl=Date.now()),Dl){const n=this;return new Promise(i=>{setTimeout(function(){i(n[t+"Async"].apply(n,e))},0)})}const r=this[t].apply(this,e);return n=r.then?r:new Promise(t=>t(r)),i&&n.then(i),n}}vl.prototype.clear=function(){this.index.length=0},vl.prototype.push=function(){},wl.prototype.get=function(t){const e=this.index[this.B(t)];return e&&e.get(t)},wl.prototype.set=function(t,e){var n=this.B(t);let i=this.index[n];i?(n=i.size,i.set(t,e),(n-=i.size)&&this.size++):(this.index[n]=i=new Map([[t,e]]),this.h.push(i),this.size++)},kl.prototype.add=function(t){var e=this.B(t);let n=this.index[e];n?(e=n.size,n.add(t),(e-=n.size)&&this.size++):(this.index[e]=n=new Set([t]),this.h.push(n),this.size++)},(Ga=wl.prototype).has=kl.prototype.has=function(t){const e=this.index[this.B(t)];return e&&e.has(t)},Ga.delete=kl.prototype.delete=function(t){const e=this.index[this.B(t)];e&&e.delete(t)&&this.size--},Ga.clear=kl.prototype.clear=function(){this.index=Za(),this.h=[],this.size=0},Ga.values=kl.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e},Ga.keys=kl.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e},Ga.entries=kl.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};let Rl=0;function Bl(t={},e){function n(n){function o(t){const e=(t=t.data||t).id,n=e&&s.h[e];n&&(n(t.msg),delete s.h[e])}if(this.worker=n,this.h=Za(),this.worker)return r?this.worker.on("message",o):this.worker.onmessage=o,t.config?new Promise(function(e){Rl>1e9&&(Rl=0),s.h[++Rl]=function(){e(s)},s.worker.postMessage({id:Rl,task:"init",factory:i,options:t})}):(this.priority=t.priority||4,this.encoder=e||null,this.worker.postMessage({task:"init",factory:i,options:t}),this)}if(!this||this.constructor!==Bl)return new Bl(t);let i="undefined"!=typeof self?self._factory:"undefined"!=typeof window?window._factory:null;i&&(i=i.toString());const r="undefined"==typeof window,s=this,o=function(t,e,n){return e?"undefined"!=typeof module?new(require("worker_threads").Worker)(__dirname+"/worker/node.js"):Promise.resolve().then(function(){return Td}).then(function(t){return new t.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Ol.toString()],{type:"text/javascript"}))):new window.Worker("string"==typeof n?n:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}(i,r,t.worker);return o.then?o.then(function(t){return n.call(s,t)}):n.call(this,o)}function Il(t){Bl.prototype[t]=function(){const e=this,n=[].slice.call(arguments);var i=n[n.length-1];let r;return"function"==typeof i&&(r=i,n.pop()),i=new Promise(function(i){"export"===t&&"function"==typeof n[0]&&(n[0]=null),Rl>1e9&&(Rl=0),e.h[++Rl]=i,e.worker.postMessage({task:t,id:Rl,args:n})}),r?(i.then(r),this):i}}function jl(t,e,n,i,r,s){if(t=t[r],i===n.length-1)e[r]=s||t;else if(t)if(t.constructor===Array)for(e=e[r]=Array(t.length),r=0;r<t.length;r++)jl(t,e,n,i,r);else e=e[r]||(e[r]=Za()),r=n[++i],jl(t,e,n,i,r)}function Fl(t,e,n,i,r,s,o,a){if(t=t[o])if(i===e.length-1){if(t.constructor===Array){if(n[i]){for(e=0;e<t.length;e++)r.add(s,t[e],!0,!0);return}t=t.join(" ")}r.add(s,t,a,!0)}else if(t.constructor===Array)for(o=0;o<t.length;o++)Fl(t,e,n,i,r,s,o,a);else o=e[++i],Fl(t,e,n,i,r,s,o,a)}function zl(t,e,n,i){if(!t.length)return t;if(1===t.length)return t=t[0],t=n||t.length>e?t.slice(n,n+e):t,i?tc.call(this,t):t;let r=[];for(let s,o,a=0;a<t.length;a++)if((s=t[a])&&(o=s.length)){if(n){if(n>=o){n-=o;continue}s=s.slice(n,n+e),o=s.length,n=0}if(o>e&&(s=s.slice(0,e),o=e),!r.length&&o>=e)return i?tc.call(this,s):s;if(r.push(s),!(e-=o))break}return r=r.length>1?[].concat.apply([],r):r[0],i?tc.call(this,r):r}function Nl(t,e,n,i){var r=i[0];if(r[0]&&r[0].query)return t[e].apply(t,r);if(!("and"!==e&&"not"!==e||t.result.length||t.await||r.suggest))return i.length>1&&(r=i[i.length-1]),(i=r.resolve)?t.await||t.result:t;let s,o,a,l,c,h=[],u=0,d=0;for(e=0;e<i.length;e++)if(r=i[e]){var f=void 0;if(r.constructor===Ul)f=r.await||r.result;else if(r.then||r.constructor===Array)f=r;else{u=r.limit||0,d=r.offset||0,a=r.suggest,o=r.resolve,s=((l=r.highlight||t.highlight)||r.enrich)&&o,f=r.queue;let n=r.async||f,i=r.index,p=r.query;if(i?t.index||(t.index=i):i=t.index,p||r.tag){const s=r.field||r.pluck;if(s&&(!p||t.query&&!l||(t.query=p,t.field=s,t.highlight=l),i=i.index.get(s)),f&&(c||t.await)){let s;c=1;const o=t.C.length,a=new Promise(function(t){s=t});(function(e,i){a.h=function(){i.index=null,i.resolve=!1;let r=n?e.searchAsync(i):e.search(i);return r.then?r.then(function(e){return t.C[o]=e=e.result||e,s(e),e}):(r=r.result||r,s(r),r)}})(i,Object.assign({},r)),t.C.push(a),h[e]=a;continue}r.resolve=!1,r.index=null,f=n?i.searchAsync(r):i.search(r),r.resolve=o,r.index=i}else if(r.and)f=$l(r,"and",i);else if(r.or)f=$l(r,"or",i);else if(r.not)f=$l(r,"not",i);else{if(!r.xor)continue;f=$l(r,"xor",i)}}f.await?(c=1,f=f.await):f.then?(c=1,f=f.then(function(t){return t.result||t})):f=f.result||f,h[e]=f}if(c&&!t.await&&(t.await=new Promise(function(e){t.return=e})),c){const e=Promise.all(h).then(function(i){for(let r=0;r<t.C.length;r++)if(t.C[r]===e){t.C[r]=function(){return n.call(t,i,u,d,s,o,a,l)};break}Yl(t)});t.C.push(e)}else{if(!t.await)return n.call(t,h,u,d,s,o,a,l);t.C.push(function(){return n.call(t,h,u,d,s,o,a,l)})}return o?t.await||t.result:t}function $l(t,e,n){const i=(t=t[e])[0]||t;return i.index||(i.index=n),n=new Ul(i),t.length>1&&(n=n[e].apply(n,t.slice(1))),n}function Vl(t,e,n,i,r,s,o){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=Gl(t,e,n,!1,this.h),n=0)),r&&(this.await=null),r?this.resolve(e,n,i,o):this}function Wl(t,e,n,i,r,s,o){if(!s&&!this.result.length)return r?this.result:this;let a;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let i=0;for(let e,n,r=0;r<t.length;r++)if((e=t[r])&&(n=e.length))i<n&&(i=n);else if(!s){i=0;break}i?(this.result=Xl(t,i,e,n,s,this.h,r),a=!0):this.result=[]}else s||(this.result=t);return r&&(this.await=null),r?this.resolve(e,n,i,o,a):this}function Hl(t,e,n,i,r,s,o){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{s=n;var a=this.h;const i=[],o=Za();let l=0;for(let e,n=0;n<t.length;n++)if(e=t[n]){l<e.length&&(l=e.length);for(let t,n=0;n<e.length;n++)if(t=e[n])for(let e,n=0;n<t.length;n++)e=t[n],o[e]=o[e]?2:1}for(let n,c=0,h=0;c<l;c++)for(let l,u=0;u<t.length;u++)if((l=t[u])&&(n=l[c]))for(let l,d=0;d<n.length;d++)if(l=n[d],1===o[l])if(s)s--;else if(r){if(i.push(l),i.length===e){t=i;break t}}else{const n=c+(u?a:0);if(i[n]||(i[n]=[]),i[n].push(l),++h===e){t=i;break t}}t=i}this.result=t,a=!0}else s||(this.result=t);return r&&(this.await=null),r?this.resolve(e,n,i,o,a):this}function Kl(t,e,n,i,r,s,o){if(!s&&!this.result.length)return r?this.result:this;if(t.length&&this.result.length){t:{s=n;var a=[];t=new Set(t.flat().flat());for(let n,i=0,o=0;i<this.result.length;i++)if(n=this.result[i])for(let l,c=0;c<n.length;c++)if(l=n[c],!t.has(l))if(s)s--;else if(r){if(a.push(l),a.length===e){t=a;break t}}else if(a[i]||(a[i]=[]),a[i].push(l),++o===e){t=a;break t}t=a}this.result=t,a=!0}return r&&(this.await=null),r?this.resolve(e,n,i,o,a):this}function ql(t,e,n,i,r){let s,o,a;"string"==typeof r?(s=r,r=""):s=r.template,o=s.indexOf("$1"),a=s.substring(o+2),o=s.substring(0,o);let l=r&&r.boundary,c=!r||!1!==r.clip,h=r&&r.merge&&a&&o&&new RegExp(a+" "+o,"g");var u=0;if("object"==typeof(r=r&&r.ellipsis)){var d=r.template;u=d.length-2,r=r.pattern}let f,p;"string"!=typeof r&&(r=!1===r?"":"..."),u&&(r=d.replace("$1",r)),d=r.length-u,"object"==typeof l&&(f=l.before,0===f&&(f=-1),p=l.after,0===p&&(p=-1),l=l.total||9e5),u=new Map;for(let L,R,B,I=0;I<e.length;I++){let j;if(i)j=e,B=i;else{var g=e[I];if(B=g.field,!B)continue;j=g.result}R=n.get(B),L=R.encoder,"string"!=typeof(g=u.get(L))&&(g=L.encode(t),u.set(L,g));for(let t=0;t<j.length;t++){var m=j[t].doc;if(!m)continue;if(!(m=nl(m,B)))continue;var b=m.trim().split(/\s+/);if(!b.length)continue;m="";var y=[];let e=[];for(var x=-1,v=-1,w=0,k=0;k<b.length;k++){var _=b[k],M=L.encode(_);let t;if((M=M.length>1?M.join(" "):M[0])&&_){for(var C=_.length,S=(L.split?_.replace(L.split,""):_).length-M.length,A="",P=0,D=0;D<g.length;D++){var O=g[D];if(O){var E=O.length;E+=S<0?0:S,P&&E<=P||(O=M.indexOf(O))>-1&&(A=(O?_.substring(0,O):"")+o+_.substring(O,O+E)+a+(O+E<C?_.substring(O+E):""),P=E,t=!0)}}A&&(l&&(x<0&&(x=m.length+(m?1:0)),v=m.length+(m?1:0)+A.length,w+=C,e.push(y.length),y.push({match:A})),m+=(m?" ":"")+A)}if(t){if(l&&w>=l)break}else m+=(m?" ":"")+(_=b[k]),l&&y.push({text:_})}if(w=e.length*(s.length-2),f||p||l&&m.length-w>l)if(k=v-x,f>0&&(k+=f),p>0&&(k+=p),k<=(w=l+w-2*d))b=f?x-(f>0?f:0):x-((w-k)/2|0),y=p?v+(p>0?p:0):b+w,c||(b>0&&" "!==m.charAt(b)&&" "!==m.charAt(b-1)&&((b=m.indexOf(" ",b))<0&&(b=0)),y<m.length&&" "!==m.charAt(y-1)&&" "!==m.charAt(y)&&((y=m.lastIndexOf(" ",y))<v?y=v:++y)),m=(b?r:"")+m.substring(b,y)+(y<m.length?r:"");else{for(v=[],x={},w={},k={},_={},M={},A=S=C=0,D=P=1;;){var T=void 0;for(let t,n=0;n<e.length;n++){if(t=e[n],A)if(S!==A){if(k[n+1])continue;if(t+=A,x[t]){C-=d,w[n+1]=1,k[n+1]=1;continue}if(t>=y.length-1){if(t>=y.length){k[n+1]=1,t>=b.length&&(w[n+1]=1);continue}C-=d}if(m=y[t].text,E=p&&M[n]){if(!(E>0)){k[n+1]=1;continue}if(m.length>E){if(k[n+1]=1,!c)continue;m=m.substring(0,E)}(E-=m.length)||(E=-1),M[n]=E}if(C+m.length+1<=l)m=" "+m,v[n]+=m;else{if(!c){k[n+1]=1;continue}(T=l-C-1)>0&&(m=" "+m.substring(0,T),v[n]+=m),k[n+1]=1}}else{if(k[n])continue;if(t-=S,x[t]){C-=d,k[n]=1,w[n]=1;continue}if(t<=0){if(t<0){k[n]=1,w[n]=1;continue}C-=d}if(m=y[t].text,E=f&&_[n]){if(!(E>0)){k[n]=1;continue}if(m.length>E){if(k[n]=1,!c)continue;m=m.substring(m.length-E)}(E-=m.length)||(E=-1),_[n]=E}if(C+m.length+1<=l)m+=" ",v[n]=m+v[n];else{if(!c){k[n]=1;continue}(T=m.length+1-(l-C))>=0&&T<m.length&&(m=m.substring(T)+" ",v[n]=m+v[n]),k[n]=1}}else{let e;if(m=y[t].match,f&&(_[n]=f),p&&(M[n]=p),n&&C++,t?!n&&d&&(C+=d):(w[n]=1,k[n]=1),t>=b.length-1||t<y.length-1&&y[t+1].match?e=1:d&&(C+=d),C-=s.length-2,n&&!(C+m.length<=l)){T=P=D=w[n]=0;break}v[n]=m,e&&(w[n+1]=1,k[n+1]=1)}C+=m.length,T=x[t]=1}if(T)S===A?A++:S++;else{if(S===A?P=0:D=0,!P&&!D)break;P?A=++S:A++}}m="";for(let t,e=0;e<v.length;e++)t=(w[e]?e?" ":"":(e&&!r?" ":"")+r)+v[e],m+=t;r&&!w[v.length]&&(m+=r)}h&&(m=m.replace(h," ")),j[t].highlight=m}if(i)break}return e}function Ul(t,e){if(!this||this.constructor!==Ul)return new Ul(t,e);let n,i,r,s,o,a,l=0;if(t&&t.index){const n=t;if(e=n.index,l=n.boost||0,i=n.query){r=n.field||n.pluck,s=n.highlight;const i=n.resolve;t=n.async||n.queue,n.resolve=!1,n.index=null,t=t?e.searchAsync(n):e.search(n),n.resolve=i,n.index=e,t=t.result||t}else t=[]}if(t&&t.then){const e=this;n=[t=t.then(function(t){e.C[0]=e.result=t.result||t,Yl(e)})],t=[],o=new Promise(function(t){a=t})}this.index=e||null,this.result=t||[],this.h=l,this.C=n||[],this.await=o||null,this.return=a||null,this.highlight=s||null,this.query=i||"",this.field=r||""}function Yl(t,e){let n=t.result;var i=t.await;t.await=null;for(let e,r=0;r<t.C.length;r++)if(e=t.C[r])if("function"==typeof e)n=e(),t.C[r]=n=n.result||n,r--;else if(e.h)n=e.h(),t.C[r]=n=n.result||n,r--;else if(e.then)return t.await=i;return i=t.return,t.C=[],t.return=null,e||i(n),n}function Xl(t,e,n,i,r,s,o){const a=t.length;let l,c,h=[];l=Za();for(let u,d,f,p,g=0;g<e;g++)for(let e=0;e<a;e++)if(f=t[e],g<f.length&&(u=f[g]))for(let t=0;t<u.length;t++){if(d=u[t],(c=l[d])?l[d]++:(c=0,l[d]=1),p=h[c]||(h[c]=[]),!o){let t=g+(e||!r?0:s||0);p=p[t]||(p[t]=[])}if(p.push(d),o&&n&&c===a-1&&p.length-i===n)return i?p.slice(i):p}if(t=h.length)if(r)h=h.length>1?Gl(h,n,i,o,s):(h=h[0])&&n&&h.length>n||i?h.slice(i,n+i):h;else{if(t<a)return[];if(h=h[t-1],n||i)if(o)(h.length>n||i)&&(h=h.slice(i,n+i));else{r=[];for(let t,e=0;e<h.length;e++)if(t=h[e])if(i&&t.length>i)i-=t.length;else if((n&&t.length>n||i)&&(t=t.slice(i,n+i),n-=t.length,i&&(i-=t.length)),r.push(t),!n)break;h=r}}return h}function Gl(t,e,n,i,r){const s=[],o=Za();let a;var l=t.length;let c;if(i){for(r=l-1;r>=0;r--)if(c=(i=t[r])&&i.length)for(l=0;l<c;l++)if(a=i[l],!o[a])if(o[a]=1,n)n--;else if(s.push(a),s.length===e)return s}else for(let h,u=l-1,d=0;u>=0;u--){h=t[u];for(let t=0;t<h.length;t++)if(c=(i=h[t])&&i.length)for(let h=0;h<c;h++)if(a=i[h],!o[a])if(o[a]=1,n)n--;else{let n=(t+(u<l-1&&r||0))/(u+1)|0;if((s[n]||(s[n]=[])).push(a),++d===e)return s}}return s}function Jl(t,e,n,i,r){const s=Za(),o=[];for(let t,n=0;n<e.length;n++){t=e[n];for(let e=0;e<t.length;e++)s[t[e]]=1}if(r){for(let e,r=0;r<t.length;r++)if(e=t[r],s[e])if(i)i--;else if(o.push(e),s[e]=0,n&&0===--n)break}else for(let n,i,r=0;r<t.result.length;r++)for(n=t.result[r],e=0;e<n.length;e++)i=n[e],s[i]&&((o[r]||(o[r]=[])).push(i),s[i]=0);return o}function Ql(t){const e=[],n=Za(),i=Za();for(let r,s,o,a,l,c,h,u=0;u<t.length;u++){r=t[u],s=r.field,o=r.result;for(let t=0;t<o.length;t++)l=o[t],"object"!=typeof l?l={id:a=l}:a=l.id,(c=n[a])?c.push(s):(l.field=n[a]=[s],e.push(l)),(h=l.highlight)&&(c=i[a],c||(i[a]=c={},l.highlight=c),c[s]=h)}return e}function Zl(t,e,n,i,r){return(t=this.tag.get(t))&&(t=t.get(e))?((e=t.length-i)>0&&((n&&e>n||i)&&(t=t.slice(i,i+n)),r&&(t=tc.call(this,t))),t):[]}function tc(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);const e=Array(t.length);for(let n,i=0;i<t.length;i++)n=t[i],e[i]={id:n,doc:this.store.get(n)};return e}function ec(t){if(!this||this.constructor!==ec)return new ec(t);const e=t.document||t.doc||t;let n,i;if(this.B=[],this.field=[],this.D=[],this.key=(n=e.key||e.id)&&ic(n,this.D)||"id",(i=t.keystore||0)&&(this.keystore=i),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?i?new kl(i):new Set:i?new wl(i):new Map,this.h=(n=e.store||null)&&n&&!0!==n&&[],this.store=n?i?new wl(i):new Map:null,this.cache=(n=t.cache||null)&&new ul(n),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=nc.call(this,t,e),this.tag=null,(n=e.tag)&&("string"==typeof n&&(n=[n]),n.length)){this.tag=new Map,this.A=[],this.F=[];for(let t,e,i=0;i<n.length;i++){if(t=n[i],e=t.field||t,!e)throw Error("The tag field from the document descriptor is undefined.");t.custom?this.A[i]=t.custom:(this.A[i]=ic(e,this.D),t.filter&&("string"==typeof this.A[i]&&(this.A[i]=new String(this.A[i])),this.A[i].G=t.filter)),this.F[i]=e,this.tag.set(e,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const e of this.index.values())e.then&&t.push(e);if(t.length){const e=this;return Promise.all(t).then(function(t){let n=0;for(const i of e.index.entries()){const r=i[0];let s=i[1];s.then&&(s=t[n],e.index.set(r,s),n++)}return e})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}function nc(t,e){const n=new Map;let i=e.index||e.field||e;tl(i)&&(i=[i]);for(let e,s,o=0;o<i.length;o++){if(e=i[o],tl(e)||(s=e,e=e.field),s=el(s)?Object.assign({},t,s):t,this.worker){var r=void 0;r=new Bl(s,r=(r=s.encoder)&&r.encode?r:new ll("string"==typeof r?yl[r]:r||{})),n.set(e,r)}this.worker||n.set(e,new vc(s,this.reg)),s.custom?this.B[o]=s.custom:(this.B[o]=ic(e,this.D),s.filter&&("string"==typeof this.B[o]&&(this.B[o]=new String(this.B[o])),this.B[o].G=s.filter)),this.field[o]=e}if(this.h){tl(t=e.store)&&(t=[t]);for(let e,n,i=0;i<t.length;i++)e=t[i],n=e.field||e,e.custom?(this.h[i]=e.custom,e.custom.O=n):(this.h[i]=ic(n,this.D),e.filter&&("string"==typeof this.h[i]&&(this.h[i]=new String(this.h[i])),this.h[i].G=e.filter))}return n}function ic(t,e){const n=t.split(":");let i=0;for(let r=0;r<n.length;r++)"]"===(t=n[r])[t.length-1]&&(t=t.substring(0,t.length-2))&&(e[i]=!0),t&&(n[i++]=t);return i<n.length&&(n.length=i),i>1?n:n[0]}function rc(t,e=0){let n=[],i=[];e&&(e=25e4/e*5e3|0);for(const r of t.entries())i.push(r),i.length===e&&(n.push(i),i=[]);return i.length&&n.push(i),n}function sc(t,e){e||(e=new Map);for(let n,i=0;i<t.length;i++)n=t[i],e.set(n[0],n[1]);return e}function oc(t,e=0){let n=[],i=[];e&&(e=25e4/e*1e3|0);for(const r of t.entries())i.push([r[0],rc(r[1])[0]||[]]),i.length===e&&(n.push(i),i=[]);return i.length&&n.push(i),n}function ac(t,e){e||(e=new Map);for(let n,i,r=0;r<t.length;r++)n=t[r],i=e.get(n[0]),e.set(n[0],sc(n[1],i));return e}function lc(t){let e=[],n=[];for(const i of t.keys())n.push(i),25e4===n.length&&(e.push(n),n=[]);return n.length&&e.push(n),e}function cc(t,e){e||(e=new Set);for(let n=0;n<t.length;n++)e.add(t[n]);return e}function hc(t,e,n,i,r,s,o=0){const a=i&&i.constructor===Array;var l=a?i.shift():i;if(!l)return this.export(t,e,r,s+1);if((l=t((e?e+".":"")+(o+1)+"."+n,JSON.stringify(l)))&&l.then){const c=this;return l.then(function(){return hc.call(c,t,e,n,a?i:null,r,s,o+1)})}return hc.call(this,t,e,n,a?i:null,r,s,o+1)}function uc(t,e){let n="";for(const i of t.entries()){t=i[0];const r=i[1];let s="";for(let t,n=0;n<r.length;n++){t=r[n]||[""];let i="";for(let n=0;n<t.length;n++)i+=(i?",":"")+("string"===e?'"'+t[n]+'"':t[n]);i="["+i+"]",s+=(s?",":"")+i}s='["'+t+'",['+s+"]]",n+=(n?",":"")+s}return n}function dc(t,e){let n=0;var i=void 0===e;if(t.constructor===Array){for(let r,s,o,a=0;a<t.length;a++)if((r=t[a])&&r.length){if(i)return 1;if(s=r.indexOf(e),s>=0){if(r.length>1)return r.splice(s,1),1;if(delete t[a],n)return 1;o=1}else{if(o)return 1;n++}}}else for(let r of t.entries())i=r[0],dc(r[1],e)?n++:t.delete(i);return n}Il("add"),Il("append"),Il("search"),Il("update"),Il("remove"),Il("clear"),Il("export"),Il("import"),Bl.prototype.searchCache=hl,El(Bl.prototype),ec.prototype.add=function(t,e,n){if(el(t)&&(t=nl(e=t,this.key)),e&&(t||0===t)){if(!n&&this.reg.has(t))return this.update(t,e);for(let s,o=0;o<this.field.length;o++){s=this.B[o];var i=this.index.get(this.field[o]);if("function"==typeof s){var r=s(e);r&&i.add(t,r,n,!0)}else(!(r=s.G)||r(e))&&(s.constructor===String?s=[""+s]:tl(s)&&(s=[s]),Fl(e,s,this.D,0,i,t,s[0],n))}if(this.tag)for(i=0;i<this.A.length;i++){var s=this.A[i];r=this.tag.get(this.F[i]);let a=Za();if("function"==typeof s){if(!(s=s(e)))continue}else{var o=s.G;if(o&&!o(e))continue;s.constructor===String&&(s=""+s),s=nl(e,s)}if(r&&s){tl(s)&&(s=[s]);for(let e,i,l=0;l<s.length;l++)if(e=s[l],!a[e]&&(a[e]=1,(o=r.get(e))?i=o:r.set(e,i=[]),!n||!i.includes(t))){if(i.length===2**31-1){if(o=new vl(i),this.fastupdate)for(let t of this.reg.values())t.includes(i)&&(t[t.indexOf(i)]=o);r.set(e,i=o)}i.push(t),this.fastupdate&&((o=this.reg.get(t))?o.push(i):this.reg.set(t,[i]))}}}if(this.store&&(!n||!this.store.has(t))){let i;if(this.h){i=Za();for(let t,r=0;r<this.h.length;r++){if(t=this.h[r],(n=t.G)&&!n(e))continue;let s;if("function"==typeof t){if(s=t(e),!s)continue;t=[t.O]}else if(tl(t)||t.constructor===String){i[t]=e[t];continue}jl(e,i,t,0,t[0],s)}}this.store.set(t,i||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this},Ul.prototype.or=function(){return Nl(this,"or",Vl,arguments)},Ul.prototype.and=function(){return Nl(this,"and",Wl,arguments)},Ul.prototype.xor=function(){return Nl(this,"xor",Hl,arguments)},Ul.prototype.not=function(){return Nl(this,"not",Kl,arguments)},(Ga=Ul.prototype).limit=function(t){if(this.await){const e=this;this.C.push(function(){return e.limit(t).result})}else if(this.result.length){const e=[];for(let n,i=0;i<this.result.length;i++)if(n=this.result[i]){if(!(n.length<=t)){e[i]=n.slice(0,t);break}if(e[i]=n,!(t-=n.length))break}this.result=e}return this},Ga.offset=function(t){if(this.await){const e=this;this.C.push(function(){return e.offset(t).result})}else if(this.result.length){const e=[];for(let n,i=0;i<this.result.length;i++)(n=this.result[i])&&(n.length<=t?t-=n.length:(e[i]=n.slice(t),t=0));this.result=e}return this},Ga.boost=function(t){if(this.await){const e=this;this.C.push(function(){return e.boost(t).result})}else this.h+=t;return this},Ga.resolve=function(t,e,n,i,r){let s=this.await?Yl(this,!0):this.result;if(s.then){const o=this;return s.then(function(){return o.resolve(t,e,n,i,r)})}return s.length&&("object"==typeof t?(i=t.highlight||this.highlight,n=!!i||t.enrich,e=t.offset,t=t.limit):(i=i||this.highlight,n=!!i||n),s=r?n?tc.call(this.index,s):s:zl.call(this.index,s,t||100,e,n)),this.finalize(s,i)},Ga.finalize=function(t,e){if(t.then){const n=this;return t.then(function(t){return n.finalize(t,e)})}e&&t.length&&this.query&&(t=ql(this.query,t,this.index.index,this.field,e));const n=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",n&&n(t),t},ec.prototype.search=function(t,e,n,i){n||(!e&&el(t)?(n=t,t=""):el(e)&&(n=e,e=0));let r=[];var s=[];let o,a,l,c,h,u,d,f,p=0,g=!0;if(n){n.constructor===Array&&(n={index:n}),t=n.query||t,o=n.pluck,a=n.merge,c=n.boost,u=o||n.field||(u=n.index)&&(u.index?null:u);var m=this.tag&&n.tag;l=n.suggest,g=!1!==n.resolve,h=n.cache,d=g&&this.store&&n.highlight;var b=!!d||g&&this.store&&n.enrich;e=n.limit||e;var y=n.offset||0;if(e||(e=g?100:0),m&&(!this.db||!i)){m.constructor!==Array&&(m=[m]);var x=[];for(let t,e=0;e<m.length;e++)if(t=m[e],t.field&&t.tag){var v=t.tag;if(v.constructor===Array)for(var w=0;w<v.length;w++)x.push(t.field,v[w]);else x.push(t.field,v)}else{v=Object.keys(t);for(let e,n,i=0;i<v.length;i++)if(e=v[i],n=t[e],n.constructor===Array)for(w=0;w<n.length;w++)x.push(e,n[w]);else x.push(e,n)}if(m=x,!t){if(s=[],x.length)for(m=0;m<x.length;m+=2){if(this.db){if(!(i=this.index.get(x[m])))continue;s.push(i=i.db.tag(x[m+1],e,y,b))}else i=Zl.call(this,x[m],x[m+1],e,y,b);r.push(g?{field:x[m],tag:x[m+1],result:i}:[i])}if(s.length){const t=this;return Promise.all(s).then(function(e){for(let t=0;t<e.length;t++)g?r[t].result=e[t]:r[t]=e[t];return g?r:new Ul(r.length>1?Xl(r,1,0,0,l,c):r[0],t)})}return g?r:new Ul(r.length>1?Xl(r,1,0,0,l,c):r[0],this)}}g||o||!(u=u||this.field)||(tl(u)?o=u:(u.constructor===Array&&1===u.length&&(u=u[0]),o=u.field||u.index)),u&&u.constructor!==Array&&(u=[u])}u||(u=this.field),x=(this.worker||this.db)&&!i&&[];for(let o,a,c,_=0;_<u.length;_++){if(a=u[_],this.db&&this.tag&&!this.B[_])continue;let M;if(tl(a)||(M=a,a=M.field,t=M.query||t,e=Qa(M.limit,e),y=Qa(M.offset,y),l=Qa(M.suggest,l),d=g&&this.store&&Qa(M.highlight,d),b=!!d||g&&this.store&&Qa(M.enrich,b),h=Qa(M.cache,h)),i)o=i[_];else{w=(v=M||n||{}).enrich;var k=this.index.get(a);if(m&&(this.db&&(v.tag=m,v.field=u,f=k.db.support_tag_search),!f&&w&&(v.enrich=!1),f||(v.limit=0,v.offset=0)),o=h?k.searchCache(t,m&&!f?0:e,v):k.search(t,m&&!f?0:e,v),m&&!f&&(v.limit=e,v.offset=y),w&&(v.enrich=w),x){x[_]=o;continue}}if(c=(o=o.result||o)&&o.length,m&&c){if(v=[],w=0,this.db&&i){if(!f)for(k=u.length;k<i.length;k++){let t=i[k];if(t&&t.length)w++,v.push(t);else if(!l)return g?r:new Ul(r,this)}}else for(let t,e,n=0;n<m.length;n+=2){if(t=this.tag.get(m[n]),!t){if(l)continue;return g?r:new Ul(r,this)}if(e=(t=t&&t.get(m[n+1]))&&t.length)w++,v.push(t);else if(!l)return g?r:new Ul(r,this)}if(w){if(o=Jl(o,v,e,y,g),c=o.length,!c&&!l)return g?o:new Ul(o,this);w--}}if(c)s[p]=a,r.push(o),p++;else if(1===u.length)return g?r:new Ul(r,this)}if(x){if(this.db&&m&&m.length&&!f)for(b=0;b<m.length;b+=2){if(!(s=this.index.get(m[b]))){if(l)continue;return g?r:new Ul(r,this)}x.push(s.db.tag(m[b+1],e,y,!1))}const i=this;return Promise.all(x).then(function(r){return n&&(n.resolve=g),r.length&&(r=i.search(t,e,n,r)),r})}if(!p)return g?r:new Ul(r,this);if(o&&(!b||!this.store))return r=r[0],g?r:new Ul(r,this);for(x=[],y=0;y<s.length;y++){if(m=r[y],b&&m.length&&void 0===m[0].doc&&(this.db?x.push(m=this.index.get(this.field[0]).db.enrich(m)):m=tc.call(this,m)),o)return g?d?ql(t,m,this.index,o,d):m:new Ul(m,this);r[y]={field:s[y],result:m}}if(b&&this.db&&x.length){const e=this;return Promise.all(x).then(function(n){for(let t=0;t<n.length;t++)r[t].result=n[t];return d&&(r=ql(t,r,e.index,o,d)),a?Ql(r):r})}return d&&(r=ql(t,r,this.index,o,d)),a?Ql(r):r},(Ga=ec.prototype).mount=function(t){let e=this.field;if(this.tag)for(let t,i=0;i<this.F.length;i++){t=this.F[i];var n=void 0;this.index.set(t,n=new vc({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(t),n.tag=this.tag.get(t)}n=[];const i={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let r,s,o=0;o<e.length;o++){i.field=s=e[o],r=this.index.get(s);const a=new t.constructor(t.id,i);a.id=t.id,n[o]=a.mount(r),r.document=!0,o?r.bypass=!0:r.store=this.store}const r=this;return this.db=Promise.all(n).then(function(){r.db=!0})},Ga.commit=async function(){const t=[];for(const e of this.index.values())t.push(e.commit());await Promise.all(t),this.reg.clear()},Ga.destroy=function(){const t=[];for(const e of this.index.values())t.push(e.destroy());return Promise.all(t)},Ga.append=function(t,e){return this.add(t,e,!0)},Ga.update=function(t,e){return this.remove(t).add(t,e)},Ga.remove=function(t){for(var e of(el(t)&&(t=nl(t,this.key)),this.index.values()))e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let i of n){e=i[0];const r=i[1],s=r.indexOf(t);s>-1&&(r.length>1?r.splice(s,1):n.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this},Ga.clear=function(){const t=[];for(const e of this.index.values()){const n=e.clear();n.then&&t.push(n)}if(this.tag)for(const t of this.tag.values())t.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this},Ga.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)},Ga.cleanup=function(){for(const t of this.index.values())t.cleanup();return this},Ga.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(t){return t[0]&&t[0].doc||null}):this.store.get(t)||null},Ga.set=function(t,e){return"object"==typeof t&&(t=nl(e=t,this.key)),this.store.set(t,e),this},Ga.searchCache=hl,Ga.export=function(t,e,n=0,i=0){if(n<this.field.length){const r=this.field[n];if((e=this.index.get(r).export(t,r,n,i=1))&&e.then){const i=this;return e.then(function(){return i.export(t,r,n+1)})}return this.export(t,r,n+1)}let r,s;switch(i){case 0:r="reg",s=lc(this.reg),e=null;break;case 1:r="tag",s=this.tag&&oc(this.tag,this.reg.size),e=null;break;case 2:r="doc",s=this.store&&rc(this.store),e=null;break;default:return}return hc.call(this,t,e,r,s||null,n,i)},Ga.import=function(t,e){var n=t.split(".");"json"===n[n.length-1]&&n.pop();const i=n.length>2?n[0]:"";if(n=n.length>2?n[2]:n[1],this.worker&&i)return this.index.get(i).import(t);if(e){if("string"==typeof e&&(e=JSON.parse(e)),i)return this.index.get(i).import(n,e);switch(n){case"reg":this.fastupdate=!1,this.reg=cc(e,this.reg);for(let t,e=0;e<this.field.length;e++)t=this.index.get(this.field[e]),t.fastupdate=!1,t.reg=this.reg;if(this.worker){e=[];for(const n of this.index.values())e.push(n.import(t));return Promise.all(e)}break;case"tag":this.tag=ac(e,this.tag);break;case"doc":this.store=sc(e,this.store)}}},El(ec.prototype),vc.prototype.remove=function(t,e){const n=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(n){if(this.fastupdate){for(let e,i,r=0;r<n.length;r++)if((e=n[r])&&(i=e.length))if(e[i-1]===t)e.pop();else{const n=e.indexOf(t);n>=0&&e.splice(n,1)}}else dc(this.map,t),this.depth&&dc(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&wc(this)),this.cache&&this.cache.remove(t),this};const fc={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};function pc(t,e,n,i,r,s,o){let a,l;if(!(a=e[n])||o&&!a[o]){if(o?((e=a||(e[n]=Za()))[o]=1,l=t.ctx,(a=l.get(o))?l=a:l.set(o,l=t.keystore?new wl(t.keystore):new Map)):(l=t.map,e[n]=1),(a=l.get(n))?l=a:l.set(n,l=a=[]),s)for(let n,s=0;s<a.length;s++)if((n=a[s])&&n.includes(r)){if(s<=i)return;n.splice(n.indexOf(r),1),t.fastupdate&&(e=t.reg.get(r))&&e.splice(e.indexOf(n),1);break}if(l=l[i]||(l[i]=[]),l.push(r),l.length===2**31-1){if(e=new vl(l),t.fastupdate)for(let n of t.reg.values())n.includes(l)&&(n[n.indexOf(l)]=e);a[i]=l=e}t.fastupdate&&((i=t.reg.get(r))?i.push(l):t.reg.set(r,[l]))}}function gc(t,e,n,i,r){return n&&t>1?e+(i||0)<=t?n+(r||0):(t-1)/(e+(i||0))*(n+(r||0))+1|0:0}function mc(t,e,n,i,r,s,o){let a=t.length,l=t;if(a>1)l=Xl(t,e,n,i,r,s,o);else if(1===a)return o?zl.call(null,t[0],n,i):new Ul(t[0],this);return o?l:new Ul(l,this)}function bc(t,e,n,i,r,s,o){return t=xc(this,t,e,n,i,r,s,o),this.db?t.then(function(t){return r?t||[]:new Ul(t,this)}):t&&t.length?r?zl.call(this,t,n,i):new Ul(t,this):r?[]:new Ul([],this)}function yc(t,e,n,i){let r=[];if(t&&t.length){if(t.length<=i)return void e.push(t);for(let e,n=0;n<i;n++)(e=t[n])&&(r[n]=e);if(r.length)return void e.push(r)}if(!n)return r}function xc(t,e,n,i,r,s,o,a){let l;return n&&(l=t.bidirectional&&e>n)&&(l=n,n=e,e=l),t.db?t.db.get(e,n,i,r,s,o,a):t=n?(t=t.ctx.get(n))&&t.get(e):t.map.get(e)}function vc(t,e){if(!this||this.constructor!==vc)return new vc(t);if(t){var n=tl(t)?t:t.preset;n&&(t=Object.assign({},fc[n],t))}else t={};const i=!0===(n=t.context)?{depth:1}:n||{},r=tl(t.encoder)?yl[t.encoder]:t.encode||t.encoder||{};this.encoder=r.encode?r:"object"==typeof r?new ll(r):{encode:r},this.resolution=t.resolution||9,this.tokenize=n=(n=t.tokenize)&&"default"!==n&&"exact"!==n&&n||"strict",this.depth="strict"===n&&i.depth||0,this.bidirectional=!1!==i.bidirectional,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(n=t.keystore||0)&&(this.keystore=n),this.map=n?new wl(n):new Map,this.ctx=n?new wl(n):new Map,this.reg=e||(this.fastupdate?n?new wl(n):new Map:n?new kl(n):new Set),this.N=i.resolution||3,this.rtl=r.rtl||t.rtl||!1,this.cache=(n=t.cache||null)&&new ul(n),this.resolve=!1!==t.resolve,(n=t.db)&&(this.db=this.mount(n)),this.M=!1!==t.commit,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}function wc(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}vc.prototype.add=function(t,e,n,i){if(e&&(t||0===t)){if(!i&&!n&&this.reg.has(t))return this.update(t,e);i=this.depth;const c=(e=this.encoder.encode(e,!i)).length;if(c){const h=Za(),u=Za(),d=this.resolution;for(let f=0;f<c;f++){let p=e[this.rtl?c-1-f:f];var r=p.length;if(r&&(i||!u[p])){var s=this.score?this.score(e,p,f,null,0):gc(d,c,f),o="";switch(this.tokenize){case"tolerant":if(pc(this,u,p,s,t,n),r>2){for(let e,i,a,l,c=1;c<r-1;c++)e=p.charAt(c),i=p.charAt(c+1),a=p.substring(0,c)+i,l=p.substring(c+2),pc(this,u,o=a+e+l,s,t,n),pc(this,u,o=a+l,s,t,n);pc(this,u,p.substring(0,p.length-1),s,t,n)}break;case"full":if(r>2){for(let i,l=0;l<r;l++)for(s=r;s>l;s--){o=p.substring(l,s),i=this.rtl?r-1-l:l;var a=this.score?this.score(e,p,f,o,i):gc(d,c,f,r,i);pc(this,u,o,a,t,n)}break}case"bidirectional":case"reverse":if(r>1){for(a=r-1;a>0;a--){o=p[this.rtl?r-1-a:a]+o;var l=this.score?this.score(e,p,f,o,a):gc(d,c,f,r,a);pc(this,u,o,l,t,n)}o=""}case"forward":if(r>1){for(a=0;a<r;a++)pc(this,u,o+=p[this.rtl?r-1-a:a],s,t,n);break}default:if(pc(this,u,p,s,t,n),i&&c>1&&f<c-1)for(r=this.N,o=p,s=Math.min(i+1,this.rtl?f+1:c-f),a=1;a<s;a++){p=e[this.rtl?c-1-f-a:f+a];pc(this,h,(l=this.bidirectional&&p>o)?o:p,this.score?this.score(e,o,f,p,a-1):gc(r+(c/2>r?0:1),c,f,s-1,a-1),t,n,l?p:o)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(n?{ins:t}:{del:t}),this.M&&wc(this)),this},vc.prototype.search=function(t,e,n){if(n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):(n=t,t="")),n&&n.cache)return n.cache=!1,t=this.searchCache(t,e,n),n.cache=!0,t;let i,r,s,o,a,l,c,h,u=[],d=0;n&&(t=n.query||t,e=n.limit||e,d=n.offset||0,r=n.context,s=n.suggest,h=(o=n.resolve)&&n.enrich,l=n.boost,c=n.resolution,a=this.db&&n.tag),void 0===o&&(o=this.resolve),r=this.depth&&!1!==r;let f=this.encoder.encode(t,!r);if(i=f.length,e=e||(o?100:0),1===i)return bc.call(this,f[0],"",e,d,o,h,a);if(2===i&&r&&!s)return bc.call(this,f[1],f[0],e,d,o,h,a);let p,g=Za(),m=0;if(r&&(p=f[0],m=1),c||0===c||(c=p?this.N:this.resolution),this.db){if(this.db.search&&!1!==(n=this.db.search(this,f,e,d,s,o,h,a)))return n;const t=this;return async function(){for(let e,n;m<i;m++){if((n=f[m])&&!g[n]){if(g[n]=1,e=await xc(t,n,p,0,0,!1,!1),e=yc(e,u,s,c)){u=e;break}p&&(s&&e&&u.length||(p=n))}s&&p&&m===i-1&&!u.length&&(c=t.resolution,p="",m=-1,g=Za())}return mc(u,c,e,d,s,l,o)}()}for(let t,e;m<i;m++){if((e=f[m])&&!g[e]){if(g[e]=1,t=xc(this,e,p,0,0,!1,!1),t=yc(t,u,s,c)){u=t;break}p&&(s&&t&&u.length||(p=e))}s&&p&&m===i-1&&!u.length&&(c=this.resolution,p="",m=-1,g=Za())}return mc(u,c,e,d,s,l,o)},(Ga=vc.prototype).mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)},Ga.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},Ga.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()},Ga.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},Ga.append=function(t,e){return this.add(t,e,!0)},Ga.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)},Ga.update=function(t,e){const n=this,i=this.remove(t);return i&&i.then?i.then(()=>n.add(t,e)):this.add(t,e)},Ga.cleanup=function(){return this.fastupdate?(dc(this.map),this.depth&&dc(this.ctx),this):this},Ga.searchCache=hl,Ga.export=function(t,e,n=0,i=0){let r,s;switch(i){case 0:r="reg",s=lc(this.reg);break;case 1:r="cfg",s=null;break;case 2:r="map",s=rc(this.map,this.reg.size);break;case 3:r="ctx",s=oc(this.ctx,this.reg.size);break;default:return}return hc.call(this,t,e,r,s,n,i)},Ga.import=function(t,e){if(e)switch("string"==typeof e&&(e=JSON.parse(e)),t=t.split("."),"json"===t[t.length-1]&&t.pop(),3===t.length&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=cc(e,this.reg);break;case"map":this.map=sc(e,this.map);break;case"ctx":this.ctx=ac(e,this.ctx)}},Ga.serialize=function(t=!0){let e="",n="",i="";if(this.reg.size){let t;for(var r of this.reg.keys())t||(t=typeof r),e+=(e?",":"")+("string"===t?'"'+r+'"':r);e="index.reg=new Set(["+e+"]);",n=uc(this.map,t),n="index.map=new Map(["+n+"]);";for(const e of this.ctx.entries()){r=e[0];let n=uc(e[1],t);n="new Map(["+n+"])",n='["'+r+'",'+n+"]",i+=(i?",":"")+n}i="index.ctx=new Map(["+i+"]);"}return t?"function inject(index){"+e+n+i+"}":e+n+i},El(vc.prototype);const kc="undefined"!=typeof window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),_c=["map","ctx","tag","reg","cfg"],Mc=Za();function Cc(t,e,n){const i=t.value;let r,s=0;for(let t,o=0;o<i.length;o++){if(t=n?i:i[o]){for(let n,s,a=0;a<e.length;a++)if(s=e[a],n=t.indexOf(s),n>=0){if(r=1,!(t.length>1)){i[o]=[];break}t.splice(n,1)}s+=t.length}if(n)break}s?r&&t.update(i):t.delete(),t.continue()}function Sc(t,e){return new Promise((n,i)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,n(this.result)},t.onerror=t.onblocked=i,t=null})}Ga=function t(e,n={}){if(!this||this.constructor!==t)return new t(e,n);"object"==typeof e&&(n=e,e=e.name),e||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(e?":"+e.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}.prototype,Ga.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())},Ga.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),Mc[t.id]||(Mc[t.id]=[]),Mc[t.id].push(t.field);const e=kc.open(t.id,1);return e.onupgradeneeded=function(){const e=t.db=this.result;for(let n,i=0;i<_c.length;i++){n=_c[i];for(let i,r=0;r<Mc[t.id].length;r++)i=Mc[t.id][r],e.objectStoreNames.contains(n+("reg"!==n&&i?":"+i:""))||e.createObjectStore(n+("reg"!==n&&i?":"+i:""))}},t.db=Sc(e,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})},Ga.close=function(){this.db&&this.db.close(),this.db=null},Ga.destroy=function(){return Sc(kc.deleteDatabase(this.id))},Ga.clear=function(){const t=[];for(let e,n=0;n<_c.length;n++){e=_c[n];for(let n,i=0;i<Mc[this.id].length;i++)n=Mc[this.id][i],t.push(e+("reg"!==e&&n?":"+n:""))}const e=this.db.transaction(t,"readwrite");for(let n=0;n<t.length;n++)e.objectStore(t[n]).clear();return Sc(e)},Ga.get=function(t,e,n=0,i=0,r=!0,s=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);const o=this;return Sc(t).then(function(t){let e=[];if(!t||!t.length)return e;if(r){if(!n&&!i&&1===t.length)return t[0];for(let r,s=0;s<t.length;s++)if((r=t[s])&&r.length){if(i>=r.length){i-=r.length;continue}const t=n?i+Math.min(r.length-i,n):r.length;for(let n=i;n<t;n++)e.push(r[n]);if(i=0,e.length===n)break}return s?o.enrich(e):e}return t})},Ga.tag=function(t,e=0,n=0,i=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const r=this;return Sc(t).then(function(t){return!t||!t.length||n>=t.length?[]:e||n?(t=t.slice(n,n+e),i?r.enrich(t):t):t})},Ga.enrich=function(t){"object"!=typeof t&&(t=[t]);const e=this.db.transaction("reg","readonly").objectStore("reg"),n=[];for(let i=0;i<t.length;i++)n[i]=Sc(e.get(t[i]));return Promise.all(n).then(function(e){for(let n=0;n<e.length;n++)e[n]={id:t[n],doc:e[n]?JSON.parse(e[n]):null};return e})},Ga.has=function(t){return Sc(t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t)).then(function(t){return!!t})},Ga.search=null,Ga.info=function(){},Ga.transaction=function(t,e,n){t+="reg"!==t&&this.field?":"+this.field:"";let i=this.h[t+":"+e];if(i)return n.call(this,i);let r=this.db.transaction(t,e);this.h[t+":"+e]=i=r.objectStore(t);const s=n.call(this,i);return this.h[t+":"+e]=null,Sc(r).finally(function(){return s})},Ga.commit=async function(t){let e=t.commit_task,n=[];t.commit_task=[];for(let t,i=0;i<e.length;i++)t=e[i],t.del&&n.push(t.del);n.length&&await this.remove(n),t.reg.size&&(await this.transaction("map","readwrite",function(e){for(const n of t.map){const t=n[0],i=n[1];i.length&&(e.get(t).onsuccess=function(){let n=this.result;var r;if(n&&n.length){const t=Math.max(n.length,i.length);for(let e,s,o=0;o<t;o++)if((s=i[o])&&s.length){if((e=n[o])&&e.length)for(r=0;r<s.length;r++)e.push(s[r]);else n[o]=s;r=1}}else n=i,r=1;r&&e.put(n,t)})}}),await this.transaction("ctx","readwrite",function(e){for(const n of t.ctx){const t=n[0],i=n[1];for(const n of i){const i=n[0],r=n[1];r.length&&(e.get(t+":"+i).onsuccess=function(){let n=this.result;var s;if(n&&n.length){const t=Math.max(n.length,r.length);for(let e,i,o=0;o<t;o++)if((i=r[o])&&i.length){if((e=n[o])&&e.length)for(s=0;s<i.length;s++)e.push(i[s]);else n[o]=i;s=1}}else n=r,s=1;s&&e.put(n,t+":"+i)})}}}),t.store?await this.transaction("reg","readwrite",function(e){for(const n of t.store){const t=n[0],i=n[1];e.put("object"==typeof i?JSON.stringify(i):1,t)}}):t.bypass||await this.transaction("reg","readwrite",function(e){for(const n of t.reg.keys())e.put(1,n)}),t.tag&&await this.transaction("tag","readwrite",function(e){for(const n of t.tag){const t=n[0],i=n[1];i.length&&(e.get(t).onsuccess=function(){let n=this.result;n=n&&n.length?n.concat(i):i,e.put(n,t)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())},Ga.remove=function(t){return"object"!=typeof t&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Cc(e,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Cc(e,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Cc(e,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let n=0;n<t.length;n++)e.delete(t[n])})])};const Ac=ec;var Pc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Dc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oc={exports:{}};Oc.exports=function(){
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation.
	    Permission to use, copy, modify, and/or distribute this software for any
	    purpose with or without fee is hereby granted.
	    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	    PERFORMANCE OF THIS SOFTWARE.
	    ***************************************************************************** */
var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};function i(t,e,n){if(n||2===arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Pc,s=Object.keys,o=Array.isArray;function a(t,e){return"object"!=typeof e||s(e).forEach(function(n){t[n]=e[n]}),t}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function h(t,e){return c.call(t,e)}function u(t,e){"function"==typeof e&&(e=e(l(t))),("undefined"==typeof Reflect?s:Reflect.ownKeys)(e).forEach(function(n){f(t,n,e[n])})}var d=Object.defineProperty;function f(t,e,n,i){d(t,e,a(n&&h(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function p(t){return{from:function(e){return t.prototype=Object.create(e.prototype),f(t.prototype,"constructor",t),{extend:u.bind(null,t.prototype)}}}}var g=Object.getOwnPropertyDescriptor;function m(t,e){var n;return g(t,e)||(n=l(t))&&m(n,e)}var b=[].slice;function y(t,e,n){return b.call(t,e,n)}function x(t,e){return e(t)}function v(t){if(!t)throw new Error("Assertion Failed")}function w(t){r.setImmediate?setImmediate(t):setTimeout(t,0)}function k(t,e){return t.reduce(function(t,n,i){var r=e(n,i);return r&&(t[r[0]]=r[1]),t},{})}function _(t,e){if("string"==typeof e&&h(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],i=0,r=e.length;i<r;++i){var s=_(t,e[i]);n.push(s)}return n}var o=e.indexOf(".");if(-1!==o){var a=t[e.substr(0,o)];return null==a?void 0:_(a,e.substr(o+1))}}function M(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){v("string"!=typeof n&&"length"in n);for(var i=0,r=e.length;i<r;++i)M(t,e[i],n[i])}else{var s=e.indexOf(".");if(-1!==s){var a=e.substr(0,s),l=e.substr(s+1);if(""===l)void 0===n?o(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var c=t[a];c&&h(t,a)||(c=t[a]={}),M(c,l,n)}}else void 0===n?o(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function C(t,e){"string"==typeof e?M(t,e,void 0):"length"in e&&[].map.call(e,function(e){M(t,e,void 0)})}function S(t){var e={};for(var n in t)h(t,n)&&(e[n]=t[n]);return e}var A=[].concat;function P(t){return A.apply([],t)}var D="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(P([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return r[t]}),O=new Set(D.map(function(t){return r[t]}));function E(t){var e={};for(var n in t)if(h(t,n)){var i=t[n];e[n]=!i||"object"!=typeof i||O.has(i.constructor)?i:E(i)}return e}function T(t){for(var e in t)if(h(t,e))return!1;return!0}var L=null;function R(t){L=new WeakMap;var e=B(t);return L=null,e}function B(t){if(!t||"object"!=typeof t)return t;var e=L.get(t);if(e)return e;if(o(t)){e=[],L.set(t,e);for(var n=0,i=t.length;n<i;++n)e.push(B(t[n]))}else if(O.has(t.constructor))e=t;else{var r=l(t);for(var s in e=r===Object.prototype?{}:Object.create(r),L.set(t,e),t)h(t,s)&&(e[s]=B(t[s]))}return e}var I={}.toString;function j(t){return I.call(t).slice(8,-1)}var F="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",z="symbol"==typeof F?function(t){var e;return null!=t&&(e=t[F])&&e.apply(t)}:function(){return null};function N(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n>=0}var $={};function V(t){var e,n,i,r;if(1===arguments.length){if(o(t))return t.slice();if(this===$&&"string"==typeof t)return[t];if(r=z(t)){for(n=[];!(i=r.next()).done;)n.push(i.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var W="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},H=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],K=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(H),q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function U(t,e){this.name=t,this.message=e}function Y(t,e){return t+". Errors: "+Object.keys(e).map(function(t){return e[t].toString()}).filter(function(t,e,n){return n.indexOf(t)===e}).join("\n")}function X(t,e,n,i){this.failures=e,this.failedKeys=i,this.successCount=n,this.message=Y(t,e)}function G(t,e){this.name="BulkError",this.failures=Object.keys(e).map(function(t){return e[t]}),this.failuresByPos=e,this.message=Y(t,this.failures)}p(U).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(X).from(U),p(G).from(U);var J=K.reduce(function(t,e){return t[e]=e+"Error",t},{}),Q=U,Z=K.reduce(function(t,e){var n=e+"Error";function i(t,i){this.name=n,t?"string"==typeof t?(this.message="".concat(t).concat(i?"\n "+i:""),this.inner=i||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=q[e]||n,this.inner=null)}return p(i).from(Q),t[e]=i,t},{});Z.Syntax=SyntaxError,Z.Type=TypeError,Z.Range=RangeError;var tt=H.reduce(function(t,e){return t[e+"Error"]=Z[e],t},{});function et(t,e){if(!t||t instanceof U||t instanceof TypeError||t instanceof SyntaxError||!t.name||!tt[t.name])return t;var n=new tt[t.name](e||t.message,t);return"stack"in t&&f(n,"stack",{get:function(){return this.inner.stack}}),n}var nt=K.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=Z[e]),t},{});function it(){}function rt(t){return t}function st(t,e){return null==t||t===rt?e:function(n){return e(t(n))}}function ot(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function at(t,e){return t===it?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ot(i,this.onsuccess):i),r&&(this.onerror=this.onerror?ot(r,this.onerror):r),void 0!==s?s:n}}function lt(t,e){return t===it?e:function(){t.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ot(n,this.onsuccess):n),i&&(this.onerror=this.onerror?ot(i,this.onerror):i)}}function ct(t,e){return t===it?e:function(n){var i=t.apply(this,arguments);a(n,i);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ot(r,this.onsuccess):r),s&&(this.onerror=this.onerror?ot(s,this.onerror):s),void 0===i?void 0===o?void 0:o:a(i,o)}}function ht(t,e){return t===it?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function ut(t,e){return t===it?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var i=this,r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return n.then(function(){return e.apply(i,s)})}return e.apply(this,arguments)}}nt.ModifyError=X,nt.DexieError=U,nt.BulkError=G;var dt="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ft(t,e){dt=t}var pt={},gt=100,mt="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,l(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,l(e),t]}(),bt=mt[0],yt=mt[1],xt=mt[2],vt=yt&&yt.then,wt=bt&&bt.constructor,kt=!!xt;function _t(){queueMicrotask(Wt)}var Mt=function(t,e){Tt.push([t,e]),St&&(_t(),St=!1)},Ct=!0,St=!0,At=[],Pt=[],Dt=rt,Ot={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:it,pgp:!1,env:{},finalize:it},Et=Ot,Tt=[],Lt=0,Rt=[];function Bt(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=Et;if("function"!=typeof t){if(t!==pt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&zt(this,this._value))}this._state=null,this._value=null,++e.ref,Ft(this,t)}var It={get:function(){var t=Et,e=ne;function n(n,i){var r=this,s=!t.global&&(t!==Et||e!==ne),o=s&&!oe(),a=new Bt(function(e,a){$t(r,new jt(fe(n,t,s,o),fe(i,t,s,o),e,a,t))});return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return n.prototype=pt,n},set:function(t){f(this,"then",t&&t.prototype===pt?It:{get:function(){return t},set:It.set})}};function jt(t,e,n,i,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i,this.psd=r}function Ft(t,e){try{e(function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Ht();e&&"function"==typeof e.then?Ft(t,function(t,n){e instanceof Bt?e._then(t,n):e.then(t,n)}):(t._state=!0,t._value=e,Nt(t)),n&&Kt()}},zt.bind(null,t))}catch(e){zt(t,e)}}function zt(t,e){if(Pt.push(e),null===t._state){var n=t._lib&&Ht();e=Dt(e),t._state=!1,t._value=e,Yt(t),Nt(t),n&&Kt()}}function Nt(t){var e=t._listeners;t._listeners=[];for(var n=0,i=e.length;n<i;++n)$t(t,e[n]);var r=t._PSD;--r.ref||r.finalize(),0===Lt&&(++Lt,Mt(function(){0===--Lt&&qt()},[]))}function $t(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Lt,Mt(Vt,[n,t,e])}else t._listeners.push(e)}function Vt(t,e,n){try{var i,r=e._value;!e._state&&Pt.length&&(Pt=[]),i=dt&&e._consoleTask?e._consoleTask.run(function(){return t(r)}):t(r),e._state||-1!==Pt.indexOf(r)||Xt(e),n.resolve(i)}catch(t){n.reject(t)}finally{0===--Lt&&qt(),--n.psd.ref||n.psd.finalize()}}function Wt(){de(Ot,function(){Ht()&&Kt()})}function Ht(){var t=Ct;return Ct=!1,St=!1,t}function Kt(){var t,e,n;do{for(;Tt.length>0;)for(t=Tt,Tt=[],n=t.length,e=0;e<n;++e){var i=t[e];i[0].apply(null,i[1])}}while(Tt.length>0);Ct=!0,St=!0}function qt(){var t=At;At=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=Rt.slice(0),n=e.length;n;)e[--n]()}function Ut(t){function e(){t(),Rt.splice(Rt.indexOf(e),1)}Rt.push(e),++Lt,Mt(function(){0===--Lt&&qt()},[])}function Yt(t){At.some(function(e){return e._value===t._value})||At.push(t)}function Xt(t){for(var e=At.length;e;)if(At[--e]._value===t._value)return void At.splice(e,1)}function Gt(t){return new Bt(pt,!1,t)}function Jt(t,e){var n=Et;return function(){var i=Ht(),r=Et;try{return he(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{he(r,!1),i&&Kt()}}}u(Bt.prototype,{then:It,_then:function(t,e){$t(this,new jt(null,null,t,e,Et))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?n(t):Gt(t)}):this.then(null,function(t){return t&&t.name===e?n(t):Gt(t)})},finally:function(t){return this.then(function(e){return Bt.resolve(t()).then(function(){return e})},function(e){return Bt.resolve(t()).then(function(){return Gt(e)})})},timeout:function(t,e){var n=this;return t<1/0?new Bt(function(i,r){var s=setTimeout(function(){return r(new Z.Timeout(e))},t);n.then(i,r).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Bt.prototype,Symbol.toStringTag,"Dexie.Promise"),Ot.env=ue(),u(Bt,{all:function(){var t=V.apply(null,arguments).map(ae);return new Bt(function(e,n){0===t.length&&e([]);var i=t.length;t.forEach(function(r,s){return Bt.resolve(r).then(function(n){t[s]=n,--i||e(t)},n)})})},resolve:function(t){return t instanceof Bt?t:t&&"function"==typeof t.then?new Bt(function(e,n){t.then(e,n)}):new Bt(pt,!0,t)},reject:Gt,race:function(){var t=V.apply(null,arguments).map(ae);return new Bt(function(e,n){t.map(function(t){return Bt.resolve(t).then(e,n)})})},PSD:{get:function(){return Et},set:function(t){return Et=t}},totalEchoes:{get:function(){return ne}},newPSD:re,usePSD:de,scheduler:{get:function(){return Mt},set:function(t){Mt=t}},rejectionMapper:{get:function(){return Dt},set:function(t){Dt=t}},follow:function(t,e){return new Bt(function(n,i){return re(function(e,n){var i=Et;i.unhandleds=[],i.onunhandled=n,i.finalize=ot(function(){var t=this;Ut(function(){0===t.unhandleds.length?e():n(t.unhandleds[0])})},i.finalize),t()},e,n,i)})}}),wt&&(wt.allSettled&&f(Bt,"allSettled",function(){var t=V.apply(null,arguments).map(ae);return new Bt(function(e){0===t.length&&e([]);var n=t.length,i=new Array(n);t.forEach(function(t,r){return Bt.resolve(t).then(function(t){return i[r]={status:"fulfilled",value:t}},function(t){return i[r]={status:"rejected",reason:t}}).then(function(){return--n||e(i)})})})}),wt.any&&"undefined"!=typeof AggregateError&&f(Bt,"any",function(){var t=V.apply(null,arguments).map(ae);return new Bt(function(e,n){0===t.length&&n(new AggregateError([]));var i=t.length,r=new Array(i);t.forEach(function(t,s){return Bt.resolve(t).then(function(t){return e(t)},function(t){r[s]=t,--i||n(new AggregateError(r))})})})}),wt.withResolvers&&(Bt.withResolvers=wt.withResolvers));var Qt={awaits:0,echoes:0,id:0},Zt=0,te=[],ee=0,ne=0,ie=0;function re(t,e,n,i){var r=Et,s=Object.create(r);s.parent=r,s.ref=0,s.global=!1,s.id=++ie,Ot.env,s.env=kt?{Promise:Bt,PromiseProp:{value:Bt,configurable:!0,writable:!0},all:Bt.all,race:Bt.race,allSettled:Bt.allSettled,any:Bt.any,resolve:Bt.resolve,reject:Bt.reject}:{},e&&a(s,e),++r.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=de(s,t,n,i);return 0===s.ref&&s.finalize(),o}function se(){return Qt.id||(Qt.id=++Zt),++Qt.awaits,Qt.echoes+=gt,Qt.id}function oe(){return!!Qt.awaits&&(0===--Qt.awaits&&(Qt.id=0),Qt.echoes=Qt.awaits*gt,!0)}function ae(t){return Qt.echoes&&t&&t.constructor===wt?(se(),t.then(function(t){return oe(),t},function(t){return oe(),ge(t)})):t}function le(t){++ne,Qt.echoes&&0!==--Qt.echoes||(Qt.echoes=Qt.awaits=Qt.id=0),te.push(Et),he(t,!0)}function ce(){var t=te[te.length-1];te.pop(),he(t,!1)}function he(t,e){var n=Et;if((e?!Qt.echoes||ee++&&t===Et:!ee||--ee&&t===Et)||queueMicrotask(e?le.bind(null,t):ce),t!==Et&&(Et=t,n===Ot&&(Ot.env=ue()),kt)){var i=Ot.env.Promise,s=t.env;(n.global||t.global)&&(Object.defineProperty(r,"Promise",s.PromiseProp),i.all=s.all,i.race=s.race,i.resolve=s.resolve,i.reject=s.reject,s.allSettled&&(i.allSettled=s.allSettled),s.any&&(i.any=s.any))}}function ue(){var t=r.Promise;return kt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function de(t,e,n,i,r){var s=Et;try{return he(t,!0),e(n,i,r)}finally{he(s,!1)}}function fe(t,e,n,i){return"function"!=typeof t?t:function(){var r=Et;n&&se(),he(e,!0);try{return t.apply(this,arguments)}finally{he(r,!1),i&&queueMicrotask(oe)}}}function pe(t){Promise===wt&&0===Qt.echoes?0===ee?t():enqueueNativeMicroTask(t):setTimeout(t,0)}-1===(""+vt).indexOf("[native code]")&&(se=oe=it);var ge=Bt.reject;function me(t,e,n,i){if(t.idbdb&&(t._state.openComplete||Et.letThrough||t._vip)){var r=t._createTransaction(e,n,t._dbSchema);try{r.create(),t._state.PR1398_maxLoop=3}catch(r){return r.name===J.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return me(t,e,n,i)})):ge(r)}return r._promise(e,function(t,e){return re(function(){return Et.trans=r,i(t,e,r)})}).then(function(t){if("readwrite"===e)try{r.idbtrans.commit()}catch(t){}return"readonly"===e?t:r._completion.then(function(){return t})})}if(t._state.openComplete)return ge(new Z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return ge(new Z.DatabaseClosed);t.open().catch(it)}return t._state.dbReadyPromise.then(function(){return me(t,e,n,i)})}var be="4.2.1",ye=String.fromCharCode(65535),xe=-1/0,ve="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",we="String expected.",ke=[],_e="__dbnames",Me="readonly",Ce="readwrite";function Se(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Ae={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Pe(t){return"string"!=typeof t||/\./.test(t)?function(t){return t}:function(e){return void 0===e[t]&&t in e&&delete(e=R(e))[t],e}}function De(){throw Z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Oe(t,e){try{var n=Le(t),i=Le(e);if(n!==i)return"Array"===n?1:"Array"===i?-1:"binary"===n?1:"binary"===i?-1:"string"===n?1:"string"===i?-1:"Date"===n?1:"Date"!==i?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Te(Re(t),Re(e));case"Array":return Ee(t,e)}}catch(t){}return NaN}function Ee(t,e){for(var n=t.length,i=e.length,r=n<i?n:i,s=0;s<r;++s){var o=Oe(t[s],e[s]);if(0!==o)return o}return n===i?0:n<i?-1:1}function Te(t,e){for(var n=t.length,i=e.length,r=n<i?n:i,s=0;s<r;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===i?0:n<i?-1:1}function Le(t){var e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";var n=j(t);return"ArrayBuffer"===n?"binary":n}function Re(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Be(t,e,n){var i=t.schema.yProps;return i?(e&&n.numFailures>0&&(e=e.filter(function(t,e){return!n.failures[e]})),Promise.all(i.map(function(n){var i=n.updatesTable;return e?t.db.table(i).where("k").anyOf(e).delete():t.db.table(i).clear()})).then(function(){return n})):n}var Ie=function(){function t(t){this["@@propmod"]=t}return t.prototype.execute=function(t){var e,n=this["@@propmod"];if(void 0!==n.add){var r=n.add;if(o(r))return i(i([],o(t)?t:[],!0),r,!0).sort();if("number"==typeof r)return(Number(t)||0)+r;if("bigint"==typeof r)try{return BigInt(t)+r}catch(t){return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(void 0!==n.remove){var s=n.remove;if(o(s))return o(t)?t.filter(function(t){return!s.includes(t)}).sort():[];if("number"==typeof s)return Number(t)-s;if("bigint"==typeof s)try{return BigInt(t)-s}catch(t){return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}var a=null===(e=n.replacePrefix)||void 0===e?void 0:e[0];return a&&"string"==typeof t&&t.startsWith(a)?n.replacePrefix[1]+t.substring(a.length):t},t}();function je(t,e){for(var n=s(e),i=n.length,r=!1,o=0;o<i;++o){var a=n[o],l=e[a],c=_(t,a);l instanceof Ie?(M(t,a,l.execute(c)),r=!0):c!==l&&(M(t,a,l),r=!0)}return r}var Fe=function(){function t(){}return t.prototype._trans=function(t,e,n){var i=this._tx||Et.trans,r=this.name,s=dt&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===t?"read":"write"," ").concat(this.name));function o(t,n,i){if(!i.schema[r])throw new Z.NotFound("Table "+r+" not part of transaction");return e(i.idbtrans,i)}var a=Ht();try{var l=i&&i.db._novip===this.db._novip?i===Et.trans?i._promise(t,o,n):re(function(){return i._promise(t,o,n)},{trans:i,transless:Et.transless||Et}):me(this.db,t,[this.name],o);return s&&(l._consoleTask=s,l=l.catch(function(t){return console.trace(t),ge(t)})),l}finally{a&&Kt()}},t.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):null==t?ge(new Z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(e){return n.core.get({trans:e,key:t}).then(function(t){return n.hook.reading.fire(t)})}).then(e)},t.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(o(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var e=s(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(t){if(t.compound&&e.every(function(e){return t.keyPath.indexOf(e)>=0})){for(var n=0;n<e.length;++n)if(-1===e.indexOf(t.keyPath[n]))return!1;return!0}return!1}).sort(function(t,e){return t.keyPath.length-e.keyPath.length})[0];if(n&&this.db._maxKey!==ye){var i=n.keyPath.slice(0,e.length);return this.where(i).equals(i.map(function(e){return t[e]}))}!n&&dt&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(e.join("+"),"]"));var r=this.schema.idxByName;function a(t,e){return 0===Oe(t,e)}var l=e.reduce(function(e,n){var i=e[0],s=e[1],l=r[n],c=t[n];return[i||l,i||!l?Se(s,l&&l.multi?function(t){var e=_(t,n);return o(e)&&e.some(function(t){return a(c,t)})}:function(t){return a(c,_(t,n))}):s]},[null,null]),c=l[0],h=l[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(h):n?this.filter(h):this.where(e).equals("")},t.prototype.filter=function(t){return this.toCollection().and(t)},t.prototype.count=function(t){return this.toCollection().count(t)},t.prototype.offset=function(t){return this.toCollection().offset(t)},t.prototype.limit=function(t){return this.toCollection().limit(t)},t.prototype.each=function(t){return this.toCollection().each(t)},t.prototype.toArray=function(t){return this.toCollection().toArray(t)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,o(t)?"[".concat(t.join("+"),"]"):t))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(t){var n=this,i=n.db,r=n.name;this.schema.mappedClass=t,t.prototype instanceof De&&(t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),Object.defineProperty(n.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),n.prototype.table=function(){return r},n}(t));for(var s=new Set,o=t.prototype;o;o=l(o))Object.getOwnPropertyNames(o).forEach(function(t){return s.add(t)});var a=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var i in e)if(!s.has(i))try{n[i]=e[i]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=a,this.hook("reading",a),t},t.prototype.defineClass=function(){function t(t){a(this,t)}return this.mapToClass(t)},t.prototype.add=function(t,e){var n=this,i=this.schema.primKey,r=i.auto,s=i.keyPath,o=t;return s&&r&&(o=Pe(s)(t)),this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[o]})}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):t.lastResult}).then(function(e){if(s)try{M(t,s,e)}catch(t){}return e})},t.prototype.upsert=function(t,e){var n=this,i=this.schema.primKey.keyPath;return this._trans("readwrite",function(r){return n.core.get({trans:r,key:t}).then(function(s){var o=null!=s?s:{};return je(o,e),i&&M(o,i,t),n.core.mutate({trans:r,type:"put",values:[o],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[e]}}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):!!s})})})},t.prototype.update=function(t,e){if("object"!=typeof t||o(t))return this.where(":id").equals(t).modify(e);var n=_(t,this.schema.primKey.keyPath);return void 0===n?ge(new Z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)},t.prototype.put=function(t,e){var n=this,i=this.schema.primKey,r=i.auto,s=i.keyPath,o=t;return s&&r&&(o=Pe(s)(t)),this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"put",values:[o],keys:null!=e?[e]:null})}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):t.lastResult}).then(function(e){if(s)try{M(t,s,e)}catch(t){}return e})},t.prototype.delete=function(t){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]}).then(function(n){return Be(e,[t],n)}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):void 0})})},t.prototype.clear=function(){var t=this;return this._trans("readwrite",function(e){return t.core.mutate({trans:e,type:"deleteRange",range:Ae}).then(function(e){return Be(t,null,e)})}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):void 0})},t.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",function(n){return e.core.getMany({keys:t,trans:n}).then(function(t){return t.map(function(t){return e.hook.reading.fire(t)})})})},t.prototype.bulkAdd=function(t,e,n){var i=this,r=Array.isArray(e)?e:void 0,s=(n=n||(r?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(e){var n=i.schema.primKey,o=n.auto,a=n.keyPath;if(a&&r)throw new Z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&o?t.map(Pe(a)):t;return i.core.mutate({trans:e,type:"add",keys:r,values:c,wantResults:s}).then(function(t){var e=t.numFailures,n=t.results,r=t.lastResult,o=t.failures;if(0===e)return s?n:r;throw new G("".concat(i.name,".bulkAdd(): ").concat(e," of ").concat(l," operations failed"),o)})})},t.prototype.bulkPut=function(t,e,n){var i=this,r=Array.isArray(e)?e:void 0,s=(n=n||(r?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(e){var n=i.schema.primKey,o=n.auto,a=n.keyPath;if(a&&r)throw new Z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&o?t.map(Pe(a)):t;return i.core.mutate({trans:e,type:"put",keys:r,values:c,wantResults:s}).then(function(t){var e=t.numFailures,n=t.results,r=t.lastResult,o=t.failures;if(0===e)return s?n:r;throw new G("".concat(i.name,".bulkPut(): ").concat(e," of ").concat(l," operations failed"),o)})})},t.prototype.bulkUpdate=function(t){var e=this,n=this.core,i=t.map(function(t){return t.key}),r=t.map(function(t){return t.changes}),s=[];return this._trans("readwrite",function(o){return n.getMany({trans:o,keys:i,cache:"clone"}).then(function(a){var l=[],c=[];t.forEach(function(t,n){var i=t.key,r=t.changes,o=a[n];if(o){for(var h=0,u=Object.keys(r);h<u.length;h++){var d=u[h],f=r[d];if(d===e.schema.primKey.keyPath){if(0!==Oe(f,i))throw new Z.Constraint("Cannot update primary key in bulkUpdate()")}else M(o,d,f)}s.push(n),l.push(i),c.push(o)}});var h=l.length;return n.mutate({trans:o,type:"put",keys:l,values:c,updates:{keys:i,changeSpecs:r}}).then(function(t){var n=t.numFailures,i=t.failures;if(0===n)return h;for(var r=0,o=Object.keys(i);r<o.length;r++){var a=o[r],l=s[Number(a)];if(null!=l){var c=i[a];delete i[a],i[l]=c}}throw new G("".concat(e.name,".bulkUpdate(): ").concat(n," of ").concat(h," operations failed"),i)})})})},t.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"delete",keys:t}).then(function(n){return Be(e,t,n)})}).then(function(t){var i=t.numFailures,r=t.lastResult,s=t.failures;if(0===i)return r;throw new G("".concat(e.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),s)})},t}();function ze(t){var e={},n=function(n,i){if(i){for(var r=arguments.length,s=new Array(r-1);--r;)s[r-1]=arguments[r];return e[n].subscribe.apply(null,s),t}if("string"==typeof n)return e[n]};n.addEventType=a;for(var i=1,r=arguments.length;i<r;++i)a(arguments[i]);return n;function a(t,i,r){if("object"==typeof t)return l(t);i||(i=ht),r||(r=it);var s={subscribers:[],fire:r,subscribe:function(t){-1===s.subscribers.indexOf(t)&&(s.subscribers.push(t),s.fire=i(s.fire,t))},unsubscribe:function(t){s.subscribers=s.subscribers.filter(function(e){return e!==t}),s.fire=s.subscribers.reduce(i,r)}};return e[t]=n[t]=s,s}function l(t){s(t).forEach(function(e){var n=t[e];if(o(n))a(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new Z.InvalidArgument("Invalid event config");var i=a(e,rt,function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];i.subscribers.forEach(function(t){w(function(){t.apply(null,e)})})})}})}}function Ne(t,e){return p(e).from({prototype:t}),e}function $e(t){return Ne(Fe.prototype,function(e,n,i){this.db=t,this._tx=i,this.name=e,this.schema=n,this.hook=t._allTables[e]?t._allTables[e].hook:ze(null,{creating:[at,it],reading:[st,rt],updating:[ct,it],deleting:[lt,it]})})}function Ve(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function We(t,e){t.filter=Se(t.filter,e)}function He(t,e,n){var i=t.replayFilter;t.replayFilter=i?function(){return Se(i(),e())}:e,t.justLimit=n&&!i}function Ke(t,e){t.isMatch=Se(t.isMatch,e)}function qe(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new Z.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Ue(t,e,n){var i=qe(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:i,range:t.range}})}function Ye(t,e,n,i){var r=t.replayFilter?Se(t.filter,t.replayFilter()):t.filter;if(t.or){var s={},o=function(t,n,i){if(!r||r(n,i,function(t){return n.stop(t)},function(t){return n.fail(t)})){var o=n.primaryKey,a=""+o;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(o)),h(s,a)||(s[a]=!0,e(t,n,i))}};return Promise.all([t.or._iterate(o,n),Xe(Ue(t,i,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return Xe(Ue(t,i,n),Se(t.algorithm,r),e,!t.keysOnly&&t.valueMapper)}function Xe(t,e,n,i){var r=Jt(i?function(t,e,r){return n(i(t),e,r)}:n);return t.then(function(t){if(t)return t.start(function(){var n=function(){return t.continue()};e&&!e(t,function(t){return n=t},function(e){t.stop(e),n=it},function(e){t.fail(e),n=it})||r(t.value,t,function(t){return n=t}),n()})})}var Ge=function(){function t(){}return t.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,ge.bind(null,n.error)):n.table._trans("readonly",t).then(e)},t.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,ge.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},t.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=Se(e.algorithm,t)},t.prototype._iterate=function(t,e){return Ye(this._ctx,t,e,this._ctx.table.core)},t.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&a(n,t),e._ctx=n,e},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(t){var e=this._ctx;return this._read(function(n){return Ye(e,t,n,e.table.core)})},t.prototype.count=function(t){var e=this;return this._read(function(t){var n=e._ctx,i=n.table.core;if(Ve(n,!0))return i.count({trans:t,query:{index:qe(n,i.schema),range:n.range}}).then(function(t){return Math.min(t,n.limit)});var r=0;return Ye(n,function(){return++r,!1},t,i).then(function(){return r})}).then(t)},t.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),i=n[0],r=n.length-1;function s(t,e){return e?s(t[n[e]],e-1):t[i]}var o="next"===this._ctx.dir?1:-1;function a(t,e){return Oe(s(t,r),s(e,r))*o}return this.toArray(function(t){return t.sort(a)}).then(e)},t.prototype.toArray=function(t){var e=this;return this._read(function(t){var n=e._ctx;if("next"===n.dir&&Ve(n,!0)&&n.limit>0){var i=n.valueMapper,r=qe(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:r,range:n.range}}).then(function(t){var e=t.result;return i?e.map(i):e})}var s=[];return Ye(n,function(t){return s.push(t)},t,n.table.core).then(function(){return s})},t)},t.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,Ve(e)?He(e,function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n(function(){t.advance(e),e=0}),!1))}}):He(e,function(){var e=t;return function(){return--e<0}})),this},t.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),He(this._ctx,function(){var e=t;return function(t,n,i){return--e<=0&&n(i),e>=0}},!0),this},t.prototype.until=function(t,e){return We(this._ctx,function(n,i,r){return!t(n.value)||(i(r),e)}),this},t.prototype.first=function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},t.prototype.last=function(t){return this.reverse().first(t)},t.prototype.filter=function(t){return We(this._ctx,function(e){return t(e.value)}),Ke(this._ctx,t),this},t.prototype.and=function(t){return this.filter(t)},t.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},t.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.key,n)})},t.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},t.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.primaryKey,n)})},t.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.key)}).then(function(){return n}).then(t)},t.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&Ve(e,!0)&&e.limit>0)return this._read(function(t){var n=qe(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})}).then(function(t){return t.result}).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.primaryKey)}).then(function(){return n}).then(t)},t.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},t.prototype.firstKey=function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},t.prototype.lastKey=function(t){return this.reverse().firstKey(t)},t.prototype.distinct=function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return We(this._ctx,function(t){var e=t.primaryKey.toString(),i=h(n,e);return n[e]=!0,!i}),this},t.prototype.modify=function(t){var e=this,n=this._ctx;return this._write(function(i){var r;r="function"==typeof t?t:function(e){return je(e,t)};var o=n.table.core,a=o.schema.primaryKey,l=a.outbound,c=a.extractKey,h=200,u=e.db._options.modifyChunkSize;u&&(h="object"==typeof u?u[o.name]||u["*"]||200:u);var d=[],f=0,p=[],g=function(t,e){var n=e.failures,i=e.numFailures;f+=t-i;for(var r=0,o=s(n);r<o.length;r++){var a=o[r];d.push(n[a])}},m=t===Je;return e.clone().primaryKeys().then(function(e){var s=Ve(n)&&n.limit===1/0&&("function"!=typeof t||m)&&{index:n.index,range:n.range},a=function(u){var d=Math.min(h,e.length-u),f=e.slice(u,u+d);return(m?Promise.resolve([]):o.getMany({trans:i,keys:f,cache:"immutable"})).then(function(p){var b=[],y=[],x=l?[]:null,v=m?f:[];if(!m)for(var w=0;w<d;++w){var k=p[w],_={value:R(k),primKey:e[u+w]};!1!==r.call(_,_.value,_)&&(null==_.value?v.push(e[u+w]):l||0===Oe(c(k),c(_.value))?(y.push(_.value),l&&x.push(e[u+w])):(v.push(e[u+w]),b.push(_.value)))}return Promise.resolve(b.length>0&&o.mutate({trans:i,type:"add",values:b}).then(function(t){for(var e in t.failures)v.splice(parseInt(e),1);g(b.length,t)})).then(function(){return(y.length>0||s&&"object"==typeof t)&&o.mutate({trans:i,type:"put",keys:x,values:y,criteria:s,changeSpec:"function"!=typeof t&&t,isAdditionalChunk:u>0}).then(function(t){return g(y.length,t)})}).then(function(){return(v.length>0||s&&m)&&o.mutate({trans:i,type:"delete",keys:v,criteria:s,isAdditionalChunk:u>0}).then(function(t){return Be(n.table,v,t)}).then(function(t){return g(v.length,t)})}).then(function(){return e.length>u+d&&a(u+h)})})};return a(0).then(function(){if(d.length>0)throw new X("Error modifying one or more objects",d,f,p);return e.length})})})},t.prototype.delete=function(){var t=this._ctx,e=t.range;return!Ve(t)||t.table.schema.yProps||!t.isPrimKey&&3!==e.type?this.modify(Je):this._write(function(n){var i=t.table.core.schema.primaryKey,r=e;return t.table.core.count({trans:n,query:{index:i,range:r}}).then(function(e){return t.table.core.mutate({trans:n,type:"deleteRange",range:r}).then(function(t){var n=t.failures,i=t.numFailures;if(i)throw new X("Could not delete some values",Object.keys(n).map(function(t){return n[t]}),e-i);return e-i})})})},t}(),Je=function(t,e){return e.value=null};function Qe(t){return Ne(Ge.prototype,function(e,n){this.db=t;var i=Ae,r=null;if(n)try{i=n()}catch(t){r=t}var s=e._ctx,o=s.table,a=o.hook.reading.fire;this._ctx={table:o,index:s.index,isPrimKey:!s.index||o.schema.primKey.keyPath&&s.index===o.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:s.or,valueMapper:a!==rt?a:null}})}function Ze(t,e){return t<e?-1:t===e?0:1}function tn(t,e){return t>e?-1:t===e?0:1}function en(t,e,n){var i=t instanceof hn?new t.Collection(t):t;return i._ctx.error=n?new n(e):new TypeError(e),i}function nn(t){return new t.Collection(t,function(){return cn("")}).limit(0)}function rn(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function sn(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function on(t,e,n,i,r,s){for(var o=Math.min(t.length,i.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==i[l])return r(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):r(t[l],i[l])<0?t.substr(0,l)+i[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;r(t[l],c)<0&&(a=l)}return o<i.length&&"next"===s?t+n.substr(t.length):o<t.length&&"prev"===s?t.substr(0,n.length):a<0?null:t.substr(0,a)+i[a]+n.substr(a+1)}function an(t,e,n,i){var r,s,o,a,l,c,h,u=n.length;if(!n.every(function(t){return"string"==typeof t}))return en(t,we);function d(t){r=rn(t),s=sn(t),o="next"===t?Ze:tn;var e=n.map(function(t){return{lower:s(t),upper:r(t)}}).sort(function(t,e){return o(t.lower,e.lower)});a=e.map(function(t){return t.upper}),l=e.map(function(t){return t.lower}),c=t,h="next"===t?"":i}d("next");var f=new t.Collection(t,function(){return ln(a[0],l[u-1]+i)});f._ondirectionchange=function(t){d(t)};var p=0;return f._addAlgorithm(function(t,n,i){var r=t.key;if("string"!=typeof r)return!1;var d=s(r);if(e(d,l,p))return!0;for(var f=null,g=p;g<u;++g){var m=on(r,d,a[g],l[g],o,c);null===m&&null===f?p=g+1:(null===f||o(f,m)>0)&&(f=m)}return n(null!==f?function(){t.continue(f+h)}:i),!1}),f}function ln(t,e,n,i){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:i}}function cn(t){return{type:1,lower:t,upper:t}}var hn=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(t,e,n,i){n=!1!==n,i=!0===i;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(n||i)&&(!n||!i)?nn(this):new this.Collection(this,function(){return ln(t,e,!n,!i)})}catch(t){return en(this,ve)}},t.prototype.equals=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return cn(t)})},t.prototype.above=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(t,void 0,!0)})},t.prototype.aboveOrEqual=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(t,void 0,!1)})},t.prototype.below=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(void 0,t,!1,!0)})},t.prototype.belowOrEqual=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(void 0,t)})},t.prototype.startsWith=function(t){return"string"!=typeof t?en(this,we):this.between(t,t+ye,!0,!0)},t.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):an(this,function(t,e){return 0===t.indexOf(e[0])},[t],ye)},t.prototype.equalsIgnoreCase=function(t){return an(this,function(t,e){return t===e[0]},[t],"")},t.prototype.anyOfIgnoreCase=function(){var t=V.apply($,arguments);return 0===t.length?nn(this):an(this,function(t,e){return-1!==e.indexOf(t)},t,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var t=V.apply($,arguments);return 0===t.length?nn(this):an(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},t,ye)},t.prototype.anyOf=function(){var t=this,e=V.apply($,arguments),n=this._cmp;try{e.sort(n)}catch(t){return en(this,ve)}if(0===e.length)return nn(this);var i=new this.Collection(this,function(){return ln(e[0],e[e.length-1])});i._ondirectionchange=function(i){n="next"===i?t._ascending:t._descending,e.sort(n)};var r=0;return i._addAlgorithm(function(t,i,s){for(var o=t.key;n(o,e[r])>0;)if(++r===e.length)return i(s),!1;return 0===n(o,e[r])||(i(function(){t.continue(e[r])}),!1)}),i},t.prototype.notEqual=function(t){return this.inAnyRange([[xe,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var t=V.apply($,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return en(this,ve)}var e=t.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[xe,e]]},null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(t,e){var n=this,i=this._cmp,r=this._ascending,s=this._descending,o=this._min,a=this._max;if(0===t.length)return nn(this);if(!t.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&r(t[0],t[1])<=0}))return en(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Z.InvalidArgument);var l=!e||!1!==e.includeLowers,c=e&&!0===e.includeUppers;function h(t,e){for(var n=0,r=t.length;n<r;++n){var s=t[n];if(i(e[0],s[1])<0&&i(e[1],s[0])>0){s[0]=o(s[0],e[0]),s[1]=a(s[1],e[1]);break}}return n===r&&t.push(e),t}var u,d=r;function f(t,e){return d(t[0],e[0])}try{(u=t.reduce(h,[])).sort(f)}catch(t){return en(this,ve)}var p=0,g=c?function(t){return r(t,u[p][1])>0}:function(t){return r(t,u[p][1])>=0},m=l?function(t){return s(t,u[p][0])>0}:function(t){return s(t,u[p][0])>=0};function b(t){return!g(t)&&!m(t)}var y=g,x=new this.Collection(this,function(){return ln(u[0][0],u[u.length-1][1],!l,!c)});return x._ondirectionchange=function(t){"next"===t?(y=g,d=r):(y=m,d=s),u.sort(f)},x._addAlgorithm(function(t,e,i){for(var s=t.key;y(s);)if(++p===u.length)return e(i),!1;return!!b(s)||(0===n._cmp(s,u[p][1])||0===n._cmp(s,u[p][0])||e(function(){d===r?t.continue(u[p][0]):t.continue(u[p][1])}),!1)}),x},t.prototype.startsWithAnyOf=function(){var t=V.apply($,arguments);return t.every(function(t){return"string"==typeof t})?0===t.length?nn(this):this.inAnyRange(t.map(function(t){return[t,t+ye]})):en(this,"startsWithAnyOf() only works with strings")},t}();function un(t){return Ne(hn.prototype,function(e,n,i){if(this.db=t,this._ctx={table:e,index:":id"===n?null:n,or:i},this._cmp=this._ascending=Oe,this._descending=function(t,e){return Oe(e,t)},this._max=function(t,e){return Oe(t,e)>0?t:e},this._min=function(t,e){return Oe(t,e)<0?t:e},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new Z.MissingAPI})}function dn(t){return Jt(function(e){return fn(e),t(e.target.error),!1})}function fn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var pn="storagemutated",gn="x-storagemutated-1",mn=ze(null,pn),bn=function(){function t(){}return t.prototype._lock=function(){return v(!Et.global),++this._reculock,1!==this._reculock||Et.global||(Et.lockOwnerFor=this),this},t.prototype._unlock=function(){if(v(!Et.global),0===--this._reculock)for(Et.global||(Et.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{de(t[1],t[0])}catch(t){}}return this},t.prototype._locked=function(){return this._reculock&&Et.lockOwnerFor!==this},t.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,i=this.db._state.dbOpenError;if(v(!this.idbtrans),!t&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new Z.DatabaseClosed(i);case"MissingAPIError":throw new Z.MissingAPI(i.message,i);default:throw new Z.OpenFailed(i)}if(!this.active)throw new Z.TransactionInactive;return v(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Jt(function(n){fn(n),e._reject(t.error)}),t.onabort=Jt(function(n){fn(n),e.active&&e._reject(new Z.Abort(t.error)),e.active=!1,e.on("abort").fire(n)}),t.oncomplete=Jt(function(){e.active=!1,e._resolve(),"mutatedParts"in t&&mn.storagemutated.fire(t.mutatedParts)}),this},t.prototype._promise=function(t,e,n){var i=this;if("readwrite"===t&&"readwrite"!==this.mode)return ge(new Z.ReadOnly("Transaction is readonly"));if(!this.active)return ge(new Z.TransactionInactive);if(this._locked())return new Bt(function(r,s){i._blockedFuncs.push([function(){i._promise(t,e,n).then(r,s)},Et])});if(n)return re(function(){var t=new Bt(function(t,n){i._lock();var r=e(t,n,i);r&&r.then&&r.then(t,n)});return t.finally(function(){return i._unlock()}),t._lib=!0,t});var r=new Bt(function(t,n){var r=e(t,n,i);r&&r.then&&r.then(t,n)});return r._lib=!0,r},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(t){var e=this._root(),n=Bt.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return n});else{e._waitingFor=n,e._waitingQueue=[];var i=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(i.get(-1/0).onsuccess=t)}()}var r=e._waitingFor;return new Bt(function(t,i){n.then(function(n){return e._waitingQueue.push(Jt(t.bind(null,n)))},function(t){return e._waitingQueue.push(Jt(i.bind(null,t)))}).finally(function(){e._waitingFor===r&&(e._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Z.Abort))},t.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(h(e,t))return e[t];var n=this.schema[t];if(!n)throw new Z.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,n,this);return i.core=this.db.core.table(t),e[t]=i,i},t}();function yn(t){return Ne(bn.prototype,function(e,n,i,r,s){var o=this;"readonly"!==e&&n.forEach(function(t){var e,r=null===(e=i[t])||void 0===e?void 0:e.yProps;r&&(n=n.concat(r.map(function(t){return t.updatesTable})))}),this.db=t,this.mode=e,this.storeNames=n,this.schema=i,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=ze(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Bt(function(t,e){o._resolve=t,o._reject=e}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(t){var e=o.active;return o.active=!1,o.on.error.fire(t),o.parent?o.parent._reject(t):e&&o.idbtrans&&o.idbtrans.abort(),ge(t)})})}function xn(t,e,n,i,r,s,o,a){return{name:t,keyPath:e,unique:n,multi:i,auto:r,compound:s,src:(n&&!o?"&":"")+(i?"*":"")+(r?"++":"")+vn(e),type:a}}function vn(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function wn(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:k(n,function(t){return[t.name,t]})}}function kn(t){return 1===t.length?t[0]:t}var _n=function(t){try{return t.only([[]]),_n=function(){return[[]]},[[]]}catch(t){return _n=function(){return ye},ye}};function Mn(t){return null==t?function(){}:"string"==typeof t?Cn(t):function(e){return _(e,t)}}function Cn(t){return 1===t.split(".").length?function(e){return e[t]}:function(e){return _(e,t)}}function Sn(t){return[].slice.call(t)}var An=0;function Pn(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function Dn(t,e,n){function i(t,e){var n=Sn(t.objectStoreNames);return{schema:{name:t.name,tables:n.map(function(t){return e.objectStore(t)}).map(function(t){var e=t.keyPath,n=t.autoIncrement,i=o(e),r=null==e,s={},a={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:r,compound:i,keyPath:e,autoIncrement:n,unique:!0,extractKey:Mn(e)},indexes:Sn(t.indexNames).map(function(e){return t.index(e)}).map(function(t){var e=t.name,n=t.unique,i=t.multiEntry,r=t.keyPath,a={name:e,compound:o(r),keyPath:r,unique:n,multiEntry:i,extractKey:Mn(r)};return s[Pn(r)]=a,a}),getIndexByKeyPath:function(t){return s[Pn(t)]}};return s[":id"]=a.primaryKey,null!=e&&(s[Pn(e)]=a.primaryKey),a})},hasGetAll:n.length>0&&"getAll"in e.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function r(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=t.lower,i=t.upper,r=t.lowerOpen,s=t.upperOpen;return void 0===n?void 0===i?null:e.upperBound(i,!!s):void 0===i?e.lowerBound(n,!!r):e.bound(n,i,!!r,!!s)}function s(t){var e=t.name;function n(t){var n=t.trans,i=t.type,s=t.keys,o=t.values,a=t.range;return new Promise(function(t,l){t=Jt(t);var c=n.objectStore(e),h=null==c.keyPath,u="put"===i||"add"===i;if(!u&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var d,f=(s||o||{length:1}).length;if(s&&o&&s.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return t({numFailures:0,failures:{},results:[],lastResult:void 0});var p=[],g=[],m=0,b=function(t){++m,fn(t)};if("deleteRange"===i){if(4===a.type)return t({numFailures:m,failures:g,results:[],lastResult:void 0});3===a.type?p.push(d=c.clear()):p.push(d=c.delete(r(a)))}else{var y=u?h?[o,s]:[o,null]:[s,null],x=y[0],v=y[1];if(u)for(var w=0;w<f;++w)p.push(d=v&&void 0!==v[w]?c[i](x[w],v[w]):c[i](x[w])),d.onerror=b;else for(w=0;w<f;++w)p.push(d=c[i](x[w])),d.onerror=b}var k=function(e){var n=e.target.result;p.forEach(function(t,e){return null!=t.error&&(g[e]=t.error)}),t({numFailures:m,failures:g,results:"delete"===i?s:p.map(function(t){return t.result}),lastResult:n})};d.onerror=function(t){b(t),k(t)},d.onsuccess=k})}function i(t){var n=t.trans,i=t.values,s=t.query,o=t.reverse,a=t.unique;return new Promise(function(t,l){t=Jt(t);var c=s.index,h=s.range,u=n.objectStore(e),d=c.isPrimaryKey?u:u.index(c.name),f=o?a?"prevunique":"prev":a?"nextunique":"next",p=i||!("openKeyCursor"in d)?d.openCursor(r(h),f):d.openKeyCursor(r(h),f);p.onerror=dn(l),p.onsuccess=Jt(function(e){var i=p.result;if(i){i.___id=++An,i.done=!1;var r=i.continue.bind(i),s=i.continuePrimaryKey;s&&(s=s.bind(i));var o=i.advance.bind(i),a=function(){throw new Error("Cursor not started")},c=function(){throw new Error("Cursor not stopped")};i.trans=n,i.stop=i.continue=i.continuePrimaryKey=i.advance=a,i.fail=Jt(l),i.next=function(){var t=this,e=1;return this.start(function(){return e--?t.continue():t.stop()}).then(function(){return t})},i.start=function(t){var e=new Promise(function(t,e){t=Jt(t),p.onerror=dn(e),i.fail=e,i.stop=function(e){i.stop=i.continue=i.continuePrimaryKey=i.advance=c,t(e)}}),n=function(){if(p.result)try{t()}catch(t){i.fail(t)}else i.done=!0,i.start=function(){throw new Error("Cursor behind last entry")},i.stop()};return p.onsuccess=Jt(function(t){p.onsuccess=n,n()}),i.continue=r,i.continuePrimaryKey=s,i.advance=o,n(),e},t(i)}else t(null)},l)})}function s(t){return function(n){return new Promise(function(i,s){i=Jt(i);var o=n.trans,a=n.values,l=n.limit,c=n.query,h=l===1/0?void 0:l,u=c.index,d=c.range,f=o.objectStore(e),p=u.isPrimaryKey?f:f.index(u.name),g=r(d);if(0===l)return i({result:[]});if(t){var m=a?p.getAll(g,h):p.getAllKeys(g,h);m.onsuccess=function(t){return i({result:t.target.result})},m.onerror=dn(s)}else{var b=0,y=a||!("openKeyCursor"in p)?p.openCursor(g):p.openKeyCursor(g),x=[];y.onsuccess=function(t){var e=y.result;return e?(x.push(a?e.value:e.primaryKey),++b===l?i({result:x}):void e.continue()):i({result:x})},y.onerror=dn(s)}})}}return{name:e,schema:t,mutate:n,getMany:function(t){var n=t.trans,i=t.keys;return new Promise(function(t,r){t=Jt(t);for(var s,o=n.objectStore(e),a=i.length,l=new Array(a),c=0,h=0,u=function(e){var n=e.target;l[n._pos]=n.result,++h===c&&t(l)},d=dn(r),f=0;f<a;++f)null!=i[f]&&((s=o.get(i[f]))._pos=f,s.onsuccess=u,s.onerror=d,++c);0===c&&t(l)})},get:function(t){var n=t.trans,i=t.key;return new Promise(function(t,r){t=Jt(t);var s=n.objectStore(e).get(i);s.onsuccess=function(e){return t(e.target.result)},s.onerror=dn(r)})},query:s(c),openCursor:i,count:function(t){var n=t.query,i=t.trans,s=n.index,o=n.range;return new Promise(function(t,n){var a=i.objectStore(e),l=s.isPrimaryKey?a:a.index(s.name),c=r(o),h=c?l.count(c):l.count();h.onsuccess=Jt(function(e){return t(e.target.result)}),h.onerror=dn(n)})}}}var a=i(t,n),l=a.schema,c=a.hasGetAll,h=l.tables.map(function(t){return s(t)}),u={};return h.forEach(function(t){return u[t.name]=t}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!u[t])throw new Error("Table '".concat(t,"' not found"));return u[t]},MIN_KEY:-1/0,MAX_KEY:_n(e),schema:l}}function On(t,e){return e.reduce(function(t,e){var i=e.create;return n(n({},t),i(t))},t)}function En(t,e,n,i){var r=n.IDBKeyRange;return n.indexedDB,{dbcore:On(Dn(e,r,i),t.dbcore)}}function Tn(t,e){var n=e.db,i=En(t._middlewares,n,t._deps,e);t.core=i.dbcore,t.tables.forEach(function(e){var n=e.name;t.core.schema.tables.some(function(t){return t.name===n})&&(e.core=t.core.table(n),t[n]instanceof t.Table&&(t[n].core=e.core))})}function Ln(t,e,n,i){n.forEach(function(n){var r=i[n];e.forEach(function(e){var i=m(e,n);(!i||"value"in i&&void 0===i.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?f(e,n,{get:function(){return this.table(n)},set:function(t){d(this,n,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[n]=new t.Table(n,r))})})}function Rn(t,e){e.forEach(function(e){for(var n in e)e[n]instanceof t.Table&&delete e[n]})}function Bn(t,e){return t._cfg.version-e._cfg.version}function In(t,e,n,i){var r=t._dbSchema;n.objectStoreNames.contains("$meta")&&!r.$meta&&(r.$meta=wn("$meta",Xn("")[0],[]),t._storeNames.push("$meta"));var o=t._createTransaction("readwrite",t._storeNames,r);o.create(n),o._completion.catch(i);var a=o._reject.bind(o),l=Et.transless||Et;re(function(){if(Et.trans=o,Et.transless=l,0!==e)return Tn(t,n),Fn(t,o,e).then(function(e){return zn(t,e,o,n)}).catch(a);s(r).forEach(function(t){$n(n,t,r[t].primKey,r[t].indexes)}),Tn(t,n),Bt.follow(function(){return t.on.populate.fire(o)}).catch(a)})}function jn(t,e){Vn(t._dbSchema,e),e.db.version%10!=0||e.objectStoreNames.contains("$meta")||e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var n=Kn(t,t.idbdb,e);Yn(t,t._dbSchema,e);for(var i=function(t){if(t.change.length||t.recreate)return console.warn("Unable to patch indexes of table ".concat(t.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=e.objectStore(t.name);t.add.forEach(function(e){dt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(t.name,".").concat(e.src)),Hn(n,e)})},r=0,s=Nn(n,t._dbSchema).change;r<s.length;r++){var o=i(s[r]);if("object"==typeof o)return o.value}}function Fn(t,e,n){return e.storeNames.includes("$meta")?e.table("$meta").get("version").then(function(t){return null!=t?t:n}):Bt.resolve(n)}function zn(t,e,n,i){var r=[],o=t._versions,a=t._dbSchema=Kn(t,t.idbdb,i),l=o.filter(function(t){return t._cfg.version>=e});if(0===l.length)return Bt.resolve();function c(){return r.length?Bt.resolve(r.shift()(n.idbtrans)).then(c):Bt.resolve()}return l.forEach(function(o){r.push(function(){var r=a,l=o._cfg.dbschema;Yn(t,r,i),Yn(t,l,i),a=t._dbSchema=l;var c=Nn(r,l);c.add.forEach(function(t){$n(i,t[0],t[1].primKey,t[1].indexes)}),c.change.forEach(function(t){if(t.recreate)throw new Z.Upgrade("Not yet support for changing primary key");var e=i.objectStore(t.name);t.add.forEach(function(t){return Hn(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),Hn(e,t)}),t.del.forEach(function(t){return e.deleteIndex(t)})});var h=o._cfg.contentUpgrade;if(h&&o._cfg.version>e){Tn(t,i),n._memoizedTables={};var u=S(l);c.del.forEach(function(t){u[t]=r[t]}),Rn(t,[t.Transaction.prototype]),Ln(t,[t.Transaction.prototype],s(u),u),n.schema=u;var d,f=W(h);f&&se();var p=Bt.follow(function(){if((d=h(n))&&f){var t=oe.bind(null,null);d.then(t,t)}});return d&&"function"==typeof d.then?Bt.resolve(d):p.then(function(){return d})}}),r.push(function(e){Wn(o._cfg.dbschema,e),Rn(t,[t.Transaction.prototype]),Ln(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),n.schema=t._dbSchema}),r.push(function(e){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===o._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(t){return"$meta"!==t})):e.objectStore("$meta").put(o._cfg.version,"version"))})}),c().then(function(){Vn(a,i)})}function Nn(t,e){var n,i={del:[],add:[],change:[]};for(n in t)e[n]||i.del.push(n);for(n in e){var r=t[n],s=e[n];if(r){var o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||r.primKey.auto!==s.primKey.auto)o.recreate=!0,i.change.push(o);else{var a=r.idxByName,l=s.idxByName,c=void 0;for(c in a)l[c]||o.del.push(c);for(c in l){var h=a[c],u=l[c];h?h.src!==u.src&&o.change.push(u):o.add.push(u)}(o.del.length>0||o.add.length>0||o.change.length>0)&&i.change.push(o)}}else i.add.push([n,s])}return i}function $n(t,e,n,i){var r=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(function(t){return Hn(r,t)}),r}function Vn(t,e){s(t).forEach(function(n){e.db.objectStoreNames.contains(n)||(dt&&console.debug("Dexie: Creating missing table",n),$n(e,n,t[n].primKey,t[n].indexes))})}function Wn(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return null==t[n]&&e.db.deleteObjectStore(n)})}function Hn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Kn(t,e,n){var i={};return y(e.objectStoreNames,0).forEach(function(t){for(var e=n.objectStore(t),r=e.keyPath,s=xn(vn(r),r||"",!0,!1,!!e.autoIncrement,r&&"string"!=typeof r,!0),o=[],a=0;a<e.indexNames.length;++a){var l=e.index(e.indexNames[a]);r=l.keyPath;var c=xn(l.name,r,!!l.unique,!!l.multiEntry,!1,r&&"string"!=typeof r,!1);o.push(c)}i[t]=wn(t,s,o)}),i}function qn(t,e,n){t.verno=e.version/10;var i=t._dbSchema=Kn(t,e,n);t._storeNames=y(e.objectStoreNames,0),Ln(t,[t._allTables],s(i),i)}function Un(t,e){var n=Nn(Kn(t,t.idbdb,e),t._dbSchema);return!(n.add.length||n.change.some(function(t){return t.add.length||t.change.length}))}function Yn(t,e,n){for(var i=n.db.objectStoreNames,s=0;s<i.length;++s){var o=i[s],a=n.objectStore(o);t._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var c=a.indexNames[l],h=a.index(c).keyPath,u="string"==typeof h?h:"["+y(h).join("+")+"]";if(e[o]){var d=e[o].idxByName[u];d&&(d.name=c,delete e[o].idxByName[u],e[o].idxByName[c]=d)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Xn(t){return t.split(",").map(function(t,e){var n,i=t.split(":"),r=null===(n=i[1])||void 0===n?void 0:n.trim(),s=(t=i[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return xn(s,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),o(a),0===e,r)})}var Gn,Jn=function(){function t(){}return t.prototype._createTableSchema=function(t,e,n){return wn(t,e,n)},t.prototype._parseIndexSyntax=function(t){return Xn(t)},t.prototype._parseStoresSpec=function(t,e){var n=this;s(t).forEach(function(i){if(null!==t[i]){var r=n._parseIndexSyntax(t[i]),s=r.shift();if(!s)throw new Z.Schema("Invalid schema for table "+i+": "+t[i]);if(s.unique=!0,s.multi)throw new Z.Schema("Primary key cannot be multiEntry*");r.forEach(function(t){if(t.auto)throw new Z.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new Z.Schema("Index must have a name and cannot be an empty string")});var o=n._createTableSchema(i,s,r);e[i]=o}})},t.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,t):t;var n=e._versions,i={},r={};return n.forEach(function(t){a(i,t._cfg.storesSource),r=t._cfg.dbschema={},t._parseStoresSpec(i,r)}),e._dbSchema=r,Rn(e,[e._allTables,e,e.Transaction.prototype]),Ln(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],s(r),r),e._storeNames=s(r),this},t.prototype.upgrade=function(t){return this._cfg.contentUpgrade=ut(this._cfg.contentUpgrade||it,t),this},t}();function Qn(t){return Ne(Jn.prototype,function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new tr(_e,{addons:[],indexedDB:t,IDBKeyRange:e})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function ti(t){return t&&"function"==typeof t.databases}function ei(t){var e=t.indexedDB,n=t.IDBKeyRange;return ti(e)?Promise.resolve(e.databases()).then(function(t){return t.map(function(t){return t.name}).filter(function(t){return t!==_e})}):Zn(e,n).toCollection().primaryKeys()}function ni(t,e){var n=t.indexedDB,i=t.IDBKeyRange;!ti(n)&&e!==_e&&Zn(n,i).put({name:e}).catch(it)}function ii(t,e){var n=t.indexedDB,i=t.IDBKeyRange;!ti(n)&&e!==_e&&Zn(n,i).delete(e).catch(it)}function ri(t){return re(function(){return Et.letThrough=!0,t()})}function si(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function oi(t){return!("from"in t)}var ai=function(t,e){if(!this){var n=new ai;return t&&"d"in t&&a(n,t),n}a(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function li(t,e,n){var i=Oe(e,n);if(!isNaN(i)){if(i>0)throw RangeError();if(oi(t))return a(t,{from:e,to:n,d:1});var r=t.l,s=t.r;if(Oe(n,t.from)<0)return r?li(r,e,n):t.l={from:e,to:n,d:1,l:null,r:null},di(t);if(Oe(e,t.to)>0)return s?li(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},di(t);Oe(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),Oe(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var o=!t.r;r&&!t.l&&ci(t,r),s&&o&&ci(t,s)}}function ci(t,e){function n(t,e){var i=e.from,r=e.to,s=e.l,o=e.r;li(t,i,r),s&&n(t,s),o&&n(t,o)}oi(e)||n(t,e)}function hi(t,e){var n=ui(e),i=n.next();if(i.done)return!1;for(var r=i.value,s=ui(t),o=s.next(r.from),a=o.value;!i.done&&!o.done;){if(Oe(a.from,r.to)<=0&&Oe(a.to,r.from)>=0)return!0;Oe(r.from,a.from)<0?r=(i=n.next(a.from)).value:a=(o=s.next(r.from)).value}return!1}function ui(t){var e=oi(t)?null:{s:0,n:t};return{next:function(t){for(var n=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&Oe(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||Oe(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function di(t){var e,i,r=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(i=t.l)||void 0===i?void 0:i.d)||0),s=r>1?"r":r<-1?"l":"";if(s){var o="r"===s?"l":"r",a=n({},t),l=t[s];t.from=l.from,t.to=l.to,t[s]=l[s],a[s]=l[o],t[o]=a,a.d=fi(a)}t.d=fi(t)}function fi(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}function pi(t,e){return s(e).forEach(function(n){t[n]?ci(t[n],e[n]):t[n]=E(e[n])}),t}function gi(t,e){return t.all||e.all||Object.keys(t).some(function(n){return e[n]&&hi(e[n],t[n])})}u(ai.prototype,((Gn={add:function(t){return ci(this,t),this},addKey:function(t){return li(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(t){return li(e,t,t)}),this},hasKey:function(t){var e=ui(this).next(t).value;return e&&Oe(e.from,t)<=0&&Oe(e.to,t)>=0}})[F]=function(){return ui(this)},Gn));var mi={},bi={},yi=!1;function xi(t,e){pi(bi,t),yi||(yi=!0,setTimeout(function(){yi=!1;var t=bi;bi={},vi(t,!1)},0))}function vi(t,e){void 0===e&&(e=!1);var n=new Set;if(t.all)for(var i=0,r=Object.values(mi);i<r.length;i++)wi(a=r[i],t,n,e);else for(var s in t){var o=/^idb\:\/\/(.*)\/(.*)\//.exec(s);if(o){var a,l=o[1],c=o[2];(a=mi["idb://".concat(l,"/").concat(c)])&&wi(a,t,n,e)}}n.forEach(function(t){return t()})}function wi(t,e,n,i){for(var r=[],s=0,o=Object.entries(t.queries.query);s<o.length;s++){for(var a=o[s],l=a[0],c=[],h=0,u=a[1];h<u.length;h++){var d=u[h];gi(e,d.obsSet)?d.subscribers.forEach(function(t){return n.add(t)}):i&&c.push(d)}i&&r.push([l,c])}if(i)for(var f=0,p=r;f<p.length;f++){var g=p[f];l=g[0],c=g[1],t.queries.query[l]=c}}function ki(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?ge(e.dbOpenError):t});e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var i=e.openCanceller,r=Math.round(10*t.verno),s=!1;function o(){if(e.openCanceller!==i)throw new Z.DatabaseClosed("db.open() was cancelled")}var a=e.dbReadyResolve,l=null,c=!1,h=function(){return new Bt(function(i,a){if(o(),!n)throw new Z.MissingAPI;var u=t.name,d=e.autoSchema||!r?n.open(u):n.open(u,r);if(!d)throw new Z.MissingAPI;d.onerror=dn(a),d.onblocked=Jt(t._fireOnBlocked),d.onupgradeneeded=Jt(function(i){if(l=d.transaction,e.autoSchema&&!t._options.allowEmptyDB){d.onerror=fn,l.abort(),d.result.close();var r=n.deleteDatabase(u);r.onsuccess=r.onerror=Jt(function(){a(new Z.NoSuchDatabase("Database ".concat(u," doesnt exist")))})}else{l.onerror=dn(a);var o=i.oldVersion>Math.pow(2,62)?0:i.oldVersion;c=o<1,t.idbdb=d.result,s&&jn(t,l),In(t,o/10,l,a)}},a),d.onsuccess=Jt(function(){l=null;var n=t.idbdb=d.result,o=y(n.objectStoreNames);if(o.length>0)try{var a=n.transaction(kn(o),"readonly");if(e.autoSchema)qn(t,n,a);else if(Yn(t,t._dbSchema,a),!Un(t,a)&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),n.close(),r=n.version+1,s=!0,i(h());Tn(t,a)}catch(t){}ke.push(t),n.onversionchange=Jt(function(n){e.vcFired=!0,t.on("versionchange").fire(n)}),n.onclose=Jt(function(){t.close({disableAutoOpen:!1})}),c&&ni(t._deps,u),i()},a)}).catch(function(t){switch(null==t?void 0:t.name){case"UnknownError":if(e.PR1398_maxLoop>0)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),h();break;case"VersionError":if(r>0)return r=0,h()}return Bt.reject(t)})};return Bt.race([i,("undefined"==typeof navigator?Bt.resolve():si()).then(h)]).then(function(){return o(),e.onReadyBeingFired=[],Bt.resolve(ri(function(){return t.on.ready.fire(t.vip)})).then(function n(){if(e.onReadyBeingFired.length>0){var i=e.onReadyBeingFired.reduce(ut,it);return e.onReadyBeingFired=[],Bt.resolve(ri(function(){return i(t.vip)})).then(n)}})}).finally(function(){e.openCanceller===i&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)}).catch(function(n){e.dbOpenError=n;try{l&&l.abort()}catch(t){}return i===e.openCanceller&&t._close(),ge(n)}).finally(function(){e.openComplete=!0,a()}).then(function(){if(c){var e={};t.tables.forEach(function(n){n.schema.indexes.forEach(function(i){i.name&&(e["idb://".concat(t.name,"/").concat(n.name,"/").concat(i.name)]=new ai(-1/0,[[[]]]))}),e["idb://".concat(t.name,"/").concat(n.name,"/")]=e["idb://".concat(t.name,"/").concat(n.name,"/:dels")]=new ai(-1/0,[[[]]])}),mn(pn).fire(e),vi(e,!0)}return t})}function _i(t){var e=function(e){return t.next(e)},n=function(e){return t.throw(e)},i=s(e),r=s(n);function s(t){return function(e){var n=t(e),s=n.value;return n.done?s:s&&"function"==typeof s.then?s.then(i,r):o(s)?Promise.all(s).then(i,r):i(s)}}return s(e)()}function Mi(t,e,n){var i=arguments.length;if(i<2)throw new Z.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];return n=r.pop(),[t,P(r),n]}function Ci(t,e,n,i,r){return Bt.resolve().then(function(){var s=Et.transless||Et,o=t._createTransaction(e,n,t._dbSchema,i);o.explicit=!0;var a={trans:o,transless:s};if(i)o.idbtrans=i.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(i){return i.name===J.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Ci(t,e,n,null,r)})):ge(i)}var l,c=W(r);c&&se();var h=Bt.follow(function(){if(l=r.call(o,o))if(c){var t=oe.bind(null,null);l.then(t,t)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=_i(l))},a);return(l&&"function"==typeof l.then?Bt.resolve(l).then(function(t){return o.active?t:ge(new Z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):h.then(function(){return l})).then(function(t){return i&&o._resolve(),o._completion.then(function(){return t})}).catch(function(t){return o._reject(t),ge(t)})})}function Si(t,e,n){for(var i=o(t)?t.slice():[t],r=0;r<n;++r)i.push(e);return i}function Ai(t){return n(n({},t),{table:function(e){var i=t.table(e),r=i.schema,s={},o=[];function a(t,e,i){var r=Pn(t),l=s[r]=s[r]||[],c=null==t?0:"string"==typeof t?1:t.length,h=e>0,u=n(n({},i),{name:h?"".concat(r,"(virtual-from:").concat(i.name,")"):i.name,lowLevelIndex:i,isVirtual:h,keyTail:e,keyLength:c,extractKey:Mn(t),unique:!h&&i.unique});return l.push(u),u.isPrimaryKey||o.push(u),c>1&&a(2===c?t[0]:t.slice(0,c-1),e+1,i),l.sort(function(t,e){return t.keyTail-e.keyTail}),u}var l=a(r.primaryKey.keyPath,0,r.primaryKey);s[":id"]=[l];for(var c=0,h=r.indexes;c<h.length;c++){var u=h[c];a(u.keyPath,0,u)}function d(t){var e=s[Pn(t)];return e&&e[0]}function f(e,n){return{type:1===e.type?2:e.type,lower:Si(e.lower,e.lowerOpen?t.MAX_KEY:t.MIN_KEY,n),lowerOpen:!0,upper:Si(e.upper,e.upperOpen?t.MIN_KEY:t.MAX_KEY,n),upperOpen:!0}}function p(t){var e=t.query.index;return e.isVirtual?n(n({},t),{query:{index:e.lowLevelIndex,range:f(t.query.range,e.keyTail)}}):t}var g=n(n({},i),{schema:n(n({},r),{primaryKey:l,indexes:o,getIndexByKeyPath:d}),count:function(t){return i.count(p(t))},query:function(t){return i.query(p(t))},openCursor:function(e){var n=e.query.index,r=n.keyTail,s=n.isVirtual,o=n.keyLength;if(!s)return i.openCursor(e);function a(n){function i(i){null!=i?n.continue(Si(i,e.reverse?t.MAX_KEY:t.MIN_KEY,r)):e.unique?n.continue(n.key.slice(0,o).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,r)):n.continue()}var s=Object.create(n,{continue:{value:i},continuePrimaryKey:{value:function(e,i){n.continuePrimaryKey(Si(e,t.MAX_KEY,r),i)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var t=n.key;return 1===o?t[0]:t.slice(0,o)}},value:{get:function(){return n.value}}});return s}return i.openCursor(p(e)).then(function(t){return t&&a(t)})}});return g}})}var Pi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ai};function Di(t,e,n,i){return n=n||{},i=i||"",s(t).forEach(function(r){if(h(e,r)){var s=t[r],o=e[r];if("object"==typeof s&&"object"==typeof o&&s&&o){var a=j(s);a!==j(o)?n[i+r]=e[r]:"Object"===a?Di(s,o,n,i+r+"."):s!==o&&(n[i+r]=e[r])}else s!==o&&(n[i+r]=e[r])}else n[i+r]=void 0}),s(e).forEach(function(r){h(t,r)||(n[i+r]=e[r])}),n}function Oi(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}var Ei={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return n(n({},t),{table:function(e){var r=t.table(e),s=r.schema.primaryKey,o=n(n({},r),{mutate:function(t){var o=Et.trans,a=o.table(e).hook,l=a.deleting,c=a.creating,u=a.updating;switch(t.type){case"add":if(c.fire===it)break;return o._promise("readwrite",function(){return d(t)},!0);case"put":if(c.fire===it&&u.fire===it)break;return o._promise("readwrite",function(){return d(t)},!0);case"delete":if(l.fire===it)break;return o._promise("readwrite",function(){return d(t)},!0);case"deleteRange":if(l.fire===it)break;return o._promise("readwrite",function(){return f(t)},!0)}return r.mutate(t);function d(t){var e=Et.trans,o=t.keys||Oi(s,t);if(!o)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?n(n({},t),{keys:o}):n({},t)).type&&(t.values=i([],t.values,!0)),t.keys&&(t.keys=i([],t.keys,!0)),Ti(r,t,o).then(function(n){var i=o.map(function(i,r){var o=n[r],a={onerror:null,onsuccess:null};if("delete"===t.type)l.fire.call(a,i,o,e);else if("add"===t.type||void 0===o){var d=c.fire.call(a,i,t.values[r],e);null==i&&null!=d&&(i=d,t.keys[r]=i,s.outbound||M(t.values[r],s.keyPath,i))}else{var f=Di(o,t.values[r]),p=u.fire.call(a,f,i,o,e);if(p){var g=t.values[r];Object.keys(p).forEach(function(t){h(g,t)?g[t]=p[t]:M(g,t,p[t])})}}return a});return r.mutate(t).then(function(e){for(var r=e.failures,s=e.results,a=e.numFailures,l=e.lastResult,c=0;c<o.length;++c){var h=s?s[c]:o[c],u=i[c];null==h?u.onerror&&u.onerror(r[c]):u.onsuccess&&u.onsuccess("put"===t.type&&n[c]?t.values[c]:h)}return{failures:r,results:s,numFailures:a,lastResult:l}}).catch(function(t){return i.forEach(function(e){return e.onerror&&e.onerror(t)}),Promise.reject(t)})})}function f(t){return p(t.trans,t.range,1e4)}function p(t,e,i){return r.query({trans:t,values:!1,query:{index:s,range:e},limit:i}).then(function(r){var s=r.result;return d({type:"delete",keys:s,trans:t}).then(function(r){return r.numFailures>0?Promise.reject(r.failures[0]):s.length<i?{failures:[],numFailures:0,lastResult:void 0}:p(t,n(n({},e),{lower:s[s.length-1],lowerOpen:!0}),i)})})}}});return o}})}};function Ti(t,e,n){return"add"===e.type?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function Li(t,e,n){try{if(!e)return null;if(e.keys.length<t.length)return null;for(var i=[],r=0,s=0;r<e.keys.length&&s<t.length;++r)0===Oe(e.keys[r],t[s])&&(i.push(n?R(e.values[r]):e.values[r]),++s);return i.length===t.length?i:null}catch(t){return null}}var Ri={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var i=t.table(e);return n(n({},i),{getMany:function(t){if(!t.cache)return i.getMany(t);var e=Li(t.keys,t.trans._cache,"clone"===t.cache);return e?Bt.resolve(e):i.getMany(t).then(function(e){return t.trans._cache={keys:t.keys,values:"clone"===t.cache?R(e):e},e})},mutate:function(t){return"add"!==t.type&&(t.trans._cache=null),i.mutate(t)}})}}}};function Bi(t,e){return"readonly"===t.trans.mode&&!!t.subscr&&!t.trans.explicit&&"disabled"!==t.trans.db._options.cache&&!e.schema.primaryKey.outbound}function Ii(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ji={stack:"dbcore",level:0,name:"Observability",create:function(t){var e=t.schema.name,i=new ai(t.MIN_KEY,t.MAX_KEY);return n(n({},t),{transaction:function(e,n,i){if(Et.subscr&&"readonly"!==n)throw new Z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Et.querier));return t.transaction(e,n,i)},table:function(r){var a=t.table(r),l=a.schema,c=l.primaryKey,h=l.indexes,u=c.extractKey,d=c.outbound,f=c.autoIncrement&&h.filter(function(t){return t.compound&&t.keyPath.includes(c.keyPath)}),p=n(n({},a),{mutate:function(n){var s,h,u=n.trans,d=n.mutatedParts||(n.mutatedParts={}),p=function(t){var n="idb://".concat(e,"/").concat(r,"/").concat(t);return d[n]||(d[n]=new ai)},g=p(""),m=p(":dels"),b=n.type,y="deleteRange"===n.type?[n.range]:"delete"===n.type?[n.keys]:n.values.length<50?[Oi(c,n).filter(function(t){return t}),n.values]:[],x=y[0],v=y[1],w=n.trans._cache;if(o(x)){g.addKeys(x);var k="delete"===b||x.length===v.length?Li(x,w):null;k||m.addKeys(x),(k||v)&&Fi(p,l,k,v)}else if(x){var _={from:null!==(s=x.lower)&&void 0!==s?s:t.MIN_KEY,to:null!==(h=x.upper)&&void 0!==h?h:t.MAX_KEY};m.add(_),g.add(_)}else g.add(i),m.add(i),l.indexes.forEach(function(t){return p(t.name).add(i)});return a.mutate(n).then(function(t){return!x||"add"!==n.type&&"put"!==n.type||(g.addKeys(t.results),f&&f.forEach(function(e){for(var i=n.values.map(function(t){return e.extractKey(t)}),r=e.keyPath.findIndex(function(t){return t===c.keyPath}),s=0,o=t.results.length;s<o;++s)i[s][r]=t.results[s];p(e.name).addKeys(i)})),u.mutatedParts=pi(u.mutatedParts||{},d),t})}}),g=function(e){var n,i,r=e.query,s=r.index,o=r.range;return[s,new ai(null!==(n=o.lower)&&void 0!==n?n:t.MIN_KEY,null!==(i=o.upper)&&void 0!==i?i:t.MAX_KEY)]},m={get:function(t){return[c,new ai(t.key)]},getMany:function(t){return[c,(new ai).addKeys(t.keys)]},count:g,query:g,openCursor:g};return s(m).forEach(function(t){p[t]=function(s){var o=Et.subscr,l=!!o,c=Bi(Et,a)&&Ii(t,s)?s.obsSet={}:o;if(l){var h=function(t){var n="idb://".concat(e,"/").concat(r,"/").concat(t);return c[n]||(c[n]=new ai)},f=h(""),p=h(":dels"),g=m[t](s),b=g[0],y=g[1];if("query"===t&&b.isPrimaryKey&&!s.values?p.add(y):h(b.name||"").add(y),!b.isPrimaryKey){if("count"!==t){var x="query"===t&&d&&s.values&&a.query(n(n({},s),{values:!1}));return a[t].apply(this,arguments).then(function(e){if("query"===t){if(d&&s.values)return x.then(function(t){var n=t.result;return f.addKeys(n),e});var n=s.values?e.result.map(u):e.result;s.values?f.addKeys(n):p.addKeys(n)}else if("openCursor"===t){var i=e,r=s.values;return i&&Object.create(i,{key:{get:function(){return p.addKey(i.primaryKey),i.key}},primaryKey:{get:function(){var t=i.primaryKey;return p.addKey(t),t}},value:{get:function(){return r&&f.addKey(i.primaryKey),i.value}}})}return e})}p.add(i)}}return a[t].apply(this,arguments)}}),p}})}};function Fi(t,e,n,i){function r(e){var r=t(e.name||"");function s(t){return null!=t?e.extractKey(t):null}var a=function(t){return e.multiEntry&&o(t)?t.forEach(function(t){return r.addKey(t)}):r.addKey(t)};(n||i).forEach(function(t,e){var r=n&&s(n[e]),o=i&&s(i[e]);0!==Oe(r,o)&&(null!=r&&a(r),null!=o&&a(o))})}e.indexes.forEach(r)}function zi(t,e,i){if(0===i.numFailures)return e;if("deleteRange"===e.type)return null;var r=e.keys?e.keys.length:"values"in e&&e.values?e.values.length:1;if(i.numFailures===r)return null;var s=n({},e);return o(s.keys)&&(s.keys=s.keys.filter(function(t,e){return!(e in i.failures)})),"values"in s&&o(s.values)&&(s.values=s.values.filter(function(t,e){return!(e in i.failures)})),s}function Ni(t,e){return void 0===e.lower||(e.lowerOpen?Oe(t,e.lower)>0:Oe(t,e.lower)>=0)}function $i(t,e){return void 0===e.upper||(e.upperOpen?Oe(t,e.upper)<0:Oe(t,e.upper)<=0)}function Vi(t,e){return Ni(t,e)&&$i(t,e)}function Wi(t,e,n,i,r,s){if(!n||0===n.length)return t;var a=e.query.index,l=a.multiEntry,c=e.query.range,h=i.schema.primaryKey.extractKey,u=a.extractKey,d=(a.lowLevelIndex||a).extractKey,f=n.reduce(function(t,n){var i=t,r=[];if("add"===n.type||"put"===n.type)for(var s=new ai,a=n.values.length-1;a>=0;--a){var d=n.values[a],f=h(d);if(!s.hasKey(f)){var p=u(d);(l&&o(p)?p.some(function(t){return Vi(t,c)}):Vi(p,c))&&(s.addKey(f),r.push(d))}}switch(n.type){case"add":var g=(new ai).addKeys(e.values?t.map(function(t){return h(t)}):t);i=t.concat(e.values?r.filter(function(t){var e=h(t);return!g.hasKey(e)&&(g.addKey(e),!0)}):r.map(function(t){return h(t)}).filter(function(t){return!g.hasKey(t)&&(g.addKey(t),!0)}));break;case"put":var m=(new ai).addKeys(n.values.map(function(t){return h(t)}));i=t.filter(function(t){return!m.hasKey(e.values?h(t):t)}).concat(e.values?r:r.map(function(t){return h(t)}));break;case"delete":var b=(new ai).addKeys(n.keys);i=t.filter(function(t){return!b.hasKey(e.values?h(t):t)});break;case"deleteRange":var y=n.range;i=t.filter(function(t){return!Vi(h(t),y)})}return i},t);return f===t?t:(f.sort(function(t,e){return Oe(d(t),d(e))||Oe(h(t),h(e))}),e.limit&&e.limit<1/0&&(f.length>e.limit?f.length=e.limit:t.length===e.limit&&f.length<e.limit&&(r.dirty=!0)),s?Object.freeze(f):f)}function Hi(t,e){return 0===Oe(t.lower,e.lower)&&0===Oe(t.upper,e.upper)&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function Ki(t,e,n,i){if(void 0===t)return void 0!==e?-1:0;if(void 0===e)return 1;var r=Oe(t,e);if(0===r){if(n&&i)return 0;if(n)return 1;if(i)return-1}return r}function qi(t,e,n,i){if(void 0===t)return void 0!==e?1:0;if(void 0===e)return-1;var r=Oe(t,e);if(0===r){if(n&&i)return 0;if(n)return-1;if(i)return 1}return r}function Ui(t,e){return Ki(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&qi(t.upper,e.upper,t.upperOpen,e.upperOpen)>=0}function Yi(t,e,n,i){var r=mi["idb://".concat(t,"/").concat(e)];if(!r)return[];var s=r.queries[n];if(!s)return[null,!1,r,null];var o=s[(i.query?i.query.index.name:null)||""];if(!o)return[null,!1,r,null];switch(n){case"query":var a=o.find(function(t){return t.req.limit===i.limit&&t.req.values===i.values&&Hi(t.req.query.range,i.query.range)});return a?[a,!0,r,o]:[o.find(function(t){return("limit"in t.req?t.req.limit:1/0)>=i.limit&&(!i.values||t.req.values)&&Ui(t.req.query.range,i.query.range)}),!1,r,o];case"count":var l=o.find(function(t){return Hi(t.req.query.range,i.query.range)});return[l,!!l,r,o]}}function Xi(t,e,n,i){t.subscribers.add(n),i.addEventListener("abort",function(){t.subscribers.delete(n),0===t.subscribers.size&&Gi(t,e)})}function Gi(t,e){setTimeout(function(){0===t.subscribers.size&&N(e,t)},3e3)}var Ji={stack:"dbcore",level:0,name:"Cache",create:function(t){var e=t.schema.name,i=n(n({},t),{transaction:function(n,i,r){var s=t.transaction(n,i,r);if("readwrite"===i){var o=new AbortController,a=o.signal,l=function(r){return function(){if(o.abort(),"readwrite"===i){for(var a=new Set,l=0,c=n;l<c.length;l++){var h=c[l],u=mi["idb://".concat(e,"/").concat(h)];if(u){var d=t.table(h),f=u.optimisticOps.filter(function(t){return t.trans===s});if(s._explicit&&r&&s.mutatedParts)for(var p=0,g=Object.values(u.queries.query);p<g.length;p++)for(var m=0,b=(v=g[p]).slice();m<b.length;m++)gi((_=b[m]).obsSet,s.mutatedParts)&&(N(v,_),_.subscribers.forEach(function(t){return a.add(t)}));else if(f.length>0){u.optimisticOps=u.optimisticOps.filter(function(t){return t.trans!==s});for(var y=0,x=Object.values(u.queries.query);y<x.length;y++)for(var v,w=0,k=(v=x[y]).slice();w<k.length;w++){var _;if(null!=(_=k[w]).res&&s.mutatedParts)if(r&&!_.dirty){var M=Object.isFrozen(_.res),C=Wi(_.res,_.req,f,d,_,M);_.dirty?(N(v,_),_.subscribers.forEach(function(t){return a.add(t)})):C!==_.res&&(_.res=C,_.promise=Bt.resolve({result:C}))}else _.dirty&&N(v,_),_.subscribers.forEach(function(t){return a.add(t)})}}}}a.forEach(function(t){return t()})}}};s.addEventListener("abort",l(!1),{signal:a}),s.addEventListener("error",l(!1),{signal:a}),s.addEventListener("complete",l(!0),{signal:a})}return s},table:function(i){var r=t.table(i),s=r.schema.primaryKey,o=n(n({},r),{mutate:function(t){var o=Et.trans;if(s.outbound||"disabled"===o.db._options.cache||o.explicit||"readwrite"!==o.idbtrans.mode)return r.mutate(t);var a=mi["idb://".concat(e,"/").concat(i)];if(!a)return r.mutate(t);var l=r.mutate(t);return"add"!==t.type&&"put"!==t.type||!(t.values.length>=50||Oi(s,t).some(function(t){return null==t}))?(a.optimisticOps.push(t),t.mutatedParts&&xi(t.mutatedParts),l.then(function(e){if(e.numFailures>0){N(a.optimisticOps,t);var n=zi(a,t,e);n&&a.optimisticOps.push(n),t.mutatedParts&&xi(t.mutatedParts)}}),l.catch(function(){N(a.optimisticOps,t),t.mutatedParts&&xi(t.mutatedParts)})):l.then(function(e){var i=n(n({},t),{values:t.values.map(function(t,i){var r;if(e.failures[i])return t;var o=(null===(r=s.keyPath)||void 0===r?void 0:r.includes("."))?R(t):n({},t);return M(o,s.keyPath,e.results[i]),o})}),r=zi(a,i,e);a.optimisticOps.push(r),queueMicrotask(function(){return t.mutatedParts&&xi(t.mutatedParts)})}),l},query:function(t){var n;if(!Bi(Et,r)||!Ii("query",t))return r.query(t);var s="immutable"===(null===(n=Et.trans)||void 0===n?void 0:n.db._options.cache),o=Et,a=o.requery,l=o.signal,c=Yi(e,i,"query",t),h=c[0],u=c[1],d=c[2],f=c[3];if(h&&u)h.obsSet=t.obsSet;else{var p=r.query(t).then(function(t){var e=t.result;if(h&&(h.res=e),s){for(var n=0,i=e.length;n<i;++n)Object.freeze(e[n]);Object.freeze(e)}else t.result=R(e);return t}).catch(function(t){return f&&h&&N(f,h),Promise.reject(t)});h={obsSet:t.obsSet,promise:p,subscribers:new Set,type:"query",req:t,dirty:!1},f?f.push(h):(f=[h],d||(d=mi["idb://".concat(e,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),d.queries.query[t.query.index.name||""]=f)}return Xi(h,f,a,l),h.promise.then(function(e){return{result:Wi(e.result,t,null==d?void 0:d.optimisticOps,r,h,s)}})}});return o}});return i}};function Qi(t,e){return new Proxy(t,{get:function(t,n,i){return"db"===n?e:Reflect.get(t,n,i)}})}var Zi,tr=function(){function t(e,i){var r=this;this._middlewares={},this.verno=0;var s=t.dependencies;this._options=i=n({addons:t.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var o=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:it,dbReadyPromise:null,cancelOpen:it,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};a.dbReadyPromise=new Bt(function(t){a.dbReadyResolve=t}),a.openCanceller=new Bt(function(t,e){a.cancelOpen=e}),this._state=a,this.name=e,this.on=ze(this,"populate","blocked","versionchange","close",{ready:[ut,it]}),this.once=function(t,e){var n=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];r.on(t).unsubscribe(n),e.apply(r,i)};return r.on(t,n)},this.on.ready.subscribe=x(this.on.ready.subscribe,function(e){return function(n,i){t.vip(function(){var t=r._state;if(t.openComplete)t.dbOpenError||Bt.resolve().then(n),i&&e(n);else if(t.onReadyBeingFired)t.onReadyBeingFired.push(n),i&&e(n);else{e(n);var s=r;i||e(function t(){s.on.ready.unsubscribe(n),s.on.ready.unsubscribe(t)})}})}}),this.Collection=Qe(this),this.Table=$e(this),this.Transaction=yn(this),this.Version=Qn(this),this.WhereClause=un(this),this.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))}),this._maxKey=_n(i.IDBKeyRange),this._createTransaction=function(t,e,n,i){return new r.Transaction(t,e,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(t){r.on("blocked").fire(t),ke.filter(function(t){return t.name===r.name&&t!==r&&!t._state.vcFired}).map(function(e){return e.on("versionchange").fire(t)})},this.use(Ri),this.use(Ji),this.use(ji),this.use(Pi),this.use(Ei);var l=new Proxy(this,{get:function(t,e,n){if("_vip"===e)return!0;if("table"===e)return function(t){return Qi(r.table(t),l)};var i=Reflect.get(t,e,n);return i instanceof Fe?Qi(i,l):"tables"===e?i.map(function(t){return Qi(t,l)}):"_createTransaction"===e?function(){return Qi(i.apply(this,arguments),l)}:i}});this.vip=l,o.forEach(function(t){return t(r)})}return t.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Z.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter(function(e){return e._cfg.version===t})[0];return n||(n=new this.Version(t),e.push(n),e.sort(Bn),n.stores({}),this._state.autoSchema=!1,n)},t.prototype._whenReady=function(t){var e=this;return this.idbdb&&(this._state.openComplete||Et.letThrough||this._vip)?t():new Bt(function(t,n){if(e._state.openComplete)return n(new Z.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return void n(new Z.DatabaseClosed);e.open().catch(it)}e._state.dbReadyPromise.then(t,n)}).then(t)},t.prototype.use=function(t){var e=t.stack,n=t.create,i=t.level,r=t.name;r&&this.unuse({stack:e,name:r});var s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:null==i?10:i,name:r}),s.sort(function(t,e){return t.level-e.level}),this},t.prototype.unuse=function(t){var e=t.stack,n=t.name,i=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(function(t){return i?t.create!==i:!!n&&t.name!==n})),this},t.prototype.open=function(){var t=this;return de(Ot,function(){return ki(t)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,e=ke.indexOf(this);if(e>=0&&ke.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new Bt(function(e){t.dbReadyResolve=e}),t.openCanceller=new Bt(function(e,n){t.cancelOpen=n}))},t.prototype.close=function(t){var e=(void 0===t?{disableAutoOpen:!0}:t).disableAutoOpen,n=this._state;e?(n.isBeingOpened&&n.cancelOpen(new Z.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new Z.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},t.prototype.delete=function(t){var e=this;void 0===t&&(t={disableAutoOpen:!0});var n=arguments.length>0&&"object"!=typeof arguments[0],i=this._state;return new Bt(function(r,s){var o=function(){e.close(t);var n=e._deps.indexedDB.deleteDatabase(e.name);n.onsuccess=Jt(function(){ii(e._deps,e.name),r()}),n.onerror=dn(s),n.onblocked=e._fireOnBlocked};if(n)throw new Z.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(o):o()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return null!==this.idbdb},t.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var t=this;return s(this._allTables).map(function(e){return t._allTables[e]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var t=Mi.apply(this,arguments);return this._transaction.apply(this,t)},t.prototype._transaction=function(t,e,n){var i=this,r=Et.trans;r&&r.db===this&&-1===t.indexOf("!")||(r=null);var s,o,a=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(o=e.map(function(t){var e=t instanceof i.Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==t||t===Me)s=Me;else{if("rw"!=t&&t!=Ce)throw new Z.InvalidArgument("Invalid transaction mode: "+t);s=Ce}if(r){if(r.mode===Me&&s===Ce){if(!a)throw new Z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach(function(t){if(r&&-1===r.storeNames.indexOf(t)){if(!a)throw new Z.SubTransaction("Table "+t+" not included in parent transaction.");r=null}}),a&&r&&!r.active&&(r=null)}}catch(t){return r?r._promise(null,function(e,n){n(t)}):ge(t)}var l=Ci.bind(null,this,s,o,r,n);return r?r._promise(s,l,"lock"):Et.trans?de(Et.transless,function(){return i._whenReady(l)}):this._whenReady(l)},t.prototype.table=function(t){if(!h(this._allTables,t))throw new Z.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},t}(),er="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",nr=function(){function t(t){this._subscribe=t}return t.prototype.subscribe=function(t,e,n){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:n})},t.prototype[er]=function(){return this},t}();try{Zi={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(t){Zi={indexedDB:null,IDBKeyRange:null}}function ir(t){var e,n=!1,i=new nr(function(i){var r=W(t);function s(e){var n=Ht();try{r&&se();var i=re(t,e);return r&&(i=i.finally(oe)),i}finally{n&&Kt()}}var o,a=!1,l={},c={},h={get closed(){return a},unsubscribe:function(){a||(a=!0,o&&o.abort(),u&&mn.storagemutated.unsubscribe(p))}};i.start&&i.start(h);var u=!1,d=function(){return pe(g)};function f(){return gi(c,l)}var p=function(t){pi(l,t),f()&&d()},g=function(){if(!a&&Zi.indexedDB){l={};var r={};o&&o.abort(),o=new AbortController;var h={subscr:r,signal:o.signal,requery:d,querier:t,trans:null},f=s(h);Promise.resolve(f).then(function(t){n=!0,e=t,a||h.signal.aborted||(l={},T(c=r)||u||(mn(pn,p),u=!0),pe(function(){return!a&&i.next&&i.next(t)}))},function(t){n=!1,["DatabaseClosedError","AbortError"].includes(null==t?void 0:t.name)||a||pe(function(){a||i.error&&i.error(t)})})}};return setTimeout(d,0),h});return i.hasValue=function(){return n},i.getValue=function(){return e},i}var rr=tr;function sr(t){var e=ar;try{ar=!0,mn.storagemutated.fire(t),vi(t,!0)}finally{ar=e}}u(rr,n(n({},nt),{delete:function(t){return new rr(t,{addons:[]}).delete()},exists:function(t){return new rr(t,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return ei(rr.dependencies).then(t)}catch(t){return ge(new Z.MissingAPI)}},defineClass:function(){function t(t){a(this,t)}return t},ignoreTransaction:function(t){return Et.trans?de(Et.transless,t):t()},vip:ri,async:function(t){return function(){try{var e=_i(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Bt.resolve(e)}catch(t){return ge(t)}}},spawn:function(t,e,n){try{var i=_i(t.apply(n,e||[]));return i&&"function"==typeof i.then?i:Bt.resolve(i)}catch(t){return ge(t)}},currentTransaction:{get:function(){return Et.trans||null}},waitFor:function(t,e){var n=Bt.resolve("function"==typeof t?rr.ignoreTransaction(t):t).timeout(e||6e4);return Et.trans?Et.trans.waitFor(n):n},Promise:Bt,debug:{get:function(){return dt},set:function(t){ft(t)}},derive:p,extend:a,props:u,override:x,Events:ze,on:mn,liveQuery:ir,extendObservabilitySet:pi,getByKeyPath:_,setByKeyPath:M,delByKeyPath:C,shallowClone:S,deepClone:R,getObjectDiff:Di,cmp:Oe,asap:w,minKey:xe,addons:[],connections:ke,errnames:J,dependencies:Zi,cache:mi,semVer:be,version:be.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,2*n)})})),rr.maxKey=_n(rr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(mn(pn,function(t){var e;ar||(e=new CustomEvent(gn,{detail:t}),ar=!0,dispatchEvent(e),ar=!1)}),addEventListener(gn,function(t){var e=t.detail;ar||sr(e)}));var or,ar=!1,lr=function(){};function cr(t){return new Ie({add:t})}function hr(t){return new Ie({remove:t})}function ur(t,e){return new Ie({replacePrefix:[t,e]})}return"undefined"!=typeof BroadcastChannel&&((lr=function(){(or=new BroadcastChannel(gn)).onmessage=function(t){return t.data&&sr(t.data)}})(),"function"==typeof or.unref&&or.unref(),mn(pn,function(t){ar||or.postMessage(t)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(t){if(!tr.disableBfCache&&t.persisted){dt&&console.debug("Dexie: handling persisted pagehide"),null==or||or.close();for(var e=0,n=ke;e<n.length;e++)n[e].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!tr.disableBfCache&&t.persisted&&(dt&&console.debug("Dexie: handling persisted pageshow"),lr(),sr({all:new ai(-1/0,[[]])}))})),Bt.rejectionMapper=et,ft(dt),n(tr,Object.freeze({__proto__:null,Dexie:tr,liveQuery:ir,Entity:De,cmp:Oe,PropModification:Ie,replacePrefix:ur,add:cr,remove:hr,default:tr,RangeSet:ai,mergeRanges:ci,rangesOverlap:hi}),{default:tr}),tr}();var Ec=Dc(Oc.exports);const Tc=Symbol.for("Dexie"),Lc=globalThis[Tc]||(globalThis[Tc]=Ec);if(Ec.semVer!==Lc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ec.semVer} and ${Lc.semVer}`);const Rc=new Lc("BookmarkInsightsDB");Rc.version(1).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}),Rc.version(2).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}).upgrade(t=>{console.log("Upgrading database to version 2 - adding rawMetadata support")}),Rc.version(3).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 3 - adding similarities and computedMetrics tables")});const Bc={enrichmentEnabled:!0,enrichmentSchedule:"manual",enrichmentBatchSize:20,enrichmentConcurrency:3,enrichmentRateLimit:1e3,enrichmentFreshnessDays:30,autoCategorizationEnabled:!0,deadLinkCheckEnabled:!0,privacyMode:!1,trackBrowsingBehavior:!1};async function Ic(){try{return await Rc.bookmarks.toArray()}catch(t){return console.error("Error getting bookmarks:",t),[]}}async function jc(){try{const t=await Rc.bookmarks.toArray(),e={};return t.forEach(t=>{t.domain&&(e[t.domain]=(e[t.domain]||0)+1)}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,10)}catch(t){return console.error("Error getting domain stats:",t),[]}}async function Fc(){try{const t=await Rc.bookmarks.toArray(),e={};return t.forEach(t=>{const n=new Date(t.dateAdded),i=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;e[i]=(e[i]||0)+1}),Object.entries(e).sort()}catch(t){return console.error("Error getting activity timeline:",t),[]}}const zc={domainStats:36e5,activityTimeline:216e5,wordFrequency:864e5,ageDistribution:216e5,categoryTrends:864e5,expertiseAreas:864e5,quickStats:3e5,duplicates:864e5,similarities:864e5,insightsSummary:3e5};async function Nc(t,e,n){try{const i=await Rc.computedMetrics.get(t);if(i&&i.validUntil>Date.now())return console.log(`Cache hit for metric: ${t}`),i.data;console.log(`Cache miss for metric: ${t}, computing...`);const r=await e();return await Rc.computedMetrics.put({key:t,data:r,computedAt:Date.now(),validUntil:Date.now()+n}),r}catch(n){return console.error(`Error getting cached metric ${t}:`,n),e()}}async function $c(){return Nc("domainAnalytics",async()=>{const t=await Ic(),e={};t.forEach(t=>{if(!t.domain)return;e[t.domain]||(e[t.domain]={domain:t.domain,count:0,latestDate:0,oldestDate:1/0,enrichedCount:0});const n=e[t.domain];n.count++,t.lastChecked&&n.enrichedCount++,t.dateAdded>n.latestDate&&(n.latestDate=t.dateAdded),t.dateAdded<n.oldestDate&&(n.oldestDate=t.dateAdded)});const n=Object.values(e),i=t.length;return n.forEach(t=>{t.percentage=i>0?Math.round(t.count/i*100):0,t.dateAdded=t.latestDate}),{byRecency:[...n].sort((t,e)=>e.latestDate-t.latestDate),byCount:[...n].sort((t,e)=>e.count-t.count),top10:[...n].sort((t,e)=>e.count-t.count).slice(0,10),totalDomains:n.length,totalBookmarks:i}},zc.domainStats)}async function Vc(){return Nc("ageDistribution",async()=>{const t=await Ic(),e=Date.now(),n={"Last 24 hours":0,"Last week":0,"Last month":0,"Last 3 months":0,"Last 6 months":0,"Last year":0,"Over 1 year":0},i=864e5,r=7*i,s=30*i;return t.forEach(t=>{const o=e-t.dateAdded;o<=i?n["Last 24 hours"]++:o<=r?n["Last week"]++:o<=s?n["Last month"]++:o<=3*s?n["Last 3 months"]++:o<=6*s?n["Last 6 months"]++:o<=365*i?n["Last year"]++:n["Over 1 year"]++}),Object.entries(n)},zc.ageDistribution)}async function Wc(){return Nc("creationPatterns",async()=>{const t=await Ic(),e=new Array(24).fill(0),n=new Array(7).fill(0),i=new Array(12).fill(0),r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t.forEach(t=>{const r=new Date(t.dateAdded);e[r.getHours()]++,n[r.getDay()]++,i[r.getMonth()]++}),{hourly:e.map((t,e)=>[`${e}:00`,t]),daily:n.map((t,e)=>[r[e],t]),monthly:i.map((t,e)=>[s[e],t])}},zc.ageDistribution)}async function Hc(){return Nc("wordFrequency",async()=>{const t=await Ic(),e={},n=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","about","from","up","out"]);return t.forEach(t=>{if(t.title){t.title.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>2&&!n.has(t)).forEach(t=>{e[t]=(e[t]||0)+1})}}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,20)},zc.wordFrequency)}async function Kc(){return Nc("duplicates",async()=>{const t=await Ic(),e={};return t.forEach(t=>{const n=t.url.toLowerCase().replace(/\/$/,"");e[n]||(e[n]=[]),e[n].push(t)}),Object.values(e).filter(t=>t.length>1)},zc.duplicates)}async function qc(){try{const t=await Ic(),e=["http://","https://","chrome://","chrome-extension://","file://","javascript:","data:","about:","mailto:","tel:","ftp://","sftp://","ssh://"];return t.filter(t=>{const n=t.url||"";return!e.some(t=>n.startsWith(t))||""===n.trim()})}catch(t){return console.error("Error finding malformed URLs:",t),[]}}async function Uc(){return Nc("quickStats",async()=>{const t=await Ic(),e=await Kc(),n=await async function(){try{const t=await Ic(),e=["Bookmarks Bar","Other Bookmarks","Mobile Bookmarks",""];return t.filter(t=>{const n=t.folderPath||"";return e.includes(n)||!n.includes("/")})}catch(t){return console.error("Error finding uncategorized bookmarks:",t),[]}}(),i=await qc(),r=Date.now(),s=t.filter(t=>t.lastChecked).length,o=t.filter(t=>!1===t.isAlive).length,a=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{total:t.length,enriched:s,pending:t.length-s,enrichedPercentage:t.length>0?Math.round(s/t.length*100):0,duplicateGroups:e.length,uncategorized:n.length,malformed:i.length,deadLinks:o,uniqueDomains:a,addedThisWeek:t.filter(t=>r-t.dateAdded<6048e5).length,addedThisMonth:t.filter(t=>r-t.dateAdded<2592e6).length,oldestBookmark:t.reduce((t,e)=>e.dateAdded<t?e.dateAdded:t,Date.now()),newestBookmark:t.reduce((t,e)=>e.dateAdded>t?e.dateAdded:t,0)}},zc.quickStats)}async function Yc(t){try{const e=[];for(const n of t)try{await chrome.bookmarks.remove(n)}catch(t){console.error(`Error deleting bookmark ${n}:`,t),e.push({id:n,error:t.message})}return await Rc.bookmarks.bulkDelete(t),await async function(t){const e={add:["domainStats","quickStats","activityTimeline","ageDistribution","insightsSummary"],delete:["domainStats","quickStats","duplicates","similarities","insightsSummary"],update:["quickStats","insightsSummary"],enrich:["categoryTrends","expertiseAreas","insightsSummary","quickStats"],all:Object.keys(zc)}[t]||[];try{for(const t of e)await Rc.computedMetrics.delete(t);console.log(`Invalidated caches for change type: ${t}`,e)}catch(t){console.error("Error invalidating metric caches:",t)}}("delete"),{success:t.length-e.length,errors:e}}catch(t){throw console.error("Error deleting bookmarks:",t),t}}async function Xc(){try{const t=await Ic(),e={};return t.forEach(t=>{if(t.title){const n=t.title.toLowerCase();n.includes("how to")&&(e["How-to guides"]=(e["How-to guides"]||0)+1),n.includes("tutorial")&&(e.Tutorials=(e.Tutorials||0)+1),(n.includes("documentation")||n.includes("docs"))&&(e.Documentation=(e.Documentation||0)+1),(n.includes("api")||n.includes("reference"))&&(e["API/Reference"]=(e["API/Reference"]||0)+1),(n.includes("blog")||n.includes("article"))&&(e["Blog/Articles"]=(e["Blog/Articles"]||0)+1),(n.includes("github")||n.includes("repository"))&&(e["Code Repositories"]=(e["Code Repositories"]||0)+1),(n.includes("video")||n.includes("youtube"))&&(e.Videos=(e.Videos||0)+1),(n.includes("tool")||n.includes("app"))&&(e["Tools/Apps"]=(e["Tools/Apps"]||0)+1),n.length>60&&(e["Long titles (60+ chars)"]=(e["Long titles (60+ chars)"]||0)+1),n.split(" ").length<=3&&(e["Short titles (3 words)"]=(e["Short titles (3 words)"]||0)+1)}}),Object.entries(e).sort(([,t],[,e])=>e-t)}catch(t){return console.error("Error getting title patterns:",t),[]}}async function Gc(){try{const t=await Ic(),e={},n={},i={},r={};return t.forEach(t=>{try{const s=new URL(t.url);e[s.protocol]=(e[s.protocol]||0)+1;const o=s.hostname.split(".");if(o.length>1){const t=o[o.length-1];n[t]=(n[t]||0)+1}if(o.length>2){const t=o[0];"www"!==t&&(r[t]=(r[t]||0)+1)}const a=s.pathname.split("/").filter(t=>t.length>0);if(a.length>0){const t=a[0];i[t]=(i[t]||0)+1}}catch(t){}}),{protocols:Object.entries(e).sort(([,t],[,e])=>e-t),topLevelDomains:Object.entries(n).sort(([,t],[,e])=>e-t).slice(0,10),subdomains:Object.entries(r).sort(([,t],[,e])=>e-t).slice(0,10),pathPatterns:Object.entries(i).sort(([,t],[,e])=>e-t).slice(0,15)}}catch(t){return console.error("Error getting URL patterns:",t),{protocols:[],topLevelDomains:[],subdomains:[],pathPatterns:[]}}}async function Jc(){try{const t=await Ic(),e={};let n=0,i=0;t.forEach(t=>{i++;try{const i=new URL(t.url).searchParams;if(i.toString()){n++;for(const[t]of i)e[t]=(e[t]||0)+1}}catch(t){}});return{parameters:Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,15),urlsWithParams:n,totalUrls:i,percentage:i>0?Math.round(n/i*100):0}}catch(t){return console.error("Error getting URL parameter usage:",t),{parameters:[],urlsWithParams:0,totalUrls:0,percentage:0}}}async function Qc(){try{const t=await Ic(),e={};t.forEach(t=>{e[t.domain]=(e[t.domain]||0)+1});const n=Object.entries(e).sort(([,t],[,e])=>e-t),i=t.length,r=n.slice(0,10),s=n.slice(10).reduce((t,[,e])=>t+e,0),o=r.map(([t,e])=>({domain:t,count:e,percentage:Math.round(e/i*100)}));return s>0&&o.push({domain:"Others",count:s,percentage:Math.round(s/i*100)}),o}catch(t){return console.error("Error getting domain distribution:",t),[]}}async function Zc(){try{const t=await Rc.bookmarks.toArray(),e=await Rc.settings.toArray(),n=await Rc.events.orderBy("timestamp").reverse().limit(1e3).toArray(),i=await Rc.similarities.toArray(),r=t.filter(t=>t.lastChecked).length,s=t.filter(t=>t.category).length;return{version:"2.1",schemaVersion:3,createdAt:(new Date).toISOString(),metadata:{totalBookmarks:t.length,enrichedCount:r,categorizedCount:s,eventsCount:n.length,similaritiesCount:i.length},data:{bookmarks:t,settings:e,events:n,similarities:i}}}catch(t){throw console.error("Error creating backup:",t),t}}async function th(t,e={}){const{restoreBookmarks:n=!0,restoreSettings:i=!0,restoreEvents:r=!1,restoreSimilarities:s=!0,mergeMode:o=!1}=e;try{if(!t||!t.version||!t.data)throw new Error("Invalid backup format");if(!t.data.bookmarks||!Array.isArray(t.data.bookmarks))throw new Error("Backup does not contain valid bookmarks data");const e={bookmarksRestored:0,settingsRestored:0,eventsRestored:0,similaritiesRestored:0,errors:[]};if(n&&t.data.bookmarks.length>0)if(o||await Rc.bookmarks.clear(),o){const n=await Rc.bookmarks.toArray(),i=new Map(n.map(t=>[t.id,t]));for(const n of t.data.bookmarks){const t=i.get(n.id);if(t){const i=t.lastChecked||0;(n.lastChecked||0)>i&&(await Rc.bookmarks.put(n),e.bookmarksRestored++)}else await Rc.bookmarks.put(n),e.bookmarksRestored++}}else await Rc.bookmarks.bulkPut(t.data.bookmarks),e.bookmarksRestored=t.data.bookmarks.length;return i&&t.data.settings&&t.data.settings.length>0&&(o||await Rc.settings.clear(),await Rc.settings.bulkPut(t.data.settings),e.settingsRestored=t.data.settings.length),r&&t.data.events&&t.data.events.length>0&&(o||await Rc.events.clear(),await Rc.events.bulkPut(t.data.events),e.eventsRestored=t.data.events.length),s&&t.data.similarities&&t.data.similarities.length>0&&(o||await Rc.similarities.clear(),await Rc.similarities.bulkPut(t.data.similarities),e.similaritiesRestored=t.data.similarities.length),await async function(){try{return await Rc.computedMetrics.clear(),console.log("Cleared all metric caches"),!0}catch(t){return console.error("Error clearing metric caches:",t),!1}}(),{success:!0,results:e,backupMetadata:t.metadata}}catch(t){throw console.error("Error restoring from backup:",t),t}}async function eh(){try{const t=await Zc();let e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];return e.unshift({createdAt:t.createdAt,metadata:t.metadata,data:t.data}),e.length>3&&(e=e.slice(0,3)),await chrome.storage.local.set({autoBackups:e}),console.log("Auto-backup created:",t.metadata),{success:!0,metadata:t.metadata}}catch(t){return console.error("Error creating auto-backup:",t),{success:!1,error:t.message}}}let nh=null,ih=!1;async function rh(){if(ih)return nh;console.log("Initializing FlexSearch index...");const t=await async function(t){try{const e=await Rc.cache.get(t);return e?e.ttl&&Date.now()-e.timestamp>e.ttl?(await Rc.cache.delete(t),null):e.value:null}catch(t){return console.error("Error getting cache:",t),null}}("flexsearch_index");if(t&&t.serialized)try{return nh=new Ac({document:{id:"id",index:["title","url","description","keywords","category","domain"],store:!0},tokenize:"forward",cache:!0,optimize:!0,resolution:9,context:{depth:3,bidirectional:!0}}),nh.import(t.serialized),ih=!0,console.log("Loaded FlexSearch index from cache"),nh}catch(t){console.error("Error loading cached index:",t)}return await async function(){console.log("Building FlexSearch index..."),nh=new Ac({document:{id:"id",index:["title","url","description","keywords","category","domain"],store:!0},tokenize:"forward",cache:!0,optimize:!0,resolution:9,context:{depth:3,bidirectional:!0}});const t=await Ic();for(const e of t)await sh(e);ih=!0;try{const e=await nh.export();await async function(t,e,n=null){try{return await Rc.cache.put({key:t,value:e,timestamp:Date.now(),ttl:n}),!0}catch(t){return console.error("Error setting cache:",t),!1}}("flexsearch_index",{serialized:e,timestamp:Date.now()}),console.log(`Indexed ${t.length} bookmarks`)}catch(t){console.error("Error caching index:",t)}return nh}(),nh}async function sh(t){nh||await rh();const e={id:t.id,title:t.title||"",url:t.url||"",description:t.description||"",keywords:Array.isArray(t.keywords)?t.keywords.join(" "):"",category:t.category||"",domain:t.domain||""};await nh.add(e)}function oh(t,e,n){const i=t.slice();return i[19]=e[n],i[21]=n,i}function ah(e){let n,i,r;return{c(){n=f("button"),n.innerHTML='<svg class="h-5 w-5 text-gray-400 hover:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',x(n,"class","absolute inset-y-0 right-0 pr-3 flex items-center"),x(n,"type","button")},m(t,s){h(t,n,s),i||(r=y(n,"click",e[9]),i=!0)},p:t,d(t){t&&u(n),i=!1,r()}}}function lh(t){let e,n=Y(t[2]),i=[];for(let e=0;e<n.length;e+=1)i[e]=ch(oh(t,n,e));return{c(){e=f("div");for(let t=0;t<i.length;t+=1)i[t].c();x(e,"class","absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-auto")},m(t,n){h(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null)},p(t,r){if(148&r){let s;for(n=Y(t[2]),s=0;s<n.length;s+=1){const o=oh(t,n,s);i[s]?i[s].p(o,r):(i[s]=ch(o),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(t){t&&u(e),d(i,t)}}}function ch(t){let e,n,i,r,s,o,a,l,d,b,v,k=t[19]+"";function _(){return t[15](t[19])}return{c(){e=f("button"),n=f("div"),i=p("svg"),r=p("path"),s=m(),o=f("span"),a=g(k),l=m(),x(r,"stroke-linecap","round"),x(r,"stroke-linejoin","round"),x(r,"stroke-width","2"),x(r,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"),x(i,"class","h-4 w-4 text-gray-400 mr-2"),x(i,"fill","none"),x(i,"stroke","currentColor"),x(i,"viewBox","0 0 24 24"),x(o,"class","text-sm text-gray-700"),x(n,"class","flex items-center"),x(e,"type","button"),x(e,"class",d="w-full text-left px-4 py-2 hover:bg-blue-50 focus:bg-blue-50 focus:outline-none "+(t[4]===t[21]?"bg-blue-50":""))},m(t,u){h(t,e,u),c(e,n),c(n,i),c(i,r),c(n,s),c(n,o),c(o,a),c(e,l),b||(v=y(e,"click",_),b=!0)},p(n,i){t=n,4&i&&k!==(k=t[19]+"")&&w(a,k),16&i&&d!==(d="w-full text-left px-4 py-2 hover:bg-blue-50 focus:bg-blue-50 focus:outline-none "+(t[4]===t[21]?"bg-blue-50":""))&&x(e,"class",d)},d(t){t&&u(e),b=!1,v()}}}function hh(e){let n,r,s,o,a,l,d,p,g=e[0]&&ah(e),b=e[3]&&e[2].length>0&&lh(e);return{c(){n=f("div"),r=f("div"),r.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',s=m(),o=f("input"),a=m(),g&&g.c(),l=m(),b&&b.c(),x(r,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),x(o,"type","text"),x(o,"placeholder",e[1]),x(o,"class","block w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"),x(o,"autocomplete","off"),x(n,"class","relative mb-6")},m(t,i){h(t,n,i),c(n,r),c(n,s),c(n,o),e[13](o),k(o,e[0]),c(n,a),g&&g.m(n,null),c(n,l),b&&b.m(n,null),d||(p=[y(o,"input",e[14]),y(o,"input",e[6]),y(o,"keydown",e[8]),y(o,"blur",e[10]),y(o,"focus",e[11])],d=!0)},p(t,[e]){2&e&&x(o,"placeholder",t[1]),1&e&&o.value!==t[0]&&k(o,t[0]),t[0]?g?g.p(t,e):(g=ah(t),g.c(),g.m(n,l)):g&&(g.d(1),g=null),t[3]&&t[2].length>0?b?b.p(t,e):(b=lh(t),b.c(),b.m(n,null)):b&&(b.d(1),b=null)},i:t,o:t,d(t){t&&u(n),e[13](null),g&&g.d(),b&&b.d(),d=!1,i(p)}}}function uh(t,e,n){const i=O();let r,s,{value:o=""}=e,{placeholder:a="Search bookmarks by title, URL, category, or keywords..."}=e,{showSuggestions:l=!0}=e,c=[],h=!1,u=-1;function d(t){n(0,o=t),n(2,c=[]),n(3,h=!1),i("search",{query:o}),s?.blur()}return t.$$set=t=>{"value"in t&&n(0,o=t.value),"placeholder"in t&&n(1,a=t.placeholder),"showSuggestions"in t&&n(12,l=t.showSuggestions)},[o,a,c,h,u,s,function(t){n(0,o=t.target.value),n(4,u=-1),l&&o.length>=2?async function(t){try{n(2,c=await async function(t,e=10){if(!t||t.length<2)return[];nh||await rh();try{const n=await nh.search(t,{index:["title","category","domain"],limit:2*e,suggest:!0,enrich:!0}),i=new Set;for(const t of n)if(t&&t.result)for(const e of t.result)e.doc&&(e.doc.title&&i.add(e.doc.title),e.doc.domain&&!e.doc.domain.includes("unknown")&&i.add(e.doc.domain),e.doc.category&&i.add(e.doc.category));return Array.from(i).slice(0,e)}catch(t){return console.error("Error getting suggestions:",t),[]}}(t,8)),n(3,h=c.length>0)}catch(t){console.error("Error getting suggestions:",t),n(2,c=[]),n(3,h=!1)}}(o):(n(2,c=[]),n(3,h=!1)),clearTimeout(r),r=setTimeout(()=>{i("search",{query:o})},300)},d,function(t){if(h&&0!==c.length)switch(t.key){case"ArrowDown":t.preventDefault(),n(4,u=Math.min(u+1,c.length-1));break;case"ArrowUp":t.preventDefault(),n(4,u=Math.max(u-1,-1));break;case"Enter":u>=0&&(t.preventDefault(),d(c[u]));break;case"Escape":n(2,c=[]),n(3,h=!1),n(4,u=-1)}},function(){n(0,o=""),n(2,c=[]),n(3,h=!1),i("search",{query:""})},function(){setTimeout(()=>{n(3,h=!1)},200)},function(){c.length>0&&o.length>=2&&n(3,h=!0)},l,function(t){T[t?"unshift":"push"](()=>{s=t,n(5,s)})},function(){o=this.value,n(0,o)},t=>d(t)]}class dh extends nt{constructor(t){super(),et(this,t,uh,hh,s,{value:0,placeholder:1,showSuggestions:12})}}function fh(t,e,n){const i=t.slice();return i[25]=e[n],i}function ph(t,e,n){const i=t.slice();return i[28]=e[n],i}function gh(t,e,n){const i=t.slice();return i[25]=e[n],i}function mh(t,e,n){const i=t.slice();return i[33]=e[n],i}function bh(t){let e,n,i,r,s,o,a,l,d=t[33]+"";function p(){return t[12](t[33])}return{c(){e=f("div"),n=f("div"),i=g("Domain: "),r=g(d),s=m(),o=f("button"),o.textContent="",x(n,"class","text-xs text-blue-800"),x(o,"class","text-blue-600 hover:text-blue-800"),x(e,"class","flex items-center justify-between p-2 bg-blue-50 rounded-md")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(n,r),c(e,s),c(e,o),a||(l=y(o,"click",p),a=!0)},p(e,n){t=e,4&n[0]&&d!==(d=t[33]+"")&&w(r,d)},d(t){t&&u(e),a=!1,l()}}}function yh(t){let e,n,i,r,s,o,a,l,d=t[25]+"";function p(){return t[13](t[25])}return{c(){e=f("div"),n=f("div"),i=g("Folder: "),r=g(d),s=m(),o=f("button"),o.textContent="",x(n,"class","text-xs text-green-800"),x(o,"class","text-green-600 hover:text-green-800"),x(e,"class","flex items-center justify-between p-2 bg-green-50 rounded-md")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(n,r),c(e,s),c(e,o),a||(l=y(o,"click",p),a=!0)},p(e,n){t=e,4&n[0]&&d!==(d=t[25]+"")&&w(r,d)},d(t){t&&u(e),a=!1,l()}}}function xh(t){let e,n,i,r,s,o,a,l="week"===t[2].dateRange.period?"This Week":"month"===t[2].dateRange.period?"This Month":"This Year";return{c(){e=f("div"),n=f("div"),i=g(l),r=m(),s=f("button"),s.textContent="",x(n,"class","text-xs text-purple-800"),x(s,"class","text-purple-600 hover:text-purple-800"),x(e,"class","flex items-center justify-between p-2 bg-purple-50 rounded-md")},m(l,u){h(l,e,u),c(e,n),c(n,i),c(e,r),c(e,s),o||(a=y(s,"click",t[14]),o=!0)},p(t,e){4&e[0]&&l!==(l="week"===t[2].dateRange.period?"This Week":"month"===t[2].dateRange.period?"This Month":"This Year")&&w(i,l)},d(t){t&&u(e),o=!1,a()}}}function vh(t){let e,n,i=Sh(t[28].dateAdded||t[28].latestDate)+"";return{c(){e=f("span"),n=g(i)},m(t,i){h(t,e,i),c(e,n)},p(t,e){8&e[0]&&i!==(i=Sh(t[28].dateAdded||t[28].latestDate)+"")&&w(n,i)},d(t){t&&u(e)}}}function wh(t){let e,n,i,r,s,o,a,l,d,p,b,v,k,_=t[28].domain+"",M=t[28].count+"",S=1!==t[28].count?"s":"",A="recency"===t[0]&&vh(t);function P(){return t[20](t[28])}return{c(){e=f("button"),n=f("div"),i=g(_),r=m(),s=f("div"),o=f("span"),a=g(M),l=g(" bookmark"),d=g(S),p=m(),A&&A.c(),x(n,"class","truncate font-medium"),x(s,"class","flex justify-between items-center text-xs text-gray-500 mt-1"),x(e,"class","w-full text-left px-2 py-2 text-sm hover:bg-gray-100 rounded border"),x(e,"title",b=t[28].domain),C(e,"bg-blue-50",t[2].domains.includes(t[28].domain)),C(e,"text-blue-700",t[2].domains.includes(t[28].domain)),C(e,"border-blue-200",t[2].domains.includes(t[28].domain)),C(e,"text-gray-600",!t[2].domains.includes(t[28].domain)),C(e,"border-transparent",!t[2].domains.includes(t[28].domain))},m(t,u){h(t,e,u),c(e,n),c(n,i),c(e,r),c(e,s),c(s,o),c(o,a),c(o,l),c(o,d),c(s,p),A&&A.m(s,null),v||(k=y(e,"click",P),v=!0)},p(n,r){t=n,8&r[0]&&_!==(_=t[28].domain+"")&&w(i,_),8&r[0]&&M!==(M=t[28].count+"")&&w(a,M),8&r[0]&&S!==(S=1!==t[28].count?"s":"")&&w(d,S),"recency"===t[0]?A?A.p(t,r):(A=vh(t),A.c(),A.m(s,null)):A&&(A.d(1),A=null),8&r[0]&&b!==(b=t[28].domain)&&x(e,"title",b),12&r[0]&&C(e,"bg-blue-50",t[2].domains.includes(t[28].domain)),12&r[0]&&C(e,"text-blue-700",t[2].domains.includes(t[28].domain)),12&r[0]&&C(e,"border-blue-200",t[2].domains.includes(t[28].domain)),12&r[0]&&C(e,"text-gray-600",!t[2].domains.includes(t[28].domain)),12&r[0]&&C(e,"border-transparent",!t[2].domains.includes(t[28].domain))},d(t){t&&u(e),A&&A.d(),v=!1,k()}}}function kh(t){let e,n,i,r,s=t[3].length-30+"";return{c(){e=f("div"),n=g("... and "),i=g(s),r=g(" more"),x(e,"class","text-xs text-gray-400 px-2 py-1")},m(t,s){h(t,e,s),c(e,n),c(e,i),c(e,r)},p(t,e){8&e[0]&&s!==(s=t[3].length-30+"")&&w(i,s)},d(t){t&&u(e)}}}function _h(t){let e,n,i,r,s,o,a,l=t[25]+"";function d(){return t[21](t[25])}return{c(){e=f("button"),n=f("span"),i=g(" "),r=g(l),x(n,"class","truncate"),x(e,"class","w-full text-left px-2 py-1 text-sm hover:bg-gray-100 rounded border"),x(e,"title",s=t[25]),C(e,"bg-green-50",t[2].folders.includes(t[25])),C(e,"text-green-700",t[2].folders.includes(t[25])),C(e,"border-green-200",t[2].folders.includes(t[25])),C(e,"text-gray-600",!t[2].folders.includes(t[25])),C(e,"border-transparent",!t[2].folders.includes(t[25]))},m(t,s){h(t,e,s),c(e,n),c(n,i),c(n,r),o||(a=y(e,"click",d),o=!0)},p(n,i){t=n,2&i[0]&&l!==(l=t[25]+"")&&w(r,l),2&i[0]&&s!==(s=t[25])&&x(e,"title",s),6&i[0]&&C(e,"bg-green-50",t[2].folders.includes(t[25])),6&i[0]&&C(e,"text-green-700",t[2].folders.includes(t[25])),6&i[0]&&C(e,"border-green-200",t[2].folders.includes(t[25])),6&i[0]&&C(e,"text-gray-600",!t[2].folders.includes(t[25])),6&i[0]&&C(e,"border-transparent",!t[2].folders.includes(t[25]))},d(t){t&&u(e),o=!1,a()}}}function Mh(t){let e,n,i,r,s=t[1].length-15+"";return{c(){e=f("div"),n=g("... and "),i=g(s),r=g(" more"),x(e,"class","text-xs text-gray-400 px-2 py-1")},m(t,s){h(t,e,s),c(e,n),c(e,i),c(e,r)},p(t,e){2&e[0]&&s!==(s=t[1].length-15+"")&&w(i,s)},d(t){t&&u(e)}}}function Ch(e){let n,r,s,o,a,l,p,b,v,k,_,M,S,A,P,D,O,E,T,L,R,B,I,j,F,z,N,$,V,W,H,K,q,U,X,G,J,Q,Z,tt,et,nt,it=e[8](),rt=e[8](),st=e[3].length+"",ot=e[1].length+"",at=it&&function(e){let n,i,r;return{c(){n=f("button"),n.textContent="Clear All",x(n,"class","text-xs text-blue-600 hover:text-blue-800")},m(t,s){h(t,n,s),i||(r=y(n,"click",e[6]),i=!0)},p:t,d(t){t&&u(n),i=!1,r()}}}(e),lt=rt&&function(t){let e,n,i,r=Y(t[2].domains),s=[];for(let e=0;e<r.length;e+=1)s[e]=bh(mh(t,r,e));let o=Y(t[2].folders),a=[];for(let e=0;e<o.length;e+=1)a[e]=yh(gh(t,o,e));let l=t[2].dateRange&&xh(t);return{c(){e=f("div");for(let t=0;t<s.length;t+=1)s[t].c();n=m();for(let t=0;t<a.length;t+=1)a[t].c();i=m(),l&&l.c(),x(e,"class","mb-4 space-y-2")},m(t,r){h(t,e,r);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);c(e,n);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,null);c(e,i),l&&l.m(e,null)},p(t,c){if(20&c[0]){let i;for(r=Y(t[2].domains),i=0;i<r.length;i+=1){const o=mh(t,r,i);s[i]?s[i].p(o,c):(s[i]=bh(o),s[i].c(),s[i].m(e,n))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}if(36&c[0]){let n;for(o=Y(t[2].folders),n=0;n<o.length;n+=1){const r=gh(t,o,n);a[n]?a[n].p(r,c):(a[n]=yh(r),a[n].c(),a[n].m(e,i))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}t[2].dateRange?l?l.p(t,c):(l=xh(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(t){t&&u(e),d(s,t),d(a,t),l&&l.d()}}}(e),ct=Y(e[3].slice(0,30)),ht=[];for(let t=0;t<ct.length;t+=1)ht[t]=wh(ph(e,ct,t));let ut=e[3].length>30&&kh(e),dt=Y(e[1].slice(0,15)),ft=[];for(let t=0;t<dt.length;t+=1)ft[t]=_h(fh(e,dt,t));let pt=e[1].length>15&&Mh(e);return{c(){n=f("div"),r=f("div"),s=f("div"),o=f("h3"),o.textContent="Filters",a=m(),at&&at.c(),l=m(),lt&&lt.c(),p=m(),b=f("div"),v=f("h4"),v.textContent="Date Added",k=m(),_=f("div"),M=f("button"),M.textContent="This Week",S=m(),A=f("button"),A.textContent="This Month",P=m(),D=f("button"),D.textContent="This Year",O=m(),E=f("div"),T=f("div"),L=f("h4"),R=g("Domains ("),B=g(st),I=g(")"),j=m(),F=f("div"),z=f("button"),z.textContent="Recent",N=m(),$=f("button"),$.textContent="Count",V=m(),W=f("div");for(let t=0;t<ht.length;t+=1)ht[t].c();H=m(),ut&&ut.c(),K=m(),q=f("div"),U=f("h4"),X=g("Folders ("),G=g(ot),J=g(")"),Q=m(),Z=f("div");for(let t=0;t<ft.length;t+=1)ft[t].c();tt=m(),pt&&pt.c(),x(o,"class","text-sm font-medium text-gray-900"),x(s,"class","flex items-center justify-between mb-3"),x(r,"class","mb-6"),x(v,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),x(M,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),C(M,"bg-blue-50","week"===e[2].dateRange?.period),C(M,"text-blue-700","week"===e[2].dateRange?.period),x(A,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),C(A,"bg-blue-50","month"===e[2].dateRange?.period),C(A,"text-blue-700","month"===e[2].dateRange?.period),x(D,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),C(D,"bg-blue-50","year"===e[2].dateRange?.period),C(D,"text-blue-700","year"===e[2].dateRange?.period),x(_,"class","space-y-1"),x(b,"class","mb-6"),x(L,"class","text-xs font-medium text-gray-700 uppercase tracking-wide"),x(z,"class","text-xs px-2 py-1 rounded"),x(z,"title","Sort by most recent bookmark"),C(z,"bg-blue-100","recency"===e[0]),C(z,"text-blue-700","recency"===e[0]),C(z,"text-gray-500","recency"!==e[0]),x($,"class","text-xs px-2 py-1 rounded"),x($,"title","Sort by bookmark count"),C($,"bg-blue-100","count"===e[0]),C($,"text-blue-700","count"===e[0]),C($,"text-gray-500","count"!==e[0]),x(F,"class","flex space-x-1"),x(T,"class","flex items-center justify-between mb-2"),x(W,"class","space-y-1 max-h-64 overflow-y-auto"),x(E,"class","mb-6"),x(U,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),x(Z,"class","space-y-1 max-h-48 overflow-y-auto"),x(q,"class","mb-6"),x(n,"class","w-64 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0")},m(t,i){h(t,n,i),c(n,r),c(r,s),c(s,o),c(s,a),at&&at.m(s,null),c(r,l),lt&&lt.m(r,null),c(n,p),c(n,b),c(b,v),c(b,k),c(b,_),c(_,M),c(_,S),c(_,A),c(_,P),c(_,D),c(n,O),c(n,E),c(E,T),c(T,L),c(L,R),c(L,B),c(L,I),c(T,j),c(T,F),c(F,z),c(F,N),c(F,$),c(E,V),c(E,W);for(let t=0;t<ht.length;t+=1)ht[t]&&ht[t].m(W,null);c(W,H),ut&&ut.m(W,null),c(n,K),c(n,q),c(q,U),c(U,X),c(U,G),c(U,J),c(q,Q),c(q,Z);for(let t=0;t<ft.length;t+=1)ft[t]&&ft[t].m(Z,null);c(Z,tt),pt&&pt.m(Z,null),et||(nt=[y(M,"click",e[15]),y(A,"click",e[16]),y(D,"click",e[17]),y(z,"click",e[18]),y($,"click",e[19])],et=!0)},p(t,e){if(it&&at.p(t,e),rt&&lt.p(t,e),4&e[0]&&C(M,"bg-blue-50","week"===t[2].dateRange?.period),4&e[0]&&C(M,"text-blue-700","week"===t[2].dateRange?.period),4&e[0]&&C(A,"bg-blue-50","month"===t[2].dateRange?.period),4&e[0]&&C(A,"text-blue-700","month"===t[2].dateRange?.period),4&e[0]&&C(D,"bg-blue-50","year"===t[2].dateRange?.period),4&e[0]&&C(D,"text-blue-700","year"===t[2].dateRange?.period),8&e[0]&&st!==(st=t[3].length+"")&&w(B,st),1&e[0]&&C(z,"bg-blue-100","recency"===t[0]),1&e[0]&&C(z,"text-blue-700","recency"===t[0]),1&e[0]&&C(z,"text-gray-500","recency"!==t[0]),1&e[0]&&C($,"bg-blue-100","count"===t[0]),1&e[0]&&C($,"text-blue-700","count"===t[0]),1&e[0]&&C($,"text-gray-500","count"!==t[0]),29&e[0]){let n;for(ct=Y(t[3].slice(0,30)),n=0;n<ct.length;n+=1){const i=ph(t,ct,n);ht[n]?ht[n].p(i,e):(ht[n]=wh(i),ht[n].c(),ht[n].m(W,H))}for(;n<ht.length;n+=1)ht[n].d(1);ht.length=ct.length}if(t[3].length>30?ut?ut.p(t,e):(ut=kh(t),ut.c(),ut.m(W,null)):ut&&(ut.d(1),ut=null),2&e[0]&&ot!==(ot=t[1].length+"")&&w(G,ot),38&e[0]){let n;for(dt=Y(t[1].slice(0,15)),n=0;n<dt.length;n+=1){const i=fh(t,dt,n);ft[n]?ft[n].p(i,e):(ft[n]=_h(i),ft[n].c(),ft[n].m(Z,tt))}for(;n<ft.length;n+=1)ft[n].d(1);ft.length=dt.length}t[1].length>15?pt?pt.p(t,e):(pt=Mh(t),pt.c(),pt.m(Z,null)):pt&&(pt.d(1),pt=null)},i:t,o:t,d(t){t&&u(n),at&&at.d(),lt&&lt.d(),d(ht,t),ut&&ut.d(),d(ft,t),pt&&pt.d(),et=!1,i(nt)}}}function Sh(t){const e=Date.now()-t,n=Math.floor(e/864e5);return 0===n?"Today":1===n?"1 day ago":n<7?`${n} days ago`:n<30?`${Math.floor(n/7)} weeks ago`:n<365?`${Math.floor(n/30)} months ago`:`${Math.floor(n/365)} years ago`}function Ah(t,e,n){let i;const r=O();let s=[],o=[],a=[],l={domains:[],folders:[],dateRange:null},c="recency";function h(t){l.domains.includes(t)?n(2,l.domains=l.domains.filter(e=>e!==t),l):n(2,l.domains=[...l.domains,t],l),d()}function u(t){l.folders.includes(t)?n(2,l.folders=l.folders.filter(e=>e!==t),l):n(2,l.folders=[...l.folders,t],l),d()}function d(){r("filter",l)}function f(t){const e=new Date;let i;switch(t){case"week":i=new Date(e.getTime()-6048e5);break;case"month":i=new Date(e.getFullYear(),e.getMonth(),1);break;case"year":i=new Date(e.getFullYear(),0,1)}!function(t,e,i){n(2,l.dateRange={startDate:t,endDate:e,period:i},l),d()}(i.getTime(),e.getTime(),t)}D(async()=>{try{await async function(){n(10,s=await async function(){return(await $c()).byRecency}()),n(11,o=await async function(){return(await $c()).byCount}())}(),n(1,a=await async function(){try{const t=await Ic();return[...new Set(t.map(t=>t.folderPath).filter(t=>t))].sort()}catch(t){return console.error("Error getting unique folders:",t),[]}}())}catch(t){console.error("Error loading filters:",t)}});return t.$$.update=()=>{3073&t.$$.dirty[0]&&n(3,i="recency"===c?s:o)},[c,a,l,i,h,u,function(){n(2,l={domains:[],folders:[],dateRange:null}),d()},d,function(){return l.domains.length>0||l.folders.length>0||null!==l.dateRange},f,s,o,t=>h(t),t=>u(t),()=>{n(2,l.dateRange=null,l),d()},()=>f("week"),()=>f("month"),()=>f("year"),()=>n(0,c="recency"),()=>n(0,c="count"),t=>h(t.domain),t=>u(t)]}class Ph extends nt{constructor(t){super(),et(this,t,Ah,Ch,s,{},null,[-1,-1])}}async function Dh(){try{const t=await Rc.bookmarks.toArray(),e={};t.forEach(t=>{if(t.url)try{const n=new URL(t.url),i=n.hostname,r=n.pathname,s=i.split(".").reverse(),o=s[0],a=s[1]||"",l=s.length>2?s.slice(2).reverse().join("."):"www",c=`${a}.${o}`;e[c]||(e[c]={name:c,count:0,subdomains:{}}),e[c].count++,e[c].subdomains[l]||(e[c].subdomains[l]={name:l,count:0,paths:{}}),e[c].subdomains[l].count++;const h=r.split("/").filter(t=>t)[0]||"/";e[c].subdomains[l].paths[h]||(e[c].subdomains[l].paths[h]=0),e[c].subdomains[l].paths[h]++}catch(t){}});return Object.values(e).map(t=>({...t,subdomains:Object.values(t.subdomains).map(t=>({...t,paths:Object.entries(t.paths).map(([t,e])=>({name:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10)})).sort((t,e)=>e.count-t.count)})).sort((t,e)=>e.count-t.count)}catch(t){return console.error("Error building domain hierarchy:",t),[]}}async function Oh(){try{const t=await Rc.bookmarks.toArray(),e=Date.now(),n={"Last 7 days":0,"Last 30 days":0,"Last 90 days":0,"Last year":0,Older:0},i={"Last 7 days":6048e5,"Last 30 days":2592e6,"Last 90 days":7776e6,"Last year":31536e6};return t.forEach(t=>{const r=e-t.dateAdded;r<=i["Last 7 days"]?n["Last 7 days"]++:r<=i["Last 30 days"]?n["Last 30 days"]++:r<=i["Last 90 days"]?n["Last 90 days"]++:r<=i["Last year"]?n["Last year"]++:n.Older++}),Object.entries(n).map(([t,e])=>({period:t,count:e}))}catch(t){return console.error("Error analyzing content freshness:",t),[]}}async function Eh(){try{const t=await Rc.bookmarks.toArray(),e=await Rc.events.toArray(),n=Date.now(),i=n-6048e5,r=n-2592e6,s=t.length,o=t.filter(t=>t.category).length,a=t.filter(t=>t.description||t.keywords?.length>0).length,l=t.filter(t=>null!==t.isAlive).length,c=t.filter(t=>!1===t.isAlive).length,h=t.filter(t=>!(t.lastAccessed||t.accessCount&&0!==t.accessCount)).length,u=t.filter(t=>t.dateAdded>i).length,d=t.filter(t=>t.dateAdded>r).length,f=e.filter(t=>t.timestamp>i),p=f.filter(t=>"access"===t.type).length,g=f.filter(t=>"create"===t.type).length,m={};t.forEach(t=>{t.category&&(m[t.category]=(m[t.category]||0)+1)});const b=Object.entries(m).sort(([,t],[,e])=>e-t).slice(0,5),y=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{totalBookmarks:s,categorized:o,categorizedPercentage:s>0?(o/s*100).toFixed(1):0,enriched:a,enrichedPercentage:s>0?(a/s*100).toFixed(1):0,aliveChecked:l,deadLinks:c,neverAccessed:h,neverAccessedPercentage:s>0?(h/s*100).toFixed(1):0,addedThisWeek:u,addedThisMonth:d,accessEventsThisWeek:p,createEventsThisWeek:g,topCategories:b,uniqueDomains:y}}catch(t){return console.error("Error getting insights summary:",t),{}}}async function Th(){try{const t=await Rc.events.toArray(),e=Date.now(),n={},i={};t.forEach(t=>{n[t.type]=(n[t.type]||0)+1;const e=new Date(t.timestamp).toISOString().split("T")[0];i[e]||(i[e]={total:0,byType:{}}),i[e].total++,i[e].byType[t.type]=(i[e].byType[t.type]||0)+1});const r=[];for(let t=29;t>=0;t--){const n=new Date(e-24*t*60*60*1e3).toISOString().split("T")[0];r.push({date:n,total:i[n]?.total||0,...i[n]?.byType||{}})}return{summary:n,timeline:r,totalEvents:t.length}}catch(t){return console.error("Error getting event statistics:",t),{summary:{},timeline:[],totalEvents:0}}}const{document:Lh}=l;function Rh(t,e,n){const i=t.slice();return i[114]=e[n],i[116]=n,i}function Bh(t,e,n){const i=t.slice();return i[117]=e[n],i}function Ih(t,e,n){const i=t.slice();return i[93]=e[n],i}function jh(t,e,n){const i=t.slice();return i[122]=e[n][0],i[123]=e[n][1],i[124]=e[n][2],i[126]=n,i}function Fh(t,e,n){const i=t.slice();return i[127]=e[n],i[129]=n,i}function zh(t,e,n){const i=t.slice();return i[93]=e[n],i[116]=n,i}function Nh(t,e,n){const i=t.slice();return i[93]=e[n],i}function $h(t,e,n){const i=t.slice();return i[133]=e[n],i}function Vh(t,e,n){const i=t.slice();return i[101]=e[n][0],i[102]=e[n][1],i}function Wh(t,e,n){const i=t.slice();return i[105]=e[n],i}function Hh(t,e,n){const i=t.slice();return i[108]=e[n],i}function Kh(t,e,n){const i=t.slice();return i[111]=e[n][0],i[102]=e[n][1],i}function qh(t,e,n){const i=t.slice();return i[93]=e[n],i}function Uh(t,e,n){const i=t.slice();return i[93]=e[n],i}function Yh(t,e,n){const i=t.slice();return i[98]=e[n],i}function Xh(t){let e,n,i,r;const s=[Zh,Qh],o=[];function a(t,e){return t[1]?0:1}return n=a(t),i=o[n]=s[n](t),{c(){e=f("div"),i.c(),x(e,"class","space-y-8")},m(t,i){h(t,e,i),o[n].m(e,null),r=!0},p(t,r){let l=n;n=a(t),n===l?o[n].p(t,r):(H(),U(o[l],1,1,()=>{o[l]=null}),K(),i=o[n],i?i.p(t,r):(i=o[n]=s[n](t),i.c()),q(i,1),i.m(e,null))},i(t){r||(q(i),r=!0)},o(t){U(i),r=!1},d(t){t&&u(e),o[n].d()}}}function Gh(e){let n;function i(t,e){return t[1]?Yu:Uu}let r=i(e),s=r(e);return{c(){n=f("div"),s.c(),x(n,"class","space-y-8")},m(t,e){h(t,n,e),s.m(n,null)},p(t,e){r===(r=i(t))&&s?s.p(t,e):(s.d(1),s=r(t),s&&(s.c(),s.m(n,null)))},i:t,o:t,d(t){t&&u(n),s.d()}}}function Jh(t){let e,n,i,r,s,o,a,l,d,p,g;n=new dh({}),n.$on("search",t[40]),o=new Ph({}),o.$on("filter",t[41]);const b=[fd,dd,ud,hd],y=[];function v(t,e){return t[1]?0:t[2]?1:0===t[0].length?2:3}return d=v(t),p=y[d]=b[d](t),{c(){e=f("div"),J(n.$$.fragment),i=m(),r=f("div"),s=f("div"),J(o.$$.fragment),a=m(),l=f("div"),p.c(),x(e,"class","mb-6"),x(s,"class","flex-shrink-0"),x(l,"class","flex-1 min-w-0 overflow-hidden"),x(r,"class","flex gap-6 min-h-0")},m(t,u){h(t,e,u),Q(n,e,null),h(t,i,u),h(t,r,u),c(r,s),Q(o,s,null),c(r,a),c(r,l),y[d].m(l,null),g=!0},p(t,e){let n=d;d=v(t),d===n?y[d].p(t,e):(H(),U(y[n],1,1,()=>{y[n]=null}),K(),p=y[d],p?p.p(t,e):(p=y[d]=b[d](t),p.c()),q(p,1),p.m(l,null))},i(t){g||(q(n.$$.fragment,t),q(o.$$.fragment,t),q(p),g=!0)},o(t){U(n.$$.fragment,t),U(o.$$.fragment,t),U(p),g=!1},d(t){t&&(u(e),u(i),u(r)),Z(n),Z(o),y[d].d()}}}function Qh(t){let e,n,r,s,o,a,l,d,p,b,w,_,M,C,S,A,P,D,O,E,T,L,R,B,I,j,F,z,N,$,V,W,Y,X,G,J,Q,Z,tt,et,nt,it,rt,st,ot,at,lt,ct,ht,ut,dt,ft,pt,gt,mt,bt,yt,xt,vt,wt,kt,_t,Mt,Ct,St,At,Pt,Dt,Ot,Et,Tt,Lt,Rt,Bt,It,jt,Ft,zt,Nt,$t,Vt,Wt,Ht,Kt,qt,Ut,Yt,Xt,Gt,Jt,Qt,Zt,te,ee,ne,ie,re,se,oe,ae=t[14]&&tu(t);function le(t,e){return t[16]?nu:eu}let ce=le(t),he=ce(t),ue=t[15]&&iu(t),de=t[18]&&t[16]&&ru(t),fe=t[17]&&ou(t);function pe(t,e){return t[19].length>0?du:t[17]?void 0:uu}let ge=pe(t),me=ge&&ge(t),be=!t[13]&&pu(t);function ye(t,e){return t[13]?bu:0===t[12].length?mu:gu}let xe=ye(t),ve=xe(t),we=!t[24]&&vu(t);function ke(t,e){return t[24]?_u:0===t[9].length?ku:wu}let _e=ke(t),Me=_e(t),Ce=!t[25]&&Au(t);function Se(t,e){return t[25]?Ou:0===t[11].length?Du:Pu}let Ae=Se(t),Pe=Ae(t),De=!t[26]&&Lu(t);const Oe=[Iu,Bu,Ru],Ee=[];function Te(t,e){return t[26]?0:0===t[10].length?1:2}function Le(t,e){return t[31]?zu:Fu}Mt=Te(t),Ct=Ee[Mt]=Oe[Mt](t);let Re=Le(t),Be=Re(t),Ie=t[34]&&Nu(t);function je(t,e){return 0===t[33].length?Ku:Hu}let Fe=je(t),ze=Fe(t);return{c(){ae&&ae.c(),e=m(),n=f("div"),r=f("div"),s=f("div"),s.innerHTML='<h3 class="text-lg font-medium text-gray-900"><svg class="w-5 h-5 inline-block mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>\n                  Bookmark Enrichment</h3> <p class="text-sm text-gray-500 mt-1">Fetch metadata (descriptions, categories, keywords) for your bookmarks</p>',o=m(),a=f("button"),he.c(),l=m(),d=f("div"),ue&&ue.c(),p=m(),b=f("div"),w=f("div"),_=f("label"),M=g("Batch Size\n                    "),C=f("span"),C.textContent="(how many bookmarks to process)",S=m(),A=f("input"),P=m(),D=f("div"),O=f("label"),E=g("Concurrency\n                    "),T=f("span"),T.textContent="(parallel requests)",L=m(),R=f("input"),B=m(),I=f("p"),I.textContent="Higher = faster, but more resource intensive (recommended: 3-5)",j=m(),de&&de.c(),F=m(),fe&&fe.c(),z=m(),me&&me.c(),N=m(),$=f("div"),V=f("div"),W=f("h3"),Y=g("Dead Links "),be&&be.c(),X=m(),G=f("p"),G.textContent="Bookmarks detected as unreachable during enrichment",J=m(),Q=f("div"),ve.c(),Z=m(),tt=f("div"),et=f("div"),nt=f("h3"),it=g("Duplicate Bookmarks "),we&&we.c(),rt=m(),st=f("div"),Me.c(),ot=m(),at=f("div"),lt=f("div"),ct=f("h3"),ht=g("Similar Bookmarks "),Ce&&Ce.c(),ut=m(),dt=f("p"),dt.textContent="Bookmarks with similar titles but different URLs",ft=m(),pt=f("div"),Pe.c(),gt=m(),mt=f("div"),bt=f("div"),yt=f("h3"),xt=g("Invalid URLs "),De&&De.c(),vt=m(),wt=f("p"),wt.textContent="Bookmarks with unrecognized URL schemes",kt=m(),_t=f("div"),Ct.c(),St=m(),At=f("div"),Pt=f("div"),Pt.innerHTML='<h3 class="text-lg font-medium text-gray-900"><svg class="w-5 h-5 inline-block mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg>\n                Backup &amp; Restore</h3> <p class="text-sm text-gray-500 mt-1">Protect your enrichment data - backup regularly!</p>',Dt=m(),Ot=f("div"),Et=f("div"),Tt=f("div"),Lt=f("h4"),Lt.textContent="Create Backup",Rt=m(),Bt=f("p"),Bt.textContent="Download a complete backup of your bookmarks including all enrichment data, categories, and metadata.",It=m(),jt=f("button"),Be.c(),Ft=m(),zt=f("div"),Nt=f("h4"),Nt.textContent="Restore Backup",$t=m(),Vt=f("p"),Vt.textContent="Restore from a backup file. Your current data will be auto-backed up first.",Wt=m(),Ht=f("label"),Kt=f("span"),Kt.textContent="Choose backup file",qt=m(),Ut=f("input"),Yt=m(),Ie&&Ie.c(),Xt=m(),Gt=f("div"),Jt=f("div"),Qt=f("h4"),Qt.textContent="Auto-Backups",Zt=m(),te=f("button"),te.textContent="Refresh",ee=m(),ne=f("p"),ne.textContent="Auto-backups are created before restore operations and enrichment runs. Last 3 are kept.",ie=m(),ze.c(),a.disabled=t[16],x(a,"class","px-4 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex-shrink-0"),x(r,"class","px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"),x(C,"class","text-xs text-gray-500 font-normal"),x(A,"type","number"),x(A,"min","5"),x(A,"max","100"),x(A,"class","mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),A.disabled=t[16],x(_,"class","block text-sm font-medium text-gray-700 mb-1"),x(T,"class","text-xs text-gray-500 font-normal"),x(R,"type","number"),x(R,"min","1"),x(R,"max","10"),x(R,"class","mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),R.disabled=t[16],x(O,"class","block text-sm font-medium text-gray-700 mb-1"),x(I,"class","text-xs text-gray-500 mt-1"),x(b,"class","grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"),x(d,"class","p-6"),x(n,"class","bg-white rounded-lg shadow"),x(W,"class","text-lg font-medium text-gray-900"),x(G,"class","text-xs text-gray-500 mt-1"),x(V,"class","px-6 py-4 border-b border-gray-200"),x(Q,"class","p-6"),x($,"class","bg-white rounded-lg shadow"),x(nt,"class","text-lg font-medium text-gray-900"),x(et,"class","px-6 py-4 border-b border-gray-200"),x(st,"class","p-6"),x(tt,"class","bg-white rounded-lg shadow"),x(ct,"class","text-lg font-medium text-gray-900"),x(dt,"class","text-xs text-gray-500 mt-1"),x(lt,"class","px-6 py-4 border-b border-gray-200"),x(pt,"class","p-6"),x(at,"class","bg-white rounded-lg shadow"),x(yt,"class","text-lg font-medium text-gray-900"),x(wt,"class","text-xs text-gray-500 mt-1"),x(bt,"class","px-6 py-4 border-b border-gray-200"),x(_t,"class","p-6"),x(mt,"class","bg-white rounded-lg shadow"),x(Pt,"class","px-6 py-4 border-b border-gray-200"),x(Lt,"class","font-medium text-gray-900 mb-3"),x(Bt,"class","text-sm text-gray-600 mb-4"),jt.disabled=t[31],x(jt,"class","w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center justify-center"),x(Tt,"class","border border-gray-200 rounded-lg p-4"),x(Nt,"class","font-medium text-gray-900 mb-3"),x(Vt,"class","text-sm text-gray-600 mb-4"),x(Kt,"class","sr-only"),x(Ut,"type","file"),x(Ut,"accept",".json"),x(Ut,"class","block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"),x(Ht,"class","block"),x(zt,"class","border border-gray-200 rounded-lg p-4"),x(Et,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),x(Qt,"class","font-medium text-gray-900"),x(te,"class","text-sm text-blue-600 hover:text-blue-800"),x(Jt,"class","flex justify-between items-center mb-3"),x(ne,"class","text-sm text-gray-600 mb-3"),x(Gt,"class","mt-6 border-t border-gray-200 pt-6"),x(Ot,"class","p-6"),x(At,"class","bg-white rounded-lg shadow")},m(i,u){ae&&ae.m(i,u),h(i,e,u),h(i,n,u),c(n,r),c(r,s),c(r,o),c(r,a),he.m(a,null),c(n,l),c(n,d),ue&&ue.m(d,null),c(d,p),c(d,b),c(b,w),c(w,_),c(_,M),c(_,C),c(_,S),c(_,A),k(A,t[20]),c(b,P),c(b,D),c(D,O),c(O,E),c(O,T),c(O,L),c(O,R),k(R,t[21]),c(D,B),c(D,I),c(d,j),de&&de.m(d,null),c(d,F),fe&&fe.m(d,null),c(d,z),me&&me.m(d,null),h(i,N,u),h(i,$,u),c($,V),c(V,W),c(W,Y),be&&be.m(W,null),c(V,X),c(V,G),c($,J),c($,Q),ve.m(Q,null),h(i,Z,u),h(i,tt,u),c(tt,et),c(et,nt),c(nt,it),we&&we.m(nt,null),c(tt,rt),c(tt,st),Me.m(st,null),h(i,ot,u),h(i,at,u),c(at,lt),c(lt,ct),c(ct,ht),Ce&&Ce.m(ct,null),c(lt,ut),c(lt,dt),c(at,ft),c(at,pt),Pe.m(pt,null),h(i,gt,u),h(i,mt,u),c(mt,bt),c(bt,yt),c(yt,xt),De&&De.m(yt,null),c(bt,vt),c(bt,wt),c(mt,kt),c(mt,_t),Ee[Mt].m(_t,null),h(i,St,u),h(i,At,u),c(At,Pt),c(At,Dt),c(At,Ot),c(Ot,Et),c(Et,Tt),c(Tt,Lt),c(Tt,Rt),c(Tt,Bt),c(Tt,It),c(Tt,jt),Be.m(jt,null),c(Et,Ft),c(Et,zt),c(zt,Nt),c(zt,$t),c(zt,Vt),c(zt,Wt),c(zt,Ht),c(Ht,Kt),c(Ht,qt),c(Ht,Ut),c(zt,Yt),Ie&&Ie.m(zt,null),c(Ot,Xt),c(Ot,Gt),c(Gt,Jt),c(Jt,Qt),c(Jt,Zt),c(Jt,te),c(Gt,ee),c(Gt,ne),c(Gt,ie),ze.m(Gt,null),re=!0,se||(oe=[y(a,"click",t[44]),y(A,"input",t[69]),y(R,"input",t[70]),y(jt,"click",t[57]),y(Ut,"change",t[59]),y(te,"click",t[60])],se=!0)},p(t,n){t[14]?ae?ae.p(t,n):(ae=tu(t),ae.c(),ae.m(e.parentNode,e)):ae&&(ae.d(1),ae=null),ce!==(ce=le(t))&&(he.d(1),he=ce(t),he&&(he.c(),he.m(a,null))),(!re||65536&n[0])&&(a.disabled=t[16]),t[15]?ue?ue.p(t,n):(ue=iu(t),ue.c(),ue.m(d,p)):ue&&(ue.d(1),ue=null),(!re||65536&n[0])&&(A.disabled=t[16]),1048576&n[0]&&v(A.value)!==t[20]&&k(A,t[20]),(!re||65536&n[0])&&(R.disabled=t[16]),2097152&n[0]&&v(R.value)!==t[21]&&k(R,t[21]),t[18]&&t[16]?de?de.p(t,n):(de=ru(t),de.c(),de.m(d,F)):de&&(de.d(1),de=null),t[17]?fe?fe.p(t,n):(fe=ou(t),fe.c(),fe.m(d,z)):fe&&(fe.d(1),fe=null),ge===(ge=pe(t))&&me?me.p(t,n):(me&&me.d(1),me=ge&&ge(t),me&&(me.c(),me.m(d,null))),t[13]?be&&(be.d(1),be=null):be?be.p(t,n):(be=pu(t),be.c(),be.m(W,null)),xe===(xe=ye(t))&&ve?ve.p(t,n):(ve.d(1),ve=xe(t),ve&&(ve.c(),ve.m(Q,null))),t[24]?we&&(we.d(1),we=null):we?we.p(t,n):(we=vu(t),we.c(),we.m(nt,null)),_e===(_e=ke(t))&&Me?Me.p(t,n):(Me.d(1),Me=_e(t),Me&&(Me.c(),Me.m(st,null))),t[25]?Ce&&(Ce.d(1),Ce=null):Ce?Ce.p(t,n):(Ce=Au(t),Ce.c(),Ce.m(ct,null)),Ae===(Ae=Se(t))&&Pe?Pe.p(t,n):(Pe.d(1),Pe=Ae(t),Pe&&(Pe.c(),Pe.m(pt,null))),t[26]?De&&(De.d(1),De=null):De?De.p(t,n):(De=Lu(t),De.c(),De.m(yt,null));let i=Mt;Mt=Te(t),Mt===i?Ee[Mt].p(t,n):(H(),U(Ee[i],1,1,()=>{Ee[i]=null}),K(),Ct=Ee[Mt],Ct?Ct.p(t,n):(Ct=Ee[Mt]=Oe[Mt](t),Ct.c()),q(Ct,1),Ct.m(_t,null)),Re!==(Re=Le(t))&&(Be.d(1),Be=Re(t),Be&&(Be.c(),Be.m(jt,null))),(!re||1&n[1])&&(jt.disabled=t[31]),t[34]?Ie?Ie.p(t,n):(Ie=Nu(t),Ie.c(),Ie.m(zt,null)):Ie&&(Ie.d(1),Ie=null),Fe===(Fe=je(t))&&ze?ze.p(t,n):(ze.d(1),ze=Fe(t),ze&&(ze.c(),ze.m(Gt,null)))},i(t){re||(q(Ct),re=!0)},o(t){U(Ct),re=!1},d(t){t&&(u(e),u(n),u(N),u($),u(Z),u(tt),u(ot),u(at),u(gt),u(mt),u(St),u(At)),ae&&ae.d(t),he.d(),ue&&ue.d(),de&&de.d(),fe&&fe.d(),me&&me.d(),be&&be.d(),ve.d(),we&&we.d(),Me.d(),Ce&&Ce.d(),Pe.d(),De&&De.d(),Ee[Mt].d(),Be.d(),Ie&&Ie.d(),ze.d(),se=!1,i(oe)}}}function Zh(e){let n;return{c(){n=f("div"),n.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',x(n,"class","flex items-center justify-center h-64")},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function tu(t){let e,n,i,r,s,o,a,l,d,p,b,y,v,k,_,M,C,S,A,P,D,O,E,T,L,R,B,I,j,F,z,N,$,V,W,H,K=t[14].total+"",q=t[14].duplicateGroups+"",U=t[14].deadLinks+"",Y=t[14].uniqueDomains+"",X=t[14].addedThisWeek+"",G=t[14].addedThisMonth+"";return{c(){e=f("div"),n=f("div"),i=f("div"),r=g(K),s=m(),o=f("div"),o.textContent="Total Bookmarks",a=m(),l=f("div"),d=f("div"),p=g(q),b=m(),y=f("div"),y.textContent="Duplicate Groups",v=m(),k=f("div"),_=f("div"),M=g(U),C=m(),S=f("div"),S.textContent="Dead Links",A=m(),P=f("div"),D=f("div"),O=g(Y),E=m(),T=f("div"),T.textContent="Unique Domains",L=m(),R=f("div"),B=f("div"),I=g(X),j=m(),F=f("div"),F.textContent="Added This Week",z=m(),N=f("div"),$=f("div"),V=g(G),W=m(),H=f("div"),H.textContent="Added This Month",x(i,"class","text-2xl font-bold text-blue-600"),x(o,"class","text-xs text-gray-500"),x(n,"class","bg-white p-4 rounded-lg shadow text-center"),x(d,"class","text-2xl font-bold text-red-600"),x(y,"class","text-xs text-gray-500"),x(l,"class","bg-white p-4 rounded-lg shadow text-center"),x(_,"class","text-2xl font-bold text-orange-600"),x(S,"class","text-xs text-gray-500"),x(k,"class","bg-white p-4 rounded-lg shadow text-center"),x(D,"class","text-2xl font-bold text-purple-600"),x(T,"class","text-xs text-gray-500"),x(P,"class","bg-white p-4 rounded-lg shadow text-center"),x(B,"class","text-2xl font-bold text-green-600"),x(F,"class","text-xs text-gray-500"),x(R,"class","bg-white p-4 rounded-lg shadow text-center"),x($,"class","text-2xl font-bold text-cyan-600"),x(H,"class","text-xs text-gray-500"),x(N,"class","bg-white p-4 rounded-lg shadow text-center"),x(e,"class","grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(i,r),c(n,s),c(n,o),c(e,a),c(e,l),c(l,d),c(d,p),c(l,b),c(l,y),c(e,v),c(e,k),c(k,_),c(_,M),c(k,C),c(k,S),c(e,A),c(e,P),c(P,D),c(D,O),c(P,E),c(P,T),c(e,L),c(e,R),c(R,B),c(B,I),c(R,j),c(R,F),c(e,z),c(e,N),c(N,$),c($,V),c(N,W),c(N,H)},p(t,e){16384&e[0]&&K!==(K=t[14].total+"")&&w(r,K),16384&e[0]&&q!==(q=t[14].duplicateGroups+"")&&w(p,q),16384&e[0]&&U!==(U=t[14].deadLinks+"")&&w(M,U),16384&e[0]&&Y!==(Y=t[14].uniqueDomains+"")&&w(O,Y),16384&e[0]&&X!==(X=t[14].addedThisWeek+"")&&w(I,X),16384&e[0]&&G!==(G=t[14].addedThisMonth+"")&&w(V,G)},d(t){t&&u(e)}}}function eu(t){let e;return{c(){e=g("Run Enrichment")},m(t,n){h(t,e,n)},d(t){t&&u(e)}}}function nu(t){let e;return{c(){e=f("span"),e.innerHTML='<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n                    Enriching...',x(e,"class","flex items-center")},m(t,n){h(t,e,n)},d(t){t&&u(e)}}}function iu(t){let e,n,i,r,s,o,a,l,d,p,b,y,v=t[15].queueSize+"",k=t[15].enabled?"Enabled":"Disabled";return{c(){e=f("div"),n=f("span"),i=g("Queue: "),r=f("strong"),s=g(v),o=g(" bookmarks pending"),a=m(),l=f("span"),d=g("Status: "),p=f("strong"),b=g(k),x(r,"class","text-purple-600"),x(n,"class","text-gray-600"),x(p,"class",y=t[15].enabled?"text-green-600":"text-gray-500"),x(l,"class","text-gray-600"),x(e,"class","flex flex-wrap gap-4 text-sm mb-4")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(n,r),c(r,s),c(n,o),c(e,a),c(e,l),c(l,d),c(l,p),c(p,b)},p(t,e){32768&e[0]&&v!==(v=t[15].queueSize+"")&&w(s,v),32768&e[0]&&k!==(k=t[15].enabled?"Enabled":"Disabled")&&w(b,k),32768&e[0]&&y!==(y=t[15].enabled?"text-green-600":"text-gray-500")&&x(p,"class",y)},d(t){t&&u(e)}}}function ru(t){let e,n,i,r,s,o,a,l,d,p,b,y,v,k,M=(t[18].completed||t[18].current)+"",C=t[18].total+"",S=t[18].title&&su(t);return{c(){e=f("div"),n=f("div"),i=f("div"),r=f("span"),r.textContent="Processing...",s=m(),o=f("span"),a=g(M),l=g(" / "),d=g(C),p=g(" completed"),b=m(),y=f("div"),v=f("div"),k=m(),S&&S.c(),x(r,"class","text-sm font-medium text-blue-900"),x(o,"class","text-sm text-blue-700"),x(i,"class","flex justify-between items-center mb-2"),x(v,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),_(v,"width",(t[18].completed||t[18].current)/t[18].total*100+"%"),x(y,"class","w-full bg-blue-200 rounded-full h-2"),x(n,"class","mb-3"),x(e,"class","mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(i,r),c(i,s),c(i,o),c(o,a),c(o,l),c(o,d),c(o,p),c(n,b),c(n,y),c(y,v),c(e,k),S&&S.m(e,null)},p(t,n){262144&n[0]&&M!==(M=(t[18].completed||t[18].current)+"")&&w(a,M),262144&n[0]&&C!==(C=t[18].total+"")&&w(d,C),262144&n[0]&&_(v,"width",(t[18].completed||t[18].current)/t[18].total*100+"%"),t[18].title?S?S.p(t,n):(S=su(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&u(e),S&&S.d()}}}function su(t){let e,n,i,r,s,o,a,l,d,p="processing"===t[18].status?"":"completed"===t[18].status?"":"",b=t[18].title+"",y=t[18].url+"";return{c(){e=f("div"),n=f("div"),i=g(p),r=m(),s=g(b),a=m(),l=f("div"),d=g(y),x(n,"class","font-medium truncate"),x(n,"title",o=t[18].url),x(l,"class","text-blue-600 truncate text-[10px]"),x(e,"class","text-xs text-blue-800 space-y-1")},m(t,o){h(t,e,o),c(e,n),c(n,i),c(n,r),c(n,s),c(e,a),c(e,l),c(l,d)},p(t,e){262144&e[0]&&p!==(p="processing"===t[18].status?"":"completed"===t[18].status?"":"")&&w(i,p),262144&e[0]&&b!==(b=t[18].title+"")&&w(s,b),262144&e[0]&&o!==(o=t[18].url)&&x(n,"title",o),262144&e[0]&&y!==(y=t[18].url+"")&&w(d,y)},d(t){t&&u(e)}}}function ou(t){let e,n;function i(t,e){return t[17].error?lu:au}let r=i(t),s=r(t);return{c(){e=f("div"),s.c(),x(e,"class",n="mt-4 p-4 rounded-lg "+(t[17].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))},m(t,n){h(t,e,n),s.m(e,null)},p(t,o){r===(r=i(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e,null))),131072&o[0]&&n!==(n="mt-4 p-4 rounded-lg "+(t[17].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))&&x(e,"class",n)},d(t){t&&u(e),s.d()}}}function au(t){let e,n,i,r,s,o,a,l,d,p,b,y,v,k=(t[17].processed||0)+"",_=(t[17].success||0)+"",M=t[17].failed>0&&cu(t),C=t[17].skipped>0&&hu(t);return{c(){e=f("div"),n=f("div"),n.innerHTML="<strong>Enrichment Complete!</strong>",i=m(),r=f("div"),s=g("Processed: "),o=g(k),a=g(" bookmarks"),l=m(),d=f("div"),p=g("Successful: "),b=g(_),y=m(),M&&M.c(),v=m(),C&&C.c(),x(e,"class","text-green-700 text-sm space-y-1")},m(t,u){h(t,e,u),c(e,n),c(e,i),c(e,r),c(r,s),c(r,o),c(r,a),c(e,l),c(e,d),c(d,p),c(d,b),c(e,y),M&&M.m(e,null),c(e,v),C&&C.m(e,null)},p(t,n){131072&n[0]&&k!==(k=(t[17].processed||0)+"")&&w(o,k),131072&n[0]&&_!==(_=(t[17].success||0)+"")&&w(b,_),t[17].failed>0?M?M.p(t,n):(M=cu(t),M.c(),M.m(e,v)):M&&(M.d(1),M=null),t[17].skipped>0?C?C.p(t,n):(C=hu(t),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},d(t){t&&u(e),M&&M.d(),C&&C.d()}}}function lu(t){let e,n,i,r,s=t[17].error+"";return{c(){e=f("div"),n=f("strong"),n.textContent="Error:",i=m(),r=g(s),x(e,"class","text-red-700 text-sm")},m(t,s){h(t,e,s),c(e,n),c(e,i),c(e,r)},p(t,e){131072&e[0]&&s!==(s=t[17].error+"")&&w(r,s)},d(t){t&&u(e)}}}function cu(t){let e,n,i,r=t[17].failed+"";return{c(){e=f("div"),n=g("Failed: "),i=g(r),x(e,"class","text-orange-600")},m(t,r){h(t,e,r),c(e,n),c(e,i)},p(t,e){131072&e[0]&&r!==(r=t[17].failed+"")&&w(i,r)},d(t){t&&u(e)}}}function hu(t){let e,n,i,r=t[17].skipped+"";return{c(){e=f("div"),n=g("Skipped (already enriched): "),i=g(r),x(e,"class","text-gray-600")},m(t,r){h(t,e,r),c(e,n),c(e,i)},p(t,e){131072&e[0]&&r!==(r=t[17].skipped+"")&&w(i,r)},d(t){t&&u(e)}}}function uu(e){let n;return{c(){n=f("p"),n.textContent='Click "Run Enrichment" to fetch metadata for bookmarks that haven\'t been enriched yet. \n                  Only new bookmarks without descriptions or categories will be processed.',x(n,"class","text-gray-500 text-sm")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function du(t){let e,n,i,r,s,o,a,l=t[19].length+"",p=Y(t[19].slice().reverse()),b=[];for(let e=0;e<p.length;e+=1)b[e]=fu($h(t,p,e));return{c(){e=f("details"),n=f("summary"),i=g("View Detailed Logs ("),r=g(l),s=g(")"),o=m(),a=f("div");for(let t=0;t<b.length;t+=1)b[t].c();x(n,"class","cursor-pointer text-sm text-gray-600 hover:text-gray-800 font-medium"),x(a,"class","mt-2 max-h-64 overflow-y-auto bg-gray-50 rounded p-3 space-y-1 text-xs font-mono"),x(e,"class","mt-4")},m(t,l){h(t,e,l),c(e,n),c(n,i),c(n,r),c(n,s),c(e,o),c(e,a);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(a,null)},p(t,e){if(524288&e[0]&&l!==(l=t[19].length+"")&&w(r,l),524288&e[0]){let n;for(p=Y(t[19].slice().reverse()),n=0;n<p.length;n+=1){const i=$h(t,p,n);b[n]?b[n].p(i,e):(b[n]=fu(i),b[n].c(),b[n].m(a,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=p.length}},d(t){t&&u(e),d(b,t)}}}function fu(t){let e,n,i,r,s,o,a,l,d,p,b,y,v,k,_,M=new Date(t[133].timestamp).toLocaleTimeString()+"",C=t[133].current+"",S=t[133].total+"",A="completed"===t[133].status?"":"failed"===t[133].status||"error"===t[133].status?"":"",P=(t[133].title||t[133].url)+"";return{c(){e=f("div"),n=f("span"),i=g(M),r=g(" \n                        ["),s=g(C),o=g("/"),a=g(S),l=g("] \n                        "),d=g(A),p=m(),b=f("span"),y=g(P),k=m(),x(n,"class","text-gray-400"),x(b,"class","truncate inline-block max-w-md"),x(b,"title",v=t[133].url),x(e,"class",_="completed"===t[133].status?"text-green-700":"failed"===t[133].status||"error"===t[133].status?"text-red-700":"text-gray-600")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(e,r),c(e,s),c(e,o),c(e,a),c(e,l),c(e,d),c(e,p),c(e,b),c(b,y),c(e,k)},p(t,n){524288&n[0]&&M!==(M=new Date(t[133].timestamp).toLocaleTimeString()+"")&&w(i,M),524288&n[0]&&C!==(C=t[133].current+"")&&w(s,C),524288&n[0]&&S!==(S=t[133].total+"")&&w(a,S),524288&n[0]&&A!==(A="completed"===t[133].status?"":"failed"===t[133].status||"error"===t[133].status?"":"")&&w(d,A),524288&n[0]&&P!==(P=(t[133].title||t[133].url)+"")&&w(y,P),524288&n[0]&&v!==(v=t[133].url)&&x(b,"title",v),524288&n[0]&&_!==(_="completed"===t[133].status?"text-green-700":"failed"===t[133].status||"error"===t[133].status?"text-red-700":"text-gray-600")&&x(e,"class",_)},d(t){t&&u(e)}}}function pu(t){let e,n,i,r=t[12].length+"";return{c(){e=g("("),n=g(r),i=g(")")},m(t,r){h(t,e,r),h(t,n,r),h(t,i,r)},p(t,e){4096&e[0]&&r!==(r=t[12].length+"")&&w(n,r)},d(t){t&&(u(e),u(n),u(i))}}}function gu(t){let e,n,i,r=Y(t[12].slice(0,t[29])),s=[];for(let e=0;e<r.length;e+=1)s[e]=yu(Nh(t,r,e));let o=t[12].length>t[29]&&xu(t);return{c(){e=f("div");for(let t=0;t<s.length;t+=1)s[t].c();n=m(),o&&o.c(),i=b(),x(e,"class","space-y-2 max-h-[32rem] overflow-y-auto")},m(t,r){h(t,e,r);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);h(t,n,r),o&&o.m(t,r),h(t,i,r)},p(t,n){if(536875008&n[0]){let i;for(r=Y(t[12].slice(0,t[29])),i=0;i<r.length;i+=1){const o=Nh(t,r,i);s[i]?s[i].p(o,n):(s[i]=yu(o),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}t[12].length>t[29]?o?o.p(t,n):(o=xu(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&(u(e),u(n),u(i)),d(s,t),o&&o.d(t)}}}function mu(e){let n;return{c(){n=f("p"),n.textContent="No dead links detected. Run enrichment to check bookmark availability.",x(n,"class","text-gray-500")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function bu(e){let n;return{c(){n=f("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"></div> <span class="ml-3 text-gray-500">Loading dead links...</span>',x(n,"class","flex items-center justify-center py-8")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function yu(t){let e,n,i,r,s,o,a,l,d,p,b,y,v,k,_,M,C,S=t[93].title+"",A=t[93].url+"",P=(t[93].lastChecked?new Date(t[93].lastChecked).toLocaleDateString():"Unknown")+"";return{c(){e=f("div"),n=f("div"),i=f("div"),r=f("div"),s=g(S),o=m(),a=f("div"),l=g(A),d=m(),p=f("div"),b=g("Last checked: "),y=g(P),v=m(),k=f("a"),_=g("Try Again"),C=m(),x(r,"class","text-sm font-medium text-gray-800 truncate"),x(a,"class","text-xs text-gray-500 truncate"),x(p,"class","text-xs text-red-600 mt-1"),x(i,"class","flex-1 min-w-0"),x(k,"href",M=t[93].url),x(k,"target","_blank"),x(k,"rel","noopener noreferrer"),x(k,"class","ml-2 px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300 flex-shrink-0"),x(n,"class","flex items-start justify-between"),x(e,"class","p-3 bg-red-50 rounded border border-red-200")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(i,r),c(r,s),c(i,o),c(i,a),c(a,l),c(i,d),c(i,p),c(p,b),c(p,y),c(n,v),c(n,k),c(k,_),c(e,C)},p(t,e){536875008&e[0]&&S!==(S=t[93].title+"")&&w(s,S),536875008&e[0]&&A!==(A=t[93].url+"")&&w(l,A),536875008&e[0]&&P!==(P=(t[93].lastChecked?new Date(t[93].lastChecked).toLocaleDateString():"Unknown")+"")&&w(y,P),536875008&e[0]&&M!==(M=t[93].url)&&x(k,"href",M)},d(t){t&&u(e)}}}function xu(t){let e,n,i,r,s,o,a,l,d,p=t[12].length+"";return{c(){e=f("div"),n=f("button"),i=g("Load More ("),r=g(t[29]),s=g(" of "),o=g(p),a=g(" shown)"),x(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),x(e,"class","mt-4 text-center")},m(u,f){h(u,e,f),c(e,n),c(n,i),c(n,r),c(n,s),c(n,o),c(n,a),l||(d=y(n,"click",t[48]),l=!0)},p(t,e){536870912&e[0]&&w(r,t[29]),4096&e[0]&&p!==(p=t[12].length+"")&&w(o,p)},d(t){t&&u(e),l=!1,d()}}}function vu(t){let e,n,i,r=t[9].length+"";return{c(){e=g("("),n=g(r),i=g(" groups)")},m(t,r){h(t,e,r),h(t,n,r),h(t,i,r)},p(t,e){512&e[0]&&r!==(r=t[9].length+"")&&w(n,r)},d(t){t&&(u(e),u(n),u(i))}}}function wu(t){let e,n,i,r=Y(t[9].slice(0,t[27])),s=[];for(let e=0;e<r.length;e+=1)s[e]=Cu(Fh(t,r,e));let o=t[9].length>t[27]&&Su(t);return{c(){e=f("div");for(let t=0;t<s.length;t+=1)s[t].c();n=m(),o&&o.c(),i=b(),x(e,"class","space-y-6 max-h-[32rem] overflow-y-auto")},m(t,r){h(t,e,r);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);h(t,n,r),o&&o.m(t,r),h(t,i,r)},p(t,n){if(134218240&n[0]|262144&n[1]){let i;for(r=Y(t[9].slice(0,t[27])),i=0;i<r.length;i+=1){const o=Fh(t,r,i);s[i]?s[i].p(o,n):(s[i]=Cu(o),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}t[9].length>t[27]?o?o.p(t,n):(o=Su(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&(u(e),u(n),u(i)),d(s,t),o&&o.d(t)}}}function ku(e){let n;return{c(){n=f("p"),n.textContent="No duplicate bookmarks found. Great!",x(n,"class","text-gray-500")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function _u(e){let n;return{c(){n=f("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-500">Finding duplicates...</span>',x(n,"class","flex items-center justify-center py-8")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function Mu(t){let e,n,i,r,s,o,a,l,d,p=t[93].title+"",b=(t[93].folderPath||"No folder")+"",v=t[116]>0&&function(t){let e,n,i;function r(){return t[71](t[93],t[129])}return{c(){e=f("button"),e.textContent="Delete",x(e,"class","ml-4 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 flex-shrink-0")},m(t,s){h(t,e,s),n||(i=y(e,"click",r),n=!0)},p(e,n){t=e},d(t){t&&u(e),n=!1,i()}}}(t);return{c(){e=f("div"),n=f("div"),i=f("div"),r=g(p),s=m(),o=f("div"),a=g(b),l=m(),v&&v.c(),d=m(),x(i,"class","text-sm font-medium truncate"),x(o,"class","text-xs text-gray-500"),x(n,"class","flex-1 min-w-0"),x(e,"class","flex items-center justify-between p-2 bg-gray-50 rounded")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(i,r),c(n,s),c(n,o),c(o,a),c(e,l),v&&v.m(e,null),c(e,d)},p(t,e){134218240&e[0]&&p!==(p=t[93].title+"")&&w(r,p),134218240&e[0]&&b!==(b=(t[93].folderPath||"No folder")+"")&&w(a,b),t[116]>0&&v.p(t,e)},d(t){t&&u(e),v&&v.d()}}}function Cu(t){let e,n,i,r,s,o,a,l=t[127][0].url+"",p=Y(t[127]),b=[];for(let e=0;e<p.length;e+=1)b[e]=Mu(zh(t,p,e));return{c(){e=f("div"),n=f("h4"),i=g(l),s=m(),o=f("div");for(let t=0;t<b.length;t+=1)b[t].c();a=m(),x(n,"class","font-medium text-gray-900 mb-3 truncate"),x(n,"title",r=t[127][0].url),x(o,"class","space-y-2"),x(e,"class","border border-gray-200 rounded-lg p-4")},m(t,r){h(t,e,r),c(e,n),c(n,i),c(e,s),c(e,o);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(o,null);c(e,a)},p(t,e){if(134218240&e[0]&&l!==(l=t[127][0].url+"")&&w(i,l),134218240&e[0]&&r!==(r=t[127][0].url)&&x(n,"title",r),134218240&e[0]|262144&e[1]){let n;for(p=Y(t[127]),n=0;n<p.length;n+=1){const i=zh(t,p,n);b[n]?b[n].p(i,e):(b[n]=Mu(i),b[n].c(),b[n].m(o,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=p.length}},d(t){t&&u(e),d(b,t)}}}function Su(t){let e,n,i,r,s,o,a,l,d,p=t[9].length+"";return{c(){e=f("div"),n=f("button"),i=g("Load More ("),r=g(t[27]),s=g(" of "),o=g(p),a=g(" shown)"),x(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),x(e,"class","mt-4 text-center")},m(u,f){h(u,e,f),c(e,n),c(n,i),c(n,r),c(n,s),c(n,o),c(n,a),l||(d=y(n,"click",t[46]),l=!0)},p(t,e){134217728&e[0]&&w(r,t[27]),512&e[0]&&p!==(p=t[9].length+"")&&w(o,p)},d(t){t&&u(e),l=!1,d()}}}function Au(t){let e,n,i,r=t[11].length+"";return{c(){e=g("("),n=g(r),i=g(" pairs)")},m(t,r){h(t,e,r),h(t,n,r),h(t,i,r)},p(t,e){2048&e[0]&&r!==(r=t[11].length+"")&&w(n,r)},d(t){t&&(u(e),u(n),u(i))}}}function Pu(t){let e,n,i,r=Y(t[11].slice(0,t[28])),s=[];for(let e=0;e<r.length;e+=1)s[e]=Eu(jh(t,r,e));let o=t[11].length>t[28]&&Tu(t);return{c(){e=f("div");for(let t=0;t<s.length;t+=1)s[t].c();n=m(),o&&o.c(),i=b(),x(e,"class","space-y-4 max-h-[32rem] overflow-y-auto")},m(t,r){h(t,e,r);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);h(t,n,r),o&&o.m(t,r),h(t,i,r)},p(t,n){if(268437504&n[0]|16384&n[1]){let i;for(r=Y(t[11].slice(0,t[28])),i=0;i<r.length;i+=1){const o=jh(t,r,i);s[i]?s[i].p(o,n):(s[i]=Eu(o),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}t[11].length>t[28]?o?o.p(t,n):(o=Tu(t),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(t){t&&(u(e),u(n),u(i)),d(s,t),o&&o.d(t)}}}function Du(e){let n;return{c(){n=f("p"),n.textContent="No similar bookmarks found.",x(n,"class","text-gray-500")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function Ou(e){let n;return{c(){n=f("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600"></div> <span class="ml-3 text-gray-500">Analyzing similarities...</span>',x(n,"class","flex items-center justify-center py-8")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function Eu(t){let e,n,r,s,o,a,l,d,p,b,v,k,_,M,C,S,A,P,D,O,E,T,L,R,B,I,j,F,z,N=Math.round(100*t[124])+"",$=t[122].title+"",V=t[122].url+"",W=t[123].title+"",H=t[123].url+"";function K(){return t[72](t[122],t[126])}function q(){return t[73](t[123],t[126])}return{c(){e=f("div"),n=f("div"),r=f("div"),s=g(N),o=g("% similar"),a=m(),l=f("div"),d=f("div"),p=f("div"),b=f("div"),v=g($),k=m(),_=f("div"),M=g(V),C=m(),S=f("button"),S.textContent="Remove",A=m(),P=f("div"),D=f("div"),O=f("div"),E=g(W),T=m(),L=f("div"),R=g(H),B=m(),I=f("button"),I.textContent="Remove",j=m(),x(r,"class","text-xs text-yellow-700"),x(n,"class","flex justify-between items-center mb-2"),x(b,"class","text-sm font-medium truncate"),x(_,"class","text-xs text-gray-500 truncate"),x(p,"class","flex-1 min-w-0"),x(S,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 flex-shrink-0"),x(S,"title","Remove this bookmark"),x(d,"class","p-2 bg-white rounded flex justify-between items-start"),x(O,"class","text-sm font-medium truncate"),x(L,"class","text-xs text-gray-500 truncate"),x(D,"class","flex-1 min-w-0"),x(I,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 flex-shrink-0"),x(I,"title","Remove this bookmark"),x(P,"class","p-2 bg-white rounded flex justify-between items-start"),x(l,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),x(e,"class","border border-yellow-200 bg-yellow-50 rounded-lg p-4")},m(t,i){h(t,e,i),c(e,n),c(n,r),c(r,s),c(r,o),c(e,a),c(e,l),c(l,d),c(d,p),c(p,b),c(b,v),c(p,k),c(p,_),c(_,M),c(d,C),c(d,S),c(l,A),c(l,P),c(P,D),c(D,O),c(O,E),c(D,T),c(D,L),c(L,R),c(P,B),c(P,I),c(e,j),F||(z=[y(S,"click",K),y(I,"click",q)],F=!0)},p(e,n){t=e,268437504&n[0]&&N!==(N=Math.round(100*t[124])+"")&&w(s,N),268437504&n[0]&&$!==($=t[122].title+"")&&w(v,$),268437504&n[0]&&V!==(V=t[122].url+"")&&w(M,V),268437504&n[0]&&W!==(W=t[123].title+"")&&w(E,W),268437504&n[0]&&H!==(H=t[123].url+"")&&w(R,H)},d(t){t&&u(e),F=!1,i(z)}}}function Tu(t){let e,n,i,r,s,o,a,l,d,p=t[11].length+"";return{c(){e=f("div"),n=f("button"),i=g("Load More ("),r=g(t[28]),s=g(" of "),o=g(p),a=g(" shown)"),x(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),x(e,"class","mt-4 text-center")},m(u,f){h(u,e,f),c(e,n),c(n,i),c(n,r),c(n,s),c(n,o),c(n,a),l||(d=y(n,"click",t[47]),l=!0)},p(t,e){268435456&e[0]&&w(r,t[28]),2048&e[0]&&p!==(p=t[11].length+"")&&w(o,p)},d(t){t&&u(e),l=!1,d()}}}function Lu(t){let e,n,i,r=t[10].length+"";return{c(){e=g("("),n=g(r),i=g(")")},m(t,r){h(t,e,r),h(t,n,r),h(t,i,r)},p(t,e){1024&e[0]&&r!==(r=t[10].length+"")&&w(n,r)},d(t){t&&(u(e),u(n),u(i))}}}function Ru(t){let e,n,i=Y(t[10]),r=[];for(let e=0;e<i.length;e+=1)r[e]=ju(Ih(t,i,e));const s=t=>U(r[t],1,1,()=>{r[t]=null});return{c(){e=f("div");for(let t=0;t<r.length;t+=1)r[t].c();x(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,i){h(t,e,i);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null);n=!0},p(t,n){if(1024&n[0]){let o;for(i=Y(t[10]),o=0;o<i.length;o+=1){const s=Ih(t,i,o);r[o]?(r[o].p(s,n),q(r[o],1)):(r[o]=ju(s),r[o].c(),q(r[o],1),r[o].m(e,null))}for(H(),o=i.length;o<r.length;o+=1)s(o);K()}},i(t){if(!n){for(let t=0;t<i.length;t+=1)q(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)U(r[t]);n=!1},d(t){t&&u(e),d(r,t)}}}function Bu(e){let n;return{c(){n=f("p"),n.textContent="All bookmark URLs are valid.",x(n,"class","text-gray-500")},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function Iu(e){let n;return{c(){n=f("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div> <span class="ml-3 text-gray-500">Checking URLs...</span>',x(n,"class","flex items-center justify-center py-8")},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function ju(t){let e,n;return e=new Va({props:{bookmark:t[93]}}),{c(){J(e.$$.fragment)},m(t,i){Q(e,t,i),n=!0},p(t,n){const i={};1024&n[0]&&(i.bookmark=t[93]),e.$set(i)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){U(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Fu(t){let e,n,i;return{c(){e=p("svg"),n=p("path"),i=g("\n                      Download Backup"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round"),x(n,"stroke-width","2"),x(n,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),x(e,"class","w-4 h-4 mr-2"),x(e,"fill","none"),x(e,"stroke","currentColor"),x(e,"viewBox","0 0 24 24")},m(t,r){h(t,e,r),c(e,n),h(t,i,r)},d(t){t&&(u(e),u(i))}}}function zu(t){let e,n,i,r;return{c(){e=p("svg"),n=p("circle"),i=p("path"),r=g("\n                      Creating Backup..."),x(n,"class","opacity-25"),x(n,"cx","12"),x(n,"cy","12"),x(n,"r","10"),x(n,"stroke","currentColor"),x(n,"stroke-width","4"),x(i,"class","opacity-75"),x(i,"fill","currentColor"),x(i,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),x(e,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),x(e,"fill","none"),x(e,"viewBox","0 0 24 24")},m(t,s){h(t,e,s),c(e,n),c(e,i),h(t,r,s)},d(t){t&&(u(e),u(r))}}}function Nu(t){let e,n;function i(t,e){return t[34].valid?Vu:$u}let r=i(t),s=r(t);return{c(){e=f("div"),s.c(),x(e,"class",n="mt-3 p-3 rounded-md "+(t[34].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))},m(t,n){h(t,e,n),s.m(e,null)},p(t,o){r===(r=i(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e,null))),8&o[1]&&n!==(n="mt-3 p-3 rounded-md "+(t[34].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))&&x(e,"class",n)},d(t){t&&u(e),s.d()}}}function $u(t){let e,n,i,r=Y(t[34].issues),s=[];for(let e=0;e<r.length;e+=1)s[e]=Wu(Bh(t,r,e));return{c(){e=f("p"),e.textContent=" Invalid backup file",n=m(),i=f("ul");for(let t=0;t<s.length;t+=1)s[t].c();x(e,"class","text-sm text-red-800"),x(i,"class","text-xs text-red-600 mt-1")},m(t,r){h(t,e,r),h(t,n,r),h(t,i,r);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(i,null)},p(t,e){if(8&e[1]){let n;for(r=Y(t[34].issues),n=0;n<r.length;n+=1){const o=Bh(t,r,n);s[n]?s[n].p(o,e):(s[n]=Wu(o),s[n].c(),s[n].m(i,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=r.length}},d(t){t&&(u(e),u(n),u(i)),d(s,t)}}}function Vu(t){let e,n,i,r,s,o,a,l,d,p,b,v,k,_,M,C=t[34].createdAt+"",S=(t[34].metadata?.totalBookmarks||0)+"",A=(t[34].metadata?.enrichedCount||0)+"",P=t[32]?"Restoring...":"Restore This Backup";return{c(){e=f("p"),n=g(" Valid backup from "),i=g(C),r=f("br"),s=m(),o=f("span"),a=g(S),l=g(" bookmarks, \n                            "),d=g(A),p=g(" enriched"),b=m(),v=f("button"),k=g(P),x(o,"class","text-xs text-green-600"),x(e,"class","text-sm text-green-800"),v.disabled=t[32],x(v,"class","mt-2 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 text-sm")},m(u,f){h(u,e,f),c(e,n),c(e,i),c(e,r),c(e,s),c(e,o),c(o,a),c(o,l),c(o,d),c(o,p),h(u,b,f),h(u,v,f),c(v,k),_||(M=y(v,"click",t[58]),_=!0)},p(t,e){8&e[1]&&C!==(C=t[34].createdAt+"")&&w(i,C),8&e[1]&&S!==(S=(t[34].metadata?.totalBookmarks||0)+"")&&w(a,S),8&e[1]&&A!==(A=(t[34].metadata?.enrichedCount||0)+"")&&w(d,A),2&e[1]&&P!==(P=t[32]?"Restoring...":"Restore This Backup")&&w(k,P),2&e[1]&&(v.disabled=t[32])},d(t){t&&(u(e),u(b),u(v)),_=!1,M()}}}function Wu(t){let e,n,i,r=t[117]+"";return{c(){e=f("li"),n=g(" "),i=g(r)},m(t,r){h(t,e,r),c(e,n),c(e,i)},p(t,e){8&e[1]&&r!==(r=t[117]+"")&&w(i,r)},d(t){t&&u(e)}}}function Hu(t){let e,n=Y(t[33]),i=[];for(let e=0;e<n.length;e+=1)i[e]=qu(Rh(t,n,e));return{c(){e=f("div");for(let t=0;t<i.length;t+=1)i[t].c();x(e,"class","space-y-2")},m(t,n){h(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null)},p(t,r){if(1073741830&r[1]){let s;for(n=Y(t[33]),s=0;s<n.length;s+=1){const o=Rh(t,n,s);i[s]?i[s].p(o,r):(i[s]=qu(o),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(t){t&&u(e),d(i,t)}}}function Ku(e){let n;return{c(){n=f("p"),n.textContent="No auto-backups yet. They will appear after your first restore or enrichment run.",x(n,"class","text-gray-500 text-sm")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function qu(t){let e,n,i,r,s,o,a,l,d,p,b,v,k,_,M,C,S,A=new Date(t[114].createdAt).toLocaleString()+"",P=(t[114].metadata?.totalBookmarks||0)+"",D=(t[114].metadata?.enrichedCount||0)+"";function O(){return t[74](t[116])}return{c(){e=f("div"),n=f("div"),i=f("span"),r=g(A),s=m(),o=f("span"),a=g("("),l=g(P),d=g(" bookmarks, "),p=g(D),b=g(" enriched)"),v=m(),k=f("button"),_=g("Restore"),M=m(),x(i,"class","text-sm font-medium text-gray-900"),x(o,"class","text-xs text-gray-500 ml-2"),k.disabled=t[32],x(k,"class","text-sm px-3 py-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded"),x(e,"class","flex justify-between items-center p-3 bg-gray-50 rounded-md")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(i,r),c(n,s),c(n,o),c(o,a),c(o,l),c(o,d),c(o,p),c(o,b),c(e,v),c(e,k),c(k,_),c(e,M),C||(S=y(k,"click",O),C=!0)},p(e,n){t=e,4&n[1]&&A!==(A=new Date(t[114].createdAt).toLocaleString()+"")&&w(r,A),4&n[1]&&P!==(P=(t[114].metadata?.totalBookmarks||0)+"")&&w(l,P),4&n[1]&&D!==(D=(t[114].metadata?.enrichedCount||0)+"")&&w(p,D),2&n[1]&&(k.disabled=t[32])},d(t){t&&u(e),C=!1,S()}}}function Uu(t){let e,n,i,r,s,o,a,l,d,p,b,y,v,k,_,M,C,S,A,P,D,O,E,T,L,R,B,I,j,F,z,N,$,V,W,H,K,q,U,Y,X,G,J,Q,Z,tt,et,nt,it,rt,st,ot,at,lt,ct,ht=(t[0].length||0)+"",ut=t[9].length+"",dt=new Set(t[0].map(Dd)).size+"";function ft(t,e){return t[30]?Gu:Xu}let pt=ft(t),gt=pt(t);function mt(t,e){return t[22].length>0?ed:td}let bt=mt(t),yt=bt(t),xt=t[23]&&od(t);function vt(t,e){return t[23]&&t[23].topCategories?ld:ad}let wt=vt(t),kt=wt(t);return{c(){e=f("div"),e.innerHTML='<h3 class="text-xl font-semibold text-gray-900 mb-6">Domain Analysis</h3> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><div><canvas id="domainChart" width="400" height="300"></canvas></div> <div><canvas id="domainDistributionChart" width="400" height="300"></canvas></div></div>',n=m(),i=f("div"),i.innerHTML='<h3 class="text-xl font-semibold text-gray-900 mb-6">Content Analysis</h3> <div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><div><canvas id="wordCloudChart" width="400" height="300"></canvas></div> <div><canvas id="titlePatternsChart" width="400" height="300"></canvas></div></div>',r=m(),s=f("div"),s.innerHTML='<h3 class="text-xl font-semibold text-gray-900 mb-6">Temporal Analysis</h3> <div class="grid grid-cols-1 lg:grid-cols-3 gap-8"><div><canvas id="activityChart" width="400" height="300"></canvas></div> <div><canvas id="ageDistributionChart" width="400" height="300"></canvas></div> <div><canvas id="creationPatternsChart" width="400" height="300"></canvas></div></div>',o=m(),a=f("div"),l=f("h3"),l.textContent="URL Structure Analysis",d=m(),p=f("div"),b=f("div"),b.innerHTML='<canvas id="urlPatternsChart" width="400" height="300"></canvas>',y=m(),v=f("div"),k=f("h4"),k.textContent="URL Parameter Usage",_=m(),gt.c(),M=m(),C=f("div"),S=f("h3"),S.innerHTML='<svg class="w-6 h-6 inline-block mr-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg>\n              Domain Hierarchy',A=m(),P=f("div"),D=f("div"),D.innerHTML='<canvas id="domainHierarchyChart" width="400" height="400"></canvas>',O=m(),E=f("div"),T=f("h4"),T.textContent="Domain Breakdown",L=m(),yt.c(),R=m(),B=f("div"),I=f("h3"),I.innerHTML='<svg class="w-6 h-6 inline-block mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>\n              Data Insights',j=m(),xt&&xt.c(),F=m(),z=f("div"),N=f("div"),N.innerHTML='<canvas id="freshnessChart" width="400" height="300"></canvas>',$=m(),V=f("div"),W=f("h4"),W.textContent="Top Categories",H=m(),kt.c(),K=m(),q=f("div"),U=f("div"),Y=f("div"),X=g(ht),G=m(),J=f("div"),J.textContent="Total Bookmarks",Q=m(),Z=f("div"),tt=f("div"),et=g(ut),nt=m(),it=f("div"),it.textContent="Duplicate Groups",rt=m(),st=f("div"),ot=f("div"),at=g(dt),lt=m(),ct=f("div"),ct.textContent="Unique Domains",x(e,"class","bg-white p-6 rounded-lg shadow"),x(i,"class","bg-white p-6 rounded-lg shadow"),x(s,"class","bg-white p-6 rounded-lg shadow"),x(l,"class","text-xl font-semibold text-gray-900 mb-6"),x(k,"class","text-lg font-medium text-gray-900 mb-4"),x(v,"class","bg-gray-50 p-4 rounded-lg"),x(p,"class","grid grid-cols-1 lg:grid-cols-2 gap-8"),x(a,"class","bg-white p-6 rounded-lg shadow"),x(S,"class","text-xl font-semibold text-gray-900 mb-6"),x(T,"class","text-lg font-medium text-gray-900 mb-4"),x(E,"class","bg-gray-50 p-4 rounded-lg max-h-96 overflow-y-auto"),x(P,"class","grid grid-cols-1 lg:grid-cols-2 gap-8"),x(C,"class","bg-white p-6 rounded-lg shadow"),x(I,"class","text-xl font-semibold text-gray-900 mb-6"),x(W,"class","text-lg font-medium text-gray-900 mb-4"),x(V,"class","bg-gray-50 p-4 rounded-lg"),x(z,"class","grid grid-cols-1 lg:grid-cols-2 gap-8"),x(B,"class","bg-white p-6 rounded-lg shadow"),x(Y,"class","text-3xl font-bold text-blue-600"),x(J,"class","text-gray-500"),x(U,"class","bg-white p-6 rounded-lg shadow text-center"),x(tt,"class","text-3xl font-bold text-green-600"),x(it,"class","text-gray-500"),x(Z,"class","bg-white p-6 rounded-lg shadow text-center"),x(ot,"class","text-3xl font-bold text-purple-600"),x(ct,"class","text-gray-500"),x(st,"class","bg-white p-6 rounded-lg shadow text-center"),x(q,"class","grid grid-cols-1 md:grid-cols-3 gap-6")},m(t,u){h(t,e,u),h(t,n,u),h(t,i,u),h(t,r,u),h(t,s,u),h(t,o,u),h(t,a,u),c(a,l),c(a,d),c(a,p),c(p,b),c(p,y),c(p,v),c(v,k),c(v,_),gt.m(v,null),h(t,M,u),h(t,C,u),c(C,S),c(C,A),c(C,P),c(P,D),c(P,O),c(P,E),c(E,T),c(E,L),yt.m(E,null),h(t,R,u),h(t,B,u),c(B,I),c(B,j),xt&&xt.m(B,null),c(B,F),c(B,z),c(z,N),c(z,$),c(z,V),c(V,W),c(V,H),kt.m(V,null),h(t,K,u),h(t,q,u),c(q,U),c(U,Y),c(Y,X),c(U,G),c(U,J),c(q,Q),c(q,Z),c(Z,tt),c(tt,et),c(Z,nt),c(Z,it),c(q,rt),c(q,st),c(st,ot),c(ot,at),c(st,lt),c(st,ct)},p(t,e){pt===(pt=ft(t))&&gt?gt.p(t,e):(gt.d(1),gt=pt(t),gt&&(gt.c(),gt.m(v,null))),bt===(bt=mt(t))&&yt?yt.p(t,e):(yt.d(1),yt=bt(t),yt&&(yt.c(),yt.m(E,null))),t[23]?xt?xt.p(t,e):(xt=od(t),xt.c(),xt.m(B,F)):xt&&(xt.d(1),xt=null),wt===(wt=vt(t))&&kt?kt.p(t,e):(kt.d(1),kt=wt(t),kt&&(kt.c(),kt.m(V,null))),1&e[0]&&ht!==(ht=(t[0].length||0)+"")&&w(X,ht),512&e[0]&&ut!==(ut=t[9].length+"")&&w(et,ut),1&e[0]&&dt!==(dt=new Set(t[0].map(Dd)).size+"")&&w(at,dt)},d(t){t&&(u(e),u(n),u(i),u(r),u(s),u(o),u(a),u(M),u(C),u(R),u(B),u(K),u(q)),gt.d(),yt.d(),xt&&xt.d(),kt.d()}}}function Yu(e){let n;return{c(){n=f("div"),n.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',x(n,"class","flex items-center justify-center h-64")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function Xu(e){let n;return{c(){n=f("p"),n.textContent="Loading parameter data...",x(n,"class","text-sm text-gray-500")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function Gu(t){let e,n,i,r,s,o,a,l,d,p,b,y,v,k,_=t[30].percentage+"",M=t[30].urlsWithParams+"",C=t[30].totalUrls+"";function S(t,e){return t[30].parameters.length>0?Qu:Ju}let A=S(t),P=A(t);return{c(){e=f("div"),n=f("div"),i=g("URLs with parameters: "),r=f("span"),s=g(_),o=g("%"),a=m(),l=f("span"),d=g("("),p=g(M),b=g(" of "),y=g(C),v=g(")"),k=m(),P.c(),x(r,"class","font-semibold"),x(l,"class","text-xs text-gray-400"),x(n,"class","text-sm text-gray-600"),x(e,"class","space-y-2")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(n,r),c(r,s),c(r,o),c(n,a),c(n,l),c(l,d),c(l,p),c(l,b),c(l,y),c(l,v),c(e,k),P.m(e,null)},p(t,n){1073741824&n[0]&&_!==(_=t[30].percentage+"")&&w(s,_),1073741824&n[0]&&M!==(M=t[30].urlsWithParams+"")&&w(p,M),1073741824&n[0]&&C!==(C=t[30].totalUrls+"")&&w(y,C),A===(A=S(t))&&P?P.p(t,n):(P.d(1),P=A(t),P&&(P.c(),P.m(e,null)))},d(t){t&&u(e),P.d()}}}function Ju(e){let n;return{c(){n=f("p"),n.textContent="No URL parameters found in bookmarks.",x(n,"class","text-sm text-gray-500 mt-2")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function Qu(t){let e,n,i,r=Y(t[30].parameters.slice(0,10)),s=[];for(let e=0;e<r.length;e+=1)s[e]=Zu(Kh(t,r,e));return{c(){e=f("div"),n=f("div"),n.textContent="Most Common Parameters:",i=m();for(let t=0;t<s.length;t+=1)s[t].c();x(n,"class","text-sm font-medium text-gray-700"),x(e,"class","space-y-1 mt-3")},m(t,r){h(t,e,r),c(e,n),c(e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null)},p(t,n){if(1073741824&n[0]){let i;for(r=Y(t[30].parameters.slice(0,10)),i=0;i<r.length;i+=1){const o=Kh(t,r,i);s[i]?s[i].p(o,n):(s[i]=Zu(o),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=r.length}},d(t){t&&u(e),d(s,t)}}}function Zu(t){let e,n,i,r,s,o,a,l=t[111]+"",d=t[102]+"";return{c(){e=f("div"),n=f("span"),i=g(l),r=m(),s=f("span"),o=g(d),a=m(),x(n,"class","font-mono bg-gray-100 px-1 rounded"),x(s,"class","font-semibold"),x(e,"class","flex justify-between text-xs text-gray-600 py-1 border-b border-gray-200")},m(t,l){h(t,e,l),c(e,n),c(n,i),c(e,r),c(e,s),c(s,o),c(e,a)},p(t,e){1073741824&e[0]&&l!==(l=t[111]+"")&&w(i,l),1073741824&e[0]&&d!==(d=t[102]+"")&&w(o,d)},d(t){t&&u(e)}}}function td(e){let n;return{c(){n=f("p"),n.textContent="No domain data available.",x(n,"class","text-gray-500 text-sm")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function ed(t){let e,n=Y(t[22].slice(0,10)),i=[];for(let e=0;e<n.length;e+=1)i[e]=sd(Wh(t,n,e));return{c(){e=f("div");for(let t=0;t<i.length;t+=1)i[t].c();x(e,"class","space-y-3")},m(t,n){h(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null)},p(t,r){if(4194304&r[0]){let s;for(n=Y(t[22].slice(0,10)),s=0;s<n.length;s+=1){const o=Wh(t,n,s);i[s]?i[s].p(o,r):(i[s]=sd(o),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(t){t&&u(e),d(i,t)}}}function nd(t){let e,n,i=Y(t[105].subdomains.slice(0,3)),r=[];for(let e=0;e<i.length;e+=1)r[e]=id(Hh(t,i,e));let s=t[105].subdomains.length>3&&rd(t);return{c(){e=f("div");for(let t=0;t<r.length;t+=1)r[t].c();n=m(),s&&s.c(),x(e,"class","mt-2 pl-4 border-l-2 border-gray-200")},m(t,i){h(t,e,i);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null);c(e,n),s&&s.m(e,null)},p(t,o){if(4194304&o[0]){let s;for(i=Y(t[105].subdomains.slice(0,3)),s=0;s<i.length;s+=1){const a=Hh(t,i,s);r[s]?r[s].p(a,o):(r[s]=id(a),r[s].c(),r[s].m(e,n))}for(;s<r.length;s+=1)r[s].d(1);r.length=i.length}t[105].subdomains.length>3?s?s.p(t,o):(s=rd(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&u(e),d(r,t),s&&s.d()}}}function id(t){let e,n,i,r,s,o,a=t[108].name+"",l=t[108].count+"";return{c(){e=f("div"),n=f("span"),i=g(a),r=m(),s=f("span"),o=g(l),x(s,"class","text-gray-500"),x(e,"class","text-sm text-gray-600 flex justify-between py-1")},m(t,a){h(t,e,a),c(e,n),c(n,i),c(e,r),c(e,s),c(s,o)},p(t,e){4194304&e[0]&&a!==(a=t[108].name+"")&&w(i,a),4194304&e[0]&&l!==(l=t[108].count+"")&&w(o,l)},d(t){t&&u(e)}}}function rd(t){let e,n,i,r,s=t[105].subdomains.length-3+"";return{c(){e=f("div"),n=g("+"),i=g(s),r=g(" more..."),x(e,"class","text-xs text-gray-400")},m(t,s){h(t,e,s),c(e,n),c(e,i),c(e,r)},p(t,e){4194304&e[0]&&s!==(s=t[105].subdomains.length-3+"")&&w(i,s)},d(t){t&&u(e)}}}function sd(t){let e,n,i,r,s,o,a,l,d,p=t[105].name+"",b=t[105].count+"",y=t[105].subdomains.length>0&&nd(t);return{c(){e=f("div"),n=f("div"),i=f("span"),r=g(p),s=m(),o=f("span"),a=g(b),l=m(),y&&y.c(),d=m(),x(i,"class","font-medium text-gray-800"),x(o,"class","text-sm font-bold text-blue-600"),x(n,"class","flex justify-between items-center"),x(e,"class","border border-gray-200 rounded p-3 bg-white")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(i,r),c(n,s),c(n,o),c(o,a),c(e,l),y&&y.m(e,null),c(e,d)},p(t,n){4194304&n[0]&&p!==(p=t[105].name+"")&&w(r,p),4194304&n[0]&&b!==(b=t[105].count+"")&&w(a,b),t[105].subdomains.length>0?y?y.p(t,n):(y=nd(t),y.c(),y.m(e,d)):y&&(y.d(1),y=null)},d(t){t&&u(e),y&&y.d()}}}function od(t){let e,n,i,r,s,o,a,l,d,p,b,y,v,k,_,M,C,S,A,P,D,O,E,T,L,R,B,I,j,F,z,N,$,V,W,H,K,q,U,Y=t[23].totalBookmarks+"",X=t[23].categorizedPercentage+"",G=t[23].enrichedPercentage+"",J=t[23].neverAccessedPercentage+"",Q=t[23].deadLinks+"",Z=t[23].uniqueDomains+"";return{c(){e=f("div"),n=f("div"),i=f("div"),r=g(Y),s=m(),o=f("div"),o.textContent="Total Bookmarks",a=m(),l=f("div"),d=f("div"),p=g(X),b=g("%"),y=m(),v=f("div"),v.textContent="Categorized",k=m(),_=f("div"),M=f("div"),C=g(G),S=g("%"),A=m(),P=f("div"),P.textContent="Enriched",D=m(),O=f("div"),E=f("div"),T=g(J),L=g("%"),R=m(),B=f("div"),B.textContent="Never Accessed",I=m(),j=f("div"),F=f("div"),z=g(Q),N=m(),$=f("div"),$.textContent="Dead Links",V=m(),W=f("div"),H=f("div"),K=g(Z),q=m(),U=f("div"),U.textContent="Unique Domains",x(i,"class","text-2xl font-bold text-blue-700"),x(o,"class","text-xs text-blue-600"),x(n,"class","bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg text-center"),x(d,"class","text-2xl font-bold text-green-700"),x(v,"class","text-xs text-green-600"),x(l,"class","bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg text-center"),x(M,"class","text-2xl font-bold text-purple-700"),x(P,"class","text-xs text-purple-600"),x(_,"class","bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg text-center"),x(E,"class","text-2xl font-bold text-orange-700"),x(B,"class","text-xs text-orange-600"),x(O,"class","bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg text-center"),x(F,"class","text-2xl font-bold text-red-700"),x($,"class","text-xs text-red-600"),x(j,"class","bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-lg text-center"),x(H,"class","text-2xl font-bold text-cyan-700"),x(U,"class","text-xs text-cyan-600"),x(W,"class","bg-gradient-to-br from-cyan-50 to-cyan-100 p-4 rounded-lg text-center"),x(e,"class","grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-8")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(i,r),c(n,s),c(n,o),c(e,a),c(e,l),c(l,d),c(d,p),c(d,b),c(l,y),c(l,v),c(e,k),c(e,_),c(_,M),c(M,C),c(M,S),c(_,A),c(_,P),c(e,D),c(e,O),c(O,E),c(E,T),c(E,L),c(O,R),c(O,B),c(e,I),c(e,j),c(j,F),c(F,z),c(j,N),c(j,$),c(e,V),c(e,W),c(W,H),c(H,K),c(W,q),c(W,U)},p(t,e){8388608&e[0]&&Y!==(Y=t[23].totalBookmarks+"")&&w(r,Y),8388608&e[0]&&X!==(X=t[23].categorizedPercentage+"")&&w(p,X),8388608&e[0]&&G!==(G=t[23].enrichedPercentage+"")&&w(C,G),8388608&e[0]&&J!==(J=t[23].neverAccessedPercentage+"")&&w(T,J),8388608&e[0]&&Q!==(Q=t[23].deadLinks+"")&&w(z,Q),8388608&e[0]&&Z!==(Z=t[23].uniqueDomains+"")&&w(K,Z)},d(t){t&&u(e)}}}function ad(e){let n;return{c(){n=f("p"),n.textContent="No category data available.",x(n,"class","text-sm text-gray-500")},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function ld(t){let e,n=Y(t[23].topCategories),i=[];for(let e=0;e<n.length;e+=1)i[e]=cd(Vh(t,n,e));return{c(){e=f("div");for(let t=0;t<i.length;t+=1)i[t].c();x(e,"class","space-y-2")},m(t,n){h(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null)},p(t,r){if(8388608&r[0]){let s;for(n=Y(t[23].topCategories),s=0;s<n.length;s+=1){const o=Vh(t,n,s);i[s]?i[s].p(o,r):(i[s]=cd(o),i[s].c(),i[s].m(e,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=n.length}},d(t){t&&u(e),d(i,t)}}}function cd(t){let e,n,i,r,s,o,a,l,d,p,b,y=t[101]+"",v=t[102]+"";return{c(){e=f("div"),n=f("span"),i=g(y),r=m(),s=f("div"),o=f("div"),a=f("div"),l=m(),d=f("span"),p=g(v),b=m(),x(n,"class","font-medium text-gray-700 capitalize"),x(a,"class","bg-purple-600 h-2 rounded-full"),_(a,"width",Math.min(100,t[102]/t[23].topCategories[0][1]*100)+"%"),x(o,"class","w-24 bg-gray-200 rounded-full h-2 mr-3"),x(d,"class","text-sm font-bold text-gray-600"),x(s,"class","flex items-center"),x(e,"class","flex items-center justify-between py-2 border-b border-gray-200")},m(t,u){h(t,e,u),c(e,n),c(n,i),c(e,r),c(e,s),c(s,o),c(o,a),c(s,l),c(s,d),c(d,p),c(e,b)},p(t,e){8388608&e[0]&&y!==(y=t[101]+"")&&w(i,y),8388608&e[0]&&_(a,"width",Math.min(100,t[102]/t[23].topCategories[0][1]*100)+"%"),8388608&e[0]&&v!==(v=t[102]+"")&&w(p,v)},d(t){t&&u(e)}}}function hd(t){let e,n,r,s,o,a,l,p,v,k,_,S,A,P,D,O,E,T,L,R,B,I,F,z,N,$,V,W,X,G=1!==t[5]?"s":"",J=t[0].length+"",Q=t[36]?"Cancel":"Select",Z=(t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange||t[8].searchQuery)&&pd(),tt=Y(Object.values(Ba)),et=[];for(let e=0;e<tt.length;e+=1)et[e]=gd(Yh(t,tt,e));function nt(t,e){return"list"===t[37]?bd:md}let it=nt(t),rt=it(t),st=t[36]&&yd(t);const ot=[vd,xd],at=[];function lt(t,e){return"list"===t[37]?0:1}F=lt(t),z=at[F]=ot[F](t);let ct=t[6]&&_d(t);return{c(){e=f("div"),n=f("h2"),r=g(t[5]),s=g(" bookmark"),o=g(G),a=m(),Z&&Z.c(),l=m(),p=f("div"),v=f("div"),k=g("Showing "),_=g(J),S=g(" of "),A=g(t[5]),P=m(),D=f("select");for(let t=0;t<et.length;t+=1)et[t].c();O=m(),E=f("button"),rt.c(),T=m(),L=f("button"),R=g(Q),B=m(),st&&st.c(),I=m(),z.c(),N=m(),ct&&ct.c(),$=b(),x(n,"class","text-lg font-medium text-gray-900"),x(v,"class","text-sm text-gray-500"),x(D,"class","text-sm border border-gray-300 rounded-md px-2 py-1 bg-white"),void 0===t[7]&&j(()=>t[67].call(D)),x(E,"class","p-2 text-gray-500 hover:text-gray-700 border border-gray-300 rounded-md"),x(E,"title","Toggle view mode"),x(L,"class","px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50"),C(L,"bg-blue-50",t[36]),C(L,"border-blue-300",t[36]),C(L,"text-blue-700",t[36]),x(p,"class","flex flex-wrap items-center gap-2 sm:gap-4"),x(e,"class","mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4")},m(i,u){h(i,e,u),c(e,n),c(n,r),c(n,s),c(n,o),c(n,a),Z&&Z.m(n,null),c(e,l),c(e,p),c(p,v),c(v,k),c(v,_),c(v,S),c(v,A),c(p,P),c(p,D);for(let t=0;t<et.length;t+=1)et[t]&&et[t].m(D,null);M(D,t[7],!0),c(p,O),c(p,E),rt.m(E,null),c(p,T),c(p,L),c(L,R),h(i,B,u),st&&st.m(i,u),h(i,I,u),at[F].m(i,u),h(i,N,u),ct&&ct.m(i,u),h(i,$,u),V=!0,W||(X=[y(D,"change",t[67]),y(D,"change",t[68]),y(E,"click",t[56]),y(L,"click",t[50])],W=!0)},p(t,e){if((!V||32&e[0])&&w(r,t[5]),(!V||32&e[0])&&G!==(G=1!==t[5]?"s":"")&&w(o,G),t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange||t[8].searchQuery?Z||(Z=pd(),Z.c(),Z.m(n,null)):Z&&(Z.d(1),Z=null),(!V||1&e[0])&&J!==(J=t[0].length+"")&&w(_,J),(!V||32&e[0])&&w(A,t[5]),0&e){let n;for(tt=Y(Object.values(Ba)),n=0;n<tt.length;n+=1){const i=Yh(t,tt,n);et[n]?et[n].p(i,e):(et[n]=gd(i),et[n].c(),et[n].m(D,null))}for(;n<et.length;n+=1)et[n].d(1);et.length=tt.length}128&e[0]&&M(D,t[7]),it!==(it=nt(t))&&(rt.d(1),rt=it(t),rt&&(rt.c(),rt.m(E,null))),(!V||32&e[1])&&Q!==(Q=t[36]?"Cancel":"Select")&&w(R,Q),(!V||32&e[1])&&C(L,"bg-blue-50",t[36]),(!V||32&e[1])&&C(L,"border-blue-300",t[36]),(!V||32&e[1])&&C(L,"text-blue-700",t[36]),t[36]?st?st.p(t,e):(st=yd(t),st.c(),st.m(I.parentNode,I)):st&&(st.d(1),st=null);let i=F;F=lt(t),F===i?at[F].p(t,e):(H(),U(at[i],1,1,()=>{at[i]=null}),K(),z=at[F],z?z.p(t,e):(z=at[F]=ot[F](t),z.c()),q(z,1),z.m(N.parentNode,N)),t[6]?ct?ct.p(t,e):(ct=_d(t),ct.c(),ct.m($.parentNode,$)):ct&&(ct.d(1),ct=null)},i(t){V||(q(z),V=!0)},o(t){U(z),V=!1},d(t){t&&(u(e),u(B),u(I),u(N),u($)),Z&&Z.d(),d(et,t),rt.d(),st&&st.d(t),at[F].d(t),ct&&ct.d(t),W=!1,i(X)}}}function ud(e){let n;function i(t,e){return t[4]?Ad:Sd}let r=i(e),s=r(e);return{c(){n=f("div"),s.c(),x(n,"class","text-center text-gray-500 p-8")},m(t,e){h(t,n,e),s.m(n,null)},p(t,e){r===(r=i(t))&&s?s.p(t,e):(s.d(1),s=r(t),s&&(s.c(),s.m(n,null)))},i:t,o:t,d(t){t&&u(n),s.d()}}}function dd(e){let n,i,r,s,o,a,l,d;return{c(){n=f("div"),i=f("p"),r=g("Error: "),s=g(e[2]),o=m(),a=f("button"),a.textContent="Retry",x(a,"class","mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"),x(n,"class","text-center text-red-600 p-8")},m(t,u){h(t,n,u),c(n,i),c(i,r),c(i,s),c(n,o),c(n,a),l||(d=y(a,"click",e[66]),l=!0)},p(t,e){4&e[0]&&w(s,t[2])},i:t,o:t,d(t){t&&u(n),l=!1,d()}}}function fd(e){let n;return{c(){n=f("div"),n.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',x(n,"class","flex items-center justify-center h-64")},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function pd(t){let e;return{c(){e=f("span"),e.textContent="(filtered)",x(e,"class","text-sm text-gray-500")},m(t,n){h(t,e,n)},d(t){t&&u(e)}}}function gd(e){let n,i,r=e[98].label+"";return{c(){n=f("option"),i=g(r),n.__value=e[98].key,k(n,n.__value)},m(t,e){h(t,n,e),c(n,i)},p:t,d(t){t&&u(n)}}}function md(t){let e,n;return{c(){e=p("svg"),n=p("path"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round"),x(n,"stroke-width","2"),x(n,"d","M4 6h16M4 10h16M4 14h16M4 18h16"),x(e,"class","w-4 h-4"),x(e,"fill","none"),x(e,"stroke","currentColor"),x(e,"viewBox","0 0 24 24")},m(t,i){h(t,e,i),c(e,n)},d(t){t&&u(e)}}}function bd(t){let e,n;return{c(){e=p("svg"),n=p("path"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round"),x(n,"stroke-width","2"),x(n,"d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"),x(e,"class","w-4 h-4"),x(e,"fill","none"),x(e,"stroke","currentColor"),x(e,"viewBox","0 0 24 24")},m(t,i){h(t,e,i),c(e,n)},d(t){t&&u(e)}}}function yd(t){let e,n,r,s,o,a,l,d,p,b,v,k,_,M,C,S,A=t[35].size+"";return{c(){e=f("div"),n=f("div"),r=f("div"),s=f("span"),o=g(A),a=g(" selected"),l=m(),d=f("button"),d.textContent="Select All",p=m(),b=f("button"),b.textContent="Deselect All",v=m(),k=f("button"),_=g("Delete Selected"),x(s,"class","text-sm text-blue-700"),x(d,"class","text-sm text-blue-600 hover:text-blue-800"),x(b,"class","text-sm text-blue-600 hover:text-blue-800"),x(r,"class","flex flex-wrap items-center gap-2 sm:gap-4"),k.disabled=M=0===t[35].size,x(k,"class","px-4 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed self-start sm:self-auto"),x(n,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"),x(e,"class","mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md")},m(i,u){h(i,e,u),c(e,n),c(n,r),c(r,s),c(s,o),c(s,a),c(r,l),c(r,d),c(r,p),c(r,b),c(n,v),c(n,k),c(k,_),C||(S=[y(d,"click",t[52]),y(b,"click",t[53]),y(k,"click",t[54])],C=!0)},p(t,e){16&e[1]&&A!==(A=t[35].size+"")&&w(o,A),16&e[1]&&M!==(M=0===t[35].size)&&(k.disabled=M)},d(t){t&&u(e),C=!1,i(S)}}}function xd(t){let e,n,i=[],r=new Map,s=Y(t[0]);const o=t=>t[93].id;for(let e=0;e<s.length;e+=1){let n=qh(t,s,e),a=o(n);r.set(a,i[e]=wd(a,n))}return{c(){e=f("div");for(let t=0;t<i.length;t+=1)i[t].c();x(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,r){h(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);n=!0},p(t,n){1&n[0]&&(s=Y(t[0]),H(),i=G(i,n,o,1,t,s,r,e,X,wd,null,qh),K())},i(t){if(!n){for(let t=0;t<s.length;t+=1)q(i[t]);n=!0}},o(t){for(let t=0;t<i.length;t+=1)U(i[t]);n=!1},d(t){t&&u(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function vd(t){let e,n,i,r=[],s=new Map,o=Y(t[0]);const a=t=>t[93].id;for(let e=0;e<o.length;e+=1){let n=Uh(t,o,e),i=a(n);s.set(i,r[e]=kd(i,n))}return{c(){e=f("div"),n=f("div");for(let t=0;t<r.length;t+=1)r[t].c();x(n,"class","max-w-full overflow-x-auto"),x(e,"class","bg-white rounded-lg shadow overflow-hidden")},m(t,s){h(t,e,s),c(e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(n,null);i=!0},p(t,e){1&e[0]|17825840&e[1]&&(o=Y(t[0]),H(),r=G(r,e,a,1,t,o,s,n,X,kd,null,Uh),K())},i(t){if(!i){for(let t=0;t<o.length;t+=1)q(r[t]);i=!0}},o(t){for(let t=0;t<r.length;t+=1)U(r[t]);i=!1},d(t){t&&u(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function wd(t,e){let n,i,r;return i=new Va({props:{bookmark:e[93]}}),{key:t,first:null,c(){n=b(),J(i.$$.fragment),this.first=n},m(t,e){h(t,n,e),Q(i,t,e),r=!0},p(t,n){e=t;const r={};1&n[0]&&(r.bookmark=e[93]),i.$set(r)},i(t){r||(q(i.$$.fragment,t),r=!0)},o(t){U(i.$$.fragment,t),r=!1},d(t){t&&u(n),Z(i,t)}}}function kd(t,e){let n,i,r;return i=new Xa({props:{bookmark:e[93],multiSelectMode:e[36],isSelected:e[35].has(e[93].id)}}),i.$on("toggle-select",e[51]),i.$on("delete",e[55]),{key:t,first:null,c(){n=b(),J(i.$$.fragment),this.first=n},m(t,e){h(t,n,e),Q(i,t,e),r=!0},p(t,n){e=t;const r={};1&n[0]&&(r.bookmark=e[93]),32&n[1]&&(r.multiSelectMode=e[36]),1&n[0]|16&n[1]&&(r.isSelected=e[35].has(e[93].id)),i.$set(r)},i(t){r||(q(i.$$.fragment,t),r=!0)},o(t){U(i.$$.fragment,t),r=!1},d(t){t&&u(n),Z(i,t)}}}function _d(t){let e,n,i,r;function s(t,e){return t[1]?Cd:Md}let o=s(t),a=o(t);return{c(){e=f("div"),n=f("button"),a.c(),n.disabled=t[1],x(n,"class","px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"),x(e,"class","mt-8 text-center")},m(s,o){h(s,e,o),c(e,n),a.m(n,null),i||(r=y(n,"click",t[39]),i=!0)},p(t,e){o!==(o=s(t))&&(a.d(1),a=o(t),a&&(a.c(),a.m(n,null))),2&e[0]&&(n.disabled=t[1])},d(t){t&&u(e),a.d(),i=!1,r()}}}function Md(t){let e;return{c(){e=g("Load More")},m(t,n){h(t,e,n)},d(t){t&&u(e)}}}function Cd(t){let e;return{c(){e=f("div"),e.innerHTML='<div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>\n                      Loading...',x(e,"class","flex items-center")},m(t,n){h(t,e,n)},d(t){t&&u(e)}}}function Sd(e){let n;return{c(){n=f("p"),n.textContent="No bookmarks found"},m(t,e){h(t,n,e)},p:t,d(t){t&&u(n)}}}function Ad(t){let e,n,i,r;return{c(){e=f("p"),n=g('No bookmarks found for "'),i=g(t[4]),r=g('"')},m(t,s){h(t,e,s),c(e,n),c(e,i),c(e,r)},p(t,e){16&e[0]&&w(i,t[4])},d(t){t&&u(e)}}}function Pd(t){let e,n,r,s,o,a,l,d,p,g,b,v,w,k,_,M,S,A,P,D,O,E,T;const L=[Jh,Gh,Xh],R=[];function B(t,e){return"bookmarks"===t[3]?0:"insights"===t[3]?1:"health"===t[3]?2:-1}return~(P=B(t))&&(D=R[P]=L[P](t)),{c(){e=m(),n=f("div"),r=f("header"),s=f("div"),o=f("div"),a=f("div"),l=f("h1"),l.textContent="Bookmark Insight",d=m(),p=f("button"),p.innerHTML='<svg class="w-4 h-4 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>\n            Export',g=m(),b=f("nav"),v=f("button"),v.textContent="Bookmarks",w=m(),k=f("button"),k.textContent="Insights",_=m(),M=f("button"),M.textContent="Health",S=m(),A=f("div"),D&&D.c(),Lh.title="Bookmark Insight Dashboard",x(l,"class","text-2xl font-bold text-gray-900"),x(p,"class","px-3 py-1 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"),x(p,"title","Export bookmarks to JSON"),x(a,"class","flex items-center space-x-4"),x(v,"class","px-4 py-2 rounded-md text-sm font-medium"),C(v,"bg-blue-100","bookmarks"===t[3]),C(v,"text-blue-700","bookmarks"===t[3]),C(v,"text-gray-500","bookmarks"!==t[3]),C(v,"hover:text-gray-700","bookmarks"!==t[3]),x(k,"class","px-4 py-2 rounded-md text-sm font-medium"),C(k,"bg-blue-100","insights"===t[3]),C(k,"text-blue-700","insights"===t[3]),C(k,"text-gray-500","insights"!==t[3]),C(k,"hover:text-gray-700","insights"!==t[3]),x(M,"class","px-4 py-2 rounded-md text-sm font-medium"),C(M,"bg-blue-100","health"===t[3]),C(M,"text-blue-700","health"===t[3]),C(M,"text-gray-500","health"!==t[3]),C(M,"hover:text-gray-700","health"!==t[3]),x(b,"class","flex space-x-4"),x(o,"class","flex justify-between items-center py-4"),x(s,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),x(r,"class","bg-white shadow-sm border-b border-gray-200"),x(A,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),x(n,"class","min-h-screen bg-gray-50")},m(i,u){h(i,e,u),h(i,n,u),c(n,r),c(r,s),c(s,o),c(o,a),c(a,l),c(a,d),c(a,p),c(o,g),c(o,b),c(b,v),c(b,w),c(b,k),c(b,_),c(b,M),c(n,S),c(n,A),~P&&R[P].m(A,null),O=!0,E||(T=[y(p,"click",t[62]),y(v,"click",t[63]),y(k,"click",t[64]),y(M,"click",t[65])],E=!0)},p(t,e){(!O||8&e[0])&&C(v,"bg-blue-100","bookmarks"===t[3]),(!O||8&e[0])&&C(v,"text-blue-700","bookmarks"===t[3]),(!O||8&e[0])&&C(v,"text-gray-500","bookmarks"!==t[3]),(!O||8&e[0])&&C(v,"hover:text-gray-700","bookmarks"!==t[3]),(!O||8&e[0])&&C(k,"bg-blue-100","insights"===t[3]),(!O||8&e[0])&&C(k,"text-blue-700","insights"===t[3]),(!O||8&e[0])&&C(k,"text-gray-500","insights"!==t[3]),(!O||8&e[0])&&C(k,"hover:text-gray-700","insights"!==t[3]),(!O||8&e[0])&&C(M,"bg-blue-100","health"===t[3]),(!O||8&e[0])&&C(M,"text-blue-700","health"===t[3]),(!O||8&e[0])&&C(M,"text-gray-500","health"!==t[3]),(!O||8&e[0])&&C(M,"hover:text-gray-700","health"!==t[3]);let n=P;P=B(t),P===n?~P&&R[P].p(t,e):(D&&(H(),U(R[n],1,1,()=>{R[n]=null}),K()),~P?(D=R[P],D?D.p(t,e):(D=R[P]=L[P](t),D.c()),q(D,1),D.m(A,null)):D=null)},i(t){O||(q(D),O=!0)},o(t){U(D),O=!1},d(t){t&&(u(e),u(n)),~P&&R[P].d(),E=!1,i(T)}}}const Dd=t=>t.domain;function Od(t,e,n){Os.register(...Oa);let i=[],r=!0,s=null,o="bookmarks",a="",l=0,c=0,h=!1,u="date_desc",d={domains:[],folders:[],dateRange:null,searchQuery:"",sortBy:"date_desc"},f=null,p=null,g=null,m=null,b=null,y=null,x=null,w=null,k=null,_=null,M=[],C=[],S=[],A=[],P=!1,O=null,E=null,T=!1,L=null,R=null,B=[],I=20,j=3,F=[],z=[],N=null,$=null,V=!1,W=!1,H=!1,K=10,q=10,U=10,Y=null,X=!1,G=!1,J=[],Q=!1,Z=null,tt=null,et=new Set,nt=!1,it="list";async function rt(t=0,e=!1){try{const r={...d},s=await async function(t=0,e=50,n={}){try{let i=await Ic();if(n.domains&&n.domains.length>0&&(i=i.filter(t=>n.domains.includes(t.domain))),n.folders&&n.folders.length>0&&(i=i.filter(t=>n.folders.includes(t.folderPath))),n.dateRange&&(i=i.filter(t=>t.dateAdded>=n.dateRange.startDate&&t.dateAdded<=n.dateRange.endDate)),n.searchQuery){const t=n.searchQuery.toLowerCase();i=i.filter(e=>e.title&&e.title.toLowerCase().includes(t)||e.url&&e.url.toLowerCase().includes(t)||e.domain&&e.domain.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}switch(n.category&&(i=i.filter(t=>t.category===n.category)),void 0!==n.isEnriched&&(i=n.isEnriched?i.filter(t=>t.lastChecked):i.filter(t=>!t.lastChecked)),n.sortBy||"date_desc"){case"date_asc":i.sort((t,e)=>t.dateAdded-e.dateAdded);break;case"title_asc":i.sort((t,e)=>(t.title||"").localeCompare(e.title||""));break;case"title_desc":i.sort((t,e)=>(e.title||"").localeCompare(t.title||""));break;case"domain_asc":i.sort((t,e)=>(t.domain||"").localeCompare(e.domain||""));break;case"accessed_desc":i.sort((t,e)=>(e.lastAccessed||0)-(t.lastAccessed||0));break;default:i.sort((t,e)=>e.dateAdded-t.dateAdded)}const r=t*e,s=r+e;return{bookmarks:i.slice(r,s),totalCount:i.length,hasMore:s<i.length,currentPage:t,totalPages:Math.ceil(i.length/e)}}catch(t){return console.error("Error getting paginated bookmarks:",t),{bookmarks:[],totalCount:0,hasMore:!1,currentPage:0,totalPages:0}}}(t,50,r);n(0,i=e?[...i,...s.bookmarks]:s.bookmarks),l=s.currentPage,n(5,c=s.totalCount),n(6,h=s.hasMore)}catch(t){throw console.error("Error loading bookmarks:",t),t}}async function st(t){n(7,u=t),n(8,d.sortBy=t,d);try{n(1,r=!0),l=0,await rt()}catch(t){n(2,s=t.message)}finally{n(1,r=!1)}}async function ot(t){n(3,o=t),n(1,r=!0);try{"bookmarks"===t?(l=0,await rt()):"insights"===t?await at():"health"===t&&await lt()}catch(t){n(2,s=t.message)}finally{n(1,r=!1)}}async function at(){try{const[t,e,i,r,s,o,a,l,c,h,u,d,v]=await Promise.all([jc(),Fc(),Hc(),Xc(),Vc(),Wc(),Gc(),Jc(),Qc(),Dh(),Oh(),Eh(),Th()]);n(30,Y=l),n(22,F=h),z=u,n(23,N=d),$=v,setTimeout(()=>{const n=document.getElementById("domainChart");n&&(f&&f.destroy(),f=new Os(n,{type:"bar",data:{labels:t.map(([t])=>t),datasets:[{label:"Bookmarks",data:t.map(([,t])=>t),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top 10 Most Bookmarked Domains"}},scales:{y:{beginAtZero:!0}}}}));const l=document.getElementById("domainDistributionChart");l&&(w&&w.destroy(),w=new Os(l,{type:"pie",data:{labels:c.map(t=>t.domain),datasets:[{data:c.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Distribution by Domain"},tooltip:{callbacks:{label(t){const e=c[t.dataIndex];return`${e.domain}: ${e.count} (${e.percentage}%)`}}}}}}));const d=document.getElementById("activityChart");d&&(p&&p.destroy(),p=new Os(d,{type:"line",data:{labels:e.map(([t])=>t),datasets:[{label:"Bookmarks Added",data:e.map(([,t])=>t),fill:!1,borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Activity Timeline"}},scales:{y:{beginAtZero:!0}}}}));const v=document.getElementById("wordCloudChart");v&&(g&&g.destroy(),g=new Os(v,{type:"bar",data:{labels:i.map(([t])=>t),datasets:[{label:"Frequency",data:i.map(([,t])=>t),backgroundColor:"rgba(168, 85, 247, 0.5)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:1}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Most Frequent Words in Bookmark Titles"}},scales:{x:{beginAtZero:!0}}}}));const M=document.getElementById("titlePatternsChart");M&&(m&&m.destroy(),m=new Os(M,{type:"doughnut",data:{labels:r.map(([t])=>t),datasets:[{data:r.map(([,t])=>t),backgroundColor:["#F59E0B","#10B981","#3B82F6","#EF4444","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Common Title Patterns & Types"}}}}));const C=document.getElementById("ageDistributionChart");C&&(b&&b.destroy(),b=new Os(C,{type:"bar",data:{labels:s.map(([t])=>t),datasets:[{label:"Bookmarks",data:s.map(([,t])=>t),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Age Distribution"}},scales:{y:{beginAtZero:!0}}}}));const S=document.getElementById("creationPatternsChart");S&&(y&&y.destroy(),y=new Os(S,{type:"radar",data:{labels:o.daily.map(([t])=>t),datasets:[{label:"Bookmarks Created",data:o.daily.map(([,t])=>t),backgroundColor:"rgba(245, 158, 11, 0.2)",borderColor:"rgba(245, 158, 11, 1)",borderWidth:2}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Creation Patterns by Day of Week"}},scales:{r:{beginAtZero:!0}}}}));const A=document.getElementById("urlPatternsChart");A&&(x&&x.destroy(),x=new Os(A,{type:"bar",data:{labels:a.topLevelDomains.map(([t])=>`.${t}`),datasets:[{label:"Count",data:a.topLevelDomains.map(([,t])=>t),backgroundColor:"rgba(236, 72, 153, 0.5)",borderColor:"rgba(236, 72, 153, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top Level Domains Distribution"}},scales:{y:{beginAtZero:!0}}}}));const P=document.getElementById("domainHierarchyChart");if(P&&h.length>0){k&&k.destroy();const t=h.slice(0,15);k=new Os(P,{type:"bar",data:{labels:t.map(t=>t.name),datasets:[{label:"Bookmarks",data:t.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4","#F43F5E","#22C55E","#A855F7","#0EA5E9"]}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Domain Hierarchy (Top 15 Domains)"},legend:{display:!1}},scales:{x:{beginAtZero:!0}}}})}const D=document.getElementById("freshnessChart");D&&u.length>0&&(_&&_.destroy(),_=new Os(D,{type:"doughnut",data:{labels:u.map(t=>t.period),datasets:[{data:u.map(t=>t.count),backgroundColor:["#22C55E","#84CC16","#F59E0B","#F97316","#EF4444"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Freshness"}}}}))},100)}catch(t){console.error("Error loading insights:",t)}}async function lt(){n(27,K=10),n(28,q=10),n(29,U=10);try{n(24,V=!0),n(25,W=!0),n(13,P=!0),n(26,H=!0),n(14,O=await Uc()),await ct(),Kc().then(t=>{n(9,M=t),n(24,V=!1)}).catch(t=>{console.error("Error loading duplicates:",t),n(24,V=!1)}),async function(){try{return(await Ic()).filter(t=>!1===t.isAlive)}catch(t){return console.error("Error getting dead links:",t),[]}}().then(t=>{n(12,A=t),n(13,P=!1)}).catch(t=>{console.error("Error loading dead links:",t),n(13,P=!1)}),qc().then(t=>{n(10,C=t),n(26,H=!1)}).catch(t=>{console.error("Error loading malformed URLs:",t),n(26,H=!1)}),async function(t=.7,e=100){try{const n=await Ic(),i=[],r=n.map(t=>({bookmark:t,words:new Set(t.title.toLowerCase().split(/\s+/).filter(t=>t.length>2))})).filter(t=>t.words.size>0);for(let n=0;n<r.length;n++){for(let e=n+1;e<r.length;e++){if(r[n].bookmark.url===r[e].bookmark.url)continue;const s=r[n].words,o=r[e].words,a=[...s].filter(t=>o.has(t)).length,l=2*a/(s.size+o.size);l>=t&&i.push([r[n].bookmark,r[e].bookmark,l])}if(i.length>=2*e)break}return i.sort((t,e)=>e[2]-t[2]).slice(0,e)}catch(t){return console.error("Error finding similar bookmarks:",t),[]}}().then(t=>{n(11,S=t),n(25,W=!1)}).catch(t=>{console.error("Error loading similar bookmarks:",t),n(25,W=!1)})}catch(t){console.error("Error loading health data:",t)}}async function ct(){try{const t=await chrome.runtime.sendMessage({action:"getEnrichmentStatus"});t.success&&n(15,E=t);const e=await async function(){try{return await Rc.settings.get("app")||Bc}catch(t){return console.error("Error getting settings:",t),Bc}}();e&&(n(20,I=e.enrichmentBatchSize||20),n(21,j=e.enrichmentConcurrency||3))}catch(t){console.error("Error loading enrichment status:",t)}}async function ht(t,e){try{const i=await chrome.bookmarks.get([t]);i&&i.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted similar bookmark: ${t}`)):console.log(`Bookmark ${t} no longer exists`),n(11,S=S.filter((t,n)=>n!==e))}catch(t){console.error("Error deleting bookmark:",t),n(11,S=S.filter((t,n)=>n!==e))}}async function ut(t,e){try{const i=await chrome.bookmarks.get([t]);i&&i.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted bookmark: ${t}`)):console.log(`Bookmark ${t} no longer exists`),n(9,M=M.map((n,i)=>i===e?n.filter(e=>e.id!==t):n).filter(t=>t.length>1))}catch(t){console.error("Error deleting bookmark:",t),n(24,V=!0),Kc().then(t=>{n(9,M=t),n(24,V=!1)})}}async function dt(t){if(confirm(`Restore auto-backup from ${J[t].createdAt}?\n\nThis will replace your current data.`)){n(32,G=!0);try{const e=await async function(t=0){try{const e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];if(t<0||t>=e.length)throw new Error(`Invalid backup index: ${t}. Available: 0-${e.length-1}`);const n={version:"2.1",...e[t]};return await th(n)}catch(t){throw console.error("Error restoring from auto-backup:",t),t}}(t);e.success&&(alert("Restore complete! Refreshing..."),window.location.reload())}catch(t){console.error("Error restoring auto-backup:",t),alert("Error: "+t.message)}finally{n(32,G=!1)}}}D(async()=>{try{await rt(),"insights"===o?await at():"health"===o&&await lt()}catch(t){n(2,s=t.message)}finally{n(1,r=!1)}chrome.runtime.onMessage.addListener((t,e,i)=>{if("enrichmentProgress"===t.action&&t.progress){n(18,R=t.progress);const e={timestamp:Date.now(),...t.progress};n(19,B=[...B,e]),B.length>100&&n(19,B=B.slice(-100))}})});return[i,r,s,o,a,c,h,u,d,M,C,S,A,P,O,E,T,L,R,B,I,j,F,N,V,W,H,K,q,U,Y,X,G,J,tt,et,nt,it,rt,async function(){if(h&&!r)try{n(1,r=!0),await rt(l+1,!0)}catch(t){n(2,s=t.message)}finally{n(1,r=!1)}},async function(t){const e=t.detail.query;n(4,a=e),n(8,d.searchQuery=e,d);try{n(1,r=!0),l=0,await rt()}catch(t){n(2,s=t.message)}finally{n(1,r=!1)}},async function(t){const e=t.detail;n(8,d={...d,...e});try{n(1,r=!0),l=0,await rt()}catch(t){n(2,s=t.message)}finally{n(1,r=!1)}},st,ot,async function(){n(16,T=!0),n(17,L=null),n(18,R=null),n(19,B=[]);try{console.log("Creating auto-backup before enrichment..."),await eh();const t=await chrome.runtime.sendMessage({action:"runEnrichment",batchSize:I,concurrency:j});t.success?(n(17,L=t.result),await ct()):n(17,L={error:t.error})}catch(t){console.error("Error running enrichment:",t),n(17,L={error:t.message})}finally{n(16,T=!1)}},ht,function(){n(27,K+=10)},function(){n(28,q+=10)},function(){n(29,U+=10)},ut,function(){n(36,nt=!nt),nt||(et.clear(),n(35,et))},function(t){const{bookmarkId:e,selected:i}=t.detail;i?et.add(e):et.delete(e),n(35,et)},function(){n(35,et=new Set(i.map(t=>t.id)))},function(){et.clear(),n(35,et)},async function(){if(0!==et.size&&confirm(`Are you sure you want to delete ${et.size} bookmark(s)?`))try{n(1,r=!0);const t=Array.from(et),e=await Yc(t);e.errors.length>0?(console.error("Some bookmarks could not be deleted:",e.errors),alert(`${e.success} bookmarks deleted successfully. ${e.errors.length} failed.`)):alert(`${e.success} bookmarks deleted successfully.`),et.clear(),n(35,et),n(36,nt=!1),l=0,await rt()}catch(t){console.error("Error deleting bookmarks:",t),alert("Error deleting bookmarks. Please try again.")}finally{n(1,r=!1)}},async function(t){const{bookmarkId:e}=t.detail;if(confirm("Are you sure you want to delete this bookmark?"))try{await async function(t){try{return await Rc.bookmarks.delete(t),!0}catch(t){return console.error("Error deleting bookmark:",t),!1}}(e),l=0,await rt()}catch(t){console.error("Error deleting bookmark:",t),alert("Error deleting bookmark. Please try again.")}},function(){n(37,it="list"===it?"card":"list")},async function(){n(31,X=!0);try{const t=await async function(){try{const t=await Zc(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),i=`bookmark-insights-backup-${(new Date).toISOString().slice(0,10)}.json`,r=document.createElement("a");return r.href=n,r.download=i,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),{success:!0,filename:i,metadata:t.metadata}}catch(t){throw console.error("Error downloading backup:",t),t}}();t.success&&alert(`Backup saved: ${t.filename}\n\nContains:\n- ${t.metadata.totalBookmarks} bookmarks\n- ${t.metadata.enrichedCount} enriched\n- ${t.metadata.categorizedCount} categorized`)}catch(t){console.error("Error creating backup:",t),alert("Error creating backup: "+t.message)}finally{n(31,X=!1)}},async function(){if(Z)if(tt&&tt.valid){if(confirm(`Restore backup from ${tt.createdAt}?\n\nThis will replace your current data with:\n- ${tt.metadata.totalBookmarks} bookmarks\n- ${tt.metadata.enrichedCount} enriched\n\nYour current data will be auto-backed up first.`)){n(32,G=!0);try{await eh();const t=await Z.text(),e=JSON.parse(t),i=await th(e);i.success&&(alert(`Restore complete!\n\n- ${i.results.bookmarksRestored} bookmarks restored\n- ${i.results.similaritiesRestored} similarities restored\n\nRefreshing...`),Q=!1,Z=null,n(34,tt=null),window.location.reload())}catch(t){console.error("Error restoring backup:",t),alert("Error restoring backup: "+t.message)}finally{n(32,G=!1)}}}else alert("Please select a valid backup file");else alert("Please select a backup file first")},async function(t){const e=t.target.files[0];if(e){Z=e;try{const t=await e.text(),i=JSON.parse(t);n(34,tt=function(t){const e=[];if(!t)return{valid:!1,issues:["Backup is empty or null"]};if(t.version||e.push("Missing version field"),t.data){if(t.data.bookmarks&&Array.isArray(t.data.bookmarks)||e.push("Missing or invalid bookmarks array"),t.data.bookmarks&&t.data.bookmarks.length>0){const n=t.data.bookmarks[0];n.id&&n.url||e.push("Bookmarks are missing required fields (id, url)")}}else e.push("Missing data field");return{valid:0===e.length,issues:e,metadata:t.metadata||null,version:t.version||"unknown",createdAt:t.createdAt||"unknown"}}(i))}catch(t){n(34,tt={valid:!1,issues:["Invalid JSON file"]})}}},async function(){n(33,J=await async function(){try{return((await chrome.storage.local.get(["autoBackups"])).autoBackups||[]).map((t,e)=>({index:e,createdAt:t.createdAt,metadata:t.metadata}))}catch(t){return console.error("Error listing auto-backups:",t),[]}}())},dt,async function(){try{const t=await async function(){try{const t=await Ic();return{exportDate:(new Date).toISOString(),version:"2.0",totalBookmarks:t.length,bookmarks:t}}catch(t){throw console.error("Error exporting bookmarks:",t),t}}(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=`bookmarks-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}catch(t){console.error("Error exporting bookmarks:",t),alert("Error exporting bookmarks. Please try again.")}},()=>ot("bookmarks"),()=>ot("insights"),()=>ot("health"),()=>rt(),function(){u=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),n(7,u)},t=>st(t.target.value),function(){I=v(this.value),n(20,I)},function(){j=v(this.value),n(21,j)},(t,e)=>ut(t.id,e),(t,e)=>ht(t.id,e),(t,e)=>ht(t.id,e),t=>dt(t)]}const Ed=new class extends nt{constructor(t){super(),et(this,t,Od,Pd,s,{},null,[-1,-1,-1,-1,-1])}}({target:document.body});var Td=Object.freeze({__proto__:null,default:{}});export{Ed as default};
//# sourceMappingURL=dashboard.js.map
