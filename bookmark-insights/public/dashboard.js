function t(){}function e(t){return t()}function r(){return Object.create(null)}function n(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s;function a(t,e){return t===e||(s||(s=document.createElement("a")),s.href=e,t===s.href)}function l(e,...r){if(null==e){for(const t of r)t(void 0);return t}const n=e.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}function c(t,e,r){t.$$.on_destroy.push(l(e,r))}function d(t,e,r,n){if(t){const i=u(t,e,r,n);return t[0](i)}}function u(t,e,r,n){return t[1]&&n?function(t,e){for(const r in e)t[r]=e[r];return t}(r.ctx.slice(),t[1](n(e))):r.ctx}function h(t,e,r,n){if(t[2]&&n){const i=t[2](n(r));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],r=Math.max(e.dirty.length,i.length);for(let n=0;n<r;n+=1)t[n]=e.dirty[n]|i[n];return t}return e.dirty|i}return e.dirty}function g(t,e,r,n,i,o){if(i){const s=u(e,r,n,o);t.p(s,i)}}function f(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let t=0;t<r;t++)e[t]=-1;return e}return-1}const p="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function m(t,e){t.appendChild(e)}function b(t,e,r){t.insertBefore(e,r||null)}function y(t){t.parentNode&&t.parentNode.removeChild(t)}function x(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function v(t){return document.createElement(t)}function k(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function w(t){return document.createTextNode(t)}function _(){return w(" ")}function C(){return w("")}function M(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function S(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function A(t,e,r){null==r?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function D(t){return""===t?null:+t}function T(t,e){e=""+e,t.data!==e&&(t.data=e)}function P(t,e){t.value=null==e?"":e}function L(t,e,r,n){null==r?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function E(t,e,r){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===e)return void(n.selected=!0)}r&&void 0===e||(t.selectedIndex=-1)}function O(t){const e=t.querySelector(":checked");return e&&e.__value}function R(t,e,r){t.classList.toggle(e,!!r)}let B;function j(t){B=t}function $(){if(!B)throw new Error("Function called outside component initialization");return B}function z(t){$().$$.on_mount.push(t)}function I(){const t=$();return(e,r,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=function(t,e,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:n})}(e,r,{cancelable:n});return i.slice().forEach(e=>{e.call(t,o)}),!o.defaultPrevented}return!0}}function F(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach(t=>t.call(this,e))}const N=[],W=[];let H=[];const V=[],q=Promise.resolve();let U=!1;function K(t){H.push(t)}const Y=new Set;let Q=0;function J(){if(0!==Q)return;const t=B;do{try{for(;Q<N.length;){const t=N[Q];Q++,j(t),X(t.$$)}}catch(t){throw N.length=0,Q=0,t}for(j(null),N.length=0,Q=0;W.length;)W.pop()();for(let t=0;t<H.length;t+=1){const e=H[t];Y.has(e)||(Y.add(e),e())}H.length=0}while(N.length);for(;V.length;)V.pop()();U=!1,Y.clear(),j(t)}function X(t){if(null!==t.fragment){t.update(),n(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}const G=new Set;let Z;function tt(){Z={r:0,c:[],p:Z}}function et(){Z.r||n(Z.c),Z=Z.p}function rt(t,e){t&&t.i&&(G.delete(t),t.i(e))}function nt(t,e,r,n){if(t&&t.o){if(G.has(t))return;G.add(t),Z.c.push(()=>{G.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}function it(t){return void 0!==t?.length?t:Array.from(t)}function ot(t,e){nt(t,1,1,()=>{e.delete(t.key)})}function st(t,e,r,i,o,s,a,l,c,d,u,h){let g=t.length,f=s.length,p=g;const m={};for(;p--;)m[t[p].key]=p;const b=[],y=new Map,x=new Map,v=[];for(p=f;p--;){const t=h(o,s,p),n=r(t);let l=a.get(n);l?i&&v.push(()=>l.p(t,e)):(l=d(n,t),l.c()),y.set(n,b[p]=l),n in m&&x.set(n,Math.abs(p-m[n]))}const k=new Set,w=new Set;function _(t){rt(t,1),t.m(l,u),a.set(t.key,t),u=t.first,f--}for(;g&&f;){const e=b[f-1],r=t[g-1],n=e.key,i=r.key;e===r?(u=e.first,g--,f--):y.has(i)?!a.has(n)||k.has(n)?_(e):w.has(i)?g--:x.get(n)>x.get(i)?(w.add(n),_(e)):(k.add(i),g--):(c(r,a),g--)}for(;g--;){const e=t[g];y.has(e.key)||c(e,a)}for(;f;)_(b[f-1]);return n(v),b}function at(t){t&&t.c()}function lt(t,r,o){const{fragment:s,after_update:a}=t.$$;s&&s.m(r,o),K(()=>{const r=t.$$.on_mount.map(e).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...r):n(r),t.$$.on_mount=[]}),a.forEach(K)}function ct(t,e){const r=t.$$;null!==r.fragment&&(!function(t){const e=[],r=[];H.forEach(n=>-1===t.indexOf(n)?e.push(n):r.push(n)),r.forEach(t=>t()),H=e}(r.after_update),n(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function dt(t,e){-1===t.$$.dirty[0]&&(N.push(t),U||(U=!0,q.then(J)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ut(e,i,o,s,a,l,c=null,d=[-1]){const u=B;j(e);const h=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(u?u.$$.context:[])),callbacks:r(),dirty:d,skip_bound:!1,root:i.target||u.$$.root};c&&c(h.root);let g=!1;if(h.ctx=o?o(e,i.props||{},(t,r,...n)=>{const i=n.length?n[0]:r;return h.ctx&&a(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),g&&dt(e,t)),r}):[],h.update(),g=!0,n(h.before_update),h.fragment=!!s&&s(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(y)}else h.fragment&&h.fragment.c();i.intro&&rt(e.$$.fragment),lt(e,i.target,i.anchor),J()}j(u)}class ht{$$=void 0;$$set=void 0;$destroy(){ct(this,1),this.$destroy=t}$on(e,r){if(!i(r))return t;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const t=n.indexOf(r);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function gt(t){return t+.5|0}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const ft=(t,e,r)=>Math.max(Math.min(t,r),e);function pt(t){return ft(gt(2.55*t),0,255)}function mt(t){return ft(gt(255*t),0,255)}function bt(t){return ft(gt(t/2.55)/100,0,1)}function yt(t){return ft(gt(100*t),0,100)}const xt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vt=[..."0123456789ABCDEF"],kt=t=>vt[15&t],wt=t=>vt[(240&t)>>4]+vt[15&t],_t=t=>(240&t)>>4==(15&t);function Ct(t){var e=(t=>_t(t.r)&&_t(t.g)&&_t(t.b)&&_t(t.a))(t)?kt:wt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const Mt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function St(t,e,r){const n=e*Math.min(r,1-r),i=(e,i=(e+t/30)%12)=>r-n*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function At(t,e,r){const n=(n,i=(n+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function Dt(t,e,r){const n=St(t,1,.5);let i;for(e+r>1&&(i=1/(e+r),e*=i,r*=i),i=0;i<3;i++)n[i]*=1-e-r,n[i]+=e;return n}function Tt(t){const e=t.r/255,r=t.g/255,n=t.b/255,i=Math.max(e,r,n),o=Math.min(e,r,n),s=(i+o)/2;let a,l,c;return i!==o&&(c=i-o,l=s>.5?c/(2-i-o):c/(i+o),a=function(t,e,r,n,i){return t===i?(e-r)/n+(e<r?6:0):e===i?(r-t)/n+2:(t-e)/n+4}(e,r,n,c,i),a=60*a+.5),[0|a,l||0,s]}function Pt(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(mt)}function Lt(t,e,r){return Pt(St,t,e,r)}function Et(t){return(t%360+360)%360}function Ot(t){const e=Mt.exec(t);let r,n=255;if(!e)return;e[5]!==r&&(n=e[6]?pt(+e[5]):mt(+e[5]));const i=Et(+e[2]),o=+e[3]/100,s=+e[4]/100;return r="hwb"===e[1]?function(t,e,r){return Pt(Dt,t,e,r)}(i,o,s):"hsv"===e[1]?function(t,e,r){return Pt(At,t,e,r)}(i,o,s):Lt(i,o,s),{r:r[0],g:r[1],b:r[2],a:n}}const Rt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Bt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let jt;function $t(t){jt||(jt=function(){const t={},e=Object.keys(Bt),r=Object.keys(Rt);let n,i,o,s,a;for(n=0;n<e.length;n++){for(s=a=e[n],i=0;i<r.length;i++)o=r[i],a=a.replace(o,Rt[o]);o=parseInt(Bt[s],16),t[a]=[o>>16&255,o>>8&255,255&o]}return t}(),jt.transparent=[0,0,0,0]);const e=jt[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const zt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const It=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Ft=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Nt(t,e,r){if(t){let n=Tt(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,0===e?360:1)),n=Lt(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Wt(t,e){return t?Object.assign(e||{},t):t}function Ht(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=mt(t[3]))):(e=Wt(t,{r:0,g:0,b:0,a:1})).a=mt(e.a),e}function Vt(t){return"r"===t.charAt(0)?function(t){const e=zt.exec(t);let r,n,i,o=255;if(e){if(e[7]!==r){const t=+e[7];o=e[8]?pt(t):ft(255*t,0,255)}return r=+e[1],n=+e[3],i=+e[5],r=255&(e[2]?pt(r):ft(r,0,255)),n=255&(e[4]?pt(n):ft(n,0,255)),i=255&(e[6]?pt(i):ft(i,0,255)),{r:r,g:n,b:i,a:o}}}(t):Ot(t)}class qt{constructor(t){if(t instanceof qt)return t;const e=typeof t;let r;var n,i,o;"object"===e?r=Ht(t):"string"===e&&(o=(n=t).length,"#"===n[0]&&(4===o||5===o?i={r:255&17*xt[n[1]],g:255&17*xt[n[2]],b:255&17*xt[n[3]],a:5===o?17*xt[n[4]]:255}:7!==o&&9!==o||(i={r:xt[n[1]]<<4|xt[n[2]],g:xt[n[3]]<<4|xt[n[4]],b:xt[n[5]]<<4|xt[n[6]],a:9===o?xt[n[7]]<<4|xt[n[8]]:255})),r=i||$t(t)||Vt(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=Wt(this._rgb);return t&&(t.a=bt(t.a)),t}set rgb(t){this._rgb=Ht(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${bt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?Ct(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=Tt(t),r=e[0],n=yt(e[1]),i=yt(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${i}%, ${bt(t.a)})`:`hsl(${r}, ${n}%, ${i}%)`}(this._rgb):void 0}mix(t,e){if(t){const r=this.rgb,n=t.rgb;let i;const o=e===i?.5:e,s=2*o-1,a=r.a-n.a,l=((s*a===-1?s:(s+a)/(1+s*a))+1)/2;i=1-l,r.r=255&l*r.r+i*n.r+.5,r.g=255&l*r.g+i*n.g+.5,r.b=255&l*r.b+i*n.b+.5,r.a=o*r.a+(1-o)*n.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,r){const n=Ft(bt(t.r)),i=Ft(bt(t.g)),o=Ft(bt(t.b));return{r:mt(It(n+r*(Ft(bt(e.r))-n))),g:mt(It(i+r*(Ft(bt(e.g))-i))),b:mt(It(o+r*(Ft(bt(e.b))-o))),a:t.a+r*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new qt(this.rgb)}alpha(t){return this._rgb.a=mt(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=gt(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Nt(this._rgb,2,t),this}darken(t){return Nt(this._rgb,2,-t),this}saturate(t){return Nt(this._rgb,1,t),this}desaturate(t){return Nt(this._rgb,1,-t),this}rotate(t){return function(t,e){var r=Tt(t);r[0]=Et(r[0]+e),r=Lt(r),t.r=r[0],t.g=r[1],t.b=r[2]}(this._rgb,t),this}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ut(){}const Kt=(()=>{let t=0;return()=>t++})();function Yt(t){return null==t}function Qt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Jt(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Xt(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function Gt(t,e){return Xt(t)?t:e}function Zt(t,e){return void 0===t?e:t}const te=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ee(t,e,r){if(t&&"function"==typeof t.call)return t.apply(r,e)}function re(t,e,r,n){let i,o,s;if(Qt(t))if(o=t.length,n)for(i=o-1;i>=0;i--)e.call(r,t[i],i);else for(i=0;i<o;i++)e.call(r,t[i],i);else if(Jt(t))for(s=Object.keys(t),o=s.length,i=0;i<o;i++)e.call(r,t[s[i]],s[i])}function ne(t,e){let r,n,i,o;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(i=t[r],o=e[r],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function ie(t){if(Qt(t))return t.map(ie);if(Jt(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let i=0;for(;i<n;++i)e[r[i]]=ie(t[r[i]]);return e}return t}function oe(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function se(t,e,r,n){if(!oe(t))return;const i=e[t],o=r[t];Jt(i)&&Jt(o)?ae(i,o,n):e[t]=ie(o)}function ae(t,e,r){const n=Qt(e)?e:[e],i=n.length;if(!Jt(t))return t;const o=(r=r||{}).merger||se;let s;for(let e=0;e<i;++e){if(s=n[e],!Jt(s))continue;const i=Object.keys(s);for(let e=0,n=i.length;e<n;++e)o(i[e],t,s,r)}return t}function le(t,e){return ae(t,e,{merger:ce})}function ce(t,e,r){if(!oe(t))return;const n=e[t],i=r[t];Jt(n)&&Jt(i)?le(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ie(i))}const de={"":t=>t,x:t=>t.x,y:t=>t.y};function ue(t,e){const r=de[e]||(de[e]=function(t){const e=function(t){const e=t.split("."),r=[];let n="";for(const t of e)n+=t,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}(t);return t=>{for(const r of e){if(""===r)break;t=t&&t[r]}return t}}(e));return r(t)}function he(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ge=t=>void 0!==t,fe=t=>"function"==typeof t,pe=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};const me=Math.PI,be=2*me,ye=be+me,xe=Number.POSITIVE_INFINITY,ve=me/180,ke=me/2,we=me/4,_e=2*me/3,Ce=Math.log10,Me=Math.sign;function Se(t,e,r){return Math.abs(t-e)<r}function Ae(t){const e=Math.round(t);t=Se(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(Ce(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function De(t){return!function(t){return"symbol"==typeof t||"object"==typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Te(t,e,r){let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n][r],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Pe(t){return t*(me/180)}function Le(t){return t*(180/me)}function Ee(t){if(!Xt(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function Oe(t,e){const r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n);let o=Math.atan2(n,r);return o<-.5*me&&(o+=be),{angle:o,distance:i}}function Re(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Be(t,e){return(t-e+ye)%be-me}function je(t){return(t%be+be)%be}function $e(t,e,r,n){const i=je(t),o=je(e),s=je(r),a=je(o-i),l=je(s-i),c=je(i-o),d=je(i-s);return i===o||i===s||n&&o===s||a>l&&c<d}function ze(t,e,r){return Math.max(e,Math.min(r,t))}function Ie(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function Fe(t,e,r){r=r||(r=>t[r]<e);let n,i=t.length-1,o=0;for(;i-o>1;)n=o+i>>1,r(n)?o=n:i=n;return{lo:o,hi:i}}const Ne=(t,e,r,n)=>Fe(t,r,n?n=>{const i=t[n][e];return i<r||i===r&&t[n+1][e]===r}:n=>t[n][e]<r),We=(t,e,r)=>Fe(t,r,n=>t[n][e]>=r);const He=["push","pop","shift","splice","unshift"];function Ve(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,i=n.indexOf(e);-1!==i&&n.splice(i,1),n.length>0||(He.forEach(e=>{delete t[e]}),delete t._chartjs)}function qe(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ue="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Ke(t,e){let r=[],n=!1;return function(...i){r=i,n||(n=!0,Ue.call(window,()=>{n=!1,t.apply(e,r)}))}}const Ye=t=>"start"===t?"left":"end"===t?"right":"center",Qe=(t,e,r)=>"start"===t?e:"end"===t?r:(e+r)/2;function Je(t,e,r){const n=e.length;let i=0,o=n;if(t._sorted){const{iScale:s,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=s.axis,{min:u,max:h,minDefined:g,maxDefined:f}=s.getUserBounds();if(g){if(i=Math.min(Ne(l,d,u).lo,r?n:Ne(e,d,s.getPixelForValue(u)).lo),c){const t=l.slice(0,i+1).reverse().findIndex(t=>!Yt(t[a.axis]));i-=Math.max(0,t)}i=ze(i,0,n-1)}if(f){let t=Math.max(Ne(l,s.axis,h,!0).hi+1,r?0:Ne(e,d,s.getPixelForValue(h),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!Yt(t[a.axis]));t+=Math.max(0,e)}o=ze(t,i,n)-i}else o=n-i}return{start:i,count:o}}function Xe(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=i,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,i),o}const Ge=t=>0===t||1===t,Ze=(t,e,r)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*be/r),tr=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*be/r)+1,er={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*ke),easeOutSine:t=>Math.sin(t*ke),easeInOutSine:t=>-.5*(Math.cos(me*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ge(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ge(t)?t:Ze(t,.075,.3),easeOutElastic:t=>Ge(t)?t:tr(t,.075,.3),easeInOutElastic(t){const e=.1125;return Ge(t)?t:t<.5?.5*Ze(2*t,e,.45):.5+.5*tr(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-er.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,r=2.75;return t<1/r?e*t*t:t<2/r?e*(t-=1.5/r)*t+.75:t<2.5/r?e*(t-=2.25/r)*t+.9375:e*(t-=2.625/r)*t+.984375},easeInOutBounce:t=>t<.5?.5*er.easeInBounce(2*t):.5*er.easeOutBounce(2*t-1)+.5};function rr(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function nr(t){return rr(t)?t:new qt(t)}function ir(t){return rr(t)?t:new qt(t).saturate(.5).darken(.1).hexString()}const or=["x","y","borderWidth","radius","tension"],sr=["color","borderColor","backgroundColor"];const ar=new Map;function lr(t,e,r){return function(t,e){e=e||{};const r=t+JSON.stringify(e);let n=ar.get(r);return n||(n=new Intl.NumberFormat(t,e),ar.set(r,n)),n}(e,r).format(t)}const cr={values:t=>Qt(t)?t:""+t,numeric(t,e,r){if(0===t)return"0";const n=this.chart.options.locale;let i,o=t;if(r.length>1){const e=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),o=function(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t));return r}(t,r)}const s=Ce(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),lr(t,n,l)},logarithmic(t,e,r){if(0===t)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(Ce(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?cr.numeric.call(this,t,e,r):""}};var dr={formatters:cr};const ur=Object.create(null),hr=Object.create(null);function gr(t,e){if(!e)return t;const r=e.split(".");for(let e=0,n=r.length;e<n;++e){const n=r[e];t=t[n]||(t[n]=Object.create(null))}return t}function fr(t,e,r){return"string"==typeof e?ae(gr(t,e),r):ae(gr(t,""),e)}class pr{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>ir(e.backgroundColor),this.hoverBorderColor=(t,e)=>ir(e.borderColor),this.hoverColor=(t,e)=>ir(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return fr(this,t,e)}get(t){return gr(this,t)}describe(t,e){return fr(hr,t,e)}override(t,e){return fr(ur,t,e)}route(t,e,r,n){const i=gr(this,t),o=gr(this,r),s="_"+e;Object.defineProperties(i,{[s]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=o[n];return Jt(t)?Object.assign({},e,t):Zt(t,e)},set(t){this[s]=t}}})}apply(t){t.forEach(t=>t(this))}}var mr=new pr({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:sr},numbers:{type:"number",properties:or}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function br(t,e,r,n,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,r.push(i)),o>n&&(n=o),n}function yr(t,e,r,n){let i=(n=n||{}).data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let s=0;const a=r.length;let l,c,d,u,h;for(l=0;l<a;l++)if(u=r[l],null==u||Qt(u)){if(Qt(u))for(c=0,d=u.length;c<d;c++)h=u[c],null==h||Qt(h)||(s=br(t,i,o,s,h))}else s=br(t,i,o,s,u);t.restore();const g=o.length/2;if(g>r.length){for(l=0;l<g;l++)delete i[o[l]];o.splice(0,g)}return s}function xr(t,e,r){const n=t.currentDevicePixelRatio,i=0!==r?Math.max(r/2,.5):0;return Math.round((e-i)*n)/n+i}function vr(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function kr(t,e,r,n){wr(t,e,r,n,null)}function wr(t,e,r,n,i){let o,s,a,l,c,d,u,h;const g=e.pointStyle,f=e.rotation,p=e.radius;let m=(f||0)*ve;if(g&&"object"==typeof g&&(o=g.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(r,n),t.rotate(m),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),void t.restore();if(!(isNaN(p)||p<=0)){switch(t.beginPath(),g){default:i?t.ellipse(r,n,i/2,p,0,0,be):t.arc(r,n,p,0,be),t.closePath();break;case"triangle":d=i?i/2:p,t.moveTo(r+Math.sin(m)*d,n-Math.cos(m)*p),m+=_e,t.lineTo(r+Math.sin(m)*d,n-Math.cos(m)*p),m+=_e,t.lineTo(r+Math.sin(m)*d,n-Math.cos(m)*p),t.closePath();break;case"rectRounded":c=.516*p,l=p-c,s=Math.cos(m+we)*l,u=Math.cos(m+we)*(i?i/2-c:l),a=Math.sin(m+we)*l,h=Math.sin(m+we)*(i?i/2-c:l),t.arc(r-u,n-a,c,m-me,m-ke),t.arc(r+h,n-s,c,m-ke,m),t.arc(r+u,n+a,c,m,m+ke),t.arc(r-h,n+s,c,m+ke,m+me),t.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*p,d=i?i/2:l,t.rect(r-d,n-l,2*d,2*l);break}m+=we;case"rectRot":u=Math.cos(m)*(i?i/2:p),s=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(r-u,n-a),t.lineTo(r+h,n-s),t.lineTo(r+u,n+a),t.lineTo(r-h,n+s),t.closePath();break;case"crossRot":m+=we;case"cross":u=Math.cos(m)*(i?i/2:p),s=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(r-u,n-a),t.lineTo(r+u,n+a),t.moveTo(r+h,n-s),t.lineTo(r-h,n+s);break;case"star":u=Math.cos(m)*(i?i/2:p),s=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(r-u,n-a),t.lineTo(r+u,n+a),t.moveTo(r+h,n-s),t.lineTo(r-h,n+s),m+=we,u=Math.cos(m)*(i?i/2:p),s=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(r-u,n-a),t.lineTo(r+u,n+a),t.moveTo(r+h,n-s),t.lineTo(r-h,n+s);break;case"line":s=i?i/2:Math.cos(m)*p,a=Math.sin(m)*p,t.moveTo(r-s,n-a),t.lineTo(r+s,n+a);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(m)*(i?i/2:p),n+Math.sin(m)*p);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function _r(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function Cr(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Mr(t){t.restore()}function Sr(t,e,r,n,i){if(!e)return t.lineTo(r.x,r.y);if("middle"===i){const n=(e.x+r.x)/2;t.lineTo(n,e.y),t.lineTo(n,r.y)}else"after"===i!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function Ar(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function Dr(t,e,r,n,i){if(i.strikethrough||i.underline){const o=t.measureText(n),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=r-o.actualBoundingBoxAscent,c=r+o.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(s,d),t.lineTo(a,d),t.stroke()}}function Tr(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Pr(t,e,r,n,i,o={}){const s=Qt(e)?e:[e],a=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Yt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<s.length;++l)c=s[l],o.backdrop&&Tr(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Yt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,r,n,o.maxWidth)),t.fillText(c,r,n,o.maxWidth),Dr(t,r,n,c,o),n+=Number(i.lineHeight);t.restore()}function Lr(t,e){const{x:r,y:n,w:i,h:o,radius:s}=e;t.arc(r+s.topLeft,n+s.topLeft,s.topLeft,1.5*me,me,!0),t.lineTo(r,n+o-s.bottomLeft),t.arc(r+s.bottomLeft,n+o-s.bottomLeft,s.bottomLeft,me,ke,!0),t.lineTo(r+i-s.bottomRight,n+o),t.arc(r+i-s.bottomRight,n+o-s.bottomRight,s.bottomRight,ke,0,!0),t.lineTo(r+i,n+s.topRight),t.arc(r+i-s.topRight,n+s.topRight,s.topRight,0,-ke,!0),t.lineTo(r+s.topLeft,n)}const Er=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Or=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Rr(t,e){const r=(""+t).match(Er);if(!r||"normal"===r[1])return 1.2*e;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100}return e*t}const Br=t=>+t||0;function jr(t,e){const r={},n=Jt(e),i=n?Object.keys(e):e,o=Jt(t)?n?r=>Zt(t[r],t[e[r]]):e=>t[e]:()=>t;for(const t of i)r[t]=Br(o(t));return r}function $r(t){return jr(t,{top:"y",right:"x",bottom:"y",left:"x"})}function zr(t){return jr(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ir(t){const e=$r(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Fr(t,e){t=t||{},e=e||mr.font;let r=Zt(t.size,e.size);"string"==typeof r&&(r=parseInt(r,10));let n=Zt(t.style,e.style);n&&!(""+n).match(Or)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:Zt(t.family,e.family),lineHeight:Rr(Zt(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:Zt(t.weight,e.weight),string:""};return i.string=function(t){return!t||Yt(t.size)||Yt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function Nr(t,e,r,n){let i,o,s,a=!0;for(i=0,o=t.length;i<o;++i)if(s=t[i],void 0!==s&&(void 0!==e&&"function"==typeof s&&(s=s(e),a=!1),void 0!==r&&Qt(s)&&(s=s[r%s.length],a=!1),void 0!==s))return n&&!a&&(n.cacheable=!1),s}function Wr(t,e){return Object.assign(Object.create(t),e)}function Hr(t,e=[""],r,n,i=()=>t[0]){const o=r||t;void 0===n&&(n=tn("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:n,_getTarget:i,override:r=>Hr([r,...t],e,o,n)};return new Proxy(s,{deleteProperty:(e,r)=>(delete e[r],delete e._keys,delete t[0][r],!0),get:(r,n)=>Yr(r,n,()=>function(t,e,r,n){let i;for(const o of e)if(i=tn(Ur(o,t),r),void 0!==i)return Kr(t,i)?Gr(r,n,t,i):i}(n,e,t,r)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>en(t).includes(e),ownKeys:t=>en(t),set(t,e,r){const n=t._storage||(t._storage=i());return t[e]=n[e]=r,delete t._keys,!0}})}function Vr(t,e,r,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:qr(t,n),setContext:e=>Vr(t,e,r,n),override:i=>Vr(t.override(i),e,r,n)};return new Proxy(i,{deleteProperty:(e,r)=>(delete e[r],delete t[r],!0),get:(t,e,r)=>Yr(t,e,()=>function(t,e,r){const{_proxy:n,_context:i,_subProxy:o,_descriptors:s}=t;let a=n[e];fe(a)&&s.isScriptable(e)&&(a=function(t,e,r,n){const{_proxy:i,_context:o,_subProxy:s,_stack:a}=r;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(o,s||n);a.delete(t),Kr(t,l)&&(l=Gr(i._scopes,i,t,l));return l}(e,a,t,r));Qt(a)&&a.length&&(a=function(t,e,r,n){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=r;if(void 0!==o.index&&n(t))return e[o.index%e.length];if(Jt(e[0])){const r=e,n=i._scopes.filter(t=>t!==r);e=[];for(const l of r){const r=Gr(n,i,t,l);e.push(Vr(r,o,s&&s[t],a))}}return e}(e,a,t,s.isIndexable));Kr(e,a)&&(a=Vr(a,i,o&&o[e],s));return a}(t,e,r)),getOwnPropertyDescriptor:(e,r)=>e._descriptors.allKeys?Reflect.has(t,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,r),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,r)=>Reflect.has(t,r),ownKeys:()=>Reflect.ownKeys(t),set:(e,r,n)=>(t[r]=n,delete e[r],!0)})}function qr(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:r,indexable:n,isScriptable:fe(r)?r:()=>r,isIndexable:fe(n)?n:()=>n}}const Ur=(t,e)=>t?t+he(e):e,Kr=(t,e)=>Jt(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Yr(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const n=r();return t[e]=n,n}function Qr(t,e,r){return fe(t)?t(e,r):t}const Jr=(t,e)=>!0===t?e:"string"==typeof t?ue(e,t):void 0;function Xr(t,e,r,n,i){for(const o of e){const e=Jr(r,o);if(e){t.add(e);const o=Qr(e._fallback,r,i);if(void 0!==o&&o!==r&&o!==n)return o}else if(!1===e&&void 0!==n&&r!==n)return null}return!1}function Gr(t,e,r,n){const i=e._rootScopes,o=Qr(e._fallback,r,n),s=[...t,...i],a=new Set;a.add(n);let l=Zr(a,s,r,o||r,n);return null!==l&&((void 0===o||o===r||(l=Zr(a,s,o,l,n),null!==l))&&Hr(Array.from(a),[""],i,o,()=>function(t,e,r){const n=t._getTarget();e in n||(n[e]={});const i=n[e];if(Qt(i)&&Jt(r))return r;return i||{}}(e,r,n)))}function Zr(t,e,r,n,i){for(;r;)r=Xr(t,e,r,n,i);return r}function tn(t,e){for(const r of e){if(!r)continue;const e=r[t];if(void 0!==e)return e}}function en(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const r of t)for(const t of Object.keys(r).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function rn(t,e,r,n){const{iScale:i}=t,{key:o="r"}=this._parsing,s=new Array(n);let a,l,c,d;for(a=0,l=n;a<l;++a)c=a+r,d=e[c],s[a]={r:i.parse(ue(d,o),c)};return s}const nn=Number.EPSILON||1e-14,on=(t,e)=>e<t.length&&!t[e].skip&&t[e],sn=t=>"x"===t?"y":"x";function an(t,e,r,n){const i=t.skip?e:t,o=e,s=r.skip?e:r,a=Re(o,i),l=Re(s,o);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,h=n*d;return{previous:{x:o.x-u*(s.x-i.x),y:o.y-u*(s.y-i.y)},next:{x:o.x+h*(s.x-i.x),y:o.y+h*(s.y-i.y)}}}function ln(t,e="x"){const r=sn(e),n=t.length,i=Array(n).fill(0),o=Array(n);let s,a,l,c=on(t,0);for(s=0;s<n;++s)if(a=l,l=c,c=on(t,s+1),l){if(c){const t=c[e]-l[e];i[s]=0!==t?(c[r]-l[r])/t:0}o[s]=a?c?Me(i[s-1])!==Me(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(t,e,r){const n=t.length;let i,o,s,a,l,c=on(t,0);for(let d=0;d<n-1;++d)l=c,c=on(t,d+1),l&&c&&(Se(e[d],0,nn)?r[d]=r[d+1]=0:(i=r[d]/e[d],o=r[d+1]/e[d],a=Math.pow(i,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),r[d]=i*s*e[d],r[d+1]=o*s*e[d])))}(t,i,o),function(t,e,r="x"){const n=sn(r),i=t.length;let o,s,a,l=on(t,0);for(let c=0;c<i;++c){if(s=a,a=l,l=on(t,c+1),!a)continue;const i=a[r],d=a[n];s&&(o=(i-s[r])/3,a[`cp1${r}`]=i-o,a[`cp1${n}`]=d-o*e[c]),l&&(o=(l[r]-i)/3,a[`cp2${r}`]=i+o,a[`cp2${n}`]=d+o*e[c])}}(t,o,e)}function cn(t,e,r){return Math.max(Math.min(t,r),e)}function dn(t,e,r,n,i){let o,s,a,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)ln(t,i);else{let r=n?t[t.length-1]:t[0];for(o=0,s=t.length;o<s;++o)a=t[o],l=an(r,a,t[Math.min(o+1,s-(n?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,r=a}e.capBezierPoints&&function(t,e){let r,n,i,o,s,a=_r(t[0],e);for(r=0,n=t.length;r<n;++r)s=o,o=a,a=r<n-1&&_r(t[r+1],e),o&&(i=t[r],s&&(i.cp1x=cn(i.cp1x,e.left,e.right),i.cp1y=cn(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=cn(i.cp2x,e.left,e.right),i.cp2y=cn(i.cp2y,e.top,e.bottom)))}(t,r)}function un(){return"undefined"!=typeof window&&"undefined"!=typeof document}function hn(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function gn(t,e,r){let n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[r])):n=t,n}const fn=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const pn=["top","right","bottom","left"];function mn(t,e,r){const n={};r=r?"-"+r:"";for(let i=0;i<4;i++){const o=pn[i];n[o]=parseFloat(t[e+"-"+o+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function bn(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,i=fn(r),o="border-box"===i.boxSizing,s=mn(i,"padding"),a=mn(i,"border","width"),{x:l,y:c,box:d}=function(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:i,offsetY:o}=n;let s,a,l=!1;if(((t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot))(i,o,t.target))s=i,a=o;else{const t=e.getBoundingClientRect();s=n.clientX-t.left,a=n.clientY-t.top,l=!0}return{x:s,y:a,box:l}}(t,r),u=s.left+(d&&a.left),h=s.top+(d&&a.top);let{width:g,height:f}=e;return o&&(g-=s.width+a.width,f-=s.height+a.height),{x:Math.round((l-u)/g*r.width/n),y:Math.round((c-h)/f*r.height/n)}}const yn=t=>Math.round(10*t)/10;function xn(t,e,r,n){const i=fn(t),o=mn(i,"margin"),s=gn(i.maxWidth,t,"clientWidth")||xe,a=gn(i.maxHeight,t,"clientHeight")||xe,l=function(t,e,r){let n,i;if(void 0===e||void 0===r){const o=t&&hn(t);if(o){const t=o.getBoundingClientRect(),s=fn(o),a=mn(s,"border","width"),l=mn(s,"padding");e=t.width-l.width-a.width,r=t.height-l.height-a.height,n=gn(s.maxWidth,o,"clientWidth"),i=gn(s.maxHeight,o,"clientHeight")}else e=t.clientWidth,r=t.clientHeight}return{width:e,height:r,maxWidth:n||xe,maxHeight:i||xe}}(t,e,r);let{width:c,height:d}=l;if("content-box"===i.boxSizing){const t=mn(i,"border","width"),e=mn(i,"padding");c-=e.width+t.width,d-=e.height+t.height}c=Math.max(0,c-o.width),d=Math.max(0,n?c/n:d-o.height),c=yn(Math.min(c,s,l.maxWidth)),d=yn(Math.min(d,a,l.maxHeight)),c&&!d&&(d=yn(c/2));return(void 0!==e||void 0!==r)&&n&&l.height&&d>l.height&&(d=l.height,c=yn(Math.floor(d*n))),{width:c,height:d}}function vn(t,e,r){const n=e||1,i=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(r||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==n||s.height!==i||s.width!==o)&&(t.currentDevicePixelRatio=n,s.height=i,s.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0)}const kn=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};un()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function wn(t,e){const r=function(t,e){return fn(t).getPropertyValue(e)}(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function _n(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function Cn(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:"middle"===n?r<.5?t.y:e.y:"after"===n?r<1?t.y:e.y:r>0?e.y:t.y}}function Mn(t,e,r,n){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=_n(t,i,r),a=_n(i,o,r),l=_n(o,e,r),c=_n(s,a,r),d=_n(a,l,r);return _n(c,d,r)}function Sn(t,e,r){return t?function(t,e){return{x:r=>t+t+e-r,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,r):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function An(t,e){let r,n;"ltr"!==e&&"rtl"!==e||(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Dn(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Tn(t){return"angle"===t?{between:$e,compare:Be,normalize:je}:{between:Ie,compare:(t,e)=>t-e,normalize:t=>t}}function Pn({start:t,end:e,count:r,loop:n,style:i}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r==0,style:i}}function Ln(t,e,r){if(!r)return[t];const{property:n,start:i,end:o}=r,s=e.length,{compare:a,between:l,normalize:c}=Tn(n),{start:d,end:u,loop:h,style:g}=function(t,e,r){const{property:n,start:i,end:o}=r,{between:s,normalize:a}=Tn(n),l=e.length;let c,d,{start:u,end:h,loop:g}=t;if(g){for(u+=l,h+=l,c=0,d=l;c<d&&s(a(e[u%l][n]),i,o);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:g,style:t.style}}(t,e,r),f=[];let p,m,b,y=!1,x=null;const v=()=>y||l(i,b,p)&&0!==a(i,b),k=()=>!y||0===a(o,p)||l(o,b,p);for(let t=d,r=d;t<=u;++t)m=e[t%s],m.skip||(p=c(m[n]),p!==b&&(y=l(p,i,o),null===x&&v()&&(x=0===a(p,i)?t:r),null!==x&&k()&&(f.push(Pn({start:x,end:t,loop:h,count:s,style:g})),x=null),r=t,b=p));return null!==x&&f.push(Pn({start:x,end:u,loop:h,count:s,style:g})),f}function En(t,e){const r=[],n=t.segments;for(let i=0;i<n.length;i++){const o=Ln(n[i],t.points,e);o.length&&r.push(...o)}return r}function On(t,e,r,n){return n&&n.setContext&&r?function(t,e,r,n){const i=t._chart.getContext(),o=Rn(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=r.length,c=[];let d=o,u=e[0].start,h=u;function g(t,e,n,i){const o=a?-1:1;if(t!==e){for(t+=l;r[t%l].skip;)t-=o;for(;r[e%l].skip;)e+=o;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:n,style:i}),d=i,u=e%l)}}for(const t of e){u=a?u:t.start;let e,o=r[u%l];for(h=u+1;h<=t.end;h++){const a=r[h%l];e=Rn(n.setContext(Wr(i,{type:"segment",p0:o,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),Bn(e,d)&&g(u,h-1,t.loop,d),o=a,d=e}u<h-1&&g(u,h-1,t.loop,d)}return c}(t,e,r,n):e}function Rn(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Bn(t,e){if(!e)return!1;const r=[],n=function(t,e){return rr(e)?(r.includes(e)||r.push(e),r.indexOf(e)):e};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function jn(t,e,r){return t.options.clip?t[r]:e[r]}function $n(t,e){const r=e._clip;if(r.disabled)return!1;const n=function(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:jn(r,e,"left"),right:jn(r,e,"right"),top:jn(n,e,"top"),bottom:jn(n,e,"bottom")}:e}(e,t.chartArea);return{left:!1===r.left?0:n.left-(!0===r.left?0:r.left),right:!1===r.right?t.width:n.right+(!0===r.right?0:r.right),top:!1===r.top?0:n.top-(!0===r.top?0:r.top),bottom:!1===r.bottom?t.height:n.bottom+(!0===r.bottom?0:r.bottom)}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class zn{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,n){const i=e.listeners[n],o=e.duration;i.forEach(n=>n({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(r-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ue.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,n)=>{if(!r.running||!r.items.length)return;const i=r.items;let o,s=i.length-1,a=!1;for(;s>=0;--s)o=i[s],o._active?(o._total>r.duration&&(r.duration=o._total),o.tick(t),a=!0):(i[s]=i[i.length-1],i.pop());a&&(n.draw(),this._notify(n,r,t,"progress")),i.length||(r.running=!1,this._notify(n,r,t,"complete"),r.initial=!1),e+=i.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const r=e.items;let n=r.length-1;for(;n>=0;--n)r[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var In=new zn;const Fn="transparent",Nn={boolean:(t,e,r)=>r>.5?e:t,color(t,e,r){const n=nr(t||Fn),i=n.valid&&nr(e||Fn);return i&&i.valid?i.mix(n,r).hexString():e},number:(t,e,r)=>t+(e-t)*r};class Wn{constructor(t,e,r,n){const i=e[r];n=Nr([t.to,n,i,t.from]);const o=Nr([t.from,i,n]);this._active=!0,this._fn=t.fn||Nn[t.type||typeof o],this._easing=er[t.easing]||er.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);const n=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Nr([t.to,e,n,t.from]),this._from=Nr([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,r=this._duration,n=this._prop,i=this._from,o=this._loop,s=this._to;let a;if(this._active=i!==s&&(o||e<r),!this._active)return this._target[n]=s,void this._notify(!0);e<0?this._target[n]=i:(a=e/r%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(i,s,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){const e=t?"res":"rej",r=this._promises||[];for(let t=0;t<r.length;t++)r[t][e]()}}class Hn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Jt(t))return;const e=Object.keys(mr.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const i=t[n];if(!Jt(i))return;const o={};for(const t of e)o[t]=i[t];(Qt(i.properties)&&i.properties||[n]).forEach(t=>{t!==n&&r.has(t)||r.set(t,o)})})}_animateOptions(t,e){const r=e.options,n=function(t,e){if(!e)return;let r=t.options;if(!r)return void(t.options=e);r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}}));return r}(t,r);if(!n)return[];const i=this._createAnimations(n,r);return r.$shared&&function(t,e){const r=[],n=Object.keys(e);for(let e=0;e<n.length;e++){const i=t[n[e]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}(t.options.$animations,r).then(()=>{t.options=r},()=>{}),i}_createAnimations(t,e){const r=this._properties,n=[],i=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(t,e));continue}const c=e[l];let d=i[l];const u=r.get(l);if(d){if(u&&d.active()){d.update(u,c,s);continue}d.cancel()}u&&u.duration?(i[l]=d=new Wn(u,t,l,c),n.push(d)):t[l]=c}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const r=this._createAnimations(t,e);return r.length?(In.add(this._chart,r),!0):void 0}}function Vn(t,e){const r=t&&t.options||{},n=r.reverse,i=void 0===r.min?e:0,o=void 0===r.max?e:0;return{start:n?o:i,end:n?i:o}}function qn(t,e){const r=[],n=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=n.length;i<o;++i)r.push(n[i].index);return r}function Un(t,e,r,n={}){const i=t.keys,o="single"===n.mode;let s,a,l,c;if(null===e)return;let d=!1;for(s=0,a=i.length;s<a;++s){if(l=+i[s],l===r){if(d=!0,n.all)continue;break}c=t.values[l],Xt(c)&&(o||0===e||Me(e)===Me(c))&&(e+=c)}return d||n.all?e:0}function Kn(t,e){const r=t&&t.options.stacked;return r||void 0===r&&void 0!==e.stack}function Yn(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function Qn(t,e,r,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const e=t[i.index];if(r&&e>0||!r&&e<0)return i.index}return null}function Jn(t,e){const{chart:r,_cachedMeta:n}=t,i=r._stacks||(r._stacks={}),{iScale:o,vScale:s,index:a}=n,l=o.axis,c=s.axis,d=function(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}(o,s,n),u=e.length;let h;for(let t=0;t<u;++t){const r=e[t],{[l]:o,[c]:u}=r;h=(r._stacks||(r._stacks={}))[c]=Yn(i,d,o),h[a]=u,h._top=Qn(h,s,!0,n.type),h._bottom=Qn(h,s,!1,n.type);(h._visualValues||(h._visualValues={}))[a]=u}}function Xn(t,e){const r=t.scales;return Object.keys(r).filter(t=>r[t].axis===e).shift()}function Gn(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[n]||void 0===e[n][r])return;delete e[n][r],void 0!==e[n]._visualValues&&void 0!==e[n]._visualValues[r]&&delete e[n]._visualValues[r]}}}const Zn=t=>"reset"===t||"none"===t,ti=(t,e)=>e?t:Object.assign({},t);class ei{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Kn(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Gn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,r=this.getDataset(),n=(t,e,r,n)=>"x"===t?e:"r"===t?n:r,i=e.xAxisID=Zt(r.xAxisID,Xn(t,"x")),o=e.yAxisID=Zt(r.yAxisID,Xn(t,"y")),s=e.rAxisID=Zt(r.rAxisID,Xn(t,"r")),a=e.indexAxis,l=e.iAxisID=n(a,i,o,s),c=e.vAxisID=n(a,o,i,s);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(s),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ve(this._data,this),t._stacked&&Gn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),r=this._data;if(Jt(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:r,vScale:n}=e,i="x"===r.axis?"x":"y",o="x"===n.axis?"x":"y",s=Object.keys(t),a=new Array(s.length);let l,c,d;for(l=0,c=s.length;l<c;++l)d=s[l],a[l]={[i]:d,[o]:t[d]};return a}(e,t)}else if(r!==e){if(r){Ve(r,this);const t=this._cachedMeta;Gn(t),t._parsed=[]}e&&Object.isExtensible(e)&&(i=this,(n=e)._chartjs?n._chartjs.listeners.push(i):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),He.forEach(t=>{const e="_onData"+he(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...t){const i=r.apply(this,t);return n._chartjs.listeners.forEach(r=>{"function"==typeof r[e]&&r[e](...t)}),i}})}))),this._syncList=[],this._data=e}var n,i}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,r=this.getDataset();let n=!1;this._dataCheck();const i=e._stacked;e._stacked=Kn(e.vScale,e),e.stack!==r.stack&&(n=!0,Gn(e),e.stack=r.stack),this._resyncElements(t),(n||i!==e._stacked)&&(Jn(this,e._parsed),e._stacked=Kn(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:r,_data:n}=this,{iScale:i,_stacked:o}=r,s=i.axis;let a,l,c,d=0===t&&e===n.length||r._sorted,u=t>0&&r._parsed[t-1];if(!1===this._parsing)r._parsed=n,r._sorted=!0,c=n;else{c=Qt(n[t])?this.parseArrayData(r,n,t,e):Jt(n[t])?this.parseObjectData(r,n,t,e):this.parsePrimitiveData(r,n,t,e);const i=()=>null===l[s]||u&&l[s]<u[s];for(a=0;a<e;++a)r._parsed[a+t]=l=c[a],d&&(i()&&(d=!1),u=l);r._sorted=d}o&&Jn(this,c)}parsePrimitiveData(t,e,r,n){const{iScale:i,vScale:o}=t,s=i.axis,a=o.axis,l=i.getLabels(),c=i===o,d=new Array(n);let u,h,g;for(u=0,h=n;u<h;++u)g=u+r,d[u]={[s]:c||i.parse(l[g],g),[a]:o.parse(e[g],g)};return d}parseArrayData(t,e,r,n){const{xScale:i,yScale:o}=t,s=new Array(n);let a,l,c,d;for(a=0,l=n;a<l;++a)c=a+r,d=e[c],s[a]={x:i.parse(d[0],c),y:o.parse(d[1],c)};return s}parseObjectData(t,e,r,n){const{xScale:i,yScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+r,h=e[u],l[c]={x:i.parse(ue(h,s),u),y:o.parse(ue(h,a),u)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,r){const n=this.chart,i=this._cachedMeta,o=e[t.axis];return Un({keys:qn(n,!0),values:e._stacks[t.axis]._visualValues},o,i.index,{mode:r})}updateRangeFromParsed(t,e,r,n){const i=r[e.axis];let o=null===i?NaN:i;const s=n&&r._stacks[e.axis];n&&s&&(n.values=s,o=Un(n,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const r=this._cachedMeta,n=r._parsed,i=r._sorted&&t===r.iScale,o=n.length,s=this._getOtherScale(t),a=((t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:qn(r,!0),values:null})(e,r,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(t){const{min:e,max:r,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}(s);let u,h;function g(){h=n[u];const e=h[s.axis];return!Xt(h[t.axis])||c>e||d<e}for(u=0;u<o&&(g()||(this.updateRangeFromParsed(l,t,h,a),!i));++u);if(i)for(u=o-1;u>=0;--u)if(!g()){this.updateRangeFromParsed(l,t,h,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,r=[];let n,i,o;for(n=0,i=e.length;n<i;++n)o=e[n][t.axis],Xt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,r=e.iScale,n=e.vScale,i=this.getParsed(t);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,r,n,i;return Jt(t)?(e=t.top,r=t.right,n=t.bottom,i=t.left):e=r=n=i=t,{top:e,right:r,bottom:n,left:i,disabled:!1===t}}(Zt(this.options.clip,function(t,e,r){if(!1===r)return!1;const n=Vn(t,r),i=Vn(e,r);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,r=this._cachedMeta,n=r.data||[],i=e.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||n.length-s,l=this.options.drawActiveElementsOnTop;let c;for(r.dataset&&r.dataset.draw(t,i,s,a),c=s;c<s+a;++c){const e=n[c];e.hidden||(e.active&&l?o.push(e):e.draw(t,i))}for(c=0;c<o.length;++c)o[c].draw(t,i)}getStyle(t,e){const r=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,e,r){const n=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];i=e.$context||(e.$context=function(t,e,r){return Wr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),i.parsed=this.getParsed(t),i.raw=n.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=function(t,e){return Wr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!e,i.mode=r,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",r){const n="active"===e,i=this._cachedDataOpts,o=t+"-"+e,s=i[o],a=this.enableOptionSharing&&ge(r);if(s)return ti(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),d=n?[`${t}Hover`,"hover",t,""]:[t,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(mr.elements[t]),g=l.resolveNamedOptions(u,h,()=>this.getContext(r,n,e),d);return g.$shared&&(g.$shared=a,i[o]=Object.freeze(ti(g,a))),g}_resolveAnimations(t,e,r){const n=this.chart,i=this._cachedDataOpts,o=`animation-${e}`,s=i[o];if(s)return s;let a;if(!1!==n.options.animation){const n=this.chart.config,i=n.datasetAnimationScopeKeys(this._type,e),o=n.getOptionScopes(this.getDataset(),i);a=n.createResolver(o,this.getContext(t,r,e))}const l=new Hn(n,a&&a.animations);return a&&a._cacheable&&(i[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Zn(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const r=this.resolveDataElementOptions(t,e),n=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(e,i)||i!==n;return this.updateSharedOptions(i,e,r),{sharedOptions:i,includeOptions:o}}updateElement(t,e,r,n){Zn(n)?Object.assign(t,r):this._resolveAnimations(e,n).update(t,r)}updateSharedOptions(t,e,r){t&&!Zn(e)&&this._resolveAnimations(void 0,e).update(t,r)}_setStyle(t,e,r,n){t.active=n;const i=this.getStyle(e,n);this._resolveAnimations(e,r,n).update(t,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,e,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,r=this._cachedMeta.data;for(const[t,e,r]of this._syncList)this[t](e,r);this._syncList=[];const n=r.length,i=e.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,t):i<n&&this._removeElements(i,n-i)}_insertElements(t,e,r=!0){const n=this._cachedMeta,i=n.data,o=t+e;let s;const a=t=>{for(t.length+=e,s=t.length-1;s>=o;s--)t[s]=t[s-e]};for(a(i),s=t;s<o;++s)i[s]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(t,e),r&&this.updateElements(i,t,e,"reset")}updateElements(t,e,r,n){}_removeElements(t,e){const r=this._cachedMeta;if(this._parsing){const n=r._parsed.splice(t,e);r._stacked&&Gn(r,n)}r.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,r,n]=t;this[e](r,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ri(t){const e=t.iScale,r=function(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let e=0,i=r.length;e<i;e++)n=n.concat(r[e].controller.getAllParsedValues(t));t._cache.$bar=qe(n.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let n,i,o,s,a=e._length;const l=()=>{32767!==o&&-32768!==o&&(ge(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(n=0,i=r.length;n<i;++n)o=e.getPixelForValue(r[n]),l();for(s=void 0,n=0,i=e.ticks.length;n<i;++n)o=e.getPixelForTick(n),l();return a}function ni(t,e,r,n){return Qt(t)?function(t,e,r,n){const i=r.parse(t[0],n),o=r.parse(t[1],n),s=Math.min(i,o),a=Math.max(i,o);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),e[r.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:o,min:s,max:a}}(t,e,r,n):e[r.axis]=r.parse(t,n),e}function ii(t,e,r,n){const i=t.iScale,o=t.vScale,s=i.getLabels(),a=i===o,l=[];let c,d,u,h;for(c=r,d=r+n;c<d;++c)h=e[c],u={},u[i.axis]=a||i.parse(s[c],c),l.push(ni(h,u,o,c));return l}function oi(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function si(t,e,r,n){let i=e.borderSkipped;const o={};if(!i)return void(t.borderSkipped=o);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:c,bottom:d}=function(t){let e,r,n,i,o;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(i="end",o="start"):(i="start",o="end"),{start:r,end:n,reverse:e,top:i,bottom:o}}(t);"middle"===i&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?i=c:(r._bottom||0)===n?i=d:(o[ai(d,s,a,l)]=!0,i=c)),o[ai(i,s,a,l)]=!0,t.borderSkipped=o}function ai(t,e,r,n){var i,o,s;return n?(s=r,t=li(t=(i=t)===(o=e)?s:i===s?o:i,r,e)):t=li(t,e,r),t}function li(t,e,r){return"start"===t?e:"end"===t?r:t}function ci(t,{inflateAmount:e},r){t.inflateAmount="auto"===e?1===r?.33:0:e}class di extends ei{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:r,color:n}}=t.legend.options;return e.labels.map((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:n,lineWidth:o.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const r=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=r;else{let i,o,s=t=>+r[t];if(Jt(r[t])){const{key:t="value"}=this._parsing;s=e=>+ue(r[e],t)}for(i=t,o=t+e;i<o;++i)n._parsed[i]=s(i)}}_getRotation(){return Pe(this.options.rotation-90)}_getCircumference(){return Pe(this.options.circumference)}_getRotationExtents(){let t=be,e=-be;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const n=this.chart.getDatasetMeta(r).controller,i=n._getRotation(),o=n._getCircumference();t=Math.min(t,i),e=Math.max(e,i+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:r}=e,n=this._cachedMeta,i=n.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(r.width,r.height)-o)/2,0),a=Math.min((l=this.options.cutout,c=s,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:g,ratioY:f,offsetX:p,offsetY:m}=function(t,e,r){let n=1,i=1,o=0,s=0;if(e<be){const a=t,l=a+e,c=Math.cos(a),d=Math.sin(a),u=Math.cos(l),h=Math.sin(l),g=(t,e,n)=>$e(t,a,l,!0)?1:Math.max(e,e*r,n,n*r),f=(t,e,n)=>$e(t,a,l,!0)?-1:Math.min(e,e*r,n,n*r),p=g(0,c,u),m=g(ke,d,h),b=f(me,c,u),y=f(me+ke,d,h);n=(p-b)/2,i=(m-y)/2,o=-(p+b)/2,s=-(m+y)/2}return{ratioX:n,ratioY:i,offsetX:o,offsetY:s}}(h,u,a),b=(r.width-o)/g,y=(r.height-o)/f,x=Math.max(Math.min(b,y)/2,0),v=te(this.options.radius,x),k=(v-Math.max(v*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=m*v,n.total=this.calculateTotal(),this.outerRadius=v-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,e){const r=this.options,n=this._cachedMeta,i=this._getCircumference();return e&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||null===n._parsed[t]||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*i/be)}updateElements(t,e,r,n){const i="reset"===n,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,d=i&&a.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:g,includeOptions:f}=this._getSharedOptions(e,n);let p,m=this._getRotation();for(p=0;p<e;++p)m+=this._circumference(p,i);for(p=e;p<e+r;++p){const e=this._circumference(p,i),r=t[p],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:h,innerRadius:u};f&&(o.options=g||this.resolveDataElementOptions(p,r.active?"active":n)),m+=e,this.updateElement(r,p,o,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let r,n=0;for(r=0;r<e.length;r++){const i=t._parsed[r];null===i||isNaN(i)||!this.chart.getDataVisibility(r)||e[r].hidden||(n+=Math.abs(i))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?be*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,n=r.data.labels||[],i=lr(e._parsed[t],r.options.locale);return{label:n[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const r=this.chart;let n,i,o,s,a;if(!t)for(n=0,i=r.data.datasets.length;n<i;++n)if(r.isDatasetVisible(n)){o=r.getDatasetMeta(n),t=o.data,s=o.controller;break}if(!t)return 0;for(n=0,i=t.length;n<i;++n)a=s.resolveDataElementOptions(n),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let r=0,n=t.length;r<n;++r){const t=this.resolveDataElementOptions(r);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(e+=this._getRingWeight(r));return e}_getRingWeight(t){return Math.max(Zt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ui extends ei{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:r,color:n}}=t.legend.options;return e.labels.map((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:n,lineWidth:o.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,n=r.data.labels||[],i=lr(e._parsed[t].r,r.options.locale);return{label:n[t]||"",value:i}}parseObjectData(t,e,r,n){return rn.bind(this)(t,e,r,n)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,r)=>{const n=this.getParsed(r).r;!isNaN(n)&&this.chart.getDataVisibility(r)&&(n<e.min&&(e.min=n),n>e.max&&(e.max=n))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,r=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(n/2,0),o=(i-Math.max(r.cutoutPercentage?i/100*r.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,r,n){const i="reset"===n,o=this.chart,s=o.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,d=a.getIndexAngle(0)-.5*me;let u,h=d;const g=360/this.countVisibleElements();for(u=0;u<e;++u)h+=this._computeAngle(u,n,g);for(u=e;u<e+r;u++){const e=t[u];let r=h,f=h+this._computeAngle(u,n,g),p=o.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=f,i&&(s.animateScale&&(p=0),s.animateRotate&&(r=f=d));const m={x:l,y:c,innerRadius:0,outerRadius:p,startAngle:r,endAngle:f,options:this.resolveDataElementOptions(u,e.active?"active":n)};this.updateElement(e,u,m,n)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&e++}),e}_computeAngle(t,e,r){return this.chart.getDataVisibility(t)?Pe(this.resolveDataElementOptions(t,e).angle||r):0}}var hi=Object.freeze({__proto__:null,BarController:class extends ei{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,r,n){return ii(t,e,r,n)}parseArrayData(t,e,r,n){return ii(t,e,r,n)}parseObjectData(t,e,r,n){const{iScale:i,vScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?s:a,c="x"===o.axis?s:a,d=[];let u,h,g,f;for(u=r,h=r+n;u<h;++u)f=e[u],g={},g[i.axis]=i.parse(ue(f,l),u),d.push(ni(ue(f,c),g,o,u));return d}updateRangeFromParsed(t,e,r,n){super.updateRangeFromParsed(t,e,r,n);const i=r._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:r,vScale:n}=e,i=this.getParsed(t),o=i._custom,s=oi(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,r,n){const i="reset"===n,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(e,n);for(let h=e;h<e+r;h++){const e=this.getParsed(h),r=i||Yt(e[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),g=this._calculateBarIndexPixels(h,c),f=(e._stacks||{})[s.axis],p={horizontal:l,base:r.base,enableBorderRadius:!f||oi(e._custom)||o===f._top||o===f._bottom,x:l?r.head:g.center,y:l?g.center:r.head,height:l?g.size:Math.abs(r.size),width:l?Math.abs(r.size):g.size};u&&(p.options=d||this.resolveDataElementOptions(h,t[h].active?"active":n));const m=p.options||t[h].options;si(p,m,f,o),ci(p,m,c.ratio),this.updateElement(t[h],h,p,n)}}_getStacks(t,e){const{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),i=r.options.stacked,o=[],s=this._cachedMeta.controller.getParsed(e),a=s&&s[r.axis],l=t=>{const e=t._parsed.find(t=>t[r.axis]===a),n=e&&e[t.vScale.axis];if(Yt(n)||isNaN(n))return!0};for(const r of n)if((void 0===e||!l(r))&&((!1===i||-1===o.indexOf(r.stack)||void 0===i&&void 0===r.stack)&&o.push(r.stack),r.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[Zt("x"===this.chart.options.indexAxis?r.xAxisID:r.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,r){const n=this._getStacks(t,r),i=void 0!==e?n.indexOf(e):-1;return-1===i?n.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,r=e.iScale,n=[];let i,o;for(i=0,o=e.data.length;i<o;++i)n.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const s=t.barThickness;return{min:s||ri(e),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:r,index:n},options:{base:i,minBarLength:o}}=this,s=i||0,a=this.getParsed(t),l=a._custom,c=oi(l);let d,u,h=a[e.axis],g=0,f=r?this.applyStack(e,a,r):h;f!==h&&(g=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,0!==h&&Me(h)!==Me(l.barEnd)&&(g=0),g+=h);const p=Yt(i)||c?g:i;let m=e.getPixelForValue(p);if(d=this.chart.getDataVisibility(t)?e.getPixelForValue(g+f):m,u=d-m,Math.abs(u)<o){u=function(t,e,r){return 0!==t?Me(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}(u,e,s)*o,h===s&&(m-=u/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),l=Math.min(t,i),g=Math.max(t,i);m=Math.max(Math.min(m,g),l),d=m+u,r&&!c&&(a._stacks[e.axis]._visualValues[n]=e.getValueForPixel(d)-e.getValueForPixel(m))}if(m===e.getPixelForValue(s)){const t=Me(u)*e.getLineWidthForValue(s)/2;m+=t,u-=t}return{size:u,base:m,head:d,center:d+u/2}}_calculateBarIndexPixels(t,e){const r=e.scale,n=this.options,i=n.skipNull,o=Zt(n.maxBarThickness,1/0);let s,a;const l=this._getAxisCount();if(e.grouped){const r=i?this._getStackCount(t):e.stackCount,c="flex"===n.barThickness?function(t,e,r,n){const i=e.pixels,o=i[t];let s=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=r.categoryPercentage;null===s&&(s=o-(null===a?e.end-e.start:a-o)),null===a&&(a=o+o-s);const c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/n,ratio:r.barPercentage,start:c}}(t,e,n,r*l):function(t,e,r,n){const i=r.barThickness;let o,s;return Yt(i)?(o=e.min*r.categoryPercentage,s=r.barPercentage):(o=i*n,s=1),{chunk:o/n,ratio:s,start:e.pixels[t]-o/2}}(t,e,n,r*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(Zt(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+u;s=c.start+c.chunk*h+c.chunk/2,a=Math.min(o,c.chunk*c.ratio)}else s=r.getPixelForValue(this.getParsed(t)[r.axis],t),a=Math.min(o,e.min*e.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,r=t.data,n=r.length;let i=0;for(;i<n;++i)null===this.getParsed(i)[e.axis]||r[i].hidden||r[i].draw(this._ctx)}},BubbleController:class extends ei{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,r,n){const i=super.parsePrimitiveData(t,e,r,n);for(let t=0;t<i.length;t++)i[t]._custom=this.resolveDataElementOptions(t+r).radius;return i}parseArrayData(t,e,r,n){const i=super.parseArrayData(t,e,r,n);for(let t=0;t<i.length;t++){const n=e[r+t];i[t]._custom=Zt(n[2],this.resolveDataElementOptions(t+r).radius)}return i}parseObjectData(t,e,r,n){const i=super.parseObjectData(t,e,r,n);for(let t=0;t<i.length;t++){const n=e[r+t];i[t]._custom=Zt(n&&n.r&&+n.r,this.resolveDataElementOptions(t+r).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let r=t.length-1;r>=0;--r)e=Math.max(e,t[r].size(this.resolveDataElementOptions(r))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:i}=e,o=this.getParsed(t),s=n.getLabelForValue(o.x),a=i.getLabelForValue(o.y),l=o._custom;return{label:r[t]||"",value:"("+s+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,r,n){const i="reset"===n,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,n),c=o.axis,d=s.axis;for(let u=e;u<e+r;u++){const e=t[u],r=!i&&this.getParsed(u),h={},g=h[c]=i?o.getPixelForDecimal(.5):o.getPixelForValue(r[c]),f=h[d]=i?s.getBasePixel():s.getPixelForValue(r[d]);h.skip=isNaN(g)||isNaN(f),l&&(h.options=a||this.resolveDataElementOptions(u,e.active?"active":n),i&&(h.options.radius=0)),this.updateElement(e,u,h,n)}}resolveDataElementOptions(t,e){const r=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const i=n.radius;return"active"!==e&&(n.radius=0),n.radius+=Zt(r&&r._custom,i),n}},DoughnutController:di,LineController:class extends ei{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:r,data:n=[],_dataset:i}=e,o=this.chart._animationsDisabled;let{start:s,count:a}=Je(e,n,o);this._drawStart=s,this._drawCount=a,Xe(e)&&(s=0,a=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=n;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:l},t),this.updateElements(n,s,a,t)}updateElements(t,e,r,n){const i="reset"===n,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,n),u=o.axis,h=s.axis,{spanGaps:g,segment:f}=this.options,p=De(g)?g:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===n,b=e+r,y=t.length;let x=e>0&&this.getParsed(e-1);for(let r=0;r<y;++r){const g=t[r],y=m?g:{};if(r<e||r>=b){y.skip=!0;continue}const v=this.getParsed(r),k=Yt(v[h]),w=y[u]=o.getPixelForValue(v[u],r),_=y[h]=i||k?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,v,a):v[h],r);y.skip=isNaN(w)||isNaN(_)||k,y.stop=r>0&&Math.abs(v[u]-x[u])>p,f&&(y.parsed=v,y.raw=l.data[r]),d&&(y.options=c||this.resolveDataElementOptions(r,g.active?"active":n)),m||this.updateElement(g,r,y,n),x=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,r=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return r;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends di{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:ui,RadarController:class extends ei{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,r=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(r[e.axis])}}parseObjectData(t,e,r,n){return rn.bind(this)(t,e,r,n)}update(t){const e=this._cachedMeta,r=e.dataset,n=e.data||[],i=e.iScale.getLabels();if(r.points=n,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===n.length,options:e};this.updateElement(r,void 0,o,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,r,n){const i=this._cachedMeta.rScale,o="reset"===n;for(let s=e;s<e+r;s++){const e=t[s],r=this.resolveDataElementOptions(s,e.active?"active":n),a=i.getPointPositionForValue(s,this.getParsed(s).r),l=o?i.xCenter:a.x,c=o?i.yCenter:a.y,d={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:r};this.updateElement(e,s,d,n)}}},ScatterController:class extends ei{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:i}=e,o=this.getParsed(t),s=n.getLabelForValue(o.x),a=i.getLabelForValue(o.y);return{label:r[t]||"",value:"("+s+", "+a+")"}}update(t){const e=this._cachedMeta,{data:r=[]}=e,n=this.chart._animationsDisabled;let{start:i,count:o}=Je(e,r,n);if(this._drawStart=i,this._drawCount=o,Xe(e)&&(i=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:o}=e;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const s=this.resolveDatasetElementOptions(t);s.segment=this.options.segment,this.updateElement(i,void 0,{animated:!n,options:s},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(r,i,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,r,n){const i="reset"===n,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,n),d=this.getSharedOptions(c),u=this.includeOptions(n,d),h=o.axis,g=s.axis,{spanGaps:f,segment:p}=this.options,m=De(f)?f:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||"none"===n;let y=e>0&&this.getParsed(e-1);for(let c=e;c<e+r;++c){const e=t[c],r=this.getParsed(c),f=b?e:{},x=Yt(r[g]),v=f[h]=o.getPixelForValue(r[h],c),k=f[g]=i||x?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,r,a):r[g],c);f.skip=isNaN(v)||isNaN(k)||x,f.stop=c>0&&Math.abs(r[h]-y[h])>m,p&&(f.parsed=r,f.raw=l.data[c]),u&&(f.options=d||this.resolveDataElementOptions(c,e.active?"active":n)),b||this.updateElement(e,c,f,n),y=r}this.updateSharedOptions(d,n,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}const r=t.dataset,n=r.options&&r.options.borderWidth||0;if(!e.length)return n;const i=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(n,i,o)/2}}});function gi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class fi{static override(t){Object.assign(fi.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return gi()}parse(){return gi()}format(){return gi()}add(){return gi()}diff(){return gi()}startOf(){return gi()}endOf(){return gi()}}var pi=fi;function mi(t,e,r,n){const{controller:i,data:o,_sorted:s}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&"r"!==e&&s&&o.length){const s=a._reversePixels?We:Ne;if(!n){const n=s(o,e,r);if(l){const{vScale:e}=i._cachedMeta,{_parsed:r}=t,o=r.slice(0,n.lo+1).reverse().findIndex(t=>!Yt(t[e.axis]));n.lo-=Math.max(0,o);const s=r.slice(n.hi).findIndex(t=>!Yt(t[e.axis]));n.hi+=Math.max(0,s)}return n}if(i._sharedOptions){const t=o[0],n="function"==typeof t.getRange&&t.getRange(e);if(n){const t=s(o,e,r-n),i=s(o,e,r+n);return{lo:t.lo,hi:i.hi}}}}return{lo:0,hi:o.length-1}}function bi(t,e,r,n,i){const o=t.getSortedVisibleDatasetMetas(),s=r[e];for(let t=0,r=o.length;t<r;++t){const{index:r,data:a}=o[t],{lo:l,hi:c}=mi(o[t],e,s,i);for(let t=l;t<=c;++t){const e=a[t];e.skip||n(e,r,t)}}}function yi(t,e,r,n,i){const o=[];if(!i&&!t.isPointInArea(e))return o;return bi(t,r,e,function(r,s,a){(i||_r(r,t.chartArea,0))&&r.inRange(e.x,e.y,n)&&o.push({element:r,datasetIndex:s,index:a})},!0),o}function xi(t,e,r,n,i,o){let s=[];const a=function(t){const e=-1!==t.indexOf("x"),r=-1!==t.indexOf("y");return function(t,n){const i=e?Math.abs(t.x-n.x):0,o=r?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(r);let l=Number.POSITIVE_INFINITY;return bi(t,r,e,function(r,c,d){const u=r.inRange(e.x,e.y,i);if(n&&!u)return;const h=r.getCenterPoint(i);if(!(!!o||t.isPointInArea(h))&&!u)return;const g=a(e,h);g<l?(s=[{element:r,datasetIndex:c,index:d}],l=g):g===l&&s.push({element:r,datasetIndex:c,index:d})}),s}function vi(t,e,r,n,i,o){return o||t.isPointInArea(e)?"r"!==r||n?xi(t,e,r,n,i,o):function(t,e,r,n){let i=[];return bi(t,r,e,function(t,r,o){const{startAngle:s,endAngle:a}=t.getProps(["startAngle","endAngle"],n),{angle:l}=Oe(t,{x:e.x,y:e.y});$e(l,s,a)&&i.push({element:t,datasetIndex:r,index:o})}),i}(t,e,r,i):[]}function ki(t,e,r,n,i){const o=[],s="x"===r?"inXRange":"inYRange";let a=!1;return bi(t,r,e,(t,n,l)=>{t[s]&&t[s](e[r],i)&&(o.push({element:t,datasetIndex:n,index:l}),a=a||t.inRange(e.x,e.y,i))}),n&&!a?[]:o}var wi={evaluateInteractionItems:bi,modes:{index(t,e,r,n){const i=bn(e,t),o=r.axis||"x",s=r.includeInvisible||!1,a=r.intersect?yi(t,i,o,n,s):vi(t,i,o,!1,n,s),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,r=t.data[e];r&&!r.skip&&l.push({element:r,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,r,n){const i=bn(e,t),o=r.axis||"xy",s=r.includeInvisible||!1;let a=r.intersect?yi(t,i,o,n,s):vi(t,i,o,!1,n,s);if(a.length>0){const e=a[0].datasetIndex,r=t.getDatasetMeta(e).data;a=[];for(let t=0;t<r.length;++t)a.push({element:r[t],datasetIndex:e,index:t})}return a},point:(t,e,r,n)=>yi(t,bn(e,t),r.axis||"xy",n,r.includeInvisible||!1),nearest(t,e,r,n){const i=bn(e,t),o=r.axis||"xy",s=r.includeInvisible||!1;return vi(t,i,o,r.intersect,n,s)},x:(t,e,r,n)=>ki(t,bn(e,t),"x",r.intersect,n),y:(t,e,r,n)=>ki(t,bn(e,t),"y",r.intersect,n)}};const _i=["left","top","right","bottom"];function Ci(t,e){return t.filter(t=>t.pos===e)}function Mi(t,e){return t.filter(t=>-1===_i.indexOf(t.pos)&&t.box.axis===e)}function Si(t,e){return t.sort((t,r)=>{const n=e?r:t,i=e?t:r;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function Ai(t,e){const r=function(t){const e={};for(const r of t){const{stack:t,pos:n,stackWeight:i}=r;if(!t||!_i.includes(n))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let o,s,a;for(o=0,s=t.length;o<s;++o){a=t[o];const{fullSize:s}=a.box,l=r[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*n:s&&e.availableWidth,a.height=i):(a.width=n,a.height=c?c*i:s&&e.availableHeight)}return r}function Di(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function Ti(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Pi(t,e,r,n){const{pos:i,box:o}=r,s=t.maxPadding;if(!Jt(i)){r.size&&(t[i]-=r.size);const e=n[r.stack]||{size:0,count:1};e.size=Math.max(e.size,r.horizontal?o.height:o.width),r.size=e.size/e.count,t[i]+=r.size}o.getPadding&&Ti(s,o.getPadding());const a=Math.max(0,e.outerWidth-Di(s,t,"left","right")),l=Math.max(0,e.outerHeight-Di(s,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,r.horizontal?{same:c,other:d}:{same:d,other:c}}function Li(t,e){const r=e.maxPadding;function n(t){const n={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{n[t]=Math.max(e[t],r[t])}),n}return n(t?["left","right"]:["top","bottom"])}function Ei(t,e,r,n){const i=[];let o,s,a,l,c,d;for(o=0,s=t.length,c=0;o<s;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,Li(a.horizontal,e));const{same:s,other:u}=Pi(e,r,a,n);c|=s&&i.length,d=d||u,l.fullSize||i.push(a)}return c&&Ei(i,e,r,n)||d}function Oi(t,e,r,n,i){t.top=r,t.left=e,t.right=e+n,t.bottom=r+i,t.width=n,t.height=i}function Ri(t,e,r,n){const i=r.padding;let{x:o,y:s}=e;for(const a of t){const t=a.box,l=n[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const n=e.w*c,o=l.size||t.height;ge(l.start)&&(s=l.start),t.fullSize?Oi(t,i.left,s,r.outerWidth-i.right-i.left,o):Oi(t,e.left+l.placed,s,n,o),l.start=s,l.placed+=n,s=t.bottom}else{const n=e.h*c,s=l.size||t.width;ge(l.start)&&(o=l.start),t.fullSize?Oi(t,o,i.top,s,r.outerHeight-i.bottom-i.top):Oi(t,o,e.top+l.placed,s,n),l.start=o,l.placed+=n,o=t.right}}e.x=o,e.y=s}var Bi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;-1!==r&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const i=Ir(t.options.layout.padding),o=Math.max(e-i.width,0),s=Math.max(r-i.height,0),a=function(t){const e=function(t){const e=[];let r,n,i,o,s,a;for(r=0,n=(t||[]).length;r<n;++r)i=t[r],({position:o,options:{stack:s,stackWeight:a=1}}=i),e.push({index:r,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return e}(t),r=Si(e.filter(t=>t.box.fullSize),!0),n=Si(Ci(e,"left"),!0),i=Si(Ci(e,"right")),o=Si(Ci(e,"top"),!0),s=Si(Ci(e,"bottom")),a=Mi(e,"x"),l=Mi(e,"y");return{fullSize:r,leftAndTop:n.concat(o),rightAndBottom:i.concat(l).concat(s).concat(a),chartArea:Ci(e,"chartArea"),vertical:n.concat(i).concat(l),horizontal:o.concat(s).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;re(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const d=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:r,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/d,hBoxMaxHeight:s/2}),h=Object.assign({},i);Ti(h,Ir(n));const g=Object.assign({maxPadding:h,w:o,h:s,x:i.left,y:i.top},i),f=Ai(l.concat(c),u);Ei(a.fullSize,g,u,f),Ei(l,g,u,f),Ei(c,g,u,f)&&Ei(l,g,u,f),function(t){const e=t.maxPadding;function r(r){const n=Math.max(e[r]-t[r],0);return t[r]+=n,n}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}(g),Ri(a.leftAndTop,g,u,f),g.x+=g.w,g.y+=g.h,Ri(a.rightAndBottom,g,u,f),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},re(a.chartArea,e=>{const r=e.box;Object.assign(r,t.chartArea),r.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class ji{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,n){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):r)}}isAttached(t){return!0}updateConfig(t){}}class $i extends ji{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const zi="$chartjs",Ii={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Fi=t=>null===t||""===t;const Ni=!!kn&&{passive:!0};function Wi(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,Ni)}function Hi(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function Vi(t,e,r){const n=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const r of t)e=e||Hi(r.addedNodes,n),e=e&&!Hi(r.removedNodes,n);e&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}function qi(t,e,r){const n=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const r of t)e=e||Hi(r.removedNodes,n),e=e&&!Hi(r.addedNodes,n);e&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ui=new Map;let Ki=0;function Yi(){const t=window.devicePixelRatio;t!==Ki&&(Ki=t,Ui.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function Qi(t,e,r){const n=t.canvas,i=n&&hn(n);if(!i)return;const o=Ke((t,e)=>{const n=i.clientWidth;r(t,e),n<i.clientWidth&&r()},window),s=new ResizeObserver(t=>{const e=t[0],r=e.contentRect.width,n=e.contentRect.height;0===r&&0===n||o(r,n)});return s.observe(i),function(t,e){Ui.size||window.addEventListener("resize",Yi),Ui.set(t,e)}(t,o),s}function Ji(t,e,r){r&&r.disconnect(),"resize"===e&&function(t){Ui.delete(t),Ui.size||window.removeEventListener("resize",Yi)}(t)}function Xi(t,e,r){const n=t.canvas,i=Ke(e=>{null!==t.ctx&&r(function(t,e){const r=Ii[t.type]||t.type,{x:n,y:i}=bn(t,e);return{type:r,chart:e,native:t,x:void 0!==n?n:null,y:void 0!==i?i:null}}(e,t))},t);return function(t,e,r){t&&t.addEventListener(e,r,Ni)}(n,e,i),i}class Gi extends ji{acquireContext(t,e){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(function(t,e){const r=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[zi]={initial:{height:n,width:i,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Fi(i)){const e=wn(t,"width");void 0!==e&&(t.width=e)}if(Fi(n))if(""===t.style.height)t.height=t.width/(e||2);else{const e=wn(t,"height");void 0!==e&&(t.height=e)}}(t,e),r):null}releaseContext(t){const e=t.canvas;if(!e[zi])return!1;const r=e[zi].initial;["height","width"].forEach(t=>{const n=r[t];Yt(n)?e.removeAttribute(t):e.setAttribute(t,n)});const n=r.style||{};return Object.keys(n).forEach(t=>{e.style[t]=n[t]}),e.width=e.width,delete e[zi],!0}addEventListener(t,e,r){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),i={attach:Vi,detach:qi,resize:Qi}[e]||Xi;n[e]=i(t,e,r)}removeEventListener(t,e){const r=t.$proxies||(t.$proxies={}),n=r[e];if(!n)return;({attach:Ji,detach:Ji,resize:Ji}[e]||Wi)(t,e,n),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,n){return xn(t,e,r,n)}isAttached(t){const e=t&&hn(t);return!(!e||!e.isConnected)}}class Zi{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return De(this.x)&&De(this.y)}getProps(t,e){const r=this.$animations;if(!e||!r)return this;const n={};return t.forEach(t=>{n[t]=r[t]&&r[t].active()?r[t]._to:this[t]}),n}}function to(t,e){const r=t.options.ticks,n=function(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),i=t._maxLength/r;return Math.floor(Math.min(n,i))}(t),i=Math.min(r.maxTicksLimit||n,n),o=r.major.enabled?function(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}(e):[],s=o.length,a=o[0],l=o[s-1],c=[];if(s>i)return function(t,e,r,n){let i,o=0,s=r[0];for(n=Math.ceil(n),i=0;i<t.length;i++)i===s&&(e.push(t[i]),o++,s=r[o*n])}(e,c,o,s/i),c;const d=function(t,e,r){const n=function(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}(t),i=e.length/r;if(!n)return Math.max(i,1);const o=function(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(0|r)&&e.push(r),e.sort((t,e)=>t-e).pop(),e}(n);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>i)return e}return Math.max(i,1)}(o,e,i);if(s>0){let t,r;const n=s>1?Math.round((l-a)/(s-1)):null;for(eo(e,c,d,Yt(n)?0:a-n,a),t=0,r=s-1;t<r;t++)eo(e,c,d,o[t],o[t+1]);return eo(e,c,d,l,Yt(n)?e.length:l+n),c}return eo(e,c,d),c}function eo(t,e,r,n,i){const o=Zt(n,0),s=Math.min(Zt(i,t.length),t.length);let a,l,c,d=0;for(r=Math.ceil(r),i&&(a=i-n,r=a/Math.floor(a/r)),c=o;c<0;)d++,c=Math.round(o+d*r);for(l=Math.max(o,0);l<s;l++)l===c&&(e.push(t[l]),d++,c=Math.round(o+d*r))}const ro=(t,e,r)=>"top"===e||"left"===e?t[e]+r:t[e]-r,no=(t,e)=>Math.min(e||t,t);function io(t,e){const r=[],n=t.length/e,i=t.length;let o=0;for(;o<i;o+=n)r.push(t[Math.floor(o)]);return r}function oo(t,e,r){const n=t.ticks.length,i=Math.min(e,n-1),o=t._startPixel,s=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(i);if(!(r&&(l=1===n?Math.max(c-o,s-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<o-a||c>s+a)))return c}function so(t){return t.drawTicks?t.tickLength:0}function ao(t,e){if(!t.display)return 0;const r=Fr(t.font,e),n=Ir(t.padding);return(Qt(t.text)?t.text.length:1)*r.lineHeight+n.height}function lo(t,e,r){let n=Ye(t);return(r&&"right"!==e||!r&&"right"===e)&&(n=(t=>"left"===t?"right":"right"===t?"left":t)(n)),n}class co extends Zi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:n}=this;return t=Gt(t,Number.POSITIVE_INFINITY),e=Gt(e,Number.NEGATIVE_INFINITY),r=Gt(r,Number.POSITIVE_INFINITY),n=Gt(n,Number.NEGATIVE_INFINITY),{min:Gt(t,r),max:Gt(e,n),minDefined:Xt(t),maxDefined:Xt(e)}}getMinMax(t){let e,{min:r,max:n,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:r,max:n};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)e=s[a].controller.getMinMax(this,t),i||(r=Math.min(r,e.min)),o||(n=Math.max(n,e.max));return r=o&&r>n?n:r,n=i&&r>n?r:n,{min:Gt(r,Gt(n,r)),max:Gt(n,Gt(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ee(this.options.beforeUpdate,[this])}update(t,e,r){const{beginAtZero:n,grace:i,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,r){const{min:n,max:i}=t,o=te(e,(i-n)/2),s=(t,e)=>r&&0===t?0:t+e;return{min:s(n,-Math.abs(o)),max:s(i,o)}}(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?io(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=to(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,r=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,r=!r),this._startPixel=t,this._endPixel=e,this._reversePixels=r,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ee(this.options.afterUpdate,[this])}beforeSetDimensions(){ee(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ee(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ee(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ee(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let r,n,i;for(r=0,n=t.length;r<n;r++)i=t[r],i.label=ee(e.callback,[i.value,r,t],this)}afterTickToLabelConversion(){ee(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ee(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,r=no(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,i=e.maxRotation;let o,s,a,l=n;if(!this._isVisible()||!e.display||n>=i||r<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=ze(this.chart.width-d,0,this.maxWidth);o=t.offset?this.maxWidth/r:h/(r-1),d+6>o&&(o=h/(r-(t.offset?.5:1)),s=this.maxHeight-so(t.grid)-e.padding-ao(t.title,this.chart.options.font),a=Math.sqrt(d*d+u*u),l=Le(Math.min(Math.asin(ze((c.highest.height+6)/o,-1,1)),Math.asin(ze(s/a,-1,1))-Math.asin(ze(u/a,-1,1)))),l=Math.max(n,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){ee(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ee(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:r,title:n,grid:i}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=ao(n,e.options.font);if(s?(t.width=this.maxWidth,t.height=so(i)+o):(t.height=this.maxHeight,t.width=so(i)+o),r.display&&this.ticks.length){const{first:e,last:n,widest:i,highest:o}=this._getLabelSizes(),a=2*r.padding,l=Pe(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(s){const e=r.mirror?0:d*i.width+c*o.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=r.mirror?0:c*i.width+d*o.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,n,d,c)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,n){const{ticks:{align:i,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;a?l?(d=n*t.width,u=r*e.height):(d=r*t.height,u=n*e.width):"start"===i?u=e.width:"end"===i?d=t.width:"inner"!==i&&(d=t.width/2,u=e.width/2),this.paddingLeft=Math.max((d-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((u-c+o)*this.width/(this.width-c),0)}else{let r=e.height/2,n=t.height/2;"start"===i?(r=0,n=t.height):"end"===i&&(r=e.height,n=0),this.paddingTop=r+o,this.paddingBottom=n+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ee(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,r=t.length;e<r;e++)Yt(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let r=this.ticks;e<r.length&&(r=io(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,r){const{ctx:n,_longestTextCache:i}=this,o=[],s=[],a=Math.floor(e/no(e,r));let l,c,d,u,h,g,f,p,m,b,y,x=0,v=0;for(l=0;l<e;l+=a){if(u=t[l].label,h=this._resolveTickFontOptions(l),n.font=g=h.string,f=i[g]=i[g]||{data:{},gc:[]},p=h.lineHeight,m=b=0,Yt(u)||Qt(u)){if(Qt(u))for(c=0,d=u.length;c<d;++c)y=u[c],Yt(y)||Qt(y)||(m=br(n,f.data,f.gc,m,y),b+=p)}else m=br(n,f.data,f.gc,m,u),b=p;o.push(m),s.push(b),x=Math.max(m,x),v=Math.max(b,v)}!function(t,e){re(t,t=>{const r=t.gc,n=r.length/2;let i;if(n>e){for(i=0;i<n;++i)delete t.data[r[i]];r.splice(0,n)}})}(i,e);const k=o.indexOf(x),w=s.indexOf(v),_=t=>({width:o[t]||0,height:s[t]||0});return{first:_(0),last:_(e-1),widest:_(k),highest:_(w),widths:o,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return ze(this._alignToPixels?xr(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const r=e[t];return r.$context||(r.$context=function(t,e,r){return Wr(t,{tick:r,index:e,type:"tick"})}(this.getContext(),t,r))}return this.$context||(this.$context=Wr(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Pe(this.labelRotation),r=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,s=i?i.widest.width+o:0,a=i?i.highest.height+o:0;return this.isHorizontal()?a*r>s*n?s/r:a/n:a*n<s*r?a/r:s/n}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,r=this.chart,n=this.options,{grid:i,position:o,border:s}=n,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),d=so(i),u=[],h=s.setContext(this.getContext()),g=h.display?h.width:0,f=g/2,p=function(t){return xr(r,t,g)};let m,b,y,x,v,k,w,_,C,M,S,A;if("top"===o)m=p(this.bottom),k=this.bottom-d,_=m-f,M=p(t.top)+f,A=t.bottom;else if("bottom"===o)m=p(this.top),M=t.top,A=p(t.bottom)-f,k=m+f,_=this.top+d;else if("left"===o)m=p(this.right),v=this.right-d,w=m-f,C=p(t.left)+f,S=t.right;else if("right"===o)m=p(this.left),C=t.left,S=p(t.right)-f,v=m+f,w=this.left+d;else if("x"===e){if("center"===o)m=p((t.top+t.bottom)/2+.5);else if(Jt(o)){const t=Object.keys(o)[0],e=o[t];m=p(this.chart.scales[t].getPixelForValue(e))}M=t.top,A=t.bottom,k=m+f,_=k+d}else if("y"===e){if("center"===o)m=p((t.left+t.right)/2);else if(Jt(o)){const t=Object.keys(o)[0],e=o[t];m=p(this.chart.scales[t].getPixelForValue(e))}v=m-f,w=v-d,C=t.left,S=t.right}const D=Zt(n.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/D));for(b=0;b<c;b+=T){const t=this.getContext(b),e=i.setContext(t),n=s.setContext(t),o=e.lineWidth,c=e.color,d=n.dash||[],h=n.dashOffset,g=e.tickWidth,f=e.tickColor,p=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=oo(this,b,a),void 0!==y&&(x=xr(r,y,o),l?v=w=C=S=x:k=_=M=A=x,u.push({tx1:v,ty1:k,tx2:w,ty2:_,x1:C,y1:M,x2:S,y2:A,width:o,color:c,borderDash:d,borderDashOffset:h,tickWidth:g,tickColor:f,tickBorderDash:p,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,u}_computeLabelItems(t){const e=this.axis,r=this.options,{position:n,ticks:i}=r,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:d}=i,u=so(r.grid),h=u+c,g=d?-c:h,f=-Pe(this.labelRotation),p=[];let m,b,y,x,v,k,w,_,C,M,S,A,D="middle";if("top"===n)k=this.bottom-g,w=this._getXAxisLabelAlignment();else if("bottom"===n)k=this.top+g,w=this._getXAxisLabelAlignment();else if("left"===n){const t=this._getYAxisLabelAlignment(u);w=t.textAlign,v=t.x}else if("right"===n){const t=this._getYAxisLabelAlignment(u);w=t.textAlign,v=t.x}else if("x"===e){if("center"===n)k=(t.top+t.bottom)/2+h;else if(Jt(n)){const t=Object.keys(n)[0],e=n[t];k=this.chart.scales[t].getPixelForValue(e)+h}w=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===n)v=(t.left+t.right)/2-h;else if(Jt(n)){const t=Object.keys(n)[0],e=n[t];v=this.chart.scales[t].getPixelForValue(e)}w=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===a?D="top":"end"===a&&(D="bottom"));const T=this._getLabelSizes();for(m=0,b=s.length;m<b;++m){y=s[m],x=y.label;const t=i.setContext(this.getContext(m));_=this.getPixelForTick(m)+i.labelOffset,C=this._resolveTickFontOptions(m),M=C.lineHeight,S=Qt(x)?x.length:1;const e=S/2,r=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let u,h=w;if(o?(v=_,"inner"===w&&(h=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),A="top"===n?"near"===l||0!==f?-S*M+M/2:"center"===l?-T.highest.height/2-e*M+M:-T.highest.height+M/2:"near"===l||0!==f?M/2:"center"===l?T.highest.height/2-e*M:T.highest.height-S*M,d&&(A*=-1),0===f||t.showLabelBackdrop||(v+=M/2*Math.sin(f))):(k=_,A=(1-S)*M/2),t.showLabelBackdrop){const e=Ir(t.backdropPadding),r=T.heights[m],n=T.widths[m];let i=A-e.top,o=0-e.left;switch(D){case"middle":i-=r/2;break;case"bottom":i-=r}switch(w){case"center":o-=n/2;break;case"right":o-=n;break;case"inner":m===b-1?o-=n:m>0&&(o-=n/2)}u={left:o,top:i,width:n+e.width,height:r+e.height,color:t.backdropColor}}p.push({label:x,font:C,textOffset:A,options:{rotation:f,color:r,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:D,translation:[v,k],backdrop:u}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Pe(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:r,mirror:n,padding:i}}=this.options,o=t+i,s=this._getLabelSizes().widest.width;let a,l;return"left"===e?n?(l=this.right+i,"near"===r?a="left":"center"===r?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===r?a="right":"center"===r?(a="center",l-=s/2):(a="left",l=this.left)):"right"===e?n?(l=this.left+i,"near"===r?a="right":"center"===r?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===r?a="left":"center"===r?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:r,top:n,width:i,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,n,i,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(e=>e.value===t);if(r>=0){return e.setContext(this.getContext(r)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,r=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const s=(t,e,n)=>{n.width&&n.color&&(r.save(),r.lineWidth=n.width,r.strokeStyle=n.color,r.setLineDash(n.borderDash||[]),r.lineDashOffset=n.borderDashOffset,r.beginPath(),r.moveTo(t.x,t.y),r.lineTo(e.x,e.y),r.stroke(),r.restore())};if(e.display)for(i=0,o=n.length;i<o;++i){const t=n[i];e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:r,grid:n}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const s=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=xr(t,this.left,o)-o/2,c=xr(t,this.right,s)+s/2,d=u=a):(d=xr(t,this.top,o)-o/2,u=xr(t,this.bottom,s)+s/2,l=c=a),e.save(),e.lineWidth=i.width,e.strokeStyle=i.color,e.beginPath(),e.moveTo(l,d),e.lineTo(c,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,r=this._computeLabelArea();r&&Cr(e,r);const n=this.getLabelItems(t);for(const t of n){const r=t.options,n=t.font;Pr(e,t.label,0,t.textOffset,n,r)}r&&Mr(e)}drawTitle(){const{ctx:t,options:{position:e,title:r,reverse:n}}=this;if(!r.display)return;const i=Fr(r.font),o=Ir(r.padding),s=r.align;let a=i.lineHeight/2;"bottom"===e||"center"===e||Jt(e)?(a+=o.bottom,Qt(r.text)&&(a+=i.lineHeight*(r.text.length-1))):a+=o.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(t,e,r,n){const{top:i,left:o,bottom:s,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let u,h,g,f=0;const p=s-i,m=a-o;if(t.isHorizontal()){if(h=Qe(n,o,a),Jt(r)){const t=Object.keys(r)[0],n=r[t];g=d[t].getPixelForValue(n)+p-e}else g="center"===r?(c.bottom+c.top)/2+p-e:ro(t,r,e);u=a-o}else{if(Jt(r)){const t=Object.keys(r)[0],n=r[t];h=d[t].getPixelForValue(n)-m+e}else h="center"===r?(c.left+c.right)/2-m+e:ro(t,r,e);g=Qe(n,s,i),f="left"===r?-ke:ke}return{titleX:h,titleY:g,maxWidth:u,rotation:f}}(this,a,e,s);Pr(t,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:u,textAlign:lo(s,e,n),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,r=Zt(t.grid&&t.grid.z,-1),n=Zt(t.border&&t.border.z,0);return this._isVisible()&&this.draw===co.prototype.draw?[{z:r,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",n=[];let i,o;for(i=0,o=e.length;i<o;++i){const o=e[i];o[r]!==this.id||t&&o.type!==t||n.push(o)}return n}_resolveTickFontOptions(t){return Fr(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class uo{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let r;(function(t){return"id"in t&&"defaults"in t})(e)&&(r=this.register(e));const n=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in n||(n[i]=t,function(t,e,r){const n=ae(Object.create(null),[r?mr.get(r):{},mr.get(e),t.defaults]);mr.set(e,n),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),i=n.pop(),o=[t].concat(n).join("."),s=e[r].split("."),a=s.pop(),l=s.join(".");mr.route(o,i,l,a)})}(e,t.defaultRoutes);t.descriptors&&mr.describe(e,t.descriptors)}(t,o,r),this.override&&mr.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,r=t.id,n=this.scope;r in e&&delete e[r],n&&r in mr[n]&&(delete mr[n][r],this.override&&delete ur[r])}}class ho{constructor(){this.controllers=new uo(ei,"datasets",!0),this.elements=new uo(Zi,"elements"),this.plugins=new uo(Object,"plugins"),this.scales=new uo(co,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(e=>{const n=r||this._getRegistryForType(e);r||n.isForType(e)||n===this.plugins&&e.id?this._exec(t,n,e):re(e,e=>{const n=r||this._getRegistryForType(e);this._exec(t,n,e)})})}_exec(t,e,r){const n=he(t);ee(r["before"+n],[],r),e[t](r),ee(r["after"+n],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){const n=e.get(t);if(void 0===n)throw new Error('"'+t+'" is not a registered '+r+".");return n}}var go=new ho;class fo{constructor(){this._init=[]}notify(t,e,r,n){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(i,t,e,r);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,r,n){n=n||{};for(const i of t){const t=i.plugin;if(!1===ee(t[r],[e,n,i.options],t)&&n.cancelable)return!1}return!0}invalidate(){Yt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const r=t&&t.config,n=Zt(r.options&&r.options.plugins,{}),i=function(t){const e={},r=[],n=Object.keys(go.plugins.items);for(let t=0;t<n.length;t++)r.push(go.getPlugin(n[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const n=i[t];-1===r.indexOf(n)&&(r.push(n),e[n.id]=!0)}return{plugins:r,localIds:e}}(r);return!1!==n||e?function(t,{plugins:e,localIds:r},n,i){const o=[],s=t.getContext();for(const a of e){const e=a.id,l=po(n[e],i);null!==l&&o.push({plugin:a,options:mo(t.config,{plugin:a,local:r[e]},l,s)})}return o}(t,i,n,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],r=this._cache,n=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(n(e,r),t,"stop"),this._notify(n(r,e),t,"start")}}function po(t,e){return e||!1!==t?!0===t?{}:t:null}function mo(t,{plugin:e,local:r},n,i){const o=t.pluginScopeKeys(e),s=t.getOptionScopes(n,o);return r&&e.defaults&&s.push(e.defaults),t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bo(t,e){const r=mr.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function yo(t){if("x"===t||"y"===t||"r"===t)return t}function xo(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function vo(t,...e){if(yo(t))return t;for(const r of e){const e=r.axis||xo(r.position)||t.length>1&&yo(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ko(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function wo(t,e){const r=ur[t.type]||{scales:{}},n=e.scales||{},i=bo(t.type,e),o=Object.create(null);return Object.keys(n).forEach(e=>{const s=n[e];if(!Jt(s))return console.error(`Invalid scale configuration for scale: ${e}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=vo(e,s,function(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(r.length)return ko(t,"x",r[0])||ko(t,"y",r[0])}return{}}(e,t),mr.scales[s.type]),l=function(t,e){return t===e?"_index_":"_value_"}(a,i),c=r.scales||{};o[e]=le(Object.create(null),[{axis:a},s,c[a],c[l]])}),t.data.datasets.forEach(r=>{const i=r.type||t.type,s=r.indexAxis||bo(i,e),a=(ur[i]||{}).scales||{};Object.keys(a).forEach(t=>{const e=function(t,e){let r=t;return"_index_"===t?r=e:"_value_"===t&&(r="x"===e?"y":"x"),r}(t,s),i=r[e+"AxisID"]||e;o[i]=o[i]||Object.create(null),le(o[i],[{axis:e},n[i],a[t]])})}),Object.keys(o).forEach(t=>{const e=o[t];le(e,[mr.scales[e.type],mr.scale])}),o}function _o(t){const e=t.options||(t.options={});e.plugins=Zt(e.plugins,{}),e.scales=wo(t,e)}function Co(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Mo=new Map,So=new Set;function Ao(t,e){let r=Mo.get(t);return r||(r=e(),Mo.set(t,r),So.add(r)),r}const Do=(t,e,r)=>{const n=ue(e,r);void 0!==n&&t.add(n)};class To{constructor(t){this._config=function(t){return(t=t||{}).data=Co(t.data),_o(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Co(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),_o(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ao(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Ao(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Ao(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return Ao(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const r=this._scopeCache;let n=r.get(t);return n&&!e||(n=new Map,r.set(t,n)),n}getOptionScopes(t,e,r){const{options:n,type:i}=this,o=this._cachedScopes(t,r),s=o.get(e);if(s)return s;const a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>Do(a,t,e))),e.forEach(t=>Do(a,n,t)),e.forEach(t=>Do(a,ur[i]||{},t)),e.forEach(t=>Do(a,mr,t)),e.forEach(t=>Do(a,hr,t))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),So.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,ur[e]||{},mr.datasets[e]||{},{type:e},mr,hr]}resolveNamedOptions(t,e,r,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:s}=Po(this._resolverCache,t,n);let a=o;if(function(t,e){const{isScriptable:r,isIndexable:n}=qr(t);for(const i of e){const e=r(i),o=n(i),s=(o||e)&&t[i];if(e&&(fe(s)||Lo(s))||o&&Qt(s))return!0}return!1}(o,e)){i.$shared=!1;a=Vr(o,r=fe(r)?r():r,this.createResolver(t,r,s))}for(const t of e)i[t]=a[t];return i}createResolver(t,e,r=[""],n){const{resolver:i}=Po(this._resolverCache,t,r);return Jt(e)?Vr(i,e,void 0,n):i}}function Po(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=r.join();let o=n.get(i);if(!o){o={resolver:Hr(e,r),subPrefixes:r.filter(t=>!t.toLowerCase().includes("hover"))},n.set(i,o)}return o}const Lo=t=>Jt(t)&&Object.getOwnPropertyNames(t).some(e=>fe(t[e]));const Eo=["top","bottom","left","right","chartArea"];function Oo(t,e){return"top"===t||"bottom"===t||-1===Eo.indexOf(t)&&"x"===e}function Ro(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function Bo(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),ee(r&&r.onComplete,[t],e)}function jo(t){const e=t.chart,r=e.options.animation;ee(r&&r.onProgress,[t],e)}function $o(t){return un()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const zo={},Io=t=>{const e=$o(t);return Object.values(zo).filter(t=>t.canvas===e).pop()};function Fo(t,e,r){const n=Object.keys(t);for(const i of n){const n=+i;if(n>=e){const o=t[i];delete t[i],(r>0||n>e)&&(t[n+r]=o)}}}class No{static defaults=mr;static instances=zo;static overrides=ur;static registry=go;static version="4.5.0";static getChart=Io;static register(...t){go.add(...t),Wo()}static unregister(...t){go.remove(...t),Wo()}constructor(t,e){const r=this.config=new To(e),n=$o(t),i=Io(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||function(t){return!un()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?$i:Gi}(n)),this.platform.updateConfig(r);const s=this.platform.acquireContext(n,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=Kt(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new fo,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}(t=>this.update(t),o.resizeDelay||0),this._dataChanges=[],zo[this.id]=this,s&&a?(In.listen(this,"complete",Bo),In.listen(this,"progress",jo),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:n,_aspectRatio:i}=this;return Yt(t)?e&&i?i:n?r/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return go}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return vr(this.canvas,this.ctx),this}stop(){return In.stop(this),this}resize(t,e){In.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const r=this.options,n=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,e,i),s=r.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,vn(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),ee(r.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){re(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,r=this.scales,n=Object.keys(r).reduce((t,e)=>(t[e]=!1,t),{});let i=[];e&&(i=i.concat(Object.keys(e).map(t=>{const r=e[t],n=vo(t,r),i="r"===n,o="x"===n;return{options:r,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}}))),re(i,e=>{const i=e.options,o=i.id,s=vo(o,i),a=Zt(i.type,e.dtype);void 0!==i.position&&Oo(i.position,s)===Oo(e.dposition)||(i.position=e.dposition),n[o]=!0;let l=null;if(o in r&&r[o].type===a)l=r[o];else{l=new(go.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),r[l.id]=l}l.init(i,t)}),re(n,(t,e)=>{t||delete r[e]}),re(r,t=>{Bi.configure(this,t,t.options),Bi.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((t,e)=>t.index-e.index),r>e){for(let t=e;t<r;++t)this._destroyDatasetMeta(t);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(Ro("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,r)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let r,n;for(this._removeUnreferencedMetasets(),r=0,n=e.length;r<n;r++){const n=e[r];let i=this.getDatasetMeta(r);const o=n.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(r),i=this.getDatasetMeta(r)),i.type=o,i.indexAxis=n.indexAxis||bo(o,this.options),i.order=n.order||0,i.index=r,i.label=""+n.label,i.visible=this.isDatasetVisible(r),i.controller)i.controller.updateIndex(r),i.controller.linkScales();else{const e=go.getController(o),{datasetElementType:n,dataElementType:s}=mr.datasets[o];Object.assign(e,{dataElementType:go.getElement(s),datasetElementType:n&&go.getElement(n)}),i.controller=new e(this,r),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){re(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),r=!n&&-1===i.indexOf(e);e.buildOrUpdateElements(r),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),n||re(i,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ro("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){re(this.scales,t=>{Bi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);pe(e,r)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:r,start:n,count:i}of e){Fo(t,n,"_removeElements"===r?-i:i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,r=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),n=r(0);for(let t=1;t<e;t++)if(!pe(n,r(t)))return;return Array.from(n).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Bi.update(this,this.width,this.height,t);const e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],re(this.boxes,t=>{r&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,fe(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const r=this.getDatasetMeta(t),n={meta:r,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(r.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(In.has(this)?this.attached&&!In.running(this)&&In.start(this):(this.draw(),Bo({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,r=[];let n,i;for(n=0,i=e.length;n<i;++n){const i=e[n];t&&!i.visible||r.push(i)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,r={meta:t,index:t.index,cancelable:!0},n=$n(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(n&&Cr(e,n),t.controller.draw(),n&&Mr(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return _r(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,r,n){const i=wi.modes[e];return"function"==typeof i?i(this,t,r,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],r=this._metasets;let n=r.filter(t=>t&&t._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=Wr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const r=this.getDatasetMeta(t);return"boolean"==typeof r.hidden?!r.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){const n=r?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,n);ge(e)?(i.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),o.update(i,{visible:r}),this.update(e=>e.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),In.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),vr(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete zo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,r=(r,n)=>{e.addEventListener(this,r,n),t[r]=n},n=(t,e,r)=>{t.offsetX=e,t.offsetY=r,this._eventHandler(t)};re(this.options.events,t=>r(t,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,r=(r,n)=>{e.addEventListener(this,r,n),t[r]=n},n=(r,n)=>{t[r]&&(e.removeEventListener(this,r,n),delete t[r])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const s=()=>{n("attach",s),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),r("attach",s)},e.isAttached(this.canvas)?s():o()}unbindEvents(){re(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},re(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){const n=r?"set":"remove";let i,o,s,a;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){o=t[s];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],r=t.map(({datasetIndex:t,index:e})=>{const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[e],index:e}});!ne(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,r){const n=this.options.hover,i=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),o=i(e,t),s=r?t:i(t,e);o.length&&this.updateHoverStyle(o,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(t,e){const r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",r,n))return;const i=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(i||r.changed)&&this.render(),this}_handleEvent(t,e,r){const{_active:n=[],options:i}=this,o=e,s=this._getActiveElements(t,n,r,o),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,r,n){return r&&"mouseout"!==t.type?n?e:t:null}(t,this._lastEvent,r,a);r&&(this._lastEvent=null,ee(i.onHover,[t,s,this],this),a&&ee(i.onClick,[t,s,this],this));const c=!ne(s,n);return(c||e)&&(this._active=s,this._updateHoverStyles(s,n,e)),this._lastEvent=l,c}_getActiveElements(t,e,r,n){if("mouseout"===t.type)return[];if(!r)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,n)}}function Wo(){return re(No.instances,t=>t._plugins.invalidate())}function Ho(t,e,r,n){const i=jr(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(r-e)/2,s=Math.min(o,n*e/2),a=t=>{const e=(r-Math.min(o,t))*n/2;return ze(t,0,Math.min(o,e))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:ze(i.innerStart,0,s),innerEnd:ze(i.innerEnd,0,s)}}function Vo(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function qo(t,e,r,n,i,o){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,u=Math.max(e.outerRadius+n+r-c,0),h=d>0?d+n+r+c:0;let g=0;const f=i-l;if(n){const t=((d>0?d-n:0)+(u>0?u-n:0))/2;g=(f-(0!==t?f*t/(t+n):f))/2}const p=(f-Math.max(.001,f*u-r/me)/u)/2,m=l+p+g,b=i-p-g,{outerStart:y,outerEnd:x,innerStart:v,innerEnd:k}=Ho(e,h,u,b-m),w=u-y,_=u-x,C=m+y/w,M=b-x/_,S=h+v,A=h+k,D=m+v/S,T=b-k/A;if(t.beginPath(),o){const e=(C+M)/2;if(t.arc(s,a,u,C,e),t.arc(s,a,u,e,M),x>0){const e=Vo(_,M,s,a);t.arc(e.x,e.y,x,M,b+ke)}const r=Vo(A,b,s,a);if(t.lineTo(r.x,r.y),k>0){const e=Vo(A,T,s,a);t.arc(e.x,e.y,k,b+ke,T+Math.PI)}const n=(b-k/h+(m+v/h))/2;if(t.arc(s,a,h,b-k/h,n,!0),t.arc(s,a,h,n,m+v/h,!0),v>0){const e=Vo(S,D,s,a);t.arc(e.x,e.y,v,D+Math.PI,m-ke)}const i=Vo(w,m,s,a);if(t.lineTo(i.x,i.y),y>0){const e=Vo(w,C,s,a);t.arc(e.x,e.y,y,m-ke,C)}}else{t.moveTo(s,a);const e=Math.cos(C)*u+s,r=Math.sin(C)*u+a;t.lineTo(e,r);const n=Math.cos(M)*u+s,i=Math.sin(M)*u+a;t.lineTo(n,i)}t.closePath()}function Uo(t,e,r,n,i){const{fullCircles:o,startAngle:s,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:g}=l,f="inner"===l.borderAlign;if(!c)return;t.setLineDash(u||[]),t.lineDashOffset=h,f?(t.lineWidth=2*c,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let p=e.endAngle;if(o){qo(t,e,r,n,p,i);for(let e=0;e<o;++e)t.stroke();isNaN(a)||(p=s+(a%be||be))}f&&function(t,e,r){const{startAngle:n,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(o,s,a,n-c,r+c),l>i?(c=i/l,t.arc(o,s,l,r+c,n-c,!0)):t.arc(o,s,i,r+ke,n-ke),t.closePath(),t.clip()}(t,e,p),l.selfJoin&&p-s>=me&&0===g&&"miter"!==d&&function(t,e,r){const{startAngle:n,x:i,y:o,outerRadius:s,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/s,je(n-r));if(t.beginPath(),t.arc(i,o,s-c/2,n+u/2,r-u/2),a>0){const e=Math.min(c/a,je(n-r));t.arc(i,o,a+c/2,r-e/2,n+e/2,!0)}else{const e=Math.min(c/2,s*je(n-r));if("round"===d)t.arc(i,o,e,r-me/2,n+me/2,!0);else if("bevel"===d){const s=2*e*e,a=-s*Math.cos(r+me/2)+i,l=-s*Math.sin(r+me/2)+o,c=s*Math.cos(n+me/2)+i,d=s*Math.sin(n+me/2)+o;t.lineTo(a,l),t.lineTo(c,d)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,p),o||(qo(t,e,r,n,p,i),t.stroke())}function Ko(t,e,r=e){t.lineCap=Zt(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Zt(r.borderDash,e.borderDash)),t.lineDashOffset=Zt(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Zt(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Zt(r.borderWidth,e.borderWidth),t.strokeStyle=Zt(r.borderColor,e.borderColor)}function Yo(t,e,r){t.lineTo(r.x,r.y)}function Qo(t,e,r={}){const n=t.length,{start:i=0,end:o=n-1}=r,{start:s,end:a}=e,l=Math.max(i,s),c=Math.min(o,a),d=i<s&&o<s||i>a&&o>a;return{count:n,start:l,loop:e.loop,ilen:c<l&&!d?n+c-l:c-l}}function Jo(t,e,r,n){const{points:i,options:o}=e,{count:s,start:a,loop:l,ilen:c}=Qo(i,r,n),d=function(t){return t.stepped?Sr:t.tension||"monotone"===t.cubicInterpolationMode?Ar:Yo}(o);let u,h,g,{move:f=!0,reverse:p}=n||{};for(u=0;u<=c;++u)h=i[(a+(p?c-u:u))%s],h.skip||(f?(t.moveTo(h.x,h.y),f=!1):d(t,g,h,p,o.stepped),g=h);return l&&(h=i[(a+(p?c:0))%s],d(t,g,h,p,o.stepped)),!!l}function Xo(t,e,r,n){const i=e.points,{count:o,start:s,ilen:a}=Qo(i,r,n),{move:l=!0,reverse:c}=n||{};let d,u,h,g,f,p,m=0,b=0;const y=t=>(s+(c?a-t:t))%o,x=()=>{g!==f&&(t.lineTo(m,f),t.lineTo(m,g),t.lineTo(m,p))};for(l&&(u=i[y(0)],t.moveTo(u.x,u.y)),d=0;d<=a;++d){if(u=i[y(d)],u.skip)continue;const e=u.x,r=u.y,n=0|e;n===h?(r<g?g=r:r>f&&(f=r),m=(b*m+e)/++b):(x(),t.lineTo(e,r),h=n,b=0,g=f=r),p=r}x()}function Go(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||r)?Xo:Jo}const Zo="function"==typeof Path2D;function ts(t,e,r,n){Zo&&!e.options.segment?function(t,e,r,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,r,n)&&i.closePath()),Ko(t,e.options),t.stroke(i)}(t,e,r,n):function(t,e,r,n){const{segments:i,options:o}=e,s=Go(e);for(const a of i)Ko(t,o,a.style),t.beginPath(),s(t,e,a,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}(t,e,r,n)}class es extends Zi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const r=this.options;if((r.tension||"monotone"===r.cubicInterpolationMode)&&!r.stepped&&!this._pointsUpdated){const n=r.spanGaps?this._loop:this._fullLoop;dn(this._points,r,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const r=t.points,n=t.options.spanGaps,i=r.length;if(!i)return[];const o=!!t._loop,{start:s,end:a}=function(t,e,r,n){let i=0,o=e-1;if(r&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,r&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}(r,i,o,n);return On(t,!0===n?[{start:s,end:a,loop:o}]:function(t,e,r,n){const i=t.length,o=[];let s,a=e,l=t[e];for(s=e+1;s<=r;++s){const r=t[s%i];r.skip||r.stop?l.skip||(n=!1,o.push({start:e%i,end:(s-1)%i,loop:n}),e=a=r.stop?s:null):(a=s,l.skip&&(e=s)),l=r}return null!==a&&o.push({start:e%i,end:a%i,loop:n}),o}(r,s,a<s?a+i:a,!!t._fullLoop&&0===s&&a===i-1),r,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,r=t.length;return r&&e[t[r-1].end]}interpolate(t,e){const r=this.options,n=t[e],i=this.points,o=En(this,{property:e,start:n,end:n});if(!o.length)return;const s=[],a=function(t){return t.stepped?Cn:t.tension||"monotone"===t.cubicInterpolationMode?Mn:_n}(r);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:d}=o[l],u=i[c],h=i[d];if(u===h){s.push(u);continue}const g=a(u,h,Math.abs((n-u[e])/(h[e]-u[e])),r.stepped);g[e]=t[e],s.push(g)}return 1===s.length?s[0]:s}pathSegment(t,e,r){return Go(this)(t,this,e,r)}path(t,e,r){const n=this.segments,i=Go(this);let o=this._loop;e=e||0,r=r||this.points.length-e;for(const s of n)o&=i(t,this,s,{start:e,end:e+r-1});return!!o}draw(t,e,r,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),ts(t,this,r,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function rs(t,e,r,n){const i=t.options,{[r]:o}=t.getProps([r],n);return Math.abs(e-o)<i.radius+i.hitRadius}function ns(t,e){const{x:r,y:n,base:i,width:o,height:s}=t.getProps(["x","y","base","width","height"],e);let a,l,c,d,u;return t.horizontal?(u=s/2,a=Math.min(r,i),l=Math.max(r,i),c=n-u,d=n+u):(u=o/2,a=r-u,l=r+u,c=Math.min(n,i),d=Math.max(n,i)),{left:a,top:c,right:l,bottom:d}}function is(t,e,r,n){return t?0:ze(e,r,n)}function os(t){const e=ns(t),r=e.right-e.left,n=e.bottom-e.top,i=function(t,e,r){const n=t.options.borderWidth,i=t.borderSkipped,o=$r(n);return{t:is(i.top,o.top,0,r),r:is(i.right,o.right,0,e),b:is(i.bottom,o.bottom,0,r),l:is(i.left,o.left,0,e)}}(t,r/2,n/2),o=function(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=zr(i),s=Math.min(e,r),a=t.borderSkipped,l=n||Jt(i);return{topLeft:is(!l||a.top||a.left,o.topLeft,0,s),topRight:is(!l||a.top||a.right,o.topRight,0,s),bottomLeft:is(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:is(!l||a.bottom||a.right,o.bottomRight,0,s)}}(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:r-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function ss(t,e,r,n){const i=null===e,o=null===r,s=t&&!(i&&o)&&ns(t,n);return s&&(i||Ie(e,s.left,s.right))&&(o||Ie(r,s.top,s.bottom))}function as(t,e){t.rect(e.x,e.y,e.w,e.h)}function ls(t,e,r={}){const n=t.x!==r.x?-e:0,i=t.y!==r.y?-e:0,o=(t.x+t.w!==r.x+r.w?e:0)-n,s=(t.y+t.h!==r.y+r.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+o,h:t.h+s,radius:t.radius}}var cs=Object.freeze({__proto__:null,ArcElement:class extends Zi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,r){const n=this.getProps(["x","y"],r),{angle:i,distance:o}=Oe(n,{x:t,y:e}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),u=(this.options.spacing+this.options.borderWidth)/2,h=Zt(d,a-s),g=$e(i,s,a)&&s!==a,f=h>=be||g,p=Ie(o,l+u,c+u);return f&&p}getCenterPoint(t){const{x:e,y:r,startAngle:n,endAngle:i,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,c=(n+i)/2,d=(o+s+l+a)/2;return{x:e+Math.cos(c)*d,y:r+Math.sin(c)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:r}=this,n=(e.offset||0)/4,i=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=r>be?Math.floor(r/be):0,0===r||this.innerRadius<0||this.outerRadius<0)return;t.save();const s=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(s)*n,Math.sin(s)*n);const a=n*(1-Math.sin(Math.min(me,r||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,r,n,i){const{fullCircles:o,startAngle:s,circumference:a}=e;let l=e.endAngle;if(o){qo(t,e,r,n,l,i);for(let e=0;e<o;++e)t.fill();isNaN(a)||(l=s+(a%be||be))}qo(t,e,r,n,l,i),t.fill()}(t,this,a,i,o),Uo(t,this,a,i,o),t.restore()}},BarElement:class extends Zi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:r,backgroundColor:n}}=this,{inner:i,outer:o}=os(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?Lr:as;var a;t.save(),o.w===i.w&&o.h===i.h||(t.beginPath(),s(t,ls(o,e,i)),t.clip(),s(t,ls(i,-e,o)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),s(t,ls(i,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,r){return ss(this,t,e,r)}inXRange(t,e){return ss(this,t,null,e)}inYRange(t,e){return ss(this,null,t,e)}getCenterPoint(t){const{x:e,y:r,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+n)/2:e,y:i?r:(r+n)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:es,PointElement:class extends Zi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,r){const n=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(t-i,2)+Math.pow(e-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return rs(this,t,"x",e)}inYRange(t,e){return rs(this,t,"y",e)}getCenterPoint(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const r=this.options;this.skip||r.radius<.1||!_r(this,e,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,kr(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const ds=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],us=ds.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function hs(t){return ds[t%ds.length]}function gs(t){return us[t%us.length]}function fs(t){let e=0;return(r,n)=>{const i=t.getDatasetMeta(n).controller;i instanceof di?e=function(t,e){return t.backgroundColor=t.data.map(()=>hs(e++)),e}(r,e):i instanceof ui?e=function(t,e){return t.backgroundColor=t.data.map(()=>gs(e++)),e}(r,e):i&&(e=function(t,e){return t.borderColor=hs(e),t.backgroundColor=gs(e),++e}(r,e))}}function ps(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var ms={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,r){if(!r.enabled)return;const{data:{datasets:n},options:i}=t.config,{elements:o}=i,s=ps(n)||(a=i)&&(a.borderColor||a.backgroundColor)||o&&ps(o)||"rgba(0,0,0,0.1)"!==mr.borderColor||"rgba(0,0,0,0.1)"!==mr.backgroundColor;var a;if(!r.forceOverride&&s)return;const l=fs(t);n.forEach(l)}};function bs(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function ys(t){t.data.datasets.forEach(t=>{bs(t)})}var xs={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,r)=>{if(!r.enabled)return void ys(t);const n=t.width;t.data.datasets.forEach((e,i)=>{const{_data:o,indexAxis:s}=e,a=t.getDatasetMeta(i),l=o||e.data;if("y"===Nr([s,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=t.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:d,count:u}=function(t,e){const r=e.length;let n,i=0;const{iScale:o}=t,{min:s,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(i=ze(Ne(e,o.axis,s).lo,0,r-1)),n=c?ze(Ne(e,o.axis,a).hi+1,i,r)-i:r-i,{start:i,count:n}}(a,l);if(u<=(r.threshold||4*n))return void bs(e);let h;switch(Yt(o)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),r.algorithm){case"lttb":h=function(t,e,r,n,i){const o=i.samples||n;if(o>=r)return t.slice(e,e+r);const s=[],a=(r-2)/(o-2);let l=0;const c=e+r-1;let d,u,h,g,f,p=e;for(s[l++]=t[p],d=0;d<o-2;d++){let n,i=0,o=0;const c=Math.floor((d+1)*a)+1+e,m=Math.min(Math.floor((d+2)*a)+1,r)+e,b=m-c;for(n=c;n<m;n++)i+=t[n].x,o+=t[n].y;i/=b,o/=b;const y=Math.floor(d*a)+1+e,x=Math.min(Math.floor((d+1)*a)+1,r)+e,{x:v,y:k}=t[p];for(h=g=-1,n=y;n<x;n++)g=.5*Math.abs((v-i)*(t[n].y-k)-(v-t[n].x)*(o-k)),g>h&&(h=g,u=t[n],f=n);s[l++]=u,p=f}return s[l++]=t[c],s}(l,d,u,n,r);break;case"min-max":h=function(t,e,r,n){let i,o,s,a,l,c,d,u,h,g,f=0,p=0;const m=[],b=e+r-1,y=t[e].x,x=t[b].x-y;for(i=e;i<e+r;++i){o=t[i],s=(o.x-y)/x*n,a=o.y;const e=0|s;if(e===l)a<h?(h=a,c=i):a>g&&(g=a,d=i),f=(p*f+o.x)/++p;else{const r=i-1;if(!Yt(c)&&!Yt(d)){const e=Math.min(c,d),n=Math.max(c,d);e!==u&&e!==r&&m.push({...t[e],x:f}),n!==u&&n!==r&&m.push({...t[n],x:f})}i>0&&r!==u&&m.push(t[r]),m.push(o),l=e,p=0,h=g=a,c=d=u=i}}return m}(l,d,u,n);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}e._decimated=h})},destroy(t){ys(t)}};function vs(t,e,r,n){if(n)return;let i=e[t],o=r[t];return"angle"===t&&(i=je(i),o=je(o)),{property:t,start:i,end:o}}function ks(t,e,r){for(;e>t;e--){const t=r[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function ws(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function _s(t,e){let r=[],n=!1;return Qt(t)?(n=!0,r=t):r=function(t,e){const{x:r=null,y:n=null}=t||{},i=e.points,o=[];return e.segments.forEach(({start:t,end:e})=>{e=ks(t,e,i);const s=i[t],a=i[e];null!==n?(o.push({x:s.x,y:n}),o.push({x:a.x,y:n})):null!==r&&(o.push({x:r,y:s.y}),o.push({x:r,y:a.y}))}),o}(t,e),r.length?new es({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function Cs(t){return t&&!1!==t.fill}function Ms(t,e,r){let n=t[e].fill;const i=[e];let o;if(!r)return n;for(;!1!==n&&-1===i.indexOf(n);){if(!Xt(n))return n;if(o=t[n],!o)return!1;if(o.visible)return n;i.push(n),n=o.fill}return!1}function Ss(t,e,r){const n=function(t){const e=t.options,r=e.fill;let n=Zt(r&&r.target,r);void 0===n&&(n=!!e.backgroundColor);if(!1===n||null===n)return!1;if(!0===n)return"origin";return n}(t);if(Jt(n))return!isNaN(n.value)&&n;let i=parseFloat(n);return Xt(i)&&Math.floor(i)===i?function(t,e,r,n){"-"!==t&&"+"!==t||(r=e+r);if(r===e||r<0||r>=n)return!1;return r}(n[0],e,i,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function As(t,e,r){const n=[];for(let i=0;i<r.length;i++){const o=r[i],{first:s,last:a,point:l}=Ds(o,e,"x");if(!(!l||s&&a))if(s)n.unshift(l);else if(t.push(l),!a)break}t.push(...n)}function Ds(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const i=n[r],o=t.segments,s=t.points;let a=!1,l=!1;for(let t=0;t<o.length;t++){const e=o[t],n=s[e.start][r],c=s[e.end][r];if(Ie(i,n,c)){a=i===n,l=i===c;break}}return{first:a,last:l,point:n}}class Ts{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,r){const{x:n,y:i,radius:o}=this;return e=e||{start:0,end:be},t.arc(n,i,o,e.end,e.start,!0),!r.bounds}interpolate(t){const{x:e,y:r,radius:n}=this,i=t.angle;return{x:e+Math.cos(i)*n,y:r+Math.sin(i)*n,angle:i}}}function Ps(t){const{chart:e,fill:r,line:n}=t;if(Xt(r))return function(t,e){const r=t.getDatasetMeta(e),n=r&&t.isDatasetVisible(e);return n?r.dataset:null}(e,r);if("stack"===r)return function(t){const{scale:e,index:r,line:n}=t,i=[],o=n.segments,s=n.points,a=function(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let t=0;t<n.length;t++){const i=n[t];if(i.index===e)break;i.hidden||r.unshift(i.dataset)}return r}(e,r);a.push(_s({x:null,y:e.bottom},n));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)As(i,s[t],a)}return new es({points:i,options:{}})}(t);if("shape"===r)return!0;const i=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:r}=t,n=e.options,i=e.getLabels().length,o=n.reverse?e.max:e.min,s=function(t,e,r){let n;return n="start"===t?r:"end"===t?e.options.reverse?e.min:e.max:Jt(t)?t.value:e.getBaseValue(),n}(r,e,o),a=[];if(n.grid.circular){const t=e.getPointPositionForValue(0,o);return new Ts({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(s)})}for(let t=0;t<i;++t)a.push(e.getPointPositionForValue(t,s));return a}(t);return function(t){const{scale:e={},fill:r}=t,n=function(t,e){let r=null;return"start"===t?r=e.bottom:"end"===t?r=e.top:Jt(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}(r,e);if(Xt(n)){const t=e.isHorizontal();return{x:t?n:null,y:t?null:n}}return null}(t)}(t);return i instanceof Ts?i:_s(i,n)}function Ls(t,e,r){const n=Ps(e),{chart:i,index:o,line:s,scale:a,axis:l}=e,c=s.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:g=u}=d||{},f=i.getDatasetMeta(o),p=$n(i,f);n&&s.points.length&&(Cr(t,r),function(t,e){const{line:r,target:n,above:i,below:o,area:s,scale:a,clip:l}=e,c=r._loop?"angle":e.axis;t.save();let d=o;o!==i&&("x"===c?(Es(t,n,s.top),Rs(t,{line:r,target:n,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Es(t,n,s.bottom)):"y"===c&&(Os(t,n,s.left),Rs(t,{line:r,target:n,color:o,scale:a,property:c,clip:l}),t.restore(),t.save(),Os(t,n,s.right),d=i));Rs(t,{line:r,target:n,color:d,scale:a,property:c,clip:l}),t.restore()}(t,{line:s,target:n,above:h,below:g,area:r,scale:a,axis:l,clip:p}),Mr(t))}function Es(t,e,r){const{segments:n,points:i}=e;let o=!0,s=!1;t.beginPath();for(const a of n){const{start:n,end:l}=a,c=i[n],d=i[ks(n,l,i)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(c.x,r),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(d.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function Os(t,e,r){const{segments:n,points:i}=e;let o=!0,s=!1;t.beginPath();for(const a of n){const{start:n,end:l}=a,c=i[n],d=i[ks(n,l,i)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(r,c.y),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(r,d.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function Rs(t,e){const{line:r,target:n,property:i,color:o,scale:s,clip:a}=e,l=function(t,e,r){const n=t.segments,i=t.points,o=e.points,s=[];for(const t of n){let{start:n,end:a}=t;a=ks(n,a,i);const l=vs(r,i[n],i[a],t.loop);if(!e.segments){s.push({source:t,target:l,start:i[n],end:i[a]});continue}const c=En(e,l);for(const e of c){const n=vs(r,o[e.start],o[e.end],e.loop),a=Ln(t,i,n);for(const t of a)s.push({source:t,target:e,start:{[r]:ws(l,n,"start",Math.max)},end:{[r]:ws(l,n,"end",Math.min)}})}}return s}(r,n,i);for(const{source:e,target:c,start:d,end:u}of l){const{style:{backgroundColor:l=o}={}}=e,h=!0!==n;t.save(),t.fillStyle=l,Bs(t,s,a,h&&vs(i,d,u)),t.beginPath();const g=!!r.pathSegment(t,e);let f;if(h){g?t.closePath():js(t,n,u,i);const e=!!n.pathSegment(t,c,{move:g,reverse:!0});f=g&&e,f||js(t,n,d,i)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function Bs(t,e,r,n){const i=e.chart.chartArea,{property:o,start:s,end:a}=n||{};if("x"===o||"y"===o){let e,n,l,c;"x"===o?(e=s,n=i.top,l=a,c=i.bottom):(e=i.left,n=s,l=i.right,c=a),t.beginPath(),r&&(e=Math.max(e,r.left),l=Math.min(l,r.right),n=Math.max(n,r.top),c=Math.min(c,r.bottom)),t.rect(e,n,l-e,c-n),t.clip()}}function js(t,e,r,n){const i=e.interpolate(r,n);i&&t.lineTo(i.x,i.y)}var $s={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,i=[];let o,s,a,l;for(s=0;s<n;++s)o=t.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof es&&(l={visible:t.isDatasetVisible(s),index:s,fill:Ss(a,s,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(s=0;s<n;++s)l=i[s],l&&!1!==l.fill&&(l.fill=Ms(i,s,r.propagate))},beforeDraw(t,e,r){const n="beforeDraw"===r.drawTime,i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=i.length-1;e>=0;--e){const r=i[e].$filler;r&&(r.line.updateControlPoints(o,r.axis),n&&r.fill&&Ls(t.ctx,r,o))}},beforeDatasetsDraw(t,e,r){if("beforeDatasetsDraw"!==r.drawTime)return;const n=t.getSortedVisibleDatasetMetas();for(let e=n.length-1;e>=0;--e){const r=n[e].$filler;Cs(r)&&Ls(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;Cs(n)&&"beforeDatasetDraw"===r.drawTime&&Ls(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const zs=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}};class Is extends Zi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ee(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,r)=>t.sort(e,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const r=t.labels,n=Fr(r.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=zs(r,i);let l,c;e.font=n.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,i,s,a)+10):(c=this.maxHeight,l=this._fitCols(o,n,s,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,n){const{ctx:i,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=n+s;let d=t;i.textAlign="left",i.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((t,g)=>{const f=r+e/2+i.measureText(t.text).width;(0===g||l[l.length-1]+f+2*s>o)&&(d+=c,l[l.length-(g>0?0:1)]=0,h+=c,u++),a[g]={left:0,top:h,row:u,width:f,height:n},l[l.length-1]+=f+s}),d}_fitCols(t,e,r,n){const{ctx:i,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-t;let d=s,u=0,h=0,g=0,f=0;return this.legendItems.forEach((t,o)=>{const{itemWidth:p,itemHeight:m}=function(t,e,r,n,i){const o=function(t,e,r,n){let i=t.text;i&&"string"!=typeof i&&(i=i.reduce((t,e)=>t.length>e.length?t:e));return e+r.size/2+n.measureText(i).width}(n,t,e,r),s=function(t,e,r){let n=t;"string"!=typeof e.text&&(n=Fs(e,r));return n}(i,n,e.lineHeight);return{itemWidth:o,itemHeight:s}}(r,e,i,t,n);o>0&&h+m+2*s>c&&(d+=u+s,l.push({width:u,height:h}),g+=u+s,f++,u=h=0),a[o]={left:g,top:h,col:f,width:p,height:m},u=Math.max(u,p),h+=m+s}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:n},rtl:i}}=this,o=Sn(i,this.left,this.width);if(this.isHorizontal()){let i=0,s=Qe(r,this.left+n,this.right-this.lineWidths[i]);for(const a of e)i!==a.row&&(i=a.row,s=Qe(r,this.left+n,this.right-this.lineWidths[i])),a.top+=this.top+t+n,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+n}else{let i=0,s=Qe(r,this.top+t+n,this.bottom-this.columnSizes[i].height);for(const a of e)a.col!==i&&(i=a.col,s=Qe(r,this.top+t+n,this.bottom-this.columnSizes[i].height)),a.top=s,a.left+=this.left+n,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Cr(t,this),this._draw(),Mr(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:r,ctx:n}=this,{align:i,labels:o}=t,s=mr.color,a=Sn(t.rtl,this.left,this.width),l=Fr(o.font),{padding:c}=o,d=l.size,u=d/2;let h;this.drawTitle(),n.textAlign=a.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=l.string;const{boxWidth:g,boxHeight:f,itemHeight:p}=zs(o,d),m=this.isHorizontal(),b=this._computeTitleHeight();h=m?{x:Qe(i,this.left+c,this.right-r[0]),y:this.top+c+b,line:0}:{x:this.left+c,y:Qe(i,this.top+b+c,this.bottom-e[0].height),line:0},An(this.ctx,t.textDirection);const y=p+c;this.legendItems.forEach((x,v)=>{n.strokeStyle=x.fontColor,n.fillStyle=x.fontColor;const k=n.measureText(x.text).width,w=a.textAlign(x.textAlign||(x.textAlign=o.textAlign)),_=g+u+k;let C=h.x,M=h.y;a.setWidth(this.width),m?v>0&&C+_+c>this.right&&(M=h.y+=y,h.line++,C=h.x=Qe(i,this.left+c,this.right-r[h.line])):v>0&&M+y>this.bottom&&(C=h.x=C+e[h.line].width+c,h.line++,M=h.y=Qe(i,this.top+b+c,this.bottom-e[h.line].height));if(function(t,e,r){if(isNaN(g)||g<=0||isNaN(f)||f<0)return;n.save();const i=Zt(r.lineWidth,1);if(n.fillStyle=Zt(r.fillStyle,s),n.lineCap=Zt(r.lineCap,"butt"),n.lineDashOffset=Zt(r.lineDashOffset,0),n.lineJoin=Zt(r.lineJoin,"miter"),n.lineWidth=i,n.strokeStyle=Zt(r.strokeStyle,s),n.setLineDash(Zt(r.lineDash,[])),o.usePointStyle){const s={radius:f*Math.SQRT2/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:i},l=a.xPlus(t,g/2);wr(n,s,l,e+u,o.pointStyleWidth&&g)}else{const o=e+Math.max((d-f)/2,0),s=a.leftForLtr(t,g),l=zr(r.borderRadius);n.beginPath(),Object.values(l).some(t=>0!==t)?Lr(n,{x:s,y:o,w:g,h:f,radius:l}):n.rect(s,o,g,f),n.fill(),0!==i&&n.stroke()}n.restore()}(a.x(C),M,x),C=((t,e,r,n)=>t===(n?"left":"right")?r:"center"===t?(e+r)/2:e)(w,C+g+u,m?C+_:this.right,t.rtl),function(t,e,r){Pr(n,r.text,t,e+p/2,l,{strikethrough:r.hidden,textAlign:a.textAlign(r.textAlign)})}(a.x(C),M,x),m)h.x+=_+c;else if("string"!=typeof x.text){const t=l.lineHeight;h.y+=Fs(x,t)+c}else h.y+=y}),Dn(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,r=Fr(e.font),n=Ir(e.padding);if(!e.display)return;const i=Sn(t.rtl,this.left,this.width),o=this.ctx,s=e.position,a=r.size/2,l=n.top+a;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=Qe(t.align,d,this.right-u);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+Qe(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const h=Qe(s,d,d+u);o.textAlign=i.textAlign(Ye(s)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=r.string,Pr(o,e.text,h,c,r)}_computeTitleHeight(){const t=this.options.title,e=Fr(t.font),r=Ir(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,n,i;if(Ie(t,this.left,this.right)&&Ie(e,this.top,this.bottom))for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(n=i[r],Ie(t,n.left,n.left+n.width)&&Ie(e,n.top,n.top+n.height))return this.legendItems[r];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const r=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const o=this._hoveredItem,s=(i=r,null!==(n=o)&&null!==i&&n.datasetIndex===i.datasetIndex&&n.index===i.index);o&&!s&&ee(e.onLeave,[t,o,this],this),this._hoveredItem=r,r&&!s&&ee(e.onHover,[t,r,this],this)}else r&&ee(e.onClick,[t,r,this],this);var n,i}}function Fs(t,e){return e*(t.text?t.text.length:0)}var Ns={id:"legend",_element:Is,start(t,e,r){const n=t.legend=new Is({ctx:t.ctx,options:r,chart:t});Bi.configure(t,n,r),Bi.addBox(t,n)},stop(t){Bi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;Bi.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,i=r.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(r?0:void 0),c=Ir(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Ws extends Zi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const n=Qt(r.text)?r.text.length:1;this._padding=Ir(r.padding);const i=n*Fr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:r,bottom:n,right:i,options:o}=this,s=o.align;let a,l,c,d=0;return this.isHorizontal()?(l=Qe(s,r,i),c=e+t,a=i-r):("left"===o.position?(l=r+t,c=Qe(s,n,e),d=-.5*me):(l=i-t,c=Qe(s,e,n),d=.5*me),a=n-e),{titleX:l,titleY:c,maxWidth:a,rotation:d}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const r=Fr(e.font),n=r.lineHeight/2+this._padding.top,{titleX:i,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(n);Pr(t,e.text,0,0,r,{color:e.color,maxWidth:s,rotation:a,textAlign:Ye(e.align),textBaseline:"middle",translation:[i,o]})}}var Hs={id:"title",_element:Ws,start(t,e,r){!function(t,e){const r=new Ws({ctx:t.ctx,options:e,chart:t});Bi.configure(t,r,e),Bi.addBox(t,r),t.titleBlock=r}(t,r)},stop(t){const e=t.titleBlock;Bi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;Bi.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Vs=new WeakMap;var qs={id:"subtitle",start(t,e,r){const n=new Ws({ctx:t.ctx,options:r,chart:t});Bi.configure(t,n,r),Bi.addBox(t,n),Vs.set(t,n)},stop(t){Bi.removeBox(t,Vs.get(t)),Vs.delete(t)},beforeUpdate(t,e,r){const n=Vs.get(t);Bi.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Us={average(t){if(!t.length)return!1;let e,r,n=new Set,i=0,o=0;for(e=0,r=t.length;e<r;++e){const r=t[e].element;if(r&&r.hasValue()){const t=r.tooltipPosition();n.add(t.x),i+=t.y,++o}}if(0===o||0===n.size)return!1;return{x:[...n].reduce((t,e)=>t+e)/n.size,y:i/o}},nearest(t,e){if(!t.length)return!1;let r,n,i,o=e.x,s=e.y,a=Number.POSITIVE_INFINITY;for(r=0,n=t.length;r<n;++r){const n=t[r].element;if(n&&n.hasValue()){const t=Re(e,n.getCenterPoint());t<a&&(a=t,i=n)}}if(i){const t=i.tooltipPosition();o=t.x,s=t.y}return{x:o,y:s}}};function Ks(t,e){return e&&(Qt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ys(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Qs(t,e){const{element:r,datasetIndex:n,index:i}=e,o=t.getDatasetMeta(n).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:t,label:s,parsed:o.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:r}}function Js(t,e){const r=t.chart.ctx,{body:n,footer:i,title:o}=t,{boxWidth:s,boxHeight:a}=e,l=Fr(e.bodyFont),c=Fr(e.titleFont),d=Fr(e.footerFont),u=o.length,h=i.length,g=n.length,f=Ir(e.padding);let p=f.height,m=0,b=n.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),b){p+=g*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(b-g)*l.lineHeight+(b-1)*e.bodySpacing}h&&(p+=e.footerMarginTop+h*d.lineHeight+(h-1)*e.footerSpacing);let y=0;const x=function(t){m=Math.max(m,r.measureText(t).width+y)};return r.save(),r.font=c.string,re(t.title,x),r.font=l.string,re(t.beforeBody.concat(t.afterBody),x),y=e.displayColors?s+2+e.boxPadding:0,re(n,t=>{re(t.before,x),re(t.lines,x),re(t.after,x)}),y=0,r.font=d.string,re(t.footer,x),r.restore(),m+=f.width,{width:m,height:p}}function Xs(t,e,r,n){const{x:i,width:o}=r,{width:s,chartArea:{left:a,right:l}}=t;let c="center";return"center"===n?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=s-o/2&&(c="right"),function(t,e,r,n){const{x:i,width:o}=n,s=r.caretSize+r.caretPadding;return"left"===t&&i+o+s>e.width||"right"===t&&i-o-s<0||void 0}(c,t,e,r)&&(c="center"),c}function Gs(t,e,r){const n=r.yAlign||e.yAlign||function(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}(t,r);return{xAlign:r.xAlign||e.xAlign||Xs(t,e,r,n),yAlign:n}}function Zs(t,e,r,n){const{caretSize:i,caretPadding:o,cornerRadius:s}=t,{xAlign:a,yAlign:l}=r,c=i+o,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:g}=zr(s);let f=function(t,e){let{x:r,width:n}=t;return"right"===e?r-=n:"center"===e&&(r-=n/2),r}(e,a);const p=function(t,e,r){let{y:n,height:i}=t;return"top"===e?n+=r:n-="bottom"===e?i+r:i/2,n}(e,l,c);return"center"===l?"left"===a?f+=c:"right"===a&&(f-=c):"left"===a?f-=Math.max(d,h)+i:"right"===a&&(f+=Math.max(u,g)+i),{x:ze(f,0,n.width-e.width),y:ze(p,0,n.height-e.height)}}function ta(t,e,r){const n=Ir(r.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-n.right:t.x+n.left}function ea(t){return Ks([],Ys(t))}function ra(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const na={beforeTitle:Ut,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:Ut,beforeBody:Ut,beforeLabel:Ut,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Yt(r)||(e+=r),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ut,afterBody:Ut,beforeFooter:Ut,footer:Ut,afterFooter:Ut};function ia(t,e,r,n){const i=t[e].call(r,n);return void 0===i?na[e].call(r,n):i}class oa extends Zi{static positioners=Us;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&e.options.animation&&r.animations,i=new Hn(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,r=this._tooltipItems,Wr(t,{tooltip:e,tooltipItems:r,type:"tooltip"})));var t,e,r}getTitle(t,e){const{callbacks:r}=e,n=ia(r,"beforeTitle",this,t),i=ia(r,"title",this,t),o=ia(r,"afterTitle",this,t);let s=[];return s=Ks(s,Ys(n)),s=Ks(s,Ys(i)),s=Ks(s,Ys(o)),s}getBeforeBody(t,e){return ea(ia(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:r}=e,n=[];return re(t,t=>{const e={before:[],lines:[],after:[]},i=ra(r,t);Ks(e.before,Ys(ia(i,"beforeLabel",this,t))),Ks(e.lines,ia(i,"label",this,t)),Ks(e.after,Ys(ia(i,"afterLabel",this,t))),n.push(e)}),n}getAfterBody(t,e){return ea(ia(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:r}=e,n=ia(r,"beforeFooter",this,t),i=ia(r,"footer",this,t),o=ia(r,"afterFooter",this,t);let s=[];return s=Ks(s,Ys(n)),s=Ks(s,Ys(i)),s=Ks(s,Ys(o)),s}_createItems(t){const e=this._active,r=this.chart.data,n=[],i=[],o=[];let s,a,l=[];for(s=0,a=e.length;s<a;++s)l.push(Qs(this.chart,e[s]));return t.filter&&(l=l.filter((e,n,i)=>t.filter(e,n,i,r))),t.itemSort&&(l=l.sort((e,n)=>t.itemSort(e,n,r))),re(l,e=>{const r=ra(t.callbacks,e);n.push(ia(r,"labelColor",this,e)),i.push(ia(r,"labelPointStyle",this,e)),o.push(ia(r,"labelTextColor",this,e))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const r=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(n.length){const t=Us[r.position].call(this,n,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const e=this._size=Js(this,r),s=Object.assign({},t,e),a=Gs(this.chart,r,s),l=Zs(r,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,r,n){const i=this.getCaretPosition(t,r,n);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,r){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:s}=r,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:d}=zr(s),{x:u,y:h}=t,{width:g,height:f}=e;let p,m,b,y,x,v;return"center"===i?(x=h+f/2,"left"===n?(p=u,m=p-o,y=x+o,v=x-o):(p=u+g,m=p+o,y=x-o,v=x+o),b=p):(m="left"===n?u+Math.max(a,c)+o:"right"===n?u+g-Math.max(l,d)-o:this.caretX,"top"===i?(y=h,x=y-o,p=m-o,b=m+o):(y=h+f,x=y+o,p=m+o,b=m-o),v=y),{x1:p,x2:m,x3:b,y1:y,y2:x,y3:v}}drawTitle(t,e,r){const n=this.title,i=n.length;let o,s,a;if(i){const l=Sn(r.rtl,this.x,this.width);for(t.x=ta(this,r.titleAlign,r),e.textAlign=l.textAlign(r.titleAlign),e.textBaseline="middle",o=Fr(r.titleFont),s=r.titleSpacing,e.fillStyle=r.titleColor,e.font=o.string,a=0;a<i;++a)e.fillText(n[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s,a+1===i&&(t.y+=r.titleMarginBottom-s)}}_drawColorBox(t,e,r,n,i){const o=this.labelColors[r],s=this.labelPointStyles[r],{boxHeight:a,boxWidth:l}=i,c=Fr(i.bodyFont),d=ta(this,"left",i),u=n.x(d),h=a<c.lineHeight?(c.lineHeight-a)/2:0,g=e.y+h;if(i.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},r=n.leftForLtr(u,l)+l/2,c=g+a/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,kr(t,e,r,c),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,kr(t,e,r,c)}else{t.lineWidth=Jt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=n.leftForLtr(u,l),r=n.leftForLtr(n.xPlus(u,1),l-2),s=zr(o.borderRadius);Object.values(s).some(t=>0!==t)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Lr(t,{x:e,y:g,w:l,h:a,radius:s}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Lr(t,{x:r,y:g+1,w:l-2,h:a-2,radius:s}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(e,g,l,a),t.strokeRect(e,g,l,a),t.fillStyle=o.backgroundColor,t.fillRect(r,g+1,l-2,a-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,e,r){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=r,d=Fr(r.bodyFont);let u=d.lineHeight,h=0;const g=Sn(r.rtl,this.x,this.width),f=function(r){e.fillText(r,g.x(t.x+h),t.y+u/2),t.y+=u+i},p=g.textAlign(o);let m,b,y,x,v,k,w;for(e.textAlign=o,e.textBaseline="middle",e.font=d.string,t.x=ta(this,p,r),e.fillStyle=r.bodyColor,re(this.beforeBody,f),h=s&&"right"!==p?"center"===o?l/2+c:l+2+c:0,x=0,k=n.length;x<k;++x){for(m=n[x],b=this.labelTextColors[x],e.fillStyle=b,re(m.before,f),y=m.lines,s&&y.length&&(this._drawColorBox(e,t,x,g,r),u=Math.max(d.lineHeight,a)),v=0,w=y.length;v<w;++v)f(y[v]),u=d.lineHeight;re(m.after,f)}h=0,u=d.lineHeight,re(this.afterBody,f),t.y-=i}drawFooter(t,e,r){const n=this.footer,i=n.length;let o,s;if(i){const a=Sn(r.rtl,this.x,this.width);for(t.x=ta(this,r.footerAlign,r),t.y+=r.footerMarginTop,e.textAlign=a.textAlign(r.footerAlign),e.textBaseline="middle",o=Fr(r.footerFont),e.fillStyle=r.footerColor,e.font=o.string,s=0;s<i;++s)e.fillText(n[s],a.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r.footerSpacing}}drawBackground(t,e,r,n){const{xAlign:i,yAlign:o}=this,{x:s,y:a}=t,{width:l,height:c}=r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:g}=zr(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(s+d,a),"top"===o&&this.drawCaret(t,e,r,n),e.lineTo(s+l-u,a),e.quadraticCurveTo(s+l,a,s+l,a+u),"center"===o&&"right"===i&&this.drawCaret(t,e,r,n),e.lineTo(s+l,a+c-g),e.quadraticCurveTo(s+l,a+c,s+l-g,a+c),"bottom"===o&&this.drawCaret(t,e,r,n),e.lineTo(s+h,a+c),e.quadraticCurveTo(s,a+c,s,a+c-h),"center"===o&&"left"===i&&this.drawCaret(t,e,r,n),e.lineTo(s,a+d),e.quadraticCurveTo(s,a,s+d,a),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,r=this.$animations,n=r&&r.x,i=r&&r.y;if(n||i){const r=Us[t.position].call(this,this._active,this._eventPosition);if(!r)return;const o=this._size=Js(this,t),s=Object.assign({},r,this._size),a=Gs(e,t,s),l=Zs(t,s,a,e);n._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ir(e.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&s&&(t.save(),t.globalAlpha=r,this.drawBackground(i,t,n,e),An(t,e.textDirection),i.y+=o.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),Dn(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const r=this._active,n=t.map(({datasetIndex:t,index:e})=>{const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[e],index:e}}),i=!ne(r,n),o=this._positionChanged(n,e);(i||o)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,r=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(t,i,e,r),s=this._positionChanged(o,t),a=e||!ne(o,i)||s;return a&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,r,n){const i=this.options;if("mouseout"===t.type)return[];if(!n)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const o=this.chart.getElementsAtEventForMode(t,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:r,caretY:n,options:i}=this,o=Us[i.position].call(this,t,e);return!1!==o&&(r!==o.x||n!==o.y)}}var sa={id:"tooltip",_element:oa,positioners:Us,afterInit(t,e,r){r&&(t.tooltip=new oa({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:na},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},aa=Object.freeze({__proto__:null,Colors:ms,Decimation:xs,Filler:$s,Legend:Ns,SubTitle:qs,Title:Hs,Tooltip:sa});function la(t,e,r,n){const i=t.indexOf(e);if(-1===i)return((t,e,r,n)=>("string"==typeof e?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r))(t,e,r,n);return i!==t.lastIndexOf(e)?r:i}function ca(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function da(t,e){const r=[],{bounds:n,step:i,min:o,max:s,precision:a,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=t,h=i||1,g=c-1,{min:f,max:p}=e,m=!Yt(o),b=!Yt(s),y=!Yt(l),x=(p-f)/(d+1);let v,k,w,_,C=Ae((p-f)/g/h)*h;if(C<1e-14&&!m&&!b)return[{value:f},{value:p}];_=Math.ceil(p/C)-Math.floor(f/C),_>g&&(C=Ae(_*C/g/h)*h),Yt(a)||(v=Math.pow(10,a),C=Math.ceil(C*v)/v),"ticks"===n?(k=Math.floor(f/C)*C,w=Math.ceil(p/C)*C):(k=f,w=p),m&&b&&i&&function(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}((s-o)/i,C/1e3)?(_=Math.round(Math.min((s-o)/C,c)),C=(s-o)/_,k=o,w=s):y?(k=m?o:k,w=b?s:w,_=l-1,C=(w-k)/_):(_=(w-k)/C,_=Se(_,Math.round(_),C/1e3)?Math.round(_):Math.ceil(_));const M=Math.max(Ee(C),Ee(k));v=Math.pow(10,Yt(a)?M:a),k=Math.round(k*v)/v,w=Math.round(w*v)/v;let S=0;for(m&&(u&&k!==o?(r.push({value:o}),k<o&&S++,Se(Math.round((k+S*C)*v)/v,o,ua(o,x,t))&&S++):k<o&&S++);S<_;++S){const t=Math.round((k+S*C)*v)/v;if(b&&t>s)break;r.push({value:t})}return b&&u&&w!==s?r.length&&Se(r[r.length-1].value,s,ua(s,x,t))?r[r.length-1].value=s:r.push({value:s}):b&&w!==s||r.push({value:w}),r}function ua(t,e,{horizontal:r,minRotation:n}){const i=Pe(n),o=(r?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+t).length;return Math.min(e/o,s)}class ha extends co{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Yt(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this;const o=t=>n=e?n:t,s=t=>i=r?i:t;if(t){const t=Me(n),e=Me(i);t<0&&e<0?s(0):t>0&&e>0&&o(0)}if(n===i){let e=0===i?1:Math.abs(.05*i);s(i+e),t||o(n-e)}this.min=n,this.max=i}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:r,stepSize:n}=t;return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),r=r||11),r&&(e=Math.min(r,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const n=da({maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Te(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const t=this.ticks;let e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const n=(r-e)/Math.max(t.length-1,1)/2;e-=n,r+=n}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return lr(t,this.chart.options.locale,this.options.ticks.format)}}class ga extends ha{static id="linear";static defaults={ticks:{callback:dr.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Xt(t)?t:0,this.max=Xt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,r=Pe(this.options.ticks.minRotation),n=(t?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/n))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const fa=t=>Math.floor(Ce(t)),pa=(t,e)=>Math.pow(10,fa(t)+e);function ma(t){return 1===t/Math.pow(10,fa(t))}function ba(t,e,r){const n=Math.pow(10,r),i=Math.floor(t/n);return Math.ceil(e/n)-i}function ya(t,{min:e,max:r}){e=Gt(t.min,e);const n=[],i=fa(e);let o=function(t,e){let r=fa(e-t);for(;ba(t,e,r)>10;)r++;for(;ba(t,e,r)<10;)r--;return Math.min(r,fa(t))}(e,r),s=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((e-l)*s)/s,d=Math.floor((e-l)/a/10)*a*10;let u=Math.floor((c-d)/Math.pow(10,o)),h=Gt(t.min,Math.round((l+d+u*Math.pow(10,o))*s)/s);for(;h<r;)n.push({value:h,major:ma(h),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(o++,u=2,s=o>=0?1:s),h=Math.round((l+d+u*Math.pow(10,o))*s)/s;const g=Gt(t.max,h);return n.push({value:g,major:ma(g),significand:u}),n}class xa extends co{static id="logarithmic";static defaults={ticks:{callback:dr.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const r=ha.prototype.parse.apply(this,[t,e]);if(0!==r)return Xt(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Xt(t)?Math.max(0,t):null,this.max=Xt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Xt(this._userMin)&&(this.min=t===pa(this.min,0)?pa(this.min,-1):pa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let r=this.min,n=this.max;const i=e=>r=t?r:e,o=t=>n=e?n:t;r===n&&(r<=0?(i(1),o(10)):(i(pa(r,-1)),o(pa(n,1)))),r<=0&&i(pa(n,-1)),n<=0&&o(pa(r,1)),this.min=r,this.max=n}buildTicks(){const t=this.options,e=ya({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Te(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":lr(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ce(t),this._valueRange=Ce(this.max)-Ce(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ce(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function va(t){const e=t.ticks;if(e.display&&t.display){const t=Ir(e.backdropPadding);return Zt(e.font&&e.font.size,mr.font.size)+t.height}return 0}function ka(t,e,r){return r=Qt(r)?r:[r],{w:yr(t,e.string,r),h:r.length*e.lineHeight}}function wa(t,e,r,n,i){return t===n||t===i?{start:e-r/2,end:e+r/2}:t<n||t>i?{start:e-r,end:e}:{start:e,end:e+r}}function _a(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],i=[],o=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?me/o:0;for(let l=0;l<o;l++){const o=s.setContext(t.getPointLabelContext(l));i[l]=o.padding;const c=t.getPointPosition(l,t.drawingArea+i[l],a),d=Fr(o.font),u=ka(t.ctx,d,t._pointLabels[l]);n[l]=u;const h=je(t.getIndexAngle(l)+a),g=Math.round(Le(h));Ca(r,e,h,wa(g,c.x,u.w,0,180),wa(g,c.y,u.h,90,270))}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=function(t,e,r){const n=[],i=t._pointLabels.length,o=t.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:va(o)/2,additionalAngle:s?me/i:0};let c;for(let o=0;o<i;o++){l.padding=r[o],l.size=e[o];const i=Ma(t,o,l);n.push(i),"auto"===a&&(i.visible=Sa(i,c),i.visible&&(c=i))}return n}(t,n,i)}function Ca(t,e,r,n,i){const o=Math.abs(Math.sin(r)),s=Math.abs(Math.cos(r));let a=0,l=0;n.start<e.l?(a=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/s,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function Ma(t,e,r){const n=t.drawingArea,{extra:i,additionalAngle:o,padding:s,size:a}=r,l=t.getPointPosition(e,n+i+s,o),c=Math.round(Le(je(l.angle+ke))),d=function(t,e,r){90===r||270===r?t-=e/2:(r>270||r<90)&&(t-=e);return t}(l.y,a.h,c),u=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),h=function(t,e,r){"right"===r?t-=e:"center"===r&&(t-=e/2);return t}(l.x,a.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+a.w,bottom:d+a.h}}function Sa(t,e){if(!e)return!0;const{left:r,top:n,right:i,bottom:o}=t;return!(_r({x:r,y:n},e)||_r({x:r,y:o},e)||_r({x:i,y:n},e)||_r({x:i,y:o},e))}function Aa(t,e,r){const{left:n,top:i,right:o,bottom:s}=r,{backdropColor:a}=e;if(!Yt(a)){const r=zr(e.borderRadius),l=Ir(e.backdropPadding);t.fillStyle=a;const c=n-l.left,d=i-l.top,u=o-n+l.width,h=s-i+l.height;Object.values(r).some(t=>0!==t)?(t.beginPath(),Lr(t,{x:c,y:d,w:u,h:h,radius:r}),t.fill()):t.fillRect(c,d,u,h)}}function Da(t,e,r,n){const{ctx:i}=t;if(r)i.arc(t.xCenter,t.yCenter,e,0,be);else{let r=t.getPointPosition(0,e);i.moveTo(r.x,r.y);for(let o=1;o<n;o++)r=t.getPointPosition(o,e),i.lineTo(r.x,r.y)}}class Ta extends ha{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:dr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ir(va(this.options)/2),e=this.width=this.maxWidth-t.width,r=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+r/2+t.top),this.drawingArea=Math.floor(Math.min(e,r)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Xt(t)&&!isNaN(t)?t:0,this.max=Xt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/va(this.options))}generateTickLabels(t){ha.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const r=ee(this.options.pointLabels.callback,[t,e],this);return r||0===r?r:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?_a(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,r,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((r-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,r,n))}getIndexAngle(t){return je(t*(be/(this._pointLabels.length||1))+Pe(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Yt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Yt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const r=e[t];return function(t,e,r){return Wr(t,{label:r,index:e,type:"pointLabel"})}(this.getContext(),t,r)}}getPointPosition(t,e,r=0){const n=this.getIndexAngle(t)-ke+r;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:r,right:n,bottom:i}=this._pointLabelItems[t];return{left:e,top:r,right:n,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const r=this.ctx;r.save(),r.beginPath(),Da(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:r,grid:n,border:i}=e,o=this._pointLabels.length;let s,a,l;if(e.pointLabels.display&&function(t,e){const{ctx:r,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){const e=t._pointLabelItems[i];if(!e.visible)continue;const o=n.setContext(t.getPointLabelContext(i));Aa(r,o,e);const s=Fr(o.font),{x:a,y:l,textAlign:c}=e;Pr(r,t._pointLabels[i],a,l+s.lineHeight/2,s,{color:o.color,textAlign:c,textBaseline:"middle"})}}(this,o),n.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){a=this.getDistanceFromCenterForValue(t.value);const r=this.getContext(e),s=n.setContext(r),l=i.setContext(r);!function(t,e,r,n,i){const o=t.ctx,s=e.circular,{color:a,lineWidth:l}=e;!s&&!n||!a||!l||r<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),Da(t,r,s,n),o.closePath(),o.stroke(),o.restore())}(this,s,a,o,l)}}),r.display){for(t.save(),s=o-1;s>=0;s--){const n=r.setContext(this.getPointLabelContext(s)),{color:i,lineWidth:o}=n;o&&i&&(t.lineWidth=o,t.strokeStyle=i,t.setLineDash(n.borderDash),t.lineDashOffset=n.borderDashOffset,a=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(s,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,r=e.ticks;if(!r.display)return;const n=this.getIndexAngle(0);let i,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((n,s)=>{if(0===s&&this.min>=0&&!e.reverse)return;const a=r.setContext(this.getContext(s)),l=Fr(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){t.font=l.string,o=t.measureText(n.label).width,t.fillStyle=a.backdropColor;const e=Ir(a.backdropPadding);t.fillRect(-o/2-e.left,-i-l.size/2-e.top,o+e.width,l.size+e.height)}Pr(t,n.label,0,-i,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),t.restore()}drawTitle(){}}const Pa={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},La=Object.keys(Pa);function Ea(t,e){return t-e}function Oa(t,e){if(Yt(e))return null;const r=t._adapter,{parser:n,round:i,isoWeekday:o}=t._parseOpts;let s=e;return"function"==typeof n&&(s=n(s)),Xt(s)||(s="string"==typeof n?r.parse(s,n):r.parse(s)),null===s?null:(i&&(s="week"!==i||!De(o)&&!0!==o?r.startOf(s,i):r.startOf(s,"isoWeek",o)),+s)}function Ra(t,e,r,n){const i=La.length;for(let o=La.indexOf(t);o<i-1;++o){const t=Pa[La[o]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((r-e)/(i*t.size))<=n)return La[o]}return La[i-1]}function Ba(t,e,r){if(r){if(r.length){const{lo:n,hi:i}=Fe(r,e);t[r[n]>=e?r[n]:r[i]]=!0}}else t[e]=!0}function ja(t,e,r){const n=[],i={},o=e.length;let s,a;for(s=0;s<o;++s)a=e[s],i[a]=s,n.push({value:a,major:!1});return 0!==o&&r?function(t,e,r,n){const i=t._adapter,o=+i.startOf(e[0].value,n),s=e[e.length-1].value;let a,l;for(a=o;a<=s;a=+i.add(a,1,n))l=r[a],l>=0&&(e[l].major=!0);return e}(t,n,i,r):n}class $a extends co{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const r=t.time||(t.time={}),n=this._adapter=new pi(t.adapters.date);n.init(e),le(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Oa(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,r=t.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();function a(t){o||isNaN(t.min)||(n=Math.min(n,t.min)),s||isNaN(t.max)||(i=Math.max(i,t.max))}o&&s||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),n=Xt(n)&&!isNaN(n)?n:+e.startOf(Date.now(),r),i=Xt(i)&&!isNaN(i)?i:+e.endOf(Date.now(),r)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],r=t[t.length-1]),{min:e,max:r}}buildTicks(){const t=this.options,e=t.time,r=t.ticks,n="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=function(t,e,r){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>r;)i--;return n>0||i<t.length?t.slice(n,i):t}(n,i,this.max);return this._unit=e.unit||(r.autoSkip?Ra(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,r,n,i){for(let o=La.length-1;o>=La.indexOf(r);o--){const r=La[o];if(Pa[r].common&&t._adapter.diff(i,n,r)>=e-1)return r}return La[r?La.indexOf(r):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function(t){for(let e=La.indexOf(t)+1,r=La.length;e<r;++e)if(Pa[La[e]].common)return La[e]}(this._unit):void 0,this.initOffsets(n),t.reverse&&o.reverse(),ja(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,r,n=0,i=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),n=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,r=this.getDecimalForValue(t[t.length-1]),i=1===t.length?r:(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=ze(n,0,o),i=ze(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const t=this._adapter,e=this.min,r=this.max,n=this.options,i=n.time,o=i.unit||Ra(i.minUnit,e,r,this._getLabelCapacity(e)),s=Zt(n.ticks.stepSize,1),a="week"===o&&i.isoWeekday,l=De(a)||!0===a,c={};let d,u,h=e;if(l&&(h=+t.startOf(h,"isoWeek",a)),h=+t.startOf(h,l?"day":o),t.diff(r,e,o)>1e5*s)throw new Error(e+" and "+r+" are too far apart with stepSize of "+s+" "+o);const g="data"===n.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<r;d=+t.add(d,s,o),u++)Ba(c,d,g);return d!==r&&"ticks"!==n.bounds&&1!==u||Ba(c,d,g),Object.keys(c).sort(Ea).map(t=>+t)}getLabelForValue(t){const e=this._adapter,r=this.options.time;return r.tooltipFormat?e.format(t,r.tooltipFormat):e.format(t,r.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,n=this._unit,i=e||r[n];return this._adapter.format(t,i)}_tickFormatFunction(t,e,r,n){const i=this.options,o=i.ticks.callback;if(o)return ee(o,[t,e,r],this);const s=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&s[a],d=l&&s[l],u=r[e],h=l&&d&&u&&u.major;return this._adapter.format(t,n||(h?d:c))}generateTickLabels(t){let e,r,n;for(e=0,r=t.length;e<r;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+r)*e.factor)}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,r=this.ctx.measureText(t).width,n=Pe(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(n),o=Math.sin(n),s=this._resolveTickFontOptions(0).size;return{w:r*i+s*o,h:r*o+s*i}}_getLabelCapacity(t){const e=this.options.time,r=e.displayFormats,n=r[e.unit]||r.millisecond,i=this._tickFormatFunction(t,0,ja(this,[t],this._majorUnit),n),o=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let t,e,r=this._cache.data||[];if(r.length)return r;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,e=n.length;t<e;++t)r=r.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const t=this._cache.labels||[];let e,r;if(t.length)return t;const n=this.getLabels();for(e=0,r=n.length;e<r;++e)t.push(Oa(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return qe(t.sort(Ea))}}function za(t,e,r){let n,i,o,s,a=0,l=t.length-1;r?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Ne(t,"pos",e)),({pos:n,time:o}=t[a]),({pos:i,time:s}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Ne(t,"time",e)),({time:n,pos:o}=t[a]),({time:i,pos:s}=t[l]));const c=i-n;return c?o+(s-o)*(e-n)/c:o}var Ia=Object.freeze({__proto__:null,CategoryScale:class extends co{static id="category";static defaults={ticks:{callback:ca}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:r,label:n}of e)t[r]===n&&t.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Yt(t))return null;const r=this.getLabels();return((t,e)=>null===t?null:ze(Math.round(t),0,e))(e=isFinite(e)&&r[e]===t?e:la(r,t,Zt(e,t),this._addedLabels),r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:r,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(r=0),e||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){const t=this.min,e=this.max,r=this.options.offset,n=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let r=t;r<=e;r++)n.push({value:r});return n}getLabelForValue(t){return ca.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:ga,LogarithmicScale:xa,RadialLinearScale:Ta,TimeScale:$a,TimeSeriesScale:class extends $a{static id="timeseries";static defaults=$a.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=za(e,this.min),this._tableRange=za(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:r}=this,n=[],i=[];let o,s,a,l,c;for(o=0,s=t.length;o<s;++o)l=t[o],l>=e&&l<=r&&n.push(l);if(n.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(o=0,s=n.length;o<s;++o)c=n[o+1],a=n[o-1],l=n[o],Math.round((c+a)/2)!==l&&i.push({time:l,pos:o/(s-1)});return i}_generate(){const t=this.min,e=this.max;let r=super.getDataTimestamps();return r.includes(t)&&r.length||r.splice(0,0,t),r.includes(e)&&1!==r.length||r.push(e),r.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),r=this.getLabelTimestamps();return t=e.length&&r.length?this.normalize(e.concat(r)):e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(za(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return za(this._table,r*this._tableRange+this._minPos,!0)}}});const Fa=[hi,cs,aa,Ia],Na=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","about","from","up","out","into","over","under","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their","what","which","who","when","where","why","how","all","each","every","both","few","more","most","other","some","such","no","not","only","same","so","than","too","very","just","also","now","here","there","then","once","if","any","as"]);function Wa(t){return new Date(t).toLocaleDateString()}function Ha(t){if(t.url.startsWith("http://")||t.url.startsWith("https://")){const e=t.domain||"unknown",r=e.charAt(0).toUpperCase(),n=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899"];return`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="${n[e.length%n.length]}"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white" font-weight="bold">${r}</text></svg>`}switch(t.domain||""){case"chrome-internal":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23EA4335"/><circle cx="8" cy="8" r="3" fill="white"/></svg>';case"local-file":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F59E0B"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';case"javascript-bookmarklet":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F7DF1E"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="black" font-weight="bold">JS</text></svg>';case"data-uri":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%2310B981"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="white" font-weight="bold">D</text></svg>';case"contact-link":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%238B5CF6"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">@</text></svg>';case"other-protocol":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%236B7280"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';default:return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23E5E7EB"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="%236B7280">?</text></svg>'}}function Va(t){if(t.faviconUrl)return t.faviconUrl;if(t.url&&(t.url.startsWith("http://")||t.url.startsWith("https://")))try{return`https://www.google.com/s2/favicons?domain=${t.domain||new URL(t.url).hostname}&sz=32`}catch(t){}return Ha(t)}function qa(t){switch(t.domain){case"chrome-internal":return"Chrome";case"local-file":return"Local File";case"javascript-bookmarklet":return"Bookmarklet";case"data-uri":return"Data URI";case"contact-link":return"Contact";case"other-protocol":return"Other";case"invalid-url":return"Invalid URL";default:return t.domain}}async function Ua(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}const Ka={RELEVANCE:{key:"relevance",label:"Best Match",sort:(t,e)=>(e._searchScore||0)-(t._searchScore||0)},DATE_DESC:{key:"date_desc",label:"Newest First",sort:(t,e)=>e.dateAdded-t.dateAdded},DATE_ASC:{key:"date_asc",label:"Oldest First",sort:(t,e)=>t.dateAdded-e.dateAdded},TITLE_ASC:{key:"title_asc",label:"Title A-Z",sort:(t,e)=>(t.title||"").localeCompare(e.title||"")},TITLE_DESC:{key:"title_desc",label:"Title Z-A",sort:(t,e)=>(e.title||"").localeCompare(t.title||"")},DOMAIN_ASC:{key:"domain_asc",label:"Domain A-Z",sort:(t,e)=>(t.domain||"").localeCompare(e.domain||"")}};function Ya(t){const e=Object.values(Ka).find(e=>e.key===t);return e?e.sort:Ka.DATE_DESC.sort}function Qa(t,e){if(!t||!e)return t;const{positive:r,phrases:n,regular:i,regexPatterns:o}=e,s=[...r||[],...n||[],...i||[]];if(0===s.length&&(!o||0===o.length))return t;const a=[];s.forEach(e=>{if(!e)return;const r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp(r,"gi");let i;for(;null!==(i=n.exec(t));)a.push({start:i.index,end:i.index+i[0].length})}),o&&o.forEach(e=>{const r=e.flags.includes("g")?e.flags:e.flags+"g";try{const n=new RegExp(e.source,r);let i;for(;null!==(i=n.exec(t));)a.push({start:i.index,end:i.index+i[0].length}),i.index===n.lastIndex&&n.lastIndex++}catch(t){console.warn("Invalid regex for highlighting:",t)}}),a.sort((t,e)=>t.start-e.start);const l=[];if(a.length>0){let t=a[0];for(let e=1;e<a.length;e++){const r=a[e];r.start<t.end?t.end=Math.max(t.end,r.end):(l.push(t),t=r)}l.push(t)}let c=t;for(let t=l.length-1;t>=0;t--){const{start:e,end:r}=l[t],n=c.slice(0,e),i=c.slice(e,r),o=c.slice(r);c=`${n}<mark class="bg-yellow-200 text-gray-900 rounded-sm px-0.5">${i}</mark>${o}`}return c}const Ja=[];function Xa(e,r=t){let n;const i=new Set;function s(t){if(o(e,t)&&(e=t,n)){const t=!Ja.length;for(const t of i)t[1](),Ja.push(t,e);if(t){for(let t=0;t<Ja.length;t+=2)Ja[t][0](Ja[t+1]);Ja.length=0}}}function a(t){s(t(e))}return{set:s,update:a,subscribe:function(o,l=t){const c=[o,l];return i.add(c),1===i.size&&(n=r(s,a)||t),o(e),()=>{i.delete(c),0===i.size&&n&&(n(),n=null)}}}}function Ga(e,r,o){const s=!Array.isArray(e),a=s?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=r.length<2;return d=(e,o)=>{let d=!1;const u=[];let h=0,g=t;const f=()=>{if(h)return;g();const n=r(s?u[0]:u,e,o);c?e(n):g=i(n)?n:t},p=a.map((t,e)=>l(t,t=>{u[e]=t,h&=~(1<<e),d&&f()},()=>{h|=1<<e}));return d=!0,f(),function(){n(p),g(),d=!1}},{subscribe:Xa(o,d).subscribe};var d}var Za="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function tl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var el={exports:{}};el.exports=function(){
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation.
	    Permission to use, copy, modify, and/or distribute this software for any
	    purpose with or without fee is hereby granted.
	    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	    PERFORMANCE OF THIS SOFTWARE.
	    ***************************************************************************** */
var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};function e(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};function n(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Za,o=Object.keys,s=Array.isArray;function a(t,e){return"object"!=typeof e||o(e).forEach(function(r){t[r]=e[r]}),t}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function d(t,e){return c.call(t,e)}function u(t,e){"function"==typeof e&&(e=e(l(t))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(e).forEach(function(r){g(t,r,e[r])})}var h=Object.defineProperty;function g(t,e,r,n){h(t,e,a(r&&d(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function f(t){return{from:function(e){return t.prototype=Object.create(e.prototype),g(t.prototype,"constructor",t),{extend:u.bind(null,t.prototype)}}}}var p=Object.getOwnPropertyDescriptor;function m(t,e){var r;return p(t,e)||(r=l(t))&&m(r,e)}var b=[].slice;function y(t,e,r){return b.call(t,e,r)}function x(t,e){return e(t)}function v(t){if(!t)throw new Error("Assertion Failed")}function k(t){i.setImmediate?setImmediate(t):setTimeout(t,0)}function w(t,e){return t.reduce(function(t,r,n){var i=e(r,n);return i&&(t[i[0]]=i[1]),t},{})}function _(t,e){if("string"==typeof e&&d(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var r=[],n=0,i=e.length;n<i;++n){var o=_(t,e[n]);r.push(o)}return r}var s=e.indexOf(".");if(-1!==s){var a=t[e.substr(0,s)];return null==a?void 0:_(a,e.substr(s+1))}}function C(t,e,r){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){v("string"!=typeof r&&"length"in r);for(var n=0,i=e.length;n<i;++n)C(t,e[n],r[n])}else{var o=e.indexOf(".");if(-1!==o){var a=e.substr(0,o),l=e.substr(o+1);if(""===l)void 0===r?s(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=r;else{var c=t[a];c&&d(t,a)||(c=t[a]={}),C(c,l,r)}}else void 0===r?s(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=r}}function M(t,e){"string"==typeof e?C(t,e,void 0):"length"in e&&[].map.call(e,function(e){C(t,e,void 0)})}function S(t){var e={};for(var r in t)d(t,r)&&(e[r]=t[r]);return e}var A=[].concat;function D(t){return A.apply([],t)}var T="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return i[t]}),P=new Set(T.map(function(t){return i[t]}));function L(t){var e={};for(var r in t)if(d(t,r)){var n=t[r];e[r]=!n||"object"!=typeof n||P.has(n.constructor)?n:L(n)}return e}function E(t){for(var e in t)if(d(t,e))return!1;return!0}var O=null;function R(t){O=new WeakMap;var e=B(t);return O=null,e}function B(t){if(!t||"object"!=typeof t)return t;var e=O.get(t);if(e)return e;if(s(t)){e=[],O.set(t,e);for(var r=0,n=t.length;r<n;++r)e.push(B(t[r]))}else if(P.has(t.constructor))e=t;else{var i=l(t);for(var o in e=i===Object.prototype?{}:Object.create(i),O.set(t,e),t)d(t,o)&&(e[o]=B(t[o]))}return e}var j={}.toString;function $(t){return j.call(t).slice(8,-1)}var z="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",I="symbol"==typeof z?function(t){var e;return null!=t&&(e=t[z])&&e.apply(t)}:function(){return null};function F(t,e){var r=t.indexOf(e);return r>=0&&t.splice(r,1),r>=0}var N={};function W(t){var e,r,n,i;if(1===arguments.length){if(s(t))return t.slice();if(this===N&&"string"==typeof t)return[t];if(i=I(t)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==t)return[t];if("number"==typeof(e=t.length)){for(r=new Array(e);e--;)r[e]=t[e];return r}return[t]}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}var H="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},V=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],q=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(V),U={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(t,e){this.name=t,this.message=e}function Y(t,e){return t+". Errors: "+Object.keys(e).map(function(t){return e[t].toString()}).filter(function(t,e,r){return r.indexOf(t)===e}).join("\n")}function Q(t,e,r,n){this.failures=e,this.failedKeys=n,this.successCount=r,this.message=Y(t,e)}function J(t,e){this.name="BulkError",this.failures=Object.keys(e).map(function(t){return e[t]}),this.failuresByPos=e,this.message=Y(t,this.failures)}f(K).from(Error).extend({toString:function(){return this.name+": "+this.message}}),f(Q).from(K),f(J).from(K);var X=q.reduce(function(t,e){return t[e]=e+"Error",t},{}),G=K,Z=q.reduce(function(t,e){var r=e+"Error";function n(t,n){this.name=r,t?"string"==typeof t?(this.message="".concat(t).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=U[e]||r,this.inner=null)}return f(n).from(G),t[e]=n,t},{});Z.Syntax=SyntaxError,Z.Type=TypeError,Z.Range=RangeError;var tt=V.reduce(function(t,e){return t[e+"Error"]=Z[e],t},{});function et(t,e){if(!t||t instanceof K||t instanceof TypeError||t instanceof SyntaxError||!t.name||!tt[t.name])return t;var r=new tt[t.name](e||t.message,t);return"stack"in t&&g(r,"stack",{get:function(){return this.inner.stack}}),r}var rt=q.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=Z[e]),t},{});function nt(){}function it(t){return t}function ot(t,e){return null==t||t===it?e:function(r){return e(t(r))}}function st(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function at(t,e){return t===nt?e:function(){var r=t.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?st(n,this.onsuccess):n),i&&(this.onerror=this.onerror?st(i,this.onerror):i),void 0!==o?o:r}}function lt(t,e){return t===nt?e:function(){t.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?st(r,this.onsuccess):r),n&&(this.onerror=this.onerror?st(n,this.onerror):n)}}function ct(t,e){return t===nt?e:function(r){var n=t.apply(this,arguments);a(r,n);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?st(i,this.onsuccess):i),o&&(this.onerror=this.onerror?st(o,this.onerror):o),void 0===n?void 0===s?void 0:s:a(n,s)}}function dt(t,e){return t===nt?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function ut(t,e){return t===nt?e:function(){var r=t.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return r.then(function(){return e.apply(n,o)})}return e.apply(this,arguments)}}rt.ModifyError=Q,rt.DexieError=K,rt.BulkError=J;var ht="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function gt(t,e){ht=t}var ft={},pt=100,mt="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,l(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,l(e),t]}(),bt=mt[0],yt=mt[1],xt=mt[2],vt=yt&&yt.then,kt=bt&&bt.constructor,wt=!!xt;function _t(){queueMicrotask(Ht)}var Ct=function(t,e){Et.push([t,e]),St&&(_t(),St=!1)},Mt=!0,St=!0,At=[],Dt=[],Tt=it,Pt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:nt,pgp:!1,env:{},finalize:nt},Lt=Pt,Et=[],Ot=0,Rt=[];function Bt(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=Lt;if("function"!=typeof t){if(t!==ft)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&It(this,this._value))}this._state=null,this._value=null,++e.ref,zt(this,t)}var jt={get:function(){var t=Lt,e=re;function r(r,n){var i=this,o=!t.global&&(t!==Lt||e!==re),s=o&&!se(),a=new Bt(function(e,a){Nt(i,new $t(ge(r,t,o,s),ge(n,t,o,s),e,a,t))});return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return r.prototype=ft,r},set:function(t){g(this,"then",t&&t.prototype===ft?jt:{get:function(){return t},set:jt.set})}};function $t(t,e,r,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=r,this.reject=n,this.psd=i}function zt(t,e){try{e(function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Vt();e&&"function"==typeof e.then?zt(t,function(t,r){e instanceof Bt?e._then(t,r):e.then(t,r)}):(t._state=!0,t._value=e,Ft(t)),r&&qt()}},It.bind(null,t))}catch(e){It(t,e)}}function It(t,e){if(Dt.push(e),null===t._state){var r=t._lib&&Vt();e=Tt(e),t._state=!1,t._value=e,Yt(t),Ft(t),r&&qt()}}function Ft(t){var e=t._listeners;t._listeners=[];for(var r=0,n=e.length;r<n;++r)Nt(t,e[r]);var i=t._PSD;--i.ref||i.finalize(),0===Ot&&(++Ot,Ct(function(){0===--Ot&&Ut()},[]))}function Nt(t,e){if(null!==t._state){var r=t._state?e.onFulfilled:e.onRejected;if(null===r)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ot,Ct(Wt,[r,t,e])}else t._listeners.push(e)}function Wt(t,e,r){try{var n,i=e._value;!e._state&&Dt.length&&(Dt=[]),n=ht&&e._consoleTask?e._consoleTask.run(function(){return t(i)}):t(i),e._state||-1!==Dt.indexOf(i)||Qt(e),r.resolve(n)}catch(t){r.reject(t)}finally{0===--Ot&&Ut(),--r.psd.ref||r.psd.finalize()}}function Ht(){he(Pt,function(){Vt()&&qt()})}function Vt(){var t=Mt;return Mt=!1,St=!1,t}function qt(){var t,e,r;do{for(;Et.length>0;)for(t=Et,Et=[],r=t.length,e=0;e<r;++e){var n=t[e];n[0].apply(null,n[1])}}while(Et.length>0);Mt=!0,St=!0}function Ut(){var t=At;At=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=Rt.slice(0),r=e.length;r;)e[--r]()}function Kt(t){function e(){t(),Rt.splice(Rt.indexOf(e),1)}Rt.push(e),++Ot,Ct(function(){0===--Ot&&Ut()},[])}function Yt(t){At.some(function(e){return e._value===t._value})||At.push(t)}function Qt(t){for(var e=At.length;e;)if(At[--e]._value===t._value)return void At.splice(e,1)}function Jt(t){return new Bt(ft,!1,t)}function Xt(t,e){var r=Lt;return function(){var n=Vt(),i=Lt;try{return de(r,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{de(i,!1),n&&qt()}}}u(Bt.prototype,{then:jt,_then:function(t,e){Nt(this,new $t(null,null,t,e,Lt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],r=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?r(t):Jt(t)}):this.then(null,function(t){return t&&t.name===e?r(t):Jt(t)})},finally:function(t){return this.then(function(e){return Bt.resolve(t()).then(function(){return e})},function(e){return Bt.resolve(t()).then(function(){return Jt(e)})})},timeout:function(t,e){var r=this;return t<1/0?new Bt(function(n,i){var o=setTimeout(function(){return i(new Z.Timeout(e))},t);r.then(n,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&g(Bt.prototype,Symbol.toStringTag,"Dexie.Promise"),Pt.env=ue(),u(Bt,{all:function(){var t=W.apply(null,arguments).map(ae);return new Bt(function(e,r){0===t.length&&e([]);var n=t.length;t.forEach(function(i,o){return Bt.resolve(i).then(function(r){t[o]=r,--n||e(t)},r)})})},resolve:function(t){return t instanceof Bt?t:t&&"function"==typeof t.then?new Bt(function(e,r){t.then(e,r)}):new Bt(ft,!0,t)},reject:Jt,race:function(){var t=W.apply(null,arguments).map(ae);return new Bt(function(e,r){t.map(function(t){return Bt.resolve(t).then(e,r)})})},PSD:{get:function(){return Lt},set:function(t){return Lt=t}},totalEchoes:{get:function(){return re}},newPSD:ie,usePSD:he,scheduler:{get:function(){return Ct},set:function(t){Ct=t}},rejectionMapper:{get:function(){return Tt},set:function(t){Tt=t}},follow:function(t,e){return new Bt(function(r,n){return ie(function(e,r){var n=Lt;n.unhandleds=[],n.onunhandled=r,n.finalize=st(function(){var t=this;Kt(function(){0===t.unhandleds.length?e():r(t.unhandleds[0])})},n.finalize),t()},e,r,n)})}}),kt&&(kt.allSettled&&g(Bt,"allSettled",function(){var t=W.apply(null,arguments).map(ae);return new Bt(function(e){0===t.length&&e([]);var r=t.length,n=new Array(r);t.forEach(function(t,i){return Bt.resolve(t).then(function(t){return n[i]={status:"fulfilled",value:t}},function(t){return n[i]={status:"rejected",reason:t}}).then(function(){return--r||e(n)})})})}),kt.any&&"undefined"!=typeof AggregateError&&g(Bt,"any",function(){var t=W.apply(null,arguments).map(ae);return new Bt(function(e,r){0===t.length&&r(new AggregateError([]));var n=t.length,i=new Array(n);t.forEach(function(t,o){return Bt.resolve(t).then(function(t){return e(t)},function(t){i[o]=t,--n||r(new AggregateError(i))})})})}),kt.withResolvers&&(Bt.withResolvers=kt.withResolvers));var Gt={awaits:0,echoes:0,id:0},Zt=0,te=[],ee=0,re=0,ne=0;function ie(t,e,r,n){var i=Lt,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ne,Pt.env,o.env=wt?{Promise:Bt,PromiseProp:{value:Bt,configurable:!0,writable:!0},all:Bt.all,race:Bt.race,allSettled:Bt.allSettled,any:Bt.any,resolve:Bt.resolve,reject:Bt.reject}:{},e&&a(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=he(o,t,r,n);return 0===o.ref&&o.finalize(),s}function oe(){return Gt.id||(Gt.id=++Zt),++Gt.awaits,Gt.echoes+=pt,Gt.id}function se(){return!!Gt.awaits&&(0===--Gt.awaits&&(Gt.id=0),Gt.echoes=Gt.awaits*pt,!0)}function ae(t){return Gt.echoes&&t&&t.constructor===kt?(oe(),t.then(function(t){return se(),t},function(t){return se(),pe(t)})):t}function le(t){++re,Gt.echoes&&0!==--Gt.echoes||(Gt.echoes=Gt.awaits=Gt.id=0),te.push(Lt),de(t,!0)}function ce(){var t=te[te.length-1];te.pop(),de(t,!1)}function de(t,e){var r=Lt;if((e?!Gt.echoes||ee++&&t===Lt:!ee||--ee&&t===Lt)||queueMicrotask(e?le.bind(null,t):ce),t!==Lt&&(Lt=t,r===Pt&&(Pt.env=ue()),wt)){var n=Pt.env.Promise,o=t.env;(r.global||t.global)&&(Object.defineProperty(i,"Promise",o.PromiseProp),n.all=o.all,n.race=o.race,n.resolve=o.resolve,n.reject=o.reject,o.allSettled&&(n.allSettled=o.allSettled),o.any&&(n.any=o.any))}}function ue(){var t=i.Promise;return wt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function he(t,e,r,n,i){var o=Lt;try{return de(t,!0),e(r,n,i)}finally{de(o,!1)}}function ge(t,e,r,n){return"function"!=typeof t?t:function(){var i=Lt;r&&oe(),de(e,!0);try{return t.apply(this,arguments)}finally{de(i,!1),n&&queueMicrotask(se)}}}function fe(t){Promise===kt&&0===Gt.echoes?0===ee?t():enqueueNativeMicroTask(t):setTimeout(t,0)}-1===(""+vt).indexOf("[native code]")&&(oe=se=nt);var pe=Bt.reject;function me(t,e,r,n){if(t.idbdb&&(t._state.openComplete||Lt.letThrough||t._vip)){var i=t._createTransaction(e,r,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===X.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return me(t,e,r,n)})):pe(i)}return i._promise(e,function(t,e){return ie(function(){return Lt.trans=i,n(t,e,i)})}).then(function(t){if("readwrite"===e)try{i.idbtrans.commit()}catch(t){}return"readonly"===e?t:i._completion.then(function(){return t})})}if(t._state.openComplete)return pe(new Z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return pe(new Z.DatabaseClosed);t.open().catch(nt)}return t._state.dbReadyPromise.then(function(){return me(t,e,r,n)})}var be="4.2.1",ye=String.fromCharCode(65535),xe=-1/0,ve="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ke="String expected.",we=[],_e="__dbnames",Ce="readonly",Me="readwrite";function Se(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Ae={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function De(t){return"string"!=typeof t||/\./.test(t)?function(t){return t}:function(e){return void 0===e[t]&&t in e&&delete(e=R(e))[t],e}}function Te(){throw Z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Pe(t,e){try{var r=Oe(t),n=Oe(e);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Ee(Re(t),Re(e));case"Array":return Le(t,e)}}catch(t){}return NaN}function Le(t,e){for(var r=t.length,n=e.length,i=r<n?r:n,o=0;o<i;++o){var s=Pe(t[o],e[o]);if(0!==s)return s}return r===n?0:r<n?-1:1}function Ee(t,e){for(var r=t.length,n=e.length,i=r<n?r:n,o=0;o<i;++o)if(t[o]!==e[o])return t[o]<e[o]?-1:1;return r===n?0:r<n?-1:1}function Oe(t){var e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";var r=$(t);return"ArrayBuffer"===r?"binary":r}function Re(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Be(t,e,r){var n=t.schema.yProps;return n?(e&&r.numFailures>0&&(e=e.filter(function(t,e){return!r.failures[e]})),Promise.all(n.map(function(r){var n=r.updatesTable;return e?t.db.table(n).where("k").anyOf(e).delete():t.db.table(n).clear()})).then(function(){return r})):r}var je=function(){function t(t){this["@@propmod"]=t}return t.prototype.execute=function(t){var e,r=this["@@propmod"];if(void 0!==r.add){var i=r.add;if(s(i))return n(n([],s(t)?t:[],!0),i,!0).sort();if("number"==typeof i)return(Number(t)||0)+i;if("bigint"==typeof i)try{return BigInt(t)+i}catch(t){return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(void 0!==r.remove){var o=r.remove;if(s(o))return s(t)?t.filter(function(t){return!o.includes(t)}).sort():[];if("number"==typeof o)return Number(t)-o;if("bigint"==typeof o)try{return BigInt(t)-o}catch(t){return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}var a=null===(e=r.replacePrefix)||void 0===e?void 0:e[0];return a&&"string"==typeof t&&t.startsWith(a)?r.replacePrefix[1]+t.substring(a.length):t},t}();function $e(t,e){for(var r=o(e),n=r.length,i=!1,s=0;s<n;++s){var a=r[s],l=e[a],c=_(t,a);l instanceof je?(C(t,a,l.execute(c)),i=!0):c!==l&&(C(t,a,l),i=!0)}return i}var ze=function(){function t(){}return t.prototype._trans=function(t,e,r){var n=this._tx||Lt.trans,i=this.name,o=ht&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===t?"read":"write"," ").concat(this.name));function s(t,r,n){if(!n.schema[i])throw new Z.NotFound("Table "+i+" not part of transaction");return e(n.idbtrans,n)}var a=Vt();try{var l=n&&n.db._novip===this.db._novip?n===Lt.trans?n._promise(t,s,r):ie(function(){return n._promise(t,s,r)},{trans:n,transless:Lt.transless||Lt}):me(this.db,t,[this.name],s);return o&&(l._consoleTask=o,l=l.catch(function(t){return console.trace(t),pe(t)})),l}finally{a&&qt()}},t.prototype.get=function(t,e){var r=this;return t&&t.constructor===Object?this.where(t).first(e):null==t?pe(new Z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(e){return r.core.get({trans:e,key:t}).then(function(t){return r.hook.reading.fire(t)})}).then(e)},t.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(s(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var e=o(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(t){if(t.compound&&e.every(function(e){return t.keyPath.indexOf(e)>=0})){for(var r=0;r<e.length;++r)if(-1===e.indexOf(t.keyPath[r]))return!1;return!0}return!1}).sort(function(t,e){return t.keyPath.length-e.keyPath.length})[0];if(r&&this.db._maxKey!==ye){var n=r.keyPath.slice(0,e.length);return this.where(n).equals(n.map(function(e){return t[e]}))}!r&&ht&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(e.join("+"),"]"));var i=this.schema.idxByName;function a(t,e){return 0===Pe(t,e)}var l=e.reduce(function(e,r){var n=e[0],o=e[1],l=i[r],c=t[r];return[n||l,n||!l?Se(o,l&&l.multi?function(t){var e=_(t,r);return s(e)&&e.some(function(t){return a(c,t)})}:function(t){return a(c,_(t,r))}):o]},[null,null]),c=l[0],d=l[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(d):r?this.filter(d):this.where(e).equals("")},t.prototype.filter=function(t){return this.toCollection().and(t)},t.prototype.count=function(t){return this.toCollection().count(t)},t.prototype.offset=function(t){return this.toCollection().offset(t)},t.prototype.limit=function(t){return this.toCollection().limit(t)},t.prototype.each=function(t){return this.toCollection().each(t)},t.prototype.toArray=function(t){return this.toCollection().toArray(t)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,s(t)?"[".concat(t.join("+"),"]"):t))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(t){var r=this,n=r.db,i=r.name;this.schema.mappedClass=t,t.prototype instanceof Te&&(t=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),Object.defineProperty(r.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),r.prototype.table=function(){return i},r}(t));for(var o=new Set,s=t.prototype;s;s=l(s))Object.getOwnPropertyNames(s).forEach(function(t){return o.add(t)});var a=function(e){if(!e)return e;var r=Object.create(t.prototype);for(var n in e)if(!o.has(n))try{r[n]=e[n]}catch(t){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=a,this.hook("reading",a),t},t.prototype.defineClass=function(){function t(t){a(this,t)}return this.mapToClass(t)},t.prototype.add=function(t,e){var r=this,n=this.schema.primKey,i=n.auto,o=n.keyPath,s=t;return o&&i&&(s=De(o)(t)),this._trans("readwrite",function(t){return r.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[s]})}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):t.lastResult}).then(function(e){if(o)try{C(t,o,e)}catch(t){}return e})},t.prototype.upsert=function(t,e){var r=this,n=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return r.core.get({trans:i,key:t}).then(function(o){var s=null!=o?o:{};return $e(s,e),n&&C(s,n,t),r.core.mutate({trans:i,type:"put",values:[s],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[e]}}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):!!o})})})},t.prototype.update=function(t,e){if("object"!=typeof t||s(t))return this.where(":id").equals(t).modify(e);var r=_(t,this.schema.primKey.keyPath);return void 0===r?pe(new Z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(e)},t.prototype.put=function(t,e){var r=this,n=this.schema.primKey,i=n.auto,o=n.keyPath,s=t;return o&&i&&(s=De(o)(t)),this._trans("readwrite",function(t){return r.core.mutate({trans:t,type:"put",values:[s],keys:null!=e?[e]:null})}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):t.lastResult}).then(function(e){if(o)try{C(t,o,e)}catch(t){}return e})},t.prototype.delete=function(t){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"delete",keys:[t]}).then(function(r){return Be(e,[t],r)}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):void 0})})},t.prototype.clear=function(){var t=this;return this._trans("readwrite",function(e){return t.core.mutate({trans:e,type:"deleteRange",range:Ae}).then(function(e){return Be(t,null,e)})}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):void 0})},t.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",function(r){return e.core.getMany({keys:t,trans:r}).then(function(t){return t.map(function(t){return e.hook.reading.fire(t)})})})},t.prototype.bulkAdd=function(t,e,r){var n=this,i=Array.isArray(e)?e:void 0,o=(r=r||(i?void 0:e))?r.allKeys:void 0;return this._trans("readwrite",function(e){var r=n.schema.primKey,s=r.auto,a=r.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&s?t.map(De(a)):t;return n.core.mutate({trans:e,type:"add",keys:i,values:c,wantResults:o}).then(function(t){var e=t.numFailures,r=t.results,i=t.lastResult,s=t.failures;if(0===e)return o?r:i;throw new J("".concat(n.name,".bulkAdd(): ").concat(e," of ").concat(l," operations failed"),s)})})},t.prototype.bulkPut=function(t,e,r){var n=this,i=Array.isArray(e)?e:void 0,o=(r=r||(i?void 0:e))?r.allKeys:void 0;return this._trans("readwrite",function(e){var r=n.schema.primKey,s=r.auto,a=r.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&s?t.map(De(a)):t;return n.core.mutate({trans:e,type:"put",keys:i,values:c,wantResults:o}).then(function(t){var e=t.numFailures,r=t.results,i=t.lastResult,s=t.failures;if(0===e)return o?r:i;throw new J("".concat(n.name,".bulkPut(): ").concat(e," of ").concat(l," operations failed"),s)})})},t.prototype.bulkUpdate=function(t){var e=this,r=this.core,n=t.map(function(t){return t.key}),i=t.map(function(t){return t.changes}),o=[];return this._trans("readwrite",function(s){return r.getMany({trans:s,keys:n,cache:"clone"}).then(function(a){var l=[],c=[];t.forEach(function(t,r){var n=t.key,i=t.changes,s=a[r];if(s){for(var d=0,u=Object.keys(i);d<u.length;d++){var h=u[d],g=i[h];if(h===e.schema.primKey.keyPath){if(0!==Pe(g,n))throw new Z.Constraint("Cannot update primary key in bulkUpdate()")}else C(s,h,g)}o.push(r),l.push(n),c.push(s)}});var d=l.length;return r.mutate({trans:s,type:"put",keys:l,values:c,updates:{keys:n,changeSpecs:i}}).then(function(t){var r=t.numFailures,n=t.failures;if(0===r)return d;for(var i=0,s=Object.keys(n);i<s.length;i++){var a=s[i],l=o[Number(a)];if(null!=l){var c=n[a];delete n[a],n[l]=c}}throw new J("".concat(e.name,".bulkUpdate(): ").concat(r," of ").concat(d," operations failed"),n)})})})},t.prototype.bulkDelete=function(t){var e=this,r=t.length;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"delete",keys:t}).then(function(r){return Be(e,t,r)})}).then(function(t){var n=t.numFailures,i=t.lastResult,o=t.failures;if(0===n)return i;throw new J("".concat(e.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),o)})},t}();function Ie(t){var e={},r=function(r,n){if(n){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return e[r].subscribe.apply(null,o),t}if("string"==typeof r)return e[r]};r.addEventType=a;for(var n=1,i=arguments.length;n<i;++n)a(arguments[n]);return r;function a(t,n,i){if("object"==typeof t)return l(t);n||(n=dt),i||(i=nt);var o={subscribers:[],fire:i,subscribe:function(t){-1===o.subscribers.indexOf(t)&&(o.subscribers.push(t),o.fire=n(o.fire,t))},unsubscribe:function(t){o.subscribers=o.subscribers.filter(function(e){return e!==t}),o.fire=o.subscribers.reduce(n,i)}};return e[t]=r[t]=o,o}function l(t){o(t).forEach(function(e){var r=t[e];if(s(r))a(e,t[e][0],t[e][1]);else{if("asap"!==r)throw new Z.InvalidArgument("Invalid event config");var n=a(e,it,function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];n.subscribers.forEach(function(t){k(function(){t.apply(null,e)})})})}})}}function Fe(t,e){return f(e).from({prototype:t}),e}function Ne(t){return Fe(ze.prototype,function(e,r,n){this.db=t,this._tx=n,this.name=e,this.schema=r,this.hook=t._allTables[e]?t._allTables[e].hook:Ie(null,{creating:[at,nt],reading:[ot,it],updating:[ct,nt],deleting:[lt,nt]})})}function We(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function He(t,e){t.filter=Se(t.filter,e)}function Ve(t,e,r){var n=t.replayFilter;t.replayFilter=n?function(){return Se(n(),e())}:e,t.justLimit=r&&!n}function qe(t,e){t.isMatch=Se(t.isMatch,e)}function Ue(t,e){if(t.isPrimKey)return e.primaryKey;var r=e.getIndexByKeyPath(t.index);if(!r)throw new Z.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return r}function Ke(t,e,r){var n=Ue(t,e.schema);return e.openCursor({trans:r,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:n,range:t.range}})}function Ye(t,e,r,n){var i=t.replayFilter?Se(t.filter,t.replayFilter()):t.filter;if(t.or){var o={},s=function(t,r,n){if(!i||i(r,n,function(t){return r.stop(t)},function(t){return r.fail(t)})){var s=r.primaryKey,a=""+s;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(s)),d(o,a)||(o[a]=!0,e(t,r,n))}};return Promise.all([t.or._iterate(s,r),Qe(Ke(t,n,r),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return Qe(Ke(t,n,r),Se(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Qe(t,e,r,n){var i=Xt(n?function(t,e,i){return r(n(t),e,i)}:r);return t.then(function(t){if(t)return t.start(function(){var r=function(){return t.continue()};e&&!e(t,function(t){return r=t},function(e){t.stop(e),r=nt},function(e){t.fail(e),r=nt})||i(t.value,t,function(t){return r=t}),r()})})}var Je=function(){function t(){}return t.prototype._read=function(t,e){var r=this._ctx;return r.error?r.table._trans(null,pe.bind(null,r.error)):r.table._trans("readonly",t).then(e)},t.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,pe.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},t.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=Se(e.algorithm,t)},t.prototype._iterate=function(t,e){return Ye(this._ctx,t,e,this._ctx.table.core)},t.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&a(r,t),e._ctx=r,e},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(t){var e=this._ctx;return this._read(function(r){return Ye(e,t,r,e.table.core)})},t.prototype.count=function(t){var e=this;return this._read(function(t){var r=e._ctx,n=r.table.core;if(We(r,!0))return n.count({trans:t,query:{index:Ue(r,n.schema),range:r.range}}).then(function(t){return Math.min(t,r.limit)});var i=0;return Ye(r,function(){return++i,!1},t,n).then(function(){return i})}).then(t)},t.prototype.sortBy=function(t,e){var r=t.split(".").reverse(),n=r[0],i=r.length-1;function o(t,e){return e?o(t[r[e]],e-1):t[n]}var s="next"===this._ctx.dir?1:-1;function a(t,e){return Pe(o(t,i),o(e,i))*s}return this.toArray(function(t){return t.sort(a)}).then(e)},t.prototype.toArray=function(t){var e=this;return this._read(function(t){var r=e._ctx;if("next"===r.dir&&We(r,!0)&&r.limit>0){var n=r.valueMapper,i=Ue(r,r.table.core.schema);return r.table.core.query({trans:t,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(function(t){var e=t.result;return n?e.map(n):e})}var o=[];return Ye(r,function(t){return o.push(t)},t,r.table.core).then(function(){return o})},t)},t.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,We(e)?Ve(e,function(){var e=t;return function(t,r){return 0===e||(1===e?(--e,!1):(r(function(){t.advance(e),e=0}),!1))}}):Ve(e,function(){var e=t;return function(){return--e<0}})),this},t.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Ve(this._ctx,function(){var e=t;return function(t,r,n){return--e<=0&&r(n),e>=0}},!0),this},t.prototype.until=function(t,e){return He(this._ctx,function(r,n,i){return!t(r.value)||(n(i),e)}),this},t.prototype.first=function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},t.prototype.last=function(t){return this.reverse().first(t)},t.prototype.filter=function(t){return He(this._ctx,function(e){return t(e.value)}),qe(this._ctx,t),this},t.prototype.and=function(t){return this.filter(t)},t.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},t.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,r){t(r.key,r)})},t.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},t.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,r){t(r.primaryKey,r)})},t.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var r=[];return this.each(function(t,e){r.push(e.key)}).then(function(){return r}).then(t)},t.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&We(e,!0)&&e.limit>0)return this._read(function(t){var r=Ue(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:r,range:e.range}})}).then(function(t){return t.result}).then(t);e.keysOnly=!e.isMatch;var r=[];return this.each(function(t,e){r.push(e.primaryKey)}).then(function(){return r}).then(t)},t.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},t.prototype.firstKey=function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},t.prototype.lastKey=function(t){return this.reverse().firstKey(t)},t.prototype.distinct=function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var r={};return He(this._ctx,function(t){var e=t.primaryKey.toString(),n=d(r,e);return r[e]=!0,!n}),this},t.prototype.modify=function(t){var e=this,r=this._ctx;return this._write(function(n){var i;i="function"==typeof t?t:function(e){return $e(e,t)};var s=r.table.core,a=s.schema.primaryKey,l=a.outbound,c=a.extractKey,d=200,u=e.db._options.modifyChunkSize;u&&(d="object"==typeof u?u[s.name]||u["*"]||200:u);var h=[],g=0,f=[],p=function(t,e){var r=e.failures,n=e.numFailures;g+=t-n;for(var i=0,s=o(r);i<s.length;i++){var a=s[i];h.push(r[a])}},m=t===Xe;return e.clone().primaryKeys().then(function(e){var o=We(r)&&r.limit===1/0&&("function"!=typeof t||m)&&{index:r.index,range:r.range},a=function(u){var h=Math.min(d,e.length-u),g=e.slice(u,u+h);return(m?Promise.resolve([]):s.getMany({trans:n,keys:g,cache:"immutable"})).then(function(f){var b=[],y=[],x=l?[]:null,v=m?g:[];if(!m)for(var k=0;k<h;++k){var w=f[k],_={value:R(w),primKey:e[u+k]};!1!==i.call(_,_.value,_)&&(null==_.value?v.push(e[u+k]):l||0===Pe(c(w),c(_.value))?(y.push(_.value),l&&x.push(e[u+k])):(v.push(e[u+k]),b.push(_.value)))}return Promise.resolve(b.length>0&&s.mutate({trans:n,type:"add",values:b}).then(function(t){for(var e in t.failures)v.splice(parseInt(e),1);p(b.length,t)})).then(function(){return(y.length>0||o&&"object"==typeof t)&&s.mutate({trans:n,type:"put",keys:x,values:y,criteria:o,changeSpec:"function"!=typeof t&&t,isAdditionalChunk:u>0}).then(function(t){return p(y.length,t)})}).then(function(){return(v.length>0||o&&m)&&s.mutate({trans:n,type:"delete",keys:v,criteria:o,isAdditionalChunk:u>0}).then(function(t){return Be(r.table,v,t)}).then(function(t){return p(v.length,t)})}).then(function(){return e.length>u+h&&a(u+d)})})};return a(0).then(function(){if(h.length>0)throw new Q("Error modifying one or more objects",h,g,f);return e.length})})})},t.prototype.delete=function(){var t=this._ctx,e=t.range;return!We(t)||t.table.schema.yProps||!t.isPrimKey&&3!==e.type?this.modify(Xe):this._write(function(r){var n=t.table.core.schema.primaryKey,i=e;return t.table.core.count({trans:r,query:{index:n,range:i}}).then(function(e){return t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(function(t){var r=t.failures,n=t.numFailures;if(n)throw new Q("Could not delete some values",Object.keys(r).map(function(t){return r[t]}),e-n);return e-n})})})},t}(),Xe=function(t,e){return e.value=null};function Ge(t){return Fe(Je.prototype,function(e,r){this.db=t;var n=Ae,i=null;if(r)try{n=r()}catch(t){i=t}var o=e._ctx,s=o.table,a=s.hook.reading.fire;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:a!==it?a:null}})}function Ze(t,e){return t<e?-1:t===e?0:1}function tr(t,e){return t>e?-1:t===e?0:1}function er(t,e,r){var n=t instanceof cr?new t.Collection(t):t;return n._ctx.error=r?new r(e):new TypeError(e),n}function rr(t){return new t.Collection(t,function(){return lr("")}).limit(0)}function nr(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function ir(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function or(t,e,r,n,i,o){for(var s=Math.min(t.length,n.length),a=-1,l=0;l<s;++l){var c=e[l];if(c!==n[l])return i(t[l],r[l])<0?t.substr(0,l)+r[l]+r.substr(l+1):i(t[l],n[l])<0?t.substr(0,l)+n[l]+r.substr(l+1):a>=0?t.substr(0,a)+e[a]+r.substr(a+1):null;i(t[l],c)<0&&(a=l)}return s<n.length&&"next"===o?t+r.substr(t.length):s<t.length&&"prev"===o?t.substr(0,r.length):a<0?null:t.substr(0,a)+n[a]+r.substr(a+1)}function sr(t,e,r,n){var i,o,s,a,l,c,d,u=r.length;if(!r.every(function(t){return"string"==typeof t}))return er(t,ke);function h(t){i=nr(t),o=ir(t),s="next"===t?Ze:tr;var e=r.map(function(t){return{lower:o(t),upper:i(t)}}).sort(function(t,e){return s(t.lower,e.lower)});a=e.map(function(t){return t.upper}),l=e.map(function(t){return t.lower}),c=t,d="next"===t?"":n}h("next");var g=new t.Collection(t,function(){return ar(a[0],l[u-1]+n)});g._ondirectionchange=function(t){h(t)};var f=0;return g._addAlgorithm(function(t,r,n){var i=t.key;if("string"!=typeof i)return!1;var h=o(i);if(e(h,l,f))return!0;for(var g=null,p=f;p<u;++p){var m=or(i,h,a[p],l[p],s,c);null===m&&null===g?f=p+1:(null===g||s(g,m)>0)&&(g=m)}return r(null!==g?function(){t.continue(g+d)}:n),!1}),g}function ar(t,e,r,n){return{type:2,lower:t,upper:e,lowerOpen:r,upperOpen:n}}function lr(t){return{type:1,lower:t,upper:t}}var cr=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(t,e,r,n){r=!1!==r,n=!0===n;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(r||n)&&(!r||!n)?rr(this):new this.Collection(this,function(){return ar(t,e,!r,!n)})}catch(t){return er(this,ve)}},t.prototype.equals=function(t){return null==t?er(this,ve):new this.Collection(this,function(){return lr(t)})},t.prototype.above=function(t){return null==t?er(this,ve):new this.Collection(this,function(){return ar(t,void 0,!0)})},t.prototype.aboveOrEqual=function(t){return null==t?er(this,ve):new this.Collection(this,function(){return ar(t,void 0,!1)})},t.prototype.below=function(t){return null==t?er(this,ve):new this.Collection(this,function(){return ar(void 0,t,!1,!0)})},t.prototype.belowOrEqual=function(t){return null==t?er(this,ve):new this.Collection(this,function(){return ar(void 0,t)})},t.prototype.startsWith=function(t){return"string"!=typeof t?er(this,ke):this.between(t,t+ye,!0,!0)},t.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):sr(this,function(t,e){return 0===t.indexOf(e[0])},[t],ye)},t.prototype.equalsIgnoreCase=function(t){return sr(this,function(t,e){return t===e[0]},[t],"")},t.prototype.anyOfIgnoreCase=function(){var t=W.apply(N,arguments);return 0===t.length?rr(this):sr(this,function(t,e){return-1!==e.indexOf(t)},t,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var t=W.apply(N,arguments);return 0===t.length?rr(this):sr(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},t,ye)},t.prototype.anyOf=function(){var t=this,e=W.apply(N,arguments),r=this._cmp;try{e.sort(r)}catch(t){return er(this,ve)}if(0===e.length)return rr(this);var n=new this.Collection(this,function(){return ar(e[0],e[e.length-1])});n._ondirectionchange=function(n){r="next"===n?t._ascending:t._descending,e.sort(r)};var i=0;return n._addAlgorithm(function(t,n,o){for(var s=t.key;r(s,e[i])>0;)if(++i===e.length)return n(o),!1;return 0===r(s,e[i])||(n(function(){t.continue(e[i])}),!1)}),n},t.prototype.notEqual=function(t){return this.inAnyRange([[xe,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var t=W.apply(N,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return er(this,ve)}var e=t.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[xe,e]]},null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(t,e){var r=this,n=this._cmp,i=this._ascending,o=this._descending,s=this._min,a=this._max;if(0===t.length)return rr(this);if(!t.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&i(t[0],t[1])<=0}))return er(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Z.InvalidArgument);var l=!e||!1!==e.includeLowers,c=e&&!0===e.includeUppers;function d(t,e){for(var r=0,i=t.length;r<i;++r){var o=t[r];if(n(e[0],o[1])<0&&n(e[1],o[0])>0){o[0]=s(o[0],e[0]),o[1]=a(o[1],e[1]);break}}return r===i&&t.push(e),t}var u,h=i;function g(t,e){return h(t[0],e[0])}try{(u=t.reduce(d,[])).sort(g)}catch(t){return er(this,ve)}var f=0,p=c?function(t){return i(t,u[f][1])>0}:function(t){return i(t,u[f][1])>=0},m=l?function(t){return o(t,u[f][0])>0}:function(t){return o(t,u[f][0])>=0};function b(t){return!p(t)&&!m(t)}var y=p,x=new this.Collection(this,function(){return ar(u[0][0],u[u.length-1][1],!l,!c)});return x._ondirectionchange=function(t){"next"===t?(y=p,h=i):(y=m,h=o),u.sort(g)},x._addAlgorithm(function(t,e,n){for(var o=t.key;y(o);)if(++f===u.length)return e(n),!1;return!!b(o)||(0===r._cmp(o,u[f][1])||0===r._cmp(o,u[f][0])||e(function(){h===i?t.continue(u[f][0]):t.continue(u[f][1])}),!1)}),x},t.prototype.startsWithAnyOf=function(){var t=W.apply(N,arguments);return t.every(function(t){return"string"==typeof t})?0===t.length?rr(this):this.inAnyRange(t.map(function(t){return[t,t+ye]})):er(this,"startsWithAnyOf() only works with strings")},t}();function dr(t){return Fe(cr.prototype,function(e,r,n){if(this.db=t,this._ctx={table:e,index:":id"===r?null:r,or:n},this._cmp=this._ascending=Pe,this._descending=function(t,e){return Pe(e,t)},this._max=function(t,e){return Pe(t,e)>0?t:e},this._min=function(t,e){return Pe(t,e)<0?t:e},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new Z.MissingAPI})}function ur(t){return Xt(function(e){return hr(e),t(e.target.error),!1})}function hr(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var gr="storagemutated",fr="x-storagemutated-1",pr=Ie(null,gr),mr=function(){function t(){}return t.prototype._lock=function(){return v(!Lt.global),++this._reculock,1!==this._reculock||Lt.global||(Lt.lockOwnerFor=this),this},t.prototype._unlock=function(){if(v(!Lt.global),0===--this._reculock)for(Lt.global||(Lt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{he(t[1],t[0])}catch(t){}}return this},t.prototype._locked=function(){return this._reculock&&Lt.lockOwnerFor!==this},t.prototype.create=function(t){var e=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(v(!this.idbtrans),!t&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new Z.DatabaseClosed(n);case"MissingAPIError":throw new Z.MissingAPI(n.message,n);default:throw new Z.OpenFailed(n)}if(!this.active)throw new Z.TransactionInactive;return v(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Xt(function(r){hr(r),e._reject(t.error)}),t.onabort=Xt(function(r){hr(r),e.active&&e._reject(new Z.Abort(t.error)),e.active=!1,e.on("abort").fire(r)}),t.oncomplete=Xt(function(){e.active=!1,e._resolve(),"mutatedParts"in t&&pr.storagemutated.fire(t.mutatedParts)}),this},t.prototype._promise=function(t,e,r){var n=this;if("readwrite"===t&&"readwrite"!==this.mode)return pe(new Z.ReadOnly("Transaction is readonly"));if(!this.active)return pe(new Z.TransactionInactive);if(this._locked())return new Bt(function(i,o){n._blockedFuncs.push([function(){n._promise(t,e,r).then(i,o)},Lt])});if(r)return ie(function(){var t=new Bt(function(t,r){n._lock();var i=e(t,r,n);i&&i.then&&i.then(t,r)});return t.finally(function(){return n._unlock()}),t._lib=!0,t});var i=new Bt(function(t,r){var i=e(t,r,n);i&&i.then&&i.then(t,r)});return i._lib=!0,i},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(t){var e=this._root(),r=Bt.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return r});else{e._waitingFor=r,e._waitingQueue=[];var n=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(n.get(-1/0).onsuccess=t)}()}var i=e._waitingFor;return new Bt(function(t,n){r.then(function(r){return e._waitingQueue.push(Xt(t.bind(null,r)))},function(t){return e._waitingQueue.push(Xt(n.bind(null,t)))}).finally(function(){e._waitingFor===i&&(e._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Z.Abort))},t.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(d(e,t))return e[t];var r=this.schema[t];if(!r)throw new Z.NotFound("Table "+t+" not part of transaction");var n=new this.db.Table(t,r,this);return n.core=this.db.core.table(t),e[t]=n,n},t}();function br(t){return Fe(mr.prototype,function(e,r,n,i,o){var s=this;"readonly"!==e&&r.forEach(function(t){var e,i=null===(e=n[t])||void 0===e?void 0:e.yProps;i&&(r=r.concat(i.map(function(t){return t.updatesTable})))}),this.db=t,this.mode=e,this.storeNames=r,this.schema=n,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Ie(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Bt(function(t,e){s._resolve=t,s._reject=e}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(t){var e=s.active;return s.active=!1,s.on.error.fire(t),s.parent?s.parent._reject(t):e&&s.idbtrans&&s.idbtrans.abort(),pe(t)})})}function yr(t,e,r,n,i,o,s,a){return{name:t,keyPath:e,unique:r,multi:n,auto:i,compound:o,src:(r&&!s?"&":"")+(n?"*":"")+(i?"++":"")+xr(e),type:a}}function xr(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function vr(t,e,r){return{name:t,primKey:e,indexes:r,mappedClass:null,idxByName:w(r,function(t){return[t.name,t]})}}function kr(t){return 1===t.length?t[0]:t}var wr=function(t){try{return t.only([[]]),wr=function(){return[[]]},[[]]}catch(t){return wr=function(){return ye},ye}};function _r(t){return null==t?function(){}:"string"==typeof t?Cr(t):function(e){return _(e,t)}}function Cr(t){return 1===t.split(".").length?function(e){return e[t]}:function(e){return _(e,t)}}function Mr(t){return[].slice.call(t)}var Sr=0;function Ar(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function Dr(t,e,r){function n(t,e){var r=Mr(t.objectStoreNames);return{schema:{name:t.name,tables:r.map(function(t){return e.objectStore(t)}).map(function(t){var e=t.keyPath,r=t.autoIncrement,n=s(e),i=null==e,o={},a={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:n,keyPath:e,autoIncrement:r,unique:!0,extractKey:_r(e)},indexes:Mr(t.indexNames).map(function(e){return t.index(e)}).map(function(t){var e=t.name,r=t.unique,n=t.multiEntry,i=t.keyPath,a={name:e,compound:s(i),keyPath:i,unique:r,multiEntry:n,extractKey:_r(i)};return o[Ar(i)]=a,a}),getIndexByKeyPath:function(t){return o[Ar(t)]}};return o[":id"]=a.primaryKey,null!=e&&(o[Ar(e)]=a.primaryKey),a})},hasGetAll:r.length>0&&"getAll"in e.objectStore(r[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var r=t.lower,n=t.upper,i=t.lowerOpen,o=t.upperOpen;return void 0===r?void 0===n?null:e.upperBound(n,!!o):void 0===n?e.lowerBound(r,!!i):e.bound(r,n,!!i,!!o)}function o(t){var e=t.name;function r(t){var r=t.trans,n=t.type,o=t.keys,s=t.values,a=t.range;return new Promise(function(t,l){t=Xt(t);var c=r.objectStore(e),d=null==c.keyPath,u="put"===n||"add"===n;if(!u&&"delete"!==n&&"deleteRange"!==n)throw new Error("Invalid operation type: "+n);var h,g=(o||s||{length:1}).length;if(o&&s&&o.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===g)return t({numFailures:0,failures:{},results:[],lastResult:void 0});var f=[],p=[],m=0,b=function(t){++m,hr(t)};if("deleteRange"===n){if(4===a.type)return t({numFailures:m,failures:p,results:[],lastResult:void 0});3===a.type?f.push(h=c.clear()):f.push(h=c.delete(i(a)))}else{var y=u?d?[s,o]:[s,null]:[o,null],x=y[0],v=y[1];if(u)for(var k=0;k<g;++k)f.push(h=v&&void 0!==v[k]?c[n](x[k],v[k]):c[n](x[k])),h.onerror=b;else for(k=0;k<g;++k)f.push(h=c[n](x[k])),h.onerror=b}var w=function(e){var r=e.target.result;f.forEach(function(t,e){return null!=t.error&&(p[e]=t.error)}),t({numFailures:m,failures:p,results:"delete"===n?o:f.map(function(t){return t.result}),lastResult:r})};h.onerror=function(t){b(t),w(t)},h.onsuccess=w})}function n(t){var r=t.trans,n=t.values,o=t.query,s=t.reverse,a=t.unique;return new Promise(function(t,l){t=Xt(t);var c=o.index,d=o.range,u=r.objectStore(e),h=c.isPrimaryKey?u:u.index(c.name),g=s?a?"prevunique":"prev":a?"nextunique":"next",f=n||!("openKeyCursor"in h)?h.openCursor(i(d),g):h.openKeyCursor(i(d),g);f.onerror=ur(l),f.onsuccess=Xt(function(e){var n=f.result;if(n){n.___id=++Sr,n.done=!1;var i=n.continue.bind(n),o=n.continuePrimaryKey;o&&(o=o.bind(n));var s=n.advance.bind(n),a=function(){throw new Error("Cursor not started")},c=function(){throw new Error("Cursor not stopped")};n.trans=r,n.stop=n.continue=n.continuePrimaryKey=n.advance=a,n.fail=Xt(l),n.next=function(){var t=this,e=1;return this.start(function(){return e--?t.continue():t.stop()}).then(function(){return t})},n.start=function(t){var e=new Promise(function(t,e){t=Xt(t),f.onerror=ur(e),n.fail=e,n.stop=function(e){n.stop=n.continue=n.continuePrimaryKey=n.advance=c,t(e)}}),r=function(){if(f.result)try{t()}catch(t){n.fail(t)}else n.done=!0,n.start=function(){throw new Error("Cursor behind last entry")},n.stop()};return f.onsuccess=Xt(function(t){f.onsuccess=r,r()}),n.continue=i,n.continuePrimaryKey=o,n.advance=s,r(),e},t(n)}else t(null)},l)})}function o(t){return function(r){return new Promise(function(n,o){n=Xt(n);var s=r.trans,a=r.values,l=r.limit,c=r.query,d=l===1/0?void 0:l,u=c.index,h=c.range,g=s.objectStore(e),f=u.isPrimaryKey?g:g.index(u.name),p=i(h);if(0===l)return n({result:[]});if(t){var m=a?f.getAll(p,d):f.getAllKeys(p,d);m.onsuccess=function(t){return n({result:t.target.result})},m.onerror=ur(o)}else{var b=0,y=a||!("openKeyCursor"in f)?f.openCursor(p):f.openKeyCursor(p),x=[];y.onsuccess=function(t){var e=y.result;return e?(x.push(a?e.value:e.primaryKey),++b===l?n({result:x}):void e.continue()):n({result:x})},y.onerror=ur(o)}})}}return{name:e,schema:t,mutate:r,getMany:function(t){var r=t.trans,n=t.keys;return new Promise(function(t,i){t=Xt(t);for(var o,s=r.objectStore(e),a=n.length,l=new Array(a),c=0,d=0,u=function(e){var r=e.target;l[r._pos]=r.result,++d===c&&t(l)},h=ur(i),g=0;g<a;++g)null!=n[g]&&((o=s.get(n[g]))._pos=g,o.onsuccess=u,o.onerror=h,++c);0===c&&t(l)})},get:function(t){var r=t.trans,n=t.key;return new Promise(function(t,i){t=Xt(t);var o=r.objectStore(e).get(n);o.onsuccess=function(e){return t(e.target.result)},o.onerror=ur(i)})},query:o(c),openCursor:n,count:function(t){var r=t.query,n=t.trans,o=r.index,s=r.range;return new Promise(function(t,r){var a=n.objectStore(e),l=o.isPrimaryKey?a:a.index(o.name),c=i(s),d=c?l.count(c):l.count();d.onsuccess=Xt(function(e){return t(e.target.result)}),d.onerror=ur(r)})}}}var a=n(t,r),l=a.schema,c=a.hasGetAll,d=l.tables.map(function(t){return o(t)}),u={};return d.forEach(function(t){return u[t.name]=t}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!u[t])throw new Error("Table '".concat(t,"' not found"));return u[t]},MIN_KEY:-1/0,MAX_KEY:wr(e),schema:l}}function Tr(t,e){return e.reduce(function(t,e){var n=e.create;return r(r({},t),n(t))},t)}function Pr(t,e,r,n){var i=r.IDBKeyRange;return r.indexedDB,{dbcore:Tr(Dr(e,i,n),t.dbcore)}}function Lr(t,e){var r=e.db,n=Pr(t._middlewares,r,t._deps,e);t.core=n.dbcore,t.tables.forEach(function(e){var r=e.name;t.core.schema.tables.some(function(t){return t.name===r})&&(e.core=t.core.table(r),t[r]instanceof t.Table&&(t[r].core=e.core))})}function Er(t,e,r,n){r.forEach(function(r){var i=n[r];e.forEach(function(e){var n=m(e,r);(!n||"value"in n&&void 0===n.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?g(e,r,{get:function(){return this.table(r)},set:function(t){h(this,r,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[r]=new t.Table(r,i))})})}function Or(t,e){e.forEach(function(e){for(var r in e)e[r]instanceof t.Table&&delete e[r]})}function Rr(t,e){return t._cfg.version-e._cfg.version}function Br(t,e,r,n){var i=t._dbSchema;r.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=vr("$meta",Yr("")[0],[]),t._storeNames.push("$meta"));var s=t._createTransaction("readwrite",t._storeNames,i);s.create(r),s._completion.catch(n);var a=s._reject.bind(s),l=Lt.transless||Lt;ie(function(){if(Lt.trans=s,Lt.transless=l,0!==e)return Lr(t,r),$r(t,s,e).then(function(e){return zr(t,e,s,r)}).catch(a);o(i).forEach(function(t){Fr(r,t,i[t].primKey,i[t].indexes)}),Lr(t,r),Bt.follow(function(){return t.on.populate.fire(s)}).catch(a)})}function jr(t,e){Nr(t._dbSchema,e),e.db.version%10!=0||e.objectStoreNames.contains("$meta")||e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var r=Vr(t,t.idbdb,e);Kr(t,t._dbSchema,e);for(var n=function(t){if(t.change.length||t.recreate)return console.warn("Unable to patch indexes of table ".concat(t.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=e.objectStore(t.name);t.add.forEach(function(e){ht&&console.debug("Dexie upgrade patch: Creating missing index ".concat(t.name,".").concat(e.src)),Hr(r,e)})},i=0,o=Ir(r,t._dbSchema).change;i<o.length;i++){var s=n(o[i]);if("object"==typeof s)return s.value}}function $r(t,e,r){return e.storeNames.includes("$meta")?e.table("$meta").get("version").then(function(t){return null!=t?t:r}):Bt.resolve(r)}function zr(t,e,r,n){var i=[],s=t._versions,a=t._dbSchema=Vr(t,t.idbdb,n),l=s.filter(function(t){return t._cfg.version>=e});if(0===l.length)return Bt.resolve();function c(){return i.length?Bt.resolve(i.shift()(r.idbtrans)).then(c):Bt.resolve()}return l.forEach(function(s){i.push(function(){var i=a,l=s._cfg.dbschema;Kr(t,i,n),Kr(t,l,n),a=t._dbSchema=l;var c=Ir(i,l);c.add.forEach(function(t){Fr(n,t[0],t[1].primKey,t[1].indexes)}),c.change.forEach(function(t){if(t.recreate)throw new Z.Upgrade("Not yet support for changing primary key");var e=n.objectStore(t.name);t.add.forEach(function(t){return Hr(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),Hr(e,t)}),t.del.forEach(function(t){return e.deleteIndex(t)})});var d=s._cfg.contentUpgrade;if(d&&s._cfg.version>e){Lr(t,n),r._memoizedTables={};var u=S(l);c.del.forEach(function(t){u[t]=i[t]}),Or(t,[t.Transaction.prototype]),Er(t,[t.Transaction.prototype],o(u),u),r.schema=u;var h,g=H(d);g&&oe();var f=Bt.follow(function(){if((h=d(r))&&g){var t=se.bind(null,null);h.then(t,t)}});return h&&"function"==typeof h.then?Bt.resolve(h):f.then(function(){return h})}}),i.push(function(e){Wr(s._cfg.dbschema,e),Or(t,[t.Transaction.prototype]),Er(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),r.schema=t._dbSchema}),i.push(function(e){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===s._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(t){return"$meta"!==t})):e.objectStore("$meta").put(s._cfg.version,"version"))})}),c().then(function(){Nr(a,n)})}function Ir(t,e){var r,n={del:[],add:[],change:[]};for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],o=e[r];if(i){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto)s.recreate=!0,n.change.push(s);else{var a=i.idxByName,l=o.idxByName,c=void 0;for(c in a)l[c]||s.del.push(c);for(c in l){var d=a[c],u=l[c];d?d.src!==u.src&&s.change.push(u):s.add.push(u)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function Fr(t,e,r,n){var i=t.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(t){return Hr(i,t)}),i}function Nr(t,e){o(t).forEach(function(r){e.db.objectStoreNames.contains(r)||(ht&&console.debug("Dexie: Creating missing table",r),Fr(e,r,t[r].primKey,t[r].indexes))})}function Wr(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(r){return null==t[r]&&e.db.deleteObjectStore(r)})}function Hr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Vr(t,e,r){var n={};return y(e.objectStoreNames,0).forEach(function(t){for(var e=r.objectStore(t),i=e.keyPath,o=yr(xr(i),i||"",!0,!1,!!e.autoIncrement,i&&"string"!=typeof i,!0),s=[],a=0;a<e.indexNames.length;++a){var l=e.index(e.indexNames[a]);i=l.keyPath;var c=yr(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(c)}n[t]=vr(t,o,s)}),n}function qr(t,e,r){t.verno=e.version/10;var n=t._dbSchema=Vr(t,e,r);t._storeNames=y(e.objectStoreNames,0),Er(t,[t._allTables],o(n),n)}function Ur(t,e){var r=Ir(Vr(t,t.idbdb,e),t._dbSchema);return!(r.add.length||r.change.some(function(t){return t.add.length||t.change.length}))}function Kr(t,e,r){for(var n=r.db.objectStoreNames,o=0;o<n.length;++o){var s=n[o],a=r.objectStore(s);t._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var c=a.indexNames[l],d=a.index(c).keyPath,u="string"==typeof d?d:"["+y(d).join("+")+"]";if(e[s]){var h=e[s].idxByName[u];h&&(h.name=c,delete e[s].idxByName[u],e[s].idxByName[c]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Yr(t){return t.split(",").map(function(t,e){var r,n=t.split(":"),i=null===(r=n[1])||void 0===r?void 0:r.trim(),o=(t=n[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return yr(o,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),s(a),0===e,i)})}var Qr,Jr=function(){function t(){}return t.prototype._createTableSchema=function(t,e,r){return vr(t,e,r)},t.prototype._parseIndexSyntax=function(t){return Yr(t)},t.prototype._parseStoresSpec=function(t,e){var r=this;o(t).forEach(function(n){if(null!==t[n]){var i=r._parseIndexSyntax(t[n]),o=i.shift();if(!o)throw new Z.Schema("Invalid schema for table "+n+": "+t[n]);if(o.unique=!0,o.multi)throw new Z.Schema("Primary key cannot be multiEntry*");i.forEach(function(t){if(t.auto)throw new Z.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new Z.Schema("Index must have a name and cannot be an empty string")});var s=r._createTableSchema(n,o,i);e[n]=s}})},t.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,t):t;var r=e._versions,n={},i={};return r.forEach(function(t){a(n,t._cfg.storesSource),i=t._cfg.dbschema={},t._parseStoresSpec(n,i)}),e._dbSchema=i,Or(e,[e._allTables,e,e.Transaction.prototype]),Er(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],o(i),i),e._storeNames=o(i),this},t.prototype.upgrade=function(t){return this._cfg.contentUpgrade=ut(this._cfg.contentUpgrade||nt,t),this},t}();function Xr(t){return Fe(Jr.prototype,function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Gr(t,e){var r=t._dbNamesDB;return r||(r=t._dbNamesDB=new ti(_e,{addons:[],indexedDB:t,IDBKeyRange:e})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function Zr(t){return t&&"function"==typeof t.databases}function tn(t){var e=t.indexedDB,r=t.IDBKeyRange;return Zr(e)?Promise.resolve(e.databases()).then(function(t){return t.map(function(t){return t.name}).filter(function(t){return t!==_e})}):Gr(e,r).toCollection().primaryKeys()}function en(t,e){var r=t.indexedDB,n=t.IDBKeyRange;!Zr(r)&&e!==_e&&Gr(r,n).put({name:e}).catch(nt)}function rn(t,e){var r=t.indexedDB,n=t.IDBKeyRange;!Zr(r)&&e!==_e&&Gr(r,n).delete(e).catch(nt)}function nn(t){return ie(function(){return Lt.letThrough=!0,t()})}function on(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var r=function(){return indexedDB.databases().finally(e)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function sn(t){return!("from"in t)}var an=function(t,e){if(!this){var r=new an;return t&&"d"in t&&a(r,t),r}a(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function ln(t,e,r){var n=Pe(e,r);if(!isNaN(n)){if(n>0)throw RangeError();if(sn(t))return a(t,{from:e,to:r,d:1});var i=t.l,o=t.r;if(Pe(r,t.from)<0)return i?ln(i,e,r):t.l={from:e,to:r,d:1,l:null,r:null},hn(t);if(Pe(e,t.to)>0)return o?ln(o,e,r):t.r={from:e,to:r,d:1,l:null,r:null},hn(t);Pe(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),Pe(r,t.to)>0&&(t.to=r,t.r=null,t.d=t.l?t.l.d+1:1);var s=!t.r;i&&!t.l&&cn(t,i),o&&s&&cn(t,o)}}function cn(t,e){function r(t,e){var n=e.from,i=e.to,o=e.l,s=e.r;ln(t,n,i),o&&r(t,o),s&&r(t,s)}sn(e)||r(t,e)}function dn(t,e){var r=un(e),n=r.next();if(n.done)return!1;for(var i=n.value,o=un(t),s=o.next(i.from),a=s.value;!n.done&&!s.done;){if(Pe(a.from,i.to)<=0&&Pe(a.to,i.from)>=0)return!0;Pe(i.from,a.from)<0?i=(n=r.next(a.from)).value:a=(s=o.next(i.from)).value}return!1}function un(t){var e=sn(t)?null:{s:0,n:t};return{next:function(t){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Pe(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Pe(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function hn(t){var e,n,i=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(n=t.l)||void 0===n?void 0:n.d)||0),o=i>1?"r":i<-1?"l":"";if(o){var s="r"===o?"l":"r",a=r({},t),l=t[o];t.from=l.from,t.to=l.to,t[o]=l[o],a[o]=l[s],t[s]=a,a.d=gn(a)}t.d=gn(t)}function gn(t){var e=t.r,r=t.l;return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}function fn(t,e){return o(e).forEach(function(r){t[r]?cn(t[r],e[r]):t[r]=L(e[r])}),t}function pn(t,e){return t.all||e.all||Object.keys(t).some(function(r){return e[r]&&dn(e[r],t[r])})}u(an.prototype,((Qr={add:function(t){return cn(this,t),this},addKey:function(t){return ln(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(t){return ln(e,t,t)}),this},hasKey:function(t){var e=un(this).next(t).value;return e&&Pe(e.from,t)<=0&&Pe(e.to,t)>=0}})[z]=function(){return un(this)},Qr));var mn={},bn={},yn=!1;function xn(t,e){fn(bn,t),yn||(yn=!0,setTimeout(function(){yn=!1;var t=bn;bn={},vn(t,!1)},0))}function vn(t,e){void 0===e&&(e=!1);var r=new Set;if(t.all)for(var n=0,i=Object.values(mn);n<i.length;n++)kn(a=i[n],t,r,e);else for(var o in t){var s=/^idb\:\/\/(.*)\/(.*)\//.exec(o);if(s){var a,l=s[1],c=s[2];(a=mn["idb://".concat(l,"/").concat(c)])&&kn(a,t,r,e)}}r.forEach(function(t){return t()})}function kn(t,e,r,n){for(var i=[],o=0,s=Object.entries(t.queries.query);o<s.length;o++){for(var a=s[o],l=a[0],c=[],d=0,u=a[1];d<u.length;d++){var h=u[d];pn(e,h.obsSet)?h.subscribers.forEach(function(t){return r.add(t)}):n&&c.push(h)}n&&i.push([l,c])}if(n)for(var g=0,f=i;g<f.length;g++){var p=f[g];l=p[0],c=p[1],t.queries.query[l]=c}}function wn(t){var e=t._state,r=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?pe(e.dbOpenError):t});e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var n=e.openCanceller,i=Math.round(10*t.verno),o=!1;function s(){if(e.openCanceller!==n)throw new Z.DatabaseClosed("db.open() was cancelled")}var a=e.dbReadyResolve,l=null,c=!1,d=function(){return new Bt(function(n,a){if(s(),!r)throw new Z.MissingAPI;var u=t.name,h=e.autoSchema||!i?r.open(u):r.open(u,i);if(!h)throw new Z.MissingAPI;h.onerror=ur(a),h.onblocked=Xt(t._fireOnBlocked),h.onupgradeneeded=Xt(function(n){if(l=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=hr,l.abort(),h.result.close();var i=r.deleteDatabase(u);i.onsuccess=i.onerror=Xt(function(){a(new Z.NoSuchDatabase("Database ".concat(u," doesnt exist")))})}else{l.onerror=ur(a);var s=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;c=s<1,t.idbdb=h.result,o&&jr(t,l),Br(t,s/10,l,a)}},a),h.onsuccess=Xt(function(){l=null;var r=t.idbdb=h.result,s=y(r.objectStoreNames);if(s.length>0)try{var a=r.transaction(kr(s),"readonly");if(e.autoSchema)qr(t,r,a);else if(Kr(t,t._dbSchema,a),!Ur(t,a)&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),r.close(),i=r.version+1,o=!0,n(d());Lr(t,a)}catch(t){}we.push(t),r.onversionchange=Xt(function(r){e.vcFired=!0,t.on("versionchange").fire(r)}),r.onclose=Xt(function(){t.close({disableAutoOpen:!1})}),c&&en(t._deps,u),n()},a)}).catch(function(t){switch(null==t?void 0:t.name){case"UnknownError":if(e.PR1398_maxLoop>0)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(i>0)return i=0,d()}return Bt.reject(t)})};return Bt.race([n,("undefined"==typeof navigator?Bt.resolve():on()).then(d)]).then(function(){return s(),e.onReadyBeingFired=[],Bt.resolve(nn(function(){return t.on.ready.fire(t.vip)})).then(function r(){if(e.onReadyBeingFired.length>0){var n=e.onReadyBeingFired.reduce(ut,nt);return e.onReadyBeingFired=[],Bt.resolve(nn(function(){return n(t.vip)})).then(r)}})}).finally(function(){e.openCanceller===n&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)}).catch(function(r){e.dbOpenError=r;try{l&&l.abort()}catch(t){}return n===e.openCanceller&&t._close(),pe(r)}).finally(function(){e.openComplete=!0,a()}).then(function(){if(c){var e={};t.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(e["idb://".concat(t.name,"/").concat(r.name,"/").concat(n.name)]=new an(-1/0,[[[]]]))}),e["idb://".concat(t.name,"/").concat(r.name,"/")]=e["idb://".concat(t.name,"/").concat(r.name,"/:dels")]=new an(-1/0,[[[]]])}),pr(gr).fire(e),vn(e,!0)}return t})}function _n(t){var e=function(e){return t.next(e)},r=function(e){return t.throw(e)},n=o(e),i=o(r);function o(t){return function(e){var r=t(e),o=r.value;return r.done?o:o&&"function"==typeof o.then?o.then(n,i):s(o)?Promise.all(o).then(n,i):n(o)}}return o(e)()}function Cn(t,e,r){var n=arguments.length;if(n<2)throw new Z.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[t,D(i),r]}function Mn(t,e,r,n,i){return Bt.resolve().then(function(){var o=Lt.transless||Lt,s=t._createTransaction(e,r,t._dbSchema,n);s.explicit=!0;var a={trans:s,transless:o};if(n)s.idbtrans=n.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(n){return n.name===X.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Mn(t,e,r,null,i)})):pe(n)}var l,c=H(i);c&&oe();var d=Bt.follow(function(){if(l=i.call(s,s))if(c){var t=se.bind(null,null);l.then(t,t)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=_n(l))},a);return(l&&"function"==typeof l.then?Bt.resolve(l).then(function(t){return s.active?t:pe(new Z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):d.then(function(){return l})).then(function(t){return n&&s._resolve(),s._completion.then(function(){return t})}).catch(function(t){return s._reject(t),pe(t)})})}function Sn(t,e,r){for(var n=s(t)?t.slice():[t],i=0;i<r;++i)n.push(e);return n}function An(t){return r(r({},t),{table:function(e){var n=t.table(e),i=n.schema,o={},s=[];function a(t,e,n){var i=Ar(t),l=o[i]=o[i]||[],c=null==t?0:"string"==typeof t?1:t.length,d=e>0,u=r(r({},n),{name:d?"".concat(i,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:d,keyTail:e,keyLength:c,extractKey:_r(t),unique:!d&&n.unique});return l.push(u),u.isPrimaryKey||s.push(u),c>1&&a(2===c?t[0]:t.slice(0,c-1),e+1,n),l.sort(function(t,e){return t.keyTail-e.keyTail}),u}var l=a(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[l];for(var c=0,d=i.indexes;c<d.length;c++){var u=d[c];a(u.keyPath,0,u)}function h(t){var e=o[Ar(t)];return e&&e[0]}function g(e,r){return{type:1===e.type?2:e.type,lower:Sn(e.lower,e.lowerOpen?t.MAX_KEY:t.MIN_KEY,r),lowerOpen:!0,upper:Sn(e.upper,e.upperOpen?t.MIN_KEY:t.MAX_KEY,r),upperOpen:!0}}function f(t){var e=t.query.index;return e.isVirtual?r(r({},t),{query:{index:e.lowLevelIndex,range:g(t.query.range,e.keyTail)}}):t}var p=r(r({},n),{schema:r(r({},i),{primaryKey:l,indexes:s,getIndexByKeyPath:h}),count:function(t){return n.count(f(t))},query:function(t){return n.query(f(t))},openCursor:function(e){var r=e.query.index,i=r.keyTail,o=r.isVirtual,s=r.keyLength;if(!o)return n.openCursor(e);function a(r){function n(n){null!=n?r.continue(Sn(n,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?r.continue(r.key.slice(0,s).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,i)):r.continue()}var o=Object.create(r,{continue:{value:n},continuePrimaryKey:{value:function(e,n){r.continuePrimaryKey(Sn(e,t.MAX_KEY,i),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var t=r.key;return 1===s?t[0]:t.slice(0,s)}},value:{get:function(){return r.value}}});return o}return n.openCursor(f(e)).then(function(t){return t&&a(t)})}});return p}})}var Dn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:An};function Tn(t,e,r,n){return r=r||{},n=n||"",o(t).forEach(function(i){if(d(e,i)){var o=t[i],s=e[i];if("object"==typeof o&&"object"==typeof s&&o&&s){var a=$(o);a!==$(s)?r[n+i]=e[i]:"Object"===a?Tn(o,s,r,n+i+"."):o!==s&&(r[n+i]=e[i])}else o!==s&&(r[n+i]=e[i])}else r[n+i]=void 0}),o(e).forEach(function(i){d(t,i)||(r[n+i]=e[i])}),r}function Pn(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}var Ln={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return r(r({},t),{table:function(e){var i=t.table(e),o=i.schema.primaryKey,s=r(r({},i),{mutate:function(t){var s=Lt.trans,a=s.table(e).hook,l=a.deleting,c=a.creating,u=a.updating;switch(t.type){case"add":if(c.fire===nt)break;return s._promise("readwrite",function(){return h(t)},!0);case"put":if(c.fire===nt&&u.fire===nt)break;return s._promise("readwrite",function(){return h(t)},!0);case"delete":if(l.fire===nt)break;return s._promise("readwrite",function(){return h(t)},!0);case"deleteRange":if(l.fire===nt)break;return s._promise("readwrite",function(){return g(t)},!0)}return i.mutate(t);function h(t){var e=Lt.trans,s=t.keys||Pn(o,t);if(!s)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?r(r({},t),{keys:s}):r({},t)).type&&(t.values=n([],t.values,!0)),t.keys&&(t.keys=n([],t.keys,!0)),En(i,t,s).then(function(r){var n=s.map(function(n,i){var s=r[i],a={onerror:null,onsuccess:null};if("delete"===t.type)l.fire.call(a,n,s,e);else if("add"===t.type||void 0===s){var h=c.fire.call(a,n,t.values[i],e);null==n&&null!=h&&(n=h,t.keys[i]=n,o.outbound||C(t.values[i],o.keyPath,n))}else{var g=Tn(s,t.values[i]),f=u.fire.call(a,g,n,s,e);if(f){var p=t.values[i];Object.keys(f).forEach(function(t){d(p,t)?p[t]=f[t]:C(p,t,f[t])})}}return a});return i.mutate(t).then(function(e){for(var i=e.failures,o=e.results,a=e.numFailures,l=e.lastResult,c=0;c<s.length;++c){var d=o?o[c]:s[c],u=n[c];null==d?u.onerror&&u.onerror(i[c]):u.onsuccess&&u.onsuccess("put"===t.type&&r[c]?t.values[c]:d)}return{failures:i,results:o,numFailures:a,lastResult:l}}).catch(function(t){return n.forEach(function(e){return e.onerror&&e.onerror(t)}),Promise.reject(t)})})}function g(t){return f(t.trans,t.range,1e4)}function f(t,e,n){return i.query({trans:t,values:!1,query:{index:o,range:e},limit:n}).then(function(i){var o=i.result;return h({type:"delete",keys:o,trans:t}).then(function(i){return i.numFailures>0?Promise.reject(i.failures[0]):o.length<n?{failures:[],numFailures:0,lastResult:void 0}:f(t,r(r({},e),{lower:o[o.length-1],lowerOpen:!0}),n)})})}}});return s}})}};function En(t,e,r){return"add"===e.type?Promise.resolve([]):t.getMany({trans:e.trans,keys:r,cache:"immutable"})}function On(t,e,r){try{if(!e)return null;if(e.keys.length<t.length)return null;for(var n=[],i=0,o=0;i<e.keys.length&&o<t.length;++i)0===Pe(e.keys[i],t[o])&&(n.push(r?R(e.values[i]):e.values[i]),++o);return n.length===t.length?n:null}catch(t){return null}}var Rn={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return r(r({},n),{getMany:function(t){if(!t.cache)return n.getMany(t);var e=On(t.keys,t.trans._cache,"clone"===t.cache);return e?Bt.resolve(e):n.getMany(t).then(function(e){return t.trans._cache={keys:t.keys,values:"clone"===t.cache?R(e):e},e})},mutate:function(t){return"add"!==t.type&&(t.trans._cache=null),n.mutate(t)}})}}}};function Bn(t,e){return"readonly"===t.trans.mode&&!!t.subscr&&!t.trans.explicit&&"disabled"!==t.trans.db._options.cache&&!e.schema.primaryKey.outbound}function jn(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var $n={stack:"dbcore",level:0,name:"Observability",create:function(t){var e=t.schema.name,n=new an(t.MIN_KEY,t.MAX_KEY);return r(r({},t),{transaction:function(e,r,n){if(Lt.subscr&&"readonly"!==r)throw new Z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Lt.querier));return t.transaction(e,r,n)},table:function(i){var a=t.table(i),l=a.schema,c=l.primaryKey,d=l.indexes,u=c.extractKey,h=c.outbound,g=c.autoIncrement&&d.filter(function(t){return t.compound&&t.keyPath.includes(c.keyPath)}),f=r(r({},a),{mutate:function(r){var o,d,u=r.trans,h=r.mutatedParts||(r.mutatedParts={}),f=function(t){var r="idb://".concat(e,"/").concat(i,"/").concat(t);return h[r]||(h[r]=new an)},p=f(""),m=f(":dels"),b=r.type,y="deleteRange"===r.type?[r.range]:"delete"===r.type?[r.keys]:r.values.length<50?[Pn(c,r).filter(function(t){return t}),r.values]:[],x=y[0],v=y[1],k=r.trans._cache;if(s(x)){p.addKeys(x);var w="delete"===b||x.length===v.length?On(x,k):null;w||m.addKeys(x),(w||v)&&zn(f,l,w,v)}else if(x){var _={from:null!==(o=x.lower)&&void 0!==o?o:t.MIN_KEY,to:null!==(d=x.upper)&&void 0!==d?d:t.MAX_KEY};m.add(_),p.add(_)}else p.add(n),m.add(n),l.indexes.forEach(function(t){return f(t.name).add(n)});return a.mutate(r).then(function(t){return!x||"add"!==r.type&&"put"!==r.type||(p.addKeys(t.results),g&&g.forEach(function(e){for(var n=r.values.map(function(t){return e.extractKey(t)}),i=e.keyPath.findIndex(function(t){return t===c.keyPath}),o=0,s=t.results.length;o<s;++o)n[o][i]=t.results[o];f(e.name).addKeys(n)})),u.mutatedParts=fn(u.mutatedParts||{},h),t})}}),p=function(e){var r,n,i=e.query,o=i.index,s=i.range;return[o,new an(null!==(r=s.lower)&&void 0!==r?r:t.MIN_KEY,null!==(n=s.upper)&&void 0!==n?n:t.MAX_KEY)]},m={get:function(t){return[c,new an(t.key)]},getMany:function(t){return[c,(new an).addKeys(t.keys)]},count:p,query:p,openCursor:p};return o(m).forEach(function(t){f[t]=function(o){var s=Lt.subscr,l=!!s,c=Bn(Lt,a)&&jn(t,o)?o.obsSet={}:s;if(l){var d=function(t){var r="idb://".concat(e,"/").concat(i,"/").concat(t);return c[r]||(c[r]=new an)},g=d(""),f=d(":dels"),p=m[t](o),b=p[0],y=p[1];if("query"===t&&b.isPrimaryKey&&!o.values?f.add(y):d(b.name||"").add(y),!b.isPrimaryKey){if("count"!==t){var x="query"===t&&h&&o.values&&a.query(r(r({},o),{values:!1}));return a[t].apply(this,arguments).then(function(e){if("query"===t){if(h&&o.values)return x.then(function(t){var r=t.result;return g.addKeys(r),e});var r=o.values?e.result.map(u):e.result;o.values?g.addKeys(r):f.addKeys(r)}else if("openCursor"===t){var n=e,i=o.values;return n&&Object.create(n,{key:{get:function(){return f.addKey(n.primaryKey),n.key}},primaryKey:{get:function(){var t=n.primaryKey;return f.addKey(t),t}},value:{get:function(){return i&&g.addKey(n.primaryKey),n.value}}})}return e})}f.add(n)}}return a[t].apply(this,arguments)}}),f}})}};function zn(t,e,r,n){function i(e){var i=t(e.name||"");function o(t){return null!=t?e.extractKey(t):null}var a=function(t){return e.multiEntry&&s(t)?t.forEach(function(t){return i.addKey(t)}):i.addKey(t)};(r||n).forEach(function(t,e){var i=r&&o(r[e]),s=n&&o(n[e]);0!==Pe(i,s)&&(null!=i&&a(i),null!=s&&a(s))})}e.indexes.forEach(i)}function In(t,e,n){if(0===n.numFailures)return e;if("deleteRange"===e.type)return null;var i=e.keys?e.keys.length:"values"in e&&e.values?e.values.length:1;if(n.numFailures===i)return null;var o=r({},e);return s(o.keys)&&(o.keys=o.keys.filter(function(t,e){return!(e in n.failures)})),"values"in o&&s(o.values)&&(o.values=o.values.filter(function(t,e){return!(e in n.failures)})),o}function Fn(t,e){return void 0===e.lower||(e.lowerOpen?Pe(t,e.lower)>0:Pe(t,e.lower)>=0)}function Nn(t,e){return void 0===e.upper||(e.upperOpen?Pe(t,e.upper)<0:Pe(t,e.upper)<=0)}function Wn(t,e){return Fn(t,e)&&Nn(t,e)}function Hn(t,e,r,n,i,o){if(!r||0===r.length)return t;var a=e.query.index,l=a.multiEntry,c=e.query.range,d=n.schema.primaryKey.extractKey,u=a.extractKey,h=(a.lowLevelIndex||a).extractKey,g=r.reduce(function(t,r){var n=t,i=[];if("add"===r.type||"put"===r.type)for(var o=new an,a=r.values.length-1;a>=0;--a){var h=r.values[a],g=d(h);if(!o.hasKey(g)){var f=u(h);(l&&s(f)?f.some(function(t){return Wn(t,c)}):Wn(f,c))&&(o.addKey(g),i.push(h))}}switch(r.type){case"add":var p=(new an).addKeys(e.values?t.map(function(t){return d(t)}):t);n=t.concat(e.values?i.filter(function(t){var e=d(t);return!p.hasKey(e)&&(p.addKey(e),!0)}):i.map(function(t){return d(t)}).filter(function(t){return!p.hasKey(t)&&(p.addKey(t),!0)}));break;case"put":var m=(new an).addKeys(r.values.map(function(t){return d(t)}));n=t.filter(function(t){return!m.hasKey(e.values?d(t):t)}).concat(e.values?i:i.map(function(t){return d(t)}));break;case"delete":var b=(new an).addKeys(r.keys);n=t.filter(function(t){return!b.hasKey(e.values?d(t):t)});break;case"deleteRange":var y=r.range;n=t.filter(function(t){return!Wn(d(t),y)})}return n},t);return g===t?t:(g.sort(function(t,e){return Pe(h(t),h(e))||Pe(d(t),d(e))}),e.limit&&e.limit<1/0&&(g.length>e.limit?g.length=e.limit:t.length===e.limit&&g.length<e.limit&&(i.dirty=!0)),o?Object.freeze(g):g)}function Vn(t,e){return 0===Pe(t.lower,e.lower)&&0===Pe(t.upper,e.upper)&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function qn(t,e,r,n){if(void 0===t)return void 0!==e?-1:0;if(void 0===e)return 1;var i=Pe(t,e);if(0===i){if(r&&n)return 0;if(r)return 1;if(n)return-1}return i}function Un(t,e,r,n){if(void 0===t)return void 0!==e?1:0;if(void 0===e)return-1;var i=Pe(t,e);if(0===i){if(r&&n)return 0;if(r)return-1;if(n)return 1}return i}function Kn(t,e){return qn(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&Un(t.upper,e.upper,t.upperOpen,e.upperOpen)>=0}function Yn(t,e,r,n){var i=mn["idb://".concat(t,"/").concat(e)];if(!i)return[];var o=i.queries[r];if(!o)return[null,!1,i,null];var s=o[(n.query?n.query.index.name:null)||""];if(!s)return[null,!1,i,null];switch(r){case"query":var a=s.find(function(t){return t.req.limit===n.limit&&t.req.values===n.values&&Vn(t.req.query.range,n.query.range)});return a?[a,!0,i,s]:[s.find(function(t){return("limit"in t.req?t.req.limit:1/0)>=n.limit&&(!n.values||t.req.values)&&Kn(t.req.query.range,n.query.range)}),!1,i,s];case"count":var l=s.find(function(t){return Vn(t.req.query.range,n.query.range)});return[l,!!l,i,s]}}function Qn(t,e,r,n){t.subscribers.add(r),n.addEventListener("abort",function(){t.subscribers.delete(r),0===t.subscribers.size&&Jn(t,e)})}function Jn(t,e){setTimeout(function(){0===t.subscribers.size&&F(e,t)},3e3)}var Xn={stack:"dbcore",level:0,name:"Cache",create:function(t){var e=t.schema.name,n=r(r({},t),{transaction:function(r,n,i){var o=t.transaction(r,n,i);if("readwrite"===n){var s=new AbortController,a=s.signal,l=function(i){return function(){if(s.abort(),"readwrite"===n){for(var a=new Set,l=0,c=r;l<c.length;l++){var d=c[l],u=mn["idb://".concat(e,"/").concat(d)];if(u){var h=t.table(d),g=u.optimisticOps.filter(function(t){return t.trans===o});if(o._explicit&&i&&o.mutatedParts)for(var f=0,p=Object.values(u.queries.query);f<p.length;f++)for(var m=0,b=(v=p[f]).slice();m<b.length;m++)pn((_=b[m]).obsSet,o.mutatedParts)&&(F(v,_),_.subscribers.forEach(function(t){return a.add(t)}));else if(g.length>0){u.optimisticOps=u.optimisticOps.filter(function(t){return t.trans!==o});for(var y=0,x=Object.values(u.queries.query);y<x.length;y++)for(var v,k=0,w=(v=x[y]).slice();k<w.length;k++){var _;if(null!=(_=w[k]).res&&o.mutatedParts)if(i&&!_.dirty){var C=Object.isFrozen(_.res),M=Hn(_.res,_.req,g,h,_,C);_.dirty?(F(v,_),_.subscribers.forEach(function(t){return a.add(t)})):M!==_.res&&(_.res=M,_.promise=Bt.resolve({result:M}))}else _.dirty&&F(v,_),_.subscribers.forEach(function(t){return a.add(t)})}}}}a.forEach(function(t){return t()})}}};o.addEventListener("abort",l(!1),{signal:a}),o.addEventListener("error",l(!1),{signal:a}),o.addEventListener("complete",l(!0),{signal:a})}return o},table:function(n){var i=t.table(n),o=i.schema.primaryKey,s=r(r({},i),{mutate:function(t){var s=Lt.trans;if(o.outbound||"disabled"===s.db._options.cache||s.explicit||"readwrite"!==s.idbtrans.mode)return i.mutate(t);var a=mn["idb://".concat(e,"/").concat(n)];if(!a)return i.mutate(t);var l=i.mutate(t);return"add"!==t.type&&"put"!==t.type||!(t.values.length>=50||Pn(o,t).some(function(t){return null==t}))?(a.optimisticOps.push(t),t.mutatedParts&&xn(t.mutatedParts),l.then(function(e){if(e.numFailures>0){F(a.optimisticOps,t);var r=In(a,t,e);r&&a.optimisticOps.push(r),t.mutatedParts&&xn(t.mutatedParts)}}),l.catch(function(){F(a.optimisticOps,t),t.mutatedParts&&xn(t.mutatedParts)})):l.then(function(e){var n=r(r({},t),{values:t.values.map(function(t,n){var i;if(e.failures[n])return t;var s=(null===(i=o.keyPath)||void 0===i?void 0:i.includes("."))?R(t):r({},t);return C(s,o.keyPath,e.results[n]),s})}),i=In(a,n,e);a.optimisticOps.push(i),queueMicrotask(function(){return t.mutatedParts&&xn(t.mutatedParts)})}),l},query:function(t){var r;if(!Bn(Lt,i)||!jn("query",t))return i.query(t);var o="immutable"===(null===(r=Lt.trans)||void 0===r?void 0:r.db._options.cache),s=Lt,a=s.requery,l=s.signal,c=Yn(e,n,"query",t),d=c[0],u=c[1],h=c[2],g=c[3];if(d&&u)d.obsSet=t.obsSet;else{var f=i.query(t).then(function(t){var e=t.result;if(d&&(d.res=e),o){for(var r=0,n=e.length;r<n;++r)Object.freeze(e[r]);Object.freeze(e)}else t.result=R(e);return t}).catch(function(t){return g&&d&&F(g,d),Promise.reject(t)});d={obsSet:t.obsSet,promise:f,subscribers:new Set,type:"query",req:t,dirty:!1},g?g.push(d):(g=[d],h||(h=mn["idb://".concat(e,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),h.queries.query[t.query.index.name||""]=g)}return Qn(d,g,a,l),d.promise.then(function(e){return{result:Hn(e.result,t,null==h?void 0:h.optimisticOps,i,d,o)}})}});return s}});return n}};function Gn(t,e){return new Proxy(t,{get:function(t,r,n){return"db"===r?e:Reflect.get(t,r,n)}})}var Zn,ti=function(){function t(e,n){var i=this;this._middlewares={},this.verno=0;var o=t.dependencies;this._options=n=r({addons:t.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var s=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:nt,dbReadyPromise:null,cancelOpen:nt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};a.dbReadyPromise=new Bt(function(t){a.dbReadyResolve=t}),a.openCanceller=new Bt(function(t,e){a.cancelOpen=e}),this._state=a,this.name=e,this.on=Ie(this,"populate","blocked","versionchange","close",{ready:[ut,nt]}),this.once=function(t,e){var r=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];i.on(t).unsubscribe(r),e.apply(i,n)};return i.on(t,r)},this.on.ready.subscribe=x(this.on.ready.subscribe,function(e){return function(r,n){t.vip(function(){var t=i._state;if(t.openComplete)t.dbOpenError||Bt.resolve().then(r),n&&e(r);else if(t.onReadyBeingFired)t.onReadyBeingFired.push(r),n&&e(r);else{e(r);var o=i;n||e(function t(){o.on.ready.unsubscribe(r),o.on.ready.unsubscribe(t)})}})}}),this.Collection=Ge(this),this.Table=Ne(this),this.Transaction=br(this),this.Version=Xr(this),this.WhereClause=dr(this),this.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))}),this._maxKey=wr(n.IDBKeyRange),this._createTransaction=function(t,e,r,n){return new i.Transaction(t,e,r,i._options.chromeTransactionDurability,n)},this._fireOnBlocked=function(t){i.on("blocked").fire(t),we.filter(function(t){return t.name===i.name&&t!==i&&!t._state.vcFired}).map(function(e){return e.on("versionchange").fire(t)})},this.use(Rn),this.use(Xn),this.use($n),this.use(Dn),this.use(Ln);var l=new Proxy(this,{get:function(t,e,r){if("_vip"===e)return!0;if("table"===e)return function(t){return Gn(i.table(t),l)};var n=Reflect.get(t,e,r);return n instanceof ze?Gn(n,l):"tables"===e?n.map(function(t){return Gn(t,l)}):"_createTransaction"===e?function(){return Gn(n.apply(this,arguments),l)}:n}});this.vip=l,s.forEach(function(t){return t(i)})}return t.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Z.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,r=e.filter(function(e){return e._cfg.version===t})[0];return r||(r=new this.Version(t),e.push(r),e.sort(Rr),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(t){var e=this;return this.idbdb&&(this._state.openComplete||Lt.letThrough||this._vip)?t():new Bt(function(t,r){if(e._state.openComplete)return r(new Z.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return void r(new Z.DatabaseClosed);e.open().catch(nt)}e._state.dbReadyPromise.then(t,r)}).then(t)},t.prototype.use=function(t){var e=t.stack,r=t.create,n=t.level,i=t.name;i&&this.unuse({stack:e,name:i});var o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:r,level:null==n?10:n,name:i}),o.sort(function(t,e){return t.level-e.level}),this},t.prototype.unuse=function(t){var e=t.stack,r=t.name,n=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(function(t){return n?t.create!==n:!!r&&t.name!==r})),this},t.prototype.open=function(){var t=this;return he(Pt,function(){return wn(t)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,e=we.indexOf(this);if(e>=0&&we.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new Bt(function(e){t.dbReadyResolve=e}),t.openCanceller=new Bt(function(e,r){t.cancelOpen=r}))},t.prototype.close=function(t){var e=(void 0===t?{disableAutoOpen:!0}:t).disableAutoOpen,r=this._state;e?(r.isBeingOpened&&r.cancelOpen(new Z.DatabaseClosed),this._close(),r.autoOpen=!1,r.dbOpenError=new Z.DatabaseClosed):(this._close(),r.autoOpen=this._options.autoOpen||r.isBeingOpened,r.openComplete=!1,r.dbOpenError=null)},t.prototype.delete=function(t){var e=this;void 0===t&&(t={disableAutoOpen:!0});var r=arguments.length>0&&"object"!=typeof arguments[0],n=this._state;return new Bt(function(i,o){var s=function(){e.close(t);var r=e._deps.indexedDB.deleteDatabase(e.name);r.onsuccess=Xt(function(){rn(e._deps,e.name),i()}),r.onerror=ur(o),r.onblocked=e._fireOnBlocked};if(r)throw new Z.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return null!==this.idbdb},t.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var t=this;return o(this._allTables).map(function(e){return t._allTables[e]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var t=Cn.apply(this,arguments);return this._transaction.apply(this,t)},t.prototype._transaction=function(t,e,r){var n=this,i=Lt.trans;i&&i.db===this&&-1===t.indexOf("!")||(i=null);var o,s,a=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(s=e.map(function(t){var e=t instanceof n.Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==t||t===Ce)o=Ce;else{if("rw"!=t&&t!=Me)throw new Z.InvalidArgument("Invalid transaction mode: "+t);o=Me}if(i){if(i.mode===Ce&&o===Me){if(!a)throw new Z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&s.forEach(function(t){if(i&&-1===i.storeNames.indexOf(t)){if(!a)throw new Z.SubTransaction("Table "+t+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(t){return i?i._promise(null,function(e,r){r(t)}):pe(t)}var l=Mn.bind(null,this,o,s,i,r);return i?i._promise(o,l,"lock"):Lt.trans?he(Lt.transless,function(){return n._whenReady(l)}):this._whenReady(l)},t.prototype.table=function(t){if(!d(this._allTables,t))throw new Z.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},t}(),ei="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",ri=function(){function t(t){this._subscribe=t}return t.prototype.subscribe=function(t,e,r){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:r})},t.prototype[ei]=function(){return this},t}();try{Zn={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(t){Zn={indexedDB:null,IDBKeyRange:null}}function ni(t){var e,r=!1,n=new ri(function(n){var i=H(t);function o(e){var r=Vt();try{i&&oe();var n=ie(t,e);return i&&(n=n.finally(se)),n}finally{r&&qt()}}var s,a=!1,l={},c={},d={get closed(){return a},unsubscribe:function(){a||(a=!0,s&&s.abort(),u&&pr.storagemutated.unsubscribe(f))}};n.start&&n.start(d);var u=!1,h=function(){return fe(p)};function g(){return pn(c,l)}var f=function(t){fn(l,t),g()&&h()},p=function(){if(!a&&Zn.indexedDB){l={};var i={};s&&s.abort(),s=new AbortController;var d={subscr:i,signal:s.signal,requery:h,querier:t,trans:null},g=o(d);Promise.resolve(g).then(function(t){r=!0,e=t,a||d.signal.aborted||(l={},E(c=i)||u||(pr(gr,f),u=!0),fe(function(){return!a&&n.next&&n.next(t)}))},function(t){r=!1,["DatabaseClosedError","AbortError"].includes(null==t?void 0:t.name)||a||fe(function(){a||n.error&&n.error(t)})})}};return setTimeout(h,0),d});return n.hasValue=function(){return r},n.getValue=function(){return e},n}var ii=ti;function oi(t){var e=ai;try{ai=!0,pr.storagemutated.fire(t),vn(t,!0)}finally{ai=e}}u(ii,r(r({},rt),{delete:function(t){return new ii(t,{addons:[]}).delete()},exists:function(t){return new ii(t,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return tn(ii.dependencies).then(t)}catch(t){return pe(new Z.MissingAPI)}},defineClass:function(){function t(t){a(this,t)}return t},ignoreTransaction:function(t){return Lt.trans?he(Lt.transless,t):t()},vip:nn,async:function(t){return function(){try{var e=_n(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Bt.resolve(e)}catch(t){return pe(t)}}},spawn:function(t,e,r){try{var n=_n(t.apply(r,e||[]));return n&&"function"==typeof n.then?n:Bt.resolve(n)}catch(t){return pe(t)}},currentTransaction:{get:function(){return Lt.trans||null}},waitFor:function(t,e){var r=Bt.resolve("function"==typeof t?ii.ignoreTransaction(t):t).timeout(e||6e4);return Lt.trans?Lt.trans.waitFor(r):r},Promise:Bt,debug:{get:function(){return ht},set:function(t){gt(t)}},derive:f,extend:a,props:u,override:x,Events:Ie,on:pr,liveQuery:ni,extendObservabilitySet:fn,getByKeyPath:_,setByKeyPath:C,delByKeyPath:M,shallowClone:S,deepClone:R,getObjectDiff:Tn,cmp:Pe,asap:k,minKey:xe,addons:[],connections:we,errnames:X,dependencies:Zn,cache:mn,semVer:be,version:be.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,r){return t+e/Math.pow(10,2*r)})})),ii.maxKey=wr(ii.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(pr(gr,function(t){var e;ai||(e=new CustomEvent(fr,{detail:t}),ai=!0,dispatchEvent(e),ai=!1)}),addEventListener(fr,function(t){var e=t.detail;ai||oi(e)}));var si,ai=!1,li=function(){};function ci(t){return new je({add:t})}function di(t){return new je({remove:t})}function ui(t,e){return new je({replacePrefix:[t,e]})}return"undefined"!=typeof BroadcastChannel&&((li=function(){(si=new BroadcastChannel(fr)).onmessage=function(t){return t.data&&oi(t.data)}})(),"function"==typeof si.unref&&si.unref(),pr(gr,function(t){ai||si.postMessage(t)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(t){if(!ti.disableBfCache&&t.persisted){ht&&console.debug("Dexie: handling persisted pagehide"),null==si||si.close();for(var e=0,r=we;e<r.length;e++)r[e].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!ti.disableBfCache&&t.persisted&&(ht&&console.debug("Dexie: handling persisted pageshow"),li(),oi({all:new an(-1/0,[[]])}))})),Bt.rejectionMapper=et,gt(ht),r(ti,Object.freeze({__proto__:null,Dexie:ti,liveQuery:ni,Entity:Te,cmp:Pe,PropModification:je,replacePrefix:ui,add:ci,remove:di,default:ti,RangeSet:an,mergeRanges:cn,rangesOverlap:dn}),{default:ti}),ti}();var rl=tl(el.exports);const nl=Symbol.for("Dexie"),il=globalThis[nl]||(globalThis[nl]=rl);if(rl.semVer!==il.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${rl.semVer} and ${il.semVer}`);function ol(t){return{youtube:"YouTube",github:"GitHub",medium:"Medium",devto:"DEV Community",substack:"Substack",twitter:"Twitter/X",reddit:"Reddit",stackoverflow:"Stack Overflow",npm:"npm",other:"Other"}[t]||t}function sl(t){return{youtube:"",github:"",medium:"",devto:"",substack:"",twitter:"",reddit:"",stackoverflow:"",npm:"",other:""}[t]||""}function al(t){return{video:"Video",short:"Short",channel:"Channel",playlist:"Playlist",repo:"Repository",issue:"Issue",pr:"Pull Request",gist:"Gist",file:"File",wiki:"Wiki",article:"Article",profile:"Profile",question:"Question",package:"Package",subreddit:"Subreddit",post:"Post",tweet:"Tweet",home:"Home",search:"Search",page:"Page"}[t]||t}const ll=new il("BookmarkInsightsDB");ll.version(1).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}),ll.version(2).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}).upgrade(t=>{console.log("Upgrading database to version 2 - adding rawMetadata support")}),ll.version(3).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 3 - adding similarities and computedMetrics tables")}),ll.version(4).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId, platform, creator, contentType",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 4 - adding platformData indexes")}),ll.version(5).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId, platform, creator, contentType, publishedDate",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 5 - adding deep metadata analysis fields")});const cl={enrichmentEnabled:!0,enrichmentSchedule:"manual",enrichmentBatchSize:50,enrichmentConcurrency:5,enrichmentRateLimit:1e3,enrichmentFreshnessDays:30,autoCategorizationEnabled:!0,deadLinkCheckEnabled:!0,privacyMode:!1,trackBrowsingBehavior:!1};async function dl(){try{return await ll.settings.get("app")||cl}catch(t){return console.error("Error getting settings:",t),cl}}async function ul(){try{return await ll.bookmarks.toArray()}catch(t){return console.error("Error getting bookmarks:",t),[]}}async function hl(t){try{return await ll.bookmarks.put(t),!0}catch(t){return console.error("Error upserting bookmark:",t),!1}}async function gl(t){try{return await ll.bookmarks.delete(t),!0}catch(t){return console.error("Error deleting bookmark:",t),!1}}async function fl(){try{const t=await ll.bookmarks.toArray(),e={};return t.forEach(t=>{t.domain&&(e[t.domain]=(e[t.domain]||0)+1)}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,10)}catch(t){return console.error("Error getting domain stats:",t),[]}}async function pl(){try{const t=await ll.bookmarks.toArray(),e={};return t.forEach(t=>{const r=new Date(t.dateAdded),n=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;e[n]=(e[n]||0)+1}),Object.entries(e).sort()}catch(t){return console.error("Error getting activity timeline:",t),[]}}async function ml(t,e,r=null){try{return await ll.cache.put({key:t,value:e,timestamp:Date.now(),ttl:r}),!0}catch(t){return console.error("Error setting cache:",t),!1}}async function bl(t){try{const e=await ll.cache.get(t);return e?e.ttl&&Date.now()-e.timestamp>e.ttl?(await ll.cache.delete(t),null):e.value:null}catch(t){return console.error("Error getting cache:",t),null}}const yl={domainStats:36e5,activityTimeline:216e5,wordFrequency:864e5,ageDistribution:216e5,categoryTrends:864e5,expertiseAreas:864e5,quickStats:3e5,duplicates:864e5,similarities:864e5,insightsSummary:3e5};async function xl(t,e,r){try{const n=await ll.computedMetrics.get(t);if(n&&n.validUntil>Date.now())return console.log(`Cache hit for metric: ${t}`),n.data;console.log(`Cache miss for metric: ${t}, computing...`);const i=await e();return await ll.computedMetrics.put({key:t,data:i,computedAt:Date.now(),validUntil:Date.now()+r}),i}catch(r){return console.error(`Error getting cached metric ${t}:`,r),e()}}async function vl(t){const e={add:["domainStats","quickStats","activityTimeline","ageDistribution","insightsSummary"],delete:["domainStats","quickStats","duplicates","similarities","insightsSummary"],update:["quickStats","insightsSummary"],enrich:["categoryTrends","expertiseAreas","insightsSummary","quickStats"],all:Object.keys(yl)}[t]||[];try{for(const t of e)await ll.computedMetrics.delete(t);console.log(`Invalidated caches for change type: ${t}`,e)}catch(t){console.error("Error invalidating metric caches:",t)}}async function kl(){try{return await ll.computedMetrics.clear(),console.log("Cleared all metric caches"),!0}catch(t){return console.error("Error clearing metric caches:",t),!1}}async function wl(){return xl("domainAnalytics",async()=>{const t=await ul(),e={};t.forEach(t=>{if(!t.domain)return;e[t.domain]||(e[t.domain]={domain:t.domain,count:0,latestDate:0,oldestDate:1/0,enrichedCount:0});const r=e[t.domain];r.count++,t.lastChecked&&r.enrichedCount++,t.dateAdded>r.latestDate&&(r.latestDate=t.dateAdded),t.dateAdded<r.oldestDate&&(r.oldestDate=t.dateAdded)});const r=Object.values(e),n=t.length;return r.forEach(t=>{t.percentage=n>0?Math.round(t.count/n*100):0,t.dateAdded=t.latestDate}),{byRecency:[...r].sort((t,e)=>e.latestDate-t.latestDate),byCount:[...r].sort((t,e)=>e.count-t.count),top10:[...r].sort((t,e)=>e.count-t.count).slice(0,10),totalDomains:r.length,totalBookmarks:n}},yl.domainStats)}async function _l(){try{const t=await ul(),e={};return t.forEach(t=>{t.folderPath&&(e[t.folderPath]=(e[t.folderPath]||0)+1)}),Object.entries(e).map(([t,e])=>({folder:t,count:e})).sort((t,e)=>e.count-t.count)}catch(t){return console.error("Error getting unique folders:",t),[]}}async function Cl(){return xl("ageDistribution",async()=>{const t=await ul(),e=Date.now(),r={"Last 24 hours":0,"Last week":0,"Last month":0,"Last 3 months":0,"Last 6 months":0,"Last year":0,"Over 1 year":0},n=864e5,i=7*n,o=30*n;return t.forEach(t=>{const s=e-t.dateAdded;s<=n?r["Last 24 hours"]++:s<=i?r["Last week"]++:s<=o?r["Last month"]++:s<=3*o?r["Last 3 months"]++:s<=6*o?r["Last 6 months"]++:s<=365*n?r["Last year"]++:r["Over 1 year"]++}),Object.entries(r)},yl.ageDistribution)}async function Ml(){return xl("creationPatterns",async()=>{const t=await ul(),e=new Array(24).fill(0),r=new Array(7).fill(0),n=new Array(12).fill(0),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t.forEach(t=>{const i=new Date(t.dateAdded);e[i.getHours()]++,r[i.getDay()]++,n[i.getMonth()]++}),{hourly:e.map((t,e)=>[`${e}:00`,t]),daily:r.map((t,e)=>[i[e],t]),monthly:n.map((t,e)=>[o[e],t])}},yl.ageDistribution)}async function Sl(){return xl("wordFrequency",async()=>{const t=await ul(),e={};return t.forEach(t=>{if(t.title){t.title.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>2&&!Na.has(t)).forEach(t=>{e[t]=(e[t]||0)+1})}}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,20)},yl.wordFrequency)}async function Al(){return xl("duplicates",async()=>{const t=await ul(),e={};return t.forEach(t=>{const r=t.url.toLowerCase().replace(/\/$/,"");e[r]||(e[r]=[]),e[r].push(t)}),Object.values(e).filter(t=>t.length>1)},yl.duplicates)}async function Dl(){try{const t=await ul(),e=["Bookmarks Bar","Other Bookmarks","Mobile Bookmarks",""];return t.filter(t=>{const r=t.folderPath||"";return e.includes(r)||!r.includes("/")})}catch(t){return console.error("Error finding uncategorized bookmarks:",t),[]}}async function Tl(){try{const t=await ul(),e=["http://","https://","chrome://","chrome-extension://","file://","javascript:","data:","about:","mailto:","tel:","ftp://","sftp://","ssh://"];return t.filter(t=>{const r=t.url||"";return!e.some(t=>r.startsWith(t))||""===r.trim()})}catch(t){return console.error("Error finding malformed URLs:",t),[]}}async function Pl(){return xl("quickStats",async()=>{const t=await ul(),e=await Al(),r=await Dl(),n=await Tl(),i=Date.now(),o=t.filter(t=>t.lastChecked).length,s=t.filter(t=>!1===t.isAlive).length,a=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{total:t.length,enriched:o,pending:t.length-o,enrichedPercentage:t.length>0?Math.round(o/t.length*100):0,duplicateGroups:e.length,uncategorized:r.length,malformed:n.length,deadLinks:s,uniqueDomains:a,addedThisWeek:t.filter(t=>i-t.dateAdded<6048e5).length,addedThisMonth:t.filter(t=>i-t.dateAdded<2592e6).length,oldestBookmark:t.reduce((t,e)=>e.dateAdded<t?e.dateAdded:t,Date.now()),newestBookmark:t.reduce((t,e)=>e.dateAdded>t?e.dateAdded:t,0)}},yl.quickStats)}async function Ll(){try{const t=await ul();return{exportDate:(new Date).toISOString(),version:"2.0",totalBookmarks:t.length,bookmarks:t}}catch(t){throw console.error("Error exporting bookmarks:",t),t}}async function El(){return(await wl()).byRecency}async function Ol(){return(await wl()).byCount}async function Rl(t){try{const e=[];for(const r of t)try{await chrome.bookmarks.remove(r)}catch(t){console.error(`Error deleting bookmark ${r}:`,t),e.push({id:r,error:t.message})}return await ll.bookmarks.bulkDelete(t),await vl("delete"),{success:t.length-e.length,errors:e}}catch(t){throw console.error("Error deleting bookmarks:",t),t}}async function Bl(){try{const t=await ul(),e={};return t.forEach(t=>{if(t.title){const r=t.title.toLowerCase();r.includes("how to")&&(e["How-to guides"]=(e["How-to guides"]||0)+1),r.includes("tutorial")&&(e.Tutorials=(e.Tutorials||0)+1),(r.includes("documentation")||r.includes("docs"))&&(e.Documentation=(e.Documentation||0)+1),(r.includes("api")||r.includes("reference"))&&(e["API/Reference"]=(e["API/Reference"]||0)+1),(r.includes("blog")||r.includes("article"))&&(e["Blog/Articles"]=(e["Blog/Articles"]||0)+1),(r.includes("github")||r.includes("repository"))&&(e["Code Repositories"]=(e["Code Repositories"]||0)+1),(r.includes("video")||r.includes("youtube"))&&(e.Videos=(e.Videos||0)+1),(r.includes("tool")||r.includes("app"))&&(e["Tools/Apps"]=(e["Tools/Apps"]||0)+1),r.length>60&&(e["Long titles (60+ chars)"]=(e["Long titles (60+ chars)"]||0)+1),r.split(" ").length<=3&&(e["Short titles (3 words)"]=(e["Short titles (3 words)"]||0)+1)}}),Object.entries(e).sort(([,t],[,e])=>e-t)}catch(t){return console.error("Error getting title patterns:",t),[]}}async function jl(){try{const t=await ul(),e={},r={},n={},i={};return t.forEach(t=>{try{const o=new URL(t.url);e[o.protocol]=(e[o.protocol]||0)+1;const s=o.hostname.split(".");if(s.length>1){const t=s[s.length-1];r[t]=(r[t]||0)+1}if(s.length>2){const t=s[0];"www"!==t&&(i[t]=(i[t]||0)+1)}const a=o.pathname.split("/").filter(t=>t.length>0);if(a.length>0){const t=a[0];n[t]=(n[t]||0)+1}}catch(t){}}),{protocols:Object.entries(e).sort(([,t],[,e])=>e-t),topLevelDomains:Object.entries(r).sort(([,t],[,e])=>e-t).slice(0,10),subdomains:Object.entries(i).sort(([,t],[,e])=>e-t).slice(0,10),pathPatterns:Object.entries(n).sort(([,t],[,e])=>e-t).slice(0,15)}}catch(t){return console.error("Error getting URL patterns:",t),{protocols:[],topLevelDomains:[],subdomains:[],pathPatterns:[]}}}async function $l(){try{const t=await ul(),e={};let r=0,n=0;t.forEach(t=>{n++;try{const n=new URL(t.url).searchParams;if(n.toString()){r++;for(const[t]of n)e[t]=(e[t]||0)+1}}catch(t){}});return{parameters:Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,15),urlsWithParams:r,totalUrls:n,percentage:n>0?Math.round(r/n*100):0}}catch(t){return console.error("Error getting URL parameter usage:",t),{parameters:[],urlsWithParams:0,totalUrls:0,percentage:0}}}async function zl(){try{const t=await ul(),e={};t.forEach(t=>{e[t.domain]=(e[t.domain]||0)+1});const r=Object.entries(e).sort(([,t],[,e])=>e-t),n=t.length,i=r.slice(0,10),o=r.slice(10).reduce((t,[,e])=>t+e,0),s=i.map(([t,e])=>({domain:t,count:e,percentage:Math.round(e/n*100)}));return o>0&&s.push({domain:"Others",count:o,percentage:Math.round(o/n*100)}),s}catch(t){return console.error("Error getting domain distribution:",t),[]}}async function Il(){try{return(await ul()).filter(t=>!1===t.isAlive)}catch(t){return console.error("Error getting dead links:",t),[]}}async function Fl(){try{const t=await ll.bookmarks.toArray(),e=await ll.settings.toArray(),r=await ll.events.orderBy("timestamp").reverse().limit(1e3).toArray(),n=await ll.similarities.toArray(),i=t.filter(t=>t.lastChecked).length,o=t.filter(t=>t.category).length;return{version:"2.1",schemaVersion:3,createdAt:(new Date).toISOString(),metadata:{totalBookmarks:t.length,enrichedCount:i,categorizedCount:o,eventsCount:r.length,similaritiesCount:n.length},data:{bookmarks:t,settings:e,events:r,similarities:n}}}catch(t){throw console.error("Error creating backup:",t),t}}async function Nl(){try{const t=await Fl(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=`bookmark-insights-backup-${(new Date).toISOString().slice(0,10)}.json`,i=document.createElement("a");return i.href=r,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),{success:!0,filename:n,metadata:t.metadata}}catch(t){throw console.error("Error downloading backup:",t),t}}async function Wl(t,e={}){const{restoreBookmarks:r=!0,restoreSettings:n=!0,restoreEvents:i=!1,restoreSimilarities:o=!0,mergeMode:s=!1}=e;try{if(!t||!t.version||!t.data)throw new Error("Invalid backup format");if(!t.data.bookmarks||!Array.isArray(t.data.bookmarks))throw new Error("Backup does not contain valid bookmarks data");const e={bookmarksRestored:0,settingsRestored:0,eventsRestored:0,similaritiesRestored:0,errors:[]};if(r&&t.data.bookmarks.length>0)if(s||await ll.bookmarks.clear(),s){const r=await ll.bookmarks.toArray(),n=new Map(r.map(t=>[t.id,t]));for(const r of t.data.bookmarks){const t=n.get(r.id);if(t){const n=t.lastChecked||0;(r.lastChecked||0)>n&&(await ll.bookmarks.put(r),e.bookmarksRestored++)}else await ll.bookmarks.put(r),e.bookmarksRestored++}}else await ll.bookmarks.bulkPut(t.data.bookmarks),e.bookmarksRestored=t.data.bookmarks.length;return n&&t.data.settings&&t.data.settings.length>0&&(s||await ll.settings.clear(),await ll.settings.bulkPut(t.data.settings),e.settingsRestored=t.data.settings.length),i&&t.data.events&&t.data.events.length>0&&(s||await ll.events.clear(),await ll.events.bulkPut(t.data.events),e.eventsRestored=t.data.events.length),o&&t.data.similarities&&t.data.similarities.length>0&&(s||await ll.similarities.clear(),await ll.similarities.bulkPut(t.data.similarities),e.similaritiesRestored=t.data.similarities.length),await kl(),{success:!0,results:e,backupMetadata:t.metadata}}catch(t){throw console.error("Error restoring from backup:",t),t}}function Hl(t){const e=[];if(!t)return{valid:!1,issues:["Backup is empty or null"]};if(t.version||e.push("Missing version field"),t.data){if(t.data.bookmarks&&Array.isArray(t.data.bookmarks)||e.push("Missing or invalid bookmarks array"),t.data.bookmarks&&t.data.bookmarks.length>0){const r=t.data.bookmarks[0];r.id&&r.url||e.push("Bookmarks are missing required fields (id, url)")}}else e.push("Missing data field");return{valid:0===e.length,issues:e,metadata:t.metadata||null,version:t.version||"unknown",createdAt:t.createdAt||"unknown"}}async function Vl(){try{const t=await Fl();let e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];return e.unshift({createdAt:t.createdAt,metadata:t.metadata,data:t.data}),e.length>3&&(e=e.slice(0,3)),await chrome.storage.local.set({autoBackups:e}),console.log("Auto-backup created:",t.metadata),{success:!0,metadata:t.metadata}}catch(t){return console.error("Error creating auto-backup:",t),{success:!1,error:t.message}}}async function ql(){try{const t=await chrome.storage.local.get(["autoBackups"]);return(t.autoBackups||[]).map((t,e)=>({index:e,createdAt:t.createdAt,metadata:t.metadata}))}catch(t){return console.error("Error listing auto-backups:",t),[]}}async function Ul(t=0){try{const e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];if(t<0||t>=e.length)throw new Error(`Invalid backup index: ${t}. Available: 0-${e.length-1}`);const r={version:"2.1",...e[t]};return await Wl(r)}catch(t){throw console.error("Error restoring from auto-backup:",t),t}}var Kl=Object.freeze({__proto__:null,CACHE_DURATIONS:yl,clearAllMetricCaches:kl,createAutoBackup:Vl,createBackup:Fl,db:ll,deleteBookmark:gl,deleteBookmarks:Rl,downloadBackup:Nl,exportBookmarks:Ll,findDuplicates:Al,findMalformedUrls:Tl,findUncategorizedBookmarks:Dl,getActivityTimeline:pl,getAllBookmarks:ul,getBookmarkAgeDistribution:Cl,getBookmarkCreationPatterns:Ml,getCache:bl,getCachedMetric:xl,getConsolidatedDomainAnalytics:wl,getDeadLinks:Il,getDomainDistribution:zl,getDomainStats:fl,getDomainsByCount:Ol,getDomainsByRecency:El,getQuickStats:Pl,getSettings:dl,getTitlePatterns:Bl,getTitleWordFrequency:Sl,getUniqueFolders:_l,getUrlParameterUsage:$l,getUrlPatterns:jl,invalidateMetricCaches:vl,listAutoBackups:ql,restoreFromAutoBackup:Ul,restoreFromBackup:Wl,setCache:ml,upsertBookmark:hl,validateBackup:Hl});const Yl=(()=>{const{subscribe:t,set:e,update:r}=Xa({total:0,enriched:0,pending:0,deadLinks:0,duplicates:0,uniqueDomains:0,addedThisWeek:0,addedThisMonth:0,lastUpdated:null,loading:!0});let n=null;return{subscribe:t,async refresh(){try{const t=await ul(),r=Date.now(),n=6048e5,i=2592e6,o=t.length,s=t.filter(t=>t.lastChecked).length,a=t.filter(t=>!1===t.isAlive).length,l=new Set(t.map(t=>t.domain).filter(t=>t)).size,c=t.filter(t=>r-t.dateAdded<n).length,d=t.filter(t=>r-t.dateAdded<i).length,u=await xl("quickDuplicateCount",async()=>{const e=new Map;return t.forEach(t=>{const r=t.url.toLowerCase().replace(/\/$/,"");e.has(r)||e.set(r,0),e.set(r,e.get(r)+1)}),Array.from(e.values()).filter(t=>t>1).length},yl.quickStats);e({total:o,enriched:s,pending:o-s,deadLinks:a,duplicates:u,uniqueDomains:l,addedThisWeek:c,addedThisMonth:d,lastUpdated:Date.now(),loading:!1})}catch(t){console.error("Error refreshing stats:",t),r(t=>({...t,loading:!1}))}},startAutoRefresh(t=3e4){if(this.refresh(),!n){n=setInterval(()=>{"undefined"!=typeof document&&"visible"===document.visibilityState&&this.refresh()},t),console.log("Stats auto-refresh started (visibility-aware)")}},stopAutoRefresh(){n&&(clearInterval(n),n=null,console.log("Stats auto-refresh stopped"))}}})();Ga(Yl,t=>0===t.total?0:Math.round(t.enriched/t.total*100)),Ga(Yl,t=>t.pending);const Ql=function(){const{subscribe:t,set:e,update:r}=Xa([]);let n=0,i=null;return{subscribe:t,set:e,getCached:async(r=3e4)=>{const o=Date.now();let s=[];if(t(t=>{s=t})(),s.length>0&&o-n<r)return s;if(i){const t=await i;return null!==t?t:s}i=(async()=>{try{const t=await ul();return e(t),n=Date.now(),t}catch(t){return console.error("Error fetching bookmarks:",t),null}finally{i=null}})();const a=await i;return null!==a?a:s},refresh:async()=>{i=(async()=>{try{const t=await ul();return e(t),n=Date.now(),t}catch(t){return console.error("Error refreshing bookmarks:",t),null}finally{i=null}})();const t=await i;return null!==t?t:[]},invalidate:()=>{n=0}}}();const Jl=function(){const{subscribe:t,set:e,update:r}=Xa({domains:[],folders:[],topics:[],types:[],creators:[],tags:[],deadLinks:!1,stale:!1,dateRange:null,readingTimeRange:null,qualityScoreRange:null,hasPublishedDate:null});return{subscribe:t,set:e,addFilter:(t,e)=>r(r=>{if(!Array.isArray(r[t]))return"boolean"==typeof r[t]?{...r,[t]:e}:{...r,[t]:e};if("creators"===t){if(!r.creators.find(t=>t.key===e.key))return{...r,creators:[...r.creators,e]}}else{const n=String(e).toLowerCase();if(!r[t].some(t=>String(t).toLowerCase()===n))return{...r,[t]:[...r[t],e]}}return r}),removeFilter:(t,e)=>r(r=>{if(Array.isArray(r[t])){if("creators"===t)return{...r,creators:r.creators.filter(t=>t.key!==e.key)};const n=String(e).toLowerCase();return{...r,[t]:r[t].filter(t=>String(t).toLowerCase()!==n)}}return"boolean"==typeof r[t]?{...r,[t]:!1}:{...r,[t]:null}}),toggleFilter:(t,e)=>r(r=>{if(Array.isArray(r[t])){if("creators"===t){return r.creators.find(t=>t.key===e.key)?{...r,creators:r.creators.filter(t=>t.key!==e.key)}:{...r,creators:[...r.creators,e]}}const n=String(e).toLowerCase(),i=r[t].findIndex(t=>String(t).toLowerCase()===n);return-1!==i?{...r,[t]:r[t].filter((t,e)=>e!==i)}:{...r,[t]:[...r[t],e]}}return"boolean"==typeof r[t]?{...r,[t]:!r[t]}:r}),setFilter:(t,e)=>r(r=>({...r,[t]:e})),clearFilters:()=>e({domains:[],folders:[],topics:[],types:[],creators:[],tags:[],deadLinks:!1,stale:!1,dateRange:null,readingTimeRange:null,qualityScoreRange:null,hasPublishedDate:null}),reset:()=>e({domains:[],folders:[],topics:[],types:[],creators:[],tags:[],deadLinks:!1,stale:!1,dateRange:null,readingTimeRange:null,qualityScoreRange:null,hasPublishedDate:null})}}(),Xl=Xa("");const Gl=function(){const{subscribe:t,set:e,update:r}=Xa(new Set);return{subscribe:t,set:e,toggle:t=>r(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r}),add:t=>r(e=>{const r=new Set(e);return r.add(t),r}),remove:t=>r(e=>{const r=new Set(e);return r.delete(t),r}),selectAll:t=>e(new Set(t)),clear:()=>e(new Set)}}();function Zl(t,e,r){const n=t.slice();return n[11]=e[r],n}function tc(t,e,r){const n=t.slice();return n[14]=e[r],n}function ec(t){const e=t.slice(),r=e[0].contentQualityScore>=70?"text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/40":e[0].contentQualityScore>=40?"text-yellow-700 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/40":"text-orange-700 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/40";return e[17]=r,e}function rc(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',A(e,"class","text-red-500 dark:text-red-400"),A(e,"title","Dead link")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function nc(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',A(e,"class","text-green-500 dark:text-green-400"),A(e,"title","Enriched with metadata")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function ic(t){let e,r,n,i,o;return{c(){e=v("span"),r=k("svg"),n=k("path"),i=k("path"),A(n,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),A(i,"fill-rule","evenodd"),A(i,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),A(i,"clip-rule","evenodd"),A(r,"class","w-3.5 h-3.5"),A(r,"fill","currentColor"),A(r,"viewBox","0 0 20 20"),A(e,"class","text-blue-500 dark:text-blue-400 text-xs"),A(e,"title",o="Accessed "+t[0].accessCount+" times")},m(t,o){b(t,e,o),m(e,r),m(r,n),m(r,i)},p(t,r){1&r&&o!==(o="Accessed "+t[0].accessCount+" times")&&A(e,"title",o)},d(t){t&&y(e)}}}function oc(t){let e,r,n,i,o=t[0].category+"";return{c(){e=v("span"),r=w(" "),n=w(o),A(e,"class","text-xs text-purple-600 dark:text-purple-400 bg-purple-50 dark:bg-purple-900/40 px-2 py-0.5 rounded"),A(e,"title",i="Category: "+t[0].category)},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,r){1&r&&o!==(o=t[0].category+"")&&T(n,o),1&r&&i!==(i="Category: "+t[0].category)&&A(e,"title",i)},d(t){t&&y(e)}}}function sc(t){let e,r,n=Qa(t[0].description,t[1])+"";return{c(){e=v("p"),A(e,"class","text-xs text-gray-500 dark:text-gray-400 mt-2 line-clamp-2 w-full"),A(e,"title",r=t[0].description)},m(t,r){b(t,e,r),e.innerHTML=n},p(t,i){3&i&&n!==(n=Qa(t[0].description,t[1])+"")&&(e.innerHTML=n),1&i&&r!==(r=t[0].description)&&A(e,"title",r)},d(t){t&&y(e)}}}function ac(t){let e,r,n,i=t[0].readingTime&&lc(t),o=t[0].publishedDate&&cc(t),s=t[0].contentQualityScore&&dc(ec(t));return{c(){e=v("div"),i&&i.c(),r=_(),o&&o.c(),n=_(),s&&s.c(),A(e,"class","flex items-center gap-2 mt-2 flex-wrap")},m(t,a){b(t,e,a),i&&i.m(e,null),m(e,r),o&&o.m(e,null),m(e,n),s&&s.m(e,null)},p(t,a){t[0].readingTime?i?i.p(t,a):(i=lc(t),i.c(),i.m(e,r)):i&&(i.d(1),i=null),t[0].publishedDate?o?o.p(t,a):(o=cc(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),t[0].contentQualityScore?s?s.p(ec(t),a):(s=dc(ec(t)),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&y(e),i&&i.d(),o&&o.d(),s&&s.d()}}}function lc(t){let e,r,n,i,o=t[0].readingTime+"";return{c(){e=v("span"),r=w(" "),n=w(o),i=w(" min"),A(e,"class","text-xs text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700 px-2 py-0.5 rounded flex items-center gap-1"),A(e,"title","Estimated reading time")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i)},p(t,e){1&e&&o!==(o=t[0].readingTime+"")&&T(n,o)},d(t){t&&y(e)}}}function cc(t){let e,r,n,i=Wa(t[0].publishedDate)+"";return{c(){e=v("span"),r=w(" "),n=w(i),A(e,"class","text-xs text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700 px-2 py-0.5 rounded flex items-center gap-1"),A(e,"title","Published date")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){1&e&&i!==(i=Wa(t[0].publishedDate)+"")&&T(n,i)},d(t){t&&y(e)}}}function dc(t){let e,r,n,i,o=t[0].contentQualityScore+"";return{c(){e=v("span"),r=w(" "),n=w(o),A(e,"class",i="text-xs px-2 py-0.5 rounded flex items-center gap-1 "+t[17]+" svelte-1oo2sed"),A(e,"title","Content quality score")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,r){1&r&&o!==(o=t[0].contentQualityScore+"")&&T(n,o),1&r&&i!==(i="text-xs px-2 py-0.5 rounded flex items-center gap-1 "+t[17]+" svelte-1oo2sed")&&A(e,"class",i)},d(t){t&&y(e)}}}function uc(t){let e,r,n=it(t[0].smartTags.slice(0,5)),i=[];for(let e=0;e<n.length;e+=1)i[e]=hc(tc(t,n,e));let o=t[0].smartTags.length>5&&gc(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();r=_(),o&&o.c(),A(e,"class","flex items-center gap-1 mt-2 flex-wrap")},m(t,n){b(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,r),o&&o.m(e,null)},p(t,s){if(1&s){let o;for(n=it(t[0].smartTags.slice(0,5)),o=0;o<n.length;o+=1){const a=tc(t,n,o);i[o]?i[o].p(a,s):(i[o]=hc(a),i[o].c(),i[o].m(e,r))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}t[0].smartTags.length>5?o?o.p(t,s):(o=gc(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&y(e),x(i,t),o&&o.d()}}}function hc(t){let e,r,n=t[14]+"";return{c(){e=v("span"),r=w(n),A(e,"class","text-xs text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/40 px-1.5 py-0.5 rounded"),A(e,"title","Smart tag")},m(t,n){b(t,e,n),m(e,r)},p(t,e){1&e&&n!==(n=t[14]+"")&&T(r,n)},d(t){t&&y(e)}}}function gc(t){let e,r,n,i,o=t[0].smartTags.length-5+"";return{c(){e=v("span"),r=w("+"),n=w(o),i=w(" more"),A(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i)},p(t,e){1&e&&o!==(o=t[0].smartTags.length-5+"")&&T(n,o)},d(t){t&&y(e)}}}function fc(t){let e,r,n=it(t[0].topics.slice(0,4)),i=[];for(let e=0;e<n.length;e+=1)i[e]=pc(Zl(t,n,e));let o=t[0].topics.length>4&&mc(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();r=_(),o&&o.c(),A(e,"class","flex items-center gap-1 mt-2 flex-wrap")},m(t,n){b(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,r),o&&o.m(e,null)},p(t,s){if(1&s){let o;for(n=it(t[0].topics.slice(0,4)),o=0;o<n.length;o+=1){const a=Zl(t,n,o);i[o]?i[o].p(a,s):(i[o]=pc(a),i[o].c(),i[o].m(e,r))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}t[0].topics.length>4?o?o.p(t,s):(o=mc(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&y(e),x(i,t),o&&o.d()}}}function pc(t){let e,r,n,i,o=t[11]+"";return{c(){e=v("span"),r=w(" "),n=w(o),A(e,"class","text-xs text-teal-600 dark:text-teal-400 bg-teal-50 dark:bg-teal-900/40 px-1.5 py-0.5 rounded"),A(e,"title",i="Topic: "+t[11])},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,r){1&r&&o!==(o=t[11]+"")&&T(n,o),1&r&&i!==(i="Topic: "+t[11])&&A(e,"title",i)},d(t){t&&y(e)}}}function mc(t){let e,r,n,i,o=t[0].topics.length-4+"";return{c(){e=v("span"),r=w("+"),n=w(o),i=w(" more"),A(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i)},p(t,e){1&e&&o!==(o=t[0].topics.length-4+"")&&T(n,o)},d(t){t&&y(e)}}}function bc(t){let e,r;return{c(){e=k("svg"),r=k("path"),A(r,"stroke-linecap","round"),A(r,"stroke-linejoin","round"),A(r,"stroke-width","2"),A(r,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),A(e,"class","w-4 h-4"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,n){b(t,e,n),m(e,r)},d(t){t&&y(e)}}}function yc(t){let e,r;return{c(){e=k("svg"),r=k("path"),A(r,"stroke-linecap","round"),A(r,"stroke-linejoin","round"),A(r,"stroke-width","2"),A(r,"d","M5 13l4 4L19 7"),A(e,"class","w-4 h-4 text-green-500 dark:text-green-400"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,n){b(t,e,n),m(e,r)},d(t){t&&y(e)}}}function xc(t){let e,r,n,i,o=t[0].folderPath+"";return{c(){e=v("p"),r=w(" "),n=w(o),A(e,"class","text-xs text-gray-400 dark:text-gray-500 mt-1 truncate"),A(e,"title",i=t[0].folderPath)},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,r){1&r&&o!==(o=t[0].folderPath+"")&&T(n,o),1&r&&i!==(i=t[0].folderPath)&&A(e,"title",i)},d(t){t&&y(e)}}}function vc(e){let r,i,o,s,l,c,d,u,h,g,f,p,x,k,C,S,D,P,L,E,O,B,j,$,z,I,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z,tt=Qa(e[0].title,e[1])+"",et=Qa(e[0].url,e[1])+"",rt=qa(e[0])+"",nt=Wa(e[0].dateAdded)+"",it=!1===e[0].isAlive&&rc(),ot=(e[0].description||e[0].keywords&&e[0].keywords.length>0)&&nc(),st=e[0].accessCount>0&&ic(e),at=e[0].category&&oc(e),lt=e[0].description&&sc(e),ct=(e[0].readingTime||e[0].publishedDate||e[0].contentQualityScore)&&ac(e),dt=e[0].smartTags&&e[0].smartTags.length>0&&uc(e),ut=e[0].topics&&e[0].topics.length>0&&fc(e);function ht(t,e){return t[3]?yc:bc}let gt=ht(e),ft=gt(e),pt=e[0].folderPath&&xc(e);return{c(){r=v("div"),i=v("div"),o=v("input"),l=_(),c=v("div"),d=v("img"),h=_(),g=v("div"),f=v("div"),p=v("h3"),k=_(),C=v("div"),it&&it.c(),S=_(),ot&&ot.c(),D=_(),st&&st.c(),P=_(),L=v("p"),O=_(),B=v("div"),j=v("div"),$=v("span"),z=w(rt),I=_(),at&&at.c(),F=_(),lt&&lt.c(),N=_(),ct&&ct.c(),W=_(),dt&&dt.c(),H=_(),ut&&ut.c(),V=_(),q=v("div"),U=v("button"),ft.c(),K=_(),Y=v("span"),Q=w(nt),J=_(),pt&&pt.c(),A(o,"type","checkbox"),o.checked=s=e[2].has(e[0].id),A(o,"class","w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 cursor-pointer"),A(i,"class","absolute top-2 right-2 z-10"),R(i,"opacity-0",!e[2].has(e[0].id)),R(i,"group-hover:opacity-100",!0),a(d.src,u=Va(e[0]))||A(d,"src",u),A(d,"alt","Favicon"),A(d,"class","w-4 h-4 mt-1 flex-shrink-0"),A(p,"class","text-sm font-medium text-gray-900 dark:text-gray-100 truncate flex-1"),A(p,"title",x=e[0].title),A(C,"class","flex items-center gap-1 flex-shrink-0"),A(f,"class","flex items-center gap-1.5"),A(L,"class","text-xs text-gray-500 dark:text-gray-400 truncate mt-1 max-w-full"),A(L,"title",E=e[0].url),A($,"class","text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/40 px-2 py-1 rounded"),A(j,"class","flex items-center gap-1.5"),A(U,"class","p-1 text-gray-400 dark:text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"),A(U,"title","Copy URL"),A(Y,"class","text-xs text-gray-400 dark:text-gray-500"),A(q,"class","flex items-center space-x-2"),A(B,"class","flex items-center justify-between mt-2 gap-2 flex-wrap"),A(g,"class","flex-1 min-w-0"),A(c,"class","flex items-start space-x-3"),A(r,"class",X="bookmark-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 dark:border-gray-700 relative group "+e[5]+" "+e[4]+" svelte-1oo2sed"),A(r,"role","button"),A(r,"tabindex","0")},m(t,n){b(t,r,n),m(r,i),m(i,o),m(r,l),m(r,c),m(c,d),m(c,h),m(c,g),m(g,f),m(f,p),p.innerHTML=tt,m(f,k),m(f,C),it&&it.m(C,null),m(C,S),ot&&ot.m(C,null),m(C,D),st&&st.m(C,null),m(g,P),m(g,L),L.innerHTML=et,m(g,O),m(g,B),m(B,j),m(j,$),m($,z),m(j,I),at&&at.m(j,null),m(B,F),lt&&lt.m(B,null),m(B,N),ct&&ct.m(B,null),m(B,W),dt&&dt.m(B,null),m(B,H),ut&&ut.m(B,null),m(B,V),m(B,q),m(q,U),ft.m(U,null),m(q,K),m(q,Y),m(Y,Q),m(g,J),pt&&pt.m(g,null),G||(Z=[M(o,"click",e[8]),M(U,"click",e[7]),M(r,"click",e[6]),M(r,"keydown",e[9])],G=!0)},p(t,[e]){5&e&&s!==(s=t[2].has(t[0].id))&&(o.checked=s),5&e&&R(i,"opacity-0",!t[2].has(t[0].id)),1&e&&!a(d.src,u=Va(t[0]))&&A(d,"src",u),3&e&&tt!==(tt=Qa(t[0].title,t[1])+"")&&(p.innerHTML=tt),1&e&&x!==(x=t[0].title)&&A(p,"title",x),!1===t[0].isAlive?it||(it=rc(),it.c(),it.m(C,S)):it&&(it.d(1),it=null),t[0].description||t[0].keywords&&t[0].keywords.length>0?ot||(ot=nc(),ot.c(),ot.m(C,D)):ot&&(ot.d(1),ot=null),t[0].accessCount>0?st?st.p(t,e):(st=ic(t),st.c(),st.m(C,null)):st&&(st.d(1),st=null),3&e&&et!==(et=Qa(t[0].url,t[1])+"")&&(L.innerHTML=et),1&e&&E!==(E=t[0].url)&&A(L,"title",E),1&e&&rt!==(rt=qa(t[0])+"")&&T(z,rt),t[0].category?at?at.p(t,e):(at=oc(t),at.c(),at.m(j,null)):at&&(at.d(1),at=null),t[0].description?lt?lt.p(t,e):(lt=sc(t),lt.c(),lt.m(B,N)):lt&&(lt.d(1),lt=null),t[0].readingTime||t[0].publishedDate||t[0].contentQualityScore?ct?ct.p(t,e):(ct=ac(t),ct.c(),ct.m(B,W)):ct&&(ct.d(1),ct=null),t[0].smartTags&&t[0].smartTags.length>0?dt?dt.p(t,e):(dt=uc(t),dt.c(),dt.m(B,H)):dt&&(dt.d(1),dt=null),t[0].topics&&t[0].topics.length>0?ut?ut.p(t,e):(ut=fc(t),ut.c(),ut.m(B,V)):ut&&(ut.d(1),ut=null),gt!==(gt=ht(t))&&(ft.d(1),ft=gt(t),ft&&(ft.c(),ft.m(U,null))),1&e&&nt!==(nt=Wa(t[0].dateAdded)+"")&&T(Q,nt),t[0].folderPath?pt?pt.p(t,e):(pt=xc(t),pt.c(),pt.m(g,null)):pt&&(pt.d(1),pt=null),48&e&&X!==(X="bookmark-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 dark:border-gray-700 relative group "+t[5]+" "+t[4]+" svelte-1oo2sed")&&A(r,"class",X)},i:t,o:t,d(t){t&&y(r),it&&it.d(),ot&&ot.d(),st&&st.d(),at&&at.d(),lt&&lt.d(),ct&&ct.d(),dt&&dt.d(),ut&&ut.d(),ft.d(),pt&&pt.d(),G=!1,n(Z)}}}function kc(t,e,r){let n,i,o;c(t,Gl,t=>r(2,o=t));let{bookmark:s}=e,{parsedSearchQuery:a=null}=e;I();let l=!1;function d(t){const e=!(t&&(t.shiftKey||t.metaKey||t.ctrlKey));!function(t,e=!0){chrome.tabs.create({url:t,active:e})}(s.url,e)}return t.$$set=t=>{"bookmark"in t&&r(0,s=t.bookmark),"parsedSearchQuery"in t&&r(1,a=t.parsedSearchQuery)},t.$$.update=()=>{1&t.$$.dirty&&r(5,n=!1===s.isAlive?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":""),5&t.$$.dirty&&r(4,i=o.has(s.id)?"ring-2 ring-blue-500":"")},[s,a,o,l,i,n,d,async function(t){t.stopPropagation(),await Ua(s.url)&&(r(3,l=!0),setTimeout(()=>r(3,l=!1),2e3))},function(t){t.stopPropagation(),Gl.toggle(s.id)},t=>"Enter"===t.key&&d(t)]}class wc extends ht{constructor(t){super(),ut(this,t,kc,vc,o,{bookmark:0,parsedSearchQuery:1})}}function _c(t){let e,r,n,i;return{c(){e=v("input"),A(e,"type","checkbox"),e.checked=r=t[4].has(t[0].id),A(e,"class","mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 dark:bg-gray-700 rounded")},m(r,o){b(r,e,o),n||(i=M(e,"change",t[7]),n=!0)},p(t,n){17&n&&r!==(r=t[4].has(t[0].id))&&(e.checked=r)},d(t){t&&y(e),n=!1,i()}}}function Cc(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',A(e,"class","text-red-500 dark:text-red-400"),A(e,"title","Dead link")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Mc(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',A(e,"class","text-green-500 dark:text-green-400"),A(e,"title","Enriched with metadata")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Sc(t){let e,r,n,i,o;return{c(){e=v("span"),r=k("svg"),n=k("path"),i=k("path"),A(n,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),A(i,"fill-rule","evenodd"),A(i,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),A(i,"clip-rule","evenodd"),A(r,"class","w-3.5 h-3.5"),A(r,"fill","currentColor"),A(r,"viewBox","0 0 20 20"),A(e,"class","text-blue-500 dark:text-blue-400 text-xs"),A(e,"title",o="Accessed "+t[0].accessCount+" times")},m(t,o){b(t,e,o),m(e,r),m(r,n),m(r,i)},p(t,r){1&r&&o!==(o="Accessed "+t[0].accessCount+" times")&&A(e,"title",o)},d(t){t&&y(e)}}}function Ac(t){let e,r,n,i,o,s,a=t[0].readingTime+"";return{c(){e=v("span"),e.textContent="|",r=_(),n=v("span"),i=w(" "),o=w(a),s=w("m"),A(e,"class","text-gray-300 dark:text-gray-600"),A(n,"class","text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700 px-1.5 py-0.5 rounded"),A(n,"title","Estimated reading time")},m(t,a){b(t,e,a),b(t,r,a),b(t,n,a),m(n,i),m(n,o),m(n,s)},p(t,e){1&e&&a!==(a=t[0].readingTime+"")&&T(o,a)},d(t){t&&(y(e),y(r),y(n))}}}function Dc(t){let e,r;return{c(){e=k("svg"),r=k("path"),A(r,"stroke-linecap","round"),A(r,"stroke-linejoin","round"),A(r,"stroke-width","2"),A(r,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),A(e,"class","w-4 h-4"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,n){b(t,e,n),m(e,r)},d(t){t&&y(e)}}}function Tc(t){let e,r;return{c(){e=k("svg"),r=k("path"),A(r,"stroke-linecap","round"),A(r,"stroke-linejoin","round"),A(r,"stroke-width","2"),A(r,"d","M5 13l4 4L19 7"),A(e,"class","w-4 h-4 text-green-500 dark:text-green-400"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,n){b(t,e,n),m(e,r)},d(t){t&&y(e)}}}function Pc(e){let r,i,o,s,l,c,d,u,h,g,f,p,x,k,C,D,P,L,E,O,R,B,j,$,z,I,F,N,W,H,V,q,U,K,Y,Q,J=Qa(e[0].title,e[1])+"",X=e[0].url+"",G=Wa(e[0].dateAdded)+"",Z=e[2]&&_c(e),tt=!1===e[0].isAlive&&Cc(),et=(e[0].description||e[0].keywords&&e[0].keywords.length>0)&&Mc(),rt=e[0].accessCount>0&&Sc(e),nt=e[0].readingTime&&Ac(e);function it(t,e){return t[3]?Tc:Dc}let ot=it(e),st=ot(e);return{c(){r=v("div"),i=v("div"),Z&&Z.c(),o=_(),s=v("img"),c=_(),d=v("div"),u=v("div"),h=v("div"),g=v("div"),f=v("h3"),x=_(),k=v("div"),tt&&tt.c(),C=_(),et&&et.c(),D=_(),rt&&rt.c(),P=_(),L=v("div"),E=v("span"),O=w(X),B=_(),nt&&nt.c(),j=_(),$=v("div"),z=v("span"),I=w(G),F=_(),N=v("div"),W=v("button"),W.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',H=_(),V=v("button"),st.c(),q=_(),U=v("button"),U.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',a(s.src,l=Va(e[0]))||A(s,"src",l),A(s,"alt","Favicon"),A(s,"class","w-4 h-4 mr-3 flex-shrink-0"),A(f,"class","text-sm font-medium text-gray-900 dark:text-gray-100 truncate hover:text-blue-600 dark:hover:text-blue-400"),A(f,"title",p=e[0].title),A(k,"class","flex items-center gap-1 flex-shrink-0"),A(g,"class","flex items-center gap-2"),A(E,"class","flex px-1.5 py-0.5 rounded truncate max-w-5xl"),A(E,"title",R=e[0].url),A(L,"class","flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mt-0.5"),A(h,"class","flex-1 min-w-0 flex flex-col"),A(z,"class","text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap hidden sm:block"),A(W,"class","p-1 text-gray-400 dark:text-gray-500 hover:text-purple-600 dark:hover:text-purple-400"),A(W,"title","Enrich metadata now"),A(V,"class","p-1 text-gray-400 dark:text-gray-500 hover:text-blue-600 dark:hover:text-blue-400"),A(V,"title","Copy URL"),A(U,"class","p-1 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400"),A(U,"title","Delete bookmark"),A(N,"class","flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity svelte-83jmfm"),A($,"class","flex items-center gap-3 flex-shrink-0"),A(u,"class","flex items-center justify-between gap-2"),A(d,"class","flex-1 min-w-0 cursor-pointer"),A(d,"role","button"),A(d,"tabindex","0"),A(i,"class","flex items-center px-3 py-2"),A(r,"class",K="bookmark-list-item group bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors "+(e[4].has(e[0].id)?"selected":"")+" "+(!1===e[0].isAlive?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-900/40":"")+" svelte-83jmfm")},m(t,n){b(t,r,n),m(r,i),Z&&Z.m(i,null),m(i,o),m(i,s),m(i,c),m(i,d),m(d,u),m(u,h),m(h,g),m(g,f),f.innerHTML=J,m(g,x),m(g,k),tt&&tt.m(k,null),m(k,C),et&&et.m(k,null),m(k,D),rt&&rt.m(k,null),m(h,P),m(h,L),m(L,E),m(E,O),m(L,B),nt&&nt.m(L,null),m(u,j),m(u,$),m($,z),m(z,I),m($,F),m($,N),m(N,W),m(N,H),m(N,V),st.m(V,null),m(N,q),m(N,U),Y||(Q=[M(s,"error",e[6]),M(W,"click",S(e[11])),M(V,"click",e[10]),M(U,"click",e[9]),M(d,"click",e[8]),M(d,"keydown",e[12])],Y=!0)},p(t,[e]){t[2]?Z?Z.p(t,e):(Z=_c(t),Z.c(),Z.m(i,o)):Z&&(Z.d(1),Z=null),1&e&&!a(s.src,l=Va(t[0]))&&A(s,"src",l),3&e&&J!==(J=Qa(t[0].title,t[1])+"")&&(f.innerHTML=J),1&e&&p!==(p=t[0].title)&&A(f,"title",p),!1===t[0].isAlive?tt||(tt=Cc(),tt.c(),tt.m(k,C)):tt&&(tt.d(1),tt=null),t[0].description||t[0].keywords&&t[0].keywords.length>0?et||(et=Mc(),et.c(),et.m(k,D)):et&&(et.d(1),et=null),t[0].accessCount>0?rt?rt.p(t,e):(rt=Sc(t),rt.c(),rt.m(k,null)):rt&&(rt.d(1),rt=null),1&e&&X!==(X=t[0].url+"")&&T(O,X),1&e&&R!==(R=t[0].url)&&A(E,"title",R),t[0].readingTime?nt?nt.p(t,e):(nt=Ac(t),nt.c(),nt.m(L,null)):nt&&(nt.d(1),nt=null),1&e&&G!==(G=Wa(t[0].dateAdded)+"")&&T(I,G),ot!==(ot=it(t))&&(st.d(1),st=ot(t),st&&(st.c(),st.m(V,null))),17&e&&K!==(K="bookmark-list-item group bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors "+(t[4].has(t[0].id)?"selected":"")+" "+(!1===t[0].isAlive?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-900/40":"")+" svelte-83jmfm")&&A(r,"class",K)},i:t,o:t,d(t){t&&y(r),Z&&Z.d(),tt&&tt.d(),et&&et.d(),rt&&rt.d(),nt&&nt.d(),st.d(),Y=!1,n(Q)}}}function Lc(t,e,r){let n;c(t,Gl,t=>r(4,n=t));let{bookmark:i}=e,{parsedSearchQuery:o=null}=e,{multiSelectMode:s=!1}=e;const a=I();let l=!1;function d(t){const e=!(t&&(t.shiftKey||t.metaKey||t.ctrlKey));!function(t,e=!0){chrome.tabs.create({url:t,active:e})}(i.url,e)}return t.$$set=t=>{"bookmark"in t&&r(0,i=t.bookmark),"parsedSearchQuery"in t&&r(1,o=t.parsedSearchQuery),"multiSelectMode"in t&&r(2,s=t.multiSelectMode)},[i,o,s,l,n,a,function(t){t.target.src=Ha(i)},function(t){Gl.toggle(i.id)},d,function(t){t.stopPropagation(),a("delete",{bookmarkId:i.id})},async function(t){t.stopPropagation(),await Ua(i.url)&&(r(3,l=!0),setTimeout(()=>r(3,l=!1),2e3))},()=>a("enrich",{bookmarkId:i.id}),t=>"Enter"===t.key&&d(t)]}class Ec extends ht{constructor(t){super(),ut(this,t,Lc,Pc,o,{bookmark:0,parsedSearchQuery:1,multiSelectMode:2})}}function Oc(t,e,r){const n=t.slice();return n[13]=e[r],n}function Rc(t,e,r){const n=t.slice();return n[16]=e[r],n}function Bc(t,e,r){const n=t.slice();return n[19]=e[r],n}function jc(t,e,r){const n=t.slice();return n[19]=e[r],n}function $c(e){let r,n,i;return{c(){r=v("button"),r.innerHTML='<svg class="h-5 w-5 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',A(r,"class","absolute inset-y-0 right-0 pr-3 flex items-center"),A(r,"type","button"),A(r,"title","Clear search (Esc)")},m(t,o){b(t,r,o),n||(i=M(r,"click",e[7]),n=!0)},p:t,d(t){t&&y(r),n=!1,i()}}}function zc(t){let e,r,n,i,o=it(t[4].positive),s=[];for(let e=0;e<o.length;e+=1)s[e]=Ic(jc(t,o,e));let a=it(t[4].negative),l=[];for(let e=0;e<a.length;e+=1)l[e]=Fc(Bc(t,a,e));let c=it(t[4].phrases),d=[];for(let e=0;e<c.length;e+=1)d[e]=Nc(Rc(t,c,e));let u=it(t[4].regexPatterns),h=[];for(let e=0;e<u.length;e+=1)h[e]=Wc(Oc(t,u,e));return{c(){e=v("div");for(let t=0;t<s.length;t+=1)s[t].c();r=_();for(let t=0;t<l.length;t+=1)l[t].c();n=_();for(let t=0;t<d.length;t+=1)d[t].c();i=_();for(let t=0;t<h.length;t+=1)h[t].c();A(e,"class","flex flex-wrap gap-1.5 mt-2")},m(t,o){b(t,e,o);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);m(e,r);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);m(e,n);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(e,null);m(e,i);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null)},p(t,g){if(16&g){let n;for(o=it(t[4].positive),n=0;n<o.length;n+=1){const i=jc(t,o,n);s[n]?s[n].p(i,g):(s[n]=Ic(i),s[n].c(),s[n].m(e,r))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}if(16&g){let r;for(a=it(t[4].negative),r=0;r<a.length;r+=1){const i=Bc(t,a,r);l[r]?l[r].p(i,g):(l[r]=Fc(i),l[r].c(),l[r].m(e,n))}for(;r<l.length;r+=1)l[r].d(1);l.length=a.length}if(16&g){let r;for(c=it(t[4].phrases),r=0;r<c.length;r+=1){const n=Rc(t,c,r);d[r]?d[r].p(n,g):(d[r]=Nc(n),d[r].c(),d[r].m(e,i))}for(;r<d.length;r+=1)d[r].d(1);d.length=c.length}if(16&g){let r;for(u=it(t[4].regexPatterns),r=0;r<u.length;r+=1){const n=Oc(t,u,r);h[r]?h[r].p(n,g):(h[r]=Wc(n),h[r].c(),h[r].m(e,null))}for(;r<h.length;r+=1)h[r].d(1);h.length=u.length}},d(t){t&&y(e),x(s,t),x(l,t),x(d,t),x(h,t)}}}function Ic(t){let e,r,n,i,o,s=t[19]+"";return{c(){e=v("span"),r=k("svg"),n=k("path"),i=_(),o=w(s),A(n,"fill-rule","evenodd"),A(n,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),A(n,"clip-rule","evenodd"),A(r,"class","w-3 h-3 mr-1"),A(r,"fill","currentColor"),A(r,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300")},m(t,s){b(t,e,s),m(e,r),m(r,n),m(e,i),m(e,o)},p(t,e){16&e&&s!==(s=t[19]+"")&&T(o,s)},d(t){t&&y(e)}}}function Fc(t){let e,r,n,i,o,s=t[19]+"";return{c(){e=v("span"),r=k("svg"),n=k("path"),i=_(),o=w(s),A(n,"fill-rule","evenodd"),A(n,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),A(n,"clip-rule","evenodd"),A(r,"class","w-3 h-3 mr-1"),A(r,"fill","currentColor"),A(r,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300")},m(t,s){b(t,e,s),m(e,r),m(r,n),m(e,i),m(e,o)},p(t,e){16&e&&s!==(s=t[19]+"")&&T(o,s)},d(t){t&&y(e)}}}function Nc(t){let e,r,n,i,o,s,a=t[16]+"";return{c(){e=v("span"),r=k("svg"),n=k("path"),i=w('\n          "'),o=w(a),s=w('"'),A(n,"fill-rule","evenodd"),A(n,"d","M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z"),A(n,"clip-rule","evenodd"),A(r,"class","w-3 h-3 mr-1"),A(r,"fill","currentColor"),A(r,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300")},m(t,a){b(t,e,a),m(e,r),m(r,n),m(e,i),m(e,o),m(e,s)},p(t,e){16&e&&a!==(a=t[16]+"")&&T(o,a)},d(t){t&&y(e)}}}function Wc(t){let e,r,n,i,o,s,a=t[13]+"";return{c(){e=v("span"),r=k("svg"),n=k("path"),i=_(),o=w(a),s=_(),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M10 20l4-16m4 4l-4 4 4 4M6 16l-4-4 4-4"),A(r,"class","w-3 h-3 mr-1"),A(r,"fill","none"),A(r,"stroke","currentColor"),A(r,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300")},m(t,a){b(t,e,a),m(e,r),m(r,n),m(e,i),m(e,o),m(e,s)},p(t,e){16&e&&a!==(a=t[13]+"")&&T(o,a)},d(t){t&&y(e)}}}function Hc(t){let e;return{c(){e=v("div"),e.innerHTML='<h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"><svg class="w-4 h-4 text-blue-500 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>\n        Search Syntax</h4> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300 rounded text-xs whitespace-nowrap">+term</code> <span class="text-gray-600 dark:text-gray-400">Must include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 dark:bg-red-900/40 text-red-800 dark:text-red-300 rounded text-xs whitespace-nowrap">-term</code> <span class="text-gray-600 dark:text-gray-400">Must NOT include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300 rounded text-xs whitespace-nowrap">&quot;exact phrase&quot;</code> <span class="text-gray-600 dark:text-gray-400">Match exact phrase</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs whitespace-nowrap">word</code> <span class="text-gray-600 dark:text-gray-400">Regular search term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300 rounded text-xs whitespace-nowrap">/regex/</code> <span class="text-gray-600">Regular expression pattern</span></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><svg class="w-4 h-4 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>\n          Special Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">category:tech</code> <span class="text-gray-600"> Filter by category</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">domain:github.com</code> <span class="text-gray-600"> Filter by domain</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">folder:&quot;Work/Projects&quot;</code> <span class="text-gray-600"> Filter by folder path</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">accessed:yes</code> <span class="text-gray-600"> Has been accessed (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">stale:yes</code> <span class="text-gray-600"> Old &amp; never accessed</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-teal-100 text-teal-800 rounded text-xs whitespace-nowrap">enriched:yes</code> <span class="text-gray-600"> Has metadata (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-700 rounded text-xs whitespace-nowrap">dead:yes</code> <span class="text-gray-600"> Dead links (yes/no)</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><span class="text-lg"></span>\n          Platform Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">platform:youtube</code> <span class="text-gray-600"> Filter by platform (youtube, github, medium, etc.)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">channel:@mkbhd</code> <span class="text-gray-600"> YouTube channel (with or without @)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">repo:facebook/react</code> <span class="text-gray-600"> GitHub repository (owner/repo)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">author:username</code> <span class="text-gray-600"> Blog/article author</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">type:video</code> <span class="text-gray-600"> Content type (video, issue, article, repo, pr)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">hasimage:yes</code> <span class="text-gray-600"> Has thumbnail image (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">playlist:PLxxx</code> <span class="text-gray-600"> YouTube playlist ID</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><p class="text-xs text-gray-500"><strong>Example:</strong> <code class="bg-gray-100 px-1 rounded">javascript +tutorial -video &quot;best practices&quot;</code></p> <p class="text-xs text-gray-500 mt-1"><strong>With filters:</strong> <code class="bg-gray-100 px-1 rounded">domain:github.com category:development enriched:yes</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Platform:</strong> <code class="bg-gray-100 px-1 rounded">platform:youtube channel:@fireship type:video</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Regex:</strong> <code class="bg-gray-100 px-1 rounded">/react.*hooks?/</code></p></div>',A(e,"class","absolute z-20 w-full mt-2 p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg max-h-[70vh] overflow-y-auto")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Vc(e){let r,i,o,s,a,l,c,d,u,h,g,f,p,x=e[0]&&$c(e),k=e[0]&&(e[4].positive.length>0||e[4].negative.length>0||e[4].phrases.length>0||e[4].regexPatterns.length>0)&&zc(e),w=e[3]&&Hc();return{c(){r=v("div"),i=v("div"),o=v("div"),s=v("div"),s.innerHTML='<svg class="h-5 w-5 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',a=_(),l=v("input"),c=_(),x&&x.c(),d=_(),u=v("button"),u.innerHTML='<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',h=_(),k&&k.c(),g=_(),w&&w.c(),A(s,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),A(l,"type","text"),A(l,"placeholder",e[1]),A(l,"class","block w-full pl-10 pr-10 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg leading-5 bg-white dark:bg-gray-800 placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"),A(l,"autocomplete","off"),A(l,"spellcheck","false"),A(o,"class","relative flex-1"),A(u,"class","p-2.5 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg border border-gray-300 dark:border-gray-600 transition-colors"),A(u,"type","button"),A(u,"title","Search help"),A(i,"class","flex items-center gap-2"),A(r,"class","relative mb-4 search-container")},m(t,n){b(t,r,n),m(r,i),m(i,o),m(o,s),m(o,a),m(o,l),e[9](l),P(l,e[0]),m(o,c),x&&x.m(o,null),m(i,d),m(i,u),m(r,h),k&&k.m(r,null),m(r,g),w&&w.m(r,null),f||(p=[M(l,"input",e[10]),M(l,"input",e[5]),M(l,"focus",qc),M(l,"keydown",e[6]),M(u,"click",e[8])],f=!0)},p(t,[e]){2&e&&A(l,"placeholder",t[1]),1&e&&l.value!==t[0]&&P(l,t[0]),t[0]?x?x.p(t,e):(x=$c(t),x.c(),x.m(o,null)):x&&(x.d(1),x=null),t[0]&&(t[4].positive.length>0||t[4].negative.length>0||t[4].phrases.length>0||t[4].regexPatterns.length>0)?k?k.p(t,e):(k=zc(t),k.c(),k.m(r,g)):k&&(k.d(1),k=null),t[3]?w||(w=Hc(),w.c(),w.m(r,null)):w&&(w.d(1),w=null)},i:t,o:t,d(t){t&&y(r),e[9](null),x&&x.d(),k&&k.d(),w&&w.d(),f=!1,n(p)}}}function qc(){}function Uc(t,e,r){let n;const i=I();let o,s,{value:a=""}=e,{placeholder:l='Search: use +term (must include), -term (exclude), "exact phrase"'}=e,c=!1;function d(){r(0,a=""),i("search",{query:""}),s?.focus()}return z(()=>{}),t.$$set=t=>{"value"in t&&r(0,a=t.value),"placeholder"in t&&r(1,l=t.placeholder)},t.$$.update=()=>{1&t.$$.dirty&&r(4,n=function(t){if(!t)return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[]};const e=[],r=[],n=[],i=[],o=[];(t.match(/\/([^\/]+)\/([gimsuvy]*)?/g)||[]).forEach(t=>o.push(t));let s=t.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();return(s.match(/"([^"]+)"/g)||[]).forEach(t=>n.push(t.slice(1,-1))),s=s.replace(/"[^"]+"/g,"").trim(),s.split(/\s+/).filter(t=>t.length>0).forEach(t=>{t.startsWith("+")&&t.length>1?e.push(t.slice(1)):t.startsWith("-")&&t.length>1?r.push(t.slice(1)):i.push(t)}),{positive:e,negative:r,phrases:n,regular:i,regexPatterns:o}}(a))},[a,l,s,c,n,function(t){r(0,a=t.target.value),clearTimeout(o),o=setTimeout(()=>{i("search",{query:a})},200)},function(t){"Escape"===t.key?d():"Enter"===t.key&&(clearTimeout(o),i("search",{query:a}))},d,function(){r(3,c=!c)},function(t){W[t?"unshift":"push"](()=>{s=t,r(2,s)})},function(){a=this.value,r(0,a)}]}class Kc extends ht{constructor(t){super(),ut(this,t,Uc,Vc,o,{value:0,placeholder:1})}}const Yc={tech:{id:"tech",name:"Technology",icon:"",keywords:["technology","tech","software","hardware","computer","digital","gadget","device","smartphone","laptop","pc","server","cloud","saas","startup","silicon valley","innovation"],domains:["techcrunch.com","theverge.com","arstechnica.com","wired.com","engadget.com","gizmodo.com","cnet.com","zdnet.com","venturebeat.com"],subtopics:{ai:{id:"tech/ai",name:"AI & Machine Learning",keywords:["artificial intelligence","machine learning","deep learning","neural network","nlp","natural language","computer vision","llm","gpt","transformer","reinforcement learning","supervised learning","unsupervised","chatgpt","openai","anthropic","claude","gemini","stable diffusion","midjourney","data science","ml ops","model training","inference","embeddings"],domains:["openai.com","huggingface.co","arxiv.org","paperswithcode.com"]},web3:{id:"tech/web3",name:"Web3 & Blockchain",keywords:["blockchain","cryptocurrency","crypto","bitcoin","ethereum","web3","defi","nft","smart contract","solidity","wallet","token","dao"],domains:["coinbase.com","binance.com","etherscan.io","opensea.io"]}}},coding:{id:"coding",name:"Programming",icon:"",keywords:["programming","coding","developer","development","code","software engineering","backend","frontend","fullstack","full-stack","devops","api","sdk","framework","library","package","module","dependency","npm","pip","git","version control","debugging","testing","deployment","ci/cd"],domains:["github.com","gitlab.com","bitbucket.org","stackoverflow.com","npmjs.com","pypi.org","crates.io","packagist.org","rubygems.org"],subtopics:{javascript:{id:"coding/javascript",name:"JavaScript",keywords:["javascript","typescript","node.js","nodejs","react","vue","angular","svelte","nextjs","next.js","nuxt","express","deno","bun","vite","webpack","esbuild","rollup","jsx","tsx","ecmascript","es6","es2020"],domains:["nodejs.org","reactjs.org","vuejs.org","svelte.dev"]},python:{id:"coding/python",name:"Python",keywords:["python","django","flask","fastapi","pandas","numpy","pytorch","tensorflow","scikit-learn","jupyter","notebook","pip","conda","virtualenv","asyncio","pydantic","sqlalchemy"],domains:["python.org","pypi.org","realpython.com","djangoproject.com"]},rust:{id:"coding/rust",name:"Rust",keywords:["rust","rustlang","cargo","crate","tokio","async-std","wasm"],domains:["rust-lang.org","crates.io","docs.rs"]},go:{id:"coding/go",name:"Go",keywords:["golang","go language","goroutine","gin","fiber","echo"],domains:["golang.org","go.dev","pkg.go.dev"]}}},tutorials:{id:"tutorials",name:"Tutorials",icon:"",keywords:["tutorial","how to","howto","how-to","guide","learn","learning","beginner","introduction","intro to","getting started","step by step","step-by-step","walkthrough","explained","crash course","masterclass","fundamentals","basics","complete guide","definitive guide","cheatsheet","cheat sheet","quick start","quickstart"],domains:["tutorialspoint.com","w3schools.com","freecodecamp.org","codecademy.com","coursera.org","udemy.com","pluralsight.com","egghead.io","frontendmasters.com","levelup.gitconnected.com"]},blogs:{id:"blogs",name:"Blogs & Articles",icon:"",keywords:["blog","article","post","opinion","essay","thoughts on","my experience","story","journey","lessons learned","reflection","review"],domains:["medium.com","dev.to","hashnode.com","substack.com","wordpress.com","blogger.com","ghost.io","mirror.xyz"]},videos:{id:"videos",name:"Videos",icon:"",keywords:["video","watch","stream","streaming","episode","podcast","webinar","talk","presentation","conference talk","keynote","demo","screencast"],domains:["youtube.com","youtu.be","vimeo.com","twitch.tv","dailymotion.com","loom.com","wistia.com","ted.com"]},religious:{id:"religious",name:"Religious & Spiritual",icon:"",keywords:["islam","islamic","muslim","quran","hadith","sunnah","prophet","allah","prayer","salah","fasting","ramadan","hajj","zakat","mosque","masjid","imam","sheikh","fatwa","halal","haram","christianity","christian","bible","jesus","church","gospel","judaism","jewish","torah","synagogue","rabbi","buddhism","buddhist","meditation","dharma","zen","hinduism","hindu","yoga","vedic","spirituality","spiritual","faith","belief","worship","religious","religion","scripture","sermon","dua","tafsir","recitation","tilawah"],domains:["islamqa.info","sunnah.com","quran.com","islamweb.net","biblegateway.com","gotquestions.org","chabad.org","myjewishlearning.com"]},news:{id:"news",name:"News",icon:"",keywords:["news","breaking","headline","report","latest","update","announcement","press release","coverage","journalism","current events","world news"],domains:["reuters.com","apnews.com","bbc.com","cnn.com","nytimes.com","theguardian.com","washingtonpost.com","wsj.com","bloomberg.com","aljazeera.com","news.ycombinator.com"]},tools:{id:"tools",name:"Tools & Apps",icon:"",keywords:["tool","app","application","utility","extension","plugin","addon","software","platform","service","saas","free tool","online tool","generator","converter","calculator","formatter","validator","linter"],domains:["notion.so","figma.com","canva.com","trello.com","asana.com","slack.com","discord.com","vercel.com","netlify.com","heroku.com","postman.com","insomnia.rest"]},documentation:{id:"documentation",name:"Documentation",icon:"",keywords:["documentation","docs","api reference","api docs","reference","specification","spec","manual","handbook","wiki","changelog","release notes","readme"],domains:["docs.github.com","developer.mozilla.org","devdocs.io","readthedocs.org","gitbook.io","notion.site","confluence.atlassian.com"]},research:{id:"research",name:"Research & Papers",icon:"",keywords:["research","paper","study","academic","journal","publication","thesis","dissertation","peer-reviewed","scientific","experiment","findings","methodology","abstract","citation","arxiv"],domains:["arxiv.org","scholar.google.com","researchgate.net","academia.edu","semanticscholar.org","paperswithcode.com","nature.com","sciencedirect.com"]},design:{id:"design",name:"Design & UI/UX",icon:"",keywords:["design","ui","ux","user interface","user experience","graphic design","web design","visual design","typography","color","layout","wireframe","prototype","mockup","figma","sketch","adobe","illustration","icon","logo","branding","animation","motion design"],domains:["figma.com","dribbble.com","behance.net","awwwards.com","uxdesign.cc","smashingmagazine.com","nngroup.com","invisionapp.com"]},career:{id:"career",name:"Career & Jobs",icon:"",keywords:["career","job","hiring","interview","resume","cv","portfolio","salary","remote work","freelance","contract","employment","recruiting","linkedin","networking","job search","tech job"],domains:["linkedin.com","indeed.com","glassdoor.com","levels.fyi","wellfound.com","remoteok.io","weworkremotely.com","dice.com"]},entertainment:{id:"entertainment",name:"Entertainment",icon:"",keywords:["entertainment","game","gaming","movie","film","tv","series","anime","manga","comic","music","song","album","artist","sports","esports","hobby","fun","leisure"],domains:["imdb.com","rottentomatoes.com","ign.com","gamespot.com","spotify.com","netflix.com","twitch.tv","steamcommunity.com"]},finance:{id:"finance",name:"Finance & Investing",icon:"",keywords:["finance","investing","investment","stock","market","trading","portfolio","dividend","etf","mutual fund","retirement","401k","savings","budgeting","financial planning","wealth","money"],domains:["yahoo.com/finance","investopedia.com","fool.com","seekingalpha.com","morningstar.com","robinhood.com","fidelity.com","vanguard.com"]},productivity:{id:"productivity",name:"Productivity",icon:"",keywords:["productivity","workflow","automation","efficiency","time management","task management","project management","organization","habit","goal setting","focus","gtd","getting things done","lifehack"],domains:["notion.so","todoist.com","asana.com","monday.com","clickup.com","obsidian.md","roamresearch.com","zapier.com","make.com"]},security:{id:"security",name:"Security & Privacy",icon:"",keywords:["security","cybersecurity","privacy","hacking","vulnerability","exploit","penetration testing","pentest","encryption","authentication","authorization","oauth","jwt","ssl","tls","firewall","vpn","password","malware","ransomware","phishing","data breach"],domains:["owasp.org","hackerone.com","security.stackexchange.com","krebsonsecurity.com","schneier.com","thehackernews.com"]}};function Qc(t){const e=function(t){if(!t)return null;const e=t.split("/"),r=Yc[e[0]];if(!r)return null;if(1===e.length)return{id:r.id,name:r.name,icon:r.icon,isSubtopic:!1};const n=r.subtopics?.[e[1]];return n?{id:n.id,name:n.name,icon:r.icon,isSubtopic:!0,parentId:r.id,parentName:r.name}:null}(t);return e?`${e.icon} ${e.name}`:t}function Jc(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xc(t,e,r){const n=t.slice();return n[75]=e[r],n}function Gc(t,e,r){const n=t.slice();n[78]=e[r];const i=n[22]("creators",`${n[78].platform}:${n[78].creator}`);return n[79]=i,n}function Zc(t,e,r){const n=t.slice();return n[82]=e[r],n}function td(t,e,r){const n=t.slice();return n[85]=e[r],n}function ed(t,e,r){const n=t.slice();return n[88]=e[r],n}function rd(t,e,r){const n=t.slice();return n[91]=e[r],n}function nd(t,e,r){const n=t.slice();return n[94]=e[r],n}function id(t,e,r){const n=t.slice();return n[97]=e[r],n}function od(t,e,r){const n=t.slice();return n[100]=e[r],n}function sd(t,e,r){const n=t.slice();return n[103]=e[r],n}function ad(e){let r,n,i;return{c(){r=v("button"),r.textContent="Clear All",A(r,"class","text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300")},m(t,o){b(t,r,o),n||(i=M(r,"click",e[28]),n=!0)},p:t,d(t){t&&y(r),n=!1,i()}}}function ld(t){let e,r,n,i,o,s,a=it(t[3].topics),l=[];for(let e=0;e<a.length;e+=1)l[e]=cd(sd(t,a,e));let c=it(t[3].creators),d=[];for(let e=0;e<c.length;e+=1)d[e]=dd(od(t,c,e));let u=it(t[3].types),h=[];for(let e=0;e<u.length;e+=1)h[e]=ud(id(t,u,e));let g=it(t[3].domains),f=[];for(let e=0;e<g.length;e+=1)f[e]=hd(nd(t,g,e));let p=it(t[3].folders),k=[];for(let e=0;e<p.length;e+=1)k[e]=gd(rd(t,p,e));let w=t[3].dateRange&&fd(t);return{c(){e=v("div");for(let t=0;t<l.length;t+=1)l[t].c();r=_();for(let t=0;t<d.length;t+=1)d[t].c();n=_();for(let t=0;t<h.length;t+=1)h[t].c();i=_();for(let t=0;t<f.length;t+=1)f[t].c();o=_();for(let t=0;t<k.length;t+=1)k[t].c();s=_(),w&&w.c(),A(e,"class","mb-4 flex flex-wrap gap-2")},m(t,a){b(t,e,a);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);m(e,r);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(e,null);m(e,n);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null);m(e,i);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(e,null);m(e,o);for(let t=0;t<k.length;t+=1)k[t]&&k[t].m(e,null);m(e,s),w&&w.m(e,null)},p(t,m){if(33554440&m[0]){let n;for(a=it(t[3].topics),n=0;n<a.length;n+=1){const i=sd(t,a,n);l[n]?l[n].p(i,m):(l[n]=cd(i),l[n].c(),l[n].m(e,r))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}if(67108872&m[0]){let r;for(c=it(t[3].creators),r=0;r<c.length;r+=1){const i=od(t,c,r);d[r]?d[r].p(i,m):(d[r]=dd(i),d[r].c(),d[r].m(e,n))}for(;r<d.length;r+=1)d[r].d(1);d.length=c.length}if(134217736&m[0]){let r;for(u=it(t[3].types),r=0;r<u.length;r+=1){const n=id(t,u,r);h[r]?h[r].p(n,m):(h[r]=ud(n),h[r].c(),h[r].m(e,i))}for(;r<h.length;r+=1)h[r].d(1);h.length=u.length}if(8388616&m[0]){let r;for(g=it(t[3].domains),r=0;r<g.length;r+=1){const n=nd(t,g,r);f[r]?f[r].p(n,m):(f[r]=hd(n),f[r].c(),f[r].m(e,o))}for(;r<f.length;r+=1)f[r].d(1);f.length=g.length}if(16777224&m[0]){let r;for(p=it(t[3].folders),r=0;r<p.length;r+=1){const n=rd(t,p,r);k[r]?k[r].p(n,m):(k[r]=gd(n),k[r].c(),k[r].m(e,s))}for(;r<k.length;r+=1)k[r].d(1);k.length=p.length}t[3].dateRange?w?w.p(t,m):(w=fd(t),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},d(t){t&&y(e),x(l,t),x(d,t),x(h,t),x(f,t),x(k,t),w&&w.d()}}}function cd(t){let e,r,n,i,o,s,a,l=Qc(t[103])+"";function c(){return t[42](t[103])}return{c(){e=v("div"),r=v("div"),n=w(l),i=_(),o=v("button"),o.textContent="",A(r,"class","text-[10px] text-indigo-800 dark:text-indigo-300"),A(o,"class","text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-200 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-indigo-50 dark:bg-indigo-900/30 rounded-md border border-indigo-100 dark:border-indigo-800")},m(t,l){b(t,e,l),m(e,r),m(r,n),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,r){t=e,8&r[0]&&l!==(l=Qc(t[103])+"")&&T(n,l)},d(t){t&&y(e),s=!1,a()}}}function dd(t){let e,r,n,i,o,s,a,l=t[100].creator+"";function c(){return t[43](t[100])}return{c(){e=v("div"),r=v("div"),n=w(l),i=_(),o=v("button"),o.textContent="",A(r,"class","text-[10px] text-pink-800 dark:text-pink-300"),A(o,"class","text-pink-600 dark:text-pink-400 hover:text-pink-800 dark:hover:text-pink-200 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-pink-50 dark:bg-pink-900/30 rounded-md border border-pink-100 dark:border-pink-800")},m(t,l){b(t,e,l),m(e,r),m(r,n),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,r){t=e,8&r[0]&&l!==(l=t[100].creator+"")&&T(n,l)},d(t){t&&y(e),s=!1,a()}}}function ud(t){let e,r,n,i,o,s,a,l=al(t[97])+"";function c(){return t[44](t[97])}return{c(){e=v("div"),r=v("div"),n=w(l),i=_(),o=v("button"),o.textContent="",A(r,"class","text-[10px] text-orange-800 dark:text-orange-300"),A(o,"class","text-orange-600 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-200 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-orange-50 dark:bg-orange-900/30 rounded-md border border-orange-100 dark:border-orange-800")},m(t,l){b(t,e,l),m(e,r),m(r,n),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,r){t=e,8&r[0]&&l!==(l=al(t[97])+"")&&T(n,l)},d(t){t&&y(e),s=!1,a()}}}function hd(t){let e,r,n,i,o,s,a,l=t[94]+"";function c(){return t[45](t[94])}return{c(){e=v("div"),r=v("div"),n=w(l),i=_(),o=v("button"),o.textContent="",A(r,"class","text-[10px] text-blue-800 dark:text-blue-300"),A(o,"class","text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-blue-50 dark:bg-blue-900/30 rounded-md border border-blue-100 dark:border-blue-800")},m(t,l){b(t,e,l),m(e,r),m(r,n),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,r){t=e,8&r[0]&&l!==(l=t[94]+"")&&T(n,l)},d(t){t&&y(e),s=!1,a()}}}function gd(t){let e,r,n,i,o,s,a,l=t[91]+"";function c(){return t[46](t[91])}return{c(){e=v("div"),r=v("div"),n=w(l),i=_(),o=v("button"),o.textContent="",A(r,"class","text-[10px] text-green-800 dark:text-green-300"),A(o,"class","text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-green-50 dark:bg-green-900/30 rounded-md border border-green-100 dark:border-green-800")},m(t,l){b(t,e,l),m(e,r),m(r,n),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,r){t=e,8&r[0]&&l!==(l=t[91]+"")&&T(n,l)},d(t){t&&y(e),s=!1,a()}}}function fd(t){let e,r,n,i,o,s,a,l="week"===t[3].dateRange.period?"This Week":"twoWeek"===t[3].dateRange.period?"This 2-Week":"month"===t[3].dateRange.period?"This Month":"threeMonth"===t[3].dateRange.period?"This 3-Month":"sixMonth"===t[3].dateRange.period?"This 6-Month":"year"===t[3].dateRange.period?"This Year":"Older";return{c(){e=v("div"),r=v("div"),n=w(l),i=_(),o=v("button"),o.textContent="",A(r,"class","text-[10px] text-purple-800 dark:text-purple-300"),A(o,"class","text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-purple-50 dark:bg-purple-900/30 rounded-md border border-purple-100 dark:border-purple-800")},m(l,c){b(l,e,c),m(e,r),m(r,n),m(e,i),m(e,o),s||(a=M(o,"click",t[47]),s=!0)},p(t,e){8&e[0]&&l!==(l="week"===t[3].dateRange.period?"This Week":"twoWeek"===t[3].dateRange.period?"This 2-Week":"month"===t[3].dateRange.period?"This Month":"threeMonth"===t[3].dateRange.period?"This 3-Month":"sixMonth"===t[3].dateRange.period?"This 6-Month":"year"===t[3].dateRange.period?"This Year":"Older")&&T(n,l)},d(t){t&&y(e),s=!1,a()}}}function pd(t){let e,r,n,i=t[15].length+"";return{c(){e=w(" Domains ("),r=w(i),n=w(")")},m(t,i){b(t,e,i),b(t,r,i),b(t,n,i)},p(t,e){32768&e[0]&&i!==(i=t[15].length+"")&&T(r,i)},d(t){t&&(y(e),y(r),y(n))}}}function md(t){let e,r,n,i,o=t[15].length+"";return{c(){e=v("span"),r=w("Matching Domains ("),n=w(o),i=w(")"),A(e,"class","text-blue-600 dark:text-blue-400")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i)},p(t,e){32768&e[0]&&o!==(o=t[15].length+"")&&T(n,o)},d(t){t&&y(e)}}}function bd(t){let e,r,n,i=!t[0]&&yd(t),o=it(t[15].slice(0,t[4])),s=[];for(let e=0;e<o.length;e+=1)s[e]=xd(ed(t,o,e));let a=t[15].length>t[4]&&vd(t);return{c(){i&&i.c(),e=_(),r=v("div");for(let t=0;t<s.length;t+=1)s[t].c();n=_(),a&&a.c(),A(r,"class","flex gap-2 overflow-x-auto pb-2"),L(r,"max-height","200px"),L(r,"flex-wrap","wrap")},m(t,o){i&&i.m(t,o),b(t,e,o),b(t,r,o);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(r,null);m(r,n),a&&a.m(r,null)},p(t,l){if(t[0]?i&&(i.d(1),i=null):i?i.p(t,l):(i=yd(t),i.c(),i.m(e.parentNode,e)),12615696&l[0]){let e;for(o=it(t[15].slice(0,t[4])),e=0;e<o.length;e+=1){const i=ed(t,o,e);s[e]?s[e].p(i,l):(s[e]=xd(i),s[e].c(),s[e].m(r,n))}for(;e<s.length;e+=1)s[e].d(1);s.length=o.length}t[15].length>t[4]?a?a.p(t,l):(a=vd(t),a.c(),a.m(r,null)):a&&(a.d(1),a=null)},d(t){t&&(y(e),y(r)),i&&i.d(t),x(s,t),a&&a.d()}}}function yd(t){let e,r,i,o,s,a,l,c,d,u;return{c(){e=v("div"),r=v("button"),i=w("Recent"),s=_(),a=v("button"),l=w("Count"),A(r,"class",o="text-[10px] px-1.5 py-0.5 rounded transition-colors "+("recency"===t[1]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400")),A(r,"title","Sort by most recent bookmark"),A(a,"class",c="text-[10px] px-1.5 py-0.5 rounded transition-colors "+("count"===t[1]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400")),A(a,"title","Sort by bookmark count"),A(e,"class","flex space-x-1 mb-2")},m(n,o){b(n,e,o),m(e,r),m(r,i),m(e,s),m(e,a),m(a,l),d||(u=[M(r,"click",t[49]),M(a,"click",t[50])],d=!0)},p(t,e){2&e[0]&&o!==(o="text-[10px] px-1.5 py-0.5 rounded transition-colors "+("recency"===t[1]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400"))&&A(r,"class",o),2&e[0]&&c!==(c="text-[10px] px-1.5 py-0.5 rounded transition-colors "+("count"===t[1]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400"))&&A(a,"class",c)},d(t){t&&y(e),d=!1,n(u)}}}function xd(t){let e,r,n,i,o,s,a,l,c,d,u=t[88].domain+"",h=t[88].count+"";function g(){return t[51](t[88])}return{c(){e=v("button"),r=v("span"),n=w(u),i=_(),o=v("span"),s=w(h),A(r,"class","font-medium"),A(o,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(e,"class",a="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[22]("domains",t[88].domain)?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent")),A(e,"title",l=t[88].domain)},m(t,a){b(t,e,a),m(e,r),m(r,n),m(e,i),m(e,o),m(o,s),c||(d=M(e,"click",g),c=!0)},p(r,i){t=r,32784&i[0]&&u!==(u=t[88].domain+"")&&T(n,u),32784&i[0]&&h!==(h=t[88].count+"")&&T(s,h),32784&i[0]&&a!==(a="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[22]("domains",t[88].domain)?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent"))&&A(e,"class",a),32784&i[0]&&l!==(l=t[88].domain)&&A(e,"title",l)},d(t){t&&y(e),c=!1,d()}}}function vd(e){let r,n,i;return{c(){r=v("button"),r.textContent="Load More",A(r,"class","w-full text-center px-2 py-1.5 text-xs text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/40 rounded border border-blue-200 dark:border-blue-800 mt-2")},m(t,o){b(t,r,o),n||(i=M(r,"click",e[16]),n=!0)},p:t,d(t){t&&y(r),n=!1,i()}}}function kd(t){let e,r,n,i=t[14].length+"";return{c(){e=w(" Folders ("),r=w(i),n=w(")")},m(t,i){b(t,e,i),b(t,r,i),b(t,n,i)},p(t,e){16384&e[0]&&i!==(i=t[14].length+"")&&T(r,i)},d(t){t&&(y(e),y(r),y(n))}}}function wd(t){let e,r,n,i,o=t[14].length+"";return{c(){e=v("span"),r=w("Matching Folders ("),n=w(o),i=w(")"),A(e,"class","text-blue-600 dark:text-blue-400")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i)},p(t,e){16384&e[0]&&o!==(o=t[14].length+"")&&T(n,o)},d(t){t&&y(e)}}}function _d(t){let e,r,n=it(t[14].slice(0,t[5])),i=[];for(let e=0;e<n.length;e+=1)i[e]=Cd(td(t,n,e));let o=t[14].length>t[5]&&Md(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();r=_(),o&&o.c(),A(e,"class","flex gap-2 overflow-x-auto pb-2"),L(e,"max-height","200px"),L(e,"flex-wrap","wrap")},m(t,n){b(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,r),o&&o.m(e,null)},p(t,s){if(20987936&s[0]){let o;for(n=it(t[14].slice(0,t[5])),o=0;o<n.length;o+=1){const a=td(t,n,o);i[o]?i[o].p(a,s):(i[o]=Cd(a),i[o].c(),i[o].m(e,r))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}t[14].length>t[5]?o?o.p(t,s):(o=Md(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&y(e),x(i,t),o&&o.d()}}}function Cd(t){let e,r,n,i,o,s,a,l,c,d,u,h=t[85].folder.toLowerCase().replace("bookmarks","")+"",g=t[85].count+"";function f(){return t[53](t[85])}return{c(){e=v("button"),r=v("span"),n=w(" "),i=w(h),o=_(),s=v("span"),a=w(g),A(r,"class","font-medium"),A(s,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(e,"class",l="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[22]("folders",t[85].folder)?"bg-green-50 dark:bg-green-900/40 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent")),A(e,"title",c=t[85].folder)},m(t,l){b(t,e,l),m(e,r),m(r,n),m(r,i),m(e,o),m(e,s),m(s,a),d||(u=M(e,"click",f),d=!0)},p(r,n){t=r,16416&n[0]&&h!==(h=t[85].folder.toLowerCase().replace("bookmarks","")+"")&&T(i,h),16416&n[0]&&g!==(g=t[85].count+"")&&T(a,g),16416&n[0]&&l!==(l="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[22]("folders",t[85].folder)?"bg-green-50 dark:bg-green-900/40 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent"))&&A(e,"class",l),16416&n[0]&&c!==(c=t[85].folder)&&A(e,"title",c)},d(t){t&&y(e),d=!1,u()}}}function Md(e){let r,n,i;return{c(){r=v("button"),r.textContent="Load More",A(r,"class","w-full text-center px-2 py-1.5 text-xs text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/40 rounded border border-green-200 dark:border-green-800 mt-2")},m(t,o){b(t,r,o),n||(i=M(r,"click",e[17]),n=!0)},p:t,d(t){t&&y(r),n=!1,i()}}}function Sd(t){let e,r,n,i,o,s,a,l,c,d,u,h,g=t[13].length+"",f=t[9].topics?"":"",p=t[9].topics&&Ad(t);return{c(){e=v("div"),r=v("button"),n=v("span"),i=w(" Topics ("),o=w(g),s=w(")"),a=_(),l=v("span"),c=w(f),d=_(),p&&p.c(),A(l,"class","text-gray-400 dark:text-gray-500"),A(r,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-400 uppercase tracking-wide mb-2 hover:text-gray-900 dark:hover:text-gray-200"),A(e,"class","mb-0")},m(g,f){b(g,e,f),m(e,r),m(r,n),m(n,i),m(n,o),m(n,s),m(r,a),m(r,l),m(l,c),m(e,d),p&&p.m(e,null),u||(h=M(r,"click",t[54]),u=!0)},p(t,r){8192&r[0]&&g!==(g=t[13].length+"")&&T(o,g),512&r[0]&&f!==(f=t[9].topics?"":"")&&T(c,f),t[9].topics?p?p.p(t,r):(p=Ad(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(t){t&&y(e),p&&p.d(),u=!1,h()}}}function Ad(t){let e,r,n=it(t[13].slice(0,t[8])),i=[];for(let e=0;e<n.length;e+=1)i[e]=Dd(Zc(t,n,e));let o=t[13].length>t[8]&&Td(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();r=_(),o&&o.c(),A(e,"class","flex gap-2 overflow-x-auto pb-2"),L(e,"max-height","200px"),L(e,"flex-wrap","wrap")},m(t,n){b(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,r),o&&o.m(e,null)},p(t,s){if(37757184&s[0]){let o;for(n=it(t[13].slice(0,t[8])),o=0;o<n.length;o+=1){const a=Zc(t,n,o);i[o]?i[o].p(a,s):(i[o]=Dd(a),i[o].c(),i[o].m(e,r))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}t[13].length>t[8]?o?o.p(t,s):(o=Td(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&y(e),x(i,t),o&&o.d()}}}function Dd(t){let e,r,n,i,o,s,a,l,c,d=Qc(t[82].topic)+"",u=t[82].count+"";function h(){return t[55](t[82])}return{c(){e=v("button"),r=v("span"),n=w(d),i=_(),o=v("span"),s=w(u),A(r,"class","font-medium"),A(o,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(e,"class",a="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[22]("topics",t[82].topic)?"bg-indigo-50 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent"))},m(t,a){b(t,e,a),m(e,r),m(r,n),m(e,i),m(e,o),m(o,s),l||(c=M(e,"click",h),l=!0)},p(r,i){t=r,8448&i[0]&&d!==(d=Qc(t[82].topic)+"")&&T(n,d),8448&i[0]&&u!==(u=t[82].count+"")&&T(s,u),8448&i[0]&&a!==(a="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[22]("topics",t[82].topic)?"bg-indigo-50 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent"))&&A(e,"class",a)},d(t){t&&y(e),l=!1,c()}}}function Td(e){let r,n,i;return{c(){r=v("button"),r.textContent="Show more",A(r,"class","w-full text-center px-2 py-1.5 text-xs text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/40 rounded border border-indigo-200 dark:border-indigo-800 mt-2")},m(t,o){b(t,r,o),n||(i=M(r,"click",e[20]),n=!0)},p:t,d(t){t&&y(r),n=!1,i()}}}function Pd(t){let e,r,n,i,o,s,a,l,c,d,u,h,g=t[12].length+"",f=t[9].creators?"":"",p=t[9].creators&&Ld(t);return{c(){e=v("div"),r=v("button"),n=v("span"),i=w(" Top Creators ("),o=w(g),s=w(")"),a=_(),l=v("span"),c=w(f),d=_(),p&&p.c(),A(l,"class","text-gray-400 dark:text-gray-500"),A(r,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-400 uppercase tracking-wide mb-2 hover:text-gray-900 dark:hover:text-gray-200"),A(e,"class","mb-0")},m(g,f){b(g,e,f),m(e,r),m(r,n),m(n,i),m(n,o),m(n,s),m(r,a),m(r,l),m(l,c),m(e,d),p&&p.m(e,null),u||(h=M(r,"click",t[56]),u=!0)},p(t,r){4096&r[0]&&g!==(g=t[12].length+"")&&T(o,g),512&r[0]&&f!==(f=t[9].creators?"":"")&&T(c,f),t[9].creators?p?p.p(t,r):(p=Ld(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(t){t&&y(e),p&&p.d(),u=!1,h()}}}function Ld(t){let e,r,n=it(t[12].slice(0,t[6])),i=[];for(let e=0;e<n.length;e+=1)i[e]=Ed(Gc(t,n,e));let o=t[12].length>t[6]&&Od(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();r=_(),o&&o.c(),A(e,"class","flex gap-2 overflow-x-auto pb-2"),L(e,"max-height","200px"),L(e,"flex-wrap","wrap")},m(t,n){b(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,r),o&&o.m(e,null)},p(t,s){if(71307328&s[0]){let o;for(n=it(t[12].slice(0,t[6])),o=0;o<n.length;o+=1){const a=Gc(t,n,o);i[o]?i[o].p(a,s):(i[o]=Ed(a),i[o].c(),i[o].m(e,r))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}t[12].length>t[6]?o?o.p(t,s):(o=Od(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&y(e),x(i,t),o&&o.d()}}}function Ed(t){let e,r,n,i,o,s,a,l,c,d,u=t[78].creator+"",h=t[78].count+"";function g(){return t[57](t[78])}return{c(){e=v("button"),r=v("span"),n=w(" "),i=w(u),o=_(),s=v("span"),a=w(h),A(r,"class","font-medium"),A(s,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(e,"class",l="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[79]?"bg-pink-50 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 border-pink-200 dark:border-pink-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent"))},m(t,l){b(t,e,l),m(e,r),m(r,n),m(r,i),m(e,o),m(e,s),m(s,a),c||(d=M(e,"click",g),c=!0)},p(r,n){t=r,4160&n[0]&&u!==(u=t[78].creator+"")&&T(i,u),4160&n[0]&&h!==(h=t[78].count+"")&&T(a,h),4160&n[0]&&l!==(l="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[79]?"bg-pink-50 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 border-pink-200 dark:border-pink-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent"))&&A(e,"class",l)},d(t){t&&y(e),c=!1,d()}}}function Od(e){let r,n,i;return{c(){r=v("button"),r.textContent="Show more",A(r,"class","w-full text-center px-2 py-1 text-xs text-pink-600 dark:text-pink-400 hover:bg-pink-50 dark:hover:bg-pink-900/40 rounded border border-pink-200 dark:border-pink-800 mt-2")},m(t,o){b(t,r,o),n||(i=M(r,"click",e[18]),n=!0)},p:t,d(t){t&&y(r),n=!1,i()}}}function Rd(t){let e,r,n,i,o,s,a,l,c,d,u,h,g=t[11].length+"",f=t[9].contentTypes?"":"",p=t[9].contentTypes&&Bd(t);return{c(){e=v("div"),r=v("button"),n=v("span"),i=w(" Content Types ("),o=w(g),s=w(")"),a=_(),l=v("span"),c=w(f),d=_(),p&&p.c(),A(l,"class","text-gray-400 dark:text-gray-500"),A(r,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-400 uppercase tracking-wide mb-2 hover:text-gray-900 dark:hover:text-gray-200"),A(e,"class","mb-0")},m(g,f){b(g,e,f),m(e,r),m(r,n),m(n,i),m(n,o),m(n,s),m(r,a),m(r,l),m(l,c),m(e,d),p&&p.m(e,null),u||(h=M(r,"click",t[58]),u=!0)},p(t,r){2048&r[0]&&g!==(g=t[11].length+"")&&T(o,g),512&r[0]&&f!==(f=t[9].contentTypes?"":"")&&T(c,f),t[9].contentTypes?p?p.p(t,r):(p=Bd(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(t){t&&y(e),p&&p.d(),u=!1,h()}}}function Bd(t){let e,r,n=it(t[11].slice(0,t[7])),i=[];for(let e=0;e<n.length;e+=1)i[e]=jd(Xc(t,n,e));let o=t[11].length>t[7]&&$d(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();r=_(),o&&o.c(),A(e,"class","flex gap-2 overflow-x-auto pb-2"),L(e,"max-height","200px"),L(e,"flex-wrap","wrap")},m(t,n){b(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,r),o&&o.m(e,null)},p(t,s){if(138414208&s[0]){let o;for(n=it(t[11].slice(0,t[7])),o=0;o<n.length;o+=1){const a=Xc(t,n,o);i[o]?i[o].p(a,s):(i[o]=jd(a),i[o].c(),i[o].m(e,r))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}t[11].length>t[7]?o?o.p(t,s):(o=$d(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&y(e),x(i,t),o&&o.d()}}}function jd(t){let e,r,n,i,o,s,a,l,c,d=al(t[75].type)+"",u=t[75].count+"";function h(){return t[59](t[75])}return{c(){e=v("button"),r=v("span"),n=w(d),i=_(),o=v("span"),s=w(u),A(r,"class","font-medium"),A(o,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(e,"class",a="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[22]("types",t[75].type)?"bg-orange-50 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent"))},m(t,a){b(t,e,a),m(e,r),m(r,n),m(e,i),m(e,o),m(o,s),l||(c=M(e,"click",h),l=!0)},p(r,i){t=r,2176&i[0]&&d!==(d=al(t[75].type)+"")&&T(n,d),2176&i[0]&&u!==(u=t[75].count+"")&&T(s,u),2176&i[0]&&a!==(a="flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 dark:hover:bg-gray-700 rounded border transition-colors flex items-center gap-1.5 "+(t[22]("types",t[75].type)?"bg-orange-50 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300 border-orange-200 dark:border-orange-800":"text-gray-600 dark:text-gray-400 border-transparent dark:border-transparent"))&&A(e,"class",a)},d(t){t&&y(e),l=!1,c()}}}function $d(e){let r,n,i;return{c(){r=v("button"),r.textContent="Show more",A(r,"class","w-full text-center px-2 py-1.5 text-xs text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/40 rounded border border-orange-200 dark:border-orange-800 mt-2")},m(t,o){b(t,r,o),n||(i=M(r,"click",e[19]),n=!0)},p:t,d(t){t&&y(r),n=!1,i()}}}function zd(e){let r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,P,L,E,O,R,B,j,$,z,I,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z,tt,et,rt,nt,it,ot,st,at,lt,ct,dt,ut,ht,gt,ft,pt,mt,bt,yt,xt,vt,kt,wt,_t,Ct,Mt,St,At,Dt,Tt,Pt,Lt,Et,Ot,Rt,Bt,jt,$t,zt,It=e[9].domains?"":"",Ft=e[9].folders?"":"",Nt=e[10].week+"",Wt=e[10].twoWeek+"",Ht=e[10].month+"",Vt=e[10].threeMonth+"",qt=e[10].sixMonth+"",Ut=e[10].year+"",Kt=e[10].older+"",Yt=e[2]&&ad(e),Qt=e[2]&&ld(e);function Jt(t,e){return t[0]?md:pd}let Xt=Jt(e),Gt=Xt(e),Zt=e[9].domains&&bd(e);function te(t,e){return t[0]?wd:kd}let ee=te(e),re=ee(e),ne=e[9].folders&&_d(e),ie=e[13].length>0&&Sd(e),oe=e[12].length>0&&Pd(e),se=e[11].length>0&&Rd(e);return{c(){r=v("div"),i=v("div"),o=v("div"),s=v("h3"),s.textContent="Filters",a=_(),Yt&&Yt.c(),l=_(),Qt&&Qt.c(),c=_(),d=v("div"),u=v("div"),h=v("button"),g=v("span"),Gt.c(),f=_(),p=v("span"),x=w(It),k=_(),Zt&&Zt.c(),C=_(),S=v("div"),D=v("button"),P=v("span"),re.c(),L=_(),E=v("span"),O=w(Ft),R=_(),ne&&ne.c(),B=_(),ie&&ie.c(),j=_(),oe&&oe.c(),$=_(),se&&se.c(),z=_(),I=v("div"),F=v("h4"),F.textContent="Date Added",N=_(),W=v("div"),H=v("button"),V=v("span"),V.textContent="This Week",q=_(),U=v("span"),K=w(Nt),Q=_(),J=v("button"),X=v("span"),X.textContent="This 2-Week",G=_(),Z=v("span"),tt=w(Wt),rt=_(),nt=v("button"),it=v("span"),it.textContent="This Month",ot=_(),st=v("span"),at=w(Ht),ct=_(),dt=v("button"),ut=v("span"),ut.textContent="This 3-Month",ht=_(),gt=v("span"),ft=w(Vt),mt=_(),bt=v("button"),yt=v("span"),yt.textContent="This 6-Month",xt=_(),vt=v("span"),kt=w(qt),_t=_(),Ct=v("button"),Mt=v("span"),Mt.textContent="This Year",St=_(),At=v("span"),Dt=w(Ut),Pt=_(),Lt=v("button"),Et=v("span"),Et.textContent="Older",Ot=_(),Rt=v("span"),Bt=w(Kt),A(s,"class","text-sm font-medium text-gray-900 dark:text-gray-100"),A(o,"class","flex items-center justify-between mb-3"),A(i,"class","mb-6"),A(p,"class","text-gray-400 dark:text-gray-500"),A(h,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wide mb-2 hover:text-gray-900 dark:hover:text-white"),A(u,"class","mb-0"),A(E,"class","text-gray-400 dark:text-gray-500"),A(D,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 dark:text-gray-400 uppercase tracking-wide mb-2 hover:text-gray-900 dark:hover:text-gray-200 transition-colors"),A(S,"class","mb-0"),A(F,"class","text-xs font-medium text-gray-700 dark:text-gray-400 uppercase tracking-wide mb-2"),A(V,"class","text-xs"),A(U,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(H,"class",Y="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("week"===e[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"")),A(X,"class","text-xs"),A(Z,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(J,"class",et="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("twoWeek"===e[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"")),A(it,"class","text-xs"),A(st,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(nt,"class",lt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("month"===e[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"")),A(ut,"class","text-xs"),A(gt,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(dt,"class",pt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("threeMonth"===e[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"")),A(yt,"class","text-xs"),A(vt,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(bt,"class",wt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("sixMonth"===e[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"")),A(Mt,"class","text-xs"),A(At,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(Ct,"class",Tt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("year"===e[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"")),A(Et,"class","text-xs"),A(Rt,"class","text-[10px] text-gray-400 dark:text-gray-500"),A(Lt,"class",jt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("older"===e[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"")),A(W,"class","grid grid-cols-1 gap-1"),A(I,"class","mb-0"),A(d,"class","grid grid-cols-2 gap-x-6 gap-y-6"),A(r,"class","w-[24rem] bg-gray-50 dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-4 overflow-y-auto flex-shrink-0")},m(t,n){b(t,r,n),m(r,i),m(i,o),m(o,s),m(o,a),Yt&&Yt.m(o,null),m(i,l),Qt&&Qt.m(i,null),m(r,c),m(r,d),m(d,u),m(u,h),m(h,g),Gt.m(g,null),m(h,f),m(h,p),m(p,x),m(u,k),Zt&&Zt.m(u,null),m(d,C),m(d,S),m(S,D),m(D,P),re.m(P,null),m(D,L),m(D,E),m(E,O),m(S,R),ne&&ne.m(S,null),m(d,B),ie&&ie.m(d,null),m(d,j),oe&&oe.m(d,null),m(d,$),se&&se.m(d,null),m(d,z),m(d,I),m(I,F),m(I,N),m(I,W),m(W,H),m(H,V),m(H,q),m(H,U),m(U,K),m(W,Q),m(W,J),m(J,X),m(J,G),m(J,Z),m(Z,tt),m(W,rt),m(W,nt),m(nt,it),m(nt,ot),m(nt,st),m(st,at),m(W,ct),m(W,dt),m(dt,ut),m(dt,ht),m(dt,gt),m(gt,ft),m(W,mt),m(W,bt),m(bt,yt),m(bt,xt),m(bt,vt),m(vt,kt),m(W,_t),m(W,Ct),m(Ct,Mt),m(Ct,St),m(Ct,At),m(At,Dt),m(W,Pt),m(W,Lt),m(Lt,Et),m(Lt,Ot),m(Lt,Rt),m(Rt,Bt),$t||(zt=[M(h,"click",e[48]),M(D,"click",e[52]),M(H,"click",e[60]),M(J,"click",e[61]),M(nt,"click",e[62]),M(dt,"click",e[63]),M(bt,"click",e[64]),M(Ct,"click",e[65]),M(Lt,"click",e[66])],$t=!0)},p(t,e){t[2]?Yt?Yt.p(t,e):(Yt=ad(t),Yt.c(),Yt.m(o,null)):Yt&&(Yt.d(1),Yt=null),t[2]?Qt?Qt.p(t,e):(Qt=ld(t),Qt.c(),Qt.m(i,null)):Qt&&(Qt.d(1),Qt=null),Xt===(Xt=Jt(t))&&Gt?Gt.p(t,e):(Gt.d(1),Gt=Xt(t),Gt&&(Gt.c(),Gt.m(g,null))),512&e[0]&&It!==(It=t[9].domains?"":"")&&T(x,It),t[9].domains?Zt?Zt.p(t,e):(Zt=bd(t),Zt.c(),Zt.m(u,null)):Zt&&(Zt.d(1),Zt=null),ee===(ee=te(t))&&re?re.p(t,e):(re.d(1),re=ee(t),re&&(re.c(),re.m(P,null))),512&e[0]&&Ft!==(Ft=t[9].folders?"":"")&&T(O,Ft),t[9].folders?ne?ne.p(t,e):(ne=_d(t),ne.c(),ne.m(S,null)):ne&&(ne.d(1),ne=null),t[13].length>0?ie?ie.p(t,e):(ie=Sd(t),ie.c(),ie.m(d,j)):ie&&(ie.d(1),ie=null),t[12].length>0?oe?oe.p(t,e):(oe=Pd(t),oe.c(),oe.m(d,$)):oe&&(oe.d(1),oe=null),t[11].length>0?se?se.p(t,e):(se=Rd(t),se.c(),se.m(d,z)):se&&(se.d(1),se=null),1024&e[0]&&Nt!==(Nt=t[10].week+"")&&T(K,Nt),8&e[0]&&Y!==(Y="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("week"===t[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":""))&&A(H,"class",Y),1024&e[0]&&Wt!==(Wt=t[10].twoWeek+"")&&T(tt,Wt),8&e[0]&&et!==(et="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("twoWeek"===t[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":""))&&A(J,"class",et),1024&e[0]&&Ht!==(Ht=t[10].month+"")&&T(at,Ht),8&e[0]&&lt!==(lt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("month"===t[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":""))&&A(nt,"class",lt),1024&e[0]&&Vt!==(Vt=t[10].threeMonth+"")&&T(ft,Vt),8&e[0]&&pt!==(pt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("threeMonth"===t[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":""))&&A(dt,"class",pt),1024&e[0]&&qt!==(qt=t[10].sixMonth+"")&&T(kt,qt),8&e[0]&&wt!==(wt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("sixMonth"===t[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":""))&&A(bt,"class",wt),1024&e[0]&&Ut!==(Ut=t[10].year+"")&&T(Dt,Ut),8&e[0]&&Tt!==(Tt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("year"===t[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":""))&&A(Ct,"class",Tt),1024&e[0]&&Kt!==(Kt=t[10].older+"")&&T(Bt,Kt),8&e[0]&&jt!==(jt="w-full text-left px-2 py-1 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded flex items-center justify-between "+("older"===t[3].dateRange?.period?"bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":""))&&A(Lt,"class",jt)},i:t,o:t,d(t){t&&y(r),Yt&&Yt.d(),Qt&&Qt.d(),Gt.d(),Zt&&Zt.d(),re.d(),ne&&ne.d(),ie&&ie.d(),oe&&oe.d(),se&&se.d(),$t=!1,n(zt)}}}function Id(t,e,r){let n,i,o,s,a,l,d,u,h;c(t,Jl,t=>r(3,h=t));let{searchResultStats:g=null}=e,{isSearchActive:f=!1}=e,p=[],m=[],b=[],y=[],x=[],v=[],k={week:0,twoWeek:0,month:0,threeMonth:0,sixMonth:0,year:0,older:0},w="count",_=40,C=10,M=10,S=10,A=15,D={topics:!0,creators:!0,contentTypes:!0,domains:!0,folders:!0};async function T(){const t=await Ql.getCached(),e=Date.now(),n=864e5,i=7*n,o=14*n,s=90*n,a=180*n,l=new Date,c=l.getFullYear(),d=new Date(c,l.getMonth(),1).getTime(),u=new Date(c,0,1).getTime();let h=0,g=0,f=0,p=0,m=0,b=0,y=0;t.forEach(t=>{const r=t.dateAdded;e-r<i&&h++,e-r<o&&g++,r>=d&&f++,e-r<s&&p++,e-r<a&&m++,r>=u&&b++,r<u&&y++}),r(40,k={week:h,twoWeek:g,month:f,threeMonth:p,sixMonth:m,year:b,older:y})}async function P(){r(34,p=await El()),r(35,m=await Ol())}async function L(){const t=await Ql.getCached(),e={},n={},i={};t.forEach(t=>{const r=t.topics||[];for(const t of r)e[t]=(e[t]||0)+1;if(t.creator){const e=`${t.platform||"other"}:${t.creator}`;n[e]||(n[e]={creator:t.creator,platform:t.platform||"other",count:0}),n[e].count++}t.contentType&&(i[t.contentType]=(i[t.contentType]||0)+1)}),r(37,y=Object.entries(e).map(([t,e])=>({topic:t,count:e})).sort((t,e)=>e.count-t.count)),r(38,x=Object.values(n).sort((t,e)=>e.count-t.count)),r(39,v=Object.entries(i).map(([t,e])=>({type:t,count:e})).sort((t,e)=>e.count-t.count))}function E(t){r(9,D[t]=!D[t],D)}function O(t){Jl.toggleFilter("domains",t)}function R(t){Jl.toggleFilter("folders",t)}function B(t){Jl.toggleFilter("topics",t)}function j(t,e){const r=`${e}:${t}`;Jl.toggleFilter("creators",{key:r,creator:t,platform:e})}function $(t){Jl.toggleFilter("types",t)}function I(t){if(h.dateRange?.period===t)return void Jl.setFilter("dateRange",null);const e=new Date,r=e.getFullYear();let n,i=e.getTime();switch(t){case"week":n=new Date(e.getTime()-6048e5);break;case"twoWeek":n=new Date(e.getTime()-12096e5);break;case"month":n=new Date(r,e.getMonth(),1);break;case"threeMonth":n=new Date(e.getTime()-7776e6);break;case"sixMonth":n=new Date(e.getTime()-15552e6);break;case"year":n=new Date(r,0,1);break;case"older":n=new Date(0),i=new Date(r,0,1).getTime()-1}!function(t,e,r){Jl.setFilter("dateRange",{startDate:t,endDate:e,period:r})}(n.getTime(),i,t)}z(async()=>{try{await P(),await L(),await T(),r(36,b=await _l())}catch(t){console.error("Error loading filters:",t)}});return t.$$set=t=>{"searchResultStats"in t&&r(30,g=t.searchResultStats),"isSearchActive"in t&&r(0,f=t.isSearchActive)},t.$$.update=()=>{8&t.$$.dirty[0]&&r(2,n=h.domains.length>0||h.folders.length>0||h.topics.length>0||h.creators.length>0||h.types.length>0||h.tags&&h.tags.length>0||h.deadLinks||h.stale||null!==h.dateRange||null!==h.readingTimeRange||null!==h.qualityScoreRange||null!==h.hasPublishedDate),1073741829&t.$$.dirty[0]&&r(41,i=(f||n)&&null!=g),1073741826&t.$$.dirty[0]|1048&t.$$.dirty[1]&&r(15,o=i&&g?.domains?g.domains:"recency"===w?p:m),1073741824&t.$$.dirty[0]|1056&t.$$.dirty[1]&&r(14,s=i&&g?.folders?g.folders:b),1073741824&t.$$.dirty[0]|1088&t.$$.dirty[1]&&r(13,a=i&&g?.topics?g.topics:y),1073741824&t.$$.dirty[0]|1152&t.$$.dirty[1]&&r(12,l=i&&g?.creators?g.creators:x),1073741824&t.$$.dirty[0]|1280&t.$$.dirty[1]&&r(11,d=i&&g?.contentTypes?g.contentTypes:v),1073741824&t.$$.dirty[0]|1536&t.$$.dirty[1]&&r(10,u=i&&g?.dateCounts?g.dateCounts:k)},[f,w,n,h,_,C,M,S,A,D,u,d,l,a,s,o,function(){r(4,_+=30)},function(){r(5,C+=15)},function(){r(6,M+=10)},function(){r(7,S+=10)},function(){r(8,A+=10)},E,function(t,e){return void 0!==h[t]&&(Array.isArray(h[t])?"creators"===t?h[t].some(t=>t.key===e):h[t].some(t=>String(t).toLowerCase()===String(e).toLowerCase()):h[t]===e)},O,R,B,j,$,function(){Jl.clearFilters()},I,g,function(){return n},function(){Jl.clearFilters()},async function(){try{await P(),await L(),await T(),r(36,b=await _l())}catch(t){console.error("Error refreshing sidebar:",t)}},p,m,b,y,x,v,k,i,t=>B(t),t=>j(t.creator,t.platform),t=>$(t),t=>O(t),t=>R(t),()=>{Jl.setFilter("dateRange",null)},()=>E("domains"),()=>r(1,w="recency"),()=>r(1,w="count"),t=>O(t.domain),()=>E("folders"),t=>R(t.folder),()=>E("topics"),t=>B(t.topic),()=>E("creators"),t=>j(t.creator,t.platform),()=>E("contentTypes"),t=>$(t.type),()=>I("week"),()=>I("twoWeek"),()=>I("month"),()=>I("threeMonth"),()=>I("sixMonth"),()=>I("year"),()=>I("older")]}class Fd extends ht{constructor(t){super(),ut(this,t,Id,zd,o,{searchResultStats:30,isSearchActive:0,getHasActiveFilters:31,clearAllFilters:32,refresh:33},null,[-1,-1,-1,-1])}get getHasActiveFilters(){return this.$$.ctx[31]}get clearAllFilters(){return this.$$.ctx[32]}get refresh(){return this.$$.ctx[33]}}const Nd={bookmarks:{icon:"",description:"Primary bookmark data with enrichment fields"},events:{icon:"",description:"Activity log (create, delete, access, enrichment events)"},cache:{icon:"",description:"General purpose cache storage"},settings:{icon:"",description:"Application settings and preferences"},similarities:{icon:"",description:"Precomputed bookmark similarity scores"},computedMetrics:{icon:"",description:"Cached computed metrics with TTL"},enrichmentQueue:{icon:"",description:"Queue of bookmarks pending enrichment"}},Wd=[{key:"domainStats",ttl:"1 hour",description:"Top domains by bookmark count"},{key:"activityTimeline",ttl:"6 hours",description:"Monthly bookmark creation timeline"},{key:"quickStats",ttl:"5 minutes",description:"Dashboard quick statistics"},{key:"wordFrequency",ttl:"24 hours",description:"Title word frequency analysis"},{key:"ageDistribution",ttl:"6 hours",description:"Bookmark age distribution"},{key:"categoryTrends",ttl:"24 hours",description:"Category distribution over time"},{key:"expertiseAreas",ttl:"24 hours",description:"User expertise based on bookmarks"},{key:"duplicates",ttl:"24 hours",description:"Detected duplicate bookmarks"},{key:"similarities",ttl:"24 hours",description:"Similar bookmark pairs"},{key:"insightsSummary",ttl:"5 minutes",description:"Aggregated insights summary"}];async function Hd(){const t=Object.keys(Nd),e=await Promise.all(t.map(async t=>{try{return{name:t,count:await ll[t].count(),...Nd[t]}}catch(e){return{name:t,count:0,...Nd[t],error:e.message}}})),r=e.reduce((t,e)=>t+e.count,0),n=await async function(){let t=0;const e=Object.keys(Nd);for(const r of e)try{const e=await ll[r].toArray();t+=JSON.stringify(e).length}catch(t){}if(t>1048576)return`~${(t/1048576).toFixed(1)} MB`;return`~${(t/1024).toFixed(0)} KB`}();return{tables:e,totalRecords:r,estimatedSize:n,lastChecked:Date.now()}}async function Vd(t,e={}){const{page:r=0,pageSize:n=50,sortBy:i=null,sortOrder:o="desc",searchQuery:s="",searchField:a="all",fieldFilter:l=null}=e;let c=await ll[t].toArray();if(l&&(c=c.filter(t=>{const e=t[l.field],r=null!=e&&""!==e&&!(Array.isArray(e)&&0===e.length);return l.hasValue?r:!r})),s){const t=s.toLowerCase();c=c.filter(e=>{if("all"===a)return JSON.stringify(e).toLowerCase().includes(t);const r=e[a];return r&&String(r).toLowerCase().includes(t)})}i&&c.sort((t,e)=>{const r=t[i],n=e[i];if(r===n)return 0;if(null==r)return 1;if(null==n)return-1;if("number"==typeof r&&"number"==typeof n)return"desc"===o?n-r:r-n;const s=String(r).localeCompare(String(n));return"desc"===o?-s:s});const d=c.length,u=Math.ceil(d/n);return{records:c.slice(r*n,(r+1)*n),totalCount:d,page:r,pageSize:n,totalPages:u,hasMore:(r+1)*n<d,hasPrev:r>0}}async function qd(){let t=[];try{t=await ll.computedMetrics.toArray()}catch(t){console.error("Error fetching computedMetrics:",t)}const e=Date.now(),r=new Set(t.map(t=>t.key)),n=t.map(t=>{const r=t.validUntil-e;let n="valid";r<=0?n="stale":r<36e5&&(n="expiring");const i=Wd.find(e=>e.key===t.key);return{key:t.key,description:i?.description||"Custom metric",expectedTtl:i?.ttl||"Unknown",computedAt:t.computedAt,validUntil:t.validUntil,timeRemaining:r,status:n,dataSize:JSON.stringify(t.data||{}).length,hasData:!!t.data}});return Wd.forEach(t=>{r.has(t.key)||n.push({key:t.key,description:t.description,expectedTtl:t.ttl,computedAt:null,validUntil:null,timeRemaining:null,status:"never",dataSize:0,hasData:!1})}),n.sort((t,e)=>t.key.localeCompare(e.key))}function Ud(t){if(!t)return"-";const e=new Date(t),r=new Date-e,n=Math.floor(r/6e4),i=Math.floor(r/36e5),o=Math.floor(r/864e5);return n<1?"just now":n<60?`${n}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:e.toLocaleDateString()}function Kd(t){if(!t||t<=0)return"expired";const e=Math.floor(t/6e4),r=Math.floor(t/36e5),n=Math.floor(t/864e5);return e<60?`${e}m`:r<24?`${r}h`:`${n}d`}function Yd(t,e,r){const n=t.slice();return n[61]=e[r],n}function Qd(t,e,r){const n=t.slice();return n[64]=e[r],n}function Jd(t,e,r){const n=t.slice();return n[67]=e[r],n}function Xd(t,e,r){const n=t.slice();return n[70]=e[r],n}function Gd(t,e,r){const n=t.slice();return n[73]=e[r],n[75]=r,n}function Zd(t,e,r){const n=t.slice();return n[76]=e[r][0],n[77]=e[r][1],n}function tu(t,e,r){const n=t.slice();return n[80]=e[r],n}function eu(t,e,r){const n=t.slice();return n[80]=e[r],n}function ru(t,e,r){const n=t.slice();return n[70]=e[r],n}function nu(t,e,r){const n=t.slice();return n[87]=e[r],n}function iu(t){let e;return{c(){e=w("")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function ou(t){let e;return{c(){e=v("span"),e.textContent="",A(e,"class","animate-spin")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function su(t){let e,r;return{c(){e=v("div"),r=w(t[1]),A(e,"class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg")},m(t,n){b(t,e,n),m(e,r)},p(t,e){2&e[0]&&T(r,t[1])},d(t){t&&y(e)}}}function au(t){let e,r,n,i,o,s,a,l,c,d,u,h=t[2].totalRecords.toLocaleString()+"",g=t[2].estimatedSize+"",f=it(t[2].tables),p=[];for(let e=0;e<f.length;e+=1)p[e]=lu(nu(t,f,e));return{c(){e=v("div"),r=v("h3"),n=v("span"),n.textContent="",i=w(" Database Overview\n        "),o=v("span"),s=w("Total: "),a=w(h),l=w(" records  "),c=w(g),d=_(),u=v("div");for(let t=0;t<p.length;t+=1)p[t].c();A(o,"class","text-xs font-normal text-gray-400 dark:text-gray-500"),A(r,"class","text-sm font-semibold text-gray-600 dark:text-gray-400 mb-3 flex items-center gap-2"),A(u,"class","grid grid-cols-4 md:grid-cols-7 gap-2"),A(e,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 transition-colors")},m(t,h){b(t,e,h),m(e,r),m(r,n),m(r,i),m(r,o),m(o,s),m(o,a),m(o,l),m(o,c),m(e,d),m(e,u);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(u,null)},p(t,e){if(4&e[0]&&h!==(h=t[2].totalRecords.toLocaleString()+"")&&T(a,h),4&e[0]&&g!==(g=t[2].estimatedSize+"")&&T(c,g),524300&e[0]){let r;for(f=it(t[2].tables),r=0;r<f.length;r+=1){const n=nu(t,f,r);p[r]?p[r].p(n,e):(p[r]=lu(n),p[r].c(),p[r].m(u,null))}for(;r<p.length;r+=1)p[r].d(1);p.length=f.length}},d(t){t&&y(e),x(p,t)}}}function lu(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f=t[87].icon+"",p=t[87].count.toLocaleString()+"",x=t[87].name+"";function k(){return t[37](t[87])}return{c(){e=v("button"),r=v("div"),n=w(f),i=_(),o=v("div"),s=w(p),a=_(),l=v("div"),c=w(x),d=_(),A(r,"class","text-2xl"),A(o,"class","text-lg font-bold text-gray-800 dark:text-gray-100"),A(l,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),A(e,"class",u="p-3 rounded-lg border transition-all hover:shadow-md "+(t[3]===t[87].name?"bg-blue-50 dark:bg-blue-900/40 border-blue-300 dark:border-blue-800":"bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"))},m(t,u){b(t,e,u),m(e,r),m(r,n),m(e,i),m(e,o),m(o,s),m(e,a),m(e,l),m(l,c),m(e,d),h||(g=M(e,"click",k),h=!0)},p(r,i){t=r,4&i[0]&&f!==(f=t[87].icon+"")&&T(n,f),4&i[0]&&p!==(p=t[87].count.toLocaleString()+"")&&T(s,p),4&i[0]&&x!==(x=t[87].name+"")&&T(c,x),12&i[0]&&u!==(u="p-3 rounded-lg border transition-all hover:shadow-md "+(t[3]===t[87].name?"bg-blue-50 dark:bg-blue-900/40 border-blue-300 dark:border-blue-800":"bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"))&&A(e,"class",u)},d(t){t&&y(e),h=!1,g()}}}function cu(t){let e,r,n,i=t[70]+"";return{c(){e=v("option"),r=w(i),e.__value=n=t[70],P(e,e.__value)},m(t,n){b(t,e,n),m(e,r)},p(t,o){32&o[0]&&i!==(i=t[70]+"")&&T(r,i),32&o[0]&&n!==(n=t[70])&&(e.__value=n,P(e,e.__value))},d(t){t&&y(e)}}}function du(e){let r,n,i;return{c(){r=v("button"),r.textContent=" Clear",A(r,"class","px-3 py-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-colors")},m(t,o){b(t,r,o),n||(i=M(r,"click",e[44]),n=!0)},p:t,d(t){t&&y(r),n=!1,i()}}}function uu(t){let e,r,n,i,o,s,a,l,c,d,u,h,g=t[14].hasValue?"Has":"Missing",f=t[14].field+"";return{c(){e=v("div"),r=v("span"),r.textContent="Filter:",n=_(),i=v("span"),o=w(g),s=w(' "'),a=w(f),l=w('"'),c=_(),d=v("button"),d.textContent="",A(r,"class","text-gray-500 dark:text-gray-400"),A(i,"class","px-2 py-1 bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 rounded"),A(d,"class","text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"),A(e,"class","mt-2 flex items-center gap-2 text-sm")},m(g,f){b(g,e,f),m(e,r),m(e,n),m(e,i),m(i,o),m(i,s),m(i,a),m(i,l),m(e,c),m(e,d),u||(h=M(d,"click",t[26]),u=!0)},p(t,e){16384&e[0]&&g!==(g=t[14].hasValue?"Has":"Missing")&&T(o,g),16384&e[0]&&f!==(f=t[14].field+"")&&T(a,f)},d(t){t&&y(e),u=!1,h()}}}function hu(t){let e,r,n,i,o,s,a,l=it(t[35](t[3])),c=[];for(let e=0;e<l.length;e+=1)c[e]=bu(eu(t,l,e));let d=it(t[4]),u=[];for(let e=0;e<d.length;e+=1)u[e]=Mu(Gd(t,d,e));return{c(){e=v("table"),r=v("thead"),n=v("tr"),i=v("th"),o=_();for(let t=0;t<c.length;t+=1)c[t].c();s=_(),a=v("tbody");for(let t=0;t<u.length;t+=1)u[t].c();A(i,"class","w-8 px-2 py-3"),A(r,"class","bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"),A(a,"class","divide-y divide-gray-200 dark:divide-gray-700"),A(e,"class","w-full text-sm")},m(t,l){b(t,e,l),m(e,r),m(r,n),m(n,i),m(n,o);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(n,null);m(e,s),m(e,a);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(a,null)},p(t,e){if(4197384&e[0]|16&e[1]){let r;for(l=it(t[35](t[3])),r=0;r<l.length;r+=1){const i=eu(t,l,r);c[r]?c[r].p(i,e):(c[r]=bu(i),c[r].c(),c[r].m(n,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=l.length}if(134221848&e[0]|16&e[1]){let r;for(d=it(t[4]),r=0;r<d.length;r+=1){const n=Gd(t,d,r);u[r]?u[r].p(n,e):(u[r]=Mu(n),u[r].c(),u[r].m(a,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=d.length}},d(t){t&&y(e),x(c,t),x(u,t)}}}function gu(e){let r;return{c(){r=v("div"),r.textContent="No records found",A(r,"class","p-8 text-center text-gray-500 dark:text-gray-400")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function fu(e){let r;return{c(){r=v("div"),r.innerHTML='<span class="animate-spin inline-block mr-2"></span> Loading...',A(r,"class","p-8 text-center text-gray-500 dark:text-gray-400")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function pu(e){let r;return{c(){r=v("span"),r.textContent="",A(r,"class","text-gray-300 dark:text-gray-600")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function mu(t){let e,r,n="asc"===t[11]?"":"";return{c(){e=v("span"),r=w(n),A(e,"class","text-blue-500 dark:text-blue-400")},m(t,n){b(t,e,n),m(e,r)},p(t,e){2048&e[0]&&n!==(n="asc"===t[11]?"":"")&&T(r,n)},d(t){t&&y(e)}}}function bu(t){let e,r,n,i,o,s,a,l=t[80]+"";function c(t,e){return t[10]===t[80]?mu:pu}let d=c(t),u=d(t);function h(){return t[45](t[80])}return{c(){e=v("th"),r=v("span"),n=w(l),i=_(),u.c(),o=_(),A(r,"class","flex items-center gap-1"),A(e,"class","px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors")},m(t,l){b(t,e,l),m(e,r),m(r,n),m(r,i),u.m(r,null),m(e,o),s||(a=M(e,"click",h),s=!0)},p(e,i){t=e,8&i[0]&&l!==(l=t[80]+"")&&T(n,l),d===(d=c(t))&&u?u.p(t,i):(u.d(1),u=d(t),u&&(u.c(),u.m(r,null)))},d(t){t&&y(e),u.d(),s=!1,a()}}}function yu(t){let e,r,n,i,o=Iu(t[73][t[80]])+"";return{c(){e=v("td"),r=w(o),n=_(),A(e,"class","px-4 py-3 text-gray-700 dark:text-gray-300 max-w-xs truncate"),A(e,"title",i=String(t[73][t[80]]??""))},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,n){24&n[0]&&o!==(o=Iu(t[73][t[80]])+"")&&T(r,o),24&n[0]&&i!==(i=String(t[73][t[80]]??""))&&A(e,"title",i)},d(t){t&&y(e)}}}function xu(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p;function k(){return t[47](t[73])}let w=t[73].url&&vu(t),C=it(Object.entries(t[73])),D=[];for(let e=0;e<C.length;e+=1)D[e]=Cu(Zd(t,C,e));return{c(){e=v("tr"),r=v("td"),n=v("div"),i=v("div"),o=v("h4"),o.textContent="Record Details",s=_(),a=v("div"),l=v("button"),l.textContent=" Copy JSON",c=_(),w&&w.c(),d=_(),u=v("div");for(let t=0;t<D.length;t+=1)D[t].c();g=_(),A(o,"class","font-semibold text-gray-800 dark:text-gray-200"),A(l,"class","px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 rounded transition-colors"),A(a,"class","flex gap-2"),A(i,"class","flex items-center justify-between mb-3"),A(u,"class","grid grid-cols-2 md:grid-cols-3 gap-3 text-sm"),A(n,"class","bg-white dark:bg-gray-900 rounded-lg border border-blue-200 dark:border-blue-800 p-4 shadow-sm transition-colors"),A(r,"colspan",h=t[35](t[3]).length+1),A(r,"class","px-4 py-4"),A(e,"class","bg-blue-50 dark:bg-blue-900/10")},m(t,h){b(t,e,h),m(e,r),m(r,n),m(n,i),m(i,o),m(i,s),m(i,a),m(a,l),m(a,c),w&&w.m(a,null),m(n,d),m(n,u);for(let t=0;t<D.length;t+=1)D[t]&&D[t].m(u,null);m(e,g),f||(p=M(l,"click",S(k)),f=!0)},p(e,n){if((t=e)[73].url?w?w.p(t,n):(w=vu(t),w.c(),w.m(a,null)):w&&(w.d(1),w=null),16&n[0]){let e;for(C=it(Object.entries(t[73])),e=0;e<C.length;e+=1){const r=Zd(t,C,e);D[e]?D[e].p(r,n):(D[e]=Cu(r),D[e].c(),D[e].m(u,null))}for(;e<D.length;e+=1)D[e].d(1);D.length=C.length}8&n[0]&&h!==(h=t[35](t[3]).length+1)&&A(r,"colspan",h)},d(t){t&&y(e),w&&w.d(),x(D,t),f=!1,p()}}}function vu(t){let e,r,n,i,o;return{c(){e=v("a"),r=w(" Open URL"),A(e,"href",n=t[73].url),A(e,"target","_blank"),A(e,"rel","noopener"),A(e,"class","px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/40 hover:bg-blue-200 dark:hover:bg-blue-800 text-blue-700 dark:text-blue-300 rounded transition-colors")},m(n,s){b(n,e,s),m(e,r),i||(o=M(e,"click",S(t[36])),i=!0)},p(t,r){16&r[0]&&n!==(n=t[73].url)&&A(e,"href",n)},d(t){t&&y(e),i=!1,o()}}}function ku(t){let e,r=Iu(t[77])+"";return{c(){e=w(r)},m(t,r){b(t,e,r)},p(t,n){16&n[0]&&r!==(r=Iu(t[77])+"")&&T(e,r)},d(t){t&&y(e)}}}function wu(t){let e,r=(t[77]?new Date(t[77]).toLocaleString():"-")+"";return{c(){e=w(r)},m(t,r){b(t,e,r)},p(t,n){16&n[0]&&r!==(r=(t[77]?new Date(t[77]).toLocaleString():"-")+"")&&T(e,r)},d(t){t&&y(e)}}}function _u(t){let e,r,n=JSON.stringify(t[77],null,2)+"";return{c(){e=v("pre"),r=w(n),A(e,"class","text-xs overflow-auto max-h-24 font-mono text-blue-600 dark:text-blue-400")},m(t,n){b(t,e,n),m(e,r)},p(t,e){16&e[0]&&n!==(n=JSON.stringify(t[77],null,2)+"")&&T(r,n)},d(t){t&&y(e)}}}function Cu(t){let e,r,n,i,o,s,a,l=t[76]+"";function c(t,e){return 16&e[0]&&(s=null),"object"==typeof t[77]&&null!==t[77]?_u:(null==s&&(s=!!(t[76].includes("date")||t[76].includes("time")||t[76].includes("At")||"timestamp"===t[76])),s?wu:ku)}let d=c(t,[-1,-1,-1]),u=d(t);return{c(){e=v("div"),r=v("div"),n=w(l),i=_(),o=v("div"),u.c(),a=_(),A(r,"class","text-xs text-gray-500 dark:text-gray-400 font-medium"),A(o,"class","text-gray-800 dark:text-gray-200 break-all"),A(e,"class","bg-gray-50 dark:bg-gray-800/50 rounded p-2 border border-gray-100 dark:border-gray-700/50")},m(t,s){b(t,e,s),m(e,r),m(r,n),m(e,i),m(e,o),u.m(o,null),m(e,a)},p(t,e){16&e[0]&&l!==(l=t[76]+"")&&T(n,l),d===(d=c(t,e))&&u?u.p(t,e):(u.d(1),u=d(t),u&&(u.c(),u.m(o,null)))},d(t){t&&y(e),u.d()}}}function Mu(t){let e,r,n,i,o,s,a,l,c,d=t[12]===t[75]?"":"",u=it(t[35](t[3])),h=[];for(let e=0;e<u.length;e+=1)h[e]=yu(tu(t,u,e));function g(){return t[46](t[75])}let f=t[12]===t[75]&&xu(t);return{c(){e=v("tr"),r=v("td"),n=w(d),i=_();for(let t=0;t<h.length;t+=1)h[t].c();s=_(),f&&f.c(),a=C(),A(r,"class","px-2 py-3 text-center text-gray-400 dark:text-gray-500"),A(e,"class",o="hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors "+(t[12]===t[75]?"bg-blue-50 dark:bg-blue-900/20":""))},m(t,o){b(t,e,o),m(e,r),m(r,n),m(e,i);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null);b(t,s,o),f&&f.m(t,o),b(t,a,o),l||(c=M(e,"click",g),l=!0)},p(r,i){if(t=r,4096&i[0]&&d!==(d=t[12]===t[75]?"":"")&&T(n,d),24&i[0]|16&i[1]){let r;for(u=it(t[35](t[3])),r=0;r<u.length;r+=1){const n=tu(t,u,r);h[r]?h[r].p(n,i):(h[r]=yu(n),h[r].c(),h[r].m(e,null))}for(;r<h.length;r+=1)h[r].d(1);h.length=u.length}4096&i[0]&&o!==(o="hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors "+(t[12]===t[75]?"bg-blue-50 dark:bg-blue-900/20":""))&&A(e,"class",o),t[12]===t[75]?f?f.p(t,i):(f=xu(t),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},d(t){t&&(y(e),y(s),y(a)),x(h,t),f&&f.d(t),l=!1,c()}}}function Su(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,L,O,R,B,j,$,z,I,F,N,W,H,V=t[7].page+1+"",q=(t[7].totalPages||1)+"";return{c(){e=v("div"),r=v("div"),i=v("span"),i.textContent="Show",o=_(),s=v("select"),a=v("option"),a.textContent="10",l=v("option"),l.textContent="25",c=v("option"),c.textContent="50",d=v("option"),d.textContent="100",h=_(),g=v("span"),g.textContent="per page",f=_(),p=v("div"),x=v("button"),k=w(" Prev"),D=_(),L=v("span"),O=w("Page "),R=w(V),B=w(" of "),j=w(q),$=_(),z=v("button"),I=w("Next "),a.__value=10,P(a,a.__value),l.__value=25,P(l,l.__value),c.__value=50,P(c,c.__value),d.__value=100,P(d,d.__value),A(s,"class","px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"),A(r,"class","flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"),x.disabled=C=!t[7].hasPrev,A(x,"class",S="px-3 py-1 rounded border border-gray-300 dark:border-gray-600 "+(t[7].hasPrev?"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300":"opacity-50 cursor-not-allowed text-gray-400 dark:text-gray-500")),A(L,"class","text-sm text-gray-600 dark:text-gray-400"),z.disabled=F=!t[7].hasMore,A(z,"class",N="px-3 py-1 rounded border border-gray-300 dark:border-gray-600 "+(t[7].hasMore?"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300":"opacity-50 cursor-not-allowed text-gray-400 dark:text-gray-500")),A(p,"class","flex items-center gap-2"),A(e,"class","p-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between transition-colors")},m(n,u){b(n,e,u),m(e,r),m(r,i),m(r,o),m(r,s),m(s,a),m(s,l),m(s,c),m(s,d),E(s,t[7].pageSize),m(r,h),m(r,g),m(e,f),m(e,p),m(p,x),m(x,k),m(p,D),m(p,L),m(L,O),m(L,R),m(L,B),m(L,j),m(p,$),m(p,z),m(z,I),W||(H=[M(s,"change",t[48]),M(x,"click",t[49]),M(z,"click",t[50])],W=!0)},p(t,e){128&e[0]&&u!==(u=t[7].pageSize)&&E(s,t[7].pageSize),128&e[0]&&C!==(C=!t[7].hasPrev)&&(x.disabled=C),128&e[0]&&S!==(S="px-3 py-1 rounded border border-gray-300 dark:border-gray-600 "+(t[7].hasPrev?"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300":"opacity-50 cursor-not-allowed text-gray-400 dark:text-gray-500"))&&A(x,"class",S),128&e[0]&&V!==(V=t[7].page+1+"")&&T(R,V),128&e[0]&&q!==(q=(t[7].totalPages||1)+"")&&T(j,q),128&e[0]&&F!==(F=!t[7].hasMore)&&(z.disabled=F),128&e[0]&&N!==(N="px-3 py-1 rounded border border-gray-300 dark:border-gray-600 "+(t[7].hasMore?"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300":"opacity-50 cursor-not-allowed text-gray-400 dark:text-gray-500"))&&A(z,"class",N)},d(t){t&&y(e),W=!1,n(H)}}}function Au(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,P,E=t[70].field+"",O=t[70].coverage+"",R=t[70].populated+"";function B(){return t[51](t[70])}function j(){return t[52](t[70])}return{c(){e=v("div"),r=v("div"),i=w(E),s=_(),a=v("div"),l=v("button"),d=_(),u=v("button"),g=_(),f=v("div"),p=w(O),x=w("% ("),k=w(R),C=w(")"),S=_(),A(r,"class","w-28 text-gray-600 dark:text-gray-400 truncate font-mono text-xs"),A(r,"title",o=t[70].field),A(l,"class","h-full bg-green-400 dark:bg-green-600 hover:bg-green-500 dark:hover:bg-green-500 transition-colors"),L(l,"width",t[70].coverage+"%"),A(l,"title",c="Show "+t[70].populated+" records with this field"),A(u,"class","h-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex-1"),A(u,"title",h="Show "+t[70].empty+" records without this field"),A(a,"class","flex-1 h-5 bg-gray-100 dark:bg-gray-900 rounded-full overflow-hidden flex cursor-pointer"),A(a,"title","Click to filter"),A(f,"class","w-20 text-right text-gray-500 dark:text-gray-400 text-xs"),A(e,"class","flex items-center gap-3 text-sm")},m(t,n){b(t,e,n),m(e,r),m(r,i),m(e,s),m(e,a),m(a,l),m(a,d),m(a,u),m(e,g),m(e,f),m(f,p),m(f,x),m(f,k),m(f,C),m(e,S),D||(P=[M(l,"click",B),M(u,"click",j)],D=!0)},p(e,n){t=e,64&n[0]&&E!==(E=t[70].field+"")&&T(i,E),64&n[0]&&o!==(o=t[70].field)&&A(r,"title",o),64&n[0]&&L(l,"width",t[70].coverage+"%"),64&n[0]&&c!==(c="Show "+t[70].populated+" records with this field")&&A(l,"title",c),64&n[0]&&h!==(h="Show "+t[70].empty+" records without this field")&&A(u,"title",h),64&n[0]&&O!==(O=t[70].coverage+"")&&T(p,O),64&n[0]&&R!==(R=t[70].populated+"")&&T(k,R)},d(t){t&&y(e),D=!1,n(P)}}}function Du(t){let e,r,n,i,o,s,a=t[16].size+"";return{c(){e=v("button"),r=w(" Clear Selected ("),n=w(a),i=w(")"),A(e,"class","px-3 py-1.5 text-sm bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800 rounded-lg transition-colors")},m(a,l){b(a,e,l),m(e,r),m(e,n),m(e,i),o||(s=M(e,"click",t[31]),o=!0)},p(t,e){65536&e[0]&&a!==(a=t[16].size+"")&&T(n,a)},d(t){t&&y(e),o=!1,s()}}}function Tu(t){let e,r,n;function i(){return t[54](t[67])}return{c(){e=v("button"),e.textContent=" View",A(e,"class","px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors")},m(t,o){b(t,e,o),r||(n=M(e,"click",i),r=!0)},p(e,r){t=e},d(t){t&&y(e),r=!1,n()}}}function Pu(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,P,L,E,O,R,B,j,$,z=Nu(t[67].status)+"",I=t[67].key+"",F=t[67].description+"",N=(t[67].computedAt?Ud(t[67].computedAt):"never")+"",W=t[67].timeRemaining?`expires in ${Kd(t[67].timeRemaining)}`:"-",H=t[67].status+"";function V(){return t[53](t[67])}let q=t[67].hasData&&Tu(t);return{c(){e=v("div"),r=v("input"),i=_(),o=v("span"),s=w(z),a=_(),l=v("div"),c=v("div"),d=w(I),u=_(),h=v("div"),g=w(F),f=_(),p=v("div"),x=v("div"),k=w(N),C=_(),S=v("div"),D=w(W),P=_(),L=v("span"),E=w(H),R=_(),q&&q.c(),B=_(),A(r,"type","checkbox"),r.checked=n=t[16].has(t[67].key),A(r,"class","rounded dark:bg-gray-700 dark:border-gray-600"),A(o,"class","text-lg"),A(c,"class","font-mono text-gray-800 dark:text-gray-100"),A(h,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),A(l,"class","flex-1 min-w-0"),A(p,"class","text-xs text-gray-500 dark:text-gray-400 text-right"),A(L,"class",O="px-2 py-0.5 text-xs rounded-full "+Fu(t[67].status)),A(e,"class","flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded text-sm transition-colors")},m(t,n){b(t,e,n),m(e,r),m(e,i),m(e,o),m(o,s),m(e,a),m(e,l),m(l,c),m(c,d),m(l,u),m(l,h),m(h,g),m(e,f),m(e,p),m(p,x),m(x,k),m(p,C),m(p,S),m(S,D),m(e,P),m(e,L),m(L,E),m(e,R),q&&q.m(e,null),m(e,B),j||($=M(r,"change",V),j=!0)},p(i,o){t=i,98304&o[0]&&n!==(n=t[16].has(t[67].key))&&(r.checked=n),32768&o[0]&&z!==(z=Nu(t[67].status)+"")&&T(s,z),32768&o[0]&&I!==(I=t[67].key+"")&&T(d,I),32768&o[0]&&F!==(F=t[67].description+"")&&T(g,F),32768&o[0]&&N!==(N=(t[67].computedAt?Ud(t[67].computedAt):"never")+"")&&T(k,N),32768&o[0]&&W!==(W=t[67].timeRemaining?`expires in ${Kd(t[67].timeRemaining)}`:"-")&&T(D,W),32768&o[0]&&H!==(H=t[67].status+"")&&T(E,H),32768&o[0]&&O!==(O="px-2 py-0.5 text-xs rounded-full "+Fu(t[67].status))&&A(L,"class",O),t[67].hasData?q?q.p(t,o):(q=Tu(t),q.c(),q.m(e,B)):q&&(q.d(1),q=null)},d(t){t&&y(e),q&&q.d(),j=!1,$()}}}function Lu(e){let r;return{c(){r=v("div"),r.innerHTML='<span class="animate-spin inline-block mr-2"></span> Loading...',A(r,"class","text-center text-gray-500 dark:text-gray-400 py-8")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Eu(t){let e,r=it(t[18].layers),n=[];for(let e=0;e<r.length;e+=1)n[e]=Bu(Yd(t,r,e));return{c(){e=v("div");for(let t=0;t<n.length;t+=1)n[t].c();A(e,"class","bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-4 border border-gray-100 dark:border-gray-700/50")},m(t,r){b(t,e,r);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null)},p(t,i){if(262144&i[0]){let o;for(r=it(t[18].layers),o=0;o<r.length;o+=1){const s=Yd(t,r,o);n[o]?n[o].p(s,i):(n[o]=Bu(s),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&y(e),x(n,t)}}}function Ou(t){let e,r,n,i,o=t[64].label+"";return{c(){e=v("span"),r=w(o),n=_(),A(e,"class",i="px-3 py-1.5 rounded-lg text-xs font-medium "+zu(t[64].status)+" shadow-sm transition-colors border border-black/5 dark:border-white/5")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,n){262144&n[0]&&o!==(o=t[64].label+"")&&T(r,o),262144&n[0]&&i!==(i="px-3 py-1.5 rounded-lg text-xs font-medium "+zu(t[64].status)+" shadow-sm transition-colors border border-black/5 dark:border-white/5")&&A(e,"class",i)},d(t){t&&y(e)}}}function Ru(t){let e;return{c(){e=v("div"),e.textContent="",A(e,"class","text-center text-gray-300 dark:text-gray-700 text-lg")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Bu(t){let e,r,n,i,o,s,a,l=t[61].title+"",c=it(t[61].items),d=[];for(let e=0;e<c.length;e+=1)d[e]=Ou(Qd(t,c,e));let u=t[61]!==t[18].layers[t[18].layers.length-1]&&Ru();return{c(){e=v("div"),r=v("div"),n=w(l),i=_(),o=v("div");for(let t=0;t<d.length;t+=1)d[t].c();s=_(),u&&u.c(),a=C(),A(r,"class","text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2"),A(o,"class","flex flex-wrap justify-center gap-2"),A(e,"class","text-center")},m(t,l){b(t,e,l),m(e,r),m(r,n),m(e,i),m(e,o);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(o,null);b(t,s,l),u&&u.m(t,l),b(t,a,l)},p(t,e){if(262144&e[0]&&l!==(l=t[61].title+"")&&T(n,l),262144&e[0]){let r;for(c=it(t[61].items),r=0;r<c.length;r+=1){const n=Qd(t,c,r);d[r]?d[r].p(n,e):(d[r]=Ou(n),d[r].c(),d[r].m(o,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=c.length}t[61]!==t[18].layers[t[18].layers.length-1]?u||(u=Ru(),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},d(t){t&&(y(e),y(s),y(a)),x(d,t),u&&u.d(t)}}}function ju(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,P,L=t[17].key+"",E=JSON.stringify(t[17].data,null,2)+"";return{c(){e=v("div"),r=v("div"),i=v("div"),o=v("h3"),s=w("Cached Data: "),a=v("span"),l=w(L),c=_(),d=v("button"),d.textContent="",u=_(),h=v("div"),g=v("pre"),f=w(E),p=_(),x=v("div"),k=v("button"),k.textContent=" Copy JSON",C=_(),S=v("button"),S.textContent="Close",A(a,"class","font-mono text-blue-600 dark:text-blue-400"),A(o,"class","font-semibold text-gray-800 dark:text-gray-100"),A(d,"class","text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-xl transition-colors"),A(i,"class","p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"),A(g,"class","text-xs bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg overflow-auto border border-gray-100 dark:border-gray-700/50 font-mono text-blue-800 dark:text-blue-300"),A(h,"class","p-4 overflow-auto max-h-[60vh]"),A(k,"class","px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors"),A(S,"class","px-4 py-2 bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 text-white rounded-lg transition-colors"),A(x,"class","p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2"),A(r,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden border border-gray-200 dark:border-gray-700 animate-in fade-in zoom-in duration-200"),A(e,"class","fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center z-50 p-4 backdrop-blur-sm transition-all")},m(n,y){b(n,e,y),m(e,r),m(r,i),m(i,o),m(o,s),m(o,a),m(a,l),m(i,c),m(i,d),m(r,u),m(r,h),m(h,g),m(g,f),m(r,p),m(r,x),m(x,k),m(x,C),m(x,S),D||(P=[M(d,"click",t[33]),M(k,"click",t[55]),M(S,"click",t[33])],D=!0)},p(t,e){131072&e[0]&&L!==(L=t[17].key+"")&&T(l,L),131072&e[0]&&E!==(E=JSON.stringify(t[17].data,null,2)+"")&&T(f,E)},d(t){t&&y(e),D=!1,n(P)}}}function $u(e){let r,i,o,s,a,l,c,d,u,h,g,f,p,k,C,S,D,L,O,R,B,j,$,z,I,F,N,W,H,V,q,U,Y,Q,J,X,G,Z,tt,et,rt,nt,ot,st,at,lt,ct,dt,ut,ht,gt,ft,pt,mt,bt,yt,xt,vt,kt,wt,_t,Ct,Mt,St,At,Dt,Tt,Pt,Lt,Et,Ot,Rt,Bt,jt,$t=(e[2]?.tables.find(e[38])?.icon||"")+"",zt=e[7].totalCount.toLocaleString()+"",It=e[15].filter(Wu).length+"",Ft=e[15].length+"";function Nt(t,e){return t[0]?ou:iu}let Wt=Nt(e),Ht=Wt(e),Vt=e[1]&&su(e),qt=e[2]&&au(e),Ut=it(e[5]),Kt=[];for(let t=0;t<Ut.length;t+=1)Kt[t]=cu(ru(e,Ut,t));let Yt=(e[8]||e[14])&&du(e),Qt=e[14]&&uu(e);function Jt(t,e){return t[13]?fu:0===t[4].length?gu:hu}let Xt=Jt(e),Gt=Xt(e),Zt=e[4].length>0&&Su(e),te=it(e[6].slice(0,12)),ee=[];for(let t=0;t<te.length;t+=1)ee[t]=Au(Xd(e,te,t));let re=e[16].size>0&&Du(e),ne=it(e[15]),ie=[];for(let t=0;t<ne.length;t+=1)ie[t]=Pu(Jd(e,ne,t));function oe(t,e){return t[18]?Eu:Lu}let se=oe(e),ae=se(e),le=e[17]&&ju(e);return{c(){r=v("div"),i=v("div"),o=v("h2"),o.textContent=" Data Explorer",s=_(),a=v("button"),Ht.c(),l=w("\n      Refresh"),c=_(),Vt&&Vt.c(),d=_(),qt&&qt.c(),u=_(),h=v("div"),g=v("div"),f=v("div"),p=v("h3"),k=w($t),C=_(),S=w(e[3]),D=_(),L=v("span"),O=w("("),R=w(zt),B=w(" records)"),j=_(),$=v("div"),z=v("button"),z.textContent=" Export Filtered",I=_(),F=v("button"),F.textContent=" Export All",N=_(),W=v("div"),H=v("div"),V=v("input"),q=_(),U=v("span"),U.textContent="",Y=_(),Q=v("select"),J=v("option"),J.textContent="All Fields";for(let t=0;t<Kt.length;t+=1)Kt[t].c();X=_(),G=v("button"),G.textContent="Search",Z=_(),Yt&&Yt.c(),tt=_(),Qt&&Qt.c(),et=_(),rt=v("div"),Gt.c(),nt=_(),Zt&&Zt.c(),ot=_(),st=v("div"),at=v("h3"),at.innerHTML=' Field Coverage\n      <span class="text-sm font-normal text-gray-500 dark:text-gray-400">Click bars to filter</span>',lt=_(),ct=v("div");for(let t=0;t<ee.length;t+=1)ee[t].c();dt=_(),ut=v("div"),ht=v("div"),gt=v("h3"),ft=w(" Cached Metrics\n        "),pt=v("span"),mt=w(It),bt=w(" valid / "),yt=w(Ft),xt=w(" total"),vt=_(),re&&re.c(),kt=_(),wt=v("div"),_t=v("label"),Ct=v("input"),St=w("\n        Select All"),At=_();for(let t=0;t<ie.length;t+=1)ie[t].c();Dt=_(),Tt=v("div"),Pt=v("h3"),Pt.innerHTML=' Metrics Dependency Flow\n      <span class="text-sm font-normal text-gray-500 dark:text-gray-400">Colors indicate cache status</span>',Lt=_(),Et=v("div"),Et.innerHTML="<span> Valid</span> <span> Expiring Soon</span> <span> Stale/Expired</span> <span> Never Computed</span>",Ot=_(),ae.c(),Rt=_(),le&&le.c(),A(o,"class","text-xl font-bold text-gray-800 flex items-center gap-2"),A(a,"class","px-3 py-1.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2 text-sm"),a.disabled=e[0],A(i,"class","flex items-center justify-between"),A(L,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),A(p,"class","font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"),A(z,"class","px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-gray-700 dark:text-gray-300 transition-colors"),A(z,"title","Export visible/filtered records"),A(F,"class","px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-gray-700 dark:text-gray-300 transition-colors"),A(F,"title","Export all records"),A($,"class","flex gap-2"),A(f,"class","flex items-center justify-between mb-3"),A(V,"type","text"),A(V,"placeholder","Search records..."),A(V,"class","w-full pl-8 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400"),A(U,"class","absolute left-2.5 top-2.5 text-gray-400"),A(H,"class","flex-1 relative"),J.__value="all",P(J,J.__value),A(Q,"class","px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"),void 0===e[9]&&K(()=>e[43].call(Q)),A(G,"class","px-4 py-2 bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 text-white rounded-lg transition-colors"),A(W,"class","flex gap-2"),A(g,"class","p-4 border-b border-gray-200 dark:border-gray-700"),A(rt,"class","overflow-x-auto"),A(h,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 transition-colors"),A(at,"class","font-semibold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2"),A(ct,"class","space-y-2"),A(st,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 transition-colors"),A(pt,"class","text-sm font-normal text-gray-500 dark:text-gray-400"),A(gt,"class","font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2"),A(ht,"class","flex items-center justify-between mb-3"),A(Ct,"type","checkbox"),Ct.checked=Mt=e[16].size===e[15].length&&e[15].length>0,A(Ct,"class","rounded dark:bg-gray-700 dark:border-gray-600"),A(_t,"class","flex items-center gap-2 p-2 text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded cursor-pointer transition-colors"),A(wt,"class","space-y-1"),A(ut,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 transition-colors"),A(Pt,"class","font-semibold text-gray-800 dark:text-gray-100 mb-3 flex items-center gap-2"),A(Et,"class","flex gap-4 text-xs text-gray-600 dark:text-gray-400 mb-4"),A(Tt,"class","bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 transition-colors"),A(r,"class","data-explorer p-4 space-y-4")},m(t,n){b(t,r,n),m(r,i),m(i,o),m(i,s),m(i,a),Ht.m(a,null),m(a,l),m(r,c),Vt&&Vt.m(r,null),m(r,d),qt&&qt.m(r,null),m(r,u),m(r,h),m(h,g),m(g,f),m(f,p),m(p,k),m(p,C),m(p,S),m(p,D),m(p,L),m(L,O),m(L,R),m(L,B),m(f,j),m(f,$),m($,z),m($,I),m($,F),m(g,N),m(g,W),m(W,H),m(H,V),P(V,e[8]),m(H,q),m(H,U),m(W,Y),m(W,Q),m(Q,J);for(let t=0;t<Kt.length;t+=1)Kt[t]&&Kt[t].m(Q,null);E(Q,e[9],!0),m(W,X),m(W,G),m(W,Z),Yt&&Yt.m(W,null),m(g,tt),Qt&&Qt.m(g,null),m(h,et),m(h,rt),Gt.m(rt,null),m(h,nt),Zt&&Zt.m(h,null),m(r,ot),m(r,st),m(st,at),m(st,lt),m(st,ct);for(let t=0;t<ee.length;t+=1)ee[t]&&ee[t].m(ct,null);m(r,dt),m(r,ut),m(ut,ht),m(ht,gt),m(gt,ft),m(gt,pt),m(pt,mt),m(pt,bt),m(pt,yt),m(pt,xt),m(ht,vt),re&&re.m(ht,null),m(ut,kt),m(ut,wt),m(wt,_t),m(_t,Ct),m(_t,St),m(wt,At);for(let t=0;t<ie.length;t+=1)ie[t]&&ie[t].m(wt,null);m(r,Dt),m(r,Tt),m(Tt,Pt),m(Tt,Lt),m(Tt,Et),m(Tt,Ot),ae.m(Tt,null),m(r,Rt),le&&le.m(r,null),Bt||(jt=[M(a,"click",e[34]),M(z,"click",e[39]),M(F,"click",e[40]),M(V,"input",e[41]),M(V,"keydown",e[42]),M(Q,"change",e[43]),M(G,"click",e[23]),M(Ct,"change",e[30])],Bt=!0)},p(t,e){if(Wt!==(Wt=Nt(t))&&(Ht.d(1),Ht=Wt(t),Ht&&(Ht.c(),Ht.m(a,l))),1&e[0]&&(a.disabled=t[0]),t[1]?Vt?Vt.p(t,e):(Vt=su(t),Vt.c(),Vt.m(r,d)):Vt&&(Vt.d(1),Vt=null),t[2]?qt?qt.p(t,e):(qt=au(t),qt.c(),qt.m(r,u)):qt&&(qt.d(1),qt=null),12&e[0]&&$t!==($t=(t[2]?.tables.find(t[38])?.icon||"")+"")&&T(k,$t),8&e[0]&&T(S,t[3]),128&e[0]&&zt!==(zt=t[7].totalCount.toLocaleString()+"")&&T(R,zt),256&e[0]&&V.value!==t[8]&&P(V,t[8]),32&e[0]){let r;for(Ut=it(t[5]),r=0;r<Ut.length;r+=1){const n=ru(t,Ut,r);Kt[r]?Kt[r].p(n,e):(Kt[r]=cu(n),Kt[r].c(),Kt[r].m(Q,null))}for(;r<Kt.length;r+=1)Kt[r].d(1);Kt.length=Ut.length}if(544&e[0]&&E(Q,t[9]),t[8]||t[14]?Yt?Yt.p(t,e):(Yt=du(t),Yt.c(),Yt.m(W,null)):Yt&&(Yt.d(1),Yt=null),t[14]?Qt?Qt.p(t,e):(Qt=uu(t),Qt.c(),Qt.m(g,null)):Qt&&(Qt.d(1),Qt=null),Xt===(Xt=Jt(t))&&Gt?Gt.p(t,e):(Gt.d(1),Gt=Xt(t),Gt&&(Gt.c(),Gt.m(rt,null))),t[4].length>0?Zt?Zt.p(t,e):(Zt=Su(t),Zt.c(),Zt.m(h,null)):Zt&&(Zt.d(1),Zt=null),33554496&e[0]){let r;for(te=it(t[6].slice(0,12)),r=0;r<te.length;r+=1){const n=Xd(t,te,r);ee[r]?ee[r].p(n,e):(ee[r]=Au(n),ee[r].c(),ee[r].m(ct,null))}for(;r<ee.length;r+=1)ee[r].d(1);ee.length=te.length}if(32768&e[0]&&It!==(It=t[15].filter(Wu).length+"")&&T(mt,It),32768&e[0]&&Ft!==(Ft=t[15].length+"")&&T(yt,Ft),t[16].size>0?re?re.p(t,e):(re=Du(t),re.c(),re.m(ht,null)):re&&(re.d(1),re=null),98304&e[0]&&Mt!==(Mt=t[16].size===t[15].length&&t[15].length>0)&&(Ct.checked=Mt),536969216&e[0]|2&e[1]){let r;for(ne=it(t[15]),r=0;r<ne.length;r+=1){const n=Jd(t,ne,r);ie[r]?ie[r].p(n,e):(ie[r]=Pu(n),ie[r].c(),ie[r].m(wt,null))}for(;r<ie.length;r+=1)ie[r].d(1);ie.length=ne.length}se===(se=oe(t))&&ae?ae.p(t,e):(ae.d(1),ae=se(t),ae&&(ae.c(),ae.m(Tt,null))),t[17]?le?le.p(t,e):(le=ju(t),le.c(),le.m(r,null)):le&&(le.d(1),le=null)},i:t,o:t,d(t){t&&y(r),Ht.d(),Vt&&Vt.d(),qt&&qt.d(),x(Kt,t),Yt&&Yt.d(),Qt&&Qt.d(),Gt.d(),Zt&&Zt.d(),x(ee,t),re&&re.d(),x(ie,t),ae.d(),le&&le.d(),Bt=!1,n(jt)}}}function zu(t){switch(t){case"valid":return"bg-green-500 text-white";case"expiring":return"bg-yellow-500 text-white";case"stale":return"bg-red-500 text-white";case"source":return"bg-blue-500 text-white";case"storage":return"bg-purple-500 text-white";default:return"bg-gray-400 text-white"}}function Iu(t){return null==t?"<null>":"boolean"==typeof t?t?" true":" false":"number"==typeof t?t.toLocaleString():Array.isArray(t)?0===t.length?"[]":`[${t.length} items]`:"object"==typeof t?"{...}":"string"==typeof t&&t.length>60?t.substring(0,60)+"...":String(t)}function Fu(t){switch(t){case"valid":return"bg-green-100 text-green-800";case"expiring":return"bg-yellow-100 text-yellow-800";case"stale":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-600"}}function Nu(t){switch(t){case"valid":return"";case"expiring":return"";case"stale":return"";default:return""}}const Wu=t=>"valid"===t.status;function Hu(t,e,r){let n=!0,i=null,o=null,s="bookmarks",a=[],l=[],c=[],d={page:0,pageSize:25,totalCount:0,totalPages:0},u="",h="all",g=null,f="desc",p=null,m=!1,b=null,y=[],x=new Set,v=null,k=null;async function w(){r(2,o=await Hd())}async function _(){r(18,k=await async function(){const t=await qd(),e=Object.fromEntries(t.map(t=>[t.key,t.status]));return{layers:[{title:" Data Sources",items:[{id:"chromeApi",label:"Chrome Bookmarks API",status:"source"},{id:"activity",label:"User Activity",status:"source"}]},{title:" Storage",items:[{id:"bookmarks",label:"Bookmarks Table",status:"storage"},{id:"events",label:"Events Table",status:"storage"}]},{title:" Computed Metrics",items:[{id:"domainStats",label:"Domain Stats",status:e.domainStats||"none"},{id:"activityTimeline",label:"Activity Timeline",status:e.activityTimeline||"none"},{id:"quickStats",label:"Quick Stats",status:e.quickStats||"none"},{id:"similarities",label:"Similarities",status:e.similarities||"none"},{id:"wordFrequency",label:"Word Frequency",status:e.wordFrequency||"none"}]},{title:" Insights",items:[{id:"insightsSummary",label:"Summary",status:e.insightsSummary||"none"},{id:"expertiseAreas",label:"Expertise",status:e.expertiseAreas||"none"}]}]}}())}async function C(){r(13,m=!0);try{const t={page:d.page,pageSize:d.pageSize,sortBy:g,sortOrder:f,searchQuery:u,searchField:h,fieldFilter:b},e=await Vd(s,t);r(4,a=e.records),r(7,d={page:e.page,pageSize:e.pageSize,totalCount:e.totalCount,totalPages:e.totalPages,hasMore:e.hasMore,hasPrev:e.hasPrev}),r(5,l=await async function(t){const e=await ll[t].limit(100).toArray(),r=new Set;return e.forEach(t=>{Object.keys(t).forEach(t=>r.add(t))}),[...r].sort()}(s)),r(6,c=await async function(t){const e=await ll[t].toArray(),r={};e.forEach(t=>{Object.keys(t).forEach(e=>{r[e]||(r[e]={field:e,populated:0,empty:0,samples:[],types:new Set});const n=t[e];if(null==n||""===n||Array.isArray(n)&&0===n.length)r[e].empty++;else if(r[e].populated++,r[e].types.add(Array.isArray(n)?"array":typeof n),r[e].samples.length<3){let t=n;"string"==typeof n&&n.length>50?t=n.substring(0,50)+"...":Array.isArray(n)?t=n.slice(0,3):"object"==typeof n&&(t="{...}"),r[e].samples.push(t)}})});const n=e.length;return Object.values(r).map(t=>({...t,types:[...t.types],total:n,coverage:n>0?parseFloat((t.populated/n*100).toFixed(1)):0})).sort((t,e)=>e.coverage-t.coverage)}(s))}catch(t){console.error("Error loading table data:",t)}finally{r(13,m=!1)}}async function M(){try{r(15,y=await qd())}catch(t){console.error("Error loading cached metrics:",t)}}async function S(t){r(3,s=t),r(7,d.page=0,d),r(8,u=""),r(10,g=null),r(12,p=null),r(14,b=null),await C()}async function A(t){r(7,d.page=t,d),r(12,p=null),await C()}async function D(t){r(7,d.pageSize=t,d),r(7,d.page=0,d),await C()}async function T(t){g===t?r(11,f="asc"===f?"desc":"asc"):(r(10,g=t),r(11,f="desc")),r(7,d.page=0,d),await C()}async function P(){r(7,d.page=0,d),await C()}function L(){r(8,u=""),r(9,h="all"),P()}async function E(t,e){r(14,b=b?.field===t&&b?.hasValue===e?null:{field:t,hasValue:e}),r(7,d.page=0,d),await C()}function R(){r(14,b=null),C()}function B(t){r(12,p=p===t?null:t)}async function j(t=!1){const e=t?{}:{searchQuery:u,searchField:h,fieldFilter:b},r=await async function(t,e={}){const{records:r}=await Vd(t,{...e,pageSize:999999});return JSON.stringify(r,null,2)}(s,e);!function(t,e){const r=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}(r,`${s}_${(new Date).toISOString().split("T")[0]}.json`)}function $(t){x.has(t)?x.delete(t):x.add(t),r(16,x)}async function I(t){const e=await async function(t){try{const e=await ll.computedMetrics.get(t);return e?.data||null}catch(e){return console.error(`Error getting cached metric ${t}:`,e),null}}(t);r(17,v={key:t,data:e})}z(async()=>{try{await w(),await C(),await M(),await _()}catch(t){r(1,i=t.message)}finally{r(0,n=!1)}});return[n,i,o,s,a,l,c,d,u,h,g,f,p,m,b,y,x,v,k,S,A,D,T,P,L,E,R,B,j,$,function(){x.size===y.length?x.clear():y.forEach(t=>x.add(t.key)),r(16,x)},async function(){const t=[...x];await async function(t){try{return await ll.computedMetrics.bulkDelete(t),!0}catch(t){return console.error("Error invalidating metrics:",t),!1}}(t),x.clear(),await M(),await _()},I,function(){r(17,v=null)},async function(){r(0,n=!0);try{await w(),await C(),await M(),await _()}finally{r(0,n=!1)}},function(t){return{bookmarks:["id","title","domain","category","isAlive"],events:["eventId","bookmarkId","type","timestamp"],cache:["key","timestamp","ttl"],settings:["key"],similarities:["id","bookmark1Id","bookmark2Id","score"],computedMetrics:["key","computedAt","validUntil"],enrichmentQueue:["queueId","bookmarkId","addedAt","priority"]}[t]||l.slice(0,5)},function(e){F.call(this,t,e)},t=>S(t.name),t=>t.name===s,()=>j(!1),()=>j(!0),function(){u=this.value,r(8,u)},t=>"Enter"===t.key&&P(),function(){h=O(this),r(9,h),r(5,l)},()=>{L(),R()},t=>T(t),t=>B(t),t=>function(t){navigator.clipboard.writeText(JSON.stringify(t,null,2))}(t),t=>D(parseInt(t.target.value)),()=>A(d.page-1),()=>A(d.page+1),t=>E(t.field,!0),t=>E(t.field,!1),t=>$(t.key),t=>I(t.key),()=>{navigator.clipboard.writeText(JSON.stringify(v.data,null,2))}]}class Vu extends ht{constructor(t){super(),ut(this,t,Hu,$u,o,{},null,[-1,-1,-1])}}const qu=t=>({}),Uu=t=>({});function Ku(t){let e,r;return{c(){e=v("p"),r=w(t[2]),A(e,"class","text-xs text-gray-500 dark:text-gray-400")},m(t,n){b(t,e,n),m(e,r)},p(t,e){4&e&&T(r,t[2])},d(t){t&&y(e)}}}function Yu(t){let e,r,n;return{c(){e=v("span"),r=w(""),A(e,"class",n="text-gray-400 dark:text-gray-500 transform transition-transform "+(t[0]?"":"rotate-180"))},m(t,n){b(t,e,n),m(e,r)},p(t,r){1&r&&n!==(n="text-gray-400 dark:text-gray-500 transform transition-transform "+(t[0]?"":"rotate-180"))&&A(e,"class",n)},d(t){t&&y(e)}}}function Qu(t){let e,r,n,i;const o=[Xu,Ju],s=[];function a(t,e){return t[4]?0:1}return r=a(t),n=s[r]=o[r](t),{c(){e=v("div"),n.c(),A(e,"class","p-4")},m(t,n){b(t,e,n),s[r].m(e,null),i=!0},p(t,i){let l=r;r=a(t),r===l?s[r].p(t,i):(tt(),nt(s[l],1,1,()=>{s[l]=null}),et(),n=s[r],n?n.p(t,i):(n=s[r]=o[r](t),n.c()),rt(n,1),n.m(e,null))},i(t){i||(rt(n),i=!0)},o(t){nt(n),i=!1},d(t){t&&y(e),s[r].d()}}}function Ju(t){let e;const r=t[11].default,n=d(r,t,t[10],null);return{c(){n&&n.c()},m(t,r){n&&n.m(t,r),e=!0},p(t,i){n&&n.p&&(!e||1024&i)&&g(n,r,t,t[10],e?h(r,t[10],i,null):f(t[10]),null)},i(t){e||(rt(n,t),e=!0)},o(t){nt(n,t),e=!1},d(t){n&&n.d(t)}}}function Xu(e){let r;return{c(){r=v("div"),r.innerHTML='<div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 dark:border-blue-400"></div> <span class="ml-2 text-sm text-gray-500 dark:text-gray-400">Loading...</span>',A(r,"class","flex items-center justify-center py-8")},m(t,e){b(t,r,e)},p:t,i:t,o:t,d(t){t&&y(r)}}}function Gu(t){let e,r,i,o,s,a,l,c,u,p,x,k,C,S,D,P,L,E,O,R,B,j,$=t[2]&&Ku(t);const z=t[11]["header-actions"],I=d(z,t,t[10],Uu);let F=t[5]&&Yu(t),N=!t[0]&&Qu(t);return{c(){e=v("div"),r=v("div"),i=v("div"),o=v("span"),s=w(t[3]),a=_(),l=v("div"),c=v("h3"),u=w(t[1]),x=_(),$&&$.c(),k=_(),C=v("div"),I&&I.c(),S=_(),F&&F.c(),E=_(),N&&N.c(),A(o,"class","text-lg"),A(c,"class",p="text-sm font-semibold "+(t[9][t[6]]||t[9].default)),A(i,"class","flex items-center gap-2"),A(C,"class","flex items-center gap-2"),A(r,"class",D="px-4 py-3 border-b border-gray-100 dark:border-gray-700/50 flex items-center justify-between "+(t[5]?"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50":"")),A(r,"role",P=t[5]?"button":"heading"),A(r,"tabindex",L=t[5]?0:-1),A(e,"class",O="rounded-lg border shadow-sm transition-colors "+(t[8][t[6]]||t[8].default))},m(n,d){b(n,e,d),m(e,r),m(r,i),m(i,o),m(o,s),m(i,a),m(i,l),m(l,c),m(c,u),m(l,x),$&&$.m(l,null),m(r,k),m(r,C),I&&I.m(C,null),m(C,S),F&&F.m(C,null),m(e,E),N&&N.m(e,null),R=!0,B||(j=[M(r,"click",t[7]),M(r,"keypress",t[12])],B=!0)},p(t,[n]){(!R||8&n)&&T(s,t[3]),(!R||2&n)&&T(u,t[1]),(!R||64&n&&p!==(p="text-sm font-semibold "+(t[9][t[6]]||t[9].default)))&&A(c,"class",p),t[2]?$?$.p(t,n):($=Ku(t),$.c(),$.m(l,null)):$&&($.d(1),$=null),I&&I.p&&(!R||1024&n)&&g(I,z,t,t[10],R?h(z,t[10],n,qu):f(t[10]),Uu),t[5]?F?F.p(t,n):(F=Yu(t),F.c(),F.m(C,null)):F&&(F.d(1),F=null),(!R||32&n&&D!==(D="px-4 py-3 border-b border-gray-100 dark:border-gray-700/50 flex items-center justify-between "+(t[5]?"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50":"")))&&A(r,"class",D),(!R||32&n&&P!==(P=t[5]?"button":"heading"))&&A(r,"role",P),(!R||32&n&&L!==(L=t[5]?0:-1))&&A(r,"tabindex",L),t[0]?N&&(tt(),nt(N,1,1,()=>{N=null}),et()):N?(N.p(t,n),1&n&&rt(N,1)):(N=Qu(t),N.c(),rt(N,1),N.m(e,null)),(!R||64&n&&O!==(O="rounded-lg border shadow-sm transition-colors "+(t[8][t[6]]||t[8].default)))&&A(e,"class",O)},i(t){R||(rt(I,t),rt(N),R=!0)},o(t){nt(I,t),nt(N),R=!1},d(t){t&&y(e),$&&$.d(),I&&I.d(t),F&&F.d(),N&&N.d(),B=!1,n(j)}}}function Zu(t,e,r){let{$$slots:n={},$$scope:i}=e,{title:o=""}=e,{subtitle:s=""}=e,{icon:a=""}=e,{loading:l=!1}=e,{collapsible:c=!1}=e,{collapsed:d=!1}=e,{variant:u="default"}=e;function h(){c&&r(0,d=!d)}I();return t.$$set=t=>{"title"in t&&r(1,o=t.title),"subtitle"in t&&r(2,s=t.subtitle),"icon"in t&&r(3,a=t.icon),"loading"in t&&r(4,l=t.loading),"collapsible"in t&&r(5,c=t.collapsible),"collapsed"in t&&r(0,d=t.collapsed),"variant"in t&&r(6,u=t.variant),"$$scope"in t&&r(10,i=t.$$scope)},[d,o,s,a,l,c,u,h,{default:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",success:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800/30",warning:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800/30",danger:"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800/30",info:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800/30"},{default:"text-gray-900 dark:text-gray-100",success:"text-green-800 dark:text-green-300",warning:"text-yellow-800 dark:text-yellow-300",danger:"text-red-800 dark:text-red-300",info:"text-blue-800 dark:text-blue-300"},i,n,t=>"Enter"===t.key&&h()]}class th extends ht{constructor(t){super(),ut(this,t,Zu,Gu,o,{title:1,subtitle:2,icon:3,loading:4,collapsible:5,collapsed:0,variant:6})}}async function eh(){return await ul()}async function rh(){try{const t=await eh(),e={};t.forEach(t=>{if(t.url)try{const r=new URL(t.url),n=r.hostname,i=r.pathname,o=n.split(".").reverse(),s=o[0],a=o[1]||"",l=o.length>2?o.slice(2).reverse().join("."):"www",c=`${a}.${s}`;e[c]||(e[c]={name:c,count:0,subdomains:{}}),e[c].count++,e[c].subdomains[l]||(e[c].subdomains[l]={name:l,count:0,paths:{}}),e[c].subdomains[l].count++;const d=i.split("/").filter(t=>t)[0]||"/";e[c].subdomains[l].paths[d]||(e[c].subdomains[l].paths[d]=0),e[c].subdomains[l].paths[d]++}catch(t){}});return Object.values(e).map(t=>({...t,subdomains:Object.values(t.subdomains).map(t=>({...t,paths:Object.entries(t.paths).map(([t,e])=>({name:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10)})).sort((t,e)=>e.count-t.count)})).sort((t,e)=>e.count-t.count)}catch(t){return console.error("Error building domain hierarchy:",t),[]}}async function nh(){try{const t=await eh(),e=Date.now(),r={"Last 7 days":0,"Last 30 days":0,"Last 90 days":0,"Last year":0,Older:0},n={"Last 7 days":6048e5,"Last 30 days":2592e6,"Last 90 days":7776e6,"Last year":31536e6};return t.forEach(t=>{const i=e-t.dateAdded;i<=n["Last 7 days"]?r["Last 7 days"]++:i<=n["Last 30 days"]?r["Last 30 days"]++:i<=n["Last 90 days"]?r["Last 90 days"]++:i<=n["Last year"]?r["Last year"]++:r.Older++}),Object.entries(r).map(([t,e])=>({period:t,count:e}))}catch(t){return console.error("Error analyzing content freshness:",t),[]}}async function ih(){try{const t=await eh(),e=await ll.events.toArray(),r=Date.now(),n=r-6048e5,i=r-2592e6,o=t.length,s=t.filter(t=>t.category).length,a=t.filter(t=>t.description||t.keywords?.length>0).length,l=t.filter(t=>null!==t.isAlive).length,c=t.filter(t=>!1===t.isAlive).length,d=t.filter(t=>!(t.lastAccessed||t.accessCount&&0!==t.accessCount)).length,u=t.filter(t=>t.dateAdded>n).length,h=t.filter(t=>t.dateAdded>i).length,g=e.filter(t=>t.timestamp>n),f=g.filter(t=>"access"===t.type).length,p=g.filter(t=>"create"===t.type).length,m={};t.forEach(t=>{t.category&&(m[t.category]=(m[t.category]||0)+1)});const b=Object.entries(m).sort(([,t],[,e])=>e-t).slice(0,5),y=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{totalBookmarks:o,categorized:s,categorizedPercentage:o>0?(s/o*100).toFixed(1):0,enriched:a,enrichedPercentage:o>0?(a/o*100).toFixed(1):0,aliveChecked:l,deadLinks:c,neverAccessed:d,neverAccessedPercentage:o>0?(d/o*100).toFixed(1):0,addedThisWeek:u,addedThisMonth:h,accessEventsThisWeek:f,createEventsThisWeek:p,topCategories:b,uniqueDomains:y}}catch(t){return console.error("Error getting insights summary:",t),{}}}async function oh(){try{const t=await ll.events.toArray(),e=Date.now(),r={},n={};t.forEach(t=>{r[t.type]=(r[t.type]||0)+1;const e=new Date(t.timestamp).toISOString().split("T")[0];n[e]||(n[e]={total:0,byType:{}}),n[e].total++,n[e].byType[t.type]=(n[e].byType[t.type]||0)+1});const i=[];for(let t=29;t>=0;t--){const r=new Date(e-24*t*60*60*1e3).toISOString().split("T")[0];i.push({date:r,total:n[r]?.total||0,...n[r]?.byType||{}})}return{summary:r,timeline:i,totalEvents:t.length}}catch(t){return console.error("Error getting event statistics:",t),{summary:{},timeline:[],totalEvents:0}}}async function sh(){try{const t=await eh(),e=t.filter(t=>!1===t.isAlive),r=Date.now();if(0===e.length)return{total:0,byDomain:[],byAge:{recent:0,moderate:0,old:0,ancient:0},byCategory:[],oldestDeadLinks:[],recentlyDied:[],deadLinkRate:0,checkedCount:0};const n={};e.forEach(t=>{const e=t.domain||"Unknown";n[e]=(n[e]||0)+1});const i=Object.entries(n).map(([t,e])=>({domain:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10),o=r-6048e5,s=r-2592e6,a=r-31536e6,l={recent:e.filter(t=>t.dateAdded>o).length,moderate:e.filter(t=>t.dateAdded<=o&&t.dateAdded>s).length,old:e.filter(t=>t.dateAdded<=s&&t.dateAdded>a).length,ancient:e.filter(t=>t.dateAdded<=a).length},c={};e.forEach(t=>{const e=t.category||"Uncategorized";c[e]=(c[e]||0)+1});const d=Object.entries(c).map(([t,e])=>({category:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10),u=[...e].sort((t,e)=>t.dateAdded-e.dateAdded).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,lastChecked:t.lastChecked})),h=[...e].filter(t=>t.lastChecked).sort((t,e)=>e.lastChecked-t.lastChecked).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,lastChecked:t.lastChecked})),g=t.filter(t=>null!==t.isAlive&&void 0!==t.isAlive).length,f=g>0?(e.length/g*100).toFixed(1):0;return{total:e.length,byDomain:i,byAge:l,byCategory:d,oldestDeadLinks:u,recentlyDied:h,deadLinkRate:parseFloat(f),checkedCount:g}}catch(t){return console.error("Error getting dead link insights:",t),{total:0,byDomain:[],byAge:{recent:0,moderate:0,old:0,ancient:0},byCategory:[],oldestDeadLinks:[],recentlyDied:[],deadLinkRate:0,checkedCount:0}}}async function ah(){try{const t=await eh(),e={};t.forEach(t=>{const r=t.category||"uncategorized";e[r]=(e[r]||0)+1});const r=Object.entries(e).map(([e,r])=>({category:e,count:r,percentage:Math.round(r/t.length*1e3)/10})).sort((t,e)=>e.count-t.count),n={};t.forEach(t=>{t.keywords&&Array.isArray(t.keywords)&&t.keywords.forEach(t=>{const e=t.toLowerCase().trim();e.length>2&&(n[e]=(n[e]||0)+1)})});const i=Object.entries(n).map(([t,e])=>({keyword:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,30),o={articles:0,videos:0,documentation:0,tools:0,social:0,code:0,shopping:0,other:0};t.forEach(t=>{const e=(t.url||"").toLowerCase(),r=t.category||"";"video"===r||e.includes("youtube")||e.includes("vimeo")||e.includes("video")?o.videos++:"documentation"===r||e.includes("/docs")||e.includes("/api")||e.includes("/reference")?o.documentation++:"code"===r||e.includes("github")||e.includes("gitlab")||e.includes("stackoverflow")?o.code++:"tool"===r||e.includes("app.")||e.includes("/app")?o.tools++:"social"===r||e.includes("twitter")||e.includes("linkedin")||e.includes("reddit")?o.social++:"shopping"===r||e.includes("amazon")||e.includes("ebay")||e.includes("shop")?o.shopping++:"blog"===r||e.includes("blog")||e.includes("article")||e.includes("medium")?o.articles++:o.other++});const s=Object.entries(o).map(([e,r])=>({type:e,count:r,percentage:Math.round(r/t.length*1e3)/10})).filter(t=>t.count>0).sort((t,e)=>e.count-t.count),a={};t.forEach(t=>{let e="unknown";t.rawMetadata?.other?.language&&(e=t.rawMetadata.other.language.split("-")[0].toLowerCase()),a[e]=(a[e]||0)+1});const l=Object.entries(a).map(([e,r])=>({language:"unknown"===e?"Unknown":e.toUpperCase(),count:r,percentage:Math.round(r/t.length*1e3)/10})).sort((t,e)=>e.count-t.count),c={};t.forEach(t=>{const e=t.folderPath||"Root";c[e]=(c[e]||0)+1});return{categoryBreakdown:r,topicClusters:i,contentTypeMix:s,languageDistribution:l,folderDistribution:Object.entries(c).map(([e,r])=>({folder:e,count:r,percentage:Math.round(r/t.length*1e3)/10})).sort((t,e)=>e.count-t.count).slice(0,15),totalBookmarks:t.length}}catch(t){return console.error("Error getting content analysis:",t),{categoryBreakdown:[],topicClusters:[],contentTypeMix:[],languageDistribution:[],folderDistribution:[],totalBookmarks:0}}}async function lh(){try{const t=await eh(),e=Date.now(),r=e-2592e6,n=e-7776e6,i=e-31536e6,o=t.filter(t=>{const e=t.dateAdded<r,n=!t.accessCount||0===t.accessCount,i=!1!==t.isAlive;return e&&n&&i}).sort((t,e)=>t.dateAdded-e.dateAdded).slice(0,50).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,category:t.category,folderPath:t.folderPath,ageInDays:Math.floor((e-t.dateAdded)/864e5)})),s=t.filter(t=>{const e=!1===t.isAlive,r=!t.accessCount||0===t.accessCount,n=t.dateAdded<i&&r;return e||n}).sort((t,e)=>!1===t.isAlive&&!1!==e.isAlive?-1:!1===e.isAlive&&!1!==t.isAlive?1:t.dateAdded-e.dateAdded).slice(0,50).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,isAlive:t.isAlive,accessCount:t.accessCount||0,reason:!1===t.isAlive?"Dead link":"Old & unused",ageInDays:Math.floor((e-t.dateAdded)/864e5)})),a=t.filter(t=>{const e=t.dateAdded<n,r=!1!==t.isAlive,i=t.title&&t.url;return e&&r&&i}),l=[...a].sort(()=>Math.random()-.5).slice(0,10).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,category:t.category,description:t.description,ageInDays:Math.floor((e-t.dateAdded)/864e5)})),c={};t.forEach(t=>{t.domain&&(c[t.domain]||(c[t.domain]=[]),c[t.domain].push(t))});const d=Object.entries(c).filter(([,t])=>t.length<=2).map(([t,e])=>({domain:t,count:e.length,bookmarks:e.map(t=>({id:t.id,title:t.title,url:t.url,dateAdded:t.dateAdded}))})).sort((t,e)=>t.count-e.count).slice(0,20);return{staleQueue:o,cleanupCandidates:s,rediscoveryFeed:l,lowValueDomains:d,stats:{totalStale:o.length,totalCleanupCandidates:s.length,totalLowValueDomains:d.length,deadLinksCount:t.filter(t=>!1===t.isAlive).length,oldUnusedCount:t.filter(t=>t.dateAdded<i&&(!t.accessCount||0===t.accessCount)).length}}}catch(t){return console.error("Error getting actionable insights:",t),{staleQueue:[],cleanupCandidates:[],rediscoveryFeed:[],lowValueDomains:[],stats:{}}}}async function ch(){try{const t=await eh(),e={};t.forEach(t=>{if(!t.domain)return;e[t.domain]||(e[t.domain]={domain:t.domain,total:0,dead:0,checked:0,accessed:0,totalAccess:0,oldestBookmark:1/0,newestBookmark:0,categories:{}});const r=e[t.domain];r.total++,null!==t.isAlive&&void 0!==t.isAlive&&(r.checked++,!1===t.isAlive&&r.dead++),t.accessCount&&t.accessCount>0&&(r.accessed++,r.totalAccess+=t.accessCount),t.dateAdded<r.oldestBookmark&&(r.oldestBookmark=t.dateAdded),t.dateAdded>r.newestBookmark&&(r.newestBookmark=t.dateAdded),t.category&&(r.categories[t.category]=(r.categories[t.category]||0)+1)});const r=Object.values(e).filter(t=>t.checked>=3).map(t=>({domain:t.domain,total:t.total,dead:t.dead,checked:t.checked,reliabilityScore:Math.round((t.checked-t.dead)/t.checked*100),deadRate:Math.round(t.dead/t.checked*100)})).sort((t,e)=>t.reliabilityScore-e.reliabilityScore).slice(0,15),n=r.filter(t=>t.deadRate>=30).sort((t,e)=>e.deadRate-t.deadRate),i=Object.values(e).map(t=>({domain:t.domain,total:t.total,accessed:t.accessed,totalAccess:t.totalAccess,engagementRate:t.total>0?Math.round(t.accessed/t.total*100):0,avgAccess:t.accessed>0?Math.round(t.totalAccess/t.accessed*10)/10:0})).filter(t=>t.totalAccess>0).sort((t,e)=>e.totalAccess-t.totalAccess).slice(0,10),o=t.length,s=Object.values(e).filter(t=>t.total/o>=.1).map(t=>({domain:t.domain,count:t.total,percentage:Math.round(t.total/o*100),topCategory:Object.entries(t.categories).sort(([,t],[,e])=>e-t)[0]?.[0]||"unknown"})).sort((t,e)=>e.percentage-t.percentage),a=Object.keys(e).length,l=o>0?Math.min(100,Math.round(a/o*100*3)):0;return{reliabilityScores:r,ephemeralSources:n,valuableDomains:i,dependencyWarnings:s,knowledgeMap:Object.values(e).map(t=>({domain:t.domain,total:t.total,accessed:t.accessed,dead:t.dead,checked:t.checked,percentage:Math.round(t.total/o*1e3)/10,topCategory:Object.entries(t.categories).sort(([,t],[,e])=>e-t)[0]?.[0]||null,categories:Object.entries(t.categories).map(([t,e])=>({category:t,count:e})).sort((t,e)=>e.count-t.count)})).sort((t,e)=>e.total-t.total).slice(0,25),diversityScore:l,uniqueDomains:a,totalBookmarks:o}}catch(t){return console.error("Error getting domain intelligence:",t),{reliabilityScores:[],ephemeralSources:[],valuableDomains:[],dependencyWarnings:[],knowledgeMap:[],diversityScore:0,uniqueDomains:0,totalBookmarks:0}}}async function dh(){try{const t=await eh(),e=Date.now(),r=Array(24).fill(0);t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded).getHours();r[e]++}});const n=r.map((t,e)=>({hour:e,hourLabel:`${e.toString().padStart(2,"0")}:00`,count:t})),i=Math.max(...r),o=n.filter(t=>t.count===i).map(t=>t.hourLabel),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=Array(7).fill(0);t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded).getDay();a[e]++}});const l=a.map((t,e)=>({day:e,dayName:s[e],count:t})),c=a[0]+a[6],d=a.slice(1,6).reduce((t,e)=>t+e,0),u={weekday:{count:d,percentage:Math.round(d/t.length*100)},weekend:{count:c,percentage:Math.round(c/t.length*100)}},h={Today:0,"1-7 days":0,"1-4 weeks":0,"1-3 months":0,"3-6 months":0,"6-12 months":0,"1-2 years":0,"2+ years":0},g=e-864e5,f=e-6048e5,p=e-24192e5,m=e-7776e6,b=e-15552e6,y=e-31536e6,x=e-63072e6;t.forEach(t=>{t.dateAdded&&(t.dateAdded>=g?h.Today++:t.dateAdded>=f?h["1-7 days"]++:t.dateAdded>=p?h["1-4 weeks"]++:t.dateAdded>=m?h["1-3 months"]++:t.dateAdded>=b?h["3-6 months"]++:t.dateAdded>=y?h["6-12 months"]++:t.dateAdded>=x?h["1-2 years"]++:h["2+ years"]++)});const v=Object.entries(h).map(([e,r])=>({period:e,count:r,percentage:Math.round(r/t.length*100)})),k=t.reduce((t,r)=>t+(e-(r.dateAdded||e)),0),w=t.length>0?k/t.length:0,_=Math.round(w/864e5),C={};for(let t=11;t>=0;t--){const r=new Date(e);r.setMonth(r.getMonth()-t);const n=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;C[n]=0}t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded),r=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;r in C&&C[r]++}});return{bookmarkingHours:n,peakHours:o,dayOfWeekDistribution:l,weekdayVsWeekend:u,ageDistribution:v,avgAgeDays:_,monthlyCreationTrend:Object.entries(C).map(([t,e])=>({month:t,monthLabel:new Date(t+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"}),count:e})),totalBookmarks:t.length}}catch(t){return console.error("Error getting time-based analysis:",t),{bookmarkingHours:[],peakHours:[],dayOfWeekDistribution:[],weekdayVsWeekend:{weekday:{count:0,percentage:0},weekend:{count:0,percentage:0}},ageDistribution:[],avgAgeDays:0,monthlyCreationTrend:[],totalBookmarks:0}}}async function uh(){try{const t=await eh(),e=t.length;if(0===e)return{platforms:[],total:0};const r={};t.forEach(t=>{const e=t.platform||"other";r[e]=(r[e]||0)+1});return{platforms:Object.entries(r).map(([t,r])=>({platform:t,count:r,percentage:Math.round(r/e*100)})).sort((t,e)=>e.count-t.count),total:e}}catch(t){return console.error("Error getting platform distribution:",t),{platforms:[],total:0}}}async function hh(t=10){try{const e=await eh(),r=Date.now(),n=r-2592e6,i={};e.forEach(t=>{if(!t.creator)return;const e=`${t.platform}:${t.creator}`;i[e]||(i[e]={creator:t.creator,platform:t.platform||"other",totalCount:0,recentCount:0,contentTypes:new Set,thumbnail:null,firstSaved:1/0,lastSaved:0}),i[e].totalCount++,t.dateAdded>n&&i[e].recentCount++,t.contentType&&i[e].contentTypes.add(t.contentType),t.dateAdded<i[e].firstSaved&&(i[e].firstSaved=t.dateAdded),t.dateAdded>i[e].lastSaved&&(i[e].lastSaved=t.dateAdded),!i[e].thumbnail&&t.platformData?.extra?.thumbnail&&(i[e].thumbnail=t.platformData.extra.thumbnail)});return Object.values(i).map(t=>({...t,contentTypes:Array.from(t.contentTypes),velocity:t.firstSaved!==1/0?(t.totalCount/Math.max(1,(r-t.firstSaved)/2592e6)).toFixed(1):0})).sort((t,e)=>e.totalCount-t.totalCount).slice(0,t)}catch(t){return console.error("Error getting creator leaderboard:",t),[]}}function gh(t,e,r){const n=t.slice();return n[27]=e[r],n}function fh(t,e,r){const n=t.slice();return n[30]=e[r],n}function ph(t,e,r){const n=t.slice();return n[33]=e[r],n[35]=r,n}function mh(t,e,r){const n=t.slice();return n[36]=e[r],n}function bh(t,e,r){const n=t.slice();n[39]=e[r];const i=Math.min(1.5,.7+n[39].count/n[2].topicClusters[0].count);return n[40]=i,n}function yh(t,e,r){const n=t.slice();return n[43]=e[r],n}function xh(t){let e,r,n,i,o,s,a,l=t[43].label+"";function c(){return t[13](t[43])}return{c(){e=v("button"),r=v("span"),r.textContent=`${t[43].icon}`,n=_(),i=w(l),A(r,"class","mr-1"),A(e,"class",o="px-4 py-2 rounded-t-lg text-sm font-medium transition-colors "+(t[1]===t[43].id?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"))},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i),s||(a=M(e,"click",c),s=!0)},p(r,n){t=r,2&n[0]&&o!==(o="px-4 py-2 rounded-t-lg text-sm font-medium transition-colors "+(t[1]===t[43].id?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"))&&A(e,"class",o)},d(t){t&&y(e),s=!1,a()}}}function vh(t){let e,r,n,i="content"===t[1]&&t[2]&&wh(t),o="actions"===t[1]&&t[3]&&Ih(t);return{c(){i&&i.c(),e=_(),o&&o.c(),r=C()},m(t,s){i&&i.m(t,s),b(t,e,s),o&&o.m(t,s),b(t,r,s),n=!0},p(t,n){"content"===t[1]&&t[2]?i?(i.p(t,n),6&n[0]&&rt(i,1)):(i=wh(t),i.c(),rt(i,1),i.m(e.parentNode,e)):i&&(tt(),nt(i,1,1,()=>{i=null}),et()),"actions"===t[1]&&t[3]?o?(o.p(t,n),10&n[0]&&rt(o,1)):(o=Ih(t),o.c(),rt(o,1),o.m(r.parentNode,r)):o&&(tt(),nt(o,1,1,()=>{o=null}),et())},i(t){n||(rt(i),rt(o),n=!0)},o(t){nt(i),nt(o),n=!1},d(t){t&&(y(e),y(r)),i&&i.d(t),o&&o.d(t)}}}function kh(e){let r;return{c(){r=v("div"),r.innerHTML='<div class="animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 dark:border-blue-400"></div> <span class="ml-3 text-gray-500 dark:text-gray-400">Loading insights...</span>',A(r,"class","flex items-center justify-center py-16")},m(t,e){b(t,r,e)},p:t,i:t,o:t,d(t){t&&y(r)}}}function wh(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,M,S,D,P,L,E,O,R,B,j,$,z,I,F,N,W,H,V,q,U,K,Y,Q,J=t[2].totalBookmarks+"",X=(t[2].categoryBreakdown?.length||0)+"",G=(t[5]?.platforms?.length||0)+"",Z=(t[6]?.length||0)+"";j=new th({props:{title:"Platform Breakdown",icon:"",subtitle:"Click to filter by platform",$$slots:{default:[_h]},$$scope:{ctx:t}}}),z=new th({props:{title:"Category Distribution",icon:"",subtitle:"Click a segment to filter",$$slots:{default:[Ch]},$$scope:{ctx:t}}}),F=new th({props:{title:"Content Type Mix",icon:"",$$slots:{default:[Mh]},$$scope:{ctx:t}}}),W=new th({props:{title:"Bookmarks Added Over Time",icon:"",subtitle:"Last 12 months",$$slots:{default:[Sh]},$$scope:{ctx:t}}}),V=new th({props:{title:"Topic Clusters",icon:"",subtitle:"Most common keywords from your bookmarks",$$slots:{default:[Ph]},$$scope:{ctx:t}}}),U=new th({props:{title:"Folder Distribution",icon:"",subtitle:"Where your bookmarks live",$$slots:{default:[Eh]},$$scope:{ctx:t}}});let it=t[6]&&t[6].length>0&&Oh(t),ot=t[4]?.ephemeralSources?.length>0&&jh(t);return{c(){e=v("div"),r=v("div"),n=v("div"),i=v("div"),o=w(J),s=_(),a=v("div"),a.textContent="Total Bookmarks",l=_(),c=v("div"),d=v("div"),u=w(X),h=_(),g=v("div"),g.textContent="Categories",f=_(),p=v("div"),x=v("div"),k=w(G),C=_(),M=v("div"),M.textContent="Platforms",S=_(),D=v("div"),P=v("div"),L=w(Z),E=_(),O=v("div"),O.textContent="Creators",R=_(),B=v("div"),at(j.$$.fragment),$=_(),at(z.$$.fragment),I=_(),at(F.$$.fragment),N=_(),at(W.$$.fragment),H=_(),at(V.$$.fragment),q=_(),at(U.$$.fragment),K=_(),it&&it.c(),Y=_(),ot&&ot.c(),A(i,"class","text-2xl font-bold text-blue-700 dark:text-blue-300"),A(a,"class","text-sm text-blue-600 dark:text-blue-400/80"),A(n,"class","bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/40 dark:to-blue-800/40 border border-blue-200 dark:border-blue-800/50 rounded-lg p-4 transition-colors"),A(d,"class","text-2xl font-bold text-purple-700 dark:text-purple-300"),A(g,"class","text-sm text-purple-600 dark:text-purple-400/80"),A(c,"class","bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/40 dark:to-purple-800/40 border border-purple-200 dark:border-purple-800/50 rounded-lg p-4 transition-colors"),A(x,"class","text-2xl font-bold text-green-700 dark:text-green-300"),A(M,"class","text-sm text-green-600 dark:text-green-400/80"),A(p,"class","bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/40 dark:to-green-800/40 border border-green-200 dark:border-green-800/50 rounded-lg p-4 transition-colors"),A(P,"class","text-2xl font-bold text-orange-700 dark:text-orange-300"),A(O,"class","text-sm text-orange-600 dark:text-orange-400/80"),A(D,"class","bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/40 dark:to-orange-800/40 border border-orange-200 dark:border-orange-800/50 rounded-lg p-4 transition-colors"),A(r,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),A(B,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),A(e,"class","space-y-6")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(i,o),m(n,s),m(n,a),m(r,l),m(r,c),m(c,d),m(d,u),m(c,h),m(c,g),m(r,f),m(r,p),m(p,x),m(x,k),m(p,C),m(p,M),m(r,S),m(r,D),m(D,P),m(P,L),m(D,E),m(D,O),m(e,R),m(e,B),lt(j,B,null),m(B,$),lt(z,B,null),m(B,I),lt(F,B,null),m(B,N),lt(W,B,null),m(e,H),lt(V,e,null),m(e,q),lt(U,e,null),m(e,K),it&&it.m(e,null),m(e,Y),ot&&ot.m(e,null),Q=!0},p(t,r){(!Q||4&r[0])&&J!==(J=t[2].totalBookmarks+"")&&T(o,J),(!Q||4&r[0])&&X!==(X=(t[2].categoryBreakdown?.length||0)+"")&&T(u,X),(!Q||32&r[0])&&G!==(G=(t[5]?.platforms?.length||0)+"")&&T(k,G),(!Q||64&r[0])&&Z!==(Z=(t[6]?.length||0)+"")&&T(L,Z);const n={};32768&r[1]&&(n.$$scope={dirty:r,ctx:t}),j.$set(n);const i={};32768&r[1]&&(i.$$scope={dirty:r,ctx:t}),z.$set(i);const s={};32768&r[1]&&(s.$$scope={dirty:r,ctx:t}),F.$set(s);const a={};32768&r[1]&&(a.$$scope={dirty:r,ctx:t}),W.$set(a);const l={};4&r[0]|32768&r[1]&&(l.$$scope={dirty:r,ctx:t}),V.$set(l);const c={};4&r[0]|32768&r[1]&&(c.$$scope={dirty:r,ctx:t}),U.$set(c),t[6]&&t[6].length>0?it?(it.p(t,r),64&r[0]&&rt(it,1)):(it=Oh(t),it.c(),rt(it,1),it.m(e,Y)):it&&(tt(),nt(it,1,1,()=>{it=null}),et()),t[4]?.ephemeralSources?.length>0?ot?(ot.p(t,r),16&r[0]&&rt(ot,1)):(ot=jh(t),ot.c(),rt(ot,1),ot.m(e,null)):ot&&(tt(),nt(ot,1,1,()=>{ot=null}),et())},i(t){Q||(rt(j.$$.fragment,t),rt(z.$$.fragment,t),rt(F.$$.fragment,t),rt(W.$$.fragment,t),rt(V.$$.fragment,t),rt(U.$$.fragment,t),rt(it),rt(ot),Q=!0)},o(t){nt(j.$$.fragment,t),nt(z.$$.fragment,t),nt(F.$$.fragment,t),nt(W.$$.fragment,t),nt(V.$$.fragment,t),nt(U.$$.fragment,t),nt(it),nt(ot),Q=!1},d(t){t&&y(e),ct(j),ct(z),ct(F),ct(W),ct(V),ct(U),it&&it.d(),ot&&ot.d()}}}function _h(e){let r;return{c(){r=v("div"),r.innerHTML='<canvas id="platformDonutChart"></canvas>',A(r,"class","h-64")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Ch(e){let r;return{c(){r=v("div"),r.innerHTML='<canvas id="categoryDonutChart"></canvas>',A(r,"class","h-64")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Mh(e){let r;return{c(){r=v("div"),r.innerHTML='<canvas id="contentTypeChart"></canvas>',A(r,"class","h-64")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Sh(e){let r;return{c(){r=v("div"),r.innerHTML='<canvas id="dateAddedChart"></canvas>',A(r,"class","h-64")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Ah(e){let r;return{c(){r=v("p"),r.textContent="No keywords found. Run enrichment to extract keywords.",A(r,"class","text-gray-500 dark:text-gray-400 text-sm")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Dh(t){let e,r=it(t[2].topicClusters.slice(0,25)),n=[];for(let e=0;e<r.length;e+=1)n[e]=Th(bh(t,r,e));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=C()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);b(t,e,r)},p(t,i){if(260&i[0]){let o;for(r=it(t[2].topicClusters.slice(0,25)),o=0;o<r.length;o+=1){const s=bh(t,r,o);n[o]?n[o].p(s,i):(n[o]=Th(s),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&y(e),x(n,t)}}}function Th(t){let e,r,n,i,o,s,a,l,c,d,u=t[39].keyword+"",h=t[39].count+"";function g(){return t[14](t[39])}return{c(){e=v("button"),r=w(u),n=_(),i=v("span"),o=w("("),s=w(h),a=w(")"),l=_(),A(i,"class","text-xs opacity-60 ml-1"),A(e,"class","px-2 py-1 bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors"),L(e,"font-size",t[40]+"rem")},m(t,u){b(t,e,u),m(e,r),m(e,n),m(e,i),m(i,o),m(i,s),m(i,a),m(e,l),c||(d=M(e,"click",g),c=!0)},p(n,i){t=n,4&i[0]&&u!==(u=t[39].keyword+"")&&T(r,u),4&i[0]&&h!==(h=t[39].count+"")&&T(s,h),4&i[0]&&L(e,"font-size",t[40]+"rem")},d(t){t&&y(e),c=!1,d()}}}function Ph(t){let e;function r(t,e){return t[2].topicClusters&&t[2].topicClusters.length>0?Dh:Ah}let n=r(t),i=n(t);return{c(){e=v("div"),i.c(),A(e,"class","flex flex-wrap gap-2")},m(t,r){b(t,e,r),i.m(e,null)},p(t,o){n===(n=r(t))&&i?i.p(t,o):(i.d(1),i=n(t),i&&(i.c(),i.m(e,null)))},d(t){t&&y(e),i.d()}}}function Lh(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f=t[36].folder+"",p=t[36].count+"";return{c(){e=v("div"),r=v("div"),n=v("div"),i=v("span"),o=w(f),a=_(),l=v("span"),c=w(p),d=_(),u=v("div"),h=v("div"),g=_(),A(i,"class","text-sm truncate text-gray-700 dark:text-gray-200"),A(i,"title",s=t[36].folder),A(l,"class","text-xs text-gray-500 dark:text-gray-400"),A(n,"class","flex items-center justify-between mb-1"),A(h,"class","h-full bg-purple-500 dark:bg-purple-600 rounded-full"),L(h,"width",t[36].percentage+"%"),A(u,"class","w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden"),A(r,"class","flex-1 min-w-0"),A(e,"class","flex items-center gap-2")},m(t,s){b(t,e,s),m(e,r),m(r,n),m(n,i),m(i,o),m(n,a),m(n,l),m(l,c),m(r,d),m(r,u),m(u,h),m(e,g)},p(t,e){4&e[0]&&f!==(f=t[36].folder+"")&&T(o,f),4&e[0]&&s!==(s=t[36].folder)&&A(i,"title",s),4&e[0]&&p!==(p=t[36].count+"")&&T(c,p),4&e[0]&&L(h,"width",t[36].percentage+"%")},d(t){t&&y(e)}}}function Eh(t){let e,r=it(t[2].folderDistribution),n=[];for(let e=0;e<r.length;e+=1)n[e]=Lh(mh(t,r,e));return{c(){e=v("div");for(let t=0;t<n.length;t+=1)n[t].c();A(e,"class","space-y-2 insight-scrollable svelte-qemdpo")},m(t,r){b(t,e,r);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null)},p(t,i){if(4&i[0]){let o;for(r=it(t[2].folderDistribution),o=0;o<r.length;o+=1){const s=mh(t,r,o);n[o]?n[o].p(s,i):(n[o]=Lh(s),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&y(e),x(n,t)}}}function Oh(t){let e,r;return e=new th({props:{title:"Creator Leaderboard",icon:"",subtitle:"Your most bookmarked creators",$$slots:{default:[Bh]},$$scope:{ctx:t}}}),{c(){at(e.$$.fragment)},m(t,n){lt(e,t,n),r=!0},p(t,r){const n={};64&r[0]|32768&r[1]&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){nt(e.$$.fragment,t),r=!1},d(t){ct(e,t)}}}function Rh(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,P,L,E,O,R,B=t[33].creator+"",j=sl(t[33].platform)+"",$=t[33].count+"",z=(t[33].recentCount||0)+"";function I(){return t[15](t[33])}return{c(){e=v("button"),r=v("div"),r.textContent=`${t[35]+1}`,n=_(),i=v("div"),o=v("div"),s=v("span"),a=w(B),l=_(),c=v("span"),d=w(j),h=_(),g=v("div"),f=w($),p=w(" bookmarks"),x=_(),k=v("div"),C=v("div"),S=w("+"),D=w(z),P=_(),L=v("div"),L.textContent="last 30d",E=_(),A(r,"class","w-6 h-6 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-xs font-bold"),A(s,"class","font-medium text-sm truncate text-gray-900 dark:text-gray-100"),A(c,"class","text-xs px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded"),A(c,"title",u=ol(t[33].platform)),A(o,"class","flex items-center gap-2"),A(g,"class","text-xs text-gray-500 dark:text-gray-400"),A(i,"class","flex-1 min-w-0"),A(C,"class","text-xs font-medium text-green-600 dark:text-green-400"),A(L,"class","text-xs text-gray-400 dark:text-gray-500"),A(k,"class","text-right"),A(e,"class","w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors text-left")},m(t,u){b(t,e,u),m(e,r),m(e,n),m(e,i),m(i,o),m(o,s),m(s,a),m(o,l),m(o,c),m(c,d),m(i,h),m(i,g),m(g,f),m(g,p),m(e,x),m(e,k),m(k,C),m(C,S),m(C,D),m(k,P),m(k,L),m(e,E),O||(R=M(e,"click",I),O=!0)},p(e,r){t=e,64&r[0]&&B!==(B=t[33].creator+"")&&T(a,B),64&r[0]&&j!==(j=sl(t[33].platform)+"")&&T(d,j),64&r[0]&&u!==(u=ol(t[33].platform))&&A(c,"title",u),64&r[0]&&$!==($=t[33].count+"")&&T(f,$),64&r[0]&&z!==(z=(t[33].recentCount||0)+"")&&T(D,z)},d(t){t&&y(e),O=!1,R()}}}function Bh(t){let e,r=it(t[6].slice(0,10)),n=[];for(let e=0;e<r.length;e+=1)n[e]=Rh(ph(t,r,e));return{c(){e=v("div");for(let t=0;t<n.length;t+=1)n[t].c();A(e,"class","space-y-2 insight-scrollable svelte-qemdpo")},m(t,r){b(t,e,r);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null)},p(t,i){if(320&i[0]){let o;for(r=it(t[6].slice(0,10)),o=0;o<r.length;o+=1){const s=ph(t,r,o);n[o]?n[o].p(s,i):(n[o]=Rh(s),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&y(e),x(n,t)}}}function jh(t){let e,r;return e=new th({props:{title:"Ephemeral Sources",icon:"",variant:"danger",subtitle:"Domains with high dead link rates",$$slots:{default:[zh]},$$scope:{ctx:t}}}),{c(){at(e.$$.fragment)},m(t,n){lt(e,t,n),r=!0},p(t,r){const n={};16&r[0]|32768&r[1]&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){r||(rt(e.$$.fragment,t),r=!0)},o(t){nt(e.$$.fragment,t),r=!1},d(t){ct(e,t)}}}function $h(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p=t[30].domain+"",x=t[30].deadRate+"",k=t[30].dead+"",C=t[30].checked+"";return{c(){e=v("div"),r=v("span"),n=w(p),i=_(),o=v("div"),s=v("span"),a=w(x),l=w("% dead"),c=_(),d=v("span"),u=w(k),h=w(" of "),g=w(C),f=_(),A(r,"class","text-sm font-medium text-gray-900 dark:text-gray-100"),A(s,"class","text-red-600 dark:text-red-400"),A(d,"class","text-gray-500 dark:text-gray-400"),A(o,"class","flex items-center gap-4 text-sm"),A(e,"class","flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-100 dark:border-red-900/30")},m(t,p){b(t,e,p),m(e,r),m(r,n),m(e,i),m(e,o),m(o,s),m(s,a),m(s,l),m(o,c),m(o,d),m(d,u),m(d,h),m(d,g),m(e,f)},p(t,e){16&e[0]&&p!==(p=t[30].domain+"")&&T(n,p),16&e[0]&&x!==(x=t[30].deadRate+"")&&T(a,x),16&e[0]&&k!==(k=t[30].dead+"")&&T(u,k),16&e[0]&&C!==(C=t[30].checked+"")&&T(g,C)},d(t){t&&y(e)}}}function zh(t){let e,r=it(t[4].ephemeralSources),n=[];for(let e=0;e<r.length;e+=1)n[e]=$h(fh(t,r,e));return{c(){e=v("div");for(let t=0;t<n.length;t+=1)n[t].c();A(e,"class","space-y-2")},m(t,r){b(t,e,r);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null)},p(t,i){if(16&i[0]){let o;for(r=it(t[4].ephemeralSources),o=0;o<r.length;o+=1){const s=fh(t,r,o);n[o]?n[o].p(s,i):(n[o]=$h(s),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&y(e),x(n,t)}}}function Ih(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,M,S,D,P,L=t[3].stats.totalStale+"",E=t[3].stats.deadLinksCount+"",O=t[3].stats.totalLowValueDomains+"";return D=new th({props:{title:"Rediscovery Feed",icon:"",subtitle:"Random old bookmarks you might have forgotten",$$slots:{"header-actions":[Vh],default:[Hh]},$$scope:{ctx:t}}}),{c(){e=v("div"),r=v("div"),n=v("div"),i=v("div"),o=w(L),s=_(),a=v("div"),a.textContent="Stale bookmarks",l=_(),c=v("div"),d=v("div"),u=w(E),h=_(),g=v("div"),g.textContent="Dead links (check Health)",f=_(),p=v("div"),x=v("div"),k=w(O),C=_(),M=v("div"),M.textContent="Low-value domains",S=_(),at(D.$$.fragment),A(i,"class","text-2xl font-bold text-yellow-700 dark:text-yellow-400"),A(a,"class","text-sm text-yellow-600 dark:text-yellow-500/80"),A(n,"class","bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800/30 rounded-lg p-4 transition-colors"),A(d,"class","text-2xl font-bold text-gray-700 dark:text-gray-300"),A(g,"class","text-sm text-gray-600 dark:text-gray-500/80"),A(c,"class","bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4 transition-colors"),A(x,"class","text-2xl font-bold text-orange-700 dark:text-orange-400"),A(M,"class","text-sm text-orange-600 dark:text-orange-500/80"),A(p,"class","bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800/30 rounded-lg p-4 transition-colors"),A(r,"class","grid grid-cols-2 md:grid-cols-3 gap-4"),A(e,"class","space-y-6")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(i,o),m(n,s),m(n,a),m(r,l),m(r,c),m(c,d),m(d,u),m(c,h),m(c,g),m(r,f),m(r,p),m(p,x),m(x,k),m(p,C),m(p,M),m(e,S),lt(D,e,null),P=!0},p(t,e){(!P||8&e[0])&&L!==(L=t[3].stats.totalStale+"")&&T(o,L),(!P||8&e[0])&&E!==(E=t[3].stats.deadLinksCount+"")&&T(u,E),(!P||8&e[0])&&O!==(O=t[3].stats.totalLowValueDomains+"")&&T(k,O);const r={};136&e[0]|32768&e[1]&&(r.$$scope={dirty:e,ctx:t}),D.$set(r)},i(t){P||(rt(D.$$.fragment,t),P=!0)},o(t){nt(D.$$.fragment,t),P=!1},d(t){t&&y(e),ct(D)}}}function Fh(t){let e,r,n=t[27].description+"";return{c(){e=v("p"),r=w(n),A(e,"class","text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2 svelte-qemdpo")},m(t,n){b(t,e,n),m(e,r)},p(t,e){8&e[0]&&n!==(n=t[27].description+"")&&T(r,n)},d(t){t&&y(e)}}}function Nh(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x=t[27].title+"",k=t[27].domain+"",C=Kh(t[27].ageInDays)+"",S=t[27].description&&Fh(t);function D(){return t[16](t[27])}return{c(){e=v("div"),r=v("div"),n=v("a"),i=w(x),s=_(),a=v("div"),l=w(k),c=w("  "),d=w(C),u=_(),S&&S.c(),h=_(),g=v("button"),g.textContent="",A(n,"href",o=t[27].url),A(n,"target","_blank"),A(n,"rel","noopener noreferrer"),A(n,"class","text-sm font-medium text-gray-900 dark:text-gray-100 hover:text-blue-600 dark:hover:text-blue-400 line-clamp-1 svelte-qemdpo"),A(a,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),A(r,"class","flex-1 min-w-0"),A(g,"class","p-2 text-gray-400 dark:text-gray-500 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-white dark:hover:bg-gray-800 rounded-lg transition-colors"),A(g,"title","Open in new tab"),A(e,"class","flex items-start gap-2 p-2 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/30 dark:to-blue-900/30 rounded-lg border border-purple-100 dark:border-purple-800/50 transition-colors")},m(t,o){b(t,e,o),m(e,r),m(r,n),m(n,i),m(r,s),m(r,a),m(a,l),m(a,c),m(a,d),m(r,u),S&&S.m(r,null),m(e,h),m(e,g),f||(p=M(g,"click",D),f=!0)},p(e,s){t=e,8&s[0]&&x!==(x=t[27].title+"")&&T(i,x),8&s[0]&&o!==(o=t[27].url)&&A(n,"href",o),8&s[0]&&k!==(k=t[27].domain+"")&&T(l,k),8&s[0]&&C!==(C=Kh(t[27].ageInDays)+"")&&T(d,C),t[27].description?S?S.p(t,s):(S=Fh(t),S.c(),S.m(r,null)):S&&(S.d(1),S=null)},d(t){t&&y(e),S&&S.d(),f=!1,p()}}}function Wh(t){let e;return{c(){e=v("p"),e.textContent="No old bookmarks to rediscover",A(e,"class","text-gray-500 dark:text-gray-400 text-sm")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Hh(t){let e,r,n=it(t[3].rediscoveryFeed),i=[];for(let e=0;e<n.length;e+=1)i[e]=Nh(gh(t,n,e));let o=0===t[3].rediscoveryFeed.length&&Wh();return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();r=_(),o&&o.c(),A(e,"class","space-y-2")},m(t,n){b(t,e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,r),o&&o.m(e,null)},p(t,s){if(8&s[0]){let o;for(n=it(t[3].rediscoveryFeed),o=0;o<n.length;o+=1){const a=gh(t,n,o);i[o]?i[o].p(a,s):(i[o]=Nh(a),i[o].c(),i[o].m(e,r))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}0===t[3].rediscoveryFeed.length?o||(o=Wh(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&y(e),x(i,t),o&&o.d()}}}function Vh(t){let e,r,n,i,o,s,a,l;return{c(){e=v("div"),r=v("button"),n=v("span"),i=w(""),s=w("\n              Shuffle"),A(n,"class",o="transform "+(t[7]?"animate-spin":"")),A(r,"class","px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800 flex items-center gap-1 transition-colors"),r.disabled=t[7],A(e,"slot","header-actions")},m(o,c){b(o,e,c),m(e,r),m(r,n),m(n,i),m(r,s),a||(l=M(r,"click",t[12]),a=!0)},p(t,e){128&e[0]&&o!==(o="transform "+(t[7]?"animate-spin":""))&&A(n,"class",o),128&e[0]&&(r.disabled=t[7])},d(t){t&&y(e),a=!1,l()}}}function qh(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p=it(t[9]),k=[];for(let e=0;e<p.length;e+=1)k[e]=xh(yh(t,p,e));const C=[kh,vh],S=[];function D(t,e){return t[0]?0:1}return d=D(t),u=S[d]=C[d](t),{c(){e=v("div"),r=v("div");for(let t=0;t<k.length;t+=1)k[t].c();n=_(),i=v("button"),o=v("span"),s=w(""),l=w("\n      Refresh"),c=_(),u.c(),A(o,"class",a="transform "+(t[0]?"animate-spin":"")),A(i,"class","ml-auto px-3 py-2 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 flex items-center gap-1 transition-colors"),i.disabled=t[0],A(r,"class","flex flex-wrap gap-2 border-b border-gray-200 dark:border-gray-700 pb-2"),A(e,"class","space-y-6")},m(a,u){b(a,e,u),m(e,r);for(let t=0;t<k.length;t+=1)k[t]&&k[t].m(r,null);m(r,n),m(r,i),m(i,o),m(o,s),m(i,l),m(e,c),S[d].m(e,null),h=!0,g||(f=M(i,"click",t[10]),g=!0)},p(t,s){if(2562&s[0]){let e;for(p=it(t[9]),e=0;e<p.length;e+=1){const i=yh(t,p,e);k[e]?k[e].p(i,s):(k[e]=xh(i),k[e].c(),k[e].m(r,n))}for(;e<k.length;e+=1)k[e].d(1);k.length=p.length}(!h||1&s[0]&&a!==(a="transform "+(t[0]?"animate-spin":"")))&&A(o,"class",a),(!h||1&s[0])&&(i.disabled=t[0]);let l=d;d=D(t),d===l?S[d].p(t,s):(tt(),nt(S[l],1,1,()=>{S[l]=null}),et(),u=S[d],u?u.p(t,s):(u=S[d]=C[d](t),u.c()),rt(u,1),u.m(e,null))},i(t){h||(rt(u),h=!0)},o(t){nt(u),h=!1},d(t){t&&y(e),x(k,t),S[d].d(),g=!1,f()}}}function Uh(){return document.documentElement.classList.contains("dark")}function Kh(t){return t<1?"Today":1===t?"1 day ago":t<7?`${t} days ago`:t<30?`${Math.floor(t/7)} weeks ago`:t<365?`${Math.floor(t/30)} months ago`:`${Math.floor(t/365)} years ago`}function Yh(t,e,r){No.register(...Fa);const n=I();let i=!0,o="content",s=null,a=null,l=null,c=null,d=null,u=null,h=null,g=null,f=null,p=null,m=!1;async function b(){r(0,i=!0);try{const[t,e,n,i,o,h]=await Promise.all([ah(),lh(),ch(),dh(),uh(),hh(15)]);r(2,s=t),r(3,a=e),r(4,l=n),c=i,r(5,d=o),r(6,u=h),setTimeout(()=>{y()},100)}catch(t){console.error("Error loading insights:",t)}finally{r(0,i=!1)}}function y(){const t=function(){const t=Uh();return{textColor:t?"#9ca3af":"#6b7280",gridColor:t?"rgba(75, 85, 99, 0.3)":"#f3f4f6",borderColor:t?"#1f2937":"#fff"}}();No.defaults.color=t.textColor,No.defaults.borderColor=t.gridColor,function(t){const e=document.getElementById("categoryDonutChart");if(!e||!s?.categoryBreakdown)return;h&&h.destroy();const r=s.categoryBreakdown.slice(0,8),i=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#6B7280"];h=new No(e,{type:"doughnut",data:{labels:r.map(t=>t.category),datasets:[{data:r.map(t=>t.count),backgroundColor:i,borderWidth:2,borderColor:t.borderColor}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:8,font:{size:11},color:t.textColor}},tooltip:{callbacks:{label:t=>`${t.label}: ${t.raw} (${r[t.dataIndex].percentage}%)`}}},onClick:(t,e)=>{if(e.length>0){const t=r[e[0].index].category;n("filterByCategory",{category:t})}}}})}(t),function(t){const e=document.getElementById("contentTypeChart");if(!e||!s?.contentTypeMix)return;g&&g.destroy();const r=s.contentTypeMix,n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#6B7280"];g=new No(e,{type:"bar",data:{labels:r.map(t=>t.type.charAt(0).toUpperCase()+t.type.slice(1)),datasets:[{label:"Bookmarks",data:r.map(t=>t.count),backgroundColor:n.slice(0,r.length),borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,grid:{color:t.gridColor},ticks:{color:t.textColor}},y:{grid:{display:!1},ticks:{color:t.textColor}}}}})}(t),function(t){const e=document.getElementById("platformDonutChart");if(!e||!d?.platforms)return;f&&f.destroy();const r=d.platforms.slice(0,8),i={youtube:"#FF0000",github:Uh()?"#e5e7eb":"#24292F",medium:"#00AB6C",devto:Uh()?"#e5e7eb":"#0A0A0A",substack:"#FF6719",twitter:"#1DA1F2",reddit:"#FF4500",stackoverflow:"#F48024",npm:"#CB3837",other:"#6B7280"};f=new No(e,{type:"doughnut",data:{labels:r.map(t=>ol(t.platform)),datasets:[{data:r.map(t=>t.count),backgroundColor:r.map(t=>i[t.platform]||i.other),borderWidth:2,borderColor:t.borderColor}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:8,font:{size:11},color:t.textColor}},tooltip:{callbacks:{label:t=>`${t.label}: ${t.raw} (${r[t.dataIndex].percentage}%)`}}},onClick:(t,e)=>{if(e.length>0){const t=r[e[0].index].platform;n("filterByPlatform",{platform:t})}}}})}(t),function(t){const e=document.getElementById("dateAddedChart");if(!e||!c?.monthlyCreationTrend)return;p&&p.destroy();const r=c.monthlyCreationTrend;p=new No(e,{type:"line",data:{labels:r.map(t=>t.monthLabel),datasets:[{label:"Bookmarks Added",data:r.map(t=>t.count),fill:!0,borderColor:"#3B82F6",backgroundColor:Uh()?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)",tension:.3,pointRadius:3,pointHoverRadius:5}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>`${t.raw} bookmarks added`}}},scales:{x:{grid:{display:!1},ticks:{maxRotation:45,minRotation:45,color:t.textColor}},y:{beginAtZero:!0,grid:{color:t.gridColor},ticks:{color:t.textColor}}}}})}(t)}z(async()=>{await b()});return[i,o,s,a,l,d,u,m,n,[{id:"content",label:"Content & Overview",icon:""},{id:"actions",label:"Actions",icon:""}],b,y,async function(){r(7,m=!0);try{const t=await lh();r(3,a={...a,rediscoveryFeed:t.rediscoveryFeed})}finally{r(7,m=!1)}},t=>{r(1,o=t.id),setTimeout(y,100)},t=>n("searchQuery",{query:t.keyword}),t=>n("filterByCreator",{creator:t.creator}),t=>{return e=t.url,void window.open(e,"_blank");var e}]}class Qh extends ht{constructor(t){super(),ut(this,t,Yh,qh,o,{},null,[-1,-1])}}
/**!
 * FlexSearch.js v0.8.212 (Bundle/Module)
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/flexsearch
 */var Jh;function Xh(t,e,r){const n=typeof r,i=typeof t;if("undefined"!==n){if("undefined"!==i){if(r){if("function"===i&&n===i)return function(e){return t(r(e))};if((e=t.constructor)===r.constructor){if(e===Array)return r.concat(t);if(e===Map){var o=new Map(r);for(var s of t)o.set(s[0],s[1]);return o}if(e===Set){for(o of(s=new Set(r),t.values()))s.add(o);return s}}}return t}return r}return"undefined"===i?e:t}function Gh(t,e){return void 0===t?e:t}function Zh(){return Object.create(null)}function tg(t){return"string"==typeof t}function eg(t){return"object"==typeof t}function rg(t,e){if(tg(e))t=t[e];else for(let r=0;t&&r<e.length;r++)t=t[e[r]];return t}const ng=/[^\p{L}\p{N}]+/u,ig=/(\d{3})/g,og=/(\D)(\d{3})/g,sg=/(\d{3})(\D)/g,ag=/[\u0300-\u036f]/g;function lg(t={}){if(!this||this.constructor!==lg)return new lg(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}function cg(t){t.F=null,t.B.clear(),t.D.clear()}function dg(t,e,r){r||(e||"object"!=typeof t?"object"==typeof e&&(r=e,e=0):r=t),r&&(t=r.query||t,e=r.limit||e);let n=""+(e||0);r&&(n+=(r.offset||0)+!!r.context+!!r.suggest+(!1!==r.resolve)+(r.resolution||this.resolution)+(r.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new ug);let i=this.cache.get(t+n);if(!i){const o=r&&r.cache;o&&(r.cache=!1),i=this.search(t,e,r),o&&(r.cache=o),this.cache.set(t+n,i)}return i}function ug(t){this.limit=t&&!0!==t?t:1e3,this.cache=new Map,this.h=""}(Jh=lg.prototype).assign=function(t){this.normalize=Xh(t.normalize,!0,this.normalize);let e,r=t.include,n=r||t.exclude||t.split;if(n||""===n){if("object"==typeof n&&n.constructor!==RegExp){let t="";e=!r,r||(t+="\\p{Z}"),n.letter&&(t+="\\p{L}"),n.number&&(t+="\\p{N}",e=!!r),n.symbol&&(t+="\\p{S}"),n.punctuation&&(t+="\\p{P}"),n.control&&(t+="\\p{C}"),(n=n.char)&&(t+="object"==typeof n?n.join(""):n);try{this.split=new RegExp("["+(r?"^":"")+t+"]+","u")}catch(t){this.split=/\s+/}}else this.split=n,e=!1===n||"a1a".split(n).length<2;this.numeric=Xh(t.numeric,e)}else{try{this.split=Xh(this.split,ng)}catch(t){this.split=/\s+/}this.numeric=Xh(t.numeric,Xh(this.numeric,!0))}if(this.prepare=Xh(t.prepare,null,this.prepare),this.finalize=Xh(t.finalize,null,this.finalize),n=t.filter,this.filter="function"==typeof n?n:Xh(n&&new Set(n),null,this.filter),this.dedupe=Xh(t.dedupe,!0,this.dedupe),this.matcher=Xh((n=t.matcher)&&new Map(n),null,this.matcher),this.mapper=Xh((n=t.mapper)&&new Map(n),null,this.mapper),this.stemmer=Xh((n=t.stemmer)&&new Map(n),null,this.stemmer),this.replacer=Xh(t.replacer,null,this.replacer),this.minlength=Xh(t.minlength,1,this.minlength),this.maxlength=Xh(t.maxlength,1024,this.maxlength),this.rtl=Xh(t.rtl,!1,this.rtl),(this.cache=n=Xh(t.cache,!0,this.cache))&&(this.F=null,this.L="number"==typeof n?n:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const t of this.matcher.keys())this.h+=(this.h?"|":"")+t;if(this.stemmer)for(const t of this.stemmer.keys())this.A+=(this.A?"|":"")+t;return this},Jh.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&cg(this),this},Jh.addFilter=function(t){return"function"==typeof t?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&cg(this),this},Jh.addMapper=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length>1?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&cg(this),this)},Jh.addMatcher=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&cg(this),this)},Jh.addReplacer=function(t,e){return"string"==typeof t?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&cg(this),this)},Jh.encode=function(t,e){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(cg,50,this);this.normalize&&(t="function"==typeof this.normalize?this.normalize(t):ag?t.normalize("NFKD").replace(ag,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(og,"$1 $2").replace(sg,"$1 $2").replace(ig,"$1 "));const r=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let n,i,o=[],s=Zh(),a=this.split||""===this.split?t.split(this.split):[t];for(let t,c,d=0;d<a.length;d++)if((t=c=a[d])&&!(t.length<this.minlength||t.length>this.maxlength)){if(e){if(s[t])continue;s[t]=1}else{if(n===t)continue;n=t}if(r)o.push(t);else if(!this.filter||("function"==typeof this.filter?this.filter(t):!this.filter.has(t))){if(this.cache&&t.length<=this.I)if(this.F){var l=this.D.get(t);if(l||""===l){l&&o.push(l);continue}}else this.F=setTimeout(cg,50,this);if(this.stemmer){let e;for(this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));e!==t&&t.length>2;)e=t,t=t.replace(this.K,t=>this.stemmer.get(t))}if(t&&(this.mapper||this.dedupe&&t.length>1)){l="";for(let e,r,n=0,i="";n<t.length;n++)e=t.charAt(n),e===i&&this.dedupe||((r=this.mapper&&this.mapper.get(e))||""===r?r===i&&this.dedupe||!(i=r)||(l+=r):l+=i=e);t=l}if(this.matcher&&t.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),t=t.replace(this.J,t=>this.matcher.get(t))),t&&this.replacer)for(l=0;t&&l<this.replacer.length;l+=2)t=t.replace(this.replacer[l],this.replacer[l+1]);if(this.cache&&c.length<=this.I&&(this.D.set(c,t),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),t){if(t!==c)if(e){if(s[t])continue;s[t]=1}else{if(i===t)continue;i=t}o.push(t)}}}return this.finalize&&(o=this.finalize(o)||o),this.cache&&t.length<=this.H&&(this.B.set(t,o),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),o},ug.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},ug.prototype.get=function(t){const e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e},ug.prototype.remove=function(t){for(const e of this.cache){const r=e[0];e[1].includes(t)&&this.cache.delete(r)}},ug.prototype.clear=function(){this.cache.clear(),this.h=""};const hg={normalize:!1,numeric:!1,dedupe:!1},gg={},fg=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),pg=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),mg=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],bg={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,"":2,d:3,t:3,l:4,m:5,n:5,r:6};var yg={Exact:hg,Default:gg,Normalize:gg,LatinBalance:{mapper:fg},LatinAdvanced:{mapper:fg,matcher:pg,replacer:mg},LatinExtra:{mapper:fg,replacer:mg.concat([/(?!^)[aeo]/g,""]),matcher:pg},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let r=0;r<t.length;r++){var e=t[r];let n=e.charAt(0),i=bg[n];for(let t,r=1;r<e.length&&(t=e.charAt(r),"h"===t||"w"===t||!(t=bg[t])||t===i||(n+=t,i=t,4!==n.length));r++);t[r]=n}}},CJK:{split:""},LatinExact:hg,LatinDefault:gg,LatinSimple:gg};function xg(t,e,r,n){let i=[];for(let o,s=0;s<t.index.length;s++)if(o=t.index[s],e>=o.length)e-=o.length;else{const s=(e=o[n?"splice":"slice"](e,r)).length;if(s&&(i=i.length?i.concat(e):e,r-=s,n&&(t.length-=s),!r))break;e=0}return i}function vg(t){if(!this||this.constructor!==vg)return new vg(t);this.index=t?[t]:[],this.length=t?t.length:0;const e=this;return new Proxy([],{get:(t,r)=>"length"===r?e.length:"push"===r?function(t){e.index[e.index.length-1].push(t),e.length++}:"pop"===r?function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()}:"indexOf"===r?function(t){let r=0;for(let n,i,o=0;o<e.index.length;o++){if(n=e.index[o],i=n.indexOf(t),i>=0)return r+i;r+=n.length}return-1}:"includes"===r?function(t){for(let r=0;r<e.index.length;r++)if(e.index[r].includes(t))return!0;return!1}:"slice"===r?function(t,r){return xg(e,t||0,r||e.length,!1)}:"splice"===r?function(t,r){return xg(e,t||0,r||e.length,!0)}:"constructor"===r?Array:"symbol"!=typeof r?(t=e.index[r/2**31|0])&&t[r]:void 0,set:(t,r,n)=>(t=r/2**31|0,(e.index[t]||(e.index[t]=[]))[r]=n,e.length++,!0)})}function kg(t=8){if(!this||this.constructor!==kg)return new kg(t);this.index=Zh(),this.h=[],this.size=0,t>32?(this.B=Cg,this.A=BigInt(t)):(this.B=_g,this.A=t)}function wg(t=8){if(!this||this.constructor!==wg)return new wg(t);this.index=Zh(),this.h=[],this.size=0,t>32?(this.B=Cg,this.A=BigInt(t)):(this.B=_g,this.A=t)}function _g(t){let e=2**this.A-1;if("number"==typeof t)return t&e;let r=0,n=this.A+1;for(let i=0;i<t.length;i++)r=(r*n^t.charCodeAt(i))&e;return 32===this.A?r+2**31:r}function Cg(t){let e=BigInt(2)**this.A-BigInt(1);var r=typeof t;if("bigint"===r)return t&e;if("number"===r)return BigInt(t)&e;r=BigInt(0);let n=this.A+BigInt(1);for(let i=0;i<t.length;i++)r=(r*n^BigInt(t.charCodeAt(i)))&e;return r}let Mg,Sg,Ag,Dg,Tg;async function Pg(t){var e=(t=t.data).task;const r=t.id;let n=t.args;if("init"===e)Sg=t.options||{},(e=t.factory)?(Function("return "+e)()(self),Mg=new self.FlexSearch.Index(Sg),delete self.FlexSearch):Mg=new kf(Sg),postMessage({id:r});else{let i;"export"===e&&(n[1]?(n[0]=Sg.export,n[2]=0,n[3]=1):n=null),"import"===e?n[0]&&(t=await Sg.import.call(Mg,n[0]),Mg.import(n[0],t)):((i=n&&Mg[e].apply(Mg,n))&&i.then&&(i=await i),i&&i.await&&(i=await i.await),"search"===e&&i.result&&(i=i.result)),postMessage("search"===e?{id:r,msg:i}:{id:r})}}function Lg(t){Og.call(t,"add"),Og.call(t,"append"),Og.call(t,"search"),Og.call(t,"update"),Og.call(t,"remove"),Og.call(t,"searchCache")}function Eg(){Ag=Tg=0}function Og(t){this[t+"Async"]=function(){const e=arguments;var r=e[e.length-1];let n;if("function"==typeof r&&(n=r,delete e[e.length-1]),Ag?Tg||(Tg=Date.now()-Dg>=this.priority*this.priority*3):(Ag=setTimeout(Eg,0),Dg=Date.now()),Tg){const r=this;return new Promise(n=>{setTimeout(function(){n(r[t+"Async"].apply(r,e))},0)})}const i=this[t].apply(this,e);return r=i.then?i:new Promise(t=>t(i)),n&&r.then(n),r}}vg.prototype.clear=function(){this.index.length=0},vg.prototype.push=function(){},kg.prototype.get=function(t){const e=this.index[this.B(t)];return e&&e.get(t)},kg.prototype.set=function(t,e){var r=this.B(t);let n=this.index[r];n?(r=n.size,n.set(t,e),(r-=n.size)&&this.size++):(this.index[r]=n=new Map([[t,e]]),this.h.push(n),this.size++)},wg.prototype.add=function(t){var e=this.B(t);let r=this.index[e];r?(e=r.size,r.add(t),(e-=r.size)&&this.size++):(this.index[e]=r=new Set([t]),this.h.push(r),this.size++)},(Jh=kg.prototype).has=wg.prototype.has=function(t){const e=this.index[this.B(t)];return e&&e.has(t)},Jh.delete=wg.prototype.delete=function(t){const e=this.index[this.B(t)];e&&e.delete(t)&&this.size--},Jh.clear=wg.prototype.clear=function(){this.index=Zh(),this.h=[],this.size=0},Jh.values=wg.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e},Jh.keys=wg.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e},Jh.entries=wg.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};let Rg=0;function Bg(t={},e){function r(r){function s(t){const e=(t=t.data||t).id,r=e&&o.h[e];r&&(r(t.msg),delete o.h[e])}if(this.worker=r,this.h=Zh(),this.worker)return i?this.worker.on("message",s):this.worker.onmessage=s,t.config?new Promise(function(e){Rg>1e9&&(Rg=0),o.h[++Rg]=function(){e(o)},o.worker.postMessage({id:Rg,task:"init",factory:n,options:t})}):(this.priority=t.priority||4,this.encoder=e||null,this.worker.postMessage({task:"init",factory:n,options:t}),this)}if(!this||this.constructor!==Bg)return new Bg(t);let n="undefined"!=typeof self?self._factory:"undefined"!=typeof window?window._factory:null;n&&(n=n.toString());const i="undefined"==typeof window,o=this,s=function(t,e,r){return e?"undefined"!=typeof module?new(require("worker_threads").Worker)(__dirname+"/worker/node.js"):Promise.resolve().then(function(){return gy}).then(function(t){return new t.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Pg.toString()],{type:"text/javascript"}))):new window.Worker("string"==typeof r?r:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}(n,i,t.worker);return s.then?s.then(function(t){return r.call(o,t)}):r.call(this,s)}function jg(t){Bg.prototype[t]=function(){const e=this,r=[].slice.call(arguments);var n=r[r.length-1];let i;return"function"==typeof n&&(i=n,r.pop()),n=new Promise(function(n){"export"===t&&"function"==typeof r[0]&&(r[0]=null),Rg>1e9&&(Rg=0),e.h[++Rg]=n,e.worker.postMessage({task:t,id:Rg,args:r})}),i?(n.then(i),this):n}}function $g(t,e,r,n,i,o){if(t=t[i],n===r.length-1)e[i]=o||t;else if(t)if(t.constructor===Array)for(e=e[i]=Array(t.length),i=0;i<t.length;i++)$g(t,e,r,n,i);else e=e[i]||(e[i]=Zh()),i=r[++n],$g(t,e,r,n,i)}function zg(t,e,r,n,i,o,s,a){if(t=t[s])if(n===e.length-1){if(t.constructor===Array){if(r[n]){for(e=0;e<t.length;e++)i.add(o,t[e],!0,!0);return}t=t.join(" ")}i.add(o,t,a,!0)}else if(t.constructor===Array)for(s=0;s<t.length;s++)zg(t,e,r,n,i,o,s,a);else s=e[++n],zg(t,e,r,n,i,o,s,a)}function Ig(t,e,r,n){if(!t.length)return t;if(1===t.length)return t=t[0],t=r||t.length>e?t.slice(r,r+e):t,n?tf.call(this,t):t;let i=[];for(let o,s,a=0;a<t.length;a++)if((o=t[a])&&(s=o.length)){if(r){if(r>=s){r-=s;continue}o=o.slice(r,r+e),s=o.length,r=0}if(s>e&&(o=o.slice(0,e),s=e),!i.length&&s>=e)return n?tf.call(this,o):o;if(i.push(o),!(e-=s))break}return i=i.length>1?[].concat.apply([],i):i[0],n?tf.call(this,i):i}function Fg(t,e,r,n){var i=n[0];if(i[0]&&i[0].query)return t[e].apply(t,i);if(!("and"!==e&&"not"!==e||t.result.length||t.await||i.suggest))return n.length>1&&(i=n[n.length-1]),(n=i.resolve)?t.await||t.result:t;let o,s,a,l,c,d=[],u=0,h=0;for(e=0;e<n.length;e++)if(i=n[e]){var g=void 0;if(i.constructor===Kg)g=i.await||i.result;else if(i.then||i.constructor===Array)g=i;else{u=i.limit||0,h=i.offset||0,a=i.suggest,s=i.resolve,o=((l=i.highlight||t.highlight)||i.enrich)&&s,g=i.queue;let r=i.async||g,n=i.index,f=i.query;if(n?t.index||(t.index=n):n=t.index,f||i.tag){const o=i.field||i.pluck;if(o&&(!f||t.query&&!l||(t.query=f,t.field=o,t.highlight=l),n=n.index.get(o)),g&&(c||t.await)){let o;c=1;const s=t.C.length,a=new Promise(function(t){o=t});(function(e,n){a.h=function(){n.index=null,n.resolve=!1;let i=r?e.searchAsync(n):e.search(n);return i.then?i.then(function(e){return t.C[s]=e=e.result||e,o(e),e}):(i=i.result||i,o(i),i)}})(n,Object.assign({},i)),t.C.push(a),d[e]=a;continue}i.resolve=!1,i.index=null,g=r?n.searchAsync(i):n.search(i),i.resolve=s,i.index=n}else if(i.and)g=Ng(i,"and",n);else if(i.or)g=Ng(i,"or",n);else if(i.not)g=Ng(i,"not",n);else{if(!i.xor)continue;g=Ng(i,"xor",n)}}g.await?(c=1,g=g.await):g.then?(c=1,g=g.then(function(t){return t.result||t})):g=g.result||g,d[e]=g}if(c&&!t.await&&(t.await=new Promise(function(e){t.return=e})),c){const e=Promise.all(d).then(function(n){for(let i=0;i<t.C.length;i++)if(t.C[i]===e){t.C[i]=function(){return r.call(t,n,u,h,o,s,a,l)};break}Yg(t)});t.C.push(e)}else{if(!t.await)return r.call(t,d,u,h,o,s,a,l);t.C.push(function(){return r.call(t,d,u,h,o,s,a,l)})}return s?t.await||t.result:t}function Ng(t,e,r){const n=(t=t[e])[0]||t;return n.index||(n.index=r),r=new Kg(n),t.length>1&&(r=r[e].apply(r,t.slice(1))),r}function Wg(t,e,r,n,i,o,s){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=Jg(t,e,r,!1,this.h),r=0)),i&&(this.await=null),i?this.resolve(e,r,n,s):this}function Hg(t,e,r,n,i,o,s){if(!o&&!this.result.length)return i?this.result:this;let a;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let n=0;for(let e,r,i=0;i<t.length;i++)if((e=t[i])&&(r=e.length))n<r&&(n=r);else if(!o){n=0;break}n?(this.result=Qg(t,n,e,r,o,this.h,i),a=!0):this.result=[]}else o||(this.result=t);return i&&(this.await=null),i?this.resolve(e,r,n,s,a):this}function Vg(t,e,r,n,i,o,s){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{o=r;var a=this.h;const n=[],s=Zh();let l=0;for(let e,r=0;r<t.length;r++)if(e=t[r]){l<e.length&&(l=e.length);for(let t,r=0;r<e.length;r++)if(t=e[r])for(let e,r=0;r<t.length;r++)e=t[r],s[e]=s[e]?2:1}for(let r,c=0,d=0;c<l;c++)for(let l,u=0;u<t.length;u++)if((l=t[u])&&(r=l[c]))for(let l,h=0;h<r.length;h++)if(l=r[h],1===s[l])if(o)o--;else if(i){if(n.push(l),n.length===e){t=n;break t}}else{const r=c+(u?a:0);if(n[r]||(n[r]=[]),n[r].push(l),++d===e){t=n;break t}}t=n}this.result=t,a=!0}else o||(this.result=t);return i&&(this.await=null),i?this.resolve(e,r,n,s,a):this}function qg(t,e,r,n,i,o,s){if(!o&&!this.result.length)return i?this.result:this;if(t.length&&this.result.length){t:{o=r;var a=[];t=new Set(t.flat().flat());for(let r,n=0,s=0;n<this.result.length;n++)if(r=this.result[n])for(let l,c=0;c<r.length;c++)if(l=r[c],!t.has(l))if(o)o--;else if(i){if(a.push(l),a.length===e){t=a;break t}}else if(a[n]||(a[n]=[]),a[n].push(l),++s===e){t=a;break t}t=a}this.result=t,a=!0}return i&&(this.await=null),i?this.resolve(e,r,n,s,a):this}function Ug(t,e,r,n,i){let o,s,a;"string"==typeof i?(o=i,i=""):o=i.template,s=o.indexOf("$1"),a=o.substring(s+2),s=o.substring(0,s);let l=i&&i.boundary,c=!i||!1!==i.clip,d=i&&i.merge&&a&&s&&new RegExp(a+" "+s,"g");var u=0;if("object"==typeof(i=i&&i.ellipsis)){var h=i.template;u=h.length-2,i=i.pattern}let g,f;"string"!=typeof i&&(i=!1===i?"":"..."),u&&(i=h.replace("$1",i)),h=i.length-u,"object"==typeof l&&(g=l.before,0===g&&(g=-1),f=l.after,0===f&&(f=-1),l=l.total||9e5),u=new Map;for(let O,R,B,j=0;j<e.length;j++){let $;if(n)$=e,B=n;else{var p=e[j];if(B=p.field,!B)continue;$=p.result}R=r.get(B),O=R.encoder,"string"!=typeof(p=u.get(O))&&(p=O.encode(t),u.set(O,p));for(let t=0;t<$.length;t++){var m=$[t].doc;if(!m)continue;if(!(m=rg(m,B)))continue;var b=m.trim().split(/\s+/);if(!b.length)continue;m="";var y=[];let e=[];for(var x=-1,v=-1,k=0,w=0;w<b.length;w++){var _=b[w],C=O.encode(_);let t;if((C=C.length>1?C.join(" "):C[0])&&_){for(var M=_.length,S=(O.split?_.replace(O.split,""):_).length-C.length,A="",D=0,T=0;T<p.length;T++){var P=p[T];if(P){var L=P.length;L+=S<0?0:S,D&&L<=D||(P=C.indexOf(P))>-1&&(A=(P?_.substring(0,P):"")+s+_.substring(P,P+L)+a+(P+L<M?_.substring(P+L):""),D=L,t=!0)}}A&&(l&&(x<0&&(x=m.length+(m?1:0)),v=m.length+(m?1:0)+A.length,k+=M,e.push(y.length),y.push({match:A})),m+=(m?" ":"")+A)}if(t){if(l&&k>=l)break}else m+=(m?" ":"")+(_=b[w]),l&&y.push({text:_})}if(k=e.length*(o.length-2),g||f||l&&m.length-k>l)if(w=v-x,g>0&&(w+=g),f>0&&(w+=f),w<=(k=l+k-2*h))b=g?x-(g>0?g:0):x-((k-w)/2|0),y=f?v+(f>0?f:0):b+k,c||(b>0&&" "!==m.charAt(b)&&" "!==m.charAt(b-1)&&((b=m.indexOf(" ",b))<0&&(b=0)),y<m.length&&" "!==m.charAt(y-1)&&" "!==m.charAt(y)&&((y=m.lastIndexOf(" ",y))<v?y=v:++y)),m=(b?i:"")+m.substring(b,y)+(y<m.length?i:"");else{for(v=[],x={},k={},w={},_={},C={},A=S=M=0,T=D=1;;){var E=void 0;for(let t,r=0;r<e.length;r++){if(t=e[r],A)if(S!==A){if(w[r+1])continue;if(t+=A,x[t]){M-=h,k[r+1]=1,w[r+1]=1;continue}if(t>=y.length-1){if(t>=y.length){w[r+1]=1,t>=b.length&&(k[r+1]=1);continue}M-=h}if(m=y[t].text,L=f&&C[r]){if(!(L>0)){w[r+1]=1;continue}if(m.length>L){if(w[r+1]=1,!c)continue;m=m.substring(0,L)}(L-=m.length)||(L=-1),C[r]=L}if(M+m.length+1<=l)m=" "+m,v[r]+=m;else{if(!c){w[r+1]=1;continue}(E=l-M-1)>0&&(m=" "+m.substring(0,E),v[r]+=m),w[r+1]=1}}else{if(w[r])continue;if(t-=S,x[t]){M-=h,w[r]=1,k[r]=1;continue}if(t<=0){if(t<0){w[r]=1,k[r]=1;continue}M-=h}if(m=y[t].text,L=g&&_[r]){if(!(L>0)){w[r]=1;continue}if(m.length>L){if(w[r]=1,!c)continue;m=m.substring(m.length-L)}(L-=m.length)||(L=-1),_[r]=L}if(M+m.length+1<=l)m+=" ",v[r]=m+v[r];else{if(!c){w[r]=1;continue}(E=m.length+1-(l-M))>=0&&E<m.length&&(m=m.substring(E)+" ",v[r]=m+v[r]),w[r]=1}}else{let e;if(m=y[t].match,g&&(_[r]=g),f&&(C[r]=f),r&&M++,t?!r&&h&&(M+=h):(k[r]=1,w[r]=1),t>=b.length-1||t<y.length-1&&y[t+1].match?e=1:h&&(M+=h),M-=o.length-2,r&&!(M+m.length<=l)){E=D=T=k[r]=0;break}v[r]=m,e&&(k[r+1]=1,w[r+1]=1)}M+=m.length,E=x[t]=1}if(E)S===A?A++:S++;else{if(S===A?D=0:T=0,!D&&!T)break;D?A=++S:A++}}m="";for(let t,e=0;e<v.length;e++)t=(k[e]?e?" ":"":(e&&!i?" ":"")+i)+v[e],m+=t;i&&!k[v.length]&&(m+=i)}d&&(m=m.replace(d," ")),$[t].highlight=m}if(n)break}return e}function Kg(t,e){if(!this||this.constructor!==Kg)return new Kg(t,e);let r,n,i,o,s,a,l=0;if(t&&t.index){const r=t;if(e=r.index,l=r.boost||0,n=r.query){i=r.field||r.pluck,o=r.highlight;const n=r.resolve;t=r.async||r.queue,r.resolve=!1,r.index=null,t=t?e.searchAsync(r):e.search(r),r.resolve=n,r.index=e,t=t.result||t}else t=[]}if(t&&t.then){const e=this;r=[t=t.then(function(t){e.C[0]=e.result=t.result||t,Yg(e)})],t=[],s=new Promise(function(t){a=t})}this.index=e||null,this.result=t||[],this.h=l,this.C=r||[],this.await=s||null,this.return=a||null,this.highlight=o||null,this.query=n||"",this.field=i||""}function Yg(t,e){let r=t.result;var n=t.await;t.await=null;for(let e,i=0;i<t.C.length;i++)if(e=t.C[i])if("function"==typeof e)r=e(),t.C[i]=r=r.result||r,i--;else if(e.h)r=e.h(),t.C[i]=r=r.result||r,i--;else if(e.then)return t.await=n;return n=t.return,t.C=[],t.return=null,e||n(r),r}function Qg(t,e,r,n,i,o,s){const a=t.length;let l,c,d=[];l=Zh();for(let u,h,g,f,p=0;p<e;p++)for(let e=0;e<a;e++)if(g=t[e],p<g.length&&(u=g[p]))for(let t=0;t<u.length;t++){if(h=u[t],(c=l[h])?l[h]++:(c=0,l[h]=1),f=d[c]||(d[c]=[]),!s){let t=p+(e||!i?0:o||0);f=f[t]||(f[t]=[])}if(f.push(h),s&&r&&c===a-1&&f.length-n===r)return n?f.slice(n):f}if(t=d.length)if(i)d=d.length>1?Jg(d,r,n,s,o):(d=d[0])&&r&&d.length>r||n?d.slice(n,r+n):d;else{if(t<a)return[];if(d=d[t-1],r||n)if(s)(d.length>r||n)&&(d=d.slice(n,r+n));else{i=[];for(let t,e=0;e<d.length;e++)if(t=d[e])if(n&&t.length>n)n-=t.length;else if((r&&t.length>r||n)&&(t=t.slice(n,r+n),r-=t.length,n&&(n-=t.length)),i.push(t),!r)break;d=i}}return d}function Jg(t,e,r,n,i){const o=[],s=Zh();let a;var l=t.length;let c;if(n){for(i=l-1;i>=0;i--)if(c=(n=t[i])&&n.length)for(l=0;l<c;l++)if(a=n[l],!s[a])if(s[a]=1,r)r--;else if(o.push(a),o.length===e)return o}else for(let d,u=l-1,h=0;u>=0;u--){d=t[u];for(let t=0;t<d.length;t++)if(c=(n=d[t])&&n.length)for(let d=0;d<c;d++)if(a=n[d],!s[a])if(s[a]=1,r)r--;else{let r=(t+(u<l-1&&i||0))/(u+1)|0;if((o[r]||(o[r]=[])).push(a),++h===e)return o}}return o}function Xg(t,e,r,n,i){const o=Zh(),s=[];for(let t,r=0;r<e.length;r++){t=e[r];for(let e=0;e<t.length;e++)o[t[e]]=1}if(i){for(let e,i=0;i<t.length;i++)if(e=t[i],o[e])if(n)n--;else if(s.push(e),o[e]=0,r&&0===--r)break}else for(let r,n,i=0;i<t.result.length;i++)for(r=t.result[i],e=0;e<r.length;e++)n=r[e],o[n]&&((s[i]||(s[i]=[])).push(n),o[n]=0);return s}function Gg(t){const e=[],r=Zh(),n=Zh();for(let i,o,s,a,l,c,d,u=0;u<t.length;u++){i=t[u],o=i.field,s=i.result;for(let t=0;t<s.length;t++)l=s[t],"object"!=typeof l?l={id:a=l}:a=l.id,(c=r[a])?c.push(o):(l.field=r[a]=[o],e.push(l)),(d=l.highlight)&&(c=n[a],c||(n[a]=c={},l.highlight=c),c[o]=d)}return e}function Zg(t,e,r,n,i){return(t=this.tag.get(t))&&(t=t.get(e))?((e=t.length-n)>0&&((r&&e>r||n)&&(t=t.slice(n,n+r)),i&&(t=tf.call(this,t))),t):[]}function tf(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);const e=Array(t.length);for(let r,n=0;n<t.length;n++)r=t[n],e[n]={id:r,doc:this.store.get(r)};return e}function ef(t){if(!this||this.constructor!==ef)return new ef(t);const e=t.document||t.doc||t;let r,n;if(this.B=[],this.field=[],this.D=[],this.key=(r=e.key||e.id)&&nf(r,this.D)||"id",(n=t.keystore||0)&&(this.keystore=n),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?n?new wg(n):new Set:n?new kg(n):new Map,this.h=(r=e.store||null)&&r&&!0!==r&&[],this.store=r?n?new kg(n):new Map:null,this.cache=(r=t.cache||null)&&new ug(r),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=rf.call(this,t,e),this.tag=null,(r=e.tag)&&("string"==typeof r&&(r=[r]),r.length)){this.tag=new Map,this.A=[],this.F=[];for(let t,e,n=0;n<r.length;n++){if(t=r[n],e=t.field||t,!e)throw Error("The tag field from the document descriptor is undefined.");t.custom?this.A[n]=t.custom:(this.A[n]=nf(e,this.D),t.filter&&("string"==typeof this.A[n]&&(this.A[n]=new String(this.A[n])),this.A[n].G=t.filter)),this.F[n]=e,this.tag.set(e,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const e of this.index.values())e.then&&t.push(e);if(t.length){const e=this;return Promise.all(t).then(function(t){let r=0;for(const n of e.index.entries()){const i=n[0];let o=n[1];o.then&&(o=t[r],e.index.set(i,o),r++)}return e})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}function rf(t,e){const r=new Map;let n=e.index||e.field||e;tg(n)&&(n=[n]);for(let e,o,s=0;s<n.length;s++){if(e=n[s],tg(e)||(o=e,e=e.field),o=eg(o)?Object.assign({},t,o):t,this.worker){var i=void 0;i=new Bg(o,i=(i=o.encoder)&&i.encode?i:new lg("string"==typeof i?yg[i]:i||{})),r.set(e,i)}this.worker||r.set(e,new kf(o,this.reg)),o.custom?this.B[s]=o.custom:(this.B[s]=nf(e,this.D),o.filter&&("string"==typeof this.B[s]&&(this.B[s]=new String(this.B[s])),this.B[s].G=o.filter)),this.field[s]=e}if(this.h){tg(t=e.store)&&(t=[t]);for(let e,r,n=0;n<t.length;n++)e=t[n],r=e.field||e,e.custom?(this.h[n]=e.custom,e.custom.O=r):(this.h[n]=nf(r,this.D),e.filter&&("string"==typeof this.h[n]&&(this.h[n]=new String(this.h[n])),this.h[n].G=e.filter))}return r}function nf(t,e){const r=t.split(":");let n=0;for(let i=0;i<r.length;i++)"]"===(t=r[i])[t.length-1]&&(t=t.substring(0,t.length-2))&&(e[n]=!0),t&&(r[n++]=t);return n<r.length&&(r.length=n),n>1?r:r[0]}function of(t,e=0){let r=[],n=[];e&&(e=25e4/e*5e3|0);for(const i of t.entries())n.push(i),n.length===e&&(r.push(n),n=[]);return n.length&&r.push(n),r}function sf(t,e){e||(e=new Map);for(let r,n=0;n<t.length;n++)r=t[n],e.set(r[0],r[1]);return e}function af(t,e=0){let r=[],n=[];e&&(e=25e4/e*1e3|0);for(const i of t.entries())n.push([i[0],of(i[1])[0]||[]]),n.length===e&&(r.push(n),n=[]);return n.length&&r.push(n),r}function lf(t,e){e||(e=new Map);for(let r,n,i=0;i<t.length;i++)r=t[i],n=e.get(r[0]),e.set(r[0],sf(r[1],n));return e}function cf(t){let e=[],r=[];for(const n of t.keys())r.push(n),25e4===r.length&&(e.push(r),r=[]);return r.length&&e.push(r),e}function df(t,e){e||(e=new Set);for(let r=0;r<t.length;r++)e.add(t[r]);return e}function uf(t,e,r,n,i,o,s=0){const a=n&&n.constructor===Array;var l=a?n.shift():n;if(!l)return this.export(t,e,i,o+1);if((l=t((e?e+".":"")+(s+1)+"."+r,JSON.stringify(l)))&&l.then){const c=this;return l.then(function(){return uf.call(c,t,e,r,a?n:null,i,o,s+1)})}return uf.call(this,t,e,r,a?n:null,i,o,s+1)}function hf(t,e){let r="";for(const n of t.entries()){t=n[0];const i=n[1];let o="";for(let t,r=0;r<i.length;r++){t=i[r]||[""];let n="";for(let r=0;r<t.length;r++)n+=(n?",":"")+("string"===e?'"'+t[r]+'"':t[r]);n="["+n+"]",o+=(o?",":"")+n}o='["'+t+'",['+o+"]]",r+=(r?",":"")+o}return r}function gf(t,e){let r=0;var n=void 0===e;if(t.constructor===Array){for(let i,o,s,a=0;a<t.length;a++)if((i=t[a])&&i.length){if(n)return 1;if(o=i.indexOf(e),o>=0){if(i.length>1)return i.splice(o,1),1;if(delete t[a],r)return 1;s=1}else{if(s)return 1;r++}}}else for(let i of t.entries())n=i[0],gf(i[1],e)?r++:t.delete(n);return r}jg("add"),jg("append"),jg("search"),jg("update"),jg("remove"),jg("clear"),jg("export"),jg("import"),Bg.prototype.searchCache=dg,Lg(Bg.prototype),ef.prototype.add=function(t,e,r){if(eg(t)&&(t=rg(e=t,this.key)),e&&(t||0===t)){if(!r&&this.reg.has(t))return this.update(t,e);for(let o,s=0;s<this.field.length;s++){o=this.B[s];var n=this.index.get(this.field[s]);if("function"==typeof o){var i=o(e);i&&n.add(t,i,r,!0)}else(!(i=o.G)||i(e))&&(o.constructor===String?o=[""+o]:tg(o)&&(o=[o]),zg(e,o,this.D,0,n,t,o[0],r))}if(this.tag)for(n=0;n<this.A.length;n++){var o=this.A[n];i=this.tag.get(this.F[n]);let a=Zh();if("function"==typeof o){if(!(o=o(e)))continue}else{var s=o.G;if(s&&!s(e))continue;o.constructor===String&&(o=""+o),o=rg(e,o)}if(i&&o){tg(o)&&(o=[o]);for(let e,n,l=0;l<o.length;l++)if(e=o[l],!a[e]&&(a[e]=1,(s=i.get(e))?n=s:i.set(e,n=[]),!r||!n.includes(t))){if(n.length===2**31-1){if(s=new vg(n),this.fastupdate)for(let t of this.reg.values())t.includes(n)&&(t[t.indexOf(n)]=s);i.set(e,n=s)}n.push(t),this.fastupdate&&((s=this.reg.get(t))?s.push(n):this.reg.set(t,[n]))}}}if(this.store&&(!r||!this.store.has(t))){let n;if(this.h){n=Zh();for(let t,i=0;i<this.h.length;i++){if(t=this.h[i],(r=t.G)&&!r(e))continue;let o;if("function"==typeof t){if(o=t(e),!o)continue;t=[t.O]}else if(tg(t)||t.constructor===String){n[t]=e[t];continue}$g(e,n,t,0,t[0],o)}}this.store.set(t,n||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this},Kg.prototype.or=function(){return Fg(this,"or",Wg,arguments)},Kg.prototype.and=function(){return Fg(this,"and",Hg,arguments)},Kg.prototype.xor=function(){return Fg(this,"xor",Vg,arguments)},Kg.prototype.not=function(){return Fg(this,"not",qg,arguments)},(Jh=Kg.prototype).limit=function(t){if(this.await){const e=this;this.C.push(function(){return e.limit(t).result})}else if(this.result.length){const e=[];for(let r,n=0;n<this.result.length;n++)if(r=this.result[n]){if(!(r.length<=t)){e[n]=r.slice(0,t);break}if(e[n]=r,!(t-=r.length))break}this.result=e}return this},Jh.offset=function(t){if(this.await){const e=this;this.C.push(function(){return e.offset(t).result})}else if(this.result.length){const e=[];for(let r,n=0;n<this.result.length;n++)(r=this.result[n])&&(r.length<=t?t-=r.length:(e[n]=r.slice(t),t=0));this.result=e}return this},Jh.boost=function(t){if(this.await){const e=this;this.C.push(function(){return e.boost(t).result})}else this.h+=t;return this},Jh.resolve=function(t,e,r,n,i){let o=this.await?Yg(this,!0):this.result;if(o.then){const s=this;return o.then(function(){return s.resolve(t,e,r,n,i)})}return o.length&&("object"==typeof t?(n=t.highlight||this.highlight,r=!!n||t.enrich,e=t.offset,t=t.limit):(n=n||this.highlight,r=!!n||r),o=i?r?tf.call(this.index,o):o:Ig.call(this.index,o,t||100,e,r)),this.finalize(o,n)},Jh.finalize=function(t,e){if(t.then){const r=this;return t.then(function(t){return r.finalize(t,e)})}e&&t.length&&this.query&&(t=Ug(this.query,t,this.index.index,this.field,e));const r=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",r&&r(t),t},ef.prototype.search=function(t,e,r,n){r||(!e&&eg(t)?(r=t,t=""):eg(e)&&(r=e,e=0));let i=[];var o=[];let s,a,l,c,d,u,h,g,f=0,p=!0;if(r){r.constructor===Array&&(r={index:r}),t=r.query||t,s=r.pluck,a=r.merge,c=r.boost,u=s||r.field||(u=r.index)&&(u.index?null:u);var m=this.tag&&r.tag;l=r.suggest,p=!1!==r.resolve,d=r.cache,h=p&&this.store&&r.highlight;var b=!!h||p&&this.store&&r.enrich;e=r.limit||e;var y=r.offset||0;if(e||(e=p?100:0),m&&(!this.db||!n)){m.constructor!==Array&&(m=[m]);var x=[];for(let t,e=0;e<m.length;e++)if(t=m[e],t.field&&t.tag){var v=t.tag;if(v.constructor===Array)for(var k=0;k<v.length;k++)x.push(t.field,v[k]);else x.push(t.field,v)}else{v=Object.keys(t);for(let e,r,n=0;n<v.length;n++)if(e=v[n],r=t[e],r.constructor===Array)for(k=0;k<r.length;k++)x.push(e,r[k]);else x.push(e,r)}if(m=x,!t){if(o=[],x.length)for(m=0;m<x.length;m+=2){if(this.db){if(!(n=this.index.get(x[m])))continue;o.push(n=n.db.tag(x[m+1],e,y,b))}else n=Zg.call(this,x[m],x[m+1],e,y,b);i.push(p?{field:x[m],tag:x[m+1],result:n}:[n])}if(o.length){const t=this;return Promise.all(o).then(function(e){for(let t=0;t<e.length;t++)p?i[t].result=e[t]:i[t]=e[t];return p?i:new Kg(i.length>1?Qg(i,1,0,0,l,c):i[0],t)})}return p?i:new Kg(i.length>1?Qg(i,1,0,0,l,c):i[0],this)}}p||s||!(u=u||this.field)||(tg(u)?s=u:(u.constructor===Array&&1===u.length&&(u=u[0]),s=u.field||u.index)),u&&u.constructor!==Array&&(u=[u])}u||(u=this.field),x=(this.worker||this.db)&&!n&&[];for(let s,a,c,_=0;_<u.length;_++){if(a=u[_],this.db&&this.tag&&!this.B[_])continue;let C;if(tg(a)||(C=a,a=C.field,t=C.query||t,e=Gh(C.limit,e),y=Gh(C.offset,y),l=Gh(C.suggest,l),h=p&&this.store&&Gh(C.highlight,h),b=!!h||p&&this.store&&Gh(C.enrich,b),d=Gh(C.cache,d)),n)s=n[_];else{k=(v=C||r||{}).enrich;var w=this.index.get(a);if(m&&(this.db&&(v.tag=m,v.field=u,g=w.db.support_tag_search),!g&&k&&(v.enrich=!1),g||(v.limit=0,v.offset=0)),s=d?w.searchCache(t,m&&!g?0:e,v):w.search(t,m&&!g?0:e,v),m&&!g&&(v.limit=e,v.offset=y),k&&(v.enrich=k),x){x[_]=s;continue}}if(c=(s=s.result||s)&&s.length,m&&c){if(v=[],k=0,this.db&&n){if(!g)for(w=u.length;w<n.length;w++){let t=n[w];if(t&&t.length)k++,v.push(t);else if(!l)return p?i:new Kg(i,this)}}else for(let t,e,r=0;r<m.length;r+=2){if(t=this.tag.get(m[r]),!t){if(l)continue;return p?i:new Kg(i,this)}if(e=(t=t&&t.get(m[r+1]))&&t.length)k++,v.push(t);else if(!l)return p?i:new Kg(i,this)}if(k){if(s=Xg(s,v,e,y,p),c=s.length,!c&&!l)return p?s:new Kg(s,this);k--}}if(c)o[f]=a,i.push(s),f++;else if(1===u.length)return p?i:new Kg(i,this)}if(x){if(this.db&&m&&m.length&&!g)for(b=0;b<m.length;b+=2){if(!(o=this.index.get(m[b]))){if(l)continue;return p?i:new Kg(i,this)}x.push(o.db.tag(m[b+1],e,y,!1))}const n=this;return Promise.all(x).then(function(i){return r&&(r.resolve=p),i.length&&(i=n.search(t,e,r,i)),i})}if(!f)return p?i:new Kg(i,this);if(s&&(!b||!this.store))return i=i[0],p?i:new Kg(i,this);for(x=[],y=0;y<o.length;y++){if(m=i[y],b&&m.length&&void 0===m[0].doc&&(this.db?x.push(m=this.index.get(this.field[0]).db.enrich(m)):m=tf.call(this,m)),s)return p?h?Ug(t,m,this.index,s,h):m:new Kg(m,this);i[y]={field:o[y],result:m}}if(b&&this.db&&x.length){const e=this;return Promise.all(x).then(function(r){for(let t=0;t<r.length;t++)i[t].result=r[t];return h&&(i=Ug(t,i,e.index,s,h)),a?Gg(i):i})}return h&&(i=Ug(t,i,this.index,s,h)),a?Gg(i):i},(Jh=ef.prototype).mount=function(t){let e=this.field;if(this.tag)for(let t,n=0;n<this.F.length;n++){t=this.F[n];var r=void 0;this.index.set(t,r=new kf({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(t),r.tag=this.tag.get(t)}r=[];const n={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let i,o,s=0;s<e.length;s++){n.field=o=e[s],i=this.index.get(o);const a=new t.constructor(t.id,n);a.id=t.id,r[s]=a.mount(i),i.document=!0,s?i.bypass=!0:i.store=this.store}const i=this;return this.db=Promise.all(r).then(function(){i.db=!0})},Jh.commit=async function(){const t=[];for(const e of this.index.values())t.push(e.commit());await Promise.all(t),this.reg.clear()},Jh.destroy=function(){const t=[];for(const e of this.index.values())t.push(e.destroy());return Promise.all(t)},Jh.append=function(t,e){return this.add(t,e,!0)},Jh.update=function(t,e){return this.remove(t).add(t,e)},Jh.remove=function(t){for(var e of(eg(t)&&(t=rg(t,this.key)),this.index.values()))e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let r of this.tag.values())for(let n of r){e=n[0];const i=n[1],o=i.indexOf(t);o>-1&&(i.length>1?i.splice(o,1):r.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this},Jh.clear=function(){const t=[];for(const e of this.index.values()){const r=e.clear();r.then&&t.push(r)}if(this.tag)for(const t of this.tag.values())t.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this},Jh.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)},Jh.cleanup=function(){for(const t of this.index.values())t.cleanup();return this},Jh.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(t){return t[0]&&t[0].doc||null}):this.store.get(t)||null},Jh.set=function(t,e){return"object"==typeof t&&(t=rg(e=t,this.key)),this.store.set(t,e),this},Jh.searchCache=dg,Jh.export=function(t,e,r=0,n=0){if(r<this.field.length){const i=this.field[r];if((e=this.index.get(i).export(t,i,r,n=1))&&e.then){const n=this;return e.then(function(){return n.export(t,i,r+1)})}return this.export(t,i,r+1)}let i,o;switch(n){case 0:i="reg",o=cf(this.reg),e=null;break;case 1:i="tag",o=this.tag&&af(this.tag,this.reg.size),e=null;break;case 2:i="doc",o=this.store&&of(this.store),e=null;break;default:return}return uf.call(this,t,e,i,o||null,r,n)},Jh.import=function(t,e){var r=t.split(".");"json"===r[r.length-1]&&r.pop();const n=r.length>2?r[0]:"";if(r=r.length>2?r[2]:r[1],this.worker&&n)return this.index.get(n).import(t);if(e){if("string"==typeof e&&(e=JSON.parse(e)),n)return this.index.get(n).import(r,e);switch(r){case"reg":this.fastupdate=!1,this.reg=df(e,this.reg);for(let t,e=0;e<this.field.length;e++)t=this.index.get(this.field[e]),t.fastupdate=!1,t.reg=this.reg;if(this.worker){e=[];for(const r of this.index.values())e.push(r.import(t));return Promise.all(e)}break;case"tag":this.tag=lf(e,this.tag);break;case"doc":this.store=sf(e,this.store)}}},Lg(ef.prototype),kf.prototype.remove=function(t,e){const r=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(r){if(this.fastupdate){for(let e,n,i=0;i<r.length;i++)if((e=r[i])&&(n=e.length))if(e[n-1]===t)e.pop();else{const r=e.indexOf(t);r>=0&&e.splice(r,1)}}else gf(this.map,t),this.depth&&gf(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&wf(this)),this.cache&&this.cache.remove(t),this};const ff={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};function pf(t,e,r,n,i,o,s){let a,l;if(!(a=e[r])||s&&!a[s]){if(s?((e=a||(e[r]=Zh()))[s]=1,l=t.ctx,(a=l.get(s))?l=a:l.set(s,l=t.keystore?new kg(t.keystore):new Map)):(l=t.map,e[r]=1),(a=l.get(r))?l=a:l.set(r,l=a=[]),o)for(let r,o=0;o<a.length;o++)if((r=a[o])&&r.includes(i)){if(o<=n)return;r.splice(r.indexOf(i),1),t.fastupdate&&(e=t.reg.get(i))&&e.splice(e.indexOf(r),1);break}if(l=l[n]||(l[n]=[]),l.push(i),l.length===2**31-1){if(e=new vg(l),t.fastupdate)for(let r of t.reg.values())r.includes(l)&&(r[r.indexOf(l)]=e);a[n]=l=e}t.fastupdate&&((n=t.reg.get(i))?n.push(l):t.reg.set(i,[l]))}}function mf(t,e,r,n,i){return r&&t>1?e+(n||0)<=t?r+(i||0):(t-1)/(e+(n||0))*(r+(i||0))+1|0:0}function bf(t,e,r,n,i,o,s){let a=t.length,l=t;if(a>1)l=Qg(t,e,r,n,i,o,s);else if(1===a)return s?Ig.call(null,t[0],r,n):new Kg(t[0],this);return s?l:new Kg(l,this)}function yf(t,e,r,n,i,o,s){return t=vf(this,t,e,r,n,i,o,s),this.db?t.then(function(t){return i?t||[]:new Kg(t,this)}):t&&t.length?i?Ig.call(this,t,r,n):new Kg(t,this):i?[]:new Kg([],this)}function xf(t,e,r,n){let i=[];if(t&&t.length){if(t.length<=n)return void e.push(t);for(let e,r=0;r<n;r++)(e=t[r])&&(i[r]=e);if(i.length)return void e.push(i)}if(!r)return i}function vf(t,e,r,n,i,o,s,a){let l;return r&&(l=t.bidirectional&&e>r)&&(l=r,r=e,e=l),t.db?t.db.get(e,r,n,i,o,s,a):t=r?(t=t.ctx.get(r))&&t.get(e):t.map.get(e)}function kf(t,e){if(!this||this.constructor!==kf)return new kf(t);if(t){var r=tg(t)?t:t.preset;r&&(t=Object.assign({},ff[r],t))}else t={};const n=!0===(r=t.context)?{depth:1}:r||{},i=tg(t.encoder)?yg[t.encoder]:t.encode||t.encoder||{};this.encoder=i.encode?i:"object"==typeof i?new lg(i):{encode:i},this.resolution=t.resolution||9,this.tokenize=r=(r=t.tokenize)&&"default"!==r&&"exact"!==r&&r||"strict",this.depth="strict"===r&&n.depth||0,this.bidirectional=!1!==n.bidirectional,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(r=t.keystore||0)&&(this.keystore=r),this.map=r?new kg(r):new Map,this.ctx=r?new kg(r):new Map,this.reg=e||(this.fastupdate?r?new kg(r):new Map:r?new wg(r):new Set),this.N=n.resolution||3,this.rtl=i.rtl||t.rtl||!1,this.cache=(r=t.cache||null)&&new ug(r),this.resolve=!1!==t.resolve,(r=t.db)&&(this.db=this.mount(r)),this.M=!1!==t.commit,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}function wf(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}kf.prototype.add=function(t,e,r,n){if(e&&(t||0===t)){if(!n&&!r&&this.reg.has(t))return this.update(t,e);n=this.depth;const c=(e=this.encoder.encode(e,!n)).length;if(c){const d=Zh(),u=Zh(),h=this.resolution;for(let g=0;g<c;g++){let f=e[this.rtl?c-1-g:g];var i=f.length;if(i&&(n||!u[f])){var o=this.score?this.score(e,f,g,null,0):mf(h,c,g),s="";switch(this.tokenize){case"tolerant":if(pf(this,u,f,o,t,r),i>2){for(let e,n,a,l,c=1;c<i-1;c++)e=f.charAt(c),n=f.charAt(c+1),a=f.substring(0,c)+n,l=f.substring(c+2),pf(this,u,s=a+e+l,o,t,r),pf(this,u,s=a+l,o,t,r);pf(this,u,f.substring(0,f.length-1),o,t,r)}break;case"full":if(i>2){for(let n,l=0;l<i;l++)for(o=i;o>l;o--){s=f.substring(l,o),n=this.rtl?i-1-l:l;var a=this.score?this.score(e,f,g,s,n):mf(h,c,g,i,n);pf(this,u,s,a,t,r)}break}case"bidirectional":case"reverse":if(i>1){for(a=i-1;a>0;a--){s=f[this.rtl?i-1-a:a]+s;var l=this.score?this.score(e,f,g,s,a):mf(h,c,g,i,a);pf(this,u,s,l,t,r)}s=""}case"forward":if(i>1){for(a=0;a<i;a++)pf(this,u,s+=f[this.rtl?i-1-a:a],o,t,r);break}default:if(pf(this,u,f,o,t,r),n&&c>1&&g<c-1)for(i=this.N,s=f,o=Math.min(n+1,this.rtl?g+1:c-g),a=1;a<o;a++){f=e[this.rtl?c-1-g-a:g+a];pf(this,d,(l=this.bidirectional&&f>s)?s:f,this.score?this.score(e,s,g,f,a-1):mf(i+(c/2>i?0:1),c,g,o-1,a-1),t,r,l?f:s)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(r?{ins:t}:{del:t}),this.M&&wf(this)),this},kf.prototype.search=function(t,e,r){if(r||(e||"object"!=typeof t?"object"==typeof e&&(r=e,e=0):(r=t,t="")),r&&r.cache)return r.cache=!1,t=this.searchCache(t,e,r),r.cache=!0,t;let n,i,o,s,a,l,c,d,u=[],h=0;r&&(t=r.query||t,e=r.limit||e,h=r.offset||0,i=r.context,o=r.suggest,d=(s=r.resolve)&&r.enrich,l=r.boost,c=r.resolution,a=this.db&&r.tag),void 0===s&&(s=this.resolve),i=this.depth&&!1!==i;let g=this.encoder.encode(t,!i);if(n=g.length,e=e||(s?100:0),1===n)return yf.call(this,g[0],"",e,h,s,d,a);if(2===n&&i&&!o)return yf.call(this,g[1],g[0],e,h,s,d,a);let f,p=Zh(),m=0;if(i&&(f=g[0],m=1),c||0===c||(c=f?this.N:this.resolution),this.db){if(this.db.search&&!1!==(r=this.db.search(this,g,e,h,o,s,d,a)))return r;const t=this;return async function(){for(let e,r;m<n;m++){if((r=g[m])&&!p[r]){if(p[r]=1,e=await vf(t,r,f,0,0,!1,!1),e=xf(e,u,o,c)){u=e;break}f&&(o&&e&&u.length||(f=r))}o&&f&&m===n-1&&!u.length&&(c=t.resolution,f="",m=-1,p=Zh())}return bf(u,c,e,h,o,l,s)}()}for(let t,e;m<n;m++){if((e=g[m])&&!p[e]){if(p[e]=1,t=vf(this,e,f,0,0,!1,!1),t=xf(t,u,o,c)){u=t;break}f&&(o&&t&&u.length||(f=e))}o&&f&&m===n-1&&!u.length&&(c=this.resolution,f="",m=-1,p=Zh())}return bf(u,c,e,h,o,l,s)},(Jh=kf.prototype).mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)},Jh.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},Jh.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()},Jh.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},Jh.append=function(t,e){return this.add(t,e,!0)},Jh.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)},Jh.update=function(t,e){const r=this,n=this.remove(t);return n&&n.then?n.then(()=>r.add(t,e)):this.add(t,e)},Jh.cleanup=function(){return this.fastupdate?(gf(this.map),this.depth&&gf(this.ctx),this):this},Jh.searchCache=dg,Jh.export=function(t,e,r=0,n=0){let i,o;switch(n){case 0:i="reg",o=cf(this.reg);break;case 1:i="cfg",o=null;break;case 2:i="map",o=of(this.map,this.reg.size);break;case 3:i="ctx",o=af(this.ctx,this.reg.size);break;default:return}return uf.call(this,t,e,i,o,r,n)},Jh.import=function(t,e){if(e)switch("string"==typeof e&&(e=JSON.parse(e)),t=t.split("."),"json"===t[t.length-1]&&t.pop(),3===t.length&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=df(e,this.reg);break;case"map":this.map=sf(e,this.map);break;case"ctx":this.ctx=lf(e,this.ctx)}},Jh.serialize=function(t=!0){let e="",r="",n="";if(this.reg.size){let t;for(var i of this.reg.keys())t||(t=typeof i),e+=(e?",":"")+("string"===t?'"'+i+'"':i);e="index.reg=new Set(["+e+"]);",r=hf(this.map,t),r="index.map=new Map(["+r+"]);";for(const e of this.ctx.entries()){i=e[0];let r=hf(e[1],t);r="new Map(["+r+"])",r='["'+i+'",'+r+"]",n+=(n?",":"")+r}n="index.ctx=new Map(["+n+"]);"}return t?"function inject(index){"+e+r+n+"}":e+r+n},Lg(kf.prototype);const _f="undefined"!=typeof window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Cf=["map","ctx","tag","reg","cfg"],Mf=Zh();function Sf(t,e,r){const n=t.value;let i,o=0;for(let t,s=0;s<n.length;s++){if(t=r?n:n[s]){for(let r,o,a=0;a<e.length;a++)if(o=e[a],r=t.indexOf(o),r>=0){if(i=1,!(t.length>1)){n[s]=[];break}t.splice(r,1)}o+=t.length}if(r)break}o?i&&t.update(n):t.delete(),t.continue()}function Af(t,e){return new Promise((r,n)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,r(this.result)},t.onerror=t.onblocked=n,t=null})}Jh=function t(e,r={}){if(!this||this.constructor!==t)return new t(e,r);"object"==typeof e&&(r=e,e=e.name),e||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(e?":"+e.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=r.field?r.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=r.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}.prototype,Jh.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())},Jh.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),Mf[t.id]||(Mf[t.id]=[]),Mf[t.id].push(t.field);const e=_f.open(t.id,1);return e.onupgradeneeded=function(){const e=t.db=this.result;for(let r,n=0;n<Cf.length;n++){r=Cf[n];for(let n,i=0;i<Mf[t.id].length;i++)n=Mf[t.id][i],e.objectStoreNames.contains(r+("reg"!==r&&n?":"+n:""))||e.createObjectStore(r+("reg"!==r&&n?":"+n:""))}},t.db=Af(e,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})},Jh.close=function(){this.db&&this.db.close(),this.db=null},Jh.destroy=function(){return Af(_f.deleteDatabase(this.id))},Jh.clear=function(){const t=[];for(let e,r=0;r<Cf.length;r++){e=Cf[r];for(let r,n=0;n<Mf[this.id].length;n++)r=Mf[this.id][n],t.push(e+("reg"!==e&&r?":"+r:""))}const e=this.db.transaction(t,"readwrite");for(let r=0;r<t.length;r++)e.objectStore(t[r]).clear();return Af(e)},Jh.get=function(t,e,r=0,n=0,i=!0,o=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);const s=this;return Af(t).then(function(t){let e=[];if(!t||!t.length)return e;if(i){if(!r&&!n&&1===t.length)return t[0];for(let i,o=0;o<t.length;o++)if((i=t[o])&&i.length){if(n>=i.length){n-=i.length;continue}const t=r?n+Math.min(i.length-n,r):i.length;for(let r=n;r<t;r++)e.push(i[r]);if(n=0,e.length===r)break}return o?s.enrich(e):e}return t})},Jh.tag=function(t,e=0,r=0,n=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const i=this;return Af(t).then(function(t){return!t||!t.length||r>=t.length?[]:e||r?(t=t.slice(r,r+e),n?i.enrich(t):t):t})},Jh.enrich=function(t){"object"!=typeof t&&(t=[t]);const e=this.db.transaction("reg","readonly").objectStore("reg"),r=[];for(let n=0;n<t.length;n++)r[n]=Af(e.get(t[n]));return Promise.all(r).then(function(e){for(let r=0;r<e.length;r++)e[r]={id:t[r],doc:e[r]?JSON.parse(e[r]):null};return e})},Jh.has=function(t){return Af(t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t)).then(function(t){return!!t})},Jh.search=null,Jh.info=function(){},Jh.transaction=function(t,e,r){t+="reg"!==t&&this.field?":"+this.field:"";let n=this.h[t+":"+e];if(n)return r.call(this,n);let i=this.db.transaction(t,e);this.h[t+":"+e]=n=i.objectStore(t);const o=r.call(this,n);return this.h[t+":"+e]=null,Af(i).finally(function(){return o})},Jh.commit=async function(t){let e=t.commit_task,r=[];t.commit_task=[];for(let t,n=0;n<e.length;n++)t=e[n],t.del&&r.push(t.del);r.length&&await this.remove(r),t.reg.size&&(await this.transaction("map","readwrite",function(e){for(const r of t.map){const t=r[0],n=r[1];n.length&&(e.get(t).onsuccess=function(){let r=this.result;var i;if(r&&r.length){const t=Math.max(r.length,n.length);for(let e,o,s=0;s<t;s++)if((o=n[s])&&o.length){if((e=r[s])&&e.length)for(i=0;i<o.length;i++)e.push(o[i]);else r[s]=o;i=1}}else r=n,i=1;i&&e.put(r,t)})}}),await this.transaction("ctx","readwrite",function(e){for(const r of t.ctx){const t=r[0],n=r[1];for(const r of n){const n=r[0],i=r[1];i.length&&(e.get(t+":"+n).onsuccess=function(){let r=this.result;var o;if(r&&r.length){const t=Math.max(r.length,i.length);for(let e,n,s=0;s<t;s++)if((n=i[s])&&n.length){if((e=r[s])&&e.length)for(o=0;o<n.length;o++)e.push(n[o]);else r[s]=n;o=1}}else r=i,o=1;o&&e.put(r,t+":"+n)})}}}),t.store?await this.transaction("reg","readwrite",function(e){for(const r of t.store){const t=r[0],n=r[1];e.put("object"==typeof n?JSON.stringify(n):1,t)}}):t.bypass||await this.transaction("reg","readwrite",function(e){for(const r of t.reg.keys())e.put(1,r)}),t.tag&&await this.transaction("tag","readwrite",function(e){for(const r of t.tag){const t=r[0],n=r[1];n.length&&(e.get(t).onsuccess=function(){let r=this.result;r=r&&r.length?r.concat(n):n,e.put(r,t)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())},Jh.remove=function(t){return"object"!=typeof t&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Sf(e,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Sf(e,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Sf(e,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let r=0;r<t.length;r++)e.delete(t[r])})])};const Df=ef;let Tf=null,Pf=!1;async function Lf(){return await ul()}function Ef(t,e){const{positive:r,negative:n,phrases:i,regular:o,regexPatterns:s=[]}=e,a=[t.title||"",t.url||"",t.description||"",t.domain||"",t.category||"",Array.isArray(t.keywords)?t.keywords.join(" "):""].join(" ").toLowerCase(),l=[t.title||"",t.url||"",t.description||"",t.domain||"",t.category||"",Array.isArray(t.keywords)?t.keywords.join(" "):""].join(" ");for(const t of r)if(!a.includes(t))return!1;for(const t of n)if(a.includes(t))return!1;for(const t of i)if(!a.includes(t))return!1;for(const t of s){const e=t.flags.includes("i")?a:l;if(!t.test(e))return!1}if(o.length>0){if(!o.some(t=>a.includes(t)))return!1}return!0}function Of(t,e){const{positive:r,phrases:n,regular:i,regexPatterns:o=[]}=e;let s=0;const a=(t.title||"").toLowerCase(),l=(t.url||"").toLowerCase(),c=(t.domain||"").toLowerCase(),d=(t.description||"").toLowerCase(),u=(t.category||"").toLowerCase(),h=[...r,...n,...i];for(const t of h)a.includes(t)&&(s+=10,a.startsWith(t)&&(s+=5)),c.includes(t)&&(s+=5),u.includes(t)&&(s+=4),d.includes(t)&&(s+=2),l.includes(t)&&(s+=1);for(const e of o)e.test(t.title||"")&&(s+=8),e.test(t.url||"")&&(s+=3),e.test(t.description||"")&&(s+=2);return s}async function Rf(){if(Pf)return Tf;console.log("Initializing FlexSearch index...");const t=await bl("flexsearch_index");if(t&&t.serialized)try{Tf=new Df({document:{id:"id",index:["title","url","description","keywords","category","domain"],store:!0},tokenize:"forward",cache:!0,optimize:!0,resolution:9,context:{depth:3,bidirectional:!0}});const e=Object.keys(t.serialized);for(const r of e)await Tf.import(r,t.serialized[r]);return Pf=!0,console.log("Loaded FlexSearch index from cache"),Tf}catch(t){console.error("Error loading cached index:",t)}return await async function(){console.log("Building FlexSearch index..."),Tf=new Df({document:{id:"id",index:["title","url","description","keywords","category","domain"],store:!0},tokenize:"forward",cache:!0,optimize:!0,resolution:9,context:{depth:3,bidirectional:!0}});const t=await Lf();for(const e of t)await Bf(e,!1);Pf=!0;try{const e={};await Tf.export((t,r)=>{e[t]=r}),await ml("flexsearch_index",{serialized:e,timestamp:Date.now()}),console.log(`Indexed ${t.length} bookmarks`)}catch(t){console.error("Error caching index:",t)}return Tf}(),Tf}async function Bf(t,e=!0){Tf||await Rf();const r={id:t.id,title:t.title||"",url:t.url||"",description:t.description||"",keywords:Array.isArray(t.keywords)?t.keywords.join(" "):"",category:t.category||"",domain:t.domain||""};await Tf.add(r),e&&await async function(){if(!Tf)return;try{const t={};await Tf.export((e,r)=>{t[e]=r}),await ml("flexsearch_index",{serialized:t,timestamp:Date.now()})}catch(t){console.error("Error caching index:",t)}}()}async function jf(t,e=null,r={}){!e||e.domains||Array.isArray(e.domains)||(r=e,e=null);const{limit:n=50,offset:i=0,computeStats:o=!1}=r;let s=await Lf();if(e){const t=Date.now()-2592e6;s=s.filter(r=>{if(e.domains&&e.domains.length>0){const t=(r.domain||"").toLowerCase();if(!e.domains.some(e=>t.includes(e.toLowerCase())))return!1}if(e.folders&&e.folders.length>0){const t=(r.folderPath||"").toLowerCase();if(!e.folders.some(e=>t.includes(e.toLowerCase())))return!1}if(e.topics&&e.topics.length>0){const t=r.topics||[];if(!e.topics.some(e=>t.some(t=>t.toLowerCase()===e.toLowerCase()||t.toLowerCase().startsWith(e.toLowerCase()+"/"))))return!1}if(e.types&&e.types.length>0){const t=(r.contentType||"").toLowerCase();if(!e.types.some(e=>t===e.toLowerCase()))return!1}if(e.creators&&e.creators.length>0){const t=`${r.platform||"other"}:${r.creator}`;if(!e.creators.some(e=>e.key===t))return!1}if(e.tags&&e.tags.length>0){if(!r.tags||!Array.isArray(r.tags))return!1;if(!e.tags.some(t=>r.tags.includes(t)))return!1}if(e.deadLinks&&!1!==r.isAlive)return!1;if(e.stale){const e=r.dateAdded<t,n=!r.accessCount||0===r.accessCount,i=!1!==r.isAlive;if(!(e&&n&&i))return!1}if(e.dateRange){const{startDate:t,endDate:n}=e.dateRange;if(r.dateAdded<t||r.dateAdded>n)return!1}if(e.readingTimeRange){const{min:t,max:n}=e.readingTimeRange,i=r.readingTime||0;if(null!=t&&i<t)return!1;if(null!=n&&i>n)return!1}if(e.qualityScoreRange){const{min:t,max:n}=e.qualityScoreRange,i=r.qualityScore||0;if(null!=t&&i<t)return!1;if(null!=n&&i>n)return!1}if(null!==e.hasPublishedDate&&void 0!==e.hasPublishedDate){const t=Boolean(r.publishedDate||r.rawMetadata?.publishedDate);if(e.hasPublishedDate!==t)return!1}return!0})}if(!t||!t.trim()){const t=Ya(r.sortBy||"date_desc"),e={results:s.sort(t).slice(i,i+n),total:s.length,hasMore:i+n<s.length,parsedQuery:null};return o&&(e.stats=$f(s)),e}const{filters:a,remainingQuery:l}=function(t){if(!t||!t.trim())return{filters:{},remainingQuery:""};const e={};let r=t;const n=r.match(/category:(\S+)/i);n&&(e.category=n[1].toLowerCase(),r=r.replace(n[0],"").trim());const i=r.match(/domain:(\S+)/i);i&&(e.domain=i[1].toLowerCase(),r=r.replace(i[0],"").trim());const o=r.match(/platform:(\S+)/i);o&&(e.platform=o[1].toLowerCase(),r=r.replace(o[0],"").trim());const s=r.match(/channel:(@?\S+)/i);s&&(e.creator=s[1],r=r.replace(s[0],"").trim());const a=r.match(/author:(@?\S+)/i);a&&(e.creator=a[1],r=r.replace(a[0],"").trim());const l=r.match(/repo:(\S+)/i);l&&(e.repo=l[1].toLowerCase(),r=r.replace(l[0],"").trim());const c=r.match(/type:(\S+)/i);c&&(e.contentType=c[1].toLowerCase(),r=r.replace(c[0],"").trim());const d=r.match(/hasimage:(yes|no)/i);d&&(e.hasImage="yes"===d[1].toLowerCase(),r=r.replace(d[0],"").trim());const u=r.match(/playlist:(\S+)/i);u&&(e.playlist=u[1],r=r.replace(u[0],"").trim());const h=r.match(/accessed:(yes|no)/i);h&&(e.accessed="yes"===h[1].toLowerCase(),r=r.replace(h[0],"").trim());const g=r.match(/stale:(yes|no)/i);g&&(e.stale="yes"===g[1].toLowerCase(),r=r.replace(g[0],"").trim());const f=r.match(/enriched:(yes|no)/i);f&&(e.enriched="yes"===f[1].toLowerCase(),r=r.replace(f[0],"").trim());const p=r.match(/dead:(yes|no)/i);p&&(e.dead="yes"===p[1].toLowerCase(),r=r.replace(p[0],"").trim());const m=r.match(/folder:(?:"([^"]+)"|(\S+))/i);return m&&(e.folder=(m[1]||m[2]).toLowerCase(),r=r.replace(m[0],"").trim()),{filters:e,remainingQuery:r}}(t),c=function(t){if(!t||!t.trim())return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[],hasModifiers:!1};const e=[],r=[],n=[],i=[],o=[],s=/\/([^\/]+)\/([gimsuvy]*)?/g;let a,l=t;for(;null!==(a=s.exec(t));)try{const t=a[1],e=a[2]||"i",r=new RegExp(t,e);o.push(r)}catch(t){console.warn("Invalid regex pattern:",a[0],t.message)}l=l.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();const c=/([+-]?)"([^"]+)"/g;for(;null!==(a=c.exec(l));){const t=a[1],i=a[2].toLowerCase();"+"===t?e.push(i):"-"===t?r.push(i):n.push(i)}l=l.replace(/[+-]?"[^"]+"/g,"").trim();const d=l.split(/\s+/).filter(t=>t.length>0);for(const t of d){const n=t.toLowerCase();t.startsWith("+")&&t.length>1?e.push(n.slice(1)):t.startsWith("-")&&t.length>1?r.push(n.slice(1)):i.push(n)}return{positive:e,negative:r,phrases:n,regular:i,regexPatterns:o,hasModifiers:e.length>0||r.length>0||n.length>0||o.length>0}}(l);if(Object.keys(a).length>0&&(s=function(t,e){const r=Date.now()-2592e6;return t.filter(t=>{if(e.category&&(t.category||"uncategorized").toLowerCase()!==e.category)return!1;if(e.domain&&!(t.domain||"").toLowerCase().includes(e.domain))return!1;if(void 0!==e.accessed){const r=t.accessCount&&t.accessCount>0;if(e.accessed!==r)return!1}if(e.stale){const e=t.dateAdded<r,n=!t.accessCount||0===t.accessCount,i=!1!==t.isAlive;if(!(e&&n&&i))return!1}if(void 0!==e.enriched){const r=Boolean(t.description||t.keywords&&t.keywords.length>0||t.contentSnippet);if(e.enriched!==r)return!1}if(void 0!==e.dead){const r=!1===t.isAlive;if(e.dead!==r)return!1}if(e.folder&&!(t.folderPath||"").toLowerCase().includes(e.folder))return!1;if(e.platform&&(t.platform||"other").toLowerCase()!==e.platform)return!1;if(e.creator){const r=(t.creator||"").toLowerCase(),n=e.creator.toLowerCase();if(!r.includes(n)&&!r.includes(n.replace(/^@/,""))&&!`@${r}`.includes(n))return!1}if(e.repo&&!(t.platformData?.extra?.owner&&t.platformData?.extra?.repo?`${t.platformData.extra.owner}/${t.platformData.extra.repo}`.toLowerCase():"").includes(e.repo))return!1;if(e.contentType){const r=(t.contentType||"").toLowerCase();if(!e.contentType.split("|").map(t=>t.trim()).includes(r))return!1}if(void 0!==e.hasImage){const r=Boolean(t.platformData?.extra?.thumbnail||t.rawMetadata?.openGraph?.["og:image"]||t.rawMetadata?.twitterCard?.["twitter:image"]);if(e.hasImage!==r)return!1}return!(e.playlist&&!(t.platformData?.extra?.playlistId||"").includes(e.playlist))})}(s,a)),l.trim()){if(c.regular.length>0)try{const t=await Rf(),e=c.regular.join(" "),r=await t.search(e,{limit:1e4,suggest:!0}),n=new Set;Array.isArray(r)&&r.forEach(t=>{t&&Array.isArray(t.result)&&t.result.forEach(t=>n.add(t))}),s=s.filter(t=>n.has(t.id)),s=s.filter(t=>Ef(t,c))}catch(t){console.error("FlexSearch failed, falling back to manual search:",t),s=s.filter(t=>Ef(t,c))}else s=s.filter(t=>Ef(t,c));s=s.map(t=>({...t,_searchScore:Of(t,c)}));const t=Ya(r.sortBy||"relevance");s.sort(t)}else{const t=Ya(r.sortBy||"date_desc");s.sort(t)}const d=s.length,u={results:s.slice(i,i+n),total:d,hasMore:i+n<d,parsedQuery:c,specialFilters:a};return o&&(u.stats=$f(s)),u}function $f(t){const e=new Map,r=new Map,n=new Map,i=new Map,o=new Map,s=Date.now(),a=864e5,l=7*a,c=14*a,d=90*a,u=180*a,h=new Date,g=h.getFullYear(),f=new Date(g,h.getMonth(),1).getTime(),p=new Date(g,0,1).getTime();let m=0,b=0,y=0,x=0,v=0,k=0,w=0;for(const a of t){if(a.domain){const t=e.get(a.domain)||{count:0,latestDate:0};t.count++,a.dateAdded>t.latestDate&&(t.latestDate=a.dateAdded),e.set(a.domain,t)}if(a.folderPath){const t=r.get(a.folderPath)||0;r.set(a.folderPath,t+1)}const t=a.topics||[];for(const e of t)n.set(e,(n.get(e)||0)+1);if(a.creator){const t=`${a.platform||"other"}:${a.creator}`;i.has(t)||i.set(t,{creator:a.creator,platform:a.platform||"other",count:0}),i.get(t).count++}a.contentType&&o.set(a.contentType,(o.get(a.contentType)||0)+1);const h=a.dateAdded;s-h<l&&m++,s-h<c&&b++,h>=f&&y++,s-h<d&&x++,s-h<u&&v++,h>=p&&k++,h<p&&w++}return{domains:Array.from(e.entries()).map(([t,e])=>({domain:t,count:e.count,latestDate:e.latestDate})).sort((t,e)=>e.count-t.count),folders:Array.from(r.entries()).map(([t,e])=>({folder:t,count:e})).sort((t,e)=>e.count-t.count),topics:Array.from(n.entries()).map(([t,e])=>({topic:t,count:e})).sort((t,e)=>e.count-t.count),creators:Array.from(i.values()).sort((t,e)=>e.count-t.count),contentTypes:Array.from(o.entries()).map(([t,e])=>({type:t,count:e})).sort((t,e)=>e.count-t.count),dateCounts:{week:m,twoWeek:b,month:y,threeMonth:x,sixMonth:v,year:k,older:w}}}function zf(t,e){const r=t.toLowerCase().trim(),n=e.toLowerCase().trim();if(r===n)return 1;const i=Math.max(r.length,n.length);if(0===i)return 0;return 1-function(t,e){const r=t.length,n=e.length;if(0===r)return n;if(0===n)return r;const i=Array(r+1).fill(null).map(()=>Array(n+1).fill(0));for(let t=0;t<=r;t++)i[t][0]=t;for(let t=0;t<=n;t++)i[0][t]=t;for(let o=1;o<=r;o++)for(let r=1;r<=n;r++){const n=t[o-1]===e[r-1]?0:1;i[o][r]=Math.min(i[o-1][r]+1,i[o][r-1]+1,i[o-1][r-1]+n)}return i[r][n]}(r,n)/i}function If(t,e){const r=new Set(t.toLowerCase().split(/\s+/).filter(t=>t.length>2)),n=new Set(e.toLowerCase().split(/\s+/).filter(t=>t.length>2));if(0===r.size||0===n.size)return 0;const i=[...r].filter(t=>n.has(t)).length;return i/new Set([...r,...n]).size}function Ff(t){let e=0,r=0;return t.title&&t.title.length>3&&(e+=1,r++),t.description&&t.description.length>10&&(e+=1,r++),t.keywords&&t.keywords.length>0&&(e+=1,r++),t.category&&(e+=1,r++),t.domain&&(e+=1,r++),{coverage:e,fields:r,percentage:r>0?e/5*100:0}}function Nf(t,e){const r={titleFuzzy:0,titleWords:0,descriptionWords:0,keywordsOverlap:0,categoryMatch:0,domainMatch:0,urlPathSimilarity:0};if(t.title&&e.title&&(r.titleFuzzy=zf(t.title,e.title),r.titleWords=If(t.title,e.title)),t.description&&e.description&&(r.descriptionWords=If(t.description,e.description)),t.keywords?.length>0&&e.keywords?.length>0){const n=new Set(t.keywords.map(t=>t.toLowerCase())),i=new Set(e.keywords.map(t=>t.toLowerCase())),o=[...n].filter(t=>i.has(t)).length,s=new Set([...n,...i]).size;r.keywordsOverlap=o/s}if(t.category&&e.category&&(r.categoryMatch=t.category===e.category?1:0),t.domain&&e.domain&&(r.domainMatch=t.domain===e.domain?1:0),1===r.domainMatch)try{const n=new URL(t.url).pathname,i=new URL(e.url).pathname;r.urlPathSimilarity=zf(n,i)}catch(t){}let n;return n=1===r.domainMatch?.25*r.titleFuzzy+.2*r.titleWords+.2*r.urlPathSimilarity+.15*r.descriptionWords+.1*r.keywordsOverlap+.1*r.categoryMatch:.3*r.titleFuzzy+.25*r.titleWords+.2*r.descriptionWords+.15*r.keywordsOverlap+.1*r.categoryMatch,{combined:n,breakdown:r,sameDomain:1===r.domainMatch,sameCategory:1===r.categoryMatch}}const Wf=()=>new Promise(t=>setTimeout(t,0));async function Hf(t={}){const{minSimilarity:e=.5,maxPairs:r=100,prioritizeSameDomain:n=!0,requireHighCoverage:i=!1,minCoveragePercent:o=40,useCache:s=!0,forceRefresh:a=!1}=t;try{const t=`enhanced_similar_${e}_${r}`;if(s&&!a){const e=await bl(t);if(e&&e.pairs&&Date.now()-e.timestamp<(yl.similarities||864e5))return console.log("Returning cached enhanced similar results"),{pairs:e.pairs,stats:e.stats,fromCache:!0,cachedAt:e.timestamp,cacheAge:Date.now()-e.timestamp}}const l=await async function(){return await ul()}();if(l.length<2)return{pairs:[],stats:{total:0,sameDomain:0,crossDomain:0},fromCache:!1};let c=l;i&&(c=l.filter(t=>{const{percentage:e}=Ff(t);return e>=o}));const d=new Map;c.forEach(t=>{const e=t.domain||"unknown";d.has(e)||d.set(e,[]),d.get(e).push(t)});const u=[];let h=0;const g=100;for(const[t,r]of d.entries())if(!(r.length<2))for(let t=0;t<r.length;t++)for(let n=t+1;n<r.length;n++){h++,h%g===0&&await Wf();const i=r[t],o=r[n];if(i.url===o.url)continue;const s=Nf(i,o);s.combined>=e&&u.push({bookmark1:i,bookmark2:o,similarity:s.combined,breakdown:s.breakdown,sameDomain:!0,sameCategory:s.sameCategory,coverage1:Ff(i),coverage2:Ff(o)})}if(!n||u.length<r/2){const t=Math.min(200,c.length),n=c.sort(()=>Math.random()-.5).slice(0,t);for(let t=0;t<n.length;t++){for(let r=t+1;r<n.length;r++){h++,h%g===0&&await Wf();const i=n[t],o=n[r];if(i.domain===o.domain||i.url===o.url)continue;const s=Nf(i,o);s.combined>=e+.1&&u.push({bookmark1:i,bookmark2:o,similarity:s.combined,breakdown:s.breakdown,sameDomain:!1,sameCategory:s.sameCategory,coverage1:Ff(i),coverage2:Ff(o)})}if(u.length>=2*r)break}}const f=u.sort((t,e)=>e.similarity-t.similarity).slice(0,r),p={total:f.length,sameDomain:f.filter(t=>t.sameDomain).length,crossDomain:f.filter(t=>!t.sameDomain).length,avgSimilarity:f.length>0?f.reduce((t,e)=>t+e.similarity,0)/f.length:0};return s&&(await ml(t,{pairs:f,stats:p,timestamp:Date.now()}),console.log("Cached enhanced similar results")),{pairs:f,stats:p,fromCache:!1}}catch(t){return console.error("Error finding similar bookmarks with fuzzy matching:",t),{pairs:[],stats:{total:0,sameDomain:0,crossDomain:0},fromCache:!1}}}const{document:Vf}=p;function qf(t,e,r){const n=t.slice();return n[202]=e[r],n}function Uf(t,e,r){const n=t.slice();return n[202]=e[r],n}function Kf(t,e,r){const n=t.slice();return n[233]=e[r],n[235]=r,n}function Yf(t,e,r){const n=t.slice();return n[236]=e[r],n}function Qf(t,e,r){const n=t.slice();return n[207]=e[r],n}function Jf(t,e,r){const n=t.slice();return n[207]=e[r],n}function Xf(t,e,r){const n=t.slice();return n[207]=e[r],n}function Gf(t,e,r){const n=t.slice();return n[207]=e[r],n}function Zf(t,e,r){const n=t.slice();return n[207]=e[r],n}function tp(t,e,r){const n=t.slice();return n[207]=e[r],n}function ep(t,e,r){const n=t.slice();return n[255]=e[r],n[257]=r,n}function rp(t,e,r){const n=t.slice();return n[251]=e[r],n[253]=r,n}function np(t,e,r){const n=t.slice();return n[207]=e[r],n[235]=r,n}function ip(t,e,r){const n=t.slice();return n[207]=e[r],n}function op(t,e,r){const n=t.slice();return n[260]=e[r],n}function sp(t,e,r){const n=t.slice();return n[263]=e[r],n}function ap(t,e,r){const n=t.slice();return n[266]=e[r],n}function lp(t,e,r){const n=t.slice();return n[207]=e[r],n}function cp(t,e,r){const n=t.slice();return n[207]=e[r],n}function dp(t,e,r){const n=t.slice();return n[212]=e[r],n}function up(t,e,r){const n=t.slice();return n[215]=e[r],n}function hp(t,e,r){const n=t.slice();return n[218]=e[r],n}function gp(t,e,r){const n=t.slice();return n[221]=e[r],n}function fp(t,e,r){const n=t.slice();return n[224]=e[r],n}function pp(t,e,r){const n=t.slice();return n[227]=e[r],n}function mp(t,e,r){const n=t.slice();return n[230]=e[r],n}function bp(t){let e,r;return{c(){e=k("svg"),r=k("path"),A(r,"d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"),A(e,"class","w-5 h-5"),A(e,"fill","currentColor"),A(e,"viewBox","0 0 20 20")},m(t,n){b(t,e,n),m(e,r)},d(t){t&&y(e)}}}function yp(t){let e,r;return{c(){e=k("svg"),r=k("path"),A(r,"fill-rule","evenodd"),A(r,"d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"),A(r,"clip-rule","evenodd"),A(e,"class","w-5 h-5"),A(e,"fill","currentColor"),A(e,"viewBox","0 0 20 20")},m(t,n){b(t,e,n),m(e,r)},d(t){t&&y(e)}}}function xp(e){let r,n;return r=new Vu({}),{c(){at(r.$$.fragment)},m(t,e){lt(r,t,e),n=!0},p:t,i(t){n||(rt(r.$$.fragment,t),n=!0)},o(t){nt(r.$$.fragment,t),n=!1},d(t){ct(r,t)}}}function vp(e){let r;function n(t,e){return t[4]?Cp:_p}let i=n(e),o=i(e);return{c(){r=v("div"),o.c(),A(r,"class","space-y-8")},m(t,e){b(t,r,e),o.m(r,null)},p(t,e){i===(i=n(t))&&o?o.p(t,e):(o.d(1),o=i(t),o&&(o.c(),o.m(r,null)))},i:t,o:t,d(t){t&&y(r),o.d()}}}function kp(e){let r,n;return r=new Qh({}),r.$on("filterByCategory",e[65]),r.$on("filterByDomain",e[66]),r.$on("filterByAccessed",e[67]),r.$on("filterByStale",e[68]),r.$on("filterByDead",e[69]),r.$on("filterByUnenriched",e[70]),r.$on("filterByUncategorized",e[71]),r.$on("showDuplicates",e[72]),r.$on("deleteBookmarks",e[73]),r.$on("searchQuery",e[74]),{c(){at(r.$$.fragment)},m(t,e){lt(r,t,e),n=!0},p:t,i(t){n||(rt(r.$$.fragment,t),n=!0)},o(t){nt(r.$$.fragment,t),n=!1},d(t){ct(r,t)}}}function wp(t){let e,r,n,i,o,s,a,l,c,d,u;r=new Kc({props:{value:t[2]}}),r.$on("search",t[62]);let h={searchResultStats:t[17],isSearchActive:!!t[2]};s=new Fd({props:h}),t[120](s);const g=[Pb,Tb,Db,Ab],f=[];function p(t,e){return t[4]?0:t[5]?1:0===t[3].length?2:3}return c=p(t),d=f[c]=g[c](t),{c(){e=v("div"),at(r.$$.fragment),n=_(),i=v("div"),o=v("div"),at(s.$$.fragment),a=_(),l=v("div"),d.c(),A(e,"class","mb-4"),A(o,"class","flex-shrink-0"),A(l,"class","flex-1 min-w-0 overflow-hidden"),A(i,"class","flex gap-6 min-h-0")},m(t,d){b(t,e,d),lt(r,e,null),b(t,n,d),b(t,i,d),m(i,o),lt(s,o,null),m(i,a),m(i,l),f[c].m(l,null),u=!0},p(t,e){const n={};4&e[0]&&(n.value=t[2]),r.$set(n);const i={};131072&e[0]&&(i.searchResultStats=t[17]),4&e[0]&&(i.isSearchActive=!!t[2]),s.$set(i);let o=c;c=p(t),c===o?f[c].p(t,e):(tt(),nt(f[o],1,1,()=>{f[o]=null}),et(),d=f[c],d?d.p(t,e):(d=f[c]=g[c](t),d.c()),rt(d,1),d.m(l,null))},i(t){u||(rt(r.$$.fragment,t),rt(s.$$.fragment,t),rt(d),u=!0)},o(t){nt(r.$$.fragment,t),nt(s.$$.fragment,t),nt(d),u=!1},d(o){o&&(y(e),y(n),y(i)),ct(r),t[120](null),ct(s),f[c].d()}}}function _p(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,L,E,O,R,B,j,$,z,I,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z,tt,et,rt,nt,it,ot,st,at,lt,ct,dt,ut,ht,gt,ft,pt,mt,bt,yt,xt,vt,kt,wt,_t,Ct,Mt,St,At,Dt,Tt,Pt,Lt,Et,Ot,Rt,Bt,jt,$t,zt,It,Ft,Nt,Wt,Ht,Vt,qt,Ut,Kt,Yt,Qt,Jt,Xt,Gt,Zt,te,ee,re,ne,ie,oe,se,ae,le,ce,de,ue,he,ge,fe,pe,me,be,ye,xe,ve,ke,we,_e,Ce,Me,Se,Ae,De,Te,Pe,Le,Ee,Oe,Re,Be,je,$e,ze,Ie,Fe,Ne,We,He,Ve,qe,Ue,Ke,Ye,Qe,Je,Xe,Ge,Ze,tr=t[12].length+"",er=(t[40]?t[40].total:0)+"",rr=t[16]&&Mp(t);function nr(t,e){return t[19]?Ap:Sp}let ir=nr(t),or=ir(t),sr=t[18]&&Dp(t);function ar(t,e){return t[25]?Lp:Pp}let lr=ar(t),cr=lr(t),dr=t[25]&&Ep(),ur=t[21]&&t[19]&&Op(t),hr=t[20]&&Bp(t);function gr(t,e){return t[22].length>0?Np:t[20]?void 0:Fp}let fr=gr(t),pr=fr&&fr(t);function mr(t,e){return t[26]?Vp:Hp}let br=mr(t),yr=br(t),xr=t[26]&&t[27]&&qp(t);function vr(t,e){return t[28]?Qp:t[26]?void 0:Yp}let kr=vr(t),wr=kr&&kr(t),_r=!t[15]&&Gp(t),Cr=t[14].length>0&&Zp(t),Mr=t[14].length>0&&!t[53]&&im(t),Sr=t[53]&&t[54]&&om(t),Ar=t[55]&&!t[53]&&am(t);function Dr(t,e){return t[15]?um:0===t[14].length?dm:cm}let Tr=Dr(t),Pr=Tr(t),Lr=t[41]?.fromCache&&Mm(t);function Er(t,e){return t[34]?Am:Sm}let Or=Er(t),Rr=Or(t);function Br(t,e){return"duplicates"===t[42]?Tm:"similar"===t[42]?Dm:void 0}let jr=Br(t),$r=jr&&jr(t),zr=t[44]&&Km(t);function Ir(t,e){return t[33]?Jm:t[44]&&0!==t[44].summary.total?Ym:Qm}let Fr=Ir(t),Nr=Fr(t),Wr=!t[31]&&hb(t),Hr=t[13].length>0&&gb(t);function Vr(t,e){return t[31]?mb:0===t[13].length?pb:fb}let qr=Vr(t),Ur=qr(t);function Kr(t,e){return t[47]?xb:yb}let Yr=Kr(t),Qr=Yr(t),Jr=t[50]&&vb(t);function Xr(t,e){return 0===t[49].length?Mb:Cb}let Gr=Xr(t),Zr=Gr(t);return{c(){rr&&rr.c(),e=_(),r=v("div"),i=v("div"),o=v("div"),o.innerHTML='<h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"><svg class="w-5 h-5 inline-block mr-2 text-purple-500 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>\n                  Bookmark Enrichment</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Fetch metadata (descriptions, categories, keywords) for your bookmarks</p>',s=_(),a=v("button"),or.c(),l=_(),c=v("div"),sr&&sr.c(),d=_(),u=v("div"),h=v("p"),h.textContent="How it works:",g=_(),f=v("ul"),cr.c(),p=_(),x=v("div"),k=v("div"),C=v("label"),S=w("Batch Size\n                    "),L=v("span"),L.textContent="(how many bookmarks to process)",E=_(),O=v("input"),R=_(),B=v("div"),j=v("label"),$=w("Concurrency\n                    "),z=v("span"),z.textContent="(parallel requests)",I=_(),F=v("input"),N=_(),W=v("p"),W.textContent="Higher = faster, but more resource intensive (recommended: 5-10)",H=_(),V=v("div"),q=v("label"),U=v("input"),K=_(),Y=v("div"),Q=v("span"),Q.textContent="Force Re-enrich",J=_(),X=v("p"),G=w("Re-fetch metadata for bookmarks even if already enriched. Bypasses the queue and processes "),Z=w(t[23]),tt=w(" bookmarks directly."),et=_(),dr&&dr.c(),rt=_(),ur&&ur.c(),nt=_(),hr&&hr.c(),it=_(),pr&&pr.c(),ot=_(),st=v("div"),at=v("div"),lt=v("div"),lt.innerHTML='<h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"><span class="inline-block mr-2"></span>\n                  Deep Content Analysis</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Analyze existing metadata to extract reading time, publish date, quality score, smart tags, and topics (no network requests)</p>',ct=_(),dt=v("button"),yr.c(),ut=_(),ht=v("div"),gt=v("div"),gt.innerHTML='<p class="mb-2">Extracts intelligent insights from your bookmarks:</p> <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-2"><div class="flex items-start gap-2"><span class="text-lg"></span> <div><div class="font-medium text-gray-800 dark:text-gray-100">Reading Time</div> <div class="text-xs text-gray-500 dark:text-gray-400">Estimated time to read/watch content</div></div></div> <div class="flex items-start gap-2"><span class="text-lg"></span> <div><div class="font-medium text-gray-800">Published Date</div> <div class="text-xs text-gray-500">When the content was published</div></div></div> <div class="flex items-start gap-2"><span class="text-lg"></span> <div><div class="font-medium text-gray-800">Quality Score</div> <div class="text-xs text-gray-500">Content completeness rating (0-100)</div></div></div> <div class="flex items-start gap-2"><span class="text-lg"></span> <div><div class="font-medium text-gray-800">Smart Tags &amp; Topics</div> <div class="text-xs text-gray-500">Auto-generated keywords and topic classification</div></div></div></div>',ft=_(),xr&&xr.c(),pt=_(),wr&&wr.c(),mt=_(),bt=v("div"),yt=v("div"),xt=v("div"),vt=v("h3"),kt=w("Dead Links "),_r&&_r.c(),wt=_(),_t=v("p"),_t.textContent="Bookmarks detected as unreachable during enrichment",Ct=_(),Cr&&Cr.c(),Mt=_(),St=v("div"),Mr&&Mr.c(),At=_(),Sr&&Sr.c(),Dt=_(),Ar&&Ar.c(),Tt=_(),Pr.c(),Pt=_(),Lt=v("div"),Et=v("div"),Ot=v("div"),Rt=v("div"),Rt.innerHTML='<h3 class="text-lg font-medium text-gray-900 dark:text-white">Duplicates &amp; Similarities</h3> <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Manage exact duplicates and find similar content</p>',Bt=_(),jt=v("div"),Lr&&Lr.c(),$t=_(),zt=v("button"),Rr.c(),It=_(),Ft=v("div"),Nt=v("button"),Wt=w("Exact Duplicates ("),Ht=w(tr),Vt=w(")"),Ut=_(),Kt=v("button"),Yt=w("Similar Content ("),Qt=w(er),Jt=w(")"),Gt=_(),Zt=v("div"),$r&&$r.c(),te=_(),ee=v("div"),re=v("div"),ne=v("h3"),ie=w(" Cleanup Candidates "),zr&&zr.c(),oe=_(),se=v("p"),se.textContent="Bookmarks that may be candidates for removal based on various criteria",ae=_(),le=v("div"),Nr.c(),ce=_(),de=v("div"),ue=v("div"),he=v("div"),ge=v("h3"),fe=w("Invalid URLs "),Wr&&Wr.c(),pe=_(),me=v("p"),me.textContent="Bookmarks with unrecognized URL schemes",be=_(),Hr&&Hr.c(),ye=_(),xe=v("div"),Ur.c(),ve=_(),ke=v("div"),we=v("div"),we.innerHTML='<h3 class="text-lg font-medium text-gray-900 dark:text-gray-100"><svg class="w-5 h-5 inline-block mr-2 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg>\n                Backup &amp; Restore</h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">Protect your enrichment data - backup regularly!</p>',_e=_(),Ce=v("div"),Me=v("div"),Se=v("div"),Ae=v("h4"),Ae.textContent="Create Backup",De=_(),Te=v("p"),Te.textContent="Download a complete backup of your bookmarks including all enrichment data, categories, and metadata.",Pe=_(),Le=v("button"),Qr.c(),Ee=_(),Oe=v("div"),Re=v("h4"),Re.textContent="Restore Backup",Be=_(),je=v("p"),je.textContent="Restore from a backup file. Your current data will be auto-backed up first.",$e=_(),ze=v("label"),Ie=v("span"),Ie.textContent="Choose backup file",Fe=_(),Ne=v("input"),We=_(),Jr&&Jr.c(),He=_(),Ve=v("div"),qe=v("div"),Ue=v("h4"),Ue.textContent="Auto-Backups",Ke=_(),Ye=v("button"),Ye.textContent="Refresh",Qe=_(),Je=v("p"),Je.textContent="Auto-backups are created before restore operations and enrichment runs. Last 3 are kept.",Xe=_(),Zr.c(),a.disabled=t[19],A(a,"class","px-4 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex-shrink-0 transition-colors"),A(i,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"),A(h,"class","font-medium mb-1 dark:text-gray-300"),A(f,"class","list-disc list-inside space-y-1 text-xs"),A(u,"class","mb-4 text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/50 p-3 rounded border border-gray-200 dark:border-gray-700"),A(L,"class","text-xs text-gray-500 dark:text-gray-500 font-normal"),A(O,"type","number"),A(O,"min","5"),A(O,"max","200"),A(O,"class","mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"),O.disabled=t[19],A(C,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),A(z,"class","text-xs text-gray-500 dark:text-gray-500 font-normal"),A(F,"type","number"),A(F,"min","1"),A(F,"max","20"),A(F,"class","mt-1 w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"),F.disabled=t[19],A(j,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),A(W,"class","text-xs text-gray-500 dark:text-gray-500 mt-1"),A(U,"type","checkbox"),A(U,"class","mt-0.5 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 dark:border-gray-600 rounded"),U.disabled=t[19],A(Q,"class","text-sm font-medium text-gray-700 dark:text-gray-300"),A(X,"class","text-xs text-gray-500 dark:text-gray-500 mt-0.5"),A(q,"class","flex items-start gap-2 cursor-pointer mt-2"),A(x,"class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"),A(c,"class","p-6"),A(r,"class","bg-white dark:bg-gray-800 rounded-lg shadow transition-colors"),dt.disabled=t[26],A(dt,"class","px-4 py-2 bg-indigo-600 text-white text-sm rounded-md hover:bg-indigo-700 disabled:opacity-50 flex-shrink-0 transition-colors"),A(at,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"),A(gt,"class","text-sm text-gray-600 dark:text-gray-300 mb-4"),A(ht,"class","p-6"),A(st,"class","bg-white dark:bg-gray-800 rounded-lg shadow border border-transparent dark:border-gray-700 transition-colors"),A(vt,"class","text-lg font-medium text-gray-900 dark:text-gray-100"),A(_t,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),A(yt,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"),A(St,"class","p-6"),A(bt,"class","bg-white dark:bg-gray-800 rounded-lg shadow border border-transparent dark:border-gray-700 transition-colors"),zt.disabled=t[34],A(zt,"class","px-3 py-1.5 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),A(jt,"class","flex items-center gap-2"),A(Ot,"class","flex items-center justify-between flex-wrap gap-3"),A(Nt,"class",qt="pb-2 text-sm font-medium border-b-2 transition-colors "+("duplicates"===t[42]?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),A(Kt,"class",Xt="pb-2 text-sm font-medium border-b-2 transition-colors "+("similar"===t[42]?"border-indigo-600 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),A(Ft,"class","flex space-x-4 mt-4 border-b border-gray-100 dark:border-gray-700"),A(Et,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),A(Zt,"class","p-6"),A(Lt,"class","bg-white dark:bg-gray-800 rounded-lg shadow"),A(ne,"class","text-lg font-medium text-gray-900 dark:text-gray-100"),A(se,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),A(re,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),A(le,"class","p-6"),A(ee,"class","bg-white dark:bg-gray-800 rounded-lg shadow border border-transparent dark:border-gray-700 transition-colors"),A(ge,"class","text-lg font-medium text-gray-900 dark:text-gray-100"),A(me,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),A(ue,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"),A(xe,"class","p-6"),A(de,"class","bg-white dark:bg-gray-800 rounded-lg shadow border border-transparent dark:border-gray-700 transition-colors"),A(we,"class","px-6 py-4 border-b border-gray-200 dark:border-gray-700"),A(Ae,"class","font-medium text-gray-900 dark:text-gray-100 mb-3"),A(Te,"class","text-sm text-gray-600 dark:text-gray-400 mb-4"),Le.disabled=t[47],A(Le,"class","w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center justify-center transition-colors"),A(Se,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-900/30"),A(Re,"class","font-medium text-gray-900 dark:text-gray-100 mb-3"),A(je,"class","text-sm text-gray-600 dark:text-gray-400 mb-4"),A(Ie,"class","sr-only"),A(Ne,"type","file"),A(Ne,"accept",".json"),A(Ne,"class","block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"),A(ze,"class","block"),A(Oe,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-900/30"),A(Me,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),A(Ue,"class","font-medium text-gray-900"),A(Ye,"class","text-sm text-blue-600 hover:text-blue-800"),A(qe,"class","flex justify-between items-center mb-3"),A(Je,"class","text-sm text-gray-600 mb-3"),A(Ve,"class","mt-6 border-t border-gray-200 pt-6"),A(Ce,"class","p-6"),A(ke,"class","bg-white dark:bg-gray-800 rounded-lg shadow border border-transparent dark:border-gray-700 transition-colors")},m(n,y){rr&&rr.m(n,y),b(n,e,y),b(n,r,y),m(r,i),m(i,o),m(i,s),m(i,a),or.m(a,null),m(r,l),m(r,c),sr&&sr.m(c,null),m(c,d),m(c,u),m(u,h),m(u,g),m(u,f),cr.m(f,null),m(c,p),m(c,x),m(x,k),m(k,C),m(C,S),m(C,L),m(C,E),m(C,O),P(O,t[23]),m(x,R),m(x,B),m(B,j),m(j,$),m(j,z),m(j,I),m(j,F),P(F,t[24]),m(B,N),m(B,W),m(x,H),m(x,V),m(V,q),m(q,U),U.checked=t[25],m(q,K),m(q,Y),m(Y,Q),m(Y,J),m(Y,X),m(X,G),m(X,Z),m(X,tt),m(Y,et),dr&&dr.m(Y,null),m(c,rt),ur&&ur.m(c,null),m(c,nt),hr&&hr.m(c,null),m(c,it),pr&&pr.m(c,null),b(n,ot,y),b(n,st,y),m(st,at),m(at,lt),m(at,ct),m(at,dt),yr.m(dt,null),m(st,ut),m(st,ht),m(ht,gt),m(ht,ft),xr&&xr.m(ht,null),m(ht,pt),wr&&wr.m(ht,null),b(n,mt,y),b(n,bt,y),m(bt,yt),m(yt,xt),m(xt,vt),m(vt,kt),_r&&_r.m(vt,null),m(xt,wt),m(xt,_t),m(yt,Ct),Cr&&Cr.m(yt,null),m(bt,Mt),m(bt,St),Mr&&Mr.m(St,null),m(St,At),Sr&&Sr.m(St,null),m(St,Dt),Ar&&Ar.m(St,null),m(St,Tt),Pr.m(St,null),b(n,Pt,y),b(n,Lt,y),m(Lt,Et),m(Et,Ot),m(Ot,Rt),m(Ot,Bt),m(Ot,jt),Lr&&Lr.m(jt,null),m(jt,$t),m(jt,zt),Rr.m(zt,null),m(Et,It),m(Et,Ft),m(Ft,Nt),m(Nt,Wt),m(Nt,Ht),m(Nt,Vt),m(Ft,Ut),m(Ft,Kt),m(Kt,Yt),m(Kt,Qt),m(Kt,Jt),m(Lt,Gt),m(Lt,Zt),$r&&$r.m(Zt,null),b(n,te,y),b(n,ee,y),m(ee,re),m(re,ne),m(ne,ie),zr&&zr.m(ne,null),m(re,oe),m(re,se),m(ee,ae),m(ee,le),Nr.m(le,null),b(n,ce,y),b(n,de,y),m(de,ue),m(ue,he),m(he,ge),m(ge,fe),Wr&&Wr.m(ge,null),m(he,pe),m(he,me),m(ue,be),Hr&&Hr.m(ue,null),m(de,ye),m(de,xe),Ur.m(xe,null),b(n,ve,y),b(n,ke,y),m(ke,we),m(ke,_e),m(ke,Ce),m(Ce,Me),m(Me,Se),m(Se,Ae),m(Se,De),m(Se,Te),m(Se,Pe),m(Se,Le),Qr.m(Le,null),m(Me,Ee),m(Me,Oe),m(Oe,Re),m(Oe,Be),m(Oe,je),m(Oe,$e),m(Oe,ze),m(ze,Ie),m(ze,Fe),m(ze,Ne),m(Oe,We),Jr&&Jr.m(Oe,null),m(Ce,He),m(Ce,Ve),m(Ve,qe),m(qe,Ue),m(qe,Ke),m(qe,Ye),m(Ve,Qe),m(Ve,Je),m(Ve,Xe),Zr.m(Ve,null),Ge||(Ze=[M(a,"click",t[75]),M(O,"input",t[142]),M(F,"input",t[143]),M(U,"change",t[144]),M(dt,"click",t[76]),M(zt,"click",t[148]),M(Nt,"click",t[149]),M(Kt,"click",t[150]),M(Le,"click",t[106]),M(Ne,"change",t[108]),M(Ye,"click",t[109])],Ge=!0)},p(t,r){t[16]?rr?rr.p(t,r):(rr=Mp(t),rr.c(),rr.m(e.parentNode,e)):rr&&(rr.d(1),rr=null),ir===(ir=nr(t))&&or?or.p(t,r):(or.d(1),or=ir(t),or&&(or.c(),or.m(a,null))),524288&r[0]&&(a.disabled=t[19]),t[18]?sr?sr.p(t,r):(sr=Dp(t),sr.c(),sr.m(c,d)):sr&&(sr.d(1),sr=null),lr===(lr=ar(t))&&cr?cr.p(t,r):(cr.d(1),cr=lr(t),cr&&(cr.c(),cr.m(f,null))),524288&r[0]&&(O.disabled=t[19]),8388608&r[0]&&D(O.value)!==t[23]&&P(O,t[23]),524288&r[0]&&(F.disabled=t[19]),16777216&r[0]&&D(F.value)!==t[24]&&P(F,t[24]),524288&r[0]&&(U.disabled=t[19]),33554432&r[0]&&(U.checked=t[25]),8388608&r[0]&&T(Z,t[23]),t[25]?dr||(dr=Ep(),dr.c(),dr.m(Y,null)):dr&&(dr.d(1),dr=null),t[21]&&t[19]?ur?ur.p(t,r):(ur=Op(t),ur.c(),ur.m(c,nt)):ur&&(ur.d(1),ur=null),t[20]?hr?hr.p(t,r):(hr=Bp(t),hr.c(),hr.m(c,it)):hr&&(hr.d(1),hr=null),fr===(fr=gr(t))&&pr?pr.p(t,r):(pr&&pr.d(1),pr=fr&&fr(t),pr&&(pr.c(),pr.m(c,null))),br!==(br=mr(t))&&(yr.d(1),yr=br(t),yr&&(yr.c(),yr.m(dt,null))),67108864&r[0]&&(dt.disabled=t[26]),t[26]&&t[27]?xr?xr.p(t,r):(xr=qp(t),xr.c(),xr.m(ht,pt)):xr&&(xr.d(1),xr=null),kr===(kr=vr(t))&&wr?wr.p(t,r):(wr&&wr.d(1),wr=kr&&kr(t),wr&&(wr.c(),wr.m(ht,null))),t[15]?_r&&(_r.d(1),_r=null):_r?_r.p(t,r):(_r=Gp(t),_r.c(),_r.m(vt,null)),t[14].length>0?Cr?Cr.p(t,r):(Cr=Zp(t),Cr.c(),Cr.m(yt,null)):Cr&&(Cr.d(1),Cr=null),t[14].length>0&&!t[53]?Mr?Mr.p(t,r):(Mr=im(t),Mr.c(),Mr.m(St,At)):Mr&&(Mr.d(1),Mr=null),t[53]&&t[54]?Sr?Sr.p(t,r):(Sr=om(t),Sr.c(),Sr.m(St,Dt)):Sr&&(Sr.d(1),Sr=null),t[55]&&!t[53]?Ar?Ar.p(t,r):(Ar=am(t),Ar.c(),Ar.m(St,Tt)):Ar&&(Ar.d(1),Ar=null),Tr===(Tr=Dr(t))&&Pr?Pr.p(t,r):(Pr.d(1),Pr=Tr(t),Pr&&(Pr.c(),Pr.m(St,null))),t[41]?.fromCache?Lr?Lr.p(t,r):(Lr=Mm(t),Lr.c(),Lr.m(jt,$t)):Lr&&(Lr.d(1),Lr=null),Or!==(Or=Er(t))&&(Rr.d(1),Rr=Or(t),Rr&&(Rr.c(),Rr.m(zt,null))),8&r[1]&&(zt.disabled=t[34]),4096&r[0]&&tr!==(tr=t[12].length+"")&&T(Ht,tr),2048&r[1]&&qt!==(qt="pb-2 text-sm font-medium border-b-2 transition-colors "+("duplicates"===t[42]?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"))&&A(Nt,"class",qt),512&r[1]&&er!==(er=(t[40]?t[40].total:0)+"")&&T(Qt,er),2048&r[1]&&Xt!==(Xt="pb-2 text-sm font-medium border-b-2 transition-colors "+("similar"===t[42]?"border-indigo-600 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"))&&A(Kt,"class",Xt),jr===(jr=Br(t))&&$r?$r.p(t,r):($r&&$r.d(1),$r=jr&&jr(t),$r&&($r.c(),$r.m(Zt,null))),t[44]?zr?zr.p(t,r):(zr=Km(t),zr.c(),zr.m(ne,null)):zr&&(zr.d(1),zr=null),Fr===(Fr=Ir(t))&&Nr?Nr.p(t,r):(Nr.d(1),Nr=Fr(t),Nr&&(Nr.c(),Nr.m(le,null))),t[31]?Wr&&(Wr.d(1),Wr=null):Wr?Wr.p(t,r):(Wr=hb(t),Wr.c(),Wr.m(ge,null)),t[13].length>0?Hr?Hr.p(t,r):(Hr=gb(t),Hr.c(),Hr.m(ue,null)):Hr&&(Hr.d(1),Hr=null),qr===(qr=Vr(t))&&Ur?Ur.p(t,r):(Ur.d(1),Ur=qr(t),Ur&&(Ur.c(),Ur.m(xe,null))),Yr!==(Yr=Kr(t))&&(Qr.d(1),Qr=Yr(t),Qr&&(Qr.c(),Qr.m(Le,null))),65536&r[1]&&(Le.disabled=t[47]),t[50]?Jr?Jr.p(t,r):(Jr=vb(t),Jr.c(),Jr.m(Oe,null)):Jr&&(Jr.d(1),Jr=null),Gr===(Gr=Xr(t))&&Zr?Zr.p(t,r):(Zr.d(1),Zr=Gr(t),Zr&&(Zr.c(),Zr.m(Ve,null)))},d(t){t&&(y(e),y(r),y(ot),y(st),y(mt),y(bt),y(Pt),y(Lt),y(te),y(ee),y(ce),y(de),y(ve),y(ke)),rr&&rr.d(t),or.d(),sr&&sr.d(),cr.d(),dr&&dr.d(),ur&&ur.d(),hr&&hr.d(),pr&&pr.d(),yr.d(),xr&&xr.d(),wr&&wr.d(),_r&&_r.d(),Cr&&Cr.d(),Mr&&Mr.d(),Sr&&Sr.d(),Ar&&Ar.d(),Pr.d(),Lr&&Lr.d(),Rr.d(),$r&&$r.d(),zr&&zr.d(),Nr.d(),Wr&&Wr.d(),Hr&&Hr.d(),Ur.d(),Qr.d(),Jr&&Jr.d(),Zr.d(),Ge=!1,n(Ze)}}}function Cp(e){let r;return{c(){r=v("div"),r.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',A(r,"class","flex items-center justify-center h-64")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Mp(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,M,S,D,P,L,E,O,R,B,j,$,z,I,F,N,W,H,V,q=t[16].total+"",U=t[16].duplicateGroups+"",K=t[16].deadLinks+"",Y=t[16].uniqueDomains+"",Q=t[16].addedThisWeek+"",J=t[16].addedThisMonth+"";return{c(){e=v("div"),r=v("div"),n=v("div"),i=w(q),o=_(),s=v("div"),s.textContent="Total Bookmarks",a=_(),l=v("div"),c=v("div"),d=w(U),u=_(),h=v("div"),h.textContent="Duplicate Groups",g=_(),f=v("div"),p=v("div"),x=w(K),k=_(),C=v("div"),C.textContent="Dead Links",M=_(),S=v("div"),D=v("div"),P=w(Y),L=_(),E=v("div"),E.textContent="Unique Domains",O=_(),R=v("div"),B=v("div"),j=w(Q),$=_(),z=v("div"),z.textContent="Added This Week",I=_(),F=v("div"),N=v("div"),W=w(J),H=_(),V=v("div"),V.textContent="Added This Month",A(n,"class","text-2xl font-bold text-blue-600 dark:text-blue-400"),A(s,"class","text-xs text-gray-500 dark:text-gray-400"),A(r,"class","bg-white dark:bg-gray-800 p-4 rounded-lg shadow text-center transition-colors"),A(c,"class","text-2xl font-bold text-red-600 dark:text-red-400"),A(h,"class","text-xs text-gray-500 dark:text-gray-400"),A(l,"class","bg-white dark:bg-gray-800 p-4 rounded-lg shadow text-center transition-colors"),A(p,"class","text-2xl font-bold text-orange-600 dark:text-orange-400"),A(C,"class","text-xs text-gray-500 dark:text-gray-400"),A(f,"class","bg-white dark:bg-gray-800 p-4 rounded-lg shadow text-center transition-colors"),A(D,"class","text-2xl font-bold text-purple-600 dark:text-purple-400"),A(E,"class","text-xs text-gray-500 dark:text-gray-400"),A(S,"class","bg-white dark:bg-gray-800 p-4 rounded-lg shadow text-center transition-colors"),A(B,"class","text-2xl font-bold text-green-600 dark:text-green-400"),A(z,"class","text-xs text-gray-500 dark:text-gray-400"),A(R,"class","bg-white dark:bg-gray-800 p-4 rounded-lg shadow text-center transition-colors"),A(N,"class","text-2xl font-bold text-cyan-600 dark:text-cyan-400"),A(V,"class","text-xs text-gray-500 dark:text-gray-400"),A(F,"class","bg-white dark:bg-gray-800 p-4 rounded-lg shadow text-center transition-colors"),A(e,"class","grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(r,o),m(r,s),m(e,a),m(e,l),m(l,c),m(c,d),m(l,u),m(l,h),m(e,g),m(e,f),m(f,p),m(p,x),m(f,k),m(f,C),m(e,M),m(e,S),m(S,D),m(D,P),m(S,L),m(S,E),m(e,O),m(e,R),m(R,B),m(B,j),m(R,$),m(R,z),m(e,I),m(e,F),m(F,N),m(N,W),m(F,H),m(F,V)},p(t,e){65536&e[0]&&q!==(q=t[16].total+"")&&T(i,q),65536&e[0]&&U!==(U=t[16].duplicateGroups+"")&&T(d,U),65536&e[0]&&K!==(K=t[16].deadLinks+"")&&T(x,K),65536&e[0]&&Y!==(Y=t[16].uniqueDomains+"")&&T(P,Y),65536&e[0]&&Q!==(Q=t[16].addedThisWeek+"")&&T(j,Q),65536&e[0]&&J!==(J=t[16].addedThisMonth+"")&&T(W,J)},d(t){t&&y(e)}}}function Sp(t){let e,r=t[25]?`Re-enrich ${t[23]} Bookmarks`:`Enrich Next ${t[23]} Pending`;return{c(){e=w(r)},m(t,r){b(t,e,r)},p(t,n){41943040&n[0]&&r!==(r=t[25]?`Re-enrich ${t[23]} Bookmarks`:`Enrich Next ${t[23]} Pending`)&&T(e,r)},d(t){t&&y(e)}}}function Ap(e){let r;return{c(){r=v("span"),r.innerHTML='<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n                    Enriching...',A(r,"class","flex items-center")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Dp(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,M,S,D,P,L,E,O,R,B,j,$,z=(t[18].pendingCount||t[18].queueSize||0)+"",I=(t[18].enrichedCount||0)+"",F=(t[18].totalBookmarks||0)+"",N=t[18].enabled?"":"",W=t[18].enabled?"System Enabled":"System Disabled",H=t[18].pendingCount>0&&t[18].totalBookmarks>0&&Tp(t);return{c(){e=v("div"),r=v("div"),n=v("div"),i=v("div"),o=w(z),s=_(),a=v("div"),a.textContent="Pending Enrichment",l=_(),c=v("div"),d=v("div"),u=w(I),h=_(),g=v("div"),g.textContent="Successfully Enriched",f=_(),p=v("div"),x=v("div"),k=w(F),C=_(),M=v("div"),M.textContent="Total HTTP Bookmarks",S=_(),D=v("div"),P=v("div"),L=w(N),O=_(),R=v("div"),B=w(W),$=_(),H&&H.c(),A(i,"class","text-xl font-bold text-purple-700 dark:text-purple-300"),A(a,"class","text-xs text-purple-600 dark:text-purple-400"),A(n,"class","text-center"),A(d,"class","text-xl font-bold text-green-700 dark:text-green-300"),A(g,"class","text-xs text-green-600 dark:text-green-400"),A(c,"class","text-center"),A(x,"class","text-xl font-bold text-blue-700 dark:text-blue-300"),A(M,"class","text-xs text-blue-600 dark:text-blue-400"),A(p,"class","text-center"),A(P,"class",E="text-xl font-bold "+(t[18].enabled?"text-green-700 dark:text-green-400":"text-gray-500 dark:text-gray-500")),A(R,"class",j="text-xs "+(t[18].enabled?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-500")),A(D,"class","text-center"),A(r,"class","grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"),A(e,"class","mb-4 p-4 bg-purple-50 dark:bg-purple-900/10 rounded-lg border border-purple-200 dark:border-purple-800/30")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(i,o),m(n,s),m(n,a),m(r,l),m(r,c),m(c,d),m(d,u),m(c,h),m(c,g),m(r,f),m(r,p),m(p,x),m(x,k),m(p,C),m(p,M),m(r,S),m(r,D),m(D,P),m(P,L),m(D,O),m(D,R),m(R,B),m(e,$),H&&H.m(e,null)},p(t,r){262144&r[0]&&z!==(z=(t[18].pendingCount||t[18].queueSize||0)+"")&&T(o,z),262144&r[0]&&I!==(I=(t[18].enrichedCount||0)+"")&&T(u,I),262144&r[0]&&F!==(F=(t[18].totalBookmarks||0)+"")&&T(k,F),262144&r[0]&&N!==(N=t[18].enabled?"":"")&&T(L,N),262144&r[0]&&E!==(E="text-xl font-bold "+(t[18].enabled?"text-green-700 dark:text-green-400":"text-gray-500 dark:text-gray-500"))&&A(P,"class",E),262144&r[0]&&W!==(W=t[18].enabled?"System Enabled":"System Disabled")&&T(B,W),262144&r[0]&&j!==(j="text-xs "+(t[18].enabled?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-500"))&&A(R,"class",j),t[18].pendingCount>0&&t[18].totalBookmarks>0?H?H.p(t,r):(H=Tp(t),H.c(),H.m(e,null)):H&&(H.d(1),H=null)},d(t){t&&y(e),H&&H.d()}}}function Tp(t){let e,r,n,i,o,s,a,l,c,d,u=(t[18].enrichedCount/t[18].totalBookmarks*100).toFixed(1)+"";return{c(){e=v("div"),r=v("div"),n=v("span"),n.textContent="Overall Coverage",i=_(),o=v("span"),s=w(u),a=w("%"),l=_(),c=v("div"),d=v("div"),A(r,"class","flex justify-between text-xs text-purple-600 dark:text-purple-400 mb-1"),A(d,"class","bg-purple-600 h-2 rounded-full transition-all duration-300"),L(d,"width",t[18].enrichedCount/t[18].totalBookmarks*100+"%"),A(c,"class","w-full bg-purple-200 rounded-full h-2"),A(e,"class","mt-3")},m(t,u){b(t,e,u),m(e,r),m(r,n),m(r,i),m(r,o),m(o,s),m(o,a),m(e,l),m(e,c),m(c,d)},p(t,e){262144&e[0]&&u!==(u=(t[18].enrichedCount/t[18].totalBookmarks*100).toFixed(1)+"")&&T(s,u),262144&e[0]&&L(d,"width",t[18].enrichedCount/t[18].totalBookmarks*100+"%")},d(t){t&&y(e)}}}function Pp(t){let e,r,n,i,o,s,a,l,c;return{c(){e=v("li"),r=v("strong"),r.textContent="Standard Mode:",n=w(" Will process the next "),i=w(t[23]),o=w(" bookmarks that have "),s=v("strong"),s.textContent="never",a=w(" been enriched."),l=_(),c=v("li"),c.textContent="Already enriched bookmarks are skipped to save resources."},m(t,d){b(t,e,d),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),m(e,a),b(t,l,d),b(t,c,d)},p(t,e){8388608&e[0]&&T(i,t[23])},d(t){t&&(y(e),y(l),y(c))}}}function Lp(t){let e,r,n,i,o,s,a;return{c(){e=v("li"),r=v("strong"),r.textContent="Force Mode:",n=w(" Will re-download metadata for "),i=w(t[23]),o=w(" bookmarks, starting with unenriched ones, then oldest checked."),s=_(),a=v("li"),a.textContent="Use this to refresh data or fix broken metadata."},m(t,l){b(t,e,l),m(e,r),m(e,n),m(e,i),m(e,o),b(t,s,l),b(t,a,l)},p(t,e){8388608&e[0]&&T(i,t[23])},d(t){t&&(y(e),y(s),y(a))}}}function Ep(t){let e;return{c(){e=v("p"),e.textContent=" Will process unenriched bookmarks first, then oldest enriched",A(e,"class","text-xs text-purple-600 dark:text-purple-400 mt-1 font-medium")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Op(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p=(t[21].completed||t[21].current)+"",x=t[21].total+"",k=t[21].title&&Rp(t);return{c(){e=v("div"),r=v("div"),n=v("div"),i=v("span"),i.textContent="Processing...",o=_(),s=v("span"),a=w(p),l=w(" / "),c=w(x),d=w(" completed"),u=_(),h=v("div"),g=v("div"),f=_(),k&&k.c(),A(i,"class","text-sm font-medium text-blue-900 dark:text-blue-300"),A(s,"class","text-sm text-blue-700 dark:text-blue-400"),A(n,"class","flex justify-between items-center mb-2"),A(g,"class","bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300"),L(g,"width",(t[21].completed||t[21].current)/t[21].total*100+"%"),A(h,"class","w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2"),A(r,"class","mb-3"),A(e,"class","mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg")},m(t,p){b(t,e,p),m(e,r),m(r,n),m(n,i),m(n,o),m(n,s),m(s,a),m(s,l),m(s,c),m(s,d),m(r,u),m(r,h),m(h,g),m(e,f),k&&k.m(e,null)},p(t,r){2097152&r[0]&&p!==(p=(t[21].completed||t[21].current)+"")&&T(a,p),2097152&r[0]&&x!==(x=t[21].total+"")&&T(c,x),2097152&r[0]&&L(g,"width",(t[21].completed||t[21].current)/t[21].total*100+"%"),t[21].title?k?k.p(t,r):(k=Rp(t),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},d(t){t&&y(e),k&&k.d()}}}function Rp(t){let e,r,n,i,o,s,a,l,c,d="processing"===t[21].status?"":"completed"===t[21].status?"":"",u=t[21].title+"",h=t[21].url+"";return{c(){e=v("div"),r=v("div"),n=w(d),i=_(),o=w(u),a=_(),l=v("div"),c=w(h),A(r,"class","font-medium truncate"),A(r,"title",s=t[21].url),A(l,"class","text-blue-600 dark:text-blue-400 truncate text-[10px]"),A(e,"class","text-xs text-blue-800 dark:text-blue-200 space-y-1")},m(t,s){b(t,e,s),m(e,r),m(r,n),m(r,i),m(r,o),m(e,a),m(e,l),m(l,c)},p(t,e){2097152&e[0]&&d!==(d="processing"===t[21].status?"":"completed"===t[21].status?"":"")&&T(n,d),2097152&e[0]&&u!==(u=t[21].title+"")&&T(o,u),2097152&e[0]&&s!==(s=t[21].url)&&A(r,"title",s),2097152&e[0]&&h!==(h=t[21].url+"")&&T(c,h)},d(t){t&&y(e)}}}function Bp(t){let e,r;function n(t,e){return t[20].error?$p:jp}let i=n(t),o=i(t);return{c(){e=v("div"),o.c(),A(e,"class",r="mt-4 p-4 rounded-lg "+(t[20].error?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800"))},m(t,r){b(t,e,r),o.m(e,null)},p(t,s){i===(i=n(t))&&o?o.p(t,s):(o.d(1),o=i(t),o&&(o.c(),o.m(e,null))),1048576&s[0]&&r!==(r="mt-4 p-4 rounded-lg "+(t[20].error?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800"))&&A(e,"class",r)},d(t){t&&y(e),o.d()}}}function jp(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f=(t[20].processed||0)+"",p=(t[20].success||0)+"",x=t[20].failed>0&&zp(t),k=t[20].skipped>0&&Ip(t);return{c(){e=v("div"),r=v("div"),r.innerHTML='<strong class="dark:text-green-300">Enrichment Complete!</strong>',n=_(),i=v("div"),o=w("Processed: "),s=w(f),a=w(" bookmarks"),l=_(),c=v("div"),d=w("Successful: "),u=w(p),h=_(),x&&x.c(),g=_(),k&&k.c(),A(e,"class","text-green-700 dark:text-green-400 text-sm space-y-1")},m(t,f){b(t,e,f),m(e,r),m(e,n),m(e,i),m(i,o),m(i,s),m(i,a),m(e,l),m(e,c),m(c,d),m(c,u),m(e,h),x&&x.m(e,null),m(e,g),k&&k.m(e,null)},p(t,r){1048576&r[0]&&f!==(f=(t[20].processed||0)+"")&&T(s,f),1048576&r[0]&&p!==(p=(t[20].success||0)+"")&&T(u,p),t[20].failed>0?x?x.p(t,r):(x=zp(t),x.c(),x.m(e,g)):x&&(x.d(1),x=null),t[20].skipped>0?k?k.p(t,r):(k=Ip(t),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},d(t){t&&y(e),x&&x.d(),k&&k.d()}}}function $p(t){let e,r,n,i,o=t[20].error+"";return{c(){e=v("div"),r=v("strong"),r.textContent="Error:",n=_(),i=w(o),A(e,"class","text-red-700 dark:text-red-400 text-sm")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i)},p(t,e){1048576&e[0]&&o!==(o=t[20].error+"")&&T(i,o)},d(t){t&&y(e)}}}function zp(t){let e,r,n,i=t[20].failed+"";return{c(){e=v("div"),r=w("Failed: "),n=w(i),A(e,"class","text-orange-600 dark:text-orange-400")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){1048576&e[0]&&i!==(i=t[20].failed+"")&&T(n,i)},d(t){t&&y(e)}}}function Ip(t){let e,r,n,i=t[20].skipped+"";return{c(){e=v("div"),r=w("Skipped (already enriched): "),n=w(i),A(e,"class","text-gray-600 dark:text-gray-400")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){1048576&e[0]&&i!==(i=t[20].skipped+"")&&T(n,i)},d(t){t&&y(e)}}}function Fp(e){let r;return{c(){r=v("p"),r.textContent='Click "Run Enrichment" to fetch metadata for bookmarks that haven\'t been enriched yet. \n                  Only new bookmarks without descriptions or categories will be processed.',A(r,"class","text-gray-500 text-sm")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Np(t){let e,r,n,i,o,s,a,l=t[22].length+"",c=it(t[22].slice().reverse()),d=[];for(let e=0;e<c.length;e+=1)d[e]=Wp(ap(t,c,e));return{c(){e=v("details"),r=v("summary"),n=w("View Detailed Logs ("),i=w(l),o=w(")"),s=_(),a=v("div");for(let t=0;t<d.length;t+=1)d[t].c();A(r,"class","cursor-pointer text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300 font-medium transition-colors"),A(a,"class","mt-2 max-h-64 overflow-y-auto bg-gray-50 dark:bg-gray-900/50 rounded p-3 space-y-1 text-xs font-mono border border-gray-200 dark:border-gray-700"),A(e,"class","mt-4")},m(t,l){b(t,e,l),m(e,r),m(r,n),m(r,i),m(r,o),m(e,s),m(e,a);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(a,null)},p(t,e){if(4194304&e[0]&&l!==(l=t[22].length+"")&&T(i,l),4194304&e[0]){let r;for(c=it(t[22].slice().reverse()),r=0;r<c.length;r+=1){const n=ap(t,c,r);d[r]?d[r].p(n,e):(d[r]=Wp(n),d[r].c(),d[r].m(a,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=c.length}},d(t){t&&y(e),x(d,t)}}}function Wp(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x=new Date(t[266].timestamp).toLocaleTimeString()+"",k=t[266].current+"",C=t[266].total+"",M="completed"===t[266].status?"":"failed"===t[266].status||"error"===t[266].status?"":"",S=(t[266].title||t[266].url)+"";return{c(){e=v("div"),r=v("span"),n=w(x),i=w(" \n                        ["),o=w(k),s=w("/"),a=w(C),l=w("] \n                        "),c=w(M),d=_(),u=v("span"),h=w(S),f=_(),A(r,"class","text-gray-400 dark:text-gray-500"),A(u,"class","truncate inline-block max-w-md"),A(u,"title",g=t[266].url),A(e,"class",p="completed"===t[266].status?"text-green-700 dark:text-green-400":"failed"===t[266].status||"error"===t[266].status?"text-red-700 dark:text-red-400":"text-gray-600 dark:text-gray-400")},m(t,g){b(t,e,g),m(e,r),m(r,n),m(e,i),m(e,o),m(e,s),m(e,a),m(e,l),m(e,c),m(e,d),m(e,u),m(u,h),m(e,f)},p(t,r){4194304&r[0]&&x!==(x=new Date(t[266].timestamp).toLocaleTimeString()+"")&&T(n,x),4194304&r[0]&&k!==(k=t[266].current+"")&&T(o,k),4194304&r[0]&&C!==(C=t[266].total+"")&&T(a,C),4194304&r[0]&&M!==(M="completed"===t[266].status?"":"failed"===t[266].status||"error"===t[266].status?"":"")&&T(c,M),4194304&r[0]&&S!==(S=(t[266].title||t[266].url)+"")&&T(h,S),4194304&r[0]&&g!==(g=t[266].url)&&A(u,"title",g),4194304&r[0]&&p!==(p="completed"===t[266].status?"text-green-700 dark:text-green-400":"failed"===t[266].status||"error"===t[266].status?"text-red-700 dark:text-red-400":"text-gray-600 dark:text-gray-400")&&A(e,"class",p)},d(t){t&&y(e)}}}function Hp(t){let e;return{c(){e=w("Run Analysis")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Vp(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n                    Analyzing...',A(e,"class","flex items-center")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function qp(t){let e,r,n,i,o,s,a,l,c,d,u,h,g=t[27].current+"",f=t[27].total+"",p=t[27].title&&Up(t);return{c(){e=v("div"),r=v("div"),n=v("span"),n.textContent="Analyzing bookmarks...",i=_(),o=v("span"),s=w(g),a=w(" / "),l=w(f),c=_(),d=v("div"),u=v("div"),h=_(),p&&p.c(),A(r,"class","flex justify-between text-sm text-gray-600 mb-1"),A(u,"class","bg-indigo-600 h-2 rounded-full transition-all duration-300"),L(u,"width",t[27].current/t[27].total*100+"%"),A(d,"class","w-full bg-gray-200 rounded-full h-2 mb-2"),A(e,"class","mb-4")},m(t,g){b(t,e,g),m(e,r),m(r,n),m(r,i),m(r,o),m(o,s),m(o,a),m(o,l),m(e,c),m(e,d),m(d,u),m(e,h),p&&p.m(e,null)},p(t,r){134217728&r[0]&&g!==(g=t[27].current+"")&&T(s,g),134217728&r[0]&&f!==(f=t[27].total+"")&&T(l,f),134217728&r[0]&&L(u,"width",t[27].current/t[27].total*100+"%"),t[27].title?p?p.p(t,r):(p=Up(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},d(t){t&&y(e),p&&p.d()}}}function Up(t){let e,r,n,i,o=t[27].title+"",s=t[27].status&&Kp(t);return{c(){e=v("p"),r=w("Processing: "),n=w(o),i=_(),s&&s.c(),A(e,"class","text-xs text-gray-500 truncate")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i),s&&s.m(e,null)},p(t,r){134217728&r[0]&&o!==(o=t[27].title+"")&&T(n,o),t[27].status?s?s.p(t,r):(s=Kp(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&y(e),s&&s.d()}}}function Kp(t){let e,r,n,i=t[27].status+"";return{c(){e=v("span"),r=w(i),A(e,"class",n="ml-2 px-1.5 py-0.5 rounded text-xs "+("completed"===t[27].status?"bg-green-100 text-green-700":"")+" "+("skipped"===t[27].status?"bg-yellow-100 text-yellow-700":"")+" "+("failed"===t[27].status?"bg-red-100 text-red-700":""))},m(t,n){b(t,e,n),m(e,r)},p(t,o){134217728&o[0]&&i!==(i=t[27].status+"")&&T(r,i),134217728&o[0]&&n!==(n="ml-2 px-1.5 py-0.5 rounded text-xs "+("completed"===t[27].status?"bg-green-100 text-green-700":"")+" "+("skipped"===t[27].status?"bg-yellow-100 text-yellow-700":"")+" "+("failed"===t[27].status?"bg-red-100 text-red-700":""))&&A(e,"class",n)},d(t){t&&y(e)}}}function Yp(e){let r;return{c(){r=v("div"),r.innerHTML='<p class="text-gray-600 dark:text-gray-400 text-sm">Click &quot;Run Analysis&quot; to process all bookmarks that have been enriched with metadata.\n                    This will extract additional insights without making any network requests.</p> <div class="mt-3 text-xs text-gray-500 dark:text-gray-500 space-y-1"><div> Processes existing metadata only (very fast)</div> <div> Safe to run multiple times (idempotent)</div> <div> Enables future smart filtering features</div></div>',A(r,"class","p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Qp(t){let e,r;function n(t,e){return t[28].error?Xp:Jp}let i=n(t),o=i(t);return{c(){e=v("div"),o.c(),A(e,"class",r="p-4 rounded-lg "+(t[28].error?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800"))},m(t,r){b(t,e,r),o.m(e,null)},p(t,s){i===(i=n(t))&&o?o.p(t,s):(o.d(1),o=i(t),o&&(o.c(),o.m(e,null))),268435456&s[0]&&r!==(r="p-4 rounded-lg "+(t[28].error?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800"))&&A(e,"class",r)},d(t){t&&y(e),o.d()}}}function Jp(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,M,S,D,P,L,E,O,R,B,j,$,z=t[28].processed+"",I=t[28].analyzed+"",F=t[28].skipped+"",N=t[28].failed+"";return{c(){e=v("div"),r=v("div"),r.textContent=" Deep Analysis Complete!",n=_(),i=v("div"),o=v("div"),s=v("div"),a=w(z),l=_(),c=v("div"),c.textContent="Processed",d=_(),u=v("div"),h=v("div"),g=w(I),f=_(),p=v("div"),p.textContent="Analyzed",x=_(),k=v("div"),C=v("div"),M=w(F),S=_(),D=v("div"),D.textContent="Skipped",P=_(),L=v("div"),E=v("div"),O=w(N),R=_(),B=v("div"),B.textContent="Failed",j=_(),$=v("p"),$.textContent="Your bookmarks now have enhanced metadata for smarter filtering and insights!",A(r,"class","font-medium"),A(s,"class","text-lg font-bold text-indigo-600 dark:text-indigo-400"),A(c,"class","text-gray-600 dark:text-gray-400"),A(o,"class","text-center p-2 bg-white dark:bg-gray-800 rounded shadow-sm"),A(h,"class","text-lg font-bold text-green-600 dark:text-green-400"),A(p,"class","text-gray-600 dark:text-gray-400"),A(u,"class","text-center p-2 bg-white dark:bg-gray-800 rounded shadow-sm"),A(C,"class","text-lg font-bold text-yellow-600 dark:text-yellow-400"),A(D,"class","text-gray-600 dark:text-gray-400"),A(k,"class","text-center p-2 bg-white dark:bg-gray-800 rounded shadow-sm"),A(E,"class","text-lg font-bold text-red-600 dark:text-red-400"),A(B,"class","text-gray-600 dark:text-gray-400"),A(L,"class","text-center p-2 bg-white dark:bg-gray-800 rounded shadow-sm"),A(i,"class","grid grid-cols-2 sm:grid-cols-4 gap-4 text-xs"),A($,"class","text-xs text-green-600 dark:text-green-400 mt-2"),A(e,"class","text-green-700 dark:text-green-300 text-sm space-y-2")},m(t,y){b(t,e,y),m(e,r),m(e,n),m(e,i),m(i,o),m(o,s),m(s,a),m(o,l),m(o,c),m(i,d),m(i,u),m(u,h),m(h,g),m(u,f),m(u,p),m(i,x),m(i,k),m(k,C),m(C,M),m(k,S),m(k,D),m(i,P),m(i,L),m(L,E),m(E,O),m(L,R),m(L,B),m(e,j),m(e,$)},p(t,e){268435456&e[0]&&z!==(z=t[28].processed+"")&&T(a,z),268435456&e[0]&&I!==(I=t[28].analyzed+"")&&T(g,I),268435456&e[0]&&F!==(F=t[28].skipped+"")&&T(M,F),268435456&e[0]&&N!==(N=t[28].failed+"")&&T(O,N)},d(t){t&&y(e)}}}function Xp(t){let e,r,n,i,o=t[28].error+"";return{c(){e=v("div"),r=v("strong"),r.textContent="Error:",n=_(),i=w(o),A(e,"class","text-red-700 dark:text-red-400 text-sm")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i)},p(t,e){268435456&e[0]&&o!==(o=t[28].error+"")&&T(i,o)},d(t){t&&y(e)}}}function Gp(t){let e,r,n,i=t[14].length+"";return{c(){e=w("("),r=w(i),n=w(")")},m(t,i){b(t,e,i),b(t,r,i),b(t,n,i)},p(t,e){16384&e[0]&&i!==(i=t[14].length+"")&&T(r,i)},d(t){t&&(y(e),y(r),y(n))}}}function Zp(t){let e,r,i,o,s,a,l,c;function d(t,e){return t[53]?em:tm}let u=d(t),h=u(t);function g(t,e){return t[32]?nm:rm}let f=g(t),p=f(t);return{c(){e=v("div"),r=v("button"),h.c(),o=_(),s=v("button"),p.c(),r.disabled=i=t[53]||t[32],A(r,"class","px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 transition-colors"),A(r,"title","Re-check dead links to see if they're alive again"),s.disabled=a=t[32]||t[53],A(s,"class","px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 transition-colors"),A(e,"class","flex gap-2 flex-shrink-0")},m(n,i){b(n,e,i),m(e,r),h.m(r,null),m(e,o),m(e,s),p.m(s,null),l||(c=[M(r,"click",t[82]),M(s,"click",t[81])],l=!0)},p(t,e){u!==(u=d(t))&&(h.d(1),h=u(t),h&&(h.c(),h.m(r,null))),4194306&e[1]&&i!==(i=t[53]||t[32])&&(r.disabled=i),f!==(f=g(t))&&(p.d(1),p=f(t),p&&(p.c(),p.m(s,null))),4194306&e[1]&&a!==(a=t[32]||t[53])&&(s.disabled=a)},d(t){t&&y(e),h.d(),p.d(),l=!1,n(c)}}}function tm(t){let e;return{c(){e=w(" Re-check")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function em(t){let e,r;return{c(){e=v("div"),r=w("\n                      Re-checking..."),A(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,n){b(t,e,n),b(t,r,n)},d(t){t&&(y(e),y(r))}}}function rm(t){let e;return{c(){e=w(" Delete All")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function nm(t){let e,r;return{c(){e=v("div"),r=w("\n                      Deleting..."),A(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,n){b(t,e,n),b(t,r,n)},d(t){t&&(y(e),y(r))}}}function im(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,L,E,O,R,B,j,$,z=(t[56]>0&&t[56]<t[14].length?t[56]:t[14].length)+"",I=t[14].length+"";return{c(){e=v("div"),r=v("h4"),r.textContent="Re-check Configuration",i=_(),o=v("div"),s=v("div"),a=v("label"),a.innerHTML='Batch Size\n                        <span class="text-xs text-gray-500 font-normal">(0 = all)</span>',l=_(),c=v("input"),u=_(),h=v("p"),g=w("Will process "),f=w(z),p=w(" of "),x=w(I),k=w(" dead links"),C=_(),S=v("div"),L=v("label"),L.innerHTML='Concurrency\n                        <span class="text-xs text-gray-500 font-normal">(parallel requests)</span>',E=_(),O=v("input"),R=_(),B=v("p"),B.textContent="Higher = faster, but more resource intensive",A(r,"class","text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"),A(a,"for","deadLinkBatchSize"),A(a,"class","block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"),A(c,"id","deadLinkBatchSize"),A(c,"type","number"),A(c,"min","0"),A(c,"max",d=t[14].length),A(c,"class","w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),c.disabled=t[53],A(h,"class","text-xs text-gray-500 mt-1"),A(L,"for","deadLinkConcurrency"),A(L,"class","block text-sm font-medium text-gray-700 mb-1"),A(O,"id","deadLinkConcurrency"),A(O,"type","number"),A(O,"min","1"),A(O,"max","10"),A(O,"class","w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),O.disabled=t[53],A(B,"class","text-xs text-gray-500 mt-1"),A(o,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),A(e,"class","mb-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700")},m(n,d){b(n,e,d),m(e,r),m(e,i),m(e,o),m(o,s),m(s,a),m(s,l),m(s,c),P(c,t[56]),m(s,u),m(s,h),m(h,g),m(h,f),m(h,p),m(h,x),m(h,k),m(o,C),m(o,S),m(S,L),m(S,E),m(S,O),P(O,t[57]),m(S,R),m(S,B),j||($=[M(c,"input",t[145]),M(O,"input",t[146])],j=!0)},p(t,e){16384&e[0]&&d!==(d=t[14].length)&&A(c,"max",d),4194304&e[1]&&(c.disabled=t[53]),33554432&e[1]&&D(c.value)!==t[56]&&P(c,t[56]),16384&e[0]|33554432&e[1]&&z!==(z=(t[56]>0&&t[56]<t[14].length?t[56]:t[14].length)+"")&&T(f,z),16384&e[0]&&I!==(I=t[14].length+"")&&T(x,I),4194304&e[1]&&(O.disabled=t[53]),67108864&e[1]&&D(O.value)!==t[57]&&P(O,t[57])},d(t){t&&y(e),j=!1,n($)}}}function om(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C=t[54].current+"",M=t[54].total+"",S=(t[54].title||t[54].url)+"",D=t[54].results&&sm(t);return{c(){e=v("div"),r=v("div"),n=v("span"),n.textContent="Re-checking dead links...",i=_(),o=v("span"),s=w(C),a=w("/"),l=w(M),c=_(),d=v("div"),u=v("div"),h=_(),g=v("div"),f=v("p"),p=w("Checking: "),x=w(S),k=_(),D&&D.c(),A(n,"class","text-sm font-medium text-blue-800 dark:text-blue-300"),A(o,"class","text-sm text-blue-600 dark:text-blue-400"),A(r,"class","flex items-center justify-between mb-2"),A(u,"class","bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300"),L(u,"width",t[54].current/t[54].total*100+"%"),A(d,"class","w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2 mb-2"),A(f,"class","text-xs text-blue-600 dark:text-blue-400 truncate flex-1"),A(g,"class","flex items-center justify-between"),A(e,"class","mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(r,i),m(r,o),m(o,s),m(o,a),m(o,l),m(e,c),m(e,d),m(d,u),m(e,h),m(e,g),m(g,f),m(f,p),m(f,x),m(g,k),D&&D.m(g,null)},p(t,e){8388608&e[1]&&C!==(C=t[54].current+"")&&T(s,C),8388608&e[1]&&M!==(M=t[54].total+"")&&T(l,M),8388608&e[1]&&L(u,"width",t[54].current/t[54].total*100+"%"),8388608&e[1]&&S!==(S=(t[54].title||t[54].url)+"")&&T(x,S),t[54].results?D?D.p(t,e):(D=sm(t),D.c(),D.m(g,null)):D&&(D.d(1),D=null)},d(t){t&&y(e),D&&D.d()}}}function sm(t){let e,r,n,i,o,s,a,l,c=t[54].results.success+"",d=t[54].results.stillDead+"";return{c(){e=v("div"),r=v("span"),n=w(" "),i=w(c),o=_(),s=v("span"),a=w(" "),l=w(d),A(r,"class","text-green-600 dark:text-green-400"),A(s,"class","text-red-600 dark:text-red-400"),A(e,"class","flex gap-2 text-xs text-blue-600 dark:text-blue-400 ml-2")},m(t,c){b(t,e,c),m(e,r),m(r,n),m(r,i),m(e,o),m(e,s),m(s,a),m(s,l)},p(t,e){8388608&e[1]&&c!==(c=t[54].results.success+"")&&T(i,c),8388608&e[1]&&d!==(d=t[54].results.stillDead+"")&&T(l,d)},d(t){t&&y(e)}}}function am(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,M,S,D,P,L,E,O,R,B,j,$=t[55].total+"",z=t[55].success+"",I=t[55].stillDead+"",F=t[55].errors+"",N=t[55].pending>0&&lm(t);return{c(){e=v("div"),r=v("h4"),r.textContent="Re-check Complete",n=_(),i=v("div"),o=v("div"),s=v("div"),a=w($),l=_(),c=v("div"),c.textContent="Checked",d=_(),u=v("div"),h=v("div"),g=w(z),f=_(),p=v("div"),p.textContent="Now Alive",x=_(),k=v("div"),C=v("div"),M=w(I),S=_(),D=v("div"),D.textContent="Still Dead",P=_(),L=v("div"),E=v("div"),O=w(F),R=_(),B=v("div"),B.textContent="Errors",j=_(),N&&N.c(),A(r,"class","text-sm font-semibold text-green-800 dark:text-green-300 mb-2"),A(s,"class","text-lg font-bold text-green-700 dark:text-green-400"),A(c,"class","text-xs text-green-600 dark:text-green-500"),A(o,"class","text-center"),A(h,"class","text-lg font-bold text-green-700 dark:text-green-400"),A(p,"class","text-xs text-green-600 dark:text-green-500"),A(u,"class","text-center"),A(C,"class","text-lg font-bold text-red-700 dark:text-red-400"),A(D,"class","text-xs text-red-600 dark:text-red-500"),A(k,"class","text-center"),A(E,"class","text-lg font-bold text-yellow-700 dark:text-yellow-400"),A(B,"class","text-xs text-yellow-600 dark:text-yellow-500"),A(L,"class","text-center"),A(i,"class","grid grid-cols-2 md:grid-cols-5 gap-4 text-sm"),A(e,"class","mb-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800")},m(t,y){b(t,e,y),m(e,r),m(e,n),m(e,i),m(i,o),m(o,s),m(s,a),m(o,l),m(o,c),m(i,d),m(i,u),m(u,h),m(h,g),m(u,f),m(u,p),m(i,x),m(i,k),m(k,C),m(C,M),m(k,S),m(k,D),m(i,P),m(i,L),m(L,E),m(E,O),m(L,R),m(L,B),m(i,j),N&&N.m(i,null)},p(t,e){16777216&e[1]&&$!==($=t[55].total+"")&&T(a,$),16777216&e[1]&&z!==(z=t[55].success+"")&&T(g,z),16777216&e[1]&&I!==(I=t[55].stillDead+"")&&T(M,I),16777216&e[1]&&F!==(F=t[55].errors+"")&&T(O,F),t[55].pending>0?N?N.p(t,e):(N=lm(t),N.c(),N.m(i,null)):N&&(N.d(1),N=null)},d(t){t&&y(e),N&&N.d()}}}function lm(t){let e,r,n,i,o,s=t[55].pending+"";return{c(){e=v("div"),r=v("div"),n=w(s),i=_(),o=v("div"),o.textContent="Remaining",A(r,"class","text-lg font-bold text-blue-700 dark:text-blue-400"),A(o,"class","text-xs text-blue-600 dark:text-blue-500"),A(e,"class","text-center")},m(t,s){b(t,e,s),m(e,r),m(r,n),m(e,i),m(e,o)},p(t,e){16777216&e[1]&&s!==(s=t[55].pending+"")&&T(n,s)},d(t){t&&y(e)}}}function cm(t){let e,r,n,i,o=t[29]&&t[29].total>0&&hm(t),s=it(t[14].slice(0,t[37])),a=[];for(let e=0;e<s.length;e+=1)a[e]=_m(ip(t,s,e));let l=t[14].length>t[37]&&Cm(t);return{c(){o&&o.c(),e=_(),r=v("div");for(let t=0;t<a.length;t+=1)a[t].c();n=_(),l&&l.c(),i=C(),A(r,"class","space-y-2 max-h-[32rem] overflow-y-auto")},m(t,s){o&&o.m(t,s),b(t,e,s),b(t,r,s);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(r,null);b(t,n,s),l&&l.m(t,s),b(t,i,s)},p(t,n){if(t[29]&&t[29].total>0?o?o.p(t,n):(o=hm(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),16384&n[0]|64&n[1]|262144&n[2]){let e;for(s=it(t[14].slice(0,t[37])),e=0;e<s.length;e+=1){const i=ip(t,s,e);a[e]?a[e].p(i,n):(a[e]=_m(i),a[e].c(),a[e].m(r,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=s.length}t[14].length>t[37]?l?l.p(t,n):(l=Cm(t),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){t&&(y(e),y(r),y(n),y(i)),o&&o.d(t),x(a,t),l&&l.d(t)}}}function dm(e){let r;return{c(){r=v("p"),r.textContent="No dead links detected. Run enrichment to check bookmark availability.",A(r,"class","text-gray-500")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function um(e){let r;return{c(){r=v("div"),r.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"></div> <span class="ml-3 text-gray-500">Loading dead links...</span>',A(r,"class","flex items-center justify-center py-8")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function hm(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,M,S,D,P,L,E,O,R,B,j,$,z,I,F,N,W,H,V,q,U,K=t[29].total+"",Y=t[29].deadLinkRate+"",Q=t[29].checkedCount+"",J=t[29].byDomain.length+"",X=t[29].byAge.recent>0&&gm(t),G=t[29].byAge.moderate>0&&fm(t),Z=t[29].byAge.old>0&&pm(t),tt=t[29].byAge.ancient>0&&mm(t),et=t[29].byDomain.length>0&&bm(t),rt=t[29].byCategory.length>0&&xm(t);return{c(){e=v("div"),r=v("h4"),r.textContent=" Dead Link Insights",n=_(),i=v("div"),o=v("div"),s=v("div"),a=w(K),l=_(),c=v("div"),c.textContent="Total Dead",d=_(),u=v("div"),h=v("div"),g=w(Y),f=w("%"),p=_(),x=v("div"),x.textContent="Dead Link Rate",k=_(),C=v("div"),M=v("div"),S=w(Q),D=_(),P=v("div"),P.textContent="Total Checked",L=_(),E=v("div"),O=v("div"),R=w(J),B=_(),j=v("div"),j.textContent="Affected Domains",$=_(),z=v("div"),I=v("h5"),I.textContent="By Bookmark Age",F=_(),N=v("div"),X&&X.c(),W=_(),G&&G.c(),H=_(),Z&&Z.c(),V=_(),tt&&tt.c(),q=_(),et&&et.c(),U=_(),rt&&rt.c(),A(r,"class","text-sm font-semibold text-red-800 dark:text-red-300 mb-3"),A(s,"class","text-2xl font-bold text-red-700 dark:text-red-400"),A(c,"class","text-xs text-red-600 dark:text-red-500"),A(o,"class","text-center"),A(h,"class","text-2xl font-bold text-red-700 dark:text-red-400"),A(x,"class","text-xs text-red-600 dark:text-red-500"),A(u,"class","text-center"),A(M,"class","text-2xl font-bold text-red-700 dark:text-red-400"),A(P,"class","text-xs text-red-600 dark:text-red-500"),A(C,"class","text-center"),A(O,"class","text-2xl font-bold text-red-700 dark:text-red-400"),A(j,"class","text-xs text-red-600 dark:text-red-500"),A(E,"class","text-center"),A(i,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"),A(I,"class","text-xs font-medium text-red-700 dark:text-red-400 mb-2"),A(N,"class","flex gap-2 flex-wrap"),A(z,"class","mb-4"),A(e,"class","mb-6 p-4 bg-red-50 dark:bg-red-950/20 rounded-lg border border-red-200 dark:border-red-800")},m(t,y){b(t,e,y),m(e,r),m(e,n),m(e,i),m(i,o),m(o,s),m(s,a),m(o,l),m(o,c),m(i,d),m(i,u),m(u,h),m(h,g),m(h,f),m(u,p),m(u,x),m(i,k),m(i,C),m(C,M),m(M,S),m(C,D),m(C,P),m(i,L),m(i,E),m(E,O),m(O,R),m(E,B),m(E,j),m(e,$),m(e,z),m(z,I),m(z,F),m(z,N),X&&X.m(N,null),m(N,W),G&&G.m(N,null),m(N,H),Z&&Z.m(N,null),m(N,V),tt&&tt.m(N,null),m(e,q),et&&et.m(e,null),m(e,U),rt&&rt.m(e,null)},p(t,r){536870912&r[0]&&K!==(K=t[29].total+"")&&T(a,K),536870912&r[0]&&Y!==(Y=t[29].deadLinkRate+"")&&T(g,Y),536870912&r[0]&&Q!==(Q=t[29].checkedCount+"")&&T(S,Q),536870912&r[0]&&J!==(J=t[29].byDomain.length+"")&&T(R,J),t[29].byAge.recent>0?X?X.p(t,r):(X=gm(t),X.c(),X.m(N,W)):X&&(X.d(1),X=null),t[29].byAge.moderate>0?G?G.p(t,r):(G=fm(t),G.c(),G.m(N,H)):G&&(G.d(1),G=null),t[29].byAge.old>0?Z?Z.p(t,r):(Z=pm(t),Z.c(),Z.m(N,V)):Z&&(Z.d(1),Z=null),t[29].byAge.ancient>0?tt?tt.p(t,r):(tt=mm(t),tt.c(),tt.m(N,null)):tt&&(tt.d(1),tt=null),t[29].byDomain.length>0?et?et.p(t,r):(et=bm(t),et.c(),et.m(e,U)):et&&(et.d(1),et=null),t[29].byCategory.length>0?rt?rt.p(t,r):(rt=xm(t),rt.c(),rt.m(e,null)):rt&&(rt.d(1),rt=null)},d(t){t&&y(e),X&&X.d(),G&&G.d(),Z&&Z.d(),tt&&tt.d(),et&&et.d(),rt&&rt.d()}}}function gm(t){let e,r,n,i=t[29].byAge.recent+"";return{c(){e=v("span"),r=w("< 1 week: "),n=w(i),A(e,"class","px-2 py-1 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-200 text-xs rounded")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){536870912&e[0]&&i!==(i=t[29].byAge.recent+"")&&T(n,i)},d(t){t&&y(e)}}}function fm(t){let e,r,n,i=t[29].byAge.moderate+"";return{c(){e=v("span"),r=w("1 week - 1 month: "),n=w(i),A(e,"class","px-2 py-1 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-200 text-xs rounded")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){536870912&e[0]&&i!==(i=t[29].byAge.moderate+"")&&T(n,i)},d(t){t&&y(e)}}}function pm(t){let e,r,n,i=t[29].byAge.old+"";return{c(){e=v("span"),r=w("1 month - 1 year: "),n=w(i),A(e,"class","px-2 py-1 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-200 text-xs rounded")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){536870912&e[0]&&i!==(i=t[29].byAge.old+"")&&T(n,i)},d(t){t&&y(e)}}}function mm(t){let e,r,n,i=t[29].byAge.ancient+"";return{c(){e=v("span"),r=w("> 1 year: "),n=w(i),A(e,"class","px-2 py-1 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-200 text-xs rounded")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){536870912&e[0]&&i!==(i=t[29].byAge.ancient+"")&&T(n,i)},d(t){t&&y(e)}}}function bm(t){let e,r,n,i,o=it(t[29].byDomain.slice(0,5)),s=[];for(let e=0;e<o.length;e+=1)s[e]=ym(sp(t,o,e));return{c(){e=v("div"),r=v("h5"),r.textContent="Top Domains with Dead Links",n=_(),i=v("div");for(let t=0;t<s.length;t+=1)s[t].c();A(r,"class","text-xs font-medium text-red-700 dark:text-red-400 mb-2"),A(i,"class","flex gap-2 flex-wrap"),A(e,"class","mb-4")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(i,null)},p(t,e){if(536870912&e[0]){let r;for(o=it(t[29].byDomain.slice(0,5)),r=0;r<o.length;r+=1){const n=sp(t,o,r);s[r]?s[r].p(n,e):(s[r]=ym(n),s[r].c(),s[r].m(i,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(t){t&&y(e),x(s,t)}}}function ym(t){let e,r,n,i,o,s=t[263].domain+"",a=t[263].count+"";return{c(){e=v("span"),r=w(s),n=w(": "),i=w(a),o=_(),A(e,"class","px-2 py-1 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-200 text-xs rounded")},m(t,s){b(t,e,s),m(e,r),m(e,n),m(e,i),m(e,o)},p(t,e){536870912&e[0]&&s!==(s=t[263].domain+"")&&T(r,s),536870912&e[0]&&a!==(a=t[263].count+"")&&T(i,a)},d(t){t&&y(e)}}}function xm(t){let e,r,n,i,o=it(t[29].byCategory.slice(0,5)),s=[];for(let e=0;e<o.length;e+=1)s[e]=vm(op(t,o,e));return{c(){e=v("div"),r=v("h5"),r.textContent="By Category",n=_(),i=v("div");for(let t=0;t<s.length;t+=1)s[t].c();A(r,"class","text-xs font-medium text-red-700 dark:text-red-400 mb-2"),A(i,"class","flex gap-2 flex-wrap")},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(i,null)},p(t,e){if(536870912&e[0]){let r;for(o=it(t[29].byCategory.slice(0,5)),r=0;r<o.length;r+=1){const n=op(t,o,r);s[r]?s[r].p(n,e):(s[r]=vm(n),s[r].c(),s[r].m(i,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(t){t&&y(e),x(s,t)}}}function vm(t){let e,r,n,i,o,s=t[260].category+"",a=t[260].count+"";return{c(){e=v("span"),r=w(s),n=w(": "),i=w(a),o=_(),A(e,"class","px-2 py-1 bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-200 text-xs rounded")},m(t,s){b(t,e,s),m(e,r),m(e,n),m(e,i),m(e,o)},p(t,e){536870912&e[0]&&s!==(s=t[260].category+"")&&T(r,s),536870912&e[0]&&a!==(a=t[260].count+"")&&T(i,a)},d(t){t&&y(e)}}}function km(t){let e,r,n,i=t[207].domain+"";return{c(){e=v("span"),r=w(" "),n=w(i),A(e,"class","text-gray-500 dark:text-gray-500")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){16384&e[0]|64&e[1]&&i!==(i=t[207].domain+"")&&T(n,i)},d(t){t&&y(e)}}}function wm(t){let e,r,n,i=t[207].category+"";return{c(){e=v("span"),r=w(" "),n=w(i),A(e,"class","text-gray-500 dark:text-gray-500")},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){16384&e[0]|64&e[1]&&i!==(i=t[207].category+"")&&T(n,i)},d(t){t&&y(e)}}}function _m(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,P,L,E,O,R,B=t[207].title+"",j=t[207].url+"",$=(t[207].lastChecked?new Date(t[207].lastChecked).toLocaleDateString():"Unknown")+"",z=t[207].domain&&km(t),I=t[207].category&&wm(t);function F(){return t[147](t[207])}return{c(){e=v("div"),r=v("div"),n=v("div"),i=v("div"),o=w(B),s=_(),a=v("div"),l=w(j),c=_(),d=v("div"),u=v("span"),h=w("Last checked: "),g=w($),f=_(),z&&z.c(),p=_(),I&&I.c(),x=_(),k=v("div"),C=v("a"),S=w("Try Again"),P=_(),L=v("button"),L.textContent="Delete",E=_(),A(i,"class","text-sm font-medium text-gray-800 dark:text-gray-200 truncate"),A(a,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),A(d,"class","text-xs text-red-600 dark:text-red-400 mt-1 flex items-center gap-3"),A(n,"class","flex-1 min-w-0"),A(C,"href",D=t[207].url),A(C,"target","_blank"),A(C,"rel","noopener noreferrer"),A(C,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300"),A(L,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(k,"class","flex gap-1 ml-2 flex-shrink-0"),A(r,"class","flex items-start justify-between"),A(e,"class","p-3 bg-red-50 dark:bg-red-900/20 rounded border border-red-200 dark:border-red-800")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(i,o),m(n,s),m(n,a),m(a,l),m(n,c),m(n,d),m(d,u),m(u,h),m(u,g),m(d,f),z&&z.m(d,null),m(d,p),I&&I.m(d,null),m(r,x),m(r,k),m(k,C),m(C,S),m(k,P),m(k,L),m(e,E),O||(R=M(L,"click",F),O=!0)},p(e,r){t=e,16384&r[0]|64&r[1]&&B!==(B=t[207].title+"")&&T(o,B),16384&r[0]|64&r[1]&&j!==(j=t[207].url+"")&&T(l,j),16384&r[0]|64&r[1]&&$!==($=(t[207].lastChecked?new Date(t[207].lastChecked).toLocaleDateString():"Unknown")+"")&&T(g,$),t[207].domain?z?z.p(t,r):(z=km(t),z.c(),z.m(d,p)):z&&(z.d(1),z=null),t[207].category?I?I.p(t,r):(I=wm(t),I.c(),I.m(d,null)):I&&(I.d(1),I=null),16384&r[0]|64&r[1]&&D!==(D=t[207].url)&&A(C,"href",D)},d(t){t&&y(e),z&&z.d(),I&&I.d(),O=!1,R()}}}function Cm(t){let e,r,n,i,o,s,a,l,c,d=t[14].length+"";return{c(){e=v("div"),r=v("button"),n=w("Load More ("),i=w(t[37]),o=w(" of "),s=w(d),a=w(" shown)"),A(r,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),A(e,"class","mt-4 text-center")},m(d,u){b(d,e,u),m(e,r),m(r,n),m(r,i),m(r,o),m(r,s),m(r,a),l||(c=M(r,"click",t[79]),l=!0)},p(t,e){64&e[1]&&T(i,t[37]),16384&e[0]&&d!==(d=t[14].length+"")&&T(s,d)},d(t){t&&y(e),l=!1,c()}}}function Mm(t){let e,r,n,i,o,s,a=Math.round((t[41].cacheAge||0)/6e4)+"";return{c(){e=v("span"),r=k("svg"),n=k("path"),i=w("\n                      Cached "),o=w(a),s=w("m ago"),A(n,"fill-rule","evenodd"),A(n,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"),A(n,"clip-rule","evenodd"),A(r,"class","w-3.5 h-3.5"),A(r,"fill","currentColor"),A(r,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center gap-1.5 px-2.5 py-1 text-xs bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400 border border-amber-200 dark:border-amber-800 rounded-md"),A(e,"title","Loaded from cache")},m(t,a){b(t,e,a),m(e,r),m(r,n),m(e,i),m(e,o),m(e,s)},p(t,e){1024&e[1]&&a!==(a=Math.round((t[41].cacheAge||0)/6e4)+"")&&T(o,a)},d(t){t&&y(e)}}}function Sm(t){let e;return{c(){e=w(" Scan for Similarities")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Am(t){let e,r;return{c(){e=v("div"),r=w("\n                      Scanning..."),A(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,n){b(t,e,n),b(t,r,n)},d(t){t&&(y(e),y(r))}}}function Dm(t){let e;function r(t,e){return t[34]?Om:0!==t[39].length||t[40]?0===t[39].length?Lm:Pm:Em}let n=r(t),i=n(t);return{c(){i.c(),e=C()},m(t,r){i.m(t,r),b(t,e,r)},p(t,o){n===(n=r(t))&&i?i.p(t,o):(i.d(1),i=n(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){t&&y(e),i.d(t)}}}function Tm(t){let e;function r(t,e){return t[30]?Nm:0===t[12].length?Fm:Im}let n=r(t),i=n(t);return{c(){i.c(),e=C()},m(t,r){i.m(t,r),b(t,e,r)},p(t,o){n===(n=r(t))&&i?i.p(t,o):(i.d(1),i=n(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){t&&y(e),i.d(t)}}}function Pm(t){let e,r,n,i,o=t[40]&&Rm(t),s=it(t[39].slice(0,t[36])),a=[];for(let e=0;e<s.length;e+=1)a[e]=$m(ep(t,s,e));let l=t[39].length>t[36]&&zm(t);return{c(){o&&o.c(),e=_(),r=v("div");for(let t=0;t<a.length;t+=1)a[t].c();n=_(),l&&l.c(),i=C(),A(r,"class","space-y-3 max-h-[40rem] overflow-y-auto")},m(t,s){o&&o.m(t,s),b(t,e,s),b(t,r,s);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(r,null);b(t,n,s),l&&l.m(t,s),b(t,i,s)},p(t,n){if(t[40]?o?o.p(t,n):(o=Rm(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),288&n[1]|1073741824&n[2]|2&n[3]){let e;for(s=it(t[39].slice(0,t[36])),e=0;e<s.length;e+=1){const i=ep(t,s,e);a[e]?a[e].p(i,n):(a[e]=$m(i),a[e].c(),a[e].m(r,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=s.length}t[39].length>t[36]?l?l.p(t,n):(l=zm(t),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){t&&(y(e),y(r),y(n),y(i)),o&&o.d(t),x(a,t),l&&l.d(t)}}}function Lm(e){let r;return{c(){r=v("p"),r.textContent="No similar bookmarks detected with enhanced matching.",A(r,"class","text-gray-500 text-center py-8")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Em(e){let r;return{c(){r=v("div"),r.innerHTML='<p class="text-gray-500 mb-4">Click &quot;Scan for Similarities&quot; to detect similar bookmarks using advanced fuzzy matching.</p> <p class="text-xs text-gray-400">This analysis uses title, description, keywords, and domain information to find similar content.</p>',A(r,"class","text-center py-8")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Om(e){let r;return{c(){r=v("div"),r.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div> <span class="ml-3 text-gray-500">Running smart similarity analysis...</span>',A(r,"class","flex items-center justify-center py-8")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Rm(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,M=t[40].sameDomain+"",S=t[40].crossDomain+"",D=(100*t[40].avgSimilarity).toFixed(0)+"";return{c(){e=v("div"),r=v("div"),n=v("span"),i=v("strong"),o=w(M),s=w(" same-domain pairs"),a=_(),l=v("span"),c=v("strong"),d=w(S),u=w(" cross-domain pairs"),h=_(),g=v("span"),f=w("Avg: "),p=v("strong"),x=w(D),k=w("%"),C=w(" similar"),A(n,"class","text-indigo-700 dark:text-indigo-300"),A(l,"class","text-indigo-600 dark:text-indigo-400"),A(g,"class","text-indigo-500 dark:text-indigo-500"),A(r,"class","flex gap-4 text-sm"),A(e,"class","mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg flex items-center justify-between")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(i,o),m(n,s),m(r,a),m(r,l),m(l,c),m(c,d),m(l,u),m(r,h),m(r,g),m(g,f),m(g,p),m(p,x),m(p,k),m(g,C)},p(t,e){512&e[1]&&M!==(M=t[40].sameDomain+"")&&T(o,M),512&e[1]&&S!==(S=t[40].crossDomain+"")&&T(d,S),512&e[1]&&D!==(D=(100*t[40].avgSimilarity).toFixed(0)+"")&&T(x,D)},d(t){t&&y(e)}}}function Bm(t){let e;return{c(){e=v("span"),e.textContent="Same Domain",A(e,"class","text-xs px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function jm(t){let e;return{c(){e=v("span"),e.textContent="Same Category",A(e,"class","text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function $m(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,P,L,E,O,R,B,j,$,z,I,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z,tt,et,rt,nt,it,ot,st,at,lt,ct,dt,ut,ht,gt,ft,pt,mt,bt,yt,xt,vt,kt=Math.round(100*t[255].similarity)+"",wt=t[255].bookmark1.title+"",_t=t[255].bookmark1.url+"",Ct=t[255].coverage1.percentage.toFixed(0)+"",Mt=t[255].bookmark2.title+"",St=t[255].bookmark2.url+"",At=t[255].coverage2.percentage.toFixed(0)+"",Dt=t[255].sameDomain&&Bm(),Tt=t[255].sameCategory&&jm();function Pt(){return t[153](t[255])}function Lt(){return t[154](t[255])}function Et(){return t[155](t[255])}return{c(){e=v("div"),r=v("div"),i=v("div"),o=v("span"),s=w(kt),a=w("% match"),c=_(),Dt&&Dt.c(),d=_(),Tt&&Tt.c(),u=_(),h=v("button"),h.textContent="Compare Details",g=_(),f=v("div"),p=v("div"),x=v("div"),k=v("div"),C=v("div"),S=w(wt),P=_(),L=v("div"),E=w(_t),R=_(),B=v("div"),j=v("div"),$=w("Coverage: "),z=w(Ct),I=w("%"),F=_(),N=v("div"),W=v("a"),H=w("Open"),q=_(),U=v("button"),U.textContent="Delete",K=_(),Y=v("div"),Q=v("div"),J=v("div"),X=v("div"),G=w(Mt),tt=_(),et=v("div"),rt=w(St),it=_(),ot=v("div"),st=v("div"),at=w("Coverage: "),lt=w(At),ct=w("%"),dt=_(),ut=v("div"),ht=v("a"),gt=w("Open"),pt=_(),mt=v("button"),mt.textContent="Delete",bt=_(),A(o,"class",l="text-xs font-semibold px-2 py-1 rounded "+(t[255].sameDomain?"bg-indigo-200 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-200":"bg-purple-200 dark:bg-purple-800 text-purple-800 dark:text-purple-200")),A(i,"class","flex items-center gap-2"),A(h,"class","text-xs px-3 py-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"),A(r,"class","flex justify-between items-center mb-3"),A(C,"class","text-sm font-medium text-gray-800 dark:text-gray-200 truncate"),A(C,"title",D=t[255].bookmark1.title),A(L,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),A(L,"title",O=t[255].bookmark1.url),A(k,"class","flex-1 min-w-0"),A(x,"class","flex justify-between items-start mb-2"),A(j,"class","text-xs text-gray-400 dark:text-gray-500"),A(W,"href",V=t[255].bookmark1.url),A(W,"target","_blank"),A(W,"rel","noopener"),A(W,"class","px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-700"),A(U,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(N,"class","flex gap-1"),A(B,"class","flex items-center justify-between mt-2"),A(p,"class","p-3 bg-white dark:bg-gray-900/50 rounded border border-gray-200 dark:border-gray-700"),A(X,"class","text-sm font-medium text-gray-800 dark:text-gray-200 truncate"),A(X,"title",Z=t[255].bookmark2.title),A(et,"class","text-xs text-gray-500 dark:text-gray-400 truncate"),A(et,"title",nt=t[255].bookmark2.url),A(J,"class","flex-1 min-w-0"),A(Q,"class","flex justify-between items-start mb-2"),A(st,"class","text-xs text-gray-400 dark:text-gray-500"),A(ht,"href",ft=t[255].bookmark2.url),A(ht,"target","_blank"),A(ht,"rel","noopener"),A(ht,"class","px-2 py-1 text-xs bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-700"),A(mt,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(ut,"class","flex gap-1"),A(ot,"class","flex items-center justify-between mt-2"),A(Y,"class","p-3 bg-white dark:bg-gray-900/50 rounded border border-gray-200 dark:border-gray-700"),A(f,"class","grid grid-cols-1 md:grid-cols-2 gap-3"),A(e,"class",yt="border "+(t[255].sameDomain?"border-indigo-200 dark:border-indigo-800 bg-indigo-50 dark:bg-indigo-950/30":"border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-950/30")+" rounded-lg p-4")},m(t,n){b(t,e,n),m(e,r),m(r,i),m(i,o),m(o,s),m(o,a),m(i,c),Dt&&Dt.m(i,null),m(i,d),Tt&&Tt.m(i,null),m(r,u),m(r,h),m(e,g),m(e,f),m(f,p),m(p,x),m(x,k),m(k,C),m(C,S),m(k,P),m(k,L),m(L,E),m(p,R),m(p,B),m(B,j),m(j,$),m(j,z),m(j,I),m(B,F),m(B,N),m(N,W),m(W,H),m(N,q),m(N,U),m(f,K),m(f,Y),m(Y,Q),m(Q,J),m(J,X),m(X,G),m(J,tt),m(J,et),m(et,rt),m(Y,it),m(Y,ot),m(ot,st),m(st,at),m(st,lt),m(st,ct),m(ot,dt),m(ot,ut),m(ut,ht),m(ht,gt),m(ut,pt),m(ut,mt),m(e,bt),xt||(vt=[M(h,"click",Pt),M(U,"click",Lt),M(mt,"click",Et)],xt=!0)},p(r,n){t=r,288&n[1]&&kt!==(kt=Math.round(100*t[255].similarity)+"")&&T(s,kt),288&n[1]&&l!==(l="text-xs font-semibold px-2 py-1 rounded "+(t[255].sameDomain?"bg-indigo-200 dark:bg-indigo-800 text-indigo-800 dark:text-indigo-200":"bg-purple-200 dark:bg-purple-800 text-purple-800 dark:text-purple-200"))&&A(o,"class",l),t[255].sameDomain?Dt||(Dt=Bm(),Dt.c(),Dt.m(i,d)):Dt&&(Dt.d(1),Dt=null),t[255].sameCategory?Tt||(Tt=jm(),Tt.c(),Tt.m(i,null)):Tt&&(Tt.d(1),Tt=null),288&n[1]&&wt!==(wt=t[255].bookmark1.title+"")&&T(S,wt),288&n[1]&&D!==(D=t[255].bookmark1.title)&&A(C,"title",D),288&n[1]&&_t!==(_t=t[255].bookmark1.url+"")&&T(E,_t),288&n[1]&&O!==(O=t[255].bookmark1.url)&&A(L,"title",O),288&n[1]&&Ct!==(Ct=t[255].coverage1.percentage.toFixed(0)+"")&&T(z,Ct),288&n[1]&&V!==(V=t[255].bookmark1.url)&&A(W,"href",V),288&n[1]&&Mt!==(Mt=t[255].bookmark2.title+"")&&T(G,Mt),288&n[1]&&Z!==(Z=t[255].bookmark2.title)&&A(X,"title",Z),288&n[1]&&St!==(St=t[255].bookmark2.url+"")&&T(rt,St),288&n[1]&&nt!==(nt=t[255].bookmark2.url)&&A(et,"title",nt),288&n[1]&&At!==(At=t[255].coverage2.percentage.toFixed(0)+"")&&T(lt,At),288&n[1]&&ft!==(ft=t[255].bookmark2.url)&&A(ht,"href",ft),288&n[1]&&yt!==(yt="border "+(t[255].sameDomain?"border-indigo-200 dark:border-indigo-800 bg-indigo-50 dark:bg-indigo-950/30":"border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-950/30")+" rounded-lg p-4")&&A(e,"class",yt)},d(t){t&&y(e),Dt&&Dt.d(),Tt&&Tt.d(),xt=!1,n(vt)}}}function zm(t){let e,r,n,i,o,s,a,l,c,d=t[39].length+"";return{c(){e=v("div"),r=v("button"),n=w("Load More ("),i=w(t[36]),o=w(" of "),s=w(d),a=w(" shown)"),A(r,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),A(e,"class","mt-4 text-center")},m(d,u){b(d,e,u),m(e,r),m(r,n),m(r,i),m(r,o),m(r,s),m(r,a),l||(c=M(r,"click",t[78]),l=!0)},p(t,e){32&e[1]&&T(i,t[36]),256&e[1]&&d!==(d=t[39].length+"")&&T(s,d)},d(t){t&&y(e),l=!1,c()}}}function Im(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,k,S,D,P,L=t[38].size+"",E=t[38].size>0&&Wm(t),O=t[38].size>0&&Hm(t),R=it(t[12].slice(0,t[35])),B=[];for(let e=0;e<R.length;e+=1)B[e]=qm(rp(t,R,e));let j=t[12].length>t[35]&&Um(t);return{c(){e=v("div"),r=v("div"),i=v("span"),o=w(L),s=w(" selected"),a=_(),l=v("button"),l.textContent="Select All Duplicates",c=_(),E&&E.c(),d=_(),u=v("div"),O&&O.c(),h=_(),g=v("button"),g.textContent="Delete All Duplicates",f=_(),p=v("div");for(let t=0;t<B.length;t+=1)B[t].c();k=_(),j&&j.c(),S=C(),A(i,"class","text-sm text-gray-600 dark:text-gray-400"),A(l,"class","text-xs px-2 py-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/40 rounded"),A(r,"class","flex items-center gap-3"),A(g,"class","px-3 py-1.5 text-sm bg-red-700 text-white rounded hover:bg-red-800"),A(u,"class","flex items-center gap-2"),A(e,"class","mb-4 p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg flex flex-wrap items-center justify-between gap-2"),A(p,"class","space-y-6 max-h-[32rem] overflow-y-auto")},m(n,y){b(n,e,y),m(e,r),m(r,i),m(i,o),m(i,s),m(r,a),m(r,l),m(r,c),E&&E.m(r,null),m(e,d),m(e,u),O&&O.m(u,null),m(u,h),m(u,g),b(n,f,y),b(n,p,y);for(let t=0;t<B.length;t+=1)B[t]&&B[t].m(p,null);b(n,k,y),j&&j.m(n,y),b(n,S,y),D||(P=[M(l,"click",t[87]),M(g,"click",t[90])],D=!0)},p(t,e){if(128&e[1]&&L!==(L=t[38].size+"")&&T(o,L),t[38].size>0?E?E.p(t,e):(E=Wm(t),E.c(),E.m(r,null)):E&&(E.d(1),E=null),t[38].size>0?O?O.p(t,e):(O=Hm(t),O.c(),O.m(u,h)):O&&(O.d(1),O=null),4096&e[0]|144&e[1]|25165824&e[2]){let r;for(R=it(t[12].slice(0,t[35])),r=0;r<R.length;r+=1){const n=rp(t,R,r);B[r]?B[r].p(n,e):(B[r]=qm(n),B[r].c(),B[r].m(p,null))}for(;r<B.length;r+=1)B[r].d(1);B.length=R.length}t[12].length>t[35]?j?j.p(t,e):(j=Um(t),j.c(),j.m(S.parentNode,S)):j&&(j.d(1),j=null)},d(t){t&&(y(e),y(f),y(p),y(k),y(S)),E&&E.d(),O&&O.d(),x(B,t),j&&j.d(t),D=!1,n(P)}}}function Fm(e){let r;return{c(){r=v("div"),r.innerHTML='<p class="text-gray-500">No exact duplicate bookmarks found. Great job!</p>',A(r,"class","text-center py-8")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Nm(e){let r;return{c(){r=v("div"),r.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-500">Finding duplicates...</span>',A(r,"class","flex items-center justify-center py-8")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Wm(e){let r,n,i;return{c(){r=v("button"),r.textContent="Clear Selection",A(r,"class","text-xs px-2 py-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded")},m(t,o){b(t,r,o),n||(i=M(r,"click",e[88]),n=!0)},p:t,d(t){t&&y(r),n=!1,i()}}}function Hm(t){let e,r,n,i,o,s,a=t[38].size+"";return{c(){e=v("button"),r=w("Delete Selected ("),n=w(a),i=w(")"),A(e,"class","px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700")},m(a,l){b(a,e,l),m(e,r),m(e,n),m(e,i),o||(s=M(e,"click",t[89]),o=!0)},p(t,e){128&e[1]&&a!==(a=t[38].size+"")&&T(n,a)},d(t){t&&y(e),o=!1,s()}}}function Vm(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D=t[207].title+"",P=(t[207].folderPath||"No folder")+"";function L(){return t[151](t[207])}let E=0===t[235]&&function(){let t;return{c(){t=v("span"),t.textContent="(oldest)",A(t,"class","text-green-600 dark:text-green-400 font-medium")},m(e,r){b(e,t,r)},d(e){e&&y(t)}}}();function O(){return t[152](t[207],t[253])}return{c(){e=v("div"),r=v("div"),i=v("input"),s=_(),a=v("div"),l=v("div"),c=w(D),d=_(),u=v("div"),h=w(P),g=_(),E&&E.c(),f=_(),p=v("button"),p.textContent="Delete",x=_(),A(i,"type","checkbox"),i.checked=o=t[38].has(t[207].id),A(i,"class","h-4 w-4 text-blue-600 dark:text-blue-500 rounded border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 focus:ring-blue-500"),A(l,"class","text-sm font-medium truncate dark:text-gray-200"),A(u,"class","text-xs text-gray-500 dark:text-gray-400"),A(a,"class","flex-1 min-w-0"),A(r,"class","flex items-center gap-3 flex-1 min-w-0"),A(p,"class","ml-4 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 flex-shrink-0"),A(e,"class",k="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-900/50 rounded "+(t[38].has(t[207].id)?"ring-2 ring-blue-400 dark:ring-blue-600 bg-blue-50 dark:bg-blue-950/40":""))},m(t,n){b(t,e,n),m(e,r),m(r,i),m(r,s),m(r,a),m(a,l),m(l,c),m(a,d),m(a,u),m(u,h),m(u,g),E&&E.m(u,null),m(e,f),m(e,p),m(e,x),C||(S=[M(i,"change",L),M(p,"click",O)],C=!0)},p(r,n){t=r,4096&n[0]|144&n[1]&&o!==(o=t[38].has(t[207].id))&&(i.checked=o),4096&n[0]|16&n[1]&&D!==(D=t[207].title+"")&&T(c,D),4096&n[0]|16&n[1]&&P!==(P=(t[207].folderPath||"No folder")+"")&&T(h,P),4096&n[0]|144&n[1]&&k!==(k="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-900/50 rounded "+(t[38].has(t[207].id)?"ring-2 ring-blue-400 dark:ring-blue-600 bg-blue-50 dark:bg-blue-950/40":""))&&A(e,"class",k)},d(t){t&&y(e),E&&E.d(),C=!1,n(S)}}}function qm(t){let e,r,n,i,o,s,a,l=t[251][0].url+"",c=it(t[251]),d=[];for(let e=0;e<c.length;e+=1)d[e]=Vm(np(t,c,e));return{c(){e=v("div"),r=v("h4"),n=w(l),o=_(),s=v("div");for(let t=0;t<d.length;t+=1)d[t].c();a=_(),A(r,"class","font-medium text-gray-900 dark:text-white mb-3 truncate"),A(r,"title",i=t[251][0].url),A(s,"class","space-y-2"),A(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-4")},m(t,i){b(t,e,i),m(e,r),m(r,n),m(e,o),m(e,s);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(s,null);m(e,a)},p(t,e){if(4096&e[0]|16&e[1]&&l!==(l=t[251][0].url+"")&&T(n,l),4096&e[0]|16&e[1]&&i!==(i=t[251][0].url)&&A(r,"title",i),4096&e[0]|144&e[1]|25165824&e[2]){let r;for(c=it(t[251]),r=0;r<c.length;r+=1){const n=np(t,c,r);d[r]?d[r].p(n,e):(d[r]=Vm(n),d[r].c(),d[r].m(s,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=c.length}},d(t){t&&y(e),x(d,t)}}}function Um(t){let e,r,n,i,o,s,a,l,c,d=t[12].length+"";return{c(){e=v("div"),r=v("button"),n=w("Load More ("),i=w(t[35]),o=w(" of "),s=w(d),a=w(" shown)"),A(r,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),A(e,"class","mt-4 text-center")},m(d,u){b(d,e,u),m(e,r),m(r,n),m(r,i),m(r,o),m(r,s),m(r,a),l||(c=M(r,"click",t[77]),l=!0)},p(t,e){16&e[1]&&T(i,t[35]),4096&e[0]&&d!==(d=t[12].length+"")&&T(s,d)},d(t){t&&y(e),l=!1,c()}}}function Km(t){let e,r,n,i=t[44].summary.total+"";return{c(){e=w("("),r=w(i),n=w(" found)")},m(t,i){b(t,e,i),b(t,r,i),b(t,n,i)},p(t,e){8192&e[1]&&i!==(i=t[44].summary.total+"")&&T(r,i)},d(t){t&&(y(e),y(r),y(n))}}}function Ym(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,M,S,D,P,L,E,O,R,B,j,$,z,I,F,N,W,H,V,q,U=(t[44].summary.byCategory.deadLinks||0)+"",K=(t[44].summary.byCategory.oldUnused||0)+"",Y=(t[44].summary.byCategory.genericTitles||0)+"",Q=(t[44].summary.byCategory.temporaryUrls||0)+"",J=(t[44].summary.byCategory.lowScore||0)+"",X=t[44].deadLinks.length>0&&Xm(t),G=t[44].oldUnused.length>0&&tb(t),Z=t[44].genericTitles.length>0&&nb(t),tt=t[44].temporaryUrls.length>0&&sb(t),et=t[44].lowScore.length>0&&cb(t);return{c(){e=v("div"),r=v("div"),n=v("div"),i=w(U),o=_(),s=v("div"),s.textContent="Dead Links",a=_(),l=v("div"),c=v("div"),d=w(K),u=_(),h=v("div"),h.textContent="Old & Unused",g=_(),f=v("div"),p=v("div"),x=w(Y),k=_(),M=v("div"),M.textContent="Generic Titles",S=_(),D=v("div"),P=v("div"),L=w(Q),E=_(),O=v("div"),O.textContent="Temp/Dev URLs",R=_(),B=v("div"),j=v("div"),$=w(J),z=_(),I=v("div"),I.textContent="Low Quality",F=_(),X&&X.c(),N=_(),G&&G.c(),W=_(),Z&&Z.c(),H=_(),tt&&tt.c(),V=_(),et&&et.c(),q=C(),A(n,"class","text-2xl font-bold text-red-600 dark:text-red-400"),A(s,"class","text-xs text-red-500 dark:text-red-400/80"),A(r,"class","p-3 bg-red-50 dark:bg-red-900/20 rounded-lg text-center transition-colors"),A(c,"class","text-2xl font-bold text-orange-600 dark:text-orange-400"),A(h,"class","text-xs text-orange-500 dark:text-orange-400/80"),A(l,"class","p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-center transition-colors"),A(p,"class","text-2xl font-bold text-yellow-600 dark:text-yellow-400"),A(M,"class","text-xs text-yellow-600 dark:text-yellow-400/80"),A(f,"class","p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg text-center transition-colors"),A(P,"class","text-2xl font-bold text-purple-600 dark:text-purple-400"),A(O,"class","text-xs text-purple-500 dark:text-purple-400/80"),A(D,"class","p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg text-center transition-colors"),A(j,"class","text-2xl font-bold text-gray-600 dark:text-gray-300"),A(I,"class","text-xs text-gray-500 dark:text-gray-400/80"),A(B,"class","p-3 bg-gray-100 dark:bg-gray-700 rounded-lg text-center transition-colors"),A(e,"class","grid grid-cols-2 md:grid-cols-5 gap-3 mb-6")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(r,o),m(r,s),m(e,a),m(e,l),m(l,c),m(c,d),m(l,u),m(l,h),m(e,g),m(e,f),m(f,p),m(p,x),m(f,k),m(f,M),m(e,S),m(e,D),m(D,P),m(P,L),m(D,E),m(D,O),m(e,R),m(e,B),m(B,j),m(j,$),m(B,z),m(B,I),b(t,F,y),X&&X.m(t,y),b(t,N,y),G&&G.m(t,y),b(t,W,y),Z&&Z.m(t,y),b(t,H,y),tt&&tt.m(t,y),b(t,V,y),et&&et.m(t,y),b(t,q,y)},p(t,e){8192&e[1]&&U!==(U=(t[44].summary.byCategory.deadLinks||0)+"")&&T(i,U),8192&e[1]&&K!==(K=(t[44].summary.byCategory.oldUnused||0)+"")&&T(d,K),8192&e[1]&&Y!==(Y=(t[44].summary.byCategory.genericTitles||0)+"")&&T(x,Y),8192&e[1]&&Q!==(Q=(t[44].summary.byCategory.temporaryUrls||0)+"")&&T(L,Q),8192&e[1]&&J!==(J=(t[44].summary.byCategory.lowScore||0)+"")&&T($,J),t[44].deadLinks.length>0?X?X.p(t,e):(X=Xm(t),X.c(),X.m(N.parentNode,N)):X&&(X.d(1),X=null),t[44].oldUnused.length>0?G?G.p(t,e):(G=tb(t),G.c(),G.m(W.parentNode,W)):G&&(G.d(1),G=null),t[44].genericTitles.length>0?Z?Z.p(t,e):(Z=nb(t),Z.c(),Z.m(H.parentNode,H)):Z&&(Z.d(1),Z=null),t[44].temporaryUrls.length>0?tt?tt.p(t,e):(tt=sb(t),tt.c(),tt.m(V.parentNode,V)):tt&&(tt.d(1),tt=null),t[44].lowScore.length>0?et?et.p(t,e):(et=cb(t),et.c(),et.m(q.parentNode,q)):et&&(et.d(1),et=null)},d(t){t&&(y(e),y(F),y(N),y(W),y(H),y(V),y(q)),X&&X.d(t),G&&G.d(t),Z&&Z.d(t),tt&&tt.d(t),et&&et.d(t)}}}function Qm(e){let r;return{c(){r=v("p"),r.textContent="No cleanup candidates found. Your bookmarks look great!",A(r,"class","text-gray-500 dark:text-gray-400")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Jm(e){let r;return{c(){r=v("div"),r.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600 dark:border-orange-400"></div> <span class="ml-3 text-gray-500 dark:text-gray-400">Analyzing bookmarks for cleanup...</span>',A(r,"class","flex items-center justify-center py-8")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Xm(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p=t[44].deadLinks.length+"",k=it(t[44].deadLinks.slice(0,t[45].deadLinks)),C=[];for(let e=0;e<k.length;e+=1)C[e]=Gm(tp(t,k,e));let S=t[44].deadLinks.length>t[45].deadLinks&&Zm(t);return{c(){e=v("div"),r=v("div"),n=v("h4"),i=w(" Dead Links ("),o=w(p),s=w(")"),a=_(),l=v("button"),c=w("Delete All"),d=_(),u=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(n,"class","text-sm font-semibold text-red-700"),l.disabled=t[46],A(l,"class","text-xs px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50"),A(r,"class","flex items-center justify-between mb-3"),A(u,"class","space-y-2 max-h-48 overflow-y-auto"),A(e,"class","mb-6")},m(p,y){b(p,e,y),m(e,r),m(r,n),m(n,i),m(n,o),m(n,s),m(r,a),m(r,l),m(l,c),m(e,d),m(e,u);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(u,null);m(e,h),S&&S.m(e,null),g||(f=M(l,"click",t[156]),g=!0)},p(t,r){if(8192&r[1]&&p!==(p=t[44].deadLinks.length+"")&&T(o,p),32768&r[1]&&(l.disabled=t[46]),24576&r[1]|8&r[3]){let e;for(k=it(t[44].deadLinks.slice(0,t[45].deadLinks)),e=0;e<k.length;e+=1){const n=tp(t,k,e);C[e]?C[e].p(n,r):(C[e]=Gm(n),C[e].c(),C[e].m(u,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=k.length}t[44].deadLinks.length>t[45].deadLinks?S?S.p(t,r):(S=Zm(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&y(e),x(C,t),S&&S.d(),g=!1,f()}}}function Gm(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,P,L=t[207].title+"",E=t[207].url+"",O=(t[207].lastChecked?new Date(t[207].lastChecked).toLocaleDateString():"Unknown")+"";function R(){return t[157](t[207])}return{c(){e=v("div"),r=v("div"),n=v("div"),i=w(L),o=_(),s=v("div"),a=w(E),l=_(),c=v("div"),d=w("Last checked: "),u=w(O),h=_(),g=v("div"),f=v("a"),p=w("Try"),k=_(),C=v("button"),C.textContent="Delete",S=_(),A(n,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(c,"class","text-xs text-red-600 mt-1"),A(r,"class","flex-1 min-w-0"),A(f,"href",x=t[207].url),A(f,"target","_blank"),A(f,"rel","noopener noreferrer"),A(f,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300"),A(C,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(g,"class","flex gap-1 ml-2 flex-shrink-0"),A(e,"class","p-2 bg-red-50 rounded border border-red-200 flex items-center justify-between")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(r,o),m(r,s),m(s,a),m(r,l),m(r,c),m(c,d),m(c,u),m(e,h),m(e,g),m(g,f),m(f,p),m(g,k),m(g,C),m(e,S),D||(P=M(C,"click",R),D=!0)},p(e,r){t=e,24576&r[1]&&L!==(L=t[207].title+"")&&T(i,L),24576&r[1]&&E!==(E=t[207].url+"")&&T(a,E),24576&r[1]&&O!==(O=(t[207].lastChecked?new Date(t[207].lastChecked).toLocaleDateString():"Unknown")+"")&&T(u,O),24576&r[1]&&x!==(x=t[207].url)&&A(f,"href",x)},d(t){t&&y(e),D=!1,P()}}}function Zm(t){let e,r,n,i,o,s,a,l,c=t[45].deadLinks+"",d=t[44].deadLinks.length+"";return{c(){e=v("button"),r=w("Show more ("),n=w(c),i=w(" of "),o=w(d),s=w(")"),A(e,"class","mt-2 text-xs text-red-600 hover:underline")},m(c,d){b(c,e,d),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[158]),a=!0)},p(t,e){16384&e[1]&&c!==(c=t[45].deadLinks+"")&&T(n,c),8192&e[1]&&d!==(d=t[44].deadLinks.length+"")&&T(o,d)},d(t){t&&y(e),a=!1,l()}}}function tb(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p=t[44].oldUnused.length+"",k=it(t[44].oldUnused.slice(0,t[45].oldUnused)),C=[];for(let e=0;e<k.length;e+=1)C[e]=eb(Zf(t,k,e));let S=t[44].oldUnused.length>t[45].oldUnused&&rb(t);return{c(){e=v("div"),r=v("div"),n=v("h4"),i=w(" Old & Never Accessed ("),o=w(p),s=w(")"),a=_(),l=v("button"),c=w("Delete All"),d=_(),u=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(n,"class","text-sm font-semibold text-orange-700"),l.disabled=t[46],A(l,"class","text-xs px-2 py-1 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50"),A(r,"class","flex items-center justify-between mb-3"),A(u,"class","space-y-2 max-h-48 overflow-y-auto"),A(e,"class","mb-6")},m(p,y){b(p,e,y),m(e,r),m(r,n),m(n,i),m(n,o),m(n,s),m(r,a),m(r,l),m(l,c),m(e,d),m(e,u);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(u,null);m(e,h),S&&S.m(e,null),g||(f=M(l,"click",t[159]),g=!0)},p(t,r){if(8192&r[1]&&p!==(p=t[44].oldUnused.length+"")&&T(o,p),32768&r[1]&&(l.disabled=t[46]),24576&r[1]|8&r[3]){let e;for(k=it(t[44].oldUnused.slice(0,t[45].oldUnused)),e=0;e<k.length;e+=1){const n=Zf(t,k,e);C[e]?C[e].p(n,r):(C[e]=eb(n),C[e].c(),C[e].m(u,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=k.length}t[44].oldUnused.length>t[45].oldUnused?S?S.p(t,r):(S=rb(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&y(e),x(C,t),S&&S.d(),g=!1,f()}}}function eb(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S=t[207].title+"",D=t[207].url+"",P=t[207].usefulnessScore+"",L=new Date(t[207].dateAdded).toLocaleDateString()+"";function E(){return t[160](t[207])}return{c(){e=v("div"),r=v("div"),n=v("div"),i=w(S),o=_(),s=v("div"),a=w(D),l=_(),c=v("div"),d=w("Score: "),u=w(P),h=w("  Created: "),g=w(L),f=_(),p=v("button"),p.textContent="Delete",x=_(),A(n,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(c,"class","text-xs text-orange-600 mt-1"),A(r,"class","flex-1 min-w-0"),A(p,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(e,"class","p-2 bg-orange-50 rounded border border-orange-200 flex items-center justify-between")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(r,o),m(r,s),m(s,a),m(r,l),m(r,c),m(c,d),m(c,u),m(c,h),m(c,g),m(e,f),m(e,p),m(e,x),k||(C=M(p,"click",E),k=!0)},p(e,r){t=e,24576&r[1]&&S!==(S=t[207].title+"")&&T(i,S),24576&r[1]&&D!==(D=t[207].url+"")&&T(a,D),24576&r[1]&&P!==(P=t[207].usefulnessScore+"")&&T(u,P),24576&r[1]&&L!==(L=new Date(t[207].dateAdded).toLocaleDateString()+"")&&T(g,L)},d(t){t&&y(e),k=!1,C()}}}function rb(t){let e,r,n,i,o,s,a,l,c=t[45].oldUnused+"",d=t[44].oldUnused.length+"";return{c(){e=v("button"),r=w("Show more ("),n=w(c),i=w(" of "),o=w(d),s=w(")"),A(e,"class","mt-2 text-xs text-orange-600 hover:underline")},m(c,d){b(c,e,d),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[161]),a=!0)},p(t,e){16384&e[1]&&c!==(c=t[45].oldUnused+"")&&T(n,c),8192&e[1]&&d!==(d=t[44].oldUnused.length+"")&&T(o,d)},d(t){t&&y(e),a=!1,l()}}}function nb(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p=t[44].genericTitles.length+"",k=it(t[44].genericTitles.slice(0,t[45].genericTitles)),C=[];for(let e=0;e<k.length;e+=1)C[e]=ib(Gf(t,k,e));let S=t[44].genericTitles.length>t[45].genericTitles&&ob(t);return{c(){e=v("div"),r=v("div"),n=v("h4"),i=w(" Generic/Placeholder Titles ("),o=w(p),s=w(")"),a=_(),l=v("button"),c=w("Delete All"),d=_(),u=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(n,"class","text-sm font-semibold text-yellow-700"),l.disabled=t[46],A(l,"class","text-xs px-2 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 disabled:opacity-50"),A(r,"class","flex items-center justify-between mb-3"),A(u,"class","space-y-2 max-h-48 overflow-y-auto"),A(e,"class","mb-6")},m(p,y){b(p,e,y),m(e,r),m(r,n),m(n,i),m(n,o),m(n,s),m(r,a),m(r,l),m(l,c),m(e,d),m(e,u);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(u,null);m(e,h),S&&S.m(e,null),g||(f=M(l,"click",t[162]),g=!0)},p(t,r){if(8192&r[1]&&p!==(p=t[44].genericTitles.length+"")&&T(o,p),32768&r[1]&&(l.disabled=t[46]),24576&r[1]|8&r[3]){let e;for(k=it(t[44].genericTitles.slice(0,t[45].genericTitles)),e=0;e<k.length;e+=1){const n=Gf(t,k,e);C[e]?C[e].p(n,r):(C[e]=ib(n),C[e].c(),C[e].m(u,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=k.length}t[44].genericTitles.length>t[45].genericTitles?S?S.p(t,r):(S=ob(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&y(e),x(C,t),S&&S.d(),g=!1,f()}}}function ib(t){let e,r,n,i,o,s,a,l,c,d,u,h,g=t[207].title+"",f=t[207].url+"";function p(){return t[163](t[207])}return{c(){e=v("div"),r=v("div"),n=v("div"),i=w(g),o=_(),s=v("div"),a=w(f),l=_(),c=v("button"),c.textContent="Delete",d=_(),A(n,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(r,"class","flex-1 min-w-0"),A(c,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(e,"class","p-2 bg-yellow-50 rounded border border-yellow-200 flex items-center justify-between")},m(t,g){b(t,e,g),m(e,r),m(r,n),m(n,i),m(r,o),m(r,s),m(s,a),m(e,l),m(e,c),m(e,d),u||(h=M(c,"click",p),u=!0)},p(e,r){t=e,24576&r[1]&&g!==(g=t[207].title+"")&&T(i,g),24576&r[1]&&f!==(f=t[207].url+"")&&T(a,f)},d(t){t&&y(e),u=!1,h()}}}function ob(t){let e,r,n,i,o,s,a,l,c=t[45].genericTitles+"",d=t[44].genericTitles.length+"";return{c(){e=v("button"),r=w("Show more ("),n=w(c),i=w(" of "),o=w(d),s=w(")"),A(e,"class","mt-2 text-xs text-yellow-600 hover:underline")},m(c,d){b(c,e,d),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[164]),a=!0)},p(t,e){16384&e[1]&&c!==(c=t[45].genericTitles+"")&&T(n,c),8192&e[1]&&d!==(d=t[44].genericTitles.length+"")&&T(o,d)},d(t){t&&y(e),a=!1,l()}}}function sb(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p=t[44].temporaryUrls.length+"",k=it(t[44].temporaryUrls.slice(0,t[45].temporaryUrls)),C=[];for(let e=0;e<k.length;e+=1)C[e]=ab(Xf(t,k,e));let S=t[44].temporaryUrls.length>t[45].temporaryUrls&&lb(t);return{c(){e=v("div"),r=v("div"),n=v("h4"),i=w(" Temporary/Dev URLs ("),o=w(p),s=w(")"),a=_(),l=v("button"),c=w("Delete All"),d=_(),u=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(n,"class","text-sm font-semibold text-purple-700"),l.disabled=t[46],A(l,"class","text-xs px-2 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50"),A(r,"class","flex items-center justify-between mb-3"),A(u,"class","space-y-2 max-h-48 overflow-y-auto"),A(e,"class","mb-6")},m(p,y){b(p,e,y),m(e,r),m(r,n),m(n,i),m(n,o),m(n,s),m(r,a),m(r,l),m(l,c),m(e,d),m(e,u);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(u,null);m(e,h),S&&S.m(e,null),g||(f=M(l,"click",t[165]),g=!0)},p(t,r){if(8192&r[1]&&p!==(p=t[44].temporaryUrls.length+"")&&T(o,p),32768&r[1]&&(l.disabled=t[46]),24576&r[1]|8&r[3]){let e;for(k=it(t[44].temporaryUrls.slice(0,t[45].temporaryUrls)),e=0;e<k.length;e+=1){const n=Xf(t,k,e);C[e]?C[e].p(n,r):(C[e]=ab(n),C[e].c(),C[e].m(u,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=k.length}t[44].temporaryUrls.length>t[45].temporaryUrls?S?S.p(t,r):(S=lb(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&y(e),x(C,t),S&&S.d(),g=!1,f()}}}function ab(t){let e,r,n,i,o,s,a,l,c,d,u,h,g=t[207].title+"",f=t[207].url+"";function p(){return t[166](t[207])}return{c(){e=v("div"),r=v("div"),n=v("div"),i=w(g),o=_(),s=v("div"),a=w(f),l=_(),c=v("button"),c.textContent="Delete",d=_(),A(n,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(r,"class","flex-1 min-w-0"),A(c,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(e,"class","p-2 bg-purple-50 rounded border border-purple-200 flex items-center justify-between")},m(t,g){b(t,e,g),m(e,r),m(r,n),m(n,i),m(r,o),m(r,s),m(s,a),m(e,l),m(e,c),m(e,d),u||(h=M(c,"click",p),u=!0)},p(e,r){t=e,24576&r[1]&&g!==(g=t[207].title+"")&&T(i,g),24576&r[1]&&f!==(f=t[207].url+"")&&T(a,f)},d(t){t&&y(e),u=!1,h()}}}function lb(t){let e,r,n,i,o,s,a,l,c=t[45].temporaryUrls+"",d=t[44].temporaryUrls.length+"";return{c(){e=v("button"),r=w("Show more ("),n=w(c),i=w(" of "),o=w(d),s=w(")"),A(e,"class","mt-2 text-xs text-purple-600 hover:underline")},m(c,d){b(c,e,d),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[167]),a=!0)},p(t,e){16384&e[1]&&c!==(c=t[45].temporaryUrls+"")&&T(n,c),8192&e[1]&&d!==(d=t[44].temporaryUrls.length+"")&&T(o,d)},d(t){t&&y(e),a=!1,l()}}}function cb(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p=t[44].lowScore.length+"",k=it(t[44].lowScore.slice(0,t[45].lowScore)),C=[];for(let e=0;e<k.length;e+=1)C[e]=db(Jf(t,k,e));let S=t[44].lowScore.length>t[45].lowScore&&ub(t);return{c(){e=v("div"),r=v("div"),n=v("h4"),i=w(" Low Quality Score ("),o=w(p),s=w(")"),a=_(),l=v("button"),c=w("Delete All"),d=_(),u=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(n,"class","text-sm font-semibold text-gray-700"),l.disabled=t[46],A(l,"class","text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 disabled:opacity-50"),A(r,"class","flex items-center justify-between mb-3"),A(u,"class","space-y-2 max-h-48 overflow-y-auto")},m(p,y){b(p,e,y),m(e,r),m(r,n),m(n,i),m(n,o),m(n,s),m(r,a),m(r,l),m(l,c),m(e,d),m(e,u);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(u,null);m(e,h),S&&S.m(e,null),g||(f=M(l,"click",t[168]),g=!0)},p(t,r){if(8192&r[1]&&p!==(p=t[44].lowScore.length+"")&&T(o,p),32768&r[1]&&(l.disabled=t[46]),24576&r[1]|8&r[3]){let e;for(k=it(t[44].lowScore.slice(0,t[45].lowScore)),e=0;e<k.length;e+=1){const n=Jf(t,k,e);C[e]?C[e].p(n,r):(C[e]=db(n),C[e].c(),C[e].m(u,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=k.length}t[44].lowScore.length>t[45].lowScore?S?S.p(t,r):(S=ub(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&y(e),x(C,t),S&&S.d(),g=!1,f()}}}function db(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S=t[207].title+"",D=t[207].url+"",P=t[207].usefulnessScore+"",L=t[207].uselessReasons?.join(", ")+"";function E(){return t[169](t[207])}return{c(){e=v("div"),r=v("div"),n=v("div"),i=w(S),o=_(),s=v("div"),a=w(D),l=_(),c=v("div"),d=w("Score: "),u=w(P),h=w("  "),g=w(L),f=_(),p=v("button"),p.textContent="Delete",x=_(),A(n,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(c,"class","text-xs text-gray-400 mt-1"),A(r,"class","flex-1 min-w-0"),A(p,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(e,"class","p-2 bg-gray-50 rounded border border-gray-200 flex items-center justify-between")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(r,o),m(r,s),m(s,a),m(r,l),m(r,c),m(c,d),m(c,u),m(c,h),m(c,g),m(e,f),m(e,p),m(e,x),k||(C=M(p,"click",E),k=!0)},p(e,r){t=e,24576&r[1]&&S!==(S=t[207].title+"")&&T(i,S),24576&r[1]&&D!==(D=t[207].url+"")&&T(a,D),24576&r[1]&&P!==(P=t[207].usefulnessScore+"")&&T(u,P),24576&r[1]&&L!==(L=t[207].uselessReasons?.join(", ")+"")&&T(g,L)},d(t){t&&y(e),k=!1,C()}}}function ub(t){let e,r,n,i,o,s,a,l,c=t[45].lowScore+"",d=t[44].lowScore.length+"";return{c(){e=v("button"),r=w("Show more ("),n=w(c),i=w(" of "),o=w(d),s=w(")"),A(e,"class","mt-2 text-xs text-gray-600 hover:underline")},m(c,d){b(c,e,d),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[170]),a=!0)},p(t,e){16384&e[1]&&c!==(c=t[45].lowScore+"")&&T(n,c),8192&e[1]&&d!==(d=t[44].lowScore.length+"")&&T(o,d)},d(t){t&&y(e),a=!1,l()}}}function hb(t){let e,r,n,i=t[13].length+"";return{c(){e=w("("),r=w(i),n=w(")")},m(t,i){b(t,e,i),b(t,r,i),b(t,n,i)},p(t,e){8192&e[0]&&i!==(i=t[13].length+"")&&T(r,i)},d(t){t&&(y(e),y(r),y(n))}}}function gb(t){let e,r,n,i,o,s,a=t[13].length+"";return{c(){e=v("button"),r=w("Delete All ("),n=w(a),i=w(")"),A(e,"class","px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors")},m(a,l){b(a,e,l),m(e,r),m(e,n),m(e,i),o||(s=M(e,"click",t[84]),o=!0)},p(t,e){8192&e[0]&&a!==(a=t[13].length+"")&&T(n,a)},d(t){t&&y(e),o=!1,s()}}}function fb(t){let e,r=it(t[13]),n=[];for(let e=0;e<r.length;e+=1)n[e]=bb(Qf(t,r,e));return{c(){e=v("div");for(let t=0;t<n.length;t+=1)n[t].c();A(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,r){b(t,e,r);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null)},p(t,i){if(8192&i[0]|2097152&i[2]){let o;for(r=it(t[13]),o=0;o<r.length;o+=1){const s=Qf(t,r,o);n[o]?n[o].p(s,i):(n[o]=bb(s),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&y(e),x(n,t)}}}function pb(e){let r;return{c(){r=v("p"),r.textContent="All bookmark URLs are valid.",A(r,"class","text-gray-500 dark:text-gray-400")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function mb(e){let r;return{c(){r=v("div"),r.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 dark:border-purple-400"></div> <span class="ml-3 text-gray-500 dark:text-gray-400">Checking URLs...</span>',A(r,"class","flex items-center justify-center py-8")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function bb(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S=t[207].title+"",D=t[207].url+"",P=(t[207].folderPath||"No folder")+"";function L(){return t[171](t[207])}return{c(){e=v("div"),r=v("div"),n=v("div"),i=v("div"),o=w(S),a=_(),l=v("div"),c=w(D),u=_(),h=v("div"),g=w(P),f=_(),p=v("button"),p.textContent="Delete",x=_(),A(i,"class","text-sm font-medium text-gray-900 dark:text-gray-100 truncate"),A(i,"title",s=t[207].title),A(l,"class","text-xs text-red-600 dark:text-red-400 truncate mt-1"),A(l,"title",d=t[207].url),A(h,"class","text-xs text-gray-500 dark:text-gray-400 mt-1"),A(n,"class","flex-1 min-w-0"),A(p,"class","flex-shrink-0 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors"),A(r,"class","flex justify-between items-start gap-2"),A(e,"class","border border-gray-200 dark:border-gray-700 rounded-lg p-3 bg-gray-50 dark:bg-gray-900/50")},m(t,s){b(t,e,s),m(e,r),m(r,n),m(n,i),m(i,o),m(n,a),m(n,l),m(l,c),m(n,u),m(n,h),m(h,g),m(r,f),m(r,p),m(e,x),k||(C=M(p,"click",L),k=!0)},p(e,r){t=e,8192&r[0]&&S!==(S=t[207].title+"")&&T(o,S),8192&r[0]&&s!==(s=t[207].title)&&A(i,"title",s),8192&r[0]&&D!==(D=t[207].url+"")&&T(c,D),8192&r[0]&&d!==(d=t[207].url)&&A(l,"title",d),8192&r[0]&&P!==(P=(t[207].folderPath||"No folder")+"")&&T(g,P)},d(t){t&&y(e),k=!1,C()}}}function yb(t){let e,r,n;return{c(){e=k("svg"),r=k("path"),n=w("\n                      Download Backup"),A(r,"stroke-linecap","round"),A(r,"stroke-linejoin","round"),A(r,"stroke-width","2"),A(r,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),A(e,"class","w-4 h-4 mr-2"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,i){b(t,e,i),m(e,r),b(t,n,i)},d(t){t&&(y(e),y(n))}}}function xb(t){let e,r,n,i;return{c(){e=k("svg"),r=k("circle"),n=k("path"),i=w("\n                      Creating Backup..."),A(r,"class","opacity-25"),A(r,"cx","12"),A(r,"cy","12"),A(r,"r","10"),A(r,"stroke","currentColor"),A(r,"stroke-width","4"),A(n,"class","opacity-75"),A(n,"fill","currentColor"),A(n,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),A(e,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),A(e,"fill","none"),A(e,"viewBox","0 0 24 24")},m(t,o){b(t,e,o),m(e,r),m(e,n),b(t,i,o)},d(t){t&&(y(e),y(i))}}}function vb(t){let e,r;function n(t,e){return t[50].valid?wb:kb}let i=n(t),o=i(t);return{c(){e=v("div"),o.c(),A(e,"class",r="mt-3 p-3 rounded-md "+(t[50].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))},m(t,r){b(t,e,r),o.m(e,null)},p(t,s){i===(i=n(t))&&o?o.p(t,s):(o.d(1),o=i(t),o&&(o.c(),o.m(e,null))),524288&s[1]&&r!==(r="mt-3 p-3 rounded-md "+(t[50].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))&&A(e,"class",r)},d(t){t&&y(e),o.d()}}}function kb(t){let e,r,n,i=it(t[50].issues),o=[];for(let e=0;e<i.length;e+=1)o[e]=_b(Yf(t,i,e));return{c(){e=v("p"),e.textContent=" Invalid backup file",r=_(),n=v("ul");for(let t=0;t<o.length;t+=1)o[t].c();A(e,"class","text-sm text-red-800"),A(n,"class","text-xs text-red-600 mt-1")},m(t,i){b(t,e,i),b(t,r,i),b(t,n,i);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(n,null)},p(t,e){if(524288&e[1]){let r;for(i=it(t[50].issues),r=0;r<i.length;r+=1){const s=Yf(t,i,r);o[r]?o[r].p(s,e):(o[r]=_b(s),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}},d(t){t&&(y(e),y(r),y(n)),x(o,t)}}}function wb(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x=t[50].createdAt+"",k=(t[50].metadata?.totalBookmarks||0)+"",C=(t[50].metadata?.enrichedCount||0)+"",S=t[48]?"Restoring...":"Restore This Backup";return{c(){e=v("p"),r=w(" Valid backup from "),n=w(x),i=v("br"),o=_(),s=v("span"),a=w(k),l=w(" bookmarks, \n                            "),c=w(C),d=w(" enriched"),u=_(),h=v("button"),g=w(S),A(s,"class","text-xs text-green-600"),A(e,"class","text-sm text-green-800"),h.disabled=t[48],A(h,"class","mt-2 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 text-sm")},m(y,x){b(y,e,x),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),m(s,a),m(s,l),m(s,c),m(s,d),b(y,u,x),b(y,h,x),m(h,g),f||(p=M(h,"click",t[107]),f=!0)},p(t,e){524288&e[1]&&x!==(x=t[50].createdAt+"")&&T(n,x),524288&e[1]&&k!==(k=(t[50].metadata?.totalBookmarks||0)+"")&&T(a,k),524288&e[1]&&C!==(C=(t[50].metadata?.enrichedCount||0)+"")&&T(c,C),131072&e[1]&&S!==(S=t[48]?"Restoring...":"Restore This Backup")&&T(g,S),131072&e[1]&&(h.disabled=t[48])},d(t){t&&(y(e),y(u),y(h)),f=!1,p()}}}function _b(t){let e,r,n,i=t[236]+"";return{c(){e=v("li"),r=w(" "),n=w(i)},m(t,i){b(t,e,i),m(e,r),m(e,n)},p(t,e){524288&e[1]&&i!==(i=t[236]+"")&&T(n,i)},d(t){t&&y(e)}}}function Cb(t){let e,r=it(t[49]),n=[];for(let e=0;e<r.length;e+=1)n[e]=Sb(Kf(t,r,e));return{c(){e=v("div");for(let t=0;t<n.length;t+=1)n[t].c();A(e,"class","space-y-2")},m(t,r){b(t,e,r);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null)},p(t,i){if(393216&i[1]|131072&i[3]){let o;for(r=it(t[49]),o=0;o<r.length;o+=1){const s=Kf(t,r,o);n[o]?n[o].p(s,i):(n[o]=Sb(s),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&y(e),x(n,t)}}}function Mb(e){let r;return{c(){r=v("p"),r.textContent="No auto-backups yet. They will appear after your first restore or enrichment run.",A(r,"class","text-gray-500 text-sm")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function Sb(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C=new Date(t[233].createdAt).toLocaleString()+"",S=(t[233].metadata?.totalBookmarks||0)+"",D=(t[233].metadata?.enrichedCount||0)+"";function P(){return t[172](t[235])}return{c(){e=v("div"),r=v("div"),n=v("span"),i=w(C),o=_(),s=v("span"),a=w("("),l=w(S),c=w(" bookmarks, "),d=w(D),u=w(" enriched)"),h=_(),g=v("button"),f=w("Restore"),p=_(),A(n,"class","text-sm font-medium text-gray-900"),A(s,"class","text-xs text-gray-500 ml-2"),g.disabled=t[48],A(g,"class","text-sm px-3 py-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded"),A(e,"class","flex justify-between items-center p-3 bg-gray-50 rounded-md")},m(t,y){b(t,e,y),m(e,r),m(r,n),m(n,i),m(r,o),m(r,s),m(s,a),m(s,l),m(s,c),m(s,d),m(s,u),m(e,h),m(e,g),m(g,f),m(e,p),x||(k=M(g,"click",P),x=!0)},p(e,r){t=e,262144&r[1]&&C!==(C=new Date(t[233].createdAt).toLocaleString()+"")&&T(i,C),262144&r[1]&&S!==(S=(t[233].metadata?.totalBookmarks||0)+"")&&T(l,S),262144&r[1]&&D!==(D=(t[233].metadata?.enrichedCount||0)+"")&&T(d,D),131072&r[1]&&(g.disabled=t[48])},d(t){t&&y(e),x=!1,k()}}}function Ab(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,k,S,D,P,L,O,R,B,j,$,z,I,F,N,W,H,V,q,U,Y,Q,J,X,G,Z,ot,st,at,lt,ct,dt,ut,ht,gt,ft=1!==t[8]?"s":"",pt=t[3].length+"",mt=t[51]?"Cancel":"Select",bt=it(Object.values(Ka)),yt=[];for(let e=0;e<bt.length;e+=1)yt[e]=Lb(mp(t,bt,e));function xt(t,e){return"list"===t[52]?Ob:Eb}let vt=xt(t),kt=vt(t),wt=(t[1].domains.length>0||t[1].folders.length>0||t[1].dateRange||t[2]||t[1].tags.length>0||t[1].topics.length>0||t[1].types.length>0||t[1].creators.length>0||t[1].deadLinks||t[1].stale)&&Rb(t),_t=t[51]&&qb(t);const Ct=[Kb,Ub],Mt=[];function St(t,e){return"list"===t[52]?0:1}at=St(t),lt=Mt[at]=Ct[at](t);let At=t[9]&&Jb(t);return{c(){e=v("div"),r=v("div"),i=v("div"),o=v("h2"),s=w(t[8]),a=w(" bookmark"),l=w(ft),c=_(),d=v("div"),u=v("div"),h=w("Showing "),g=w(pt),f=w(" of "),p=w(t[8]),k=_(),S=v("select");for(let t=0;t<yt.length;t+=1)yt[t].c();D=_(),P=v("button"),L=w(mt),R=_(),B=v("button"),kt.c(),j=_(),wt&&wt.c(),$=_(),z=v("div"),I=v("div"),F=v("button"),F.textContent="+ Category",N=_(),W=v("button"),W.textContent="+ Domain",H=_(),V=v("button"),V.textContent="+ Folder",q=_(),U=v("button"),U.textContent="+ Platform",Y=_(),Q=v("button"),Q.textContent="+ Type",J=_(),X=v("button"),X.textContent="+ Dead Links",G=_(),Z=v("button"),Z.textContent="+ Stale",ot=_(),_t&&_t.c(),st=_(),lt.c(),ct=_(),At&&At.c(),dt=C(),A(o,"class","text-lg font-medium text-gray-900 dark:text-gray-100"),A(i,"class","flex items-center gap-3"),A(u,"class","text-sm text-gray-500"),A(S,"class","text-sm border border-gray-300 dark:border-gray-600 rounded-md px-2 py-1 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-blue-500 focus:border-blue-500"),void 0===t[0]&&K(()=>t[122].call(S)),A(P,"class",O="px-3 py-2 text-sm border rounded-md transition-colors "+(t[51]?"bg-blue-50 dark:bg-blue-900/40 border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300")),A(B,"class","p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 border border-gray-300 dark:border-gray-600 rounded-md transition-colors"),A(B,"title","Toggle view mode"),A(d,"class","flex flex-wrap items-center gap-2 sm:gap-4"),A(r,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"),A(e,"class","mb-4 flex flex-col gap-4"),A(F,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(W,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(V,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(U,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(Q,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(X,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(Z,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(I,"class","flex flex-wrap gap-2"),A(z,"class","mb-4")},m(n,y){b(n,e,y),m(e,r),m(r,i),m(i,o),m(o,s),m(o,a),m(o,l),m(r,c),m(r,d),m(d,u),m(u,h),m(u,g),m(u,f),m(u,p),m(d,k),m(d,S);for(let t=0;t<yt.length;t+=1)yt[t]&&yt[t].m(S,null);E(S,t[0],!0),m(d,D),m(d,P),m(P,L),m(d,R),m(d,B),kt.m(B,null),m(e,j),wt&&wt.m(e,null),b(n,$,y),b(n,z,y),m(z,I),m(I,F),m(I,N),m(I,W),m(I,H),m(I,V),m(I,q),m(I,U),m(I,Y),m(I,Q),m(I,J),m(I,X),m(I,G),m(I,Z),b(n,ot,y),_t&&_t.m(n,y),b(n,st,y),Mt[at].m(n,y),b(n,ct,y),At&&At.m(n,y),b(n,dt,y),ut=!0,ht||(gt=[M(S,"change",t[122]),M(S,"change",t[123]),M(P,"click",t[98]),M(B,"click",t[105]),M(F,"click",t[135]),M(W,"click",t[136]),M(V,"click",t[137]),M(U,"click",t[138]),M(Q,"click",t[139]),M(X,"click",t[140]),M(Z,"click",t[141])],ht=!0)},p(t,r){if((!ut||256&r[0])&&T(s,t[8]),(!ut||256&r[0])&&ft!==(ft=1!==t[8]?"s":"")&&T(l,ft),(!ut||8&r[0])&&pt!==(pt=t[3].length+"")&&T(g,pt),(!ut||256&r[0])&&T(p,t[8]),0&r){let e;for(bt=it(Object.values(Ka)),e=0;e<bt.length;e+=1){const n=mp(t,bt,e);yt[e]?yt[e].p(n,r):(yt[e]=Lb(n),yt[e].c(),yt[e].m(S,null))}for(;e<yt.length;e+=1)yt[e].d(1);yt.length=bt.length}1&r[0]&&E(S,t[0]),(!ut||1048576&r[1])&&mt!==(mt=t[51]?"Cancel":"Select")&&T(L,mt),(!ut||1048576&r[1]&&O!==(O="px-3 py-2 text-sm border rounded-md transition-colors "+(t[51]?"bg-blue-50 dark:bg-blue-900/40 border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300")))&&A(P,"class",O),vt!==(vt=xt(t))&&(kt.d(1),kt=vt(t),kt&&(kt.c(),kt.m(B,null))),t[1].domains.length>0||t[1].folders.length>0||t[1].dateRange||t[2]||t[1].tags.length>0||t[1].topics.length>0||t[1].types.length>0||t[1].creators.length>0||t[1].deadLinks||t[1].stale?wt?wt.p(t,r):(wt=Rb(t),wt.c(),wt.m(e,null)):wt&&(wt.d(1),wt=null),t[51]?_t?_t.p(t,r):(_t=qb(t),_t.c(),_t.m(st.parentNode,st)):_t&&(_t.d(1),_t=null);let n=at;at=St(t),at===n?Mt[at].p(t,r):(tt(),nt(Mt[n],1,1,()=>{Mt[n]=null}),et(),lt=Mt[at],lt?lt.p(t,r):(lt=Mt[at]=Ct[at](t),lt.c()),rt(lt,1),lt.m(ct.parentNode,ct)),t[9]?At?At.p(t,r):(At=Jb(t),At.c(),At.m(dt.parentNode,dt)):At&&(At.d(1),At=null)},i(t){ut||(rt(lt),ut=!0)},o(t){nt(lt),ut=!1},d(t){t&&(y(e),y($),y(z),y(ot),y(st),y(ct),y(dt)),x(yt,t),kt.d(),wt&&wt.d(),_t&&_t.d(t),Mt[at].d(t),At&&At.d(t),ht=!1,n(gt)}}}function Db(e){let r;function n(t,e){return t[2]?ty:Zb}let i=n(e),o=i(e);return{c(){r=v("div"),o.c(),A(r,"class","text-center text-gray-500 dark:text-gray-400 p-8")},m(t,e){b(t,r,e),o.m(r,null)},p(t,e){i===(i=n(t))&&o?o.p(t,e):(o.d(1),o=i(t),o&&(o.c(),o.m(r,null)))},i:t,o:t,d(t){t&&y(r),o.d()}}}function Tb(e){let r,n,i,o,s,a,l,c;return{c(){r=v("div"),n=v("p"),i=w("Error: "),o=w(e[5]),s=_(),a=v("button"),a.textContent="Retry",A(a,"class","mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"),A(r,"class","text-center text-red-600 dark:text-red-400 p-8")},m(t,d){b(t,r,d),m(r,n),m(n,i),m(n,o),m(r,s),m(r,a),l||(c=M(a,"click",e[121]),l=!0)},p(t,e){32&e[0]&&T(o,t[5])},i:t,o:t,d(t){t&&y(r),l=!1,c()}}}function Pb(e){let r;return{c(){r=v("div"),r.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 dark:border-blue-400"></div>',A(r,"class","flex items-center justify-center h-64")},m(t,e){b(t,r,e)},p:t,i:t,o:t,d(t){t&&y(r)}}}function Lb(e){let r,n,i=e[230].label+"";return{c(){r=v("option"),n=w(i),r.__value=e[230].key,P(r,r.__value)},m(t,e){b(t,r,e),m(r,n)},p:t,d(t){t&&y(r)}}}function Eb(t){let e,r;return{c(){e=k("svg"),r=k("path"),A(r,"stroke-linecap","round"),A(r,"stroke-linejoin","round"),A(r,"stroke-width","2"),A(r,"d","M4 6h16M4 10h16M4 14h16M4 18h16"),A(e,"class","w-4 h-4"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,n){b(t,e,n),m(e,r)},d(t){t&&y(e)}}}function Ob(t){let e,r;return{c(){e=k("svg"),r=k("path"),A(r,"stroke-linecap","round"),A(r,"stroke-linejoin","round"),A(r,"stroke-width","2"),A(r,"d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"),A(e,"class","w-4 h-4"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,n){b(t,e,n),m(e,r)},d(t){t&&y(e)}}}function Rb(t){let e,r,n,i,o,s,a,l,c,d,u,h,g,f,p,k,w=t[2]&&Bb(t),C=it(t[1].domains),S=[];for(let e=0;e<C.length;e+=1)S[e]=jb(pp(t,C,e));let D=it(t[1].folders),T=[];for(let e=0;e<D.length;e+=1)T[e]=$b(fp(t,D,e));let P=it(t[1].topics),L=[];for(let e=0;e<P.length;e+=1)L[e]=zb(gp(t,P,e));let E=it(t[1].types),O=[];for(let e=0;e<E.length;e+=1)O[e]=Ib(hp(t,E,e));let R=it(t[1].creators),B=[];for(let e=0;e<R.length;e+=1)B[e]=Fb(up(t,R,e));let j=it(t[1].tags),$=[];for(let e=0;e<j.length;e+=1)$[e]=Nb(dp(t,j,e));let z=t[1].dateRange&&Wb(t),I=t[1].deadLinks&&Hb(t),F=t[1].stale&&Vb(t);return{c(){e=v("div"),r=v("span"),r.textContent="Filters:",n=_(),w&&w.c(),i=_();for(let t=0;t<S.length;t+=1)S[t].c();o=_();for(let t=0;t<T.length;t+=1)T[t].c();s=_();for(let t=0;t<L.length;t+=1)L[t].c();a=_();for(let t=0;t<O.length;t+=1)O[t].c();l=_();for(let t=0;t<B.length;t+=1)B[t].c();c=_();for(let t=0;t<$.length;t+=1)$[t].c();d=_(),z&&z.c(),u=_(),I&&I.c(),h=_(),F&&F.c(),g=_(),f=v("button"),f.textContent="Clear all",A(r,"class","text-sm text-gray-500 dark:text-gray-400 mr-1"),A(f,"class","text-xs text-red-600 hover:text-red-800 underline ml-2"),A(e,"class","flex flex-wrap items-center gap-2")},m(y,x){b(y,e,x),m(e,r),m(e,n),w&&w.m(e,null),m(e,i);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(e,null);m(e,o);for(let t=0;t<T.length;t+=1)T[t]&&T[t].m(e,null);m(e,s);for(let t=0;t<L.length;t+=1)L[t]&&L[t].m(e,null);m(e,a);for(let t=0;t<O.length;t+=1)O[t]&&O[t].m(e,null);m(e,l);for(let t=0;t<B.length;t+=1)B[t]&&B[t].m(e,null);m(e,c);for(let t=0;t<$.length;t+=1)$[t]&&$[t].m(e,null);m(e,d),z&&z.m(e,null),m(e,u),I&&I.m(e,null),m(e,h),F&&F.m(e,null),m(e,g),m(e,f),p||(k=M(f,"click",t[134]),p=!0)},p(t,r){if(t[2]?w?w.p(t,r):(w=Bb(t),w.c(),w.m(e,i)):w&&(w.d(1),w=null),2&r[0]){let n;for(C=it(t[1].domains),n=0;n<C.length;n+=1){const i=pp(t,C,n);S[n]?S[n].p(i,r):(S[n]=jb(i),S[n].c(),S[n].m(e,o))}for(;n<S.length;n+=1)S[n].d(1);S.length=C.length}if(2&r[0]){let n;for(D=it(t[1].folders),n=0;n<D.length;n+=1){const i=fp(t,D,n);T[n]?T[n].p(i,r):(T[n]=$b(i),T[n].c(),T[n].m(e,s))}for(;n<T.length;n+=1)T[n].d(1);T.length=D.length}if(2&r[0]){let n;for(P=it(t[1].topics),n=0;n<P.length;n+=1){const i=gp(t,P,n);L[n]?L[n].p(i,r):(L[n]=zb(i),L[n].c(),L[n].m(e,a))}for(;n<L.length;n+=1)L[n].d(1);L.length=P.length}if(2&r[0]){let n;for(E=it(t[1].types),n=0;n<E.length;n+=1){const i=hp(t,E,n);O[n]?O[n].p(i,r):(O[n]=Ib(i),O[n].c(),O[n].m(e,l))}for(;n<O.length;n+=1)O[n].d(1);O.length=E.length}if(2&r[0]){let n;for(R=it(t[1].creators),n=0;n<R.length;n+=1){const i=up(t,R,n);B[n]?B[n].p(i,r):(B[n]=Fb(i),B[n].c(),B[n].m(e,c))}for(;n<B.length;n+=1)B[n].d(1);B.length=R.length}if(2&r[0]){let n;for(j=it(t[1].tags),n=0;n<j.length;n+=1){const i=dp(t,j,n);$[n]?$[n].p(i,r):($[n]=Nb(i),$[n].c(),$[n].m(e,d))}for(;n<$.length;n+=1)$[n].d(1);$.length=j.length}t[1].dateRange?z?z.p(t,r):(z=Wb(t),z.c(),z.m(e,u)):z&&(z.d(1),z=null),t[1].deadLinks?I||(I=Hb(t),I.c(),I.m(e,h)):I&&(I.d(1),I=null),t[1].stale?F||(F=Vb(t),F.c(),F.m(e,g)):F&&(F.d(1),F=null)},d(t){t&&y(e),w&&w.d(),x(S,t),x(T,t),x(L,t),x(O,t),x(B,t),x($,t),z&&z.d(),I&&I.d(),F&&F.d(),p=!1,k()}}}function Bb(t){let e,r,n,i,o,s,a;return{c(){e=v("span"),r=w("Search: "),n=w(t[2]),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove search filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-blue-400 dark:text-blue-500 hover:text-blue-600 dark:hover:text-blue-300 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800")},m(l,c){b(l,e,c),m(e,r),m(e,n),m(e,i),m(e,o),s||(a=M(o,"click",t[124]),s=!0)},p(t,e){4&e[0]&&T(n,t[2])},d(t){t&&y(e),s=!1,a()}}}function jb(t){let e,r,n,i,o,s,a,l,c=t[227]+"";function d(){return t[125](t[227])}return{c(){e=v("span"),r=w("Domain: "),n=w(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove domain filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-green-400 dark:text-green-500 hover:text-green-600 dark:hover:text-green-300 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/40 text-green-800 dark:text-green-300 border border-green-200 dark:border-green-800")},m(t,c){b(t,e,c),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",d),a=!0)},p(e,r){t=e,2&r[0]&&c!==(c=t[227]+"")&&T(n,c)},d(t){t&&y(e),a=!1,l()}}}function $b(t){let e,r,n,i,o,s,a,l,c=t[224]+"";function d(){return t[126](t[224])}return{c(){e=v("span"),r=w("Folder: "),n=w(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove folder filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-yellow-400 dark:text-yellow-500 hover:text-yellow-600 dark:hover:text-yellow-300 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800")},m(t,c){b(t,e,c),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",d),a=!0)},p(e,r){t=e,2&r[0]&&c!==(c=t[224]+"")&&T(n,c)},d(t){t&&y(e),a=!1,l()}}}function zb(t){let e,r,n,i,o,s,a,l,c=t[221]+"";function d(){return t[127](t[221])}return{c(){e=v("span"),r=w("Topic: "),n=w(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove topic filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-indigo-400 dark:text-indigo-500 hover:text-indigo-600 dark:hover:text-indigo-300 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 dark:bg-indigo-900/40 text-indigo-800 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800")},m(t,c){b(t,e,c),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",d),a=!0)},p(e,r){t=e,2&r[0]&&c!==(c=t[221]+"")&&T(n,c)},d(t){t&&y(e),a=!1,l()}}}function Ib(t){let e,r,n,i,o,s,a,l,c=t[218]+"";function d(){return t[128](t[218])}return{c(){e=v("span"),r=w("Type: "),n=w(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove type filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-purple-400 dark:text-purple-500 hover:text-purple-600 dark:hover:text-purple-300 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/40 text-purple-800 dark:text-purple-300 border border-purple-200 dark:border-purple-800")},m(t,c){b(t,e,c),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",d),a=!0)},p(e,r){t=e,2&r[0]&&c!==(c=t[218]+"")&&T(n,c)},d(t){t&&y(e),a=!1,l()}}}function Fb(t){let e,r,n,i,o,s,a,l,c=t[215].creator+"";function d(){return t[129](t[215])}return{c(){e=v("span"),r=w("Creator: "),n=w(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove creator filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-pink-400 dark:text-pink-500 hover:text-pink-600 dark:hover:text-pink-300 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 dark:bg-pink-900/40 text-pink-800 dark:text-pink-300 border border-pink-200 dark:border-pink-800")},m(t,c){b(t,e,c),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",d),a=!0)},p(e,r){t=e,2&r[0]&&c!==(c=t[215].creator+"")&&T(n,c)},d(t){t&&y(e),a=!1,l()}}}function Nb(t){let e,r,n,i,o,s,a,l,c=t[212]+"";function d(){return t[130](t[212])}return{c(){e=v("span"),r=w("Tag: "),n=w(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove tag filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-600")},m(t,c){b(t,e,c),m(e,r),m(e,n),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",d),a=!0)},p(e,r){t=e,2&r[0]&&c!==(c=t[212]+"")&&T(n,c)},d(t){t&&y(e),a=!1,l()}}}function Wb(t){let e,r,n,i,o,s,a,l="week"===t[1].dateRange.period?"This Week":"twoWeek"===t[1].dateRange.period?"This 2-Week":"month"===t[1].dateRange.period?"This Month":"threeMonth"===t[1].dateRange.period?"This 3-Month":"sixMonth"===t[1].dateRange.period?"This 6-Month":"year"===t[1].dateRange.period?"This Year":"older"===t[1].dateRange.period?"Older":"Custom Range";return{c(){e=v("span"),r=w("Date: "),n=w(l),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove date filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-blue-400 hover:text-blue-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800")},m(l,c){b(l,e,c),m(e,r),m(e,n),m(e,i),m(e,o),s||(a=M(o,"click",t[131]),s=!0)},p(t,e){2&e[0]&&l!==(l="week"===t[1].dateRange.period?"This Week":"twoWeek"===t[1].dateRange.period?"This 2-Week":"month"===t[1].dateRange.period?"This Month":"threeMonth"===t[1].dateRange.period?"This 3-Month":"sixMonth"===t[1].dateRange.period?"This 6-Month":"year"===t[1].dateRange.period?"This Year":"older"===t[1].dateRange.period?"Older":"Custom Range")&&T(n,l)},d(t){t&&y(e),s=!1,a()}}}function Hb(t){let e,r,n,i,o;return{c(){e=v("span"),r=w("Dead Links\n                      "),n=v("button"),n.innerHTML='<span class="sr-only">Remove dead links filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',A(n,"type","button"),A(n,"class","ml-1.5 inline-flex items-center justify-center text-red-400 hover:text-red-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800")},m(s,a){b(s,e,a),m(e,r),m(e,n),i||(o=M(n,"click",t[132]),i=!0)},d(t){t&&y(e),i=!1,o()}}}function Vb(t){let e,r,n,i,o;return{c(){e=v("span"),r=w("Stale\n                      "),n=v("button"),n.innerHTML='<span class="sr-only">Remove stale filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',A(n,"type","button"),A(n,"class","ml-1.5 inline-flex items-center justify-center text-orange-400 hover:text-orange-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800")},m(s,a){b(s,e,a),m(e,r),m(e,n),i||(o=M(n,"click",t[133]),i=!0)},d(t){t&&y(e),i=!1,o()}}}function qb(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,S,D,P,L,E=t[58].size+"";return{c(){e=v("div"),r=v("div"),i=v("div"),o=v("span"),s=w(E),a=w(" selected"),l=_(),c=v("button"),c.textContent="Select All",d=_(),u=v("button"),u.textContent="Deselect All",h=_(),g=v("div"),f=v("button"),p=w("Open Selected"),k=_(),C=v("button"),S=w("Delete Selected"),A(o,"class","text-sm text-blue-700 dark:text-blue-300"),A(c,"class","text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors"),A(u,"class","text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors"),A(i,"class","flex flex-wrap items-center gap-2 sm:gap-4"),f.disabled=x=0===t[58].size,A(f,"class","px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"),C.disabled=D=0===t[58].size,A(C,"class","px-4 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"),A(g,"class","flex gap-2 self-start sm:self-auto"),A(r,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"),A(e,"class","mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md")},m(n,y){b(n,e,y),m(e,r),m(r,i),m(i,o),m(o,s),m(o,a),m(i,l),m(i,c),m(i,d),m(i,u),m(r,h),m(r,g),m(g,f),m(f,p),m(g,k),m(g,C),m(C,S),P||(L=[M(c,"click",t[99]),M(u,"click",t[100]),M(f,"click",t[101]),M(C,"click",t[102])],P=!0)},p(t,e){134217728&e[1]&&E!==(E=t[58].size+"")&&T(s,E),134217728&e[1]&&x!==(x=0===t[58].size)&&(f.disabled=x),134217728&e[1]&&D!==(D=0===t[58].size)&&(C.disabled=D)},d(t){t&&y(e),P=!1,n(L)}}}function Ub(t){let e,r,n=[],i=new Map,o=it(t[3]);const s=t=>t[207].id;for(let e=0;e<o.length;e+=1){let r=lp(t,o,e),a=s(r);i.set(a,n[e]=Yb(a,r))}return{c(){e=v("div");for(let t=0;t<n.length;t+=1)n[t].c();A(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,i){b(t,e,i);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,null);r=!0},p(t,r){2056&r[0]&&(o=it(t[3]),tt(),n=st(n,r,s,1,t,o,i,e,ot,Yb,null,lp),et())},i(t){if(!r){for(let t=0;t<o.length;t+=1)rt(n[t]);r=!0}},o(t){for(let t=0;t<n.length;t+=1)nt(n[t]);r=!1},d(t){t&&y(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function Kb(t){let e,r,n,i=[],o=new Map,s=it(t[3]);const a=t=>t[207].id;for(let e=0;e<s.length;e+=1){let r=cp(t,s,e),n=a(r);o.set(n,i[e]=Qb(n,r))}return{c(){e=v("div"),r=v("div");for(let t=0;t<i.length;t+=1)i[t].c();A(r,"class","max-w-full overflow-x-auto"),A(e,"class","bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden border border-gray-200 dark:border-gray-700 transition-colors")},m(t,o){b(t,e,o),m(e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(r,null);n=!0},p(t,e){2056&e[0]|1048576&e[1]|3072&e[3]&&(s=it(t[3]),tt(),i=st(i,e,a,1,t,s,o,r,ot,Qb,null,cp),et())},i(t){if(!n){for(let t=0;t<s.length;t+=1)rt(i[t]);n=!0}},o(t){for(let t=0;t<i.length;t+=1)nt(i[t]);n=!1},d(t){t&&y(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function Yb(t,e){let r,n,i;return n=new wc({props:{bookmark:e[207],parsedSearchQuery:e[11]}}),{key:t,first:null,c(){r=C(),at(n.$$.fragment),this.first=r},m(t,e){b(t,r,e),lt(n,t,e),i=!0},p(t,r){e=t;const i={};8&r[0]&&(i.bookmark=e[207]),2048&r[0]&&(i.parsedSearchQuery=e[11]),n.$set(i)},i(t){i||(rt(n.$$.fragment,t),i=!0)},o(t){nt(n.$$.fragment,t),i=!1},d(t){t&&y(r),ct(n,t)}}}function Qb(t,e){let r,n,i;return n=new Ec({props:{bookmark:e[207],multiSelectMode:e[51],parsedSearchQuery:e[11]}}),n.$on("delete",e[103]),n.$on("enrich",e[104]),{key:t,first:null,c(){r=C(),at(n.$$.fragment),this.first=r},m(t,e){b(t,r,e),lt(n,t,e),i=!0},p(t,r){e=t;const i={};8&r[0]&&(i.bookmark=e[207]),1048576&r[1]&&(i.multiSelectMode=e[51]),2048&r[0]&&(i.parsedSearchQuery=e[11]),n.$set(i)},i(t){i||(rt(n.$$.fragment,t),i=!0)},o(t){nt(n.$$.fragment,t),i=!1},d(t){t&&y(r),ct(n,t)}}}function Jb(t){let e,r,n,i;function o(t,e){return t[4]?Gb:Xb}let s=o(t),a=s(t);return{c(){e=v("div"),r=v("button"),a.c(),r.disabled=t[4],A(r,"class","px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"),A(e,"class","mt-8 text-center")},m(o,s){b(o,e,s),m(e,r),a.m(r,null),n||(i=M(r,"click",t[61]),n=!0)},p(t,e){s!==(s=o(t))&&(a.d(1),a=s(t),a&&(a.c(),a.m(r,null))),16&e[0]&&(r.disabled=t[4])},d(t){t&&y(e),a.d(),n=!1,i()}}}function Xb(t){let e;return{c(){e=w("Load More")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Gb(t){let e;return{c(){e=v("div"),e.innerHTML='<div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>\n                      Loading...',A(e,"class","flex items-center")},m(t,r){b(t,e,r)},d(t){t&&y(e)}}}function Zb(e){let r;return{c(){r=v("p"),r.textContent="No bookmarks found"},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function ty(t){let e,r,n,i;return{c(){e=v("p"),r=w('No bookmarks found for "'),n=w(t[2]),i=w('"')},m(t,o){b(t,e,o),m(e,r),m(e,n),m(e,i)},p(t,e){4&e[0]&&T(n,t[2])},d(t){t&&y(e)}}}function ey(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,C,D,P,E,O,R,B,j,$,z,I,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z,tt,et,rt,nt,it,ot,st,at,lt,ct,dt,ut,ht,gt,ft,pt,mt,bt,yt,xt,vt,kt,wt,_t,Ct,Mt,St,At,Dt,Tt,Pt,Lt,Et,Ot,Rt,Bt,jt,$t,zt,It,Ft,Nt,Wt,Ht,Vt,qt,Ut,Kt,Yt,Qt,Jt,Xt,Gt,Zt,te,ee,re,ne,ie,oe,se,ae,le,ce,de,ue,he,ge,fe,pe,me,be,ye,xe,ve,ke,we,_e,Ce,Me,Se,Ae,De,Te,Pe,Le,Ee,Oe,Re,Be,je,$e,ze,Ie,Fe,Ne,We,He,Ve,qe,Ue,Ke,Ye,Qe,Je,Xe,Ge,Ze,tr,er,rr,nr,ir,or,sr,ar,lr,cr,dr,ur,hr,gr,fr,pr,mr,br,yr,xr,vr,kr,wr,_r,Cr,Mr,Sr,Ar=Math.round(100*t[43].similarity)+"",Dr=Math.round(100*(t[43].breakdown?.titleFuzzy||0))+"",Tr=Math.round(100*(t[43].breakdown?.titleWords||0))+"",Pr=Math.round(100*(t[43].breakdown?.descriptionWords||0))+"",Lr=Math.round(100*(t[43].breakdown?.keywordsOverlap||0))+"",Er=t[43].bookmark1.title+"",Or=t[43].bookmark1.url+"",Rr=(t[43].bookmark1.domain||"N/A")+"",Br=(t[43].bookmark1.category||"Uncategorized")+"",jr=(t[43].bookmark1.description||"No description")+"",$r=new Date(t[43].bookmark1.dateAdded).toLocaleDateString()+"",zr=t[43].coverage1.percentage.toFixed(0)+"",Ir=t[43].bookmark2.title+"",Fr=t[43].bookmark2.url+"",Nr=(t[43].bookmark2.domain||"N/A")+"",Wr=(t[43].bookmark2.category||"Uncategorized")+"",Hr=(t[43].bookmark2.description||"No description")+"",Vr=new Date(t[43].bookmark2.dateAdded).toLocaleDateString()+"",qr=t[43].coverage2.percentage.toFixed(0)+"";function Ur(t,e){return t[43].bookmark1.keywords?.length>0?ny:ry}let Kr=Ur(t),Yr=Kr(t);function Qr(t,e){return t[43].bookmark2.keywords?.length>0?sy:oy}let Jr=Qr(t),Xr=Jr(t);return{c(){e=v("div"),r=v("div"),i=v("div"),o=v("h3"),o.textContent="Compare Similar Bookmarks",s=_(),a=v("button"),a.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',l=_(),c=v("div"),d=v("div"),u=v("div"),h=v("span"),g=w(Ar),f=w("%"),p=_(),x=v("span"),x.textContent="Overall Similarity",k=_(),C=v("div"),D=v("h4"),D.textContent="Similarity Breakdown",P=_(),E=v("div"),O=v("div"),R=v("div"),B=w(Dr),j=w("%"),$=_(),z=v("div"),z.textContent="Title (Fuzzy)",I=_(),F=v("div"),N=v("div"),W=w(Tr),H=w("%"),V=_(),q=v("div"),q.textContent="Title (Words)",U=_(),K=v("div"),Y=v("div"),Q=w(Pr),J=w("%"),X=_(),G=v("div"),G.textContent="Description",Z=_(),tt=v("div"),et=v("div"),rt=w(Lr),nt=w("%"),it=_(),ot=v("div"),ot.textContent="Keywords",st=_(),at=v("div"),lt=v("div"),ct=v("div"),ct.innerHTML='<span class="text-sm font-medium text-blue-800 dark:text-blue-300">Bookmark 1</span>',dt=_(),ut=v("div"),ht=v("div"),gt=v("div"),gt.textContent="Title",ft=_(),pt=v("div"),mt=w(Er),bt=_(),yt=v("div"),xt=v("div"),xt.textContent="URL",vt=_(),kt=v("a"),wt=w(Or),Ct=_(),Mt=v("div"),St=v("div"),St.textContent="Domain",At=_(),Dt=v("div"),Tt=w(Rr),Pt=_(),Lt=v("div"),Et=v("div"),Et.textContent="Category",Ot=_(),Rt=v("div"),Bt=w(Br),jt=_(),$t=v("div"),zt=v("div"),zt.textContent="Description",It=_(),Ft=v("div"),Nt=w(jr),Wt=_(),Ht=v("div"),Vt=v("div"),Vt.textContent="Keywords",qt=_(),Ut=v("div"),Yr.c(),Kt=_(),Yt=v("div"),Qt=v("div"),Qt.textContent="Added",Jt=_(),Xt=v("div"),Gt=w($r),Zt=_(),te=v("div"),ee=v("div"),ee.textContent="Metadata Coverage",re=_(),ne=v("div"),ie=v("div"),oe=_(),se=v("div"),ae=w(zr),le=w("%"),ce=_(),de=v("div"),ue=v("a"),he=w("Open"),fe=_(),pe=v("button"),pe.textContent="Delete This",me=_(),be=v("div"),ye=v("div"),ye.innerHTML='<span class="text-sm font-medium text-green-800">Bookmark 2</span>',xe=_(),ve=v("div"),ke=v("div"),we=v("div"),we.textContent="Title",_e=_(),Ce=v("div"),Me=w(Ir),Se=_(),Ae=v("div"),De=v("div"),De.textContent="URL",Te=_(),Pe=v("a"),Le=w(Fr),Oe=_(),Re=v("div"),Be=v("div"),Be.textContent="Domain",je=_(),$e=v("div"),ze=w(Nr),Ie=_(),Fe=v("div"),Ne=v("div"),Ne.textContent="Category",We=_(),He=v("div"),Ve=w(Wr),qe=_(),Ue=v("div"),Ke=v("div"),Ke.textContent="Description",Ye=_(),Qe=v("div"),Je=w(Hr),Xe=_(),Ge=v("div"),Ze=v("div"),Ze.textContent="Keywords",tr=_(),er=v("div"),Xr.c(),rr=_(),nr=v("div"),ir=v("div"),ir.textContent="Added",or=_(),sr=v("div"),ar=w(Vr),lr=_(),cr=v("div"),dr=v("div"),dr.textContent="Metadata Coverage",ur=_(),hr=v("div"),gr=v("div"),fr=_(),pr=v("div"),mr=w(qr),br=w("%"),yr=_(),xr=v("div"),vr=v("a"),kr=w("Open"),_r=_(),Cr=v("button"),Cr.textContent="Delete This",A(o,"class","text-lg font-semibold text-gray-900 dark:text-gray-100"),A(a,"class","text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"),A(i,"class","sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex justify-between items-center z-10"),A(h,"class","text-2xl font-bold text-indigo-700 dark:text-indigo-400"),A(x,"class","ml-2 text-sm text-indigo-600 dark:text-indigo-300"),A(u,"class","inline-flex items-center px-4 py-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-full border border-indigo-200 dark:border-indigo-800/50"),A(d,"class","text-center mb-6"),A(D,"class","text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"),A(R,"class","text-lg font-bold text-blue-600 dark:text-blue-400"),A(z,"class","text-xs text-gray-500 dark:text-gray-400"),A(O,"class","text-center"),A(N,"class","text-lg font-bold text-green-600 dark:text-green-400"),A(q,"class","text-xs text-gray-500 dark:text-gray-400"),A(F,"class","text-center"),A(Y,"class","text-lg font-bold text-purple-600 dark:text-purple-400"),A(G,"class","text-xs text-gray-500 dark:text-gray-400"),A(K,"class","text-center"),A(et,"class","text-lg font-bold text-orange-600 dark:text-orange-400"),A(ot,"class","text-xs text-gray-500 dark:text-gray-400"),A(tt,"class","text-center"),A(E,"class","grid grid-cols-2 md:grid-cols-4 gap-3"),A(C,"class","mb-6 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-100 dark:border-gray-700/50"),A(ct,"class","bg-blue-50 dark:bg-blue-900/30 px-4 py-2 border-b border-blue-200 dark:border-blue-800/50"),A(gt,"class","text-xs text-gray-500 dark:text-gray-400 uppercase mb-1"),A(pt,"class","text-sm font-medium text-gray-900 dark:text-gray-100"),A(xt,"class","text-xs text-gray-500 dark:text-gray-400 uppercase mb-1"),A(kt,"href",_t=t[43].bookmark1.url),A(kt,"target","_blank"),A(kt,"rel","noopener"),A(kt,"class","text-sm text-blue-600 hover:underline break-all"),A(St,"class","text-xs text-gray-500 uppercase mb-1"),A(Dt,"class","text-sm"),A(Et,"class","text-xs text-gray-500 uppercase mb-1"),A(Rt,"class","text-sm"),A(zt,"class","text-xs text-gray-500 uppercase mb-1"),A(Ft,"class","text-sm text-gray-600"),A(Vt,"class","text-xs text-gray-500 uppercase mb-1"),A(Ut,"class","flex flex-wrap gap-1"),A(Qt,"class","text-xs text-gray-500 uppercase mb-1"),A(Xt,"class","text-sm"),A(ee,"class","text-xs text-gray-500 uppercase mb-1"),A(ie,"class","bg-blue-600 h-2 rounded-full"),L(ie,"width",t[43].coverage1.percentage+"%"),A(ne,"class","w-full bg-gray-200 rounded-full h-2"),A(se,"class","text-xs text-gray-400 mt-1"),A(ue,"href",ge=t[43].bookmark1.url),A(ue,"target","_blank"),A(ue,"rel","noopener"),A(ue,"class","flex-1 px-3 py-2 text-center text-sm bg-gray-100 rounded hover:bg-gray-200"),A(pe,"class","flex-1 px-3 py-2 text-center text-sm bg-red-600 text-white rounded hover:bg-red-700"),A(de,"class","pt-3 border-t border-gray-200 flex gap-2"),A(ut,"class","p-4 space-y-3"),A(lt,"class","border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-800"),A(ye,"class","bg-green-50 px-4 py-2 border-b border-green-200"),A(we,"class","text-xs text-gray-500 uppercase mb-1"),A(Ce,"class","text-sm font-medium"),A(De,"class","text-xs text-gray-500 uppercase mb-1"),A(Pe,"href",Ee=t[43].bookmark2.url),A(Pe,"target","_blank"),A(Pe,"rel","noopener"),A(Pe,"class","text-sm text-blue-600 hover:underline break-all"),A(Be,"class","text-xs text-gray-500 uppercase mb-1"),A($e,"class","text-sm"),A(Ne,"class","text-xs text-gray-500 uppercase mb-1"),A(He,"class","text-sm"),A(Ke,"class","text-xs text-gray-500 uppercase mb-1"),A(Qe,"class","text-sm text-gray-600"),A(Ze,"class","text-xs text-gray-500 uppercase mb-1"),A(er,"class","flex flex-wrap gap-1"),A(ir,"class","text-xs text-gray-500 uppercase mb-1"),A(sr,"class","text-sm"),A(dr,"class","text-xs text-gray-500 uppercase mb-1"),A(gr,"class","bg-green-600 h-2 rounded-full"),L(gr,"width",t[43].coverage2.percentage+"%"),A(hr,"class","w-full bg-gray-200 rounded-full h-2"),A(pr,"class","text-xs text-gray-400 mt-1"),A(vr,"href",wr=t[43].bookmark2.url),A(vr,"target","_blank"),A(vr,"rel","noopener"),A(vr,"class","flex-1 px-3 py-2 text-center text-sm bg-gray-100 rounded hover:bg-gray-200"),A(Cr,"class","flex-1 px-3 py-2 text-center text-sm bg-red-600 text-white rounded hover:bg-red-700"),A(xr,"class","pt-3 border-t border-gray-200 flex gap-2"),A(ve,"class","p-4 space-y-3"),A(be,"class","border border-gray-200 rounded-lg overflow-hidden"),A(at,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),A(c,"class","p-6"),A(r,"class","bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-gray-700 animate-in fade-in zoom-in duration-200"),A(e,"class","fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 transition-all backdrop-blur-sm")},m(n,y){b(n,e,y),m(e,r),m(r,i),m(i,o),m(i,s),m(i,a),m(r,l),m(r,c),m(c,d),m(d,u),m(u,h),m(h,g),m(h,f),m(u,p),m(u,x),m(c,k),m(c,C),m(C,D),m(C,P),m(C,E),m(E,O),m(O,R),m(R,B),m(R,j),m(O,$),m(O,z),m(E,I),m(E,F),m(F,N),m(N,W),m(N,H),m(F,V),m(F,q),m(E,U),m(E,K),m(K,Y),m(Y,Q),m(Y,J),m(K,X),m(K,G),m(E,Z),m(E,tt),m(tt,et),m(et,rt),m(et,nt),m(tt,it),m(tt,ot),m(c,st),m(c,at),m(at,lt),m(lt,ct),m(lt,dt),m(lt,ut),m(ut,ht),m(ht,gt),m(ht,ft),m(ht,pt),m(pt,mt),m(ut,bt),m(ut,yt),m(yt,xt),m(yt,vt),m(yt,kt),m(kt,wt),m(ut,Ct),m(ut,Mt),m(Mt,St),m(Mt,At),m(Mt,Dt),m(Dt,Tt),m(ut,Pt),m(ut,Lt),m(Lt,Et),m(Lt,Ot),m(Lt,Rt),m(Rt,Bt),m(ut,jt),m(ut,$t),m($t,zt),m($t,It),m($t,Ft),m(Ft,Nt),m(ut,Wt),m(ut,Ht),m(Ht,Vt),m(Ht,qt),m(Ht,Ut),Yr.m(Ut,null),m(ut,Kt),m(ut,Yt),m(Yt,Qt),m(Yt,Jt),m(Yt,Xt),m(Xt,Gt),m(ut,Zt),m(ut,te),m(te,ee),m(te,re),m(te,ne),m(ne,ie),m(te,oe),m(te,se),m(se,ae),m(se,le),m(ut,ce),m(ut,de),m(de,ue),m(ue,he),m(de,fe),m(de,pe),m(at,me),m(at,be),m(be,ye),m(be,xe),m(be,ve),m(ve,ke),m(ke,we),m(ke,_e),m(ke,Ce),m(Ce,Me),m(ve,Se),m(ve,Ae),m(Ae,De),m(Ae,Te),m(Ae,Pe),m(Pe,Le),m(ve,Oe),m(ve,Re),m(Re,Be),m(Re,je),m(Re,$e),m($e,ze),m(ve,Ie),m(ve,Fe),m(Fe,Ne),m(Fe,We),m(Fe,He),m(He,Ve),m(ve,qe),m(ve,Ue),m(Ue,Ke),m(Ue,Ye),m(Ue,Qe),m(Qe,Je),m(ve,Xe),m(ve,Ge),m(Ge,Ze),m(Ge,tr),m(Ge,er),Xr.m(er,null),m(ve,rr),m(ve,nr),m(nr,ir),m(nr,or),m(nr,sr),m(sr,ar),m(ve,lr),m(ve,cr),m(cr,dr),m(cr,ur),m(cr,hr),m(hr,gr),m(cr,fr),m(cr,pr),m(pr,mr),m(pr,br),m(ve,yr),m(ve,xr),m(xr,vr),m(vr,kr),m(xr,_r),m(xr,Cr),Mr||(Sr=[M(a,"click",t[93]),M(pe,"click",t[173]),M(Cr,"click",t[174]),M(r,"click",S(t[115])),M(e,"click",t[93])],Mr=!0)},p(t,e){4096&e[1]&&Ar!==(Ar=Math.round(100*t[43].similarity)+"")&&T(g,Ar),4096&e[1]&&Dr!==(Dr=Math.round(100*(t[43].breakdown?.titleFuzzy||0))+"")&&T(B,Dr),4096&e[1]&&Tr!==(Tr=Math.round(100*(t[43].breakdown?.titleWords||0))+"")&&T(W,Tr),4096&e[1]&&Pr!==(Pr=Math.round(100*(t[43].breakdown?.descriptionWords||0))+"")&&T(Q,Pr),4096&e[1]&&Lr!==(Lr=Math.round(100*(t[43].breakdown?.keywordsOverlap||0))+"")&&T(rt,Lr),4096&e[1]&&Er!==(Er=t[43].bookmark1.title+"")&&T(mt,Er),4096&e[1]&&Or!==(Or=t[43].bookmark1.url+"")&&T(wt,Or),4096&e[1]&&_t!==(_t=t[43].bookmark1.url)&&A(kt,"href",_t),4096&e[1]&&Rr!==(Rr=(t[43].bookmark1.domain||"N/A")+"")&&T(Tt,Rr),4096&e[1]&&Br!==(Br=(t[43].bookmark1.category||"Uncategorized")+"")&&T(Bt,Br),4096&e[1]&&jr!==(jr=(t[43].bookmark1.description||"No description")+"")&&T(Nt,jr),Kr===(Kr=Ur(t))&&Yr?Yr.p(t,e):(Yr.d(1),Yr=Kr(t),Yr&&(Yr.c(),Yr.m(Ut,null))),4096&e[1]&&$r!==($r=new Date(t[43].bookmark1.dateAdded).toLocaleDateString()+"")&&T(Gt,$r),4096&e[1]&&L(ie,"width",t[43].coverage1.percentage+"%"),4096&e[1]&&zr!==(zr=t[43].coverage1.percentage.toFixed(0)+"")&&T(ae,zr),4096&e[1]&&ge!==(ge=t[43].bookmark1.url)&&A(ue,"href",ge),4096&e[1]&&Ir!==(Ir=t[43].bookmark2.title+"")&&T(Me,Ir),4096&e[1]&&Fr!==(Fr=t[43].bookmark2.url+"")&&T(Le,Fr),4096&e[1]&&Ee!==(Ee=t[43].bookmark2.url)&&A(Pe,"href",Ee),4096&e[1]&&Nr!==(Nr=(t[43].bookmark2.domain||"N/A")+"")&&T(ze,Nr),4096&e[1]&&Wr!==(Wr=(t[43].bookmark2.category||"Uncategorized")+"")&&T(Ve,Wr),4096&e[1]&&Hr!==(Hr=(t[43].bookmark2.description||"No description")+"")&&T(Je,Hr),Jr===(Jr=Qr(t))&&Xr?Xr.p(t,e):(Xr.d(1),Xr=Jr(t),Xr&&(Xr.c(),Xr.m(er,null))),4096&e[1]&&Vr!==(Vr=new Date(t[43].bookmark2.dateAdded).toLocaleDateString()+"")&&T(ar,Vr),4096&e[1]&&L(gr,"width",t[43].coverage2.percentage+"%"),4096&e[1]&&qr!==(qr=t[43].coverage2.percentage.toFixed(0)+"")&&T(mr,qr),4096&e[1]&&wr!==(wr=t[43].bookmark2.url)&&A(vr,"href",wr)},d(t){t&&y(e),Yr.d(),Xr.d(),Mr=!1,n(Sr)}}}function ry(e){let r;return{c(){r=v("span"),r.textContent="No keywords",A(r,"class","text-sm text-gray-400")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function ny(t){let e,r=it(t[43].bookmark1.keywords.slice(0,5)),n=[];for(let e=0;e<r.length;e+=1)n[e]=iy(Uf(t,r,e));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=C()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);b(t,e,r)},p(t,i){if(4096&i[1]){let o;for(r=it(t[43].bookmark1.keywords.slice(0,5)),o=0;o<r.length;o+=1){const s=Uf(t,r,o);n[o]?n[o].p(s,i):(n[o]=iy(s),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&y(e),x(n,t)}}}function iy(t){let e,r,n=t[202]+"";return{c(){e=v("span"),r=w(n),A(e,"class","px-2 py-0.5 bg-gray-100 text-xs rounded")},m(t,n){b(t,e,n),m(e,r)},p(t,e){4096&e[1]&&n!==(n=t[202]+"")&&T(r,n)},d(t){t&&y(e)}}}function oy(e){let r;return{c(){r=v("span"),r.textContent="No keywords",A(r,"class","text-sm text-gray-400")},m(t,e){b(t,r,e)},p:t,d(t){t&&y(r)}}}function sy(t){let e,r=it(t[43].bookmark2.keywords.slice(0,5)),n=[];for(let e=0;e<r.length;e+=1)n[e]=ay(qf(t,r,e));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=C()},m(t,r){for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,r);b(t,e,r)},p(t,i){if(4096&i[1]){let o;for(r=it(t[43].bookmark2.keywords.slice(0,5)),o=0;o<r.length;o+=1){const s=qf(t,r,o);n[o]?n[o].p(s,i):(n[o]=ay(s),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(t){t&&y(e),x(n,t)}}}function ay(t){let e,r,n=t[202]+"";return{c(){e=v("span"),r=w(n),A(e,"class","px-2 py-0.5 bg-gray-100 text-xs rounded")},m(t,n){b(t,e,n),m(e,r)},p(t,e){4096&e[1]&&n!==(n=t[202]+"")&&T(r,n)},d(t){t&&y(e)}}}function ly(t){let e,r,i,o,s,a,l,c,d,u,h,g,f,p,x,k,S,D,T,P,L,E,O,R,B,j,$,z,I,F,N,W,H,V,q,U,K,Y,Q;function J(t,e){return t[6]?yp:bp}let X=J(t),G=X(t);const Z=[wp,kp,vp,xp],it=[];function ot(t,e){return"bookmarks"===t[7]?0:"insights"===t[7]?1:"health"===t[7]?2:"dataExplorer"===t[7]?3:-1}~(H=ot(t))&&(V=it[H]=Z[H](t));let st=t[43]&&ey(t);return{c(){e=_(),r=v("div"),i=v("header"),o=v("div"),s=v("div"),a=v("div"),l=v("h1"),l.textContent="Bookmark Insight",c=_(),d=v("button"),d.innerHTML='<svg class="w-4 h-4 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>\n            Export',u=_(),h=v("div"),g=v("button"),G.c(),p=_(),x=v("nav"),k=v("button"),S=w("Bookmarks"),T=_(),P=v("button"),L=w("Insights"),O=_(),R=v("button"),B=w("Health"),$=_(),z=v("button"),I=w(" Data"),N=_(),W=v("div"),V&&V.c(),q=_(),st&&st.c(),U=C(),Vf.title="Bookmark Insight Dashboard",A(l,"class","text-2xl font-bold text-gray-900 dark:text-white"),A(d,"class","px-3 py-1 text-sm text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700"),A(d,"title","Export bookmarks to JSON"),A(a,"class","flex items-center space-x-4"),A(g,"class","p-2 rounded-md text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"),A(g,"title",f=t[6]?"Switch to light mode":"Switch to dark mode"),A(k,"class",D="px-4 py-2 rounded-md text-sm font-medium transition-colors "+("bookmarks"===t[7]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),A(P,"class",E="px-4 py-2 rounded-md text-sm font-medium transition-colors "+("insights"===t[7]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),A(R,"class",j="px-4 py-2 rounded-md text-sm font-medium transition-colors "+("health"===t[7]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),A(z,"class",F="px-4 py-2 rounded-md text-sm font-medium transition-colors "+("dataExplorer"===t[7]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")),A(x,"class","flex space-x-4"),A(h,"class","flex items-center space-x-4"),A(s,"class","flex justify-between items-center py-4"),A(o,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),A(i,"class","bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"),A(W,"class","max-w-[96rem] mx-auto px-4 sm:px-6 lg:px-8 py-8"),A(r,"class","min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors")},m(n,f){b(n,e,f),b(n,r,f),m(r,i),m(i,o),m(o,s),m(s,a),m(a,l),m(a,c),m(a,d),m(s,u),m(s,h),m(h,g),G.m(g,null),m(h,p),m(h,x),m(x,k),m(k,S),m(x,T),m(x,P),m(P,L),m(x,O),m(x,R),m(R,B),m(x,$),m(x,z),m(z,I),m(r,N),m(r,W),~H&&it[H].m(W,null),b(n,q,f),st&&st.m(n,f),b(n,U,f),K=!0,Y||(Q=[M(d,"click",t[111]),M(g,"click",t[59]),M(k,"click",t[116]),M(P,"click",t[117]),M(R,"click",t[118]),M(z,"click",t[119])],Y=!0)},p(t,e){X!==(X=J(t))&&(G.d(1),G=X(t),G&&(G.c(),G.m(g,null))),(!K||64&e[0]&&f!==(f=t[6]?"Switch to light mode":"Switch to dark mode"))&&A(g,"title",f),(!K||128&e[0]&&D!==(D="px-4 py-2 rounded-md text-sm font-medium transition-colors "+("bookmarks"===t[7]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")))&&A(k,"class",D),(!K||128&e[0]&&E!==(E="px-4 py-2 rounded-md text-sm font-medium transition-colors "+("insights"===t[7]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")))&&A(P,"class",E),(!K||128&e[0]&&j!==(j="px-4 py-2 rounded-md text-sm font-medium transition-colors "+("health"===t[7]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")))&&A(R,"class",j),(!K||128&e[0]&&F!==(F="px-4 py-2 rounded-md text-sm font-medium transition-colors "+("dataExplorer"===t[7]?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300")))&&A(z,"class",F);let r=H;H=ot(t),H===r?~H&&it[H].p(t,e):(V&&(tt(),nt(it[r],1,1,()=>{it[r]=null}),et()),~H?(V=it[H],V?V.p(t,e):(V=it[H]=Z[H](t),V.c()),rt(V,1),V.m(W,null)):V=null),t[43]?st?st.p(t,e):(st=ey(t),st.c(),st.m(U.parentNode,U)):st&&(st.d(1),st=null)},i(t){K||(rt(V),K=!0)},o(t){nt(V),K=!1},d(t){t&&(y(e),y(r),y(q),y(U)),G.d(),~H&&it[H].d(),st&&st.d(t),Y=!1,n(Q)}}}function cy(){const t=window.location.hash.replace("#","");return["bookmarks","insights","health","dataExplorer"].includes(t)?t:"bookmarks"}function dy(t){t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function uy(t,e,r){let n,i,o;c(t,Gl,t=>r(58,n=t)),c(t,Jl,t=>r(1,i=t)),c(t,Xl,t=>r(2,o=t)),No.register(...Fa);let s,a=[],l=!0,d=null,u=!1,h="undefined"!=typeof window?cy():"bookmarks",g=0,f=0,p=!1,m="date_desc",b=null,y=!1,x=null,v=null,k=null,w=null,_=null,C=null,M=null,S=null,A=null,T=null,P=[],L=[],E=[],R=[],B=!1,j=null,$=null,I=null,N=!1,H=null,V=null,q=[],U=50,K=5,Y=!1,Q=!1,J=null,X=null,G=[],Z=[],tt=null,et=null,rt=null,nt=!1,it=!1,ot=!1,st=!1,at=!1,lt=!1,ct=10,dt=10,ut=10,ht=new Set,gt=[],ft=null,pt=null,mt="duplicates",bt=null,yt=null,xt={deadLinks:10,oldUnused:10,genericTitles:10,temporaryUrls:10,lowScore:10},vt=!1,kt=null,wt=!1,_t=!1,Ct=[],Mt=!1,St=null,At=null,Dt=!1,Tt="list";z(async()=>{try{const t=await chrome.storage.local.get("darkMode");r(6,u=t.darkMode||!1),dy(u),window.addEventListener("hashchange",()=>{const t=cy();t!==h&&$t(t,!1)}),window.location.hash||(window.location.hash=h),Rt(0,!1),Ql.invalidate(),"insights"===h?await zt():"health"===h&&await It()}catch(t){r(5,d=t.message)}finally{r(4,l=!1)}chrome.runtime.onMessage.addListener((t,e,n)=>{if("enrichmentProgress"===t.action&&t.progress){r(21,V=t.progress);const e={timestamp:Date.now(),...t.progress};r(22,q=[...q,e]),q.length>100&&r(22,q=q.slice(-100))}else if("bookmarksChanged"===t.action){if(y)return;Tf=null,Pf=!1,Ql.invalidate(),"bookmarks"===h&&Rt(0,!1),Pl().then(t=>r(16,j=t)),s&&s.refresh&&s.refresh()}})});const Pt=function(t,e=300){let r;return function(...n){clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),t(...n)},e)}}(()=>{Rt(0,!1)},300);let Lt=o,Et=JSON.stringify(i),Ot=m;async function Rt(t,e){e||r(4,l=!0);try{const s=o||((n=i).domains.length>0||n.folders.length>0||n.topics.length>0||n.types.length>0||n.creators.length>0||n.tags&&n.tags.length>0||n.deadLinks||n.stale||null!==n.dateRange||null!==n.readingTimeRange||null!==n.qualityScoreRange||null!==n.hasPublishedDate),l={limit:50,offset:50*t,sortBy:m,computeStats:s};await new Promise(t=>requestAnimationFrame(t));const c=await jf(o,i,l);r(3,a=e?[...a,...c.results]:c.results),r(8,f=c.total),r(9,p=c.hasMore),r(11,b=c.parsedQuery),r(17,$=s?c.stats:null)}catch(t){console.error("Error loading bookmarks:",t),r(5,d=t.message)}finally{r(4,l=!1)}var n}function Bt(t){const e=t.detail.query;Xl.set(e)}function jt(t){r(0,m=t)}async function $t(t,e=!0){r(7,h=t),r(4,l=!0),e&&"undefined"!=typeof window&&(window.location.hash=t);try{"bookmarks"===t?(g=0,await Rt(0,!1)):"insights"===t?await zt():"health"===t&&await It()}catch(t){r(5,d=t.message)}finally{r(4,l=!1)}}async function zt(){try{const[t,e,r,n,i,o,s,a,l,c,d,u,h]=await Promise.all([fl(),pl(),Sl(),Bl(),Cl(),Ml(),jl(),$l(),zl(),rh(),nh(),ih(),oh()]);kt=a,G=c,Z=d,tt=u,et=h,setTimeout(()=>{const a=document.getElementById("domainChart");a&&(x&&x.destroy(),x=new No(a,{type:"bar",data:{labels:t.map(([t])=>t),datasets:[{label:"Bookmarks",data:t.map(([,t])=>t),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top 10 Most Bookmarked Domains"}},scales:{y:{beginAtZero:!0}}}}));const u=document.getElementById("domainDistributionChart");u&&(S&&S.destroy(),S=new No(u,{type:"pie",data:{labels:l.map(t=>t.domain),datasets:[{data:l.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Distribution by Domain"},tooltip:{callbacks:{label(t){const e=l[t.dataIndex];return`${e.domain}: ${e.count} (${e.percentage}%)`}}}}}}));const h=document.getElementById("activityChart");h&&(v&&v.destroy(),v=new No(h,{type:"line",data:{labels:e.map(([t])=>t),datasets:[{label:"Bookmarks Added",data:e.map(([,t])=>t),fill:!1,borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Activity Timeline"}},scales:{y:{beginAtZero:!0}}}}));const g=document.getElementById("wordCloudChart");g&&(k&&k.destroy(),k=new No(g,{type:"bar",data:{labels:r.map(([t])=>t),datasets:[{label:"Frequency",data:r.map(([,t])=>t),backgroundColor:"rgba(168, 85, 247, 0.5)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:1}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Most Frequent Words in Bookmark Titles"}},scales:{x:{beginAtZero:!0}}}}));const f=document.getElementById("titlePatternsChart");f&&(w&&w.destroy(),w=new No(f,{type:"doughnut",data:{labels:n.map(([t])=>t),datasets:[{data:n.map(([,t])=>t),backgroundColor:["#F59E0B","#10B981","#3B82F6","#EF4444","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Common Title Patterns & Types"}}}}));const p=document.getElementById("ageDistributionChart");p&&(_&&_.destroy(),_=new No(p,{type:"bar",data:{labels:i.map(([t])=>t),datasets:[{label:"Bookmarks",data:i.map(([,t])=>t),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Age Distribution"}},scales:{y:{beginAtZero:!0}}}}));const m=document.getElementById("creationPatternsChart");m&&(C&&C.destroy(),C=new No(m,{type:"radar",data:{labels:o.daily.map(([t])=>t),datasets:[{label:"Bookmarks Created",data:o.daily.map(([,t])=>t),backgroundColor:"rgba(245, 158, 11, 0.2)",borderColor:"rgba(245, 158, 11, 1)",borderWidth:2}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Creation Patterns by Day of Week"}},scales:{r:{beginAtZero:!0}}}}));const b=document.getElementById("urlPatternsChart");b&&(M&&M.destroy(),M=new No(b,{type:"bar",data:{labels:s.topLevelDomains.map(([t])=>`.${t}`),datasets:[{label:"Count",data:s.topLevelDomains.map(([,t])=>t),backgroundColor:"rgba(236, 72, 153, 0.5)",borderColor:"rgba(236, 72, 153, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top Level Domains Distribution"}},scales:{y:{beginAtZero:!0}}}}));const y=document.getElementById("domainHierarchyChart");if(y&&c.length>0){A&&A.destroy();const t=c.slice(0,15);A=new No(y,{type:"bar",data:{labels:t.map(t=>t.name),datasets:[{label:"Bookmarks",data:t.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4","#F43F5E","#22C55E","#A855F7","#0EA5E9"]}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Domain Hierarchy (Top 15 Domains)"},legend:{display:!1}},scales:{x:{beginAtZero:!0}}}})}const D=document.getElementById("freshnessChart");D&&d.length>0&&(T&&T.destroy(),T=new No(D,{type:"doughnut",data:{labels:d.map(t=>t.period),datasets:[{data:d.map(t=>t.count),backgroundColor:["#22C55E","#84CC16","#F59E0B","#F97316","#EF4444"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Freshness"}}}}))},100)}catch(t){console.error("Error loading insights:",t)}}async function It(){r(35,ct=10),r(36,dt=10),r(37,ut=10);try{r(30,nt=!0),it=!0,r(15,B=!0),r(31,ot=!0),r(16,j=await Pl()),await Ft(),Al().then(t=>{r(12,P=t),r(30,nt=!1)}).catch(t=>{console.error("Error loading duplicates:",t),r(30,nt=!1)}),Il().then(t=>{r(14,R=t),r(15,B=!1)}).catch(t=>{console.error("Error loading dead links:",t),r(15,B=!1)}),sh().then(t=>{r(29,rt=t)}).catch(t=>{console.error("Error loading dead link insights:",t)}),Tl().then(t=>{r(13,L=t),r(31,ot=!1)}).catch(t=>{console.error("Error loading malformed URLs:",t),r(31,ot=!1)}),it=!1,E=[],r(34,lt=!0),Hf({minSimilarity:.4,maxPairs:100,prioritizeSameDomain:!0,forceRefresh:!1,useCache:!0}).then(t=>{t.fromCache&&t.pairs.length>0&&(r(39,gt=t.pairs),r(40,ft=t.stats),r(41,pt={fromCache:t.fromCache,cachedAt:t.cachedAt,cacheAge:t.cacheAge})),r(34,lt=!1)}).catch(t=>{console.error("Error loading cached similar pairs:",t),r(34,lt=!1)}),r(33,at=!1)}catch(t){console.error("Error loading health data:",t)}}async function Ft(){try{const t=await chrome.runtime.sendMessage({action:"getEnrichmentStatus"});t.success&&r(18,I=t);const e=await dl();e&&(r(23,U=e.enrichmentBatchSize||50),r(24,K=e.enrichmentConcurrency||5))}catch(t){console.error("Error loading enrichment status:",t)}}async function Nt(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted dead link: ${t}`)):console.log(`Bookmark ${t} no longer exists`),r(14,R=R.filter(e=>e.id!==t)),rt&&r(29,rt={...rt,total:rt.total-1}),await gl(t)}catch(t){console.error("Error deleting dead link:",t)}}let Wt=!1,Ht=null,Vt=null,qt=50,Ut=3;async function Kt(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0&&(await chrome.bookmarks.remove(t),console.log(`Deleted malformed URL: ${t}`)),r(13,L=L.filter(e=>e.id!==t)),await gl(t)}catch(t){console.error("Error deleting malformed URL:",t)}}async function Yt(t,e){try{const n=await chrome.bookmarks.get([t]);n&&n.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted bookmark: ${t}`)):console.log(`Bookmark ${t} no longer exists`),await gl(t),r(12,P=P.map((r,n)=>n===e?r.filter(e=>e.id!==t):r).filter(t=>t.length>1)),ht.delete(t),r(38,ht),Ql.invalidate()}catch(t){console.error("Error deleting bookmark:",t),r(30,nt=!0),Al().then(t=>{r(12,P=t),r(30,nt=!1)})}}function Qt(t){ht.has(t)?ht.delete(t):ht.add(t),r(38,ht)}async function Jt(t=!1){r(34,lt=!0),r(39,gt=[]),r(40,ft=null),r(41,pt=null);try{const e=await Hf({minSimilarity:.4,maxPairs:100,prioritizeSameDomain:!0,forceRefresh:t});r(39,gt=e.pairs),r(40,ft=e.stats),r(41,pt={fromCache:e.fromCache,cachedAt:e.cachedAt,cacheAge:e.cacheAge})}catch(t){console.error("Error running smart similar detection:",t)}finally{r(34,lt=!1)}}function Xt(t){r(43,bt=t)}function Gt(){r(43,bt=null)}async function Zt(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0&&await chrome.bookmarks.remove(t),await gl(t),r(39,gt=gt.filter(e=>e.bookmark1.id!==t&&e.bookmark2.id!==t)),ft&&r(40,ft={...ft,total:gt.length}),!bt||bt.bookmark1.id!==t&&bt.bookmark2.id!==t||Gt(),Ql.invalidate()}catch(t){console.error("Error deleting bookmark from comparison:",t)}}function te(t){r(45,xt={...xt,[t]:xt[t]+10})}async function ee(t,e){try{const n=await chrome.bookmarks.get([t]);n&&n.length>0&&await chrome.bookmarks.remove(t),await gl(t),yt&&r(44,yt={...yt,[e]:yt[e].filter(e=>e.id!==t),summary:{...yt.summary,total:yt.summary.total-1,byCategory:{...yt.summary.byCategory,[e]:yt.summary.byCategory[e]-1}}})}catch(t){console.error("Error deleting useless bookmark:",t)}}async function re(t){if(!yt||!yt[t]||0===yt[t].length)return;const e=yt[t].length;if(confirm(`Are you sure you want to delete all ${e} bookmarks in "${t}"? This action cannot be undone.`)){r(46,vt=!0),y=!0;try{const n=yt[t].map(t=>t.id);await Rl(n),r(44,yt={...yt,[t]:[],summary:{...yt.summary,total:yt.summary.total-e,byCategory:{...yt.summary.byCategory,[t]:0}}})}catch(t){console.error("Error deleting useless bookmarks:",t)}finally{r(46,vt=!1),setTimeout(()=>{y=!1},500)}}}async function ne(t){if(confirm(`Restore auto-backup from ${Ct[t].createdAt}?\n\nThis will replace your current data.`)){r(48,_t=!0);try{(await Ul(t)).success&&(alert("Restore complete! Refreshing..."),window.location.reload())}catch(t){console.error("Error restoring auto-backup:",t),alert("Error: "+t.message)}finally{r(48,_t=!1)}}}return t.$$.update=()=>{if(7&t.$$.dirty[0]|3670016&t.$$.dirty[3]){const t=JSON.stringify(i)!==Et,e=o!==Lt;e&&(o&&o.trim().length>0?"date_desc"===m&&r(0,m="relevance"):"relevance"===m&&r(0,m="date_desc"));(t||e||m!==Ot)&&(r(112,Lt=o),r(113,Et=JSON.stringify(i)),r(114,Ot=m),g=0,Pt())}},[m,i,o,a,l,d,u,h,f,p,s,b,P,L,R,B,j,$,I,N,H,V,q,U,K,Y,Q,J,X,rt,nt,ot,st,at,lt,ct,dt,ut,ht,gt,ft,pt,mt,bt,yt,xt,vt,wt,_t,Ct,At,Dt,Tt,Wt,Ht,Vt,qt,Ut,n,async function(){r(6,u=!u),dy(u),await chrome.storage.local.set({darkMode:u})},Rt,function(){p&&!l&&(g++,Rt(g,!0))},Bt,jt,$t,function(t){const{category:e}=t.detail;Xl.set(`category:${e}`),r(7,h="bookmarks")},function(t){const{domain:e}=t.detail;Jl.addFilter("domains",e),r(7,h="bookmarks")},async function(t){Xl.set("accessed:yes"),r(7,h="bookmarks")},async function(){Jl.setFilter("stale",!0),r(7,h="bookmarks")},async function(){r(7,h="health"),await It()},async function(){searchQuery="enriched:no",r(7,h="bookmarks"),await Bt(searchQuery)},async function(){searchQuery="category:uncategorized",r(7,h="bookmarks"),await Bt(searchQuery)},function(){r(7,h="health"),It()},async function(t){const{ids:e}=t.detail;if(e&&0!==e.length&&confirm(`Are you sure you want to delete ${e.length} bookmark(s)?`))try{y=!0,await Rl(e),await Rt(0,!1)}catch(t){console.error("Error deleting bookmarks:",t),alert("Failed to delete some bookmarks. Please try again.")}finally{setTimeout(()=>{y=!1},500)}},async function(t){const{query:e}=t.detail;Xl.set(e),r(7,h="bookmarks")},async function(){r(19,N=!0),r(20,H=null),r(21,V=null),r(22,q=[]);try{console.log("Creating auto-backup before enrichment..."),await Vl();const t=await chrome.runtime.sendMessage({action:"runEnrichment",batchSize:U,concurrency:K,force:Y});t.success?(r(20,H=t.result),await Ft()):r(20,H={error:t.error})}catch(t){console.error("Error running enrichment:",t),r(20,H={error:t.message})}finally{r(19,N=!1)}},async function(){r(26,Q=!0),r(27,J=null),r(28,X=null);try{const{batchReanalyze:t}=await Promise.resolve().then(function(){return wy}),{getAllBookmarks:e}=await Promise.resolve().then(function(){return Kl}),n=await e();console.log(`Starting deep analysis on ${n.length} bookmarks`);const i=await t(n,t=>{r(27,J={current:t.current,total:t.total,completed:t.completed,title:t.title,status:t.status})});r(28,X={processed:i.processed,analyzed:i.success,skipped:i.skipped,failed:i.failed}),console.log("Deep analysis complete:",X),await Rt(0,!1)}catch(t){console.error("Error during deep analysis:",t),r(28,X={error:t.message})}finally{r(26,Q=!1)}},function(){r(35,ct+=10)},function(){r(36,dt+=10)},function(){r(37,ut+=10)},Nt,async function(){if(0===R.length)return;if(confirm(`Are you sure you want to delete all ${R.length} dead links? This action cannot be undone.`)){r(32,st=!0),y=!0;try{const t=R.map(t=>t.id),e=await Rl(t);console.log(`Deleted ${e.success} dead links, ${e.errors.length} errors`),r(14,R=[]),r(29,rt=null),sh().then(t=>{r(29,rt=t)})}catch(t){console.error("Error deleting all dead links:",t),Il().then(t=>{r(14,R=t)})}finally{r(32,st=!1),setTimeout(()=>{y=!1},500)}}},async function(){if(0===R.length)return;const t=qt>0&&qt<R.length?qt:R.length,e=R.length-t;if(!confirm(`Re-check ${t} dead links?${e>0?` (${e} will remain for next batch)`:""}\n\nThis will attempt to fetch each URL again to verify if it's still unreachable.`))return;r(53,Wt=!0),r(54,Ht=null),r(55,Vt=null);const n=t=>{"reEnrichProgress"===t.action&&t.progress&&r(54,Ht=t.progress)};chrome.runtime.onMessage.addListener(n);try{const t=await chrome.runtime.sendMessage({action:"reEnrichDeadLinks",batchSize:qt,concurrency:Ut});if(t.success){r(55,Vt=t.results);const e=await Il();r(14,R=e);const n=await sh();r(29,rt=n)}else console.error("Error re-enriching dead links:",t.error),r(55,Vt={error:t.error})}catch(t){console.error("Error re-enriching dead links:",t),r(55,Vt={error:t.message})}finally{r(53,Wt=!1),chrome.runtime.onMessage.removeListener(n)}},Kt,async function(){if(0===L.length)return;if(!confirm(`Are you sure you want to delete all ${L.length} invalid URL bookmarks? This action cannot be undone.`))return;let t=0;for(const e of L)try{const r=await chrome.bookmarks.get([e.id]);r&&r.length>0&&(await chrome.bookmarks.remove(e.id),t++),await gl(e.id)}catch(t){console.error(`Error deleting malformed URL ${e.id}:`,t)}r(13,L=[]),console.log(`Deleted ${t} invalid URL bookmarks`)},Yt,Qt,function(){ht.clear(),P.forEach(t=>{t.slice(1).forEach(t=>{ht.add(t.id)})}),r(38,ht)},function(){ht.clear(),r(38,ht)},async function(){if(0===ht.size)return;const t=Array.from(ht);let e=0;for(const r of t)try{const t=await chrome.bookmarks.get([r]);t&&t.length>0&&(await chrome.bookmarks.remove(r),e++)}catch(t){console.error(`Error deleting bookmark ${r}:`,t)}r(12,P=P.map(t=>t.filter(t=>!ht.has(t.id))).filter(t=>t.length>1)),ht.clear(),r(38,ht),console.log(`Deleted ${e} duplicate bookmarks`)},async function(){let t=0;for(const e of P)for(const r of e.slice(1))try{const e=await chrome.bookmarks.get([r.id]);e&&e.length>0&&(await chrome.bookmarks.remove(r.id),t++)}catch(t){console.error(`Error deleting bookmark ${r.id}:`,t)}r(12,P=[]),ht.clear(),r(38,ht),console.log(`Deleted ${t} duplicate bookmarks`)},Jt,Xt,Gt,Zt,te,ee,re,function(){r(51,Dt=!Dt),Dt||Gl.clear()},function(){Gl.selectAll(a.map(t=>t.id))},function(){Gl.clear()},function(){if(0===n.size)return;const t=Array.from(n),e=a.filter(e=>t.includes(e.id));e.length>20&&!confirm(`You are about to open ${e.length} URLs. This may slow down your browser. Continue?`)||e.forEach((t,e)=>{const r=0===e;chrome.tabs.create({url:t.url,active:r})})},async function(){if(0!==n.size&&confirm(`Are you sure you want to delete ${n.size} bookmark(s)?`)){y=!0;try{const t=Array.from(n),e=await Rl(t);e.errors&&e.errors.length>0&&console.error("Some bookmarks could not be deleted:",e.errors),r(3,a=a.filter(e=>!t.includes(e.id)));const i=e.success?t.length:0;r(8,f=Math.max(0,f-i)),Ql.invalidate(),Gl.clear(),r(51,Dt=!1),s&&s.refresh&&s.refresh(),Pl().then(t=>r(16,j=t))}catch(t){console.error("Error deleting bookmarks:",t),alert("Error deleting bookmarks. Please try again.")}finally{setTimeout(()=>{y=!1},500)}}},async function(t){const{bookmarkId:e}=t.detail;if(confirm("Are you sure you want to delete this bookmark?"))try{await gl(e),r(3,a=a.filter(t=>t.id!==e)),r(8,f=Math.max(0,f-1)),Ql.invalidate(),s&&s.refresh&&s.refresh()}catch(t){console.error("Error deleting bookmark:",t),alert("Error deleting bookmark. Please try again.")}},async function(t){const{bookmarkId:e}=t.detail;try{const t=await chrome.runtime.sendMessage({action:"enrichSpecificBookmarks",ids:[e]});t.success?await Rt(g,!1):(console.error("Enrichment failed:",t.error),alert("Enrichment failed: "+t.error))}catch(t){console.error("Error enriching bookmark:",t),alert("Error enriching bookmark. Please try again.")}},function(){r(52,Tt="list"===Tt?"card":"list")},async function(){r(47,wt=!0);try{const t=await Nl();t.success&&alert(`Backup saved: ${t.filename}\n\nContains:\n- ${t.metadata.totalBookmarks} bookmarks\n- ${t.metadata.enrichedCount} enriched\n- ${t.metadata.categorizedCount} categorized`)}catch(t){console.error("Error creating backup:",t),alert("Error creating backup: "+t.message)}finally{r(47,wt=!1)}},async function(){if(St)if(At&&At.valid){if(confirm(`Restore backup from ${At.createdAt}?\n\nThis will replace your current data with:\n- ${At.metadata.totalBookmarks} bookmarks\n- ${At.metadata.enrichedCount} enriched\n\nYour current data will be auto-backed up first.`)){r(48,_t=!0);try{await Vl();const t=await St.text(),e=JSON.parse(t),n=await Wl(e);n.success&&(alert(`Restore complete!\n\n- ${n.results.bookmarksRestored} bookmarks restored\n- ${n.results.similaritiesRestored} similarities restored\n\nRefreshing...`),Mt=!1,St=null,r(50,At=null),window.location.reload())}catch(t){console.error("Error restoring backup:",t),alert("Error restoring backup: "+t.message)}finally{r(48,_t=!1)}}}else alert("Please select a valid backup file");else alert("Please select a backup file first")},async function(t){const e=t.target.files[0];if(e){St=e;try{const t=await e.text(),n=JSON.parse(t);r(50,At=Hl(n))}catch(t){r(50,At={valid:!1,issues:["Invalid JSON file"]})}}},async function(){r(49,Ct=await ql())},ne,async function(){try{const t=await Ll(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`bookmarks-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}catch(t){console.error("Error exporting bookmarks:",t),alert("Error exporting bookmarks. Please try again.")}},Lt,Et,Ot,function(e){F.call(this,t,e)},()=>$t("bookmarks"),()=>$t("insights"),()=>$t("health"),()=>$t("dataExplorer"),function(t){W[t?"unshift":"push"](()=>{s=t,r(10,s)})},()=>Rt(0,!1),function(){m=O(this),r(0,m),r(1,i),r(113,Et),r(2,o),r(112,Lt),r(114,Ot)},t=>jt(t.target.value),()=>Xl.set(""),t=>Jl.toggleFilter("domains",t),t=>Jl.toggleFilter("folders",t),t=>Jl.toggleFilter("topics",t),t=>Jl.toggleFilter("types",t),t=>Jl.toggleFilter("creators",t),t=>Jl.toggleFilter("tags",t),()=>Jl.setFilter("dateRange",null),()=>Jl.setFilter("deadLinks",!1),()=>Jl.setFilter("stale",!1),()=>{Jl.clearFilters(),Xl.set("")},()=>Xl.update(t=>(t?t+" ":"")+"category:"),()=>Xl.update(t=>(t?t+" ":"")+"domain:"),()=>Xl.update(t=>(t?t+" ":"")+"folder:"),()=>Xl.update(t=>(t?t+" ":"")+"platform:"),()=>Xl.update(t=>(t?t+" ":"")+"type:"),()=>Xl.update(t=>(t?t+" ":"")+"dead:yes"),()=>Xl.update(t=>(t?t+" ":"")+"stale:yes"),function(){U=D(this.value),r(23,U)},function(){K=D(this.value),r(24,K)},function(){Y=this.checked,r(25,Y)},function(){qt=D(this.value),r(56,qt)},function(){Ut=D(this.value),r(57,Ut)},t=>Nt(t.id),()=>Jt(!0),()=>r(42,mt="duplicates"),()=>r(42,mt="similar"),t=>Qt(t.id),(t,e)=>Yt(t.id,e),t=>Xt(t),t=>Zt(t.bookmark1.id),t=>Zt(t.bookmark2.id),()=>re("deadLinks"),t=>ee(t.id,"deadLinks"),()=>te("deadLinks"),()=>re("oldUnused"),t=>ee(t.id,"oldUnused"),()=>te("oldUnused"),()=>re("genericTitles"),t=>ee(t.id,"genericTitles"),()=>te("genericTitles"),()=>re("temporaryUrls"),t=>ee(t.id,"temporaryUrls"),()=>te("temporaryUrls"),()=>re("lowScore"),t=>ee(t.id,"lowScore"),()=>te("lowScore"),t=>Kt(t.id),t=>ne(t),()=>Zt(bt.bookmark1.id),()=>Zt(bt.bookmark2.id)]}const hy=new class extends ht{constructor(t){super(),ut(this,t,uy,ly,o,{},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1])}}({target:document.body});var gy=Object.freeze({__proto__:null,default:{}});function fy(t,e=""){if(!t)return null;if(t["og:video:duration"]){const e=parseInt(t["og:video:duration"],10);return Math.ceil(e/60)}if(t["video:duration"]){const e=parseInt(t["video:duration"],10);return Math.ceil(e/60)}if(t.schemaOrg){const e=Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg];for(const t of e)if("VideoObject"===t["@type"]&&t.duration){const e=yy(t.duration);if(e)return e}}const r=function(t,e){let r=0;if(t.schemaOrg){const e=Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg];for(const t of e)if(t.wordCount)return parseInt(t.wordCount,10)}e&&e.length>100&&(r=e.split(/\s+/).length,r*=5);const n=t.description||t["og:description"]||"";n.length>200&&0===r&&(r=n.length<500?750:n.length<1e3?1500:2500);return r}(t,e);return r>0?Math.ceil(r/225):null}function py(t){if(!t)return null;const e=["article:published_time","datePublished","og:published_time","publication_date","publishedDate","date","og:updated_time","article:modified_time","dateModified","lastmod"];for(const r of e){const e=t[r];if(e){const t=xy(e);if(t)return t}}if(t.schemaOrg){const e=Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg];for(const t of e){const e=t.datePublished||t.dateCreated||t.dateModified;if(e){const t=xy(e);if(t)return t}}}return null}function my(t,e="",r=""){const n=new Set;if(!t)return[];if(t.keywords){("string"==typeof t.keywords?t.keywords.split(",").map(t=>t.trim()):t.keywords).forEach(t=>{t&&t.length>=3&&t.length<=30&&n.add(t.toLowerCase())})}if(t["article:tag"]){(Array.isArray(t["article:tag"])?t["article:tag"]:[t["article:tag"]]).forEach(t=>{t&&t.length>=3&&t.length<=30&&n.add(t.toLowerCase())})}if(t.schemaOrg){const e=Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg];for(const t of e)if(t.keywords){("string"==typeof t.keywords?t.keywords.split(",").map(t=>t.trim()):Array.isArray(t.keywords)?t.keywords:[]).forEach(t=>{t&&t.length>=3&&t.length<=30&&n.add(t.toLowerCase())})}}if(t["og:video:tag"]){(Array.isArray(t["og:video:tag"])?t["og:video:tag"]:[t["og:video:tag"]]).forEach(t=>{t&&t.length>=3&&t.length<=30&&n.add(t.toLowerCase())})}t["og:type"]&&n.add(t["og:type"].toLowerCase());const i=function(t){if(!t)return[];const e=new Set,r=["javascript","typescript","python","java","react","vue","angular","node","express","api","rest","graphql","sql","nosql","mongodb","docker","kubernetes","aws","azure","gcp","cloud","serverless","ml","ai","machine learning","deep learning","neural network","frontend","backend","fullstack","devops","ci/cd","testing","security","performance","optimization","design","architecture"],n=t.toLowerCase();for(const t of r)n.includes(t)&&e.add(t);return Array.from(e).slice(0,10)}(e+" "+r);return i.forEach(t=>n.add(t)),Array.from(n).slice(0,20)}function by(t,e={}){if(!t)return 0;let r=0;if(e.title&&e.title.length>10&&(r+=10,e.title.length>30&&e.title.length<100&&(r+=10)),t.description||t["og:description"]){const e=t.description||t["og:description"];e.length>50&&(r+=10,e.length>150&&e.length<500&&(r+=10))}if((t["og:image"]||t.image||t["twitter:image"])&&(r+=10),t.schemaOrg){r+=10;(Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg]).some(t=>["Article","BlogPosting","TechArticle","VideoObject","Course"].includes(t["@type"]))&&(r+=5)}(t["article:author"]||t.author||t["og:author"])&&(r+=10),py(t)&&(r+=10);const n=my(t,e.title,e.description);return n.length>0&&(r+=5,n.length>=5&&(r+=5)),t["og:type"]&&(r+=5),Math.min(r,100)}function yy(t){if(!t||"string"!=typeof t)return null;const e=t.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!e)return null;const r=parseInt(e[1]||"0",10),n=parseInt(e[2]||"0",10),i=parseInt(e[3]||"0",10);return 60*r+n+Math.ceil(i/60)}function xy(t){if(!t)return null;try{const e=new Date(t);if(!isNaN(e.getTime()))return e.getTime()}catch(t){}return null}function vy(t){return new Promise(e=>setTimeout(e,t))}async function ky(t){if(!t)return{success:!1,error:"No bookmark provided"};try{const e=function(t){if(!t)return null;const e=t.rawMetadata||{};return{readingTime:fy(e,t.contentSnippet),publishedDate:py(e),contentQualityScore:by(e,t),smartTags:my(e,t.title,t.description)}}(t);if(!e)return{success:!1,error:"No metadata to analyze",skipped:!0};if(t.readingTime=e.readingTime,t.publishedDate=e.publishedDate,t.contentQualityScore=e.contentQualityScore,t.smartTags=e.smartTags,t.topics=function(t){if(!t)return[];const e=new Set,r=new Map,n=(t.title||"").toLowerCase(),i=(t.description||"").toLowerCase(),o=(t.domain||"").toLowerCase();(t.url||"").toLowerCase();const s=(t.category||"").toLowerCase(),a=(t.contentSnippet||"").toLowerCase(),l=Array.isArray(t.keywords)?t.keywords.map(t=>t.toLowerCase()).join(" "):"",c=(t.folderPath||"").toLowerCase(),d=`${n} ${i} ${l} ${a} ${c}`;let u="";if(t.rawMetadata){const e=t.rawMetadata.meta||{},r=t.rawMetadata.openGraph||{};(e["article:section"]||"").toLowerCase(),(e["article:tag"]||"").toLowerCase(),u=(r["og:type"]||"").toLowerCase()}const h=(t,e)=>{const n=r.get(t)||0;r.set(t,n+e)};for(const[t,e]of Object.entries(Yc)){if(e.domains)for(const t of e.domains)if(o.includes(t.replace("www.",""))){h(e.id,10);break}if(e.keywords)for(const t of e.keywords){const r=t.toLowerCase(),o=new RegExp(`\\b${Jc(r)}\\b`,"i");o.test(n)&&h(e.id,5),o.test(i)&&h(e.id,3),o.test(a)&&h(e.id,2),o.test(c)&&h(e.id,2)}if(e.subtopics)for(const[t,r]of Object.entries(e.subtopics)){if(r.domains)for(const t of r.domains)if(o.includes(t.replace("www.",""))){h(r.id,10),h(e.id,5);break}if(r.keywords)for(const t of r.keywords){const o=t.toLowerCase(),s=new RegExp(`\\b${Jc(o)}\\b`,"i");s.test(n)&&(h(r.id,5),h(e.id,2.5)),s.test(i)&&(h(r.id,3),h(e.id,1.5)),s.test(d)&&h(r.id,2)}}}("video"===s||u.includes("video"))&&h("videos",10),"blog"!==s&&"article"!==u||h("blogs",5);for(const[t,n]of r.entries())n>=3&&e.add(t);return Array.from(e).sort((t,e)=>(r.get(e)||0)-(r.get(t)||0)).slice(0,5)}(t),t.rawMetadata&&t.platformData){const e=function(t,e){if(!e||!e.schemaOrg||!t)return t;const r=Array.isArray(e.schemaOrg)?e.schemaOrg:[e.schemaOrg];for(const e of r){switch(e["@type"]){case"TechArticle":t.type="tech-article",t.subtype="technical";break;case"BlogPosting":t.type="blog-post",t.subtype="blog";break;case"NewsArticle":t.type="news-article",t.subtype="news";break;case"ScholarlyArticle":t.type="scholarly-article",t.subtype="academic";break;case"VideoObject":"video"!==t.type&&(t.type="video"),t.subtype="video-content";break;case"Course":t.type="course",t.subtype="education";break;case"HowTo":t.type="tutorial",t.subtype="how-to";break;case"FAQPage":t.type="faq",t.subtype="reference";break;case"SoftwareApplication":t.type="software",t.subtype="tool";break;case"APIReference":t.type="api-docs",t.subtype="documentation"}e.author&&!t.creator&&("object"==typeof e.author?t.creator=e.author.name||e.author["@id"]:t.creator=e.author)}return t}(t.platformData,t.rawMetadata);e&&(t.platformData=e,t.contentType=e.type)}return await hl(t),console.log(`Re-analyzed bookmark: ${t.title} - Quality: ${e.contentQualityScore}, Topics: ${t.topics?.length||0}, Reading time: ${e.readingTime||"N/A"} min`),{success:!0,readingTime:e.readingTime,publishedDate:e.publishedDate,contentQualityScore:e.contentQualityScore,smartTagsCount:e.smartTags?.length||0,topicsCount:t.topics?.length||0}}catch(e){return console.error(`Error re-analyzing bookmark ${t.id}:`,e),{success:!1,error:e.message}}}var wy=Object.freeze({__proto__:null,batchReanalyze:async function(t,e=null){if(!t||0===t.length)return{processed:0,success:0,failed:0,skipped:0};console.log(`Starting batch re-analysis of ${t.length} bookmarks...`);let r=0,n=0,i=0,o=0;for(let s=0;s<t.length;s+=50){const a=t.slice(s,s+50);for(let l=0;l<a.length;l++){const c=a[l],d=s+l;try{if(!c.rawMetadata||0===Object.keys(c.rawMetadata).length){i++,o++,e&&e({current:d+1,total:t.length,completed:o,bookmarkId:c.id,title:c.title,status:"skipped",reason:"No metadata to analyze"});continue}const s=await ky(c);s.success?r++:s.skipped?i++:n++,o++,e&&e({current:d+1,total:t.length,completed:o,bookmarkId:c.id,title:c.title,status:s.success?"completed":s.skipped?"skipped":"failed",result:s})}catch(r){console.error(`Error re-analyzing bookmark ${c.id}:`,r),n++,o++,e&&e({current:d+1,total:t.length,completed:o,bookmarkId:c.id,title:c.title,status:"error",error:r.message})}}s+50<t.length&&await vy(100)}return console.log(`Re-analysis complete: ${r} analyzed, ${n} failed, ${i} skipped`),{processed:t.length,success:r,failed:n,skipped:i}},reanalyzeBookmark:ky});export{hy as default};
