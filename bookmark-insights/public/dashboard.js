function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let o;function a(t,e){return t===e||(o||(o=document.createElement("a")),o.href=e,t===o.href)}function l(t,e,n,r){if(t){const i=c(t,e,n,r);return t[0](i)}}function c(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function u(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function d(t,e,n,r,i,s){if(i){const o=c(e,n,r,s);t.p(o,i)}}function h(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}const f="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function g(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function x(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function v(t){return document.createTextNode(t)}function w(){return v(" ")}function k(){return v("")}function _(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t){return""===t?null:+t}function A(t,e){e=""+e,t.data!==e&&(t.data=e)}function D(t,e){t.value=null==e?"":e}function P(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function E(t,e,n){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function O(t){const e=t.querySelector(":checked");return e&&e.__value}function T(t,e,n){t.classList.toggle(e,!!n)}let L;function R(t){L=t}function $(){if(!L)throw new Error("Function called outside component initialization");return L}function B(t){$().$$.on_mount.push(t)}function I(){const t=$();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}(e,n,{cancelable:r});return i.slice().forEach(e=>{e.call(t,s)}),!s.defaultPrevented}return!0}}function j(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t.call(this,e))}const F=[],z=[];let N=[];const V=[],W=Promise.resolve();let H=!1;function q(t){N.push(t)}const U=new Set;let K=0;function Y(){if(0!==K)return;const t=L;do{try{for(;K<F.length;){const t=F[K];K++,R(t),Q(t.$$)}}catch(t){throw F.length=0,K=0,t}for(R(null),F.length=0,K=0;z.length;)z.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];U.has(e)||(U.add(e),e())}N.length=0}while(F.length);for(;V.length;)V.pop()();H=!1,U.clear(),R(t)}function Q(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const X=new Set;let J;function G(){J={r:0,c:[],p:J}}function Z(){J.r||r(J.c),J=J.p}function tt(t,e){t&&t.i&&(X.delete(t),t.i(e))}function et(t,e,n,r){if(t&&t.o){if(X.has(t))return;X.add(t),J.c.push(()=>{X.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function nt(t){return void 0!==t?.length?t:Array.from(t)}function rt(t,e){et(t,1,1,()=>{e.delete(t.key)})}function it(t,e,n,i,s,o,a,l,c,u,d,h){let f=t.length,g=o.length,p=f;const m={};for(;p--;)m[t[p].key]=p;const b=[],y=new Map,x=new Map,v=[];for(p=g;p--;){const t=h(s,o,p),r=n(t);let l=a.get(r);l?i&&v.push(()=>l.p(t,e)):(l=u(r,t),l.c()),y.set(r,b[p]=l),r in m&&x.set(r,Math.abs(p-m[r]))}const w=new Set,k=new Set;function _(t){tt(t,1),t.m(l,d),a.set(t.key,t),d=t.first,g--}for(;f&&g;){const e=b[g-1],n=t[f-1],r=e.key,i=n.key;e===n?(d=e.first,f--,g--):y.has(i)?!a.has(r)||w.has(r)?_(e):k.has(i)?f--:x.get(r)>x.get(i)?(k.add(r),_(e)):(w.add(i),f--):(c(n,a),f--)}for(;f--;){const e=t[f];y.has(e.key)||c(e,a)}for(;g;)_(b[g-1]);return r(v),b}function st(t){t&&t.c()}function ot(t,n,s){const{fragment:o,after_update:a}=t.$$;o&&o.m(n,s),q(()=>{const n=t.$$.on_mount.map(e).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]}),a.forEach(q)}function at(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];N.forEach(r=>-1===t.indexOf(r)?e.push(r):n.push(r)),n.forEach(t=>t()),N=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){-1===t.$$.dirty[0]&&(F.push(t),H||(H=!0,W.then(Y)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ct(e,i,s,o,a,l,c=null,u=[-1]){const d=L;R(e);const h=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||d.$$.root};c&&c(h.root);let f=!1;if(h.ctx=s?s(e,i.props||{},(t,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),f&&lt(e,t)),n}):[],h.update(),f=!0,r(h.before_update),h.fragment=!!o&&o(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(m)}else h.fragment&&h.fragment.c();i.intro&&tt(e.$$.fragment),ot(e,i.target,i.anchor),Y()}R(d)}class ut{$$=void 0;$$set=void 0;$destroy(){at(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function dt(t){return t+.5|0}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const ht=(t,e,n)=>Math.max(Math.min(t,n),e);function ft(t){return ht(dt(2.55*t),0,255)}function gt(t){return ht(dt(255*t),0,255)}function pt(t){return ht(dt(t/2.55)/100,0,1)}function mt(t){return ht(dt(100*t),0,100)}const bt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yt=[..."0123456789ABCDEF"],xt=t=>yt[15&t],vt=t=>yt[(240&t)>>4]+yt[15&t],wt=t=>(240&t)>>4==(15&t);function kt(t){var e=(t=>wt(t.r)&&wt(t.g)&&wt(t.b)&&wt(t.a))(t)?xt:vt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const _t=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ct(t,e,n){const r=e*Math.min(n,1-n),i=(e,i=(e+t/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function Mt(t,e,n){const r=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function St(t,e,n){const r=Ct(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function At(t){const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),s=Math.min(e,n,r),o=(i+s)/2;let a,l,c;return i!==s&&(c=i-s,l=o>.5?c/(2-i-s):c/(i+s),a=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(e,n,r,c,i),a=60*a+.5),[0|a,l||0,o]}function Dt(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(gt)}function Pt(t,e,n){return Dt(Ct,t,e,n)}function Et(t){return(t%360+360)%360}function Ot(t){const e=_t.exec(t);let n,r=255;if(!e)return;e[5]!==n&&(r=e[6]?ft(+e[5]):gt(+e[5]));const i=Et(+e[2]),s=+e[3]/100,o=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return Dt(St,t,e,n)}(i,s,o):"hsv"===e[1]?function(t,e,n){return Dt(Mt,t,e,n)}(i,s,o):Pt(i,s,o),{r:n[0],g:n[1],b:n[2],a:r}}const Tt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Lt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Rt;function $t(t){Rt||(Rt=function(){const t={},e=Object.keys(Lt),n=Object.keys(Tt);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,Tt[s]);s=parseInt(Lt[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}(),Rt.transparent=[0,0,0,0]);const e=Rt[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const Bt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const It=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,jt=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Ft(t,e,n){if(t){let r=At(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=Pt(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function zt(t,e){return t?Object.assign(e||{},t):t}function Nt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=gt(t[3]))):(e=zt(t,{r:0,g:0,b:0,a:1})).a=gt(e.a),e}function Vt(t){return"r"===t.charAt(0)?function(t){const e=Bt.exec(t);let n,r,i,s=255;if(e){if(e[7]!==n){const t=+e[7];s=e[8]?ft(t):ht(255*t,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?ft(n):ht(n,0,255)),r=255&(e[4]?ft(r):ht(r,0,255)),i=255&(e[6]?ft(i):ht(i,0,255)),{r:n,g:r,b:i,a:s}}}(t):Ot(t)}class Wt{constructor(t){if(t instanceof Wt)return t;const e=typeof t;let n;var r,i,s;"object"===e?n=Nt(t):"string"===e&&(s=(r=t).length,"#"===r[0]&&(4===s||5===s?i={r:255&17*bt[r[1]],g:255&17*bt[r[2]],b:255&17*bt[r[3]],a:5===s?17*bt[r[4]]:255}:7!==s&&9!==s||(i={r:bt[r[1]]<<4|bt[r[2]],g:bt[r[3]]<<4|bt[r[4]],b:bt[r[5]]<<4|bt[r[6]],a:9===s?bt[r[7]]<<4|bt[r[8]]:255})),n=i||$t(t)||Vt(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=zt(this._rgb);return t&&(t.a=pt(t.a)),t}set rgb(t){this._rgb=Nt(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${pt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?kt(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=At(t),n=e[0],r=mt(e[1]),i=mt(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${pt(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let i;const s=e===i?.5:e,o=2*s-1,a=n.a-r.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const r=jt(pt(t.r)),i=jt(pt(t.g)),s=jt(pt(t.b));return{r:gt(It(r+n*(jt(pt(e.r))-r))),g:gt(It(i+n*(jt(pt(e.g))-i))),b:gt(It(s+n*(jt(pt(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Wt(this.rgb)}alpha(t){return this._rgb.a=gt(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=dt(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ft(this._rgb,2,t),this}darken(t){return Ft(this._rgb,2,-t),this}saturate(t){return Ft(this._rgb,1,t),this}desaturate(t){return Ft(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=At(t);n[0]=Et(n[0]+e),n=Pt(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ht(){}const qt=(()=>{let t=0;return()=>t++})();function Ut(t){return null==t}function Kt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Yt(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Qt(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function Xt(t,e){return Qt(t)?t:e}function Jt(t,e){return void 0===t?e:t}const Gt=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Zt(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function te(t,e,n,r){let i,s,o;if(Kt(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(Yt(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ee(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ne(t){if(Kt(t))return t.map(ne);if(Yt(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ne(t[n[i]]);return e}return t}function re(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function ie(t,e,n,r){if(!re(t))return;const i=e[t],s=n[t];Yt(i)&&Yt(s)?se(i,s,r):e[t]=ne(s)}function se(t,e,n){const r=Kt(e)?e:[e],i=r.length;if(!Yt(t))return t;const s=(n=n||{}).merger||ie;let o;for(let e=0;e<i;++e){if(o=r[e],!Yt(o))continue;const i=Object.keys(o);for(let e=0,r=i.length;e<r;++e)s(i[e],t,o,n)}return t}function oe(t,e){return se(t,e,{merger:ae})}function ae(t,e,n){if(!re(t))return;const r=e[t],i=n[t];Yt(r)&&Yt(i)?oe(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ne(i))}const le={"":t=>t,x:t=>t.x,y:t=>t.y};function ce(t,e){const n=le[e]||(le[e]=function(t){const e=function(t){const e=t.split("."),n=[];let r="";for(const t of e)r+=t,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function ue(t){return t.charAt(0).toUpperCase()+t.slice(1)}const de=t=>void 0!==t,he=t=>"function"==typeof t,fe=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const ge=Math.PI,pe=2*ge,me=pe+ge,be=Number.POSITIVE_INFINITY,ye=ge/180,xe=ge/2,ve=ge/4,we=2*ge/3,ke=Math.log10,_e=Math.sign;function Ce(t,e,n){return Math.abs(t-e)<n}function Me(t){const e=Math.round(t);t=Ce(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ke(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Se(t){return!function(t){return"symbol"==typeof t||"object"==typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Ae(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function De(t){return t*(ge/180)}function Pe(t){return t*(180/ge)}function Ee(t){if(!Qt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Oe(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*ge&&(s+=pe),{angle:s,distance:i}}function Te(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Le(t,e){return(t-e+me)%pe-ge}function Re(t){return(t%pe+pe)%pe}function $e(t,e,n,r){const i=Re(t),s=Re(e),o=Re(n),a=Re(s-i),l=Re(o-i),c=Re(i-s),u=Re(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Be(t,e,n){return Math.max(e,Math.min(n,t))}function Ie(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function je(t,e,n){n=n||(n=>t[n]<e);let r,i=t.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Fe=(t,e,n,r)=>je(t,n,r?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),ze=(t,e,n)=>je(t,n,r=>t[r][e]>=n);const Ne=["push","pop","shift","splice","unshift"];function Ve(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(Ne.forEach(e=>{delete t[e]}),delete t._chartjs)}function We(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const He="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function qe(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,He.call(window,()=>{r=!1,t.apply(e,n)}))}}const Ue=t=>"start"===t?"left":"end"===t?"right":"center",Ke=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Ye(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:g}=o.getUserBounds();if(f){if(i=Math.min(Fe(l,u,d).lo,n?r:Fe(e,u,o.getPixelForValue(d)).lo),c){const t=l.slice(0,i+1).reverse().findIndex(t=>!Ut(t[a.axis]));i-=Math.max(0,t)}i=Be(i,0,r-1)}if(g){let t=Math.max(Fe(l,o.axis,h,!0).hi+1,n?0:Fe(e,u,o.getPixelForValue(h),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!Ut(t[a.axis]));t+=Math.max(0,e)}s=Be(t,i,r)-i}else s=r-i}return{start:i,count:s}}function Qe(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Xe=t=>0===t||1===t,Je=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*pe/n),Ge=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*pe/n)+1,Ze={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*xe),easeOutSine:t=>Math.sin(t*xe),easeInOutSine:t=>-.5*(Math.cos(ge*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Xe(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Xe(t)?t:Je(t,.075,.3),easeOutElastic:t=>Xe(t)?t:Ge(t,.075,.3),easeInOutElastic(t){const e=.1125;return Xe(t)?t:t<.5?.5*Je(2*t,e,.45):.5+.5*Ge(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Ze.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Ze.easeInBounce(2*t):.5*Ze.easeOutBounce(2*t-1)+.5};function tn(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function en(t){return tn(t)?t:new Wt(t)}function nn(t){return tn(t)?t:new Wt(t).saturate(.5).darken(.1).hexString()}const rn=["x","y","borderWidth","radius","tension"],sn=["color","borderColor","backgroundColor"];const on=new Map;function an(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let r=on.get(n);return r||(r=new Intl.NumberFormat(t,e),on.set(n,r)),r}(e,n).format(t)}const ln={values:t=>Kt(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const o=ke(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),an(t,r,l)},logarithmic(t,e,n){if(0===t)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(ke(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?ln.numeric.call(this,t,e,n):""}};var cn={formatters:ln};const un=Object.create(null),dn=Object.create(null);function hn(t,e){if(!e)return t;const n=e.split(".");for(let e=0,r=n.length;e<r;++e){const r=n[e];t=t[r]||(t[r]=Object.create(null))}return t}function fn(t,e,n){return"string"==typeof e?se(hn(t,e),n):se(hn(t,""),e)}class gn{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>nn(e.backgroundColor),this.hoverBorderColor=(t,e)=>nn(e.borderColor),this.hoverColor=(t,e)=>nn(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return fn(this,t,e)}get(t){return hn(this,t)}describe(t,e){return fn(dn,t,e)}override(t,e){return fn(un,t,e)}route(t,e,n,r){const i=hn(this,t),s=hn(this,n),o="_"+e;Object.defineProperties(i,{[o]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=s[r];return Yt(t)?Object.assign({},e,t):Jt(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach(t=>t(this))}}var pn=new gn({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:sn},numbers:{type:"number",properties:rn}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:cn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function mn(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function bn(t,e,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],null==d||Kt(d)){if(Kt(d))for(c=0,u=d.length;c<u;c++)h=d[c],null==h||Kt(h)||(o=mn(t,i,s,o,h))}else o=mn(t,i,s,o,d);t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function yn(t,e,n){const r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function xn(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function vn(t,e,n,r){wn(t,e,n,r,null)}function wn(t,e,n,r,i){let s,o,a,l,c,u,d,h;const f=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*ye;if(f&&"object"==typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(p)||p<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,p,0,0,pe):t.arc(n,r,p,0,pe),t.closePath();break;case"triangle":u=i?i/2:p,t.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*p),m+=we,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*p),m+=we,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*p),t.closePath();break;case"rectRounded":c=.516*p,l=p-c,o=Math.cos(m+ve)*l,d=Math.cos(m+ve)*(i?i/2-c:l),a=Math.sin(m+ve)*l,h=Math.sin(m+ve)*(i?i/2-c:l),t.arc(n-d,r-a,c,m-ge,m-xe),t.arc(n+h,r-o,c,m-xe,m),t.arc(n+d,r+a,c,m,m+xe),t.arc(n-h,r+o,c,m+xe,m+ge),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}m+=ve;case"rectRot":d=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":m+=ve;case"cross":d=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),m+=ve,d=Math.cos(m)*(i?i/2:p),o=Math.cos(m)*p,a=Math.sin(m)*p,h=Math.sin(m)*(i?i/2:p),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(m)*p,a=Math.sin(m)*p,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(i?i/2:p),r+Math.sin(m)*p);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function kn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function _n(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Cn(t){t.restore()}function Mn(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else"after"===i!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Sn(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function An(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Dn(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Pn(t,e,n,r,i,s={}){const o=Kt(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ut(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Dn(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ut(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),An(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function En(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ge,ge,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,ge,xe,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,xe,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-xe,!0),t.lineTo(n+o.topLeft,r)}const On=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Tn=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ln(t,e){const n=(""+t).match(On);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const Rn=t=>+t||0;function $n(t,e){const n={},r=Yt(e),i=r?Object.keys(e):e,s=Yt(t)?r?n=>Jt(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of i)n[t]=Rn(s(t));return n}function Bn(t){return $n(t,{top:"y",right:"x",bottom:"y",left:"x"})}function In(t){return $n(t,["topLeft","topRight","bottomLeft","bottomRight"])}function jn(t){const e=Bn(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Fn(t,e){t=t||{},e=e||pn.font;let n=Jt(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let r=Jt(t.style,e.style);r&&!(""+r).match(Tn)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Jt(t.family,e.family),lineHeight:Ln(Jt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Jt(t.weight,e.weight),string:""};return i.string=function(t){return!t||Ut(t.size)||Ut(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function zn(t,e,n,r){let i,s,o,a=!0;for(i=0,s=t.length;i<s;++i)if(o=t[i],void 0!==o&&(void 0!==e&&"function"==typeof o&&(o=o(e),a=!1),void 0!==n&&Kt(o)&&(o=o[n%o.length],a=!1),void 0!==o))return r&&!a&&(r.cacheable=!1),o}function Nn(t,e){return Object.assign(Object.create(t),e)}function Vn(t,e=[""],n,r,i=()=>t[0]){const s=n||t;void 0===r&&(r=Zn("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:n=>Vn([n,...t],e,s,r)};return new Proxy(o,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,r)=>Kn(n,r,()=>function(t,e,n,r){let i;for(const s of e)if(i=Zn(qn(s,t),n),void 0!==i)return Un(t,i)?Jn(n,r,t,i):i}(r,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>tr(t).includes(e),ownKeys:t=>tr(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function Wn(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Hn(t,r),setContext:e=>Wn(t,e,n,r),override:i=>Wn(t.override(i),e,n,r)};return new Proxy(i,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Kn(t,e,()=>function(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];he(a)&&o.isScriptable(e)&&(a=function(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);a.delete(t),Un(t,l)&&(l=Jn(i._scopes,i,t,l));return l}(e,a,t,n));Kt(a)&&a.length&&(a=function(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(void 0!==s.index&&r(t))return e[s.index%e.length];if(Yt(e[0])){const n=e,r=i._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=Jn(r,i,t,l);e.push(Wn(n,s,o&&o[t],a))}}return e}(e,a,t,o.isIndexable));Un(e,a)&&(a=Wn(a,i,s&&s[e],o));return a}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,r)=>(t[n]=r,delete e[n],!0)})}function Hn(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:he(n)?n:()=>n,isIndexable:he(r)?r:()=>r}}const qn=(t,e)=>t?t+ue(e):e,Un=(t,e)=>Yt(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Kn(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const r=n();return t[e]=r,r}function Yn(t,e,n){return he(t)?t(e,n):t}const Qn=(t,e)=>!0===t?e:"string"==typeof t?ce(e,t):void 0;function Xn(t,e,n,r,i){for(const s of e){const e=Qn(n,s);if(e){t.add(e);const s=Yn(e._fallback,n,i);if(void 0!==s&&s!==n&&s!==r)return s}else if(!1===e&&void 0!==r&&n!==r)return null}return!1}function Jn(t,e,n,r){const i=e._rootScopes,s=Yn(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Gn(a,o,n,s||n,r);return null!==l&&((void 0===s||s===n||(l=Gn(a,o,s,l,r),null!==l))&&Vn(Array.from(a),[""],i,s,()=>function(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];if(Kt(i)&&Yt(n))return n;return i||{}}(e,n,r)))}function Gn(t,e,n,r,i){for(;n;)n=Xn(t,e,n,r,i);return n}function Zn(t,e){for(const n of e){if(!n)continue;const e=n[t];if(void 0!==e)return e}}function tr(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function er(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse(ce(u,s),c)};return o}const nr=Number.EPSILON||1e-14,rr=(t,e)=>e<t.length&&!t[e].skip&&t[e],ir=t=>"x"===t?"y":"x";function sr(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Te(s,i),l=Te(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function or(t,e="x"){const n=ir(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=rr(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=rr(t,o+1),l){if(c){const t=c[e]-l[e];i[o]=0!==t?(c[n]-l[n])/t:0}s[o]=a?c?_e(i[o-1])!==_e(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}!function(t,e,n){const r=t.length;let i,s,o,a,l,c=rr(t,0);for(let u=0;u<r-1;++u)l=c,c=rr(t,u+1),l&&c&&(Ce(e[u],0,nr)?n[u]=n[u+1]=0:(i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])))}(t,i,s),function(t,e,n="x"){const r=ir(n),i=t.length;let s,o,a,l=rr(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=rr(t,c+1),!a)continue;const i=a[n],u=a[r];o&&(s=(i-o[n])/3,a[`cp1${n}`]=i-s,a[`cp1${r}`]=u-s*e[c]),l&&(s=(l[n]-i)/3,a[`cp2${n}`]=i+s,a[`cp2${r}`]=u+s*e[c])}}(t,s,e)}function ar(t,e,n){return Math.max(Math.min(t,n),e)}function lr(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)or(t,i);else{let n=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=sr(n,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&function(t,e){let n,r,i,s,o,a=kn(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&kn(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=ar(i.cp1x,e.left,e.right),i.cp1y=ar(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=ar(i.cp2x,e.left,e.right),i.cp2y=ar(i.cp2y,e.top,e.bottom)))}(t,n)}function cr(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ur(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function dr(t,e,n){let r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}const hr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const fr=["top","right","bottom","left"];function gr(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=fr[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function pr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=hr(n),s="border-box"===i.boxSizing,o=gr(i,"padding"),a=gr(i,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o,a,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(i,s,t.target))o=i,a=s;else{const t=e.getBoundingClientRect();o=r.clientX-t.left,a=r.clientY-t.top,l=!0}return{x:o,y:a,box:l}}(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:g}=e;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/g*n.height/r)}}const mr=t=>Math.round(10*t)/10;function br(t,e,n,r){const i=hr(t),s=gr(i,"margin"),o=dr(i.maxWidth,t,"clientWidth")||be,a=dr(i.maxHeight,t,"clientHeight")||be,l=function(t,e,n){let r,i;if(void 0===e||void 0===n){const s=t&&ur(t);if(s){const t=s.getBoundingClientRect(),o=hr(s),a=gr(o,"border","width"),l=gr(o,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,r=dr(o.maxWidth,s,"clientWidth"),i=dr(o.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||be,maxHeight:i||be}}(t,e,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const t=gr(i,"border","width"),e=gr(i,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=mr(Math.min(c,o,l.maxWidth)),u=mr(Math.min(u,a,l.maxHeight)),c&&!u&&(u=mr(c/2));return(void 0!==e||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=mr(Math.floor(u*r))),{width:c,height:u}}function yr(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0)}const xr=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};cr()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function vr(t,e){const n=function(t,e){return hr(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function wr(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function kr(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function _r(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=wr(t,i,n),a=wr(i,s,n),l=wr(s,e,n),c=wr(o,a,n),u=wr(a,l,n);return wr(c,u,n)}function Cr(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Mr(t,e){let n,r;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Sr(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ar(t){return"angle"===t?{between:$e,compare:Le,normalize:Re}:{between:Ie,compare:(t,e)=>t-e,normalize:t=>t}}function Dr({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n==0,style:i}}function Pr(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=Ar(r),{start:u,end:d,loop:h,style:f}=function(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=Ar(r),l=e.length;let c,u,{start:d,end:h,loop:f}=t;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&o(a(e[d%l][r]),i,s);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:t.style}}(t,e,n),g=[];let p,m,b,y=!1,x=null;const v=()=>y||l(i,b,p)&&0!==a(i,b),w=()=>!y||0===a(s,p)||l(s,b,p);for(let t=u,n=u;t<=d;++t)m=e[t%o],m.skip||(p=c(m[r]),p!==b&&(y=l(p,i,s),null===x&&v()&&(x=0===a(p,i)?t:n),null!==x&&w()&&(g.push(Dr({start:x,end:t,loop:h,count:o,style:f})),x=null),n=t,b=p));return null!==x&&g.push(Dr({start:x,end:d,loop:h,count:o,style:f})),g}function Er(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=Pr(r[i],t.points,e);s.length&&n.push(...s)}return n}function Or(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){const i=t._chart.getContext(),s=Tr(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,h=d;function f(t,e,r,i){const s=a?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=s;for(;n[e%l].skip;)e+=s;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:r,style:i}),u=i,d=e%l)}}for(const t of e){d=a?d:t.start;let e,s=n[d%l];for(h=d+1;h<=t.end;h++){const a=n[h%l];e=Tr(r.setContext(Nn(i,{type:"segment",p0:s,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Lr(e,u)&&f(d,h-1,t.loop,u),s=a,u=e}d<h-1&&f(d,h-1,t.loop,u)}return c}(t,e,n,r):e}function Tr(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Lr(t,e){if(!e)return!1;const n=[],r=function(t,e){return tn(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Rr(t,e,n){return t.options.clip?t[n]:e[n]}function $r(t,e){const n=e._clip;if(n.disabled)return!1;const r=function(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Rr(n,e,"left"),right:Rr(n,e,"right"),top:Rr(r,e,"top"),bottom:Rr(r,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:r.bottom+(!0===n.bottom?0:n.bottom)}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Br{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const i=e.listeners[r],s=e.duration;i.forEach(r=>r({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=He.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,o=i.length-1,a=!1;for(;o>=0;--o)s=i[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=i.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ir=new Br;const jr="transparent",Fr={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const r=en(t||jr),i=r.valid&&en(e||jr);return i&&i.valid?i.mix(r,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class zr{constructor(t,e,n,r){const i=e[n];r=zn([t.to,r,i,t.from]);const s=zn([t.from,i,r]);this._active=!0,this._fn=t.fn||Fr[t.type||typeof s],this._easing=Ze[t.easing]||Ze.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=zn([t.to,e,r,t.from]),this._from=zn([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,o=this._to;let a;if(this._active=i!==o&&(s||e<n),!this._active)return this._target[r]=o,void this._notify(!0);e<0?this._target[r]=i:(a=e/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class Nr{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Yt(t))return;const e=Object.keys(pn.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Yt(i))return;const s={};for(const t of e)s[t]=i[t];(Kt(i.properties)&&i.properties||[r]).forEach(t=>{t!==r&&n.has(t)||n.set(t,s)})})}_animateOptions(t,e){const n=e.options,r=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(t,e){const n=[],r=Object.keys(e);for(let e=0;e<r.length;e++){const i=t[r[e]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),i}_createAnimations(t,e){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(t,e));continue}const c=e[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,o);continue}u.cancel()}d&&d.duration?(i[l]=u=new zr(d,t,l,c),r.push(u)):t[l]=c}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Ir.add(this._chart,n),!0):void 0}}function Vr(t,e){const n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:r?s:i,end:r?i:s}}function Wr(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Hr(t,e,n,r={}){const i=t.keys,s="single"===r.mode;let o,a,l,c;if(null===e)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Qt(c)&&(s||0===e||_e(e)===_e(c))&&(e+=c)}return u||r.all?e:0}function qr(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Ur(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Kr(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function Yr(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(s,o,r),d=e.length;let h;for(let t=0;t<d;++t){const n=e[t],{[l]:s,[c]:d}=n;h=(n._stacks||(n._stacks={}))[c]=Ur(i,u,s),h[a]=d,h._top=Kr(h,o,!0,r.type),h._bottom=Kr(h,o,!1,r.type);(h._visualValues||(h._visualValues={}))[a]=d}}function Qr(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function Xr(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][n])return;delete e[r][n],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[n]&&delete e[r]._visualValues[n]}}}const Jr=t=>"reset"===t||"none"===t,Gr=(t,e)=>e?t:Object.assign({},t);class Zr{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=qr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Xr(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(t,e,n,r)=>"x"===t?e:"r"===t?r:n,i=e.xAxisID=Jt(n.xAxisID,Qr(t,"x")),s=e.yAxisID=Jt(n.yAxisID,Qr(t,"y")),o=e.rAxisID=Jt(n.rAxisID,Qr(t,"r")),a=e.indexAxis,l=e.iAxisID=r(a,i,s,o),c=e.vAxisID=r(a,s,i,o);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ve(this._data,this),t._stacked&&Xr(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Yt(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:r}=e,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}(e,t)}else if(n!==e){if(n){Ve(n,this);const t=this._cachedMeta;Xr(t),t._parsed=[]}e&&Object.isExtensible(e)&&(i=this,(r=e)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),Ne.forEach(t=>{const e="_onData"+ue(t),n=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...t){const i=n.apply(this,t);return r._chartjs.listeners.forEach(n=>{"function"==typeof n[e]&&n[e](...t)}),i}})}))),this._syncList=[],this._data=e}var r,i}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=e._stacked;e._stacked=qr(e.vScale,e),e.stack!==n.stack&&(r=!0,Xr(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&(Yr(this,e._parsed),e._stacked=qr(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,o=i.axis;let a,l,c,u=0===t&&e===r.length||n._sorted,d=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=Kt(r[t])?this.parseArrayData(n,r,t,e):Yt(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);const i=()=>null===l[o]||d&&l[o]<d[o];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],u&&(i()&&(u=!1),d=l);n._sorted=u}s&&Yr(this,c)}parsePrimitiveData(t,e,n,r){const{iScale:i,vScale:s}=t,o=i.axis,a=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[o]:c||i.parse(l[f],f),[a]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,r){const{xScale:i,yScale:s}=t,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(t,e,n,r){const{xScale:i,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=e[d],l[c]={x:i.parse(ce(h,o),d),y:s.parse(ce(h,a),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,i=this._cachedMeta,s=e[t.axis];return Hr({keys:Wr(r,!0),values:e._stacks[t.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const i=n[e.axis];let s=null===i?NaN:i;const o=r&&n._stacks[e.axis];r&&o&&(r.values=o,s=Hr(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&t===n.iScale,s=r.length,o=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Wr(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(o);let d,h;function f(){h=r[d];const e=h[o.axis];return!Qt(h[t.axis])||c>e||u<e}for(d=0;d<s&&(f()||(this.updateRangeFromParsed(l,t,h,a),!i));++d);if(i)for(d=s-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,t,h,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r][t.axis],Qt(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,r,i;return Yt(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}(Jt(this.options.clip,function(t,e,n){if(!1===n)return!1;const r=Vr(t,n),i=Vr(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],i=e.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,i,o,a),c=o;c<o+a;++c){const e=r[c];e.hidden||(e.active&&l?s.push(e):e.draw(t,i))}for(c=0;c<s.length;++c)s[c].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];i=e.$context||(e.$context=function(t,e,n){return Nn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=function(t,e){return Nn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!e,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const r="active"===e,i=this._cachedDataOpts,s=t+"-"+e,o=i[s],a=this.enableOptionSharing&&de(n);if(o)return Gr(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=r?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(pn.elements[t]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,r,e),u);return f.$shared&&(f.$shared=a,i[s]=Object.freeze(Gr(f,a))),f}_resolveAnimations(t,e,n){const r=this.chart,i=this._cachedDataOpts,s=`animation-${e}`,o=i[s];if(o)return o;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,e),s=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(s,this.getContext(t,n,e))}const l=new Nr(r,a&&a.animations);return a&&a._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Jr(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:s}}updateElement(t,e,n,r){Jr(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!Jr(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const r=n.length,i=e.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,e,n=!0){const r=this._cachedMeta,i=r.data,s=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=s;o--)t[o]=t[o-e]};for(a(i),o=t;o<s;++o)i[o]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(t,e),n&&this.updateElements(i,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&Xr(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ti(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let e=0,i=n.length;e<i;e++)r=r.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=We(r.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let r,i,s,o,a=e._length;const l=()=>{32767!==s&&-32768!==s&&(de(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(r=0,i=n.length;r<i;++r)s=e.getPixelForValue(n[r]),l();for(o=void 0,r=0,i=e.ticks.length;r<i;++r)s=e.getPixelForTick(r),l();return a}function ei(t,e,n,r){return Kt(t)?function(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}(t,e,n,r):e[n.axis]=n.parse(t,r),e}function ni(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(ei(h,d,s,c));return l}function ri(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function ii(t,e,n,r){let i=e.borderSkipped;const s={};if(!i)return void(t.borderSkipped=s);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}(t);"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[si(u,o,a,l)]=!0,i=c)),s[si(i,o,a,l)]=!0,t.borderSkipped=s}function si(t,e,n,r){var i,s,o;return r?(o=n,t=oi(t=(i=t)===(s=e)?o:i===o?s:i,n,e)):t=oi(t,e,n),t}function oi(t,e,n){return"start"===t?e:"end"===t?n:t}function ai(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class li extends Zr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map((e,i)=>{const s=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,o=t=>+n[t];if(Yt(n[t])){const{key:t="value"}=this._parsing;o=e=>+ce(n[e],t)}for(i=t,s=t+e;i<s;++i)r._parsed[i]=o(i)}}_getRotation(){return De(this.options.rotation-90)}_getCircumference(){return De(this.options.circumference)}_getRotationExtents(){let t=pe,e=-pe;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:p,offsetY:m}=function(t,e,n){let r=1,i=1,s=0,o=0;if(e<pe){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(t,e,r)=>$e(t,a,l,!0)?1:Math.max(e,e*n,r,r*n),g=(t,e,r)=>$e(t,a,l,!0)?-1:Math.min(e,e*n,r,r*n),p=f(0,c,d),m=f(xe,u,h),b=g(ge,c,d),y=g(ge+xe,u,h);r=(p-b)/2,i=(m-y)/2,s=-(p+b)/2,o=-(m+y)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(h,d,a),b=(n.width-s)/f,y=(n.height-s)/g,x=Math.max(Math.min(b,y)/2,0),v=Gt(this.options.radius,x),w=(v-Math.max(v*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=m*v,r.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/pe)}updateElements(t,e,n,r){const i="reset"===r,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=i&&a.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(e,r);let p,m=this._getRotation();for(p=0;p<e;++p)m+=this._circumference(p,i);for(p=e;p<e+n;++p){const e=this._circumference(p,i),n=t[p],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:h,innerRadius:d};g&&(s.options=f||this.resolveDataElementOptions(p,n.active?"active":r)),m+=e,this.updateElement(n,p,s,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,r=0;for(n=0;n<e.length;n++){const i=t._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||e[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?pe*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=an(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,i,s,o,a;if(!t)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),t=s.data,o=s.controller;break}if(!t)return 0;for(r=0,i=t.length;r<i;++r)a=o.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Jt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ci extends Zr{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map((e,i)=>{const s=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=an(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}parseObjectData(t,e,n,r){return er.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,r){const i="reset"===r,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*ge;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<e;++d)h+=this._computeAngle(d,r,f);for(d=e;d<e+n;d++){const e=t[d];let n=h,g=h+this._computeAngle(d,r,f),p=s.getDataVisibility(d)?a.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=g,i&&(o.animateScale&&(p=0),o.animateRotate&&(n=g=u));const m={x:l,y:c,innerRadius:0,outerRadius:p,startAngle:n,endAngle:g,options:this.resolveDataElementOptions(d,e.active?"active":r)};this.updateElement(e,d,m,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?De(this.resolveDataElementOptions(t,e).angle||n):0}}var ui=Object.freeze({__proto__:null,BarController:class extends Zr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,r){return ni(t,e,n,r)}parseArrayData(t,e,n,r){return ni(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:i,vScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?o:a,c="x"===s.axis?o:a,u=[];let d,h,f,g;for(d=n,h=n+r;d<h;++d)g=e[d],f={},f[i.axis]=i.parse(ce(g,l),d),u.push(ei(ce(g,c),f,s,d));return u}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const i=n._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,i=this.getParsed(t),s=i._custom,o=ri(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,r);for(let h=e;h<e+n;h++){const e=this.getParsed(h),n=i||Ut(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),g=(e._stacks||{})[o.axis],p={horizontal:l,base:n.base,enableBorderRadius:!g||ri(e._custom)||s===g._top||s===g._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(p.options=u||this.resolveDataElementOptions(h,t[h].active?"active":r));const m=p.options||t[h].options;ii(p,m,g,s),ai(p,m,c.ratio),this.updateElement(t[h],h,p,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),i=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(e),a=o&&o[n.axis],l=t=>{const e=t._parsed.find(t=>t[n.axis]===a),r=e&&e[t.vScale.axis];if(Ut(r)||isNaN(r))return!0};for(const n of r)if((void 0===e||!l(n))&&((!1===i||-1===s.indexOf(n.stack)||void 0===i&&void 0===n.stack)&&s.push(n.stack),n.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Jt("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let i,s;for(i=0,s=e.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=t.barThickness;return{min:o||ti(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,o=i||0,a=this.getParsed(t),l=a._custom,c=ri(l);let u,d,h=a[e.axis],f=0,g=n?this.applyStack(e,a,n):h;g!==h&&(f=g-h,g=h),c&&(h=l.barStart,g=l.barEnd-l.barStart,0!==h&&_e(h)!==_e(l.barEnd)&&(f=0),f+=h);const p=Ut(i)||c?f:i;let m=e.getPixelForValue(p);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+g):m,d=u-m,Math.abs(d)<s){d=function(t,e,n){return 0!==t?_e(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(d,e,o)*s,h===o&&(m-=d/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),l=Math.min(t,i),f=Math.max(t,i);m=Math.max(Math.min(m,f),l),u=m+d,n&&!c&&(a._stacks[e.axis]._visualValues[r]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=_e(d)*e.getLineWidthForValue(o)/2;m+=t,d-=t}return{size:d,base:m,head:u,center:u+d/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,i=r.skipNull,s=Jt(r.maxBarThickness,1/0);let o,a;const l=this._getAxisCount();if(e.grouped){const n=i?this._getStackCount(t):e.stackCount,c="flex"===r.barThickness?function(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}(t,e,r,n*l):function(t,e,n,r){const i=n.barThickness;let s,o;return Ut(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}(t,e,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(Jt(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+d;o=c.start+c.chunk*h+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(s,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[e.axis]||n[i].hidden||n[i].draw(this._ctx)}},BubbleController:class extends Zr{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,r){const i=super.parsePrimitiveData(t,e,n,r);for(let t=0;t<i.length;t++)i[t]._custom=this.resolveDataElementOptions(t+n).radius;return i}parseArrayData(t,e,n,r){const i=super.parseArrayData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=Jt(r[2],this.resolveDataElementOptions(t+n).radius)}return i}parseObjectData(t,e,n,r){const i=super.parseObjectData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=Jt(r&&r.r&&+r.r,this.resolveDataElementOptions(t+n).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,s=this.getParsed(t),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y),l=s._custom;return{label:n[t]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,r),c=s.axis,u=o.axis;for(let d=e;d<e+n;d++){const e=t[d],n=!i&&this.getParsed(d),h={},f=h[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),g=h[u]=i?o.getBasePixel():o.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(g),l&&(h.options=a||this.resolveDataElementOptions(d,e.active?"active":r),i&&(h.options.radius=0)),this.updateElement(e,d,h,r)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==e&&(r.radius=0),r.radius+=Jt(n&&n._custom,i),r}},DoughnutController:li,LineController:class extends Zr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=e,s=this.chart._animationsDisabled;let{start:o,count:a}=Ye(e,r,s);this._drawStart=o,this._drawCount=a,Qe(e)&&(o=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},t),this.updateElements(r,o,a,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,r),d=s.axis,h=o.axis,{spanGaps:f,segment:g}=this.options,p=Se(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,b=e+n,y=t.length;let x=e>0&&this.getParsed(e-1);for(let n=0;n<y;++n){const f=t[n],y=m?f:{};if(n<e||n>=b){y.skip=!0;continue}const v=this.getParsed(n),w=Ut(v[h]),k=y[d]=s.getPixelForValue(v[d],n),_=y[h]=i||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[h],n);y.skip=isNaN(k)||isNaN(_)||w,y.stop=n>0&&Math.abs(v[d]-x[d])>p,g&&(y.parsed=v,y.raw=l.data[n]),u&&(y.options=c||this.resolveDataElementOptions(n,f.active?"active":r)),m||this.updateElement(f,n,y,r),x=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends li{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:ci,RadarController:class extends Zr{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,r){return er.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":r),a=i.getPointPositionForValue(o,this.getParsed(o).r),l=s?i.xCenter:a.x,c=s?i.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,o,u,r)}}},ScatterController:class extends Zr{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,s=this.getParsed(t),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y);return{label:n[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,r=this.chart._animationsDisabled;let{start:i,count:s}=Ye(e,n,r);if(this._drawStart=i,this._drawCount=s,Qe(e)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=e;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),h=s.axis,f=o.axis,{spanGaps:g,segment:p}=this.options,m=Se(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||"none"===r;let y=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),g=b?e:{},x=Ut(n[f]),v=g[h]=s.getPixelForValue(n[h],c),w=g[f]=i||x?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],c);g.skip=isNaN(v)||isNaN(w)||x,g.stop=c>0&&Math.abs(n[h]-y[h])>m,p&&(g.parsed=n,g.raw=l.data[c]),d&&(g.options=u||this.resolveDataElementOptions(c,e.active?"active":r)),b||this.updateElement(e,c,g,r),y=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!e.length)return r;const i=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,i,s)/2}}});function di(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class hi{static override(t){Object.assign(hi.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return di()}parse(){return di()}format(){return di()}add(){return di()}diff(){return di()}startOf(){return di()}endOf(){return di()}}var fi=hi;function gi(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const o=a._reversePixels?ze:Fe;if(!r){const r=o(s,e,n);if(l){const{vScale:e}=i._cachedMeta,{_parsed:n}=t,s=n.slice(0,r.lo+1).reverse().findIndex(t=>!Ut(t[e.axis]));r.lo-=Math.max(0,s);const o=n.slice(r.hi).findIndex(t=>!Ut(t[e.axis]));r.hi+=Math.max(0,o)}return r}if(i._sharedOptions){const t=s[0],r="function"==typeof t.getRange&&t.getRange(e);if(r){const t=o(s,e,n-r),i=o(s,e,n+r);return{lo:t.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function pi(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let t=0,n=s.length;t<n;++t){const{index:n,data:a}=s[t],{lo:l,hi:c}=gi(s[t],e,o,i);for(let t=l;t<=c;++t){const e=a[t];e.skip||r(e,n,t)}}}function mi(t,e,n,r,i){const s=[];if(!i&&!t.isPointInArea(e))return s;return pi(t,n,e,function(n,o,a){(i||kn(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&s.push({element:n,datasetIndex:o,index:a})},!0),s}function bi(t,e,n,r,i,s){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){const i=e?Math.abs(t.x-r.x):0,s=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return pi(t,n,e,function(n,c,u){const d=n.inRange(e.x,e.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!(!!s||t.isPointInArea(h))&&!d)return;const f=a(e,h);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})}),o}function yi(t,e,n,r,i,s){return s||t.isPointInArea(e)?"r"!==n||r?bi(t,e,n,r,i,s):function(t,e,n,r){let i=[];return pi(t,n,e,function(t,n,s){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],r),{angle:l}=Oe(t,{x:e.x,y:e.y});$e(l,o,a)&&i.push({element:t,datasetIndex:n,index:s})}),i}(t,e,n,i):[]}function xi(t,e,n,r,i){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return pi(t,n,e,(t,r,l)=>{t[o]&&t[o](e[n],i)&&(s.push({element:t,datasetIndex:r,index:l}),a=a||t.inRange(e.x,e.y,i))}),r&&!a?[]:s}var vi={evaluateInteractionItems:pi,modes:{index(t,e,n,r){const i=pr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?mi(t,i,s,r,o):yi(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,r){const i=pr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?mi(t,i,s,r,o):yi(t,i,s,!1,r,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,r)=>mi(t,pr(e,t),n.axis||"xy",r,n.includeInvisible||!1),nearest(t,e,n,r){const i=pr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return yi(t,i,s,n.intersect,r,o)},x:(t,e,n,r)=>xi(t,pr(e,t),"x",n.intersect,r),y:(t,e,n,r)=>xi(t,pr(e,t),"y",n.intersect,r)}};const wi=["left","top","right","bottom"];function ki(t,e){return t.filter(t=>t.pos===e)}function _i(t,e){return t.filter(t=>-1===wi.indexOf(t.pos)&&t.box.axis===e)}function Ci(t,e){return t.sort((t,n)=>{const r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function Mi(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:r,stackWeight:i}=n;if(!t||!wi.includes(r))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:o&&e.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:o&&e.availableHeight)}return n}function Si(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Ai(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Di(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Yt(i)){n.size&&(t[i]-=n.size);const e=r[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[i]+=n.size}s.getPadding&&Ai(o,s.getPadding());const a=Math.max(0,e.outerWidth-Si(o,t,"left","right")),l=Math.max(0,e.outerHeight-Si(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Pi(t,e){const n=e.maxPadding;function r(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{r[t]=Math.max(e[t],n[t])}),r}return r(t?["left","right"]:["top","bottom"])}function Ei(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Pi(a.horizontal,e));const{same:o,other:d}=Di(e,n,a,r);c|=o&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&Ei(i,e,n,r)||u}function Oi(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Ti(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const t=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=e.w*c,s=l.size||t.height;de(l.start)&&(o=l.start),t.fullSize?Oi(t,i.left,o,n.outerWidth-i.right-i.left,s):Oi(t,e.left+l.placed,o,r,s),l.start=o,l.placed+=r,o=t.bottom}else{const r=e.h*c,o=l.size||t.width;de(l.start)&&(s=l.start),t.fullSize?Oi(t,s,i.top,o,n.outerHeight-i.bottom-i.top):Oi(t,s,e.top+l.placed,o,r),l.start=s,l.placed+=r,s=t.right}}e.x=s,e.y=o}var Li={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=jn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=function(t){const e=function(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=i),e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}(t),n=Ci(e.filter(t=>t.box.fullSize),!0),r=Ci(ki(e,"left"),!0),i=Ci(ki(e,"right")),s=Ci(ki(e,"top"),!0),o=Ci(ki(e,"bottom")),a=_i(e,"x"),l=_i(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:ki(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;te(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const u=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);Ai(h,jn(r));const f=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),g=Mi(l.concat(c),d);Ei(a.fullSize,f,d,g),Ei(l,f,d,g),Ei(c,f,d,g)&&Ei(l,f,d,g),function(t){const e=t.maxPadding;function n(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Ti(a.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,Ti(a.rightAndBottom,f,d,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},te(a.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Ri{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class $i extends Ri{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Bi="$chartjs",Ii={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ji=t=>null===t||""===t;const Fi=!!xr&&{passive:!0};function zi(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Fi)}function Ni(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Vi(t,e,n){const r=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Ni(n.addedNodes,r),e=e&&!Ni(n.removedNodes,r);e&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function Wi(t,e,n){const r=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Ni(n.removedNodes,r),e=e&&!Ni(n.addedNodes,r);e&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Hi=new Map;let qi=0;function Ui(){const t=window.devicePixelRatio;t!==qi&&(qi=t,Hi.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Ki(t,e,n){const r=t.canvas,i=r&&ur(r);if(!i)return;const s=qe((t,e)=>{const r=i.clientWidth;n(t,e),r<i.clientWidth&&n()},window),o=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||s(n,r)});return o.observe(i),function(t,e){Hi.size||window.addEventListener("resize",Ui),Hi.set(t,e)}(t,s),o}function Yi(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Hi.delete(t),Hi.size||window.removeEventListener("resize",Ui)}(t)}function Qi(t,e,n){const r=t.canvas,i=qe(e=>{null!==t.ctx&&n(function(t,e){const n=Ii[t.type]||t.type,{x:r,y:i}=pr(t,e);return{type:n,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==i?i:null}}(e,t))},t);return function(t,e,n){t&&t.addEventListener(e,n,Fi)}(r,e,i),i}class Xi extends Ri{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Bi]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ji(i)){const e=vr(t,"width");void 0!==e&&(t.width=e)}if(ji(r))if(""===t.style.height)t.height=t.width/(e||2);else{const e=vr(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Bi])return!1;const n=e[Bi].initial;["height","width"].forEach(t=>{const r=n[t];Ut(r)?e.removeAttribute(t):e.setAttribute(t,r)});const r=n.style||{};return Object.keys(r).forEach(t=>{e.style[t]=r[t]}),e.width=e.width,delete e[Bi],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),i={attach:Vi,detach:Wi,resize:Ki}[e]||Qi;r[e]=i(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:Yi,detach:Yi,resize:Yi}[e]||zi)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return br(t,e,n,r)}isAttached(t){const e=t&&ur(t);return!(!e||!e.isConnected)}}class Ji{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Se(this.x)&&Se(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(t=>{r[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),r}}function Gi(t,e){const n=t.options.ticks,r=function(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return function(t,e,n,r){let i,s=0,o=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===o&&(e.push(t[i]),s++,o=n[s*r])}(e,c,s,o/i),c;const u=function(t,e,n){const r=function(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}(t),i=e.length/n;if(!r)return Math.max(i,1);const s=function(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}(r);for(let t=0,e=s.length-1;t<e;t++){const e=s[t];if(e>i)return e}return Math.max(i,1)}(s,e,i);if(o>0){let t,n;const r=o>1?Math.round((l-a)/(o-1)):null;for(Zi(e,c,u,Ut(r)?0:a-r,a),t=0,n=o-1;t<n;t++)Zi(e,c,u,s[t],s[t+1]);return Zi(e,c,u,l,Ut(r)?e.length:l+r),c}return Zi(e,c,u),c}function Zi(t,e,n,r,i){const s=Jt(r,0),o=Math.min(Jt(i,t.length),t.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(e.push(t[l]),u++,c=Math.round(s+u*n))}const ts=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,es=(t,e)=>Math.min(e||t,t);function ns(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function rs(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,o-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function is(t){return t.drawTicks?t.tickLength:0}function ss(t,e){if(!t.display)return 0;const n=Fn(t.font,e),r=jn(t.padding);return(Kt(t.text)?t.text.length:1)*n.lineHeight+r.height}function os(t,e,n){let r=Ue(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class as extends Ji{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=Xt(t,Number.POSITIVE_INFINITY),e=Xt(e,Number.NEGATIVE_INFINITY),n=Xt(n,Number.POSITIVE_INFINITY),r=Xt(r,Number.NEGATIVE_INFINITY),{min:Xt(t,n),max:Xt(e,r),minDefined:Qt(t),maxDefined:Qt(e)}}getMinMax(t){let e,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)e=o[a].controller.getMinMax(this,t),i||(n=Math.min(n,e.min)),s||(r=Math.max(r,e.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Xt(n,Xt(r,n)),max:Xt(r,Xt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zt(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:r,max:i}=t,s=Gt(e,(i-r)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?ns(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Gi(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zt(this.options.afterUpdate,[this])}beforeSetDimensions(){Zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Zt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],i.label=Zt(e.callback,[i.value,n,t],this)}afterTickToLabelConversion(){Zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=es(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,i=e.maxRotation;let s,o,a,l=r;if(!this._isVisible()||!e.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=Be(this.chart.width-u,0,this.maxWidth);s=t.offset?this.maxWidth/n:h/(n-1),u+6>s&&(s=h/(n-(t.offset?.5:1)),o=this.maxHeight-is(t.grid)-e.padding-ss(t.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=Pe(Math.min(Math.asin(Be((c.highest.height+6)/s,-1,1)),Math.asin(Be(o/a,-1,1))-Math.asin(Be(d/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=ss(r,e.options.font);if(o?(t.width=this.maxWidth,t.height=is(i)+s):(t.height=this.maxHeight,t.width=is(i)+s),n.display&&this.ticks.length){const{first:e,last:r,widest:i,highest:s}=this._getLabelSizes(),a=2*n.padding,l=De(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const e=n.mirror?0:u*i.width+c*s.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*i.width+u*s.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,r,u,c)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:i,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=r*t.width,d=n*e.height):(u=n*t.height,d=r*e.width):"start"===i?d=e.width:"end"===i?u=t.width:"inner"!==i&&(u=t.width/2,d=e.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let n=e.height/2,r=t.height/2;"start"===i?(n=0,r=t.height):"end"===i&&(n=e.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Ut(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=ns(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:r,_longestTextCache:i}=this,s=[],o=[],a=Math.floor(e/es(e,n));let l,c,u,d,h,f,g,p,m,b,y,x=0,v=0;for(l=0;l<e;l+=a){if(d=t[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,g=i[f]=i[f]||{data:{},gc:[]},p=h.lineHeight,m=b=0,Ut(d)||Kt(d)){if(Kt(d))for(c=0,u=d.length;c<u;++c)y=d[c],Ut(y)||Kt(y)||(m=mn(r,g.data,g.gc,m,y),b+=p)}else m=mn(r,g.data,g.gc,m,d),b=p;s.push(m),o.push(b),x=Math.max(m,x),v=Math.max(b,v)}!function(t,e){te(t,t=>{const n=t.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete t.data[n[i]];n.splice(0,r)}})}(i,e);const w=s.indexOf(x),k=o.indexOf(v),_=t=>({width:s[t]||0,height:o[t]||0});return{first:_(0),last:_(e-1),widest:_(w),highest:_(k),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Be(this._alignToPixels?yn(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Nn(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Nn(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=De(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),s=t.autoSkipPadding||0,o=i?i.widest.width+s:0,a=i?i.highest.height+s:0;return this.isHorizontal()?a*n>o*r?o/n:a/r:a*r<o*n?a/n:o/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:o}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=is(i),d=[],h=o.setContext(this.getContext()),f=h.display?h.width:0,g=f/2,p=function(t){return yn(n,t,f)};let m,b,y,x,v,w,k,_,C,M,S,A;if("top"===s)m=p(this.bottom),w=this.bottom-u,_=m-g,M=p(t.top)+g,A=t.bottom;else if("bottom"===s)m=p(this.top),M=t.top,A=p(t.bottom)-g,w=m+g,_=this.top+u;else if("left"===s)m=p(this.right),v=this.right-u,k=m-g,C=p(t.left)+g,S=t.right;else if("right"===s)m=p(this.left),C=t.left,S=p(t.right)-g,v=m+g,k=this.left+u;else if("x"===e){if("center"===s)m=p((t.top+t.bottom)/2+.5);else if(Yt(s)){const t=Object.keys(s)[0],e=s[t];m=p(this.chart.scales[t].getPixelForValue(e))}M=t.top,A=t.bottom,w=m+g,_=w+u}else if("y"===e){if("center"===s)m=p((t.left+t.right)/2);else if(Yt(s)){const t=Object.keys(s)[0],e=s[t];m=p(this.chart.scales[t].getPixelForValue(e))}v=m-g,k=v-u,C=t.left,S=t.right}const D=Jt(r.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/D));for(b=0;b<c;b+=P){const t=this.getContext(b),e=i.setContext(t),r=o.setContext(t),s=e.lineWidth,c=e.color,u=r.dash||[],h=r.dashOffset,f=e.tickWidth,g=e.tickColor,p=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=rs(this,b,a),void 0!==y&&(x=yn(n,y,s),l?v=k=C=S=x:w=_=M=A=x,d.push({tx1:v,ty1:w,tx2:k,ty2:_,x1:C,y1:M,x2:S,y2:A,width:s,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:g,tickBorderDash:p,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,d}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,d=is(n.grid),h=d+c,f=u?-c:h,g=-De(this.labelRotation),p=[];let m,b,y,x,v,w,k,_,C,M,S,A,D="middle";if("top"===r)w=this.bottom-f,k=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,k=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(d);k=t.textAlign,v=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(d);k=t.textAlign,v=t.x}else if("x"===e){if("center"===r)w=(t.top+t.bottom)/2+h;else if(Yt(r)){const t=Object.keys(r)[0],e=r[t];w=this.chart.scales[t].getPixelForValue(e)+h}k=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)v=(t.left+t.right)/2-h;else if(Yt(r)){const t=Object.keys(r)[0],e=r[t];v=this.chart.scales[t].getPixelForValue(e)}k=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===a?D="top":"end"===a&&(D="bottom"));const P=this._getLabelSizes();for(m=0,b=o.length;m<b;++m){y=o[m],x=y.label;const t=i.setContext(this.getContext(m));_=this.getPixelForTick(m)+i.labelOffset,C=this._resolveTickFontOptions(m),M=C.lineHeight,S=Kt(x)?x.length:1;const e=S/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let d,h=k;if(s?(v=_,"inner"===k&&(h=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),A="top"===r?"near"===l||0!==g?-S*M+M/2:"center"===l?-P.highest.height/2-e*M+M:-P.highest.height+M/2:"near"===l||0!==g?M/2:"center"===l?P.highest.height/2-e*M:P.highest.height-S*M,u&&(A*=-1),0===g||t.showLabelBackdrop||(v+=M/2*Math.sin(g))):(w=_,A=(1-S)*M/2),t.showLabelBackdrop){const e=jn(t.backdropPadding),n=P.heights[m],r=P.widths[m];let i=A-e.top,s=0-e.left;switch(D){case"middle":i-=n/2;break;case"bottom":i-=n}switch(k){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":m===b-1?s-=r:m>0&&(s-=r/2)}d={left:s,top:i,width:r+e.width,height:n+e.height,color:t.backdropColor}}p.push({label:x,font:C,textOffset:A,options:{rotation:g,color:n,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:D,translation:[v,w],backdrop:d}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-De(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=t+i,o=this._getLabelSizes().widest.width;let a,l;return"left"===e?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===e?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:i,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,s;const o=(t,e,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(i=0,s=r.length;i<s;++i){const t=r[i];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=yn(t,this.left,s)-s/2,c=yn(t,this.right,o)+o/2,u=d=a):(u=yn(t,this.top,s)-s/2,d=yn(t,this.bottom,o)+o/2,l=c=a),e.save(),e.lineWidth=i.width,e.strokeStyle=i.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&_n(e,n);const r=this.getLabelItems(t);for(const t of r){const n=t.options,r=t.font;Pn(e,t.label,0,t.textOffset,r,n)}n&&Cn(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const i=Fn(n.font),s=jn(n.padding),o=n.align;let a=i.lineHeight/2;"bottom"===e||"center"===e||Yt(e)?(a+=s.bottom,Kt(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d,h,f,g=0;const p=o-i,m=a-s;if(t.isHorizontal()){if(h=Ke(r,s,a),Yt(n)){const t=Object.keys(n)[0],r=n[t];f=u[t].getPixelForValue(r)+p-e}else f="center"===n?(c.bottom+c.top)/2+p-e:ts(t,n,e);d=a-s}else{if(Yt(n)){const t=Object.keys(n)[0],r=n[t];h=u[t].getPixelForValue(r)-m+e}else h="center"===n?(c.left+c.right)/2-m+e:ts(t,n,e);f=Ke(r,o,i),g="left"===n?-xe:xe}return{titleX:h,titleY:f,maxWidth:d,rotation:g}}(this,a,e,o);Pn(t,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:os(o,e,r),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Jt(t.grid&&t.grid.z,-1),r=Jt(t.border&&t.border.z,0);return this._isVisible()&&this.draw===as.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=e.length;i<s;++i){const s=e[i];s[n]!==this.id||t&&s.type!==t||r.push(s)}return r}_resolveTickFontOptions(t){return Fn(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ls{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const r=this.items,i=t.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,function(t,e,n){const r=se(Object.create(null),[n?pn.get(n):{},pn.get(e),t.defaults]);pn.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");pn.route(s,i,l,a)})}(e,t.defaultRoutes);t.descriptors&&pn.describe(e,t.descriptors)}(t,s,n),this.override&&pn.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in pn[r]&&(delete pn[r][n],this.override&&delete un[n])}}class cs{constructor(){this.controllers=new ls(Zr,"datasets",!0),this.elements=new ls(Ji,"elements"),this.plugins=new ls(Object,"plugins"),this.scales=new ls(as,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(e=>{const r=n||this._getRegistryForType(e);n||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):te(e,e=>{const r=n||this._getRegistryForType(e);this._exec(t,r,e)})})}_exec(t,e,n){const r=ue(t);Zt(n["before"+r],[],n),e[t](n),Zt(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var us=new cs;class ds{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),s=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,r){r=r||{};for(const i of t){const t=i.plugin;if(!1===Zt(t[n],[e,r,i.options],t)&&r.cancelable)return!1}return!0}invalidate(){Ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=Jt(n.options&&n.options.plugins,{}),i=function(t){const e={},n=[],r=Object.keys(us.plugins.items);for(let t=0;t<r.length;t++)n.push(us.getPlugin(r[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const r=i[t];-1===n.indexOf(r)&&(n.push(r),e[r.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==r||e?function(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const e=a.id,l=hs(r[e],i);null!==l&&s.push({plugin:a,options:fs(t.config,{plugin:a,local:n[e]},l,o)})}return s}(t,i,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function hs(t,e){return e||!1!==t?!0===t?{}:t:null}function fs(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gs(t,e){const n=pn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function ps(t){if("x"===t||"y"===t||"r"===t)return t}function ms(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function bs(t,...e){if(ps(t))return t;for(const n of e){const e=n.axis||ms(n.position)||t.length>1&&ps(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ys(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function xs(t,e){const n=un[t.type]||{scales:{}},r=e.scales||{},i=gs(t.type,e),s=Object.create(null);return Object.keys(r).forEach(e=>{const o=r[e];if(!Yt(o))return console.error(`Invalid scale configuration for scale: ${e}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=bs(e,o,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return ys(t,"x",n[0])||ys(t,"y",n[0])}return{}}(e,t),pn.scales[o.type]),l=function(t,e){return t===e?"_index_":"_value_"}(a,i),c=n.scales||{};s[e]=oe(Object.create(null),[{axis:a},o,c[a],c[l]])}),t.data.datasets.forEach(n=>{const i=n.type||t.type,o=n.indexAxis||gs(i,e),a=(un[i]||{}).scales||{};Object.keys(a).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,o),i=n[e+"AxisID"]||e;s[i]=s[i]||Object.create(null),oe(s[i],[{axis:e},r[i],a[t]])})}),Object.keys(s).forEach(t=>{const e=s[t];oe(e,[pn.scales[e.type],pn.scale])}),s}function vs(t){const e=t.options||(t.options={});e.plugins=Jt(e.plugins,{}),e.scales=xs(t,e)}function ws(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const ks=new Map,_s=new Set;function Cs(t,e){let n=ks.get(t);return n||(n=e(),ks.set(t,n),_s.add(n)),n}const Ms=(t,e,n)=>{const r=ce(e,n);void 0!==r&&t.add(r)};class Ss{constructor(t){this._config=function(t){return(t=t||{}).data=ws(t.data),vs(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ws(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),vs(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Cs(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Cs(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Cs(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return Cs(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:i}=this,s=this._cachedScopes(t,n),o=s.get(e);if(o)return o;const a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>Ms(a,t,e))),e.forEach(t=>Ms(a,r,t)),e.forEach(t=>Ms(a,un[i]||{},t)),e.forEach(t=>Ms(a,pn,t)),e.forEach(t=>Ms(a,dn,t))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),_s.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,un[e]||{},pn.datasets[e]||{},{type:e},pn,dn]}resolveNamedOptions(t,e,n,r=[""]){const i={$shared:!0},{resolver:s,subPrefixes:o}=As(this._resolverCache,t,r);let a=s;if(function(t,e){const{isScriptable:n,isIndexable:r}=Hn(t);for(const i of e){const e=n(i),s=r(i),o=(s||e)&&t[i];if(e&&(he(o)||Ds(o))||s&&Kt(o))return!0}return!1}(s,e)){i.$shared=!1;a=Wn(s,n=he(n)?n():n,this.createResolver(t,n,o))}for(const t of e)i[t]=a[t];return i}createResolver(t,e,n=[""],r){const{resolver:i}=As(this._resolverCache,t,n);return Yt(e)?Wn(i,e,void 0,r):i}}function As(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:Vn(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},r.set(i,s)}return s}const Ds=t=>Yt(t)&&Object.getOwnPropertyNames(t).some(e=>he(t[e]));const Ps=["top","bottom","left","right","chartArea"];function Es(t,e){return"top"===t||"bottom"===t||-1===Ps.indexOf(t)&&"x"===e}function Os(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Ts(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Zt(n&&n.onComplete,[t],e)}function Ls(t){const e=t.chart,n=e.options.animation;Zt(n&&n.onProgress,[t],e)}function Rs(t){return cr()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const $s={},Bs=t=>{const e=Rs(t);return Object.values($s).filter(t=>t.canvas===e).pop()};function Is(t,e,n){const r=Object.keys(t);for(const i of r){const r=+i;if(r>=e){const s=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=s)}}}class js{static defaults=pn;static instances=$s;static overrides=un;static registry=us;static version="4.5.0";static getChart=Bs;static register(...t){us.add(...t),Fs()}static unregister(...t){us.remove(...t),Fs()}constructor(t,e){const n=this.config=new Ss(e),r=Rs(t),i=Bs(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!cr()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?$i:Xi}(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=qt(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ds,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}(t=>this.update(t),s.resizeDelay||0),this._dataChanges=[],$s[this.id]=this,o&&a?(Ir.listen(this,"complete",Ts),Ir.listen(this,"progress",Ls),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:i}=this;return Ut(t)?e&&i?i:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return us}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yr(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xn(this.canvas,this.ctx),this}stop(){return Ir.stop(this),this}resize(t,e){Ir.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,t,e,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,yr(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Zt(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){te(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let i=[];e&&(i=i.concat(Object.keys(e).map(t=>{const n=e[t],r=bs(t,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}}))),te(i,e=>{const i=e.options,s=i.id,o=bs(s,i),a=Jt(i.type,e.dtype);void 0!==i.position&&Es(i.position,o)===Es(e.dposition)||(i.position=e.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(us.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,t)}),te(r,(t,e)=>{t||delete n[e]}),te(n,t=>{Li.configure(this,t,t.options),Li.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Os("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const r=e[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||gs(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const e=us.getController(s),{datasetElementType:r,dataElementType:o}=pn.datasets[s];Object.assign(e,{dataElementType:us.getElement(o),datasetElementType:r&&us.getElement(r)}),i.controller=new e(this,n),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){te(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(n),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||te(i,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Os("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){te(this.scales,t=>{Li.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);fe(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of e){Is(t,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),r=n(0);for(let t=1;t<e;t++)if(!fe(r,n(t)))return;return Array.from(r).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Li.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],te(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,he(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ir.has(this)?this.attached&&!Ir.running(this)&&Ir.start(this):(this.draw(),Ts({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,i;for(r=0,i=e.length;r<i;++r){const i=e[r];t&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},r=$r(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&_n(e,r),t.controller.draw(),r&&Cn(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return kn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const i=vi.modes[e];return"function"==typeof i?i(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(t=>t&&t._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Nn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",i=this.getDatasetMeta(t),s=i.controller._resolveAnimations(void 0,r);de(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(i,{visible:n}),this.update(e=>e.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ir.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),xn(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete $s[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};te(this.options.events,t=>n(t,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(n,r)=>{t[n]&&(e.removeEventListener(this,n,r),delete t[n])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():s()}unbindEvents(){te(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},te(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let i,s,o,a;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){s=t[o];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}});!ee(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const r=this.options.hover,i=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),s=i(e,t),o=n?t:i(t,e);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:i}=this,s=e,o=this._getActiveElements(t,r,n,s),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,Zt(i.onHover,[t,o,this],this),a&&Zt(i.onClick,[t,o,this],this));const c=!ee(o,r);return(c||e)&&(this._active=o,this._updateHoverStyles(o,r,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}function Fs(){return te(js.instances,t=>t._plugins.invalidate())}function zs(t,e,n,r){const i=$n(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-e)/2,o=Math.min(s,r*e/2),a=t=>{const e=(n-Math.min(s,t))*r/2;return Be(t,0,Math.min(s,e))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Be(i.innerStart,0,o),innerEnd:Be(i.innerEnd,0,o)}}function Ns(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Vs(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const g=i-l;if(r){const t=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(g-(0!==t?g*t/(t+r):g))/2}const p=(g-Math.max(.001,g*d-n/ge)/d)/2,m=l+p+f,b=i-p-f,{outerStart:y,outerEnd:x,innerStart:v,innerEnd:w}=zs(e,h,d,b-m),k=d-y,_=d-x,C=m+y/k,M=b-x/_,S=h+v,A=h+w,D=m+v/S,P=b-w/A;if(t.beginPath(),s){const e=(C+M)/2;if(t.arc(o,a,d,C,e),t.arc(o,a,d,e,M),x>0){const e=Ns(_,M,o,a);t.arc(e.x,e.y,x,M,b+xe)}const n=Ns(A,b,o,a);if(t.lineTo(n.x,n.y),w>0){const e=Ns(A,P,o,a);t.arc(e.x,e.y,w,b+xe,P+Math.PI)}const r=(b-w/h+(m+v/h))/2;if(t.arc(o,a,h,b-w/h,r,!0),t.arc(o,a,h,r,m+v/h,!0),v>0){const e=Ns(S,D,o,a);t.arc(e.x,e.y,v,D+Math.PI,m-xe)}const i=Ns(k,m,o,a);if(t.lineTo(i.x,i.y),y>0){const e=Ns(k,C,o,a);t.arc(e.x,e.y,y,m-xe,C)}}else{t.moveTo(o,a);const e=Math.cos(C)*d+o,n=Math.sin(C)*d+a;t.lineTo(e,n);const r=Math.cos(M)*d+o,i=Math.sin(M)*d+a;t.lineTo(r,i)}t.closePath()}function Ws(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,g="inner"===l.borderAlign;if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=h,g?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){Vs(t,e,n,r,p,i);for(let e=0;e<s;++e)t.stroke();isNaN(a)||(p=o+(a%pe||pe))}g&&function(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+xe,r-xe),t.closePath(),t.clip()}(t,e,p),l.selfJoin&&p-o>=ge&&0===f&&"miter"!==u&&function(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,Re(r-n));if(t.beginPath(),t.arc(i,s,o-c/2,r+d/2,n-d/2),a>0){const e=Math.min(c/a,Re(r-n));t.arc(i,s,a+c/2,n-e/2,r+e/2,!0)}else{const e=Math.min(c/2,o*Re(r-n));if("round"===u)t.arc(i,s,e,n-ge/2,r+ge/2,!0);else if("bevel"===u){const o=2*e*e,a=-o*Math.cos(n+ge/2)+i,l=-o*Math.sin(n+ge/2)+s,c=o*Math.cos(r+ge/2)+i,u=o*Math.sin(r+ge/2)+s;t.lineTo(a,l),t.lineTo(c,u)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,p),s||(Vs(t,e,n,r,p,i),t.stroke())}function Hs(t,e,n=e){t.lineCap=Jt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Jt(n.borderDash,e.borderDash)),t.lineDashOffset=Jt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Jt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Jt(n.borderWidth,e.borderWidth),t.strokeStyle=Jt(n.borderColor,e.borderColor)}function qs(t,e,n){t.lineTo(n.x,n.y)}function Us(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function Ks(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Us(i,n,r),u=function(t){return t.stepped?Mn:t.tension||"monotone"===t.cubicInterpolationMode?Sn:qs}(s);let d,h,f,{move:g=!0,reverse:p}=r||{};for(d=0;d<=c;++d)h=i[(a+(p?c-d:d))%o],h.skip||(g?(t.moveTo(h.x,h.y),g=!1):u(t,f,h,p,s.stepped),f=h);return l&&(h=i[(a+(p?c:0))%o],u(t,f,h,p,s.stepped)),!!l}function Ys(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=Us(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,g,p,m=0,b=0;const y=t=>(o+(c?a-t:t))%s,x=()=>{f!==g&&(t.lineTo(m,g),t.lineTo(m,f),t.lineTo(m,p))};for(l&&(d=i[y(0)],t.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=i[y(u)],d.skip)continue;const e=d.x,n=d.y,r=0|e;r===h?(n<f?f=n:n>g&&(g=n),m=(b*m+e)/++b):(x(),t.lineTo(e,n),h=r,b=0,f=g=n),p=n}x()}function Qs(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?Ys:Ks}const Xs="function"==typeof Path2D;function Js(t,e,n,r){Xs&&!e.options.segment?function(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),Hs(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){const{segments:i,options:s}=e,o=Qs(e);for(const a of i)Hs(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}(t,e,n,r)}class Gs extends Ji{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;lr(this._points,n,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=function(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}(n,i,s,r);return Or(t,!0===r?[{start:o,end:a,loop:s}]:function(t,e,n,r){const i=t.length,s=[];let o,a=e,l=t[e];for(o=e+1;o<=n;++o){const n=t[o%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:e%i,end:(o-1)%i,loop:r}),e=a=n.stop?o:null):(a=o,l.skip&&(e=o)),l=n}return null!==a&&s.push({start:e%i,end:a%i,loop:r}),s}(n,o,a<o?a+i:a,!!t._fullLoop&&0===o&&a===i-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,r=t[e],i=this.points,s=Er(this,{property:e,start:r,end:r});if(!s.length)return;const o=[],a=function(t){return t.stepped?kr:t.tension||"monotone"===t.cubicInterpolationMode?_r:wr}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],d=i[c],h=i[u];if(d===h){o.push(d);continue}const f=a(d,h,Math.abs((r-d[e])/(h[e]-d[e])),n.stepped);f[e]=t[e],o.push(f)}return 1===o.length?o[0]:o}pathSegment(t,e,n){return Qs(this)(t,this,e,n)}path(t,e,n){const r=this.segments,i=Qs(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const o of r)s&=i(t,this,o,{start:e,end:e+n-1});return!!s}draw(t,e,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),Js(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Zs(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}function to(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function eo(t,e,n,r){return t?0:Be(e,n,r)}function no(t){const e=to(t),n=e.right-e.left,r=e.bottom-e.top,i=function(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=Bn(r);return{t:eo(i.top,s.top,0,n),r:eo(i.right,s.right,0,e),b:eo(i.bottom,s.bottom,0,n),l:eo(i.left,s.left,0,e)}}(t,n/2,r/2),s=function(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=In(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Yt(i);return{topLeft:eo(!l||a.top||a.left,s.topLeft,0,o),topRight:eo(!l||a.top||a.right,s.topRight,0,o),bottomLeft:eo(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:eo(!l||a.bottom||a.right,s.bottomRight,0,o)}}(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function ro(t,e,n,r){const i=null===e,s=null===n,o=t&&!(i&&s)&&to(t,r);return o&&(i||Ie(e,o.left,o.right))&&(s||Ie(n,o.top,o.bottom))}function io(t,e){t.rect(e.x,e.y,e.w,e.h)}function so(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}var oo=Object.freeze({__proto__:null,ArcElement:class extends Ji{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=Oe(r,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=Jt(u,a-o),f=$e(i,o,a)&&o!==a,g=h>=pe||f,p=Ie(s,l+d,c+d);return g&&p}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(s+o+l+a)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/4,i=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>pe?Math.floor(n/pe):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);const a=r*(1-Math.sin(Math.min(ge,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Vs(t,e,n,r,l,i);for(let e=0;e<s;++e)t.fill();isNaN(a)||(l=o+(a%pe||pe))}Vs(t,e,n,r,l,i),t.fill()}(t,this,a,i,s),Ws(t,this,a,i,s),t.restore()}},BarElement:class extends Ji{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=no(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?En:io;var a;t.save(),s.w===i.w&&s.h===i.h||(t.beginPath(),o(t,so(s,e,i)),t.clip(),o(t,so(i,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,so(i,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return ro(this,t,e,n)}inXRange(t,e){return ro(this,t,null,e)}inYRange(t,e){return ro(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+r)/2:e,y:i?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:Gs,PointElement:class extends Ji{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(e-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return Zs(this,t,"x",e)}inYRange(t,e){return Zs(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!kn(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,vn(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const ao=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],lo=ao.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function co(t){return ao[t%ao.length]}function uo(t){return lo[t%lo.length]}function ho(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof li?e=function(t,e){return t.backgroundColor=t.data.map(()=>co(e++)),e}(n,e):i instanceof ci?e=function(t,e){return t.backgroundColor=t.data.map(()=>uo(e++)),e}(n,e):i&&(e=function(t,e){return t.borderColor=co(e),t.backgroundColor=uo(e),++e}(n,e))}}function fo(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var go={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i,o=fo(r)||(a=i)&&(a.borderColor||a.backgroundColor)||s&&fo(s)||"rgba(0,0,0,0.1)"!==pn.borderColor||"rgba(0,0,0,0.1)"!==pn.backgroundColor;var a;if(!n.forceOverride&&o)return;const l=ho(t);r.forEach(l)}};function po(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function mo(t){t.data.datasets.forEach(t=>{po(t)})}var bo={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void mo(t);const r=t.width;t.data.datasets.forEach((e,i)=>{const{_data:s,indexAxis:o}=e,a=t.getDatasetMeta(i),l=s||e.data;if("y"===zn([o,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=t.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:u,count:d}=function(t,e){const n=e.length;let r,i=0;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=Be(Fe(e,s.axis,o).lo,0,n-1)),r=c?Be(Fe(e,s.axis,a).hi+1,i,n)-i:n-i,{start:i,count:r}}(a,l);if(d<=(n.threshold||4*r))return void po(e);let h;switch(Ut(s)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":h=function(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let u,d,h,f,g,p=e;for(o[l++]=t[p],u=0;u<s-2;u++){let r,i=0,s=0;const c=Math.floor((u+1)*a)+1+e,m=Math.min(Math.floor((u+2)*a)+1,n)+e,b=m-c;for(r=c;r<m;r++)i+=t[r].x,s+=t[r].y;i/=b,s/=b;const y=Math.floor(u*a)+1+e,x=Math.min(Math.floor((u+1)*a)+1,n)+e,{x:v,y:w}=t[p];for(h=f=-1,r=y;r<x;r++)f=.5*Math.abs((v-i)*(t[r].y-w)-(v-t[r].x)*(s-w)),f>h&&(h=f,d=t[r],g=r);o[l++]=d,p=g}return o[l++]=t[c],o}(l,u,d,r,n);break;case"min-max":h=function(t,e,n,r){let i,s,o,a,l,c,u,d,h,f,g=0,p=0;const m=[],b=e+n-1,y=t[e].x,x=t[b].x-y;for(i=e;i<e+n;++i){s=t[i],o=(s.x-y)/x*r,a=s.y;const e=0|o;if(e===l)a<h?(h=a,c=i):a>f&&(f=a,u=i),g=(p*g+s.x)/++p;else{const n=i-1;if(!Ut(c)&&!Ut(u)){const e=Math.min(c,u),r=Math.max(c,u);e!==d&&e!==n&&m.push({...t[e],x:g}),r!==d&&r!==n&&m.push({...t[r],x:g})}i>0&&n!==d&&m.push(t[n]),m.push(s),l=e,p=0,h=f=a,c=u=d=i}}return m}(l,u,d,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=h})},destroy(t){mo(t)}};function yo(t,e,n,r){if(r)return;let i=e[t],s=n[t];return"angle"===t&&(i=Re(i),s=Re(s)),{property:t,start:i,end:s}}function xo(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function vo(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function wo(t,e){let n=[],r=!1;return Kt(t)?(r=!0,n=t):n=function(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:t,end:e})=>{e=xo(t,e,i);const o=i[t],a=i[e];null!==r?(s.push({x:o.x,y:r}),s.push({x:a.x,y:r})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:a.y}))}),s}(t,e),n.length?new Gs({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function ko(t){return t&&!1!==t.fill}function _o(t,e,n){let r=t[e].fill;const i=[e];let s;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!Qt(r))return r;if(s=t[r],!s)return!1;if(s.visible)return r;i.push(r),r=s.fill}return!1}function Co(t,e,n){const r=function(t){const e=t.options,n=e.fill;let r=Jt(n&&n.target,n);void 0===r&&(r=!!e.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(t);if(Yt(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return Qt(i)&&Math.floor(i)===i?function(t,e,n,r){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=r)return!1;return n}(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Mo(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=So(s,e,"x");if(!(!l||o&&a))if(o)r.unshift(l);else if(t.push(l),!a)break}t.push(...r)}function So(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let t=0;t<s.length;t++){const e=s[t],r=o[e.start][n],c=o[e.end][n];if(Ie(i,r,c)){a=i===r,l=i===c;break}}return{first:a,last:l,point:r}}class Ao{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:i,radius:s}=this;return e=e||{start:0,end:pe},t.arc(r,i,s,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,i=t.angle;return{x:e+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function Do(t){const{chart:e,fill:n,line:r}=t;if(Qt(n))return function(t,e){const n=t.getDatasetMeta(e),r=n&&t.isDatasetVisible(e);return r?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=function(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let t=0;t<r.length;t++){const i=r[t];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}(e,n);a.push(wo({x:null,y:e.bottom},r));for(let t=0;t<s.length;t++){const e=s[t];for(let t=e.start;t<=e.end;t++)Mo(i,o[t],a)}return new Gs({points:i,options:{}})}(t);if("shape"===n)return!0;const i=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=function(t,e,n){let r;return r="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Yt(t)?t.value:e.getBaseValue(),r}(n,e,s),a=[];if(r.grid.circular){const t=e.getPointPositionForValue(0,s);return new Ao({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(o)})}for(let t=0;t<i;++t)a.push(e.getPointPositionForValue(t,o));return a}(t);return function(t){const{scale:e={},fill:n}=t,r=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Yt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(Qt(r)){const t=e.isHorizontal();return{x:t?r:null,y:t?null:r}}return null}(t)}(t);return i instanceof Ao?i:wo(i,r)}function Po(t,e,n){const r=Do(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},g=i.getDatasetMeta(s),p=$r(i,g);r&&o.points.length&&(_n(t,n),function(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&("x"===c?(Eo(t,r,o.top),To(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Eo(t,r,o.bottom)):"y"===c&&(Oo(t,r,o.left),To(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),Oo(t,r,o.right),u=i));To(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}(t,{line:o,target:r,above:h,below:f,area:n,scale:a,axis:l,clip:p}),Cn(t))}function Eo(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:r,end:l}=a,c=i[r],u=i[xo(r,l,i)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Oo(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:r,end:l}=a,c=i[r],u=i[xo(r,l,i)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(n,c.y),t.lineTo(c.x,c.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,u.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function To(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=function(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const t of r){let{start:r,end:a}=t;a=xo(r,a,i);const l=yo(n,i[r],i[a],t.loop);if(!e.segments){o.push({source:t,target:l,start:i[r],end:i[a]});continue}const c=Er(e,l);for(const e of c){const r=yo(n,s[e.start],s[e.end],e.loop),a=Pr(t,i,r);for(const t of a)o.push({source:t,target:e,start:{[n]:vo(l,r,"start",Math.max)},end:{[n]:vo(l,r,"end",Math.min)}})}}return o}(n,r,i);for(const{source:e,target:c,start:u,end:d}of l){const{style:{backgroundColor:l=s}={}}=e,h=!0!==r;t.save(),t.fillStyle=l,Lo(t,o,a,h&&yo(i,u,d)),t.beginPath();const f=!!n.pathSegment(t,e);let g;if(h){f?t.closePath():Ro(t,r,d,i);const e=!!r.pathSegment(t,c,{move:f,reverse:!0});g=f&&e,g||Ro(t,r,u,i)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function Lo(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if("x"===s||"y"===s){let e,r,l,c;"x"===s?(e=o,r=i.top,l=a,c=i.bottom):(e=i.left,r=o,l=i.right,c=a),t.beginPath(),n&&(e=Math.max(e,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),t.rect(e,r,l-e,c-r),t.clip()}}function Ro(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var $o={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Gs&&(l={visible:t.isDatasetVisible(o),index:o,fill:Co(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],l&&!1!==l.fill&&(l.fill=_o(i,o,n.propagate))},beforeDraw(t,e,n){const r="beforeDraw"===n.drawTime,i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&(n.line.updateControlPoints(s,n.axis),r&&n.fill&&Po(t.ctx,n,s))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=t.getSortedVisibleDatasetMetas();for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;ko(n)&&Po(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;ko(r)&&"beforeDatasetDraw"===n.drawTime&&Po(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Bo=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}};class Io extends Ji{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Zt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=Fn(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=Bo(n,i);let l,c;e.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,r,o,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+o;let u=t;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((t,f)=>{const g=n+e/2+i.measureText(t.text).width;(0===f||l[l.length-1]+g+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),a[f]={left:0,top:h,row:d,width:g,height:r},l[l.length-1]+=g+o}),u}_fitCols(t,e,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-t;let u=o,d=0,h=0,f=0,g=0;return this.legendItems.forEach((t,s)=>{const{itemWidth:p,itemHeight:m}=function(t,e,n,r,i){const s=function(t,e,n,r){let i=t.text;i&&"string"!=typeof i&&(i=i.reduce((t,e)=>t.length>e.length?t:e));return e+n.size/2+r.measureText(i).width}(r,t,e,n),o=function(t,e,n){let r=t;"string"!=typeof e.text&&(r=jo(e,n));return r}(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}(n,e,i,t,r);s>0&&h+m+2*o>c&&(u+=d+o,l.push({width:d,height:h}),f+=d+o,g++,d=h=0),a[s]={left:f,top:h,col:g,width:p,height:m},d=Math.max(d,p),h+=m+o}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:i}}=this,s=Cr(i,this.left,this.width);if(this.isHorizontal()){let i=0,o=Ke(n,this.left+r,this.right-this.lineWidths[i]);for(const a of e)i!==a.row&&(i=a.row,o=Ke(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+t+r,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+r}else{let i=0,o=Ke(n,this.top+t+r,this.bottom-this.columnSizes[i].height);for(const a of e)a.col!==i&&(i=a.col,o=Ke(n,this.top+t+r,this.bottom-this.columnSizes[i].height)),a.top=o,a.left+=this.left+r,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;_n(t,this),this._draw(),Cn(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:i,labels:s}=t,o=pn.color,a=Cr(t.rtl,this.left,this.width),l=Fn(s.font),{padding:c}=s,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:g,itemHeight:p}=Bo(s,u),m=this.isHorizontal(),b=this._computeTitleHeight();h=m?{x:Ke(i,this.left+c,this.right-n[0]),y:this.top+c+b,line:0}:{x:this.left+c,y:Ke(i,this.top+b+c,this.bottom-e[0].height),line:0},Mr(this.ctx,t.textDirection);const y=p+c;this.legendItems.forEach((x,v)=>{r.strokeStyle=x.fontColor,r.fillStyle=x.fontColor;const w=r.measureText(x.text).width,k=a.textAlign(x.textAlign||(x.textAlign=s.textAlign)),_=f+d+w;let C=h.x,M=h.y;a.setWidth(this.width),m?v>0&&C+_+c>this.right&&(M=h.y+=y,h.line++,C=h.x=Ke(i,this.left+c,this.right-n[h.line])):v>0&&M+y>this.bottom&&(C=h.x=C+e[h.line].width+c,h.line++,M=h.y=Ke(i,this.top+b+c,this.bottom-e[h.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(g)||g<0)return;r.save();const i=Jt(n.lineWidth,1);if(r.fillStyle=Jt(n.fillStyle,o),r.lineCap=Jt(n.lineCap,"butt"),r.lineDashOffset=Jt(n.lineDashOffset,0),r.lineJoin=Jt(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=Jt(n.strokeStyle,o),r.setLineDash(Jt(n.lineDash,[])),s.usePointStyle){const o={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(t,f/2);wn(r,o,l,e+d,s.pointStyleWidth&&f)}else{const s=e+Math.max((u-g)/2,0),o=a.leftForLtr(t,f),l=In(n.borderRadius);r.beginPath(),Object.values(l).some(t=>0!==t)?En(r,{x:o,y:s,w:f,h:g,radius:l}):r.rect(o,s,f,g),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(C),M,x),C=((t,e,n,r)=>t===(r?"left":"right")?n:"center"===t?(e+n)/2:e)(k,C+f+d,m?C+_:this.right,t.rtl),function(t,e,n){Pn(r,n.text,t,e+p/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(C),M,x),m)h.x+=_+c;else if("string"!=typeof x.text){const t=l.lineHeight;h.y+=jo(x,t)+c}else h.y+=y}),Sr(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Fn(e.font),r=jn(e.padding);if(!e.display)return;const i=Cr(t.rtl,this.left,this.width),s=this.ctx,o=e.position,a=n.size/2,l=r.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=Ke(t.align,u,this.right-d);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+Ke(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const h=Ke(o,u,u+d);s.textAlign=i.textAlign(Ue(o)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=n.string,Pn(s,e.text,h,c,n)}_computeTitleHeight(){const t=this.options.title,e=Fn(t.font),n=jn(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,i;if(Ie(t,this.left,this.right)&&Ie(e,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],Ie(t,r.left,r.left+r.width)&&Ie(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,o=(i=n,null!==(r=s)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);s&&!o&&Zt(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&Zt(e.onHover,[t,n,this],this)}else n&&Zt(e.onClick,[t,n,this],this);var r,i}}function jo(t,e){return e*(t.text?t.text.length:0)}var Fo={id:"legend",_element:Io,start(t,e,n){const r=t.legend=new Io({ctx:t.ctx,options:n,chart:t});Li.configure(t,r,n),Li.addBox(t,r)},stop(t){Li.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Li.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=jn(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class zo extends Ji{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Kt(n.text)?n.text.length:1;this._padding=jn(n.padding);const i=r*Fn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:i,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=Ke(o,n,i),c=e+t,a=i-n):("left"===s.position?(l=n+t,c=Ke(o,r,e),u=-.5*ge):(l=i-t,c=Ke(o,e,r),u=.5*ge),a=r-e),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Fn(e.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(r);Pn(t,e.text,0,0,n,{color:e.color,maxWidth:o,rotation:a,textAlign:Ue(e.align),textBaseline:"middle",translation:[i,s]})}}var No={id:"title",_element:zo,start(t,e,n){!function(t,e){const n=new zo({ctx:t.ctx,options:e,chart:t});Li.configure(t,n,e),Li.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Li.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Li.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Vo=new WeakMap;var Wo={id:"subtitle",start(t,e,n){const r=new zo({ctx:t.ctx,options:n,chart:t});Li.configure(t,r,n),Li.addBox(t,r),Vo.set(t,r)},stop(t){Li.removeBox(t,Vo.get(t)),Vo.delete(t)},beforeUpdate(t,e,n){const r=Vo.get(t);Li.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ho={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();r.add(t.x),i+=t.y,++s}}if(0===s||0===r.size)return!1;return{x:[...r].reduce((t,e)=>t+e)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n,r,i,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){const r=t[n].element;if(r&&r.hasValue()){const t=Te(e,r.getCenterPoint());t<a&&(a=t,i=r)}}if(i){const t=i.tooltipPosition();s=t.x,o=t.y}return{x:s,y:o}}};function qo(t,e){return e&&(Kt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Uo(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Ko(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Yo(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Fn(e.bodyFont),c=Fn(e.titleFont),u=Fn(e.footerFont),d=s.length,h=i.length,f=r.length,g=jn(e.padding);let p=g.height,m=0,b=r.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(p+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){p+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}h&&(p+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let y=0;const x=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=c.string,te(t.title,x),n.font=l.string,te(t.beforeBody.concat(t.afterBody),x),y=e.displayColors?o+2+e.boxPadding:0,te(r,t=>{te(t.before,x),te(t.lines,x),te(t.after,x)}),y=0,n.font=u.string,te(t.footer,x),n.restore(),m+=g.width,{width:m,height:p}}function Qo(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),function(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;return"left"===t&&i+s+o>e.width||"right"===t&&i-s-o<0||void 0}(c,t,e,n)&&(c="center"),c}function Xo(t,e,n){const r=n.yAlign||e.yAlign||function(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Qo(t,e,n,r),yAlign:r}}function Jo(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=In(o);let g=function(t,e){let{x:n,width:r}=t;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,a);const p=function(t,e,n){let{y:r,height:i}=t;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,l,c);return"center"===l?"left"===a?g+=c:"right"===a&&(g-=c):"left"===a?g-=Math.max(u,h)+i:"right"===a&&(g+=Math.max(d,f)+i),{x:Be(g,0,r.width-e.width),y:Be(p,0,r.height-e.height)}}function Go(t,e,n){const r=jn(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function Zo(t){return qo([],Uo(t))}function ta(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ea={beforeTitle:Ht,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ht,beforeBody:Ht,beforeLabel:Ht,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ut(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ht,afterBody:Ht,beforeFooter:Ht,footer:Ht,afterFooter:Ht};function na(t,e,n,r){const i=t[e].call(n,r);return void 0===i?ea[e].call(n,r):i}class ra extends Ji{static positioners=Ho;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new Nr(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Nn(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,r=na(n,"beforeTitle",this,t),i=na(n,"title",this,t),s=na(n,"afterTitle",this,t);let o=[];return o=qo(o,Uo(r)),o=qo(o,Uo(i)),o=qo(o,Uo(s)),o}getBeforeBody(t,e){return Zo(na(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,r=[];return te(t,t=>{const e={before:[],lines:[],after:[]},i=ta(n,t);qo(e.before,Uo(na(i,"beforeLabel",this,t))),qo(e.lines,na(i,"label",this,t)),qo(e.after,Uo(na(i,"afterLabel",this,t))),r.push(e)}),r}getAfterBody(t,e){return Zo(na(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=na(n,"beforeFooter",this,t),i=na(n,"footer",this,t),s=na(n,"afterFooter",this,t);let o=[];return o=qo(o,Uo(r)),o=qo(o,Uo(i)),o=qo(o,Uo(s)),o}_createItems(t){const e=this._active,n=this.chart.data,r=[],i=[],s=[];let o,a,l=[];for(o=0,a=e.length;o<a;++o)l.push(Ko(this.chart,e[o]));return t.filter&&(l=l.filter((e,r,i)=>t.filter(e,r,i,n))),t.itemSort&&(l=l.sort((e,r)=>t.itemSort(e,r,n))),te(l,e=>{const n=ta(t.callbacks,e);r.push(na(n,"labelColor",this,e)),i.push(na(n,"labelPointStyle",this,e)),s.push(na(n,"labelTextColor",this,e))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const t=Ho[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=Yo(this,n),o=Object.assign({},t,e),a=Xo(this.chart,n,o),l=Jo(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=In(o),{x:d,y:h}=t,{width:f,height:g}=e;let p,m,b,y,x,v;return"center"===i?(x=h+g/2,"left"===r?(p=d,m=p-s,y=x+s,v=x-s):(p=d+f,m=p+s,y=x-s,v=x+s),b=p):(m="left"===r?d+Math.max(a,c)+s:"right"===r?d+f-Math.max(l,u)-s:this.caretX,"top"===i?(y=h,x=y-s,p=m-s,b=m+s):(y=h+g,x=y+s,p=m+s,b=m-s),v=y),{x1:p,x2:m,x3:b,y1:y,y2:x,y3:v}}drawTitle(t,e,n){const r=this.title,i=r.length;let s,o,a;if(i){const l=Cr(n.rtl,this.x,this.width);for(t.x=Go(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",s=Fn(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,a=0;a<i;++a)e.fillText(r[a],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+o,a+1===i&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,r,i){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=i,c=Fn(i.bodyFont),u=Go(this,"left",i),d=r.x(u),h=a<c.lineHeight?(c.lineHeight-a)/2:0,f=e.y+h;if(i.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=f+a/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,vn(t,e,n,c),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,vn(t,e,n,c)}else{t.lineWidth=Yt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),o=In(s.borderRadius);Object.values(o).some(t=>0!==t)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,En(t,{x:e,y:f,w:l,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),En(t,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Fn(n.bodyFont);let d=u.lineHeight,h=0;const f=Cr(n.rtl,this.x,this.width),g=function(n){e.fillText(n,f.x(t.x+h),t.y+d/2),t.y+=d+i},p=f.textAlign(s);let m,b,y,x,v,w,k;for(e.textAlign=s,e.textBaseline="middle",e.font=u.string,t.x=Go(this,p,n),e.fillStyle=n.bodyColor,te(this.beforeBody,g),h=o&&"right"!==p?"center"===s?l/2+c:l+2+c:0,x=0,w=r.length;x<w;++x){for(m=r[x],b=this.labelTextColors[x],e.fillStyle=b,te(m.before,g),y=m.lines,o&&y.length&&(this._drawColorBox(e,t,x,f,n),d=Math.max(u.lineHeight,a)),v=0,k=y.length;v<k;++v)g(y[v]),d=u.lineHeight;te(m.after,g)}h=0,d=u.lineHeight,te(this.afterBody,g),t.y-=i}drawFooter(t,e,n){const r=this.footer,i=r.length;let s,o;if(i){const a=Cr(n.rtl,this.x,this.width);for(t.x=Go(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",s=Fn(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,o=0;o<i;++o)e.fillText(r[o],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:i,yAlign:s}=this,{x:o,y:a}=t,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=In(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===s&&this.drawCaret(t,e,n,r),e.lineTo(o+l-d,a),e.quadraticCurveTo(o+l,a,o+l,a+d),"center"===s&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(o+l,a+c-f),e.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(t,e,n,r),e.lineTo(o+h,a+c),e.quadraticCurveTo(o,a+c,o,a+c-h),"center"===s&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Ho[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Yo(this,t),o=Object.assign({},n,this._size),a=Xo(e,t,o),l=Jo(t,o,a,e);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=jn(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),Mr(t,e.textDirection),i.y+=s.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),Sr(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map(({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}),i=!ee(n,r),s=this._positionChanged(r,e);(i||s)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(t,i,e,n),o=this._positionChanged(s,t),a=e||!ee(s,i)||o;return a&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,r){const i=this.options;if("mouseout"===t.type)return[];if(!r)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const s=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:r,options:i}=this,s=Ho[i.position].call(this,t,e);return!1!==s&&(n!==s.x||r!==s.y)}}var ia={id:"tooltip",_element:ra,positioners:Ho,afterInit(t,e,n){n&&(t.tooltip=new ra({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ea},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},sa=Object.freeze({__proto__:null,Colors:go,Decimation:bo,Filler:$o,Legend:Fo,SubTitle:Wo,Title:No,Tooltip:ia});function oa(t,e,n,r){const i=t.indexOf(e);if(-1===i)return((t,e,n,r)=>("string"==typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,r);return i!==t.lastIndexOf(e)?n:i}function aa(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function la(t,e){const n=[],{bounds:r,step:i,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=t,h=i||1,f=c-1,{min:g,max:p}=e,m=!Ut(s),b=!Ut(o),y=!Ut(l),x=(p-g)/(u+1);let v,w,k,_,C=Me((p-g)/f/h)*h;if(C<1e-14&&!m&&!b)return[{value:g},{value:p}];_=Math.ceil(p/C)-Math.floor(g/C),_>f&&(C=Me(_*C/f/h)*h),Ut(a)||(v=Math.pow(10,a),C=Math.ceil(C*v)/v),"ticks"===r?(w=Math.floor(g/C)*C,k=Math.ceil(p/C)*C):(w=g,k=p),m&&b&&i&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((o-s)/i,C/1e3)?(_=Math.round(Math.min((o-s)/C,c)),C=(o-s)/_,w=s,k=o):y?(w=m?s:w,k=b?o:k,_=l-1,C=(k-w)/_):(_=(k-w)/C,_=Ce(_,Math.round(_),C/1e3)?Math.round(_):Math.ceil(_));const M=Math.max(Ee(C),Ee(w));v=Math.pow(10,Ut(a)?M:a),w=Math.round(w*v)/v,k=Math.round(k*v)/v;let S=0;for(m&&(d&&w!==s?(n.push({value:s}),w<s&&S++,Ce(Math.round((w+S*C)*v)/v,s,ca(s,x,t))&&S++):w<s&&S++);S<_;++S){const t=Math.round((w+S*C)*v)/v;if(b&&t>o)break;n.push({value:t})}return b&&d&&k!==o?n.length&&Ce(n[n.length-1].value,o,ca(o,x,t))?n[n.length-1].value=o:n.push({value:o}):b&&k!==o||n.push({value:k}),n}function ca(t,e,{horizontal:n,minRotation:r}){const i=De(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class ua extends as{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ut(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=t=>r=e?r:t,o=t=>i=n?i:t;if(t){const t=_e(r),e=_e(i);t<0&&e<0?o(0):t>0&&e>0&&s(0)}if(r===i){let e=0===i?1:Math.abs(.05*i);o(i+e),t||s(r-e)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=la({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Ae(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return an(t,this.chart.options.locale,this.options.ticks.format)}}class da extends ua{static id="linear";static defaults={ticks:{callback:cn.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qt(t)?t:0,this.max=Qt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=De(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ha=t=>Math.floor(ke(t)),fa=(t,e)=>Math.pow(10,ha(t)+e);function ga(t){return 1===t/Math.pow(10,ha(t))}function pa(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function ma(t,{min:e,max:n}){e=Xt(t.min,e);const r=[],i=ha(e);let s=function(t,e){let n=ha(e-t);for(;pa(t,e,n)>10;)n++;for(;pa(t,e,n)<10;)n--;return Math.min(n,ha(t))}(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),h=Xt(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<n;)r.push({value:h,major:ga(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;const f=Xt(t.max,h);return r.push({value:f,major:ga(f),significand:d}),r}class ba extends as{static id="logarithmic";static defaults={ticks:{callback:cn.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=ua.prototype.parse.apply(this,[t,e]);if(0!==n)return Qt(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qt(t)?Math.max(0,t):null,this.max=Qt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Qt(this._userMin)&&(this.min=t===fa(this.min,0)?fa(this.min,-1):fa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const i=e=>n=t?n:e,s=t=>r=e?r:t;n===r&&(n<=0?(i(1),s(10)):(i(fa(n,-1)),s(fa(r,1)))),n<=0&&i(fa(r,-1)),r<=0&&s(fa(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,e=ma({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Ae(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":an(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ke(t),this._valueRange=ke(this.max)-ke(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ke(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function ya(t){const e=t.ticks;if(e.display&&t.display){const t=jn(e.backdropPadding);return Jt(e.font&&e.font.size,pn.font.size)+t.height}return 0}function xa(t,e,n){return n=Kt(n)?n:[n],{w:bn(t,e.string,n),h:n.length*e.lineHeight}}function va(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function wa(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ge/s:0;for(let l=0;l<s;l++){const s=o.setContext(t.getPointLabelContext(l));i[l]=s.padding;const c=t.getPointPosition(l,t.drawingArea+i[l],a),u=Fn(s.font),d=xa(t.ctx,u,t._pointLabels[l]);r[l]=d;const h=Re(t.getIndexAngle(l)+a),f=Math.round(Pe(h));ka(n,e,h,va(f,c.x,d.w,0,180),va(f,c.y,d.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:ya(s)/2,additionalAngle:o?ge/i:0};let c;for(let s=0;s<i;s++){l.padding=n[s],l.size=e[s];const i=_a(t,s,l);r.push(i),"auto"===a&&(i.visible=Ca(i,c),i.visible&&(c=i))}return r}(t,r,i)}function ka(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function _a(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Pe(Re(l.angle+xe))),u=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,a.h,c),d=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),h=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function Ca(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(kn({x:n,y:r},e)||kn({x:n,y:s},e)||kn({x:i,y:r},e)||kn({x:i,y:s},e))}function Ma(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Ut(a)){const n=In(e.borderRadius),l=jn(e.backdropPadding);t.fillStyle=a;const c=r-l.left,u=i-l.top,d=s-r+l.width,h=o-i+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),En(t,{x:c,y:u,w:d,h:h,radius:n}),t.fill()):t.fillRect(c,u,d,h)}}function Sa(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,pe);else{let n=t.getPointPosition(0,e);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=t.getPointPosition(s,e),i.lineTo(n.x,n.y)}}class Aa extends ua{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:cn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=jn(ya(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Qt(t)&&!isNaN(t)?t:0,this.max=Qt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ya(this.options))}generateTickLabels(t){ua.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=Zt(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?wa(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return Re(t*(pe/(this._pointLabels.length||1))+De(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Ut(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ut(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Nn(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-xe+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Sa(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r,border:i}=e,s=this._pointLabels.length;let o,a,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const e=t._pointLabelItems[i];if(!e.visible)continue;const s=r.setContext(t.getPointLabelContext(i));Ma(n,s,e);const o=Fn(s.font),{x:a,y:l,textAlign:c}=e;Pn(n,t._pointLabels[i],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),o=r.setContext(n),l=i.setContext(n);!function(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),Sa(t,n,o,r),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}}),n.display){for(t.save(),o=s-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:s}=r;s&&i&&(t.lineWidth=s,t.strokeStyle=i,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((r,o)=>{if(0===o&&this.min>=0&&!e.reverse)return;const a=n.setContext(this.getContext(o)),l=Fn(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=l.string,s=t.measureText(r.label).width,t.fillStyle=a.backdropColor;const e=jn(a.backdropPadding);t.fillRect(-s/2-e.left,-i-l.size/2-e.top,s+e.width,l.size+e.height)}Pn(t,r.label,0,-i,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),t.restore()}drawTitle(){}}const Da={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pa=Object.keys(Da);function Ea(t,e){return t-e}function Oa(t,e){if(Ut(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return"function"==typeof r&&(o=r(o)),Qt(o)||(o="string"==typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&(o="week"!==i||!Se(s)&&!0!==s?n.startOf(o,i):n.startOf(o,"isoWeek",s)),+o)}function Ta(t,e,n,r){const i=Pa.length;for(let s=Pa.indexOf(t);s<i-1;++s){const t=Da[Pa[s]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(i*t.size))<=r)return Pa[s]}return Pa[i-1]}function La(t,e,n){if(n){if(n.length){const{lo:r,hi:i}=je(n,e);t[n[r]>=e?n[r]:n[i]]=!0}}else t[e]=!0}function Ra(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&n?function(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}(t,r,i,n):r}class $a extends as{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),r=this._adapter=new fi(t.adapters.date);r.init(e),oe(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Oa(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function a(t){s||isNaN(t.min)||(r=Math.min(r,t.min)),o||isNaN(t.max)||(i=Math.max(i,t.max))}s&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),r=Qt(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),i=Qt(i)&&!isNaN(i)?i:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}(r,i,this.max);return this._unit=e.unit||(n.autoSkip?Ta(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,n,r,i){for(let s=Pa.length-1;s>=Pa.indexOf(n);s--){const n=Pa[s];if(Da[n].common&&t._adapter.diff(i,r,n)>=e-1)return n}return Pa[n?Pa.indexOf(n):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Pa.indexOf(t)+1,n=Pa.length;e<n;++e)if(Da[Pa[e]].common)return Pa[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&s.reverse(),Ra(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,n,r=0,i=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),i=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;r=Be(r,0,s),i=Be(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||Ta(i.minUnit,e,n,this._getLabelCapacity(e)),o=Jt(r.ticks.stepSize,1),a="week"===s&&i.isoWeekday,l=Se(a)||!0===a,c={};let u,d,h=e;if(l&&(h=+t.startOf(h,"isoWeek",a)),h=+t.startOf(h,l?"day":s),t.diff(n,e,s)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+t.add(u,o,s),d++)La(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||La(c,u,f),Object.keys(c).sort(Ea).map(t=>+t)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,i=e||n[r];return this._adapter.format(t,i)}_tickFormatFunction(t,e,n,r){const i=this.options,s=i.ticks.callback;if(s)return Zt(s,[t,e,n],this);const o=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],d=n[e],h=l&&u&&d&&d.major;return this._adapter.format(t,r||(h?u:c))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=De(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),s=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,Ra(this,[t],this._majorUnit),r),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(Oa(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return We(t.sort(Ea))}}function Ba(t,e,n){let r,i,s,o,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Fe(t,"pos",e)),({pos:r,time:s}=t[a]),({pos:i,time:o}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Fe(t,"time",e)),({time:r,pos:s}=t[a]),({time:i,pos:o}=t[l]));const c=i-r;return c?s+(o-s)*(e-r)/c:s}var Ia=Object.freeze({__proto__:null,CategoryScale:class extends as{static id="category";static defaults={ticks:{callback:aa}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:r}of e)t[n]===r&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Ut(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Be(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:oa(n,t,Jt(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)r.push({value:n});return r}getLabelForValue(t){return aa.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:da,LogarithmicScale:ba,RadialLinearScale:Aa,TimeScale:$a,TimeSeriesScale:class extends $a{static id="timeseries";static defaults=$a.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ba(e,this.min),this._tableRange=Ba(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],i=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;++s)l=t[s],l>=e&&l<=n&&r.push(l);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,o=r.length;s<o;++s)c=r[s+1],a=r[s-1],l=r[s],Math.round((c+a)/2)!==l&&i.push({time:l,pos:s/(o-1)});return i}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ba(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Ba(this._table,n*this._tableRange+this._minPos,!0)}}});const ja=[ui,oo,sa,Ia];function Fa(t){return new Date(t).toLocaleDateString()}function za(t){if(t.url.startsWith("http://")||t.url.startsWith("https://")){const e=t.domain.charAt(0).toUpperCase(),n=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899"];return`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="${n[t.domain.length%n.length]}"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white" font-weight="bold">${e}</text></svg>`}switch(t.domain){case"chrome-internal":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23EA4335"/><circle cx="8" cy="8" r="3" fill="white"/></svg>';case"local-file":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F59E0B"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';case"javascript-bookmarklet":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F7DF1E"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="black" font-weight="bold">JS</text></svg>';case"data-uri":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%2310B981"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="white" font-weight="bold">D</text></svg>';case"contact-link":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%238B5CF6"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">@</text></svg>';case"other-protocol":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%236B7280"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';default:return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23E5E7EB"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="%236B7280">?</text></svg>'}}function Na(t){switch(t.domain){case"chrome-internal":return"Chrome";case"local-file":return"Local File";case"javascript-bookmarklet":return"Bookmarklet";case"data-uri":return"Data URI";case"contact-link":return"Contact";case"other-protocol":return"Other";case"invalid-url":return"Invalid URL";default:return t.domain}}async function Va(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}const Wa={DATE_DESC:{key:"date_desc",label:"Newest First",sort:(t,e)=>e.dateAdded-t.dateAdded},DATE_ASC:{key:"date_asc",label:"Oldest First",sort:(t,e)=>t.dateAdded-e.dateAdded},TITLE_ASC:{key:"title_asc",label:"Title A-Z",sort:(t,e)=>t.title.localeCompare(e.title)},TITLE_DESC:{key:"title_desc",label:"Title Z-A",sort:(t,e)=>e.title.localeCompare(t.title)},DOMAIN_ASC:{key:"domain_asc",label:"Domain A-Z",sort:(t,e)=>t.domain.localeCompare(e.domain)}};function Ha(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',M(e,"class","text-red-500"),M(e,"title","Dead link")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function qa(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',M(e,"class","text-green-500"),M(e,"title","Enriched with metadata")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function Ua(t){let e,n,r,i,s;return{c(){e=y("span"),n=x("svg"),r=x("path"),i=x("path"),M(r,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),M(i,"fill-rule","evenodd"),M(i,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),M(i,"clip-rule","evenodd"),M(n,"class","w-3.5 h-3.5"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","text-blue-500 text-xs"),M(e,"title",s="Accessed "+t[0].accessCount+" times")},m(t,s){p(t,e,s),g(e,n),g(n,r),g(n,i)},p(t,n){1&n&&s!==(s="Accessed "+t[0].accessCount+" times")&&M(e,"title",s)},d(t){t&&m(e)}}}function Ka(t){let e,n,r,i,s=t[0].category+"";return{c(){e=y("span"),n=v(" "),r=v(s),M(e,"class","text-xs text-purple-600 bg-purple-50 px-2 py-0.5 rounded"),M(e,"title",i="Category: "+t[0].category)},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,n){1&n&&s!==(s=t[0].category+"")&&A(r,s),1&n&&i!==(i="Category: "+t[0].category)&&M(e,"title",i)},d(t){t&&m(e)}}}function Ya(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),M(e,"class","w-4 h-4"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){p(t,e,r),g(e,n)},d(t){t&&m(e)}}}function Qa(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M5 13l4 4L19 7"),M(e,"class","w-4 h-4 text-green-500"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){p(t,e,r),g(e,n)},d(t){t&&m(e)}}}function Xa(t){let e,n,r,i,s=t[0].folderPath+"";return{c(){e=y("p"),n=v(" "),r=v(s),M(e,"class","text-xs text-gray-400 mt-1 truncate"),M(e,"title",i=t[0].folderPath)},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,n){1&n&&s!==(s=t[0].folderPath+"")&&A(r,s),1&n&&i!==(i=t[0].folderPath)&&M(e,"title",i)},d(t){t&&m(e)}}}function Ja(e){let n,i,s,o,l,c,u,d,h,f,b,x,k,C,S,D,P,E,O,L,R,$,B,I,j,F,z,N,V,W,H,q,U,K=e[0].title+"",Y=e[0].url+"",Q=Na(e[0])+"",X=Fa(e[0].dateAdded)+"",J=!1===e[0].isAlive&&Ha(),G=(e[0].description||e[0].keywords&&e[0].keywords.length>0)&&qa(),Z=e[0].accessCount>0&&Ua(e),tt=e[0].category&&Ka(e);function et(t,e){return t[1]?Qa:Ya}let nt=et(e),rt=nt(e),it=e[0].folderPath&&Xa(e);return{c(){n=y("div"),i=y("div"),s=y("img"),l=w(),c=y("div"),u=y("div"),d=y("h3"),h=v(K),b=w(),x=y("div"),J&&J.c(),k=w(),G&&G.c(),C=w(),Z&&Z.c(),S=w(),D=y("p"),P=v(Y),O=w(),L=y("div"),R=y("div"),$=y("span"),B=v(Q),I=w(),tt&&tt.c(),j=w(),F=y("div"),z=y("button"),rt.c(),N=w(),V=y("span"),W=v(X),H=w(),it&&it.c(),a(s.src,o=za(e[0]))||M(s,"src",o),M(s,"alt","Favicon"),M(s,"class","w-4 h-4 mt-1 flex-shrink-0"),M(d,"class","text-sm font-medium text-gray-900 truncate flex-1"),M(d,"title",f=e[0].title),M(x,"class","flex items-center gap-1 flex-shrink-0"),M(u,"class","flex items-center gap-1.5"),M(D,"class","text-xs text-gray-500 truncate mt-1"),M(D,"title",E=e[0].url),M($,"class","text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded"),M(R,"class","flex items-center gap-1.5"),M(z,"class","p-1 text-gray-400 hover:text-blue-600 transition-colors"),M(z,"title","Copy URL"),M(V,"class","text-xs text-gray-400"),M(F,"class","flex items-center space-x-2"),M(L,"class","flex items-center justify-between mt-2 gap-2 flex-wrap"),M(c,"class","flex-1 min-w-0"),M(i,"class","flex items-start space-x-3"),M(n,"class","bookmark-card bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 svelte-1oo2sed"),M(n,"role","button"),M(n,"tabindex","0"),T(n,"border-red-200",!1===e[0].isAlive),T(n,"bg-red-50",!1===e[0].isAlive)},m(t,r){p(t,n,r),g(n,i),g(i,s),g(i,l),g(i,c),g(c,u),g(u,d),g(d,h),g(u,b),g(u,x),J&&J.m(x,null),g(x,k),G&&G.m(x,null),g(x,C),Z&&Z.m(x,null),g(c,S),g(c,D),g(D,P),g(c,O),g(c,L),g(L,R),g(R,$),g($,B),g(R,I),tt&&tt.m(R,null),g(L,j),g(L,F),g(F,z),rt.m(z,null),g(F,N),g(F,V),g(V,W),g(c,H),it&&it.m(c,null),q||(U=[_(z,"click",e[2]),_(n,"click",e[3]),_(n,"keydown",e[4])],q=!0)},p(t,[e]){1&e&&!a(s.src,o=za(t[0]))&&M(s,"src",o),1&e&&K!==(K=t[0].title+"")&&A(h,K),1&e&&f!==(f=t[0].title)&&M(d,"title",f),!1===t[0].isAlive?J||(J=Ha(),J.c(),J.m(x,k)):J&&(J.d(1),J=null),t[0].description||t[0].keywords&&t[0].keywords.length>0?G||(G=qa(),G.c(),G.m(x,C)):G&&(G.d(1),G=null),t[0].accessCount>0?Z?Z.p(t,e):(Z=Ua(t),Z.c(),Z.m(x,null)):Z&&(Z.d(1),Z=null),1&e&&Y!==(Y=t[0].url+"")&&A(P,Y),1&e&&E!==(E=t[0].url)&&M(D,"title",E),1&e&&Q!==(Q=Na(t[0])+"")&&A(B,Q),t[0].category?tt?tt.p(t,e):(tt=Ka(t),tt.c(),tt.m(R,null)):tt&&(tt.d(1),tt=null),nt!==(nt=et(t))&&(rt.d(1),rt=nt(t),rt&&(rt.c(),rt.m(z,null))),1&e&&X!==(X=Fa(t[0].dateAdded)+"")&&A(W,X),t[0].folderPath?it?it.p(t,e):(it=Xa(t),it.c(),it.m(c,null)):it&&(it.d(1),it=null),1&e&&T(n,"border-red-200",!1===t[0].isAlive),1&e&&T(n,"bg-red-50",!1===t[0].isAlive)},i:t,o:t,d(t){t&&m(n),J&&J.d(),G&&G.d(),Z&&Z.d(),tt&&tt.d(),rt.d(),it&&it.d(),q=!1,r(U)}}}function Ga(t){chrome.tabs.create({url:t})}function Za(t,e,n){let{bookmark:r}=e;I();let i=!1;return t.$$set=t=>{"bookmark"in t&&n(0,r=t.bookmark)},[r,i,async function(t){t.stopPropagation(),await Va(r.url)&&(n(1,i=!0),setTimeout(()=>n(1,i=!1),2e3))},()=>Ga(r.url),t=>"Enter"===t.key&&Ga(r.url)]}class tl extends ut{constructor(t){super(),ct(this,t,Za,Ja,s,{bookmark:0})}}function el(t){let e,n,r;return{c(){e=y("input"),M(e,"type","checkbox"),e.checked=t[1],M(e,"class","mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded")},m(i,s){p(i,e,s),n||(r=_(e,"change",t[4]),n=!0)},p(t,n){2&n&&(e.checked=t[1])},d(t){t&&m(e),n=!1,r()}}}function nl(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',M(e,"class","text-red-500"),M(e,"title","Dead link")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function rl(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',M(e,"class","text-green-500"),M(e,"title","Enriched with metadata")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function il(t){let e,n,r,i,s;return{c(){e=y("span"),n=x("svg"),r=x("path"),i=x("path"),M(r,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),M(i,"fill-rule","evenodd"),M(i,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),M(i,"clip-rule","evenodd"),M(n,"class","w-3.5 h-3.5"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","text-blue-500 text-xs"),M(e,"title",s="Accessed "+t[0].accessCount+" times")},m(t,s){p(t,e,s),g(e,n),g(n,r),g(n,i)},p(t,n){1&n&&s!==(s="Accessed "+t[0].accessCount+" times")&&M(e,"title",s)},d(t){t&&m(e)}}}function sl(t){let e,n,r,i=t[0].category+"";return{c(){e=y("span"),n=v(" "),r=v(i),M(e,"class","text-xs text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded whitespace-nowrap flex-shrink-0 hidden sm:inline-block"),M(e,"title","Category")},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){1&e&&i!==(i=t[0].category+"")&&A(r,i)},d(t){t&&m(e)}}}function ol(t){let e,n,r,i,s=t[0].folderPath+"";return{c(){e=y("p"),n=v(" "),r=v(s),M(e,"class","text-xs text-gray-400 mt-1 truncate"),M(e,"title",i=t[0].folderPath)},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,n){1&n&&s!==(s=t[0].folderPath+"")&&A(r,s),1&n&&i!==(i=t[0].folderPath)&&M(e,"title",i)},d(t){t&&m(e)}}}function al(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),M(e,"class","w-4 h-4"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){p(t,e,r),g(e,n)},d(t){t&&m(e)}}}function ll(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M5 13l4 4L19 7"),M(e,"class","w-4 h-4 text-green-500"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){p(t,e,r),g(e,n)},d(t){t&&m(e)}}}function cl(e){let n,i,s,o,l,c,u,d,h,f,b,x,k,C,S,D,P,E,O,L,R,$,B,I,j,F,z,N,V,W,H,q,U,K,Y,Q,X,J,G=e[0].title+"",Z=e[0].url+"",tt=Na(e[0])+"",et=Fa(e[0].dateAdded)+"",nt=e[2]&&el(e),rt=!1===e[0].isAlive&&nl(),it=(e[0].description||e[0].keywords&&e[0].keywords.length>0)&&rl(),st=e[0].accessCount>0&&il(e),ot=e[0].category&&sl(e),at=e[0].folderPath&&ol(e);function lt(t,e){return t[3]?ll:al}let ct=lt(e),ut=ct(e);return{c(){n=y("div"),i=y("div"),nt&&nt.c(),s=w(),o=y("img"),c=w(),u=y("div"),d=y("div"),h=y("div"),f=y("div"),b=y("h3"),x=v(G),C=w(),S=y("div"),rt&&rt.c(),D=w(),it&&it.c(),P=w(),st&&st.c(),E=w(),O=y("div"),L=y("p"),R=y("span"),$=v(Z),I=w(),j=y("span"),F=v(tt),z=w(),ot&&ot.c(),N=w(),at&&at.c(),V=w(),W=y("div"),H=y("span"),q=v(et),U=w(),K=y("button"),ut.c(),Y=w(),Q=y("button"),Q.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',a(o.src,l=za(e[0]))||M(o,"src",l),M(o,"alt","Favicon"),M(o,"class","w-4 h-4 mr-3 flex-shrink-0"),M(b,"class","text-sm font-medium text-gray-900 truncate hover:text-blue-600 flex-1"),M(b,"title",k=e[0].title),M(S,"class","flex items-center gap-1 flex-shrink-0"),M(f,"class","flex items-center gap-1.5"),M(R,"class","truncate block"),M(L,"class","text-xs text-gray-500 flex-1 min-w-0"),M(L,"title",B=e[0].url),M(j,"class","text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded whitespace-nowrap flex-shrink-0"),M(O,"class","flex items-center mt-1 space-x-2 sm:space-x-4"),M(h,"class","flex-1 min-w-0"),M(H,"class","text-xs text-gray-400 whitespace-nowrap hidden sm:block"),M(K,"class","p-1 text-gray-400 hover:text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity svelte-hs6pz6"),M(K,"title","Copy URL"),M(Q,"class","p-1 text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity svelte-hs6pz6"),M(Q,"title","Delete bookmark"),M(W,"class","flex items-center ml-2 sm:ml-4 space-x-2 flex-shrink-0"),M(d,"class","flex items-center justify-between"),M(u,"class","flex-1 min-w-0 cursor-pointer"),M(u,"role","button"),M(u,"tabindex","0"),M(i,"class","flex items-center px-4 py-3"),M(n,"class","bookmark-list-item group bg-white border-b border-gray-200 hover:bg-gray-50 transition-colors svelte-hs6pz6"),T(n,"selected",e[1]),T(n,"bg-red-50",!1===e[0].isAlive),T(n,"border-red-200",!1===e[0].isAlive)},m(t,r){p(t,n,r),g(n,i),nt&&nt.m(i,null),g(i,s),g(i,o),g(i,c),g(i,u),g(u,d),g(d,h),g(h,f),g(f,b),g(b,x),g(f,C),g(f,S),rt&&rt.m(S,null),g(S,D),it&&it.m(S,null),g(S,P),st&&st.m(S,null),g(h,E),g(h,O),g(O,L),g(L,R),g(R,$),g(O,I),g(O,j),g(j,F),g(O,z),ot&&ot.m(O,null),g(h,N),at&&at.m(h,null),g(d,V),g(d,W),g(W,H),g(H,q),g(W,U),g(W,K),ut.m(K,null),g(W,Y),g(W,Q),X||(J=[_(K,"click",e[7]),_(Q,"click",e[6]),_(u,"click",e[5]),_(u,"keydown",e[8])],X=!0)},p(t,[e]){t[2]?nt?nt.p(t,e):(nt=el(t),nt.c(),nt.m(i,s)):nt&&(nt.d(1),nt=null),1&e&&!a(o.src,l=za(t[0]))&&M(o,"src",l),1&e&&G!==(G=t[0].title+"")&&A(x,G),1&e&&k!==(k=t[0].title)&&M(b,"title",k),!1===t[0].isAlive?rt||(rt=nl(),rt.c(),rt.m(S,D)):rt&&(rt.d(1),rt=null),t[0].description||t[0].keywords&&t[0].keywords.length>0?it||(it=rl(),it.c(),it.m(S,P)):it&&(it.d(1),it=null),t[0].accessCount>0?st?st.p(t,e):(st=il(t),st.c(),st.m(S,null)):st&&(st.d(1),st=null),1&e&&Z!==(Z=t[0].url+"")&&A($,Z),1&e&&B!==(B=t[0].url)&&M(L,"title",B),1&e&&tt!==(tt=Na(t[0])+"")&&A(F,tt),t[0].category?ot?ot.p(t,e):(ot=sl(t),ot.c(),ot.m(O,null)):ot&&(ot.d(1),ot=null),t[0].folderPath?at?at.p(t,e):(at=ol(t),at.c(),at.m(h,null)):at&&(at.d(1),at=null),1&e&&et!==(et=Fa(t[0].dateAdded)+"")&&A(q,et),ct!==(ct=lt(t))&&(ut.d(1),ut=ct(t),ut&&(ut.c(),ut.m(K,null))),2&e&&T(n,"selected",t[1]),1&e&&T(n,"bg-red-50",!1===t[0].isAlive),1&e&&T(n,"border-red-200",!1===t[0].isAlive)},i:t,o:t,d(t){t&&m(n),nt&&nt.d(),rt&&rt.d(),it&&it.d(),st&&st.d(),ot&&ot.d(),at&&at.d(),ut.d(),X=!1,r(J)}}}function ul(t,e,n){let{bookmark:r}=e,{isSelected:i=!1}=e,{multiSelectMode:s=!1}=e;const o=I();let a=!1;function l(){var t;s||(t=r.url,chrome.tabs.create({url:t}))}return t.$$set=t=>{"bookmark"in t&&n(0,r=t.bookmark),"isSelected"in t&&n(1,i=t.isSelected),"multiSelectMode"in t&&n(2,s=t.multiSelectMode)},[r,i,s,a,function(t){o("toggle-select",{bookmarkId:r.id,selected:t.target.checked})},l,function(t){t.stopPropagation(),o("delete",{bookmarkId:r.id})},async function(t){t.stopPropagation(),await Va(r.url)&&(n(3,a=!0),setTimeout(()=>n(3,a=!1),2e3))},t=>"Enter"===t.key&&l()]}class dl extends ut{constructor(t){super(),ct(this,t,ul,cl,s,{bookmark:0,isSelected:1,multiSelectMode:2})}}function hl(t,e,n){const r=t.slice();return r[13]=e[n],r}function fl(t,e,n){const r=t.slice();return r[16]=e[n],r}function gl(t,e,n){const r=t.slice();return r[19]=e[n],r}function pl(t,e,n){const r=t.slice();return r[19]=e[n],r}function ml(e){let n,r,i;return{c(){n=y("button"),n.innerHTML='<svg class="h-5 w-5 text-gray-400 hover:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',M(n,"class","absolute inset-y-0 right-0 pr-3 flex items-center"),M(n,"type","button"),M(n,"title","Clear search (Esc)")},m(t,s){p(t,n,s),r||(i=_(n,"click",e[7]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}function bl(t){let e,n,r,i,s=nt(t[4].positive),o=[];for(let e=0;e<s.length;e+=1)o[e]=yl(pl(t,s,e));let a=nt(t[4].negative),l=[];for(let e=0;e<a.length;e+=1)l[e]=xl(gl(t,a,e));let c=nt(t[4].phrases),u=[];for(let e=0;e<c.length;e+=1)u[e]=vl(fl(t,c,e));let d=nt(t[4].regexPatterns),h=[];for(let e=0;e<d.length;e+=1)h[e]=wl(hl(t,d,e));return{c(){e=y("div");for(let t=0;t<o.length;t+=1)o[t].c();n=w();for(let t=0;t<l.length;t+=1)l[t].c();r=w();for(let t=0;t<u.length;t+=1)u[t].c();i=w();for(let t=0;t<h.length;t+=1)h[t].c();M(e,"class","flex flex-wrap gap-1.5 mt-2")},m(t,s){p(t,e,s);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);g(e,n);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);g(e,r);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(e,null);g(e,i);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null)},p(t,f){if(16&f){let r;for(s=nt(t[4].positive),r=0;r<s.length;r+=1){const i=pl(t,s,r);o[r]?o[r].p(i,f):(o[r]=yl(i),o[r].c(),o[r].m(e,n))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}if(16&f){let n;for(a=nt(t[4].negative),n=0;n<a.length;n+=1){const i=gl(t,a,n);l[n]?l[n].p(i,f):(l[n]=xl(i),l[n].c(),l[n].m(e,r))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}if(16&f){let n;for(c=nt(t[4].phrases),n=0;n<c.length;n+=1){const r=fl(t,c,n);u[n]?u[n].p(r,f):(u[n]=vl(r),u[n].c(),u[n].m(e,i))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}if(16&f){let n;for(d=nt(t[4].regexPatterns),n=0;n<d.length;n+=1){const r=hl(t,d,n);h[n]?h[n].p(r,f):(h[n]=wl(r),h[n].c(),h[n].m(e,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}},d(t){t&&m(e),b(o,t),b(l,t),b(u,t),b(h,t)}}}function yl(t){let e,n,r,i,s,o=t[19]+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=w(),s=v(o),M(r,"fill-rule","evenodd"),M(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),M(r,"clip-rule","evenodd"),M(n,"class","w-3 h-3 mr-1"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800")},m(t,o){p(t,e,o),g(e,n),g(n,r),g(e,i),g(e,s)},p(t,e){16&e&&o!==(o=t[19]+"")&&A(s,o)},d(t){t&&m(e)}}}function xl(t){let e,n,r,i,s,o=t[19]+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=w(),s=v(o),M(r,"fill-rule","evenodd"),M(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),M(r,"clip-rule","evenodd"),M(n,"class","w-3 h-3 mr-1"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800")},m(t,o){p(t,e,o),g(e,n),g(n,r),g(e,i),g(e,s)},p(t,e){16&e&&o!==(o=t[19]+"")&&A(s,o)},d(t){t&&m(e)}}}function vl(t){let e,n,r,i,s,o,a=t[16]+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=v('\n          "'),s=v(a),o=v('"'),M(r,"fill-rule","evenodd"),M(r,"d","M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z"),M(r,"clip-rule","evenodd"),M(n,"class","w-3 h-3 mr-1"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800")},m(t,a){p(t,e,a),g(e,n),g(n,r),g(e,i),g(e,s),g(e,o)},p(t,e){16&e&&a!==(a=t[16]+"")&&A(s,a)},d(t){t&&m(e)}}}function wl(t){let e,n,r,i,s,o,a=t[13]+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=w(),s=v(a),o=w(),M(r,"stroke-linecap","round"),M(r,"stroke-linejoin","round"),M(r,"stroke-width","2"),M(r,"d","M10 20l4-16m4 4l-4 4 4 4M6 16l-4-4 4-4"),M(n,"class","w-3 h-3 mr-1"),M(n,"fill","none"),M(n,"stroke","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800")},m(t,a){p(t,e,a),g(e,n),g(n,r),g(e,i),g(e,s),g(e,o)},p(t,e){16&e&&a!==(a=t[13]+"")&&A(s,a)},d(t){t&&m(e)}}}function kl(t){let e;return{c(){e=y("div"),e.innerHTML='<h4 class="font-medium text-gray-900 mb-3 flex items-center gap-2"><svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>\n        Search Syntax</h4> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-green-100 text-green-800 rounded text-xs whitespace-nowrap">+term</code> <span class="text-gray-600">Must include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-800 rounded text-xs whitespace-nowrap">-term</code> <span class="text-gray-600">Must NOT include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-blue-100 text-blue-800 rounded text-xs whitespace-nowrap">&quot;exact phrase&quot;</code> <span class="text-gray-600">Match exact phrase</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-gray-100 text-gray-700 rounded text-xs whitespace-nowrap">word</code> <span class="text-gray-600">Regular search term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-purple-100 text-purple-800 rounded text-xs whitespace-nowrap">/regex/</code> <span class="text-gray-600">Regular expression pattern</span></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><svg class="w-4 h-4 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>\n          Special Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">category:tech</code> <span class="text-gray-600"> Filter by category</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">domain:github.com</code> <span class="text-gray-600"> Filter by domain</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">folder:&quot;Work/Projects&quot;</code> <span class="text-gray-600"> Filter by folder path</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">accessed:yes</code> <span class="text-gray-600"> Has been accessed (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">stale:yes</code> <span class="text-gray-600"> Old &amp; never accessed</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-teal-100 text-teal-800 rounded text-xs whitespace-nowrap">enriched:yes</code> <span class="text-gray-600"> Has metadata (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-700 rounded text-xs whitespace-nowrap">dead:yes</code> <span class="text-gray-600"> Dead links (yes/no)</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><p class="text-xs text-gray-500"><strong>Example:</strong> <code class="bg-gray-100 px-1 rounded">javascript +tutorial -video &quot;best practices&quot;</code></p> <p class="text-xs text-gray-500 mt-1"><strong>With filters:</strong> <code class="bg-gray-100 px-1 rounded">domain:github.com category:development enriched:yes</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Regex:</strong> <code class="bg-gray-100 px-1 rounded">/react.*hooks?/</code></p></div>',M(e,"class","absolute z-20 w-full mt-2 p-4 bg-white border border-gray-200 rounded-lg shadow-lg max-h-[70vh] overflow-y-auto")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function _l(e){let n,i,s,o,a,l,c,u,d,h,f,b,x,v=e[0]&&ml(e),k=e[0]&&(e[4].positive.length>0||e[4].negative.length>0||e[4].phrases.length>0||e[4].regexPatterns.length>0)&&bl(e),C=e[3]&&kl();return{c(){n=y("div"),i=y("div"),s=y("div"),o=y("div"),o.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',a=w(),l=y("input"),c=w(),v&&v.c(),u=w(),d=y("button"),d.innerHTML='<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',h=w(),k&&k.c(),f=w(),C&&C.c(),M(o,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),M(l,"type","text"),M(l,"placeholder",e[1]),M(l,"class","block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"),M(l,"autocomplete","off"),M(l,"spellcheck","false"),M(s,"class","relative flex-1"),M(d,"class","p-2.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg border border-gray-300 transition-colors"),M(d,"type","button"),M(d,"title","Search help"),M(i,"class","flex items-center gap-2"),M(n,"class","relative mb-4")},m(t,r){p(t,n,r),g(n,i),g(i,s),g(s,o),g(s,a),g(s,l),e[9](l),D(l,e[0]),g(s,c),v&&v.m(s,null),g(i,u),g(i,d),g(n,h),k&&k.m(n,null),g(n,f),C&&C.m(n,null),b||(x=[_(l,"input",e[10]),_(l,"input",e[5]),_(l,"keydown",e[6]),_(d,"click",e[8])],b=!0)},p(t,[e]){2&e&&M(l,"placeholder",t[1]),1&e&&l.value!==t[0]&&D(l,t[0]),t[0]?v?v.p(t,e):(v=ml(t),v.c(),v.m(s,null)):v&&(v.d(1),v=null),t[0]&&(t[4].positive.length>0||t[4].negative.length>0||t[4].phrases.length>0||t[4].regexPatterns.length>0)?k?k.p(t,e):(k=bl(t),k.c(),k.m(n,f)):k&&(k.d(1),k=null),t[3]?C||(C=kl(),C.c(),C.m(n,null)):C&&(C.d(1),C=null)},i:t,o:t,d(t){t&&m(n),e[9](null),v&&v.d(),k&&k.d(),C&&C.d(),b=!1,r(x)}}}function Cl(t,e,n){let r;const i=I();let s,o,{value:a=""}=e,{placeholder:l='Search: use +term (must include), -term (exclude), "exact phrase"'}=e,c=!1;function u(){n(0,a=""),i("search",{query:""}),o?.focus()}return t.$$set=t=>{"value"in t&&n(0,a=t.value),"placeholder"in t&&n(1,l=t.placeholder)},t.$$.update=()=>{1&t.$$.dirty&&n(4,r=function(t){if(!t)return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[]};const e=[],n=[],r=[],i=[],s=[];(t.match(/\/([^\/]+)\/([gimsuvy]*)?/g)||[]).forEach(t=>s.push(t));let o=t.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();return(o.match(/"([^"]+)"/g)||[]).forEach(t=>r.push(t.slice(1,-1))),o=o.replace(/"[^"]+"/g,"").trim(),o.split(/\s+/).filter(t=>t.length>0).forEach(t=>{t.startsWith("+")&&t.length>1?e.push(t.slice(1)):t.startsWith("-")&&t.length>1?n.push(t.slice(1)):i.push(t)}),{positive:e,negative:n,phrases:r,regular:i,regexPatterns:s}}(a))},[a,l,o,c,r,function(t){n(0,a=t.target.value),clearTimeout(s),s=setTimeout(()=>{i("search",{query:a})},200)},function(t){"Escape"===t.key?u():"Enter"===t.key&&(clearTimeout(s),i("search",{query:a}))},u,function(){n(3,c=!c)},function(t){z[t?"unshift":"push"](()=>{o=t,n(2,o)})},function(){a=this.value,n(0,a)}]}class Ml extends ut{constructor(t){super(),ct(this,t,Cl,_l,s,{value:0,placeholder:1})}}var Sl="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Al(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dl={exports:{}};Dl.exports=function(){
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation.
	    Permission to use, copy, modify, and/or distribute this software for any
	    purpose with or without fee is hereby granted.
	    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	    PERFORMANCE OF THIS SOFTWARE.
	    ***************************************************************************** */
var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};function r(t,e,n){if(n||2===arguments.length)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Sl,s=Object.keys,o=Array.isArray;function a(t,e){return"object"!=typeof e||s(e).forEach(function(n){t[n]=e[n]}),t}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function u(t,e){return c.call(t,e)}function d(t,e){"function"==typeof e&&(e=e(l(t))),("undefined"==typeof Reflect?s:Reflect.ownKeys)(e).forEach(function(n){f(t,n,e[n])})}var h=Object.defineProperty;function f(t,e,n,r){h(t,e,a(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function g(t){return{from:function(e){return t.prototype=Object.create(e.prototype),f(t.prototype,"constructor",t),{extend:d.bind(null,t.prototype)}}}}var p=Object.getOwnPropertyDescriptor;function m(t,e){var n;return p(t,e)||(n=l(t))&&m(n,e)}var b=[].slice;function y(t,e,n){return b.call(t,e,n)}function x(t,e){return e(t)}function v(t){if(!t)throw new Error("Assertion Failed")}function w(t){i.setImmediate?setImmediate(t):setTimeout(t,0)}function k(t,e){return t.reduce(function(t,n,r){var i=e(n,r);return i&&(t[i[0]]=i[1]),t},{})}function _(t,e){if("string"==typeof e&&u(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var s=_(t,e[r]);n.push(s)}return n}var o=e.indexOf(".");if(-1!==o){var a=t[e.substr(0,o)];return null==a?void 0:_(a,e.substr(o+1))}}function C(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){v("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)C(t,e[r],n[r])}else{var s=e.indexOf(".");if(-1!==s){var a=e.substr(0,s),l=e.substr(s+1);if(""===l)void 0===n?o(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var c=t[a];c&&u(t,a)||(c=t[a]={}),C(c,l,n)}}else void 0===n?o(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function M(t,e){"string"==typeof e?C(t,e,void 0):"length"in e&&[].map.call(e,function(e){C(t,e,void 0)})}function S(t){var e={};for(var n in t)u(t,n)&&(e[n]=t[n]);return e}var A=[].concat;function D(t){return A.apply([],t)}var P="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return i[t]}),E=new Set(P.map(function(t){return i[t]}));function O(t){var e={};for(var n in t)if(u(t,n)){var r=t[n];e[n]=!r||"object"!=typeof r||E.has(r.constructor)?r:O(r)}return e}function T(t){for(var e in t)if(u(t,e))return!1;return!0}var L=null;function R(t){L=new WeakMap;var e=$(t);return L=null,e}function $(t){if(!t||"object"!=typeof t)return t;var e=L.get(t);if(e)return e;if(o(t)){e=[],L.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push($(t[n]))}else if(E.has(t.constructor))e=t;else{var i=l(t);for(var s in e=i===Object.prototype?{}:Object.create(i),L.set(t,e),t)u(t,s)&&(e[s]=$(t[s]))}return e}var B={}.toString;function I(t){return B.call(t).slice(8,-1)}var j="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",F="symbol"==typeof j?function(t){var e;return null!=t&&(e=t[j])&&e.apply(t)}:function(){return null};function z(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n>=0}var N={};function V(t){var e,n,r,i;if(1===arguments.length){if(o(t))return t.slice();if(this===N&&"string"==typeof t)return[t];if(i=F(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var W="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},H=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],q=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(H),U={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(t,e){this.name=t,this.message=e}function Y(t,e){return t+". Errors: "+Object.keys(e).map(function(t){return e[t].toString()}).filter(function(t,e,n){return n.indexOf(t)===e}).join("\n")}function Q(t,e,n,r){this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Y(t,e)}function X(t,e){this.name="BulkError",this.failures=Object.keys(e).map(function(t){return e[t]}),this.failuresByPos=e,this.message=Y(t,this.failures)}g(K).from(Error).extend({toString:function(){return this.name+": "+this.message}}),g(Q).from(K),g(X).from(K);var J=q.reduce(function(t,e){return t[e]=e+"Error",t},{}),G=K,Z=q.reduce(function(t,e){var n=e+"Error";function r(t,r){this.name=n,t?"string"==typeof t?(this.message="".concat(t).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=U[e]||n,this.inner=null)}return g(r).from(G),t[e]=r,t},{});Z.Syntax=SyntaxError,Z.Type=TypeError,Z.Range=RangeError;var tt=H.reduce(function(t,e){return t[e+"Error"]=Z[e],t},{});function et(t,e){if(!t||t instanceof K||t instanceof TypeError||t instanceof SyntaxError||!t.name||!tt[t.name])return t;var n=new tt[t.name](e||t.message,t);return"stack"in t&&f(n,"stack",{get:function(){return this.inner.stack}}),n}var nt=q.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=Z[e]),t},{});function rt(){}function it(t){return t}function st(t,e){return null==t||t===it?e:function(n){return e(t(n))}}function ot(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function at(t,e){return t===rt?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ot(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ot(i,this.onerror):i),void 0!==s?s:n}}function lt(t,e){return t===rt?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ot(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ot(r,this.onerror):r)}}function ct(t,e){return t===rt?e:function(n){var r=t.apply(this,arguments);a(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ot(i,this.onsuccess):i),s&&(this.onerror=this.onerror?ot(s,this.onerror):s),void 0===r?void 0===o?void 0:o:a(r,o)}}function ut(t,e){return t===rt?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function dt(t,e){return t===rt?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}nt.ModifyError=Q,nt.DexieError=K,nt.BulkError=X;var ht="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ft(t,e){ht=t}var gt={},pt=100,mt="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,l(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,l(e),t]}(),bt=mt[0],yt=mt[1],xt=mt[2],vt=yt&&yt.then,wt=bt&&bt.constructor,kt=!!xt;function _t(){queueMicrotask(Wt)}var Ct=function(t,e){Tt.push([t,e]),St&&(_t(),St=!1)},Mt=!0,St=!0,At=[],Dt=[],Pt=it,Et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:rt,pgp:!1,env:{},finalize:rt},Ot=Et,Tt=[],Lt=0,Rt=[];function $t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=Ot;if("function"!=typeof t){if(t!==gt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ft(this,this._value))}this._state=null,this._value=null,++e.ref,jt(this,t)}var Bt={get:function(){var t=Ot,e=ne;function n(n,r){var i=this,s=!t.global&&(t!==Ot||e!==ne),o=s&&!oe(),a=new $t(function(e,a){Nt(i,new It(fe(n,t,s,o),fe(r,t,s,o),e,a,t))});return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return n.prototype=gt,n},set:function(t){f(this,"then",t&&t.prototype===gt?Bt:{get:function(){return t},set:Bt.set})}};function It(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function jt(t,e){try{e(function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Ht();e&&"function"==typeof e.then?jt(t,function(t,n){e instanceof $t?e._then(t,n):e.then(t,n)}):(t._state=!0,t._value=e,zt(t)),n&&qt()}},Ft.bind(null,t))}catch(e){Ft(t,e)}}function Ft(t,e){if(Dt.push(e),null===t._state){var n=t._lib&&Ht();e=Pt(e),t._state=!1,t._value=e,Yt(t),zt(t),n&&qt()}}function zt(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Nt(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===Lt&&(++Lt,Ct(function(){0===--Lt&&Ut()},[]))}function Nt(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Lt,Ct(Vt,[n,t,e])}else t._listeners.push(e)}function Vt(t,e,n){try{var r,i=e._value;!e._state&&Dt.length&&(Dt=[]),r=ht&&e._consoleTask?e._consoleTask.run(function(){return t(i)}):t(i),e._state||-1!==Dt.indexOf(i)||Qt(e),n.resolve(r)}catch(t){n.reject(t)}finally{0===--Lt&&Ut(),--n.psd.ref||n.psd.finalize()}}function Wt(){he(Et,function(){Ht()&&qt()})}function Ht(){var t=Mt;return Mt=!1,St=!1,t}function qt(){var t,e,n;do{for(;Tt.length>0;)for(t=Tt,Tt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Tt.length>0);Mt=!0,St=!0}function Ut(){var t=At;At=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=Rt.slice(0),n=e.length;n;)e[--n]()}function Kt(t){function e(){t(),Rt.splice(Rt.indexOf(e),1)}Rt.push(e),++Lt,Ct(function(){0===--Lt&&Ut()},[])}function Yt(t){At.some(function(e){return e._value===t._value})||At.push(t)}function Qt(t){for(var e=At.length;e;)if(At[--e]._value===t._value)return void At.splice(e,1)}function Xt(t){return new $t(gt,!1,t)}function Jt(t,e){var n=Ot;return function(){var r=Ht(),i=Ot;try{return ue(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{ue(i,!1),r&&qt()}}}d($t.prototype,{then:Bt,_then:function(t,e){Nt(this,new It(null,null,t,e,Ot))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?n(t):Xt(t)}):this.then(null,function(t){return t&&t.name===e?n(t):Xt(t)})},finally:function(t){return this.then(function(e){return $t.resolve(t()).then(function(){return e})},function(e){return $t.resolve(t()).then(function(){return Xt(e)})})},timeout:function(t,e){var n=this;return t<1/0?new $t(function(r,i){var s=setTimeout(function(){return i(new Z.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f($t.prototype,Symbol.toStringTag,"Dexie.Promise"),Et.env=de(),d($t,{all:function(){var t=V.apply(null,arguments).map(ae);return new $t(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach(function(i,s){return $t.resolve(i).then(function(n){t[s]=n,--r||e(t)},n)})})},resolve:function(t){return t instanceof $t?t:t&&"function"==typeof t.then?new $t(function(e,n){t.then(e,n)}):new $t(gt,!0,t)},reject:Xt,race:function(){var t=V.apply(null,arguments).map(ae);return new $t(function(e,n){t.map(function(t){return $t.resolve(t).then(e,n)})})},PSD:{get:function(){return Ot},set:function(t){return Ot=t}},totalEchoes:{get:function(){return ne}},newPSD:ie,usePSD:he,scheduler:{get:function(){return Ct},set:function(t){Ct=t}},rejectionMapper:{get:function(){return Pt},set:function(t){Pt=t}},follow:function(t,e){return new $t(function(n,r){return ie(function(e,n){var r=Ot;r.unhandleds=[],r.onunhandled=n,r.finalize=ot(function(){var t=this;Kt(function(){0===t.unhandleds.length?e():n(t.unhandleds[0])})},r.finalize),t()},e,n,r)})}}),wt&&(wt.allSettled&&f($t,"allSettled",function(){var t=V.apply(null,arguments).map(ae);return new $t(function(e){0===t.length&&e([]);var n=t.length,r=new Array(n);t.forEach(function(t,i){return $t.resolve(t).then(function(t){return r[i]={status:"fulfilled",value:t}},function(t){return r[i]={status:"rejected",reason:t}}).then(function(){return--n||e(r)})})})}),wt.any&&"undefined"!=typeof AggregateError&&f($t,"any",function(){var t=V.apply(null,arguments).map(ae);return new $t(function(e,n){0===t.length&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(t,s){return $t.resolve(t).then(function(t){return e(t)},function(t){i[s]=t,--r||n(new AggregateError(i))})})})}),wt.withResolvers&&($t.withResolvers=wt.withResolvers));var Gt={awaits:0,echoes:0,id:0},Zt=0,te=[],ee=0,ne=0,re=0;function ie(t,e,n,r){var i=Ot,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++re,Et.env,s.env=kt?{Promise:$t,PromiseProp:{value:$t,configurable:!0,writable:!0},all:$t.all,race:$t.race,allSettled:$t.allSettled,any:$t.any,resolve:$t.resolve,reject:$t.reject}:{},e&&a(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=he(s,t,n,r);return 0===s.ref&&s.finalize(),o}function se(){return Gt.id||(Gt.id=++Zt),++Gt.awaits,Gt.echoes+=pt,Gt.id}function oe(){return!!Gt.awaits&&(0===--Gt.awaits&&(Gt.id=0),Gt.echoes=Gt.awaits*pt,!0)}function ae(t){return Gt.echoes&&t&&t.constructor===wt?(se(),t.then(function(t){return oe(),t},function(t){return oe(),pe(t)})):t}function le(t){++ne,Gt.echoes&&0!==--Gt.echoes||(Gt.echoes=Gt.awaits=Gt.id=0),te.push(Ot),ue(t,!0)}function ce(){var t=te[te.length-1];te.pop(),ue(t,!1)}function ue(t,e){var n=Ot;if((e?!Gt.echoes||ee++&&t===Ot:!ee||--ee&&t===Ot)||queueMicrotask(e?le.bind(null,t):ce),t!==Ot&&(Ot=t,n===Et&&(Et.env=de()),kt)){var r=Et.env.Promise,s=t.env;(n.global||t.global)&&(Object.defineProperty(i,"Promise",s.PromiseProp),r.all=s.all,r.race=s.race,r.resolve=s.resolve,r.reject=s.reject,s.allSettled&&(r.allSettled=s.allSettled),s.any&&(r.any=s.any))}}function de(){var t=i.Promise;return kt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function he(t,e,n,r,i){var s=Ot;try{return ue(t,!0),e(n,r,i)}finally{ue(s,!1)}}function fe(t,e,n,r){return"function"!=typeof t?t:function(){var i=Ot;n&&se(),ue(e,!0);try{return t.apply(this,arguments)}finally{ue(i,!1),r&&queueMicrotask(oe)}}}function ge(t){Promise===wt&&0===Gt.echoes?0===ee?t():enqueueNativeMicroTask(t):setTimeout(t,0)}-1===(""+vt).indexOf("[native code]")&&(se=oe=rt);var pe=$t.reject;function me(t,e,n,r){if(t.idbdb&&(t._state.openComplete||Ot.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===J.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return me(t,e,n,r)})):pe(i)}return i._promise(e,function(t,e){return ie(function(){return Ot.trans=i,r(t,e,i)})}).then(function(t){if("readwrite"===e)try{i.idbtrans.commit()}catch(t){}return"readonly"===e?t:i._completion.then(function(){return t})})}if(t._state.openComplete)return pe(new Z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return pe(new Z.DatabaseClosed);t.open().catch(rt)}return t._state.dbReadyPromise.then(function(){return me(t,e,n,r)})}var be="4.2.1",ye=String.fromCharCode(65535),xe=-1/0,ve="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",we="String expected.",ke=[],_e="__dbnames",Ce="readonly",Me="readwrite";function Se(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Ae={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function De(t){return"string"!=typeof t||/\./.test(t)?function(t){return t}:function(e){return void 0===e[t]&&t in e&&delete(e=R(e))[t],e}}function Pe(){throw Z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ee(t,e){try{var n=Le(t),r=Le(e);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Te(Re(t),Re(e));case"Array":return Oe(t,e)}}catch(t){}return NaN}function Oe(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,s=0;s<i;++s){var o=Ee(t[s],e[s]);if(0!==o)return o}return n===r?0:n<r?-1:1}function Te(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,s=0;s<i;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===r?0:n<r?-1:1}function Le(t){var e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";var n=I(t);return"ArrayBuffer"===n?"binary":n}function Re(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function $e(t,e,n){var r=t.schema.yProps;return r?(e&&n.numFailures>0&&(e=e.filter(function(t,e){return!n.failures[e]})),Promise.all(r.map(function(n){var r=n.updatesTable;return e?t.db.table(r).where("k").anyOf(e).delete():t.db.table(r).clear()})).then(function(){return n})):n}var Be=function(){function t(t){this["@@propmod"]=t}return t.prototype.execute=function(t){var e,n=this["@@propmod"];if(void 0!==n.add){var i=n.add;if(o(i))return r(r([],o(t)?t:[],!0),i,!0).sort();if("number"==typeof i)return(Number(t)||0)+i;if("bigint"==typeof i)try{return BigInt(t)+i}catch(t){return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(void 0!==n.remove){var s=n.remove;if(o(s))return o(t)?t.filter(function(t){return!s.includes(t)}).sort():[];if("number"==typeof s)return Number(t)-s;if("bigint"==typeof s)try{return BigInt(t)-s}catch(t){return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}var a=null===(e=n.replacePrefix)||void 0===e?void 0:e[0];return a&&"string"==typeof t&&t.startsWith(a)?n.replacePrefix[1]+t.substring(a.length):t},t}();function Ie(t,e){for(var n=s(e),r=n.length,i=!1,o=0;o<r;++o){var a=n[o],l=e[a],c=_(t,a);l instanceof Be?(C(t,a,l.execute(c)),i=!0):c!==l&&(C(t,a,l),i=!0)}return i}var je=function(){function t(){}return t.prototype._trans=function(t,e,n){var r=this._tx||Ot.trans,i=this.name,s=ht&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===t?"read":"write"," ").concat(this.name));function o(t,n,r){if(!r.schema[i])throw new Z.NotFound("Table "+i+" not part of transaction");return e(r.idbtrans,r)}var a=Ht();try{var l=r&&r.db._novip===this.db._novip?r===Ot.trans?r._promise(t,o,n):ie(function(){return r._promise(t,o,n)},{trans:r,transless:Ot.transless||Ot}):me(this.db,t,[this.name],o);return s&&(l._consoleTask=s,l=l.catch(function(t){return console.trace(t),pe(t)})),l}finally{a&&qt()}},t.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):null==t?pe(new Z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(e){return n.core.get({trans:e,key:t}).then(function(t){return n.hook.reading.fire(t)})}).then(e)},t.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(o(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var e=s(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(t){if(t.compound&&e.every(function(e){return t.keyPath.indexOf(e)>=0})){for(var n=0;n<e.length;++n)if(-1===e.indexOf(t.keyPath[n]))return!1;return!0}return!1}).sort(function(t,e){return t.keyPath.length-e.keyPath.length})[0];if(n&&this.db._maxKey!==ye){var r=n.keyPath.slice(0,e.length);return this.where(r).equals(r.map(function(e){return t[e]}))}!n&&ht&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(e.join("+"),"]"));var i=this.schema.idxByName;function a(t,e){return 0===Ee(t,e)}var l=e.reduce(function(e,n){var r=e[0],s=e[1],l=i[n],c=t[n];return[r||l,r||!l?Se(s,l&&l.multi?function(t){var e=_(t,n);return o(e)&&e.some(function(t){return a(c,t)})}:function(t){return a(c,_(t,n))}):s]},[null,null]),c=l[0],u=l[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(u):n?this.filter(u):this.where(e).equals("")},t.prototype.filter=function(t){return this.toCollection().and(t)},t.prototype.count=function(t){return this.toCollection().count(t)},t.prototype.offset=function(t){return this.toCollection().offset(t)},t.prototype.limit=function(t){return this.toCollection().limit(t)},t.prototype.each=function(t){return this.toCollection().each(t)},t.prototype.toArray=function(t){return this.toCollection().toArray(t)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,o(t)?"[".concat(t.join("+"),"]"):t))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(t){var n=this,r=n.db,i=n.name;this.schema.mappedClass=t,t.prototype instanceof Pe&&(t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),Object.defineProperty(n.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),n.prototype.table=function(){return i},n}(t));for(var s=new Set,o=t.prototype;o;o=l(o))Object.getOwnPropertyNames(o).forEach(function(t){return s.add(t)});var a=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(!s.has(r))try{n[r]=e[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=a,this.hook("reading",a),t},t.prototype.defineClass=function(){function t(t){a(this,t)}return this.mapToClass(t)},t.prototype.add=function(t,e){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,o=t;return s&&i&&(o=De(s)(t)),this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[o]})}).then(function(t){return t.numFailures?$t.reject(t.failures[0]):t.lastResult}).then(function(e){if(s)try{C(t,s,e)}catch(t){}return e})},t.prototype.upsert=function(t,e){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return n.core.get({trans:i,key:t}).then(function(s){var o=null!=s?s:{};return Ie(o,e),r&&C(o,r,t),n.core.mutate({trans:i,type:"put",values:[o],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[e]}}).then(function(t){return t.numFailures?$t.reject(t.failures[0]):!!s})})})},t.prototype.update=function(t,e){if("object"!=typeof t||o(t))return this.where(":id").equals(t).modify(e);var n=_(t,this.schema.primKey.keyPath);return void 0===n?pe(new Z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)},t.prototype.put=function(t,e){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,o=t;return s&&i&&(o=De(s)(t)),this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"put",values:[o],keys:null!=e?[e]:null})}).then(function(t){return t.numFailures?$t.reject(t.failures[0]):t.lastResult}).then(function(e){if(s)try{C(t,s,e)}catch(t){}return e})},t.prototype.delete=function(t){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]}).then(function(n){return $e(e,[t],n)}).then(function(t){return t.numFailures?$t.reject(t.failures[0]):void 0})})},t.prototype.clear=function(){var t=this;return this._trans("readwrite",function(e){return t.core.mutate({trans:e,type:"deleteRange",range:Ae}).then(function(e){return $e(t,null,e)})}).then(function(t){return t.numFailures?$t.reject(t.failures[0]):void 0})},t.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",function(n){return e.core.getMany({keys:t,trans:n}).then(function(t){return t.map(function(t){return e.hook.reading.fire(t)})})})},t.prototype.bulkAdd=function(t,e,n){var r=this,i=Array.isArray(e)?e:void 0,s=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(e){var n=r.schema.primKey,o=n.auto,a=n.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&o?t.map(De(a)):t;return r.core.mutate({trans:e,type:"add",keys:i,values:c,wantResults:s}).then(function(t){var e=t.numFailures,n=t.results,i=t.lastResult,o=t.failures;if(0===e)return s?n:i;throw new X("".concat(r.name,".bulkAdd(): ").concat(e," of ").concat(l," operations failed"),o)})})},t.prototype.bulkPut=function(t,e,n){var r=this,i=Array.isArray(e)?e:void 0,s=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(e){var n=r.schema.primKey,o=n.auto,a=n.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&o?t.map(De(a)):t;return r.core.mutate({trans:e,type:"put",keys:i,values:c,wantResults:s}).then(function(t){var e=t.numFailures,n=t.results,i=t.lastResult,o=t.failures;if(0===e)return s?n:i;throw new X("".concat(r.name,".bulkPut(): ").concat(e," of ").concat(l," operations failed"),o)})})},t.prototype.bulkUpdate=function(t){var e=this,n=this.core,r=t.map(function(t){return t.key}),i=t.map(function(t){return t.changes}),s=[];return this._trans("readwrite",function(o){return n.getMany({trans:o,keys:r,cache:"clone"}).then(function(a){var l=[],c=[];t.forEach(function(t,n){var r=t.key,i=t.changes,o=a[n];if(o){for(var u=0,d=Object.keys(i);u<d.length;u++){var h=d[u],f=i[h];if(h===e.schema.primKey.keyPath){if(0!==Ee(f,r))throw new Z.Constraint("Cannot update primary key in bulkUpdate()")}else C(o,h,f)}s.push(n),l.push(r),c.push(o)}});var u=l.length;return n.mutate({trans:o,type:"put",keys:l,values:c,updates:{keys:r,changeSpecs:i}}).then(function(t){var n=t.numFailures,r=t.failures;if(0===n)return u;for(var i=0,o=Object.keys(r);i<o.length;i++){var a=o[i],l=s[Number(a)];if(null!=l){var c=r[a];delete r[a],r[l]=c}}throw new X("".concat(e.name,".bulkUpdate(): ").concat(n," of ").concat(u," operations failed"),r)})})})},t.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"delete",keys:t}).then(function(n){return $e(e,t,n)})}).then(function(t){var r=t.numFailures,i=t.lastResult,s=t.failures;if(0===r)return i;throw new X("".concat(e.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),s)})},t}();function Fe(t){var e={},n=function(n,r){if(r){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return e[n].subscribe.apply(null,s),t}if("string"==typeof n)return e[n]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(t,r,i){if("object"==typeof t)return l(t);r||(r=ut),i||(i=rt);var s={subscribers:[],fire:i,subscribe:function(t){-1===s.subscribers.indexOf(t)&&(s.subscribers.push(t),s.fire=r(s.fire,t))},unsubscribe:function(t){s.subscribers=s.subscribers.filter(function(e){return e!==t}),s.fire=s.subscribers.reduce(r,i)}};return e[t]=n[t]=s,s}function l(t){s(t).forEach(function(e){var n=t[e];if(o(n))a(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new Z.InvalidArgument("Invalid event config");var r=a(e,it,function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];r.subscribers.forEach(function(t){w(function(){t.apply(null,e)})})})}})}}function ze(t,e){return g(e).from({prototype:t}),e}function Ne(t){return ze(je.prototype,function(e,n,r){this.db=t,this._tx=r,this.name=e,this.schema=n,this.hook=t._allTables[e]?t._allTables[e].hook:Fe(null,{creating:[at,rt],reading:[st,it],updating:[ct,rt],deleting:[lt,rt]})})}function Ve(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function We(t,e){t.filter=Se(t.filter,e)}function He(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Se(r(),e())}:e,t.justLimit=n&&!r}function qe(t,e){t.isMatch=Se(t.isMatch,e)}function Ue(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new Z.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Ke(t,e,n){var r=Ue(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function Ye(t,e,n,r){var i=t.replayFilter?Se(t.filter,t.replayFilter()):t.filter;if(t.or){var s={},o=function(t,n,r){if(!i||i(n,r,function(t){return n.stop(t)},function(t){return n.fail(t)})){var o=n.primaryKey,a=""+o;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(o)),u(s,a)||(s[a]=!0,e(t,n,r))}};return Promise.all([t.or._iterate(o,n),Qe(Ke(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return Qe(Ke(t,r,n),Se(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Qe(t,e,n,r){var i=Jt(r?function(t,e,i){return n(r(t),e,i)}:n);return t.then(function(t){if(t)return t.start(function(){var n=function(){return t.continue()};e&&!e(t,function(t){return n=t},function(e){t.stop(e),n=rt},function(e){t.fail(e),n=rt})||i(t.value,t,function(t){return n=t}),n()})})}var Xe=function(){function t(){}return t.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,pe.bind(null,n.error)):n.table._trans("readonly",t).then(e)},t.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,pe.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},t.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=Se(e.algorithm,t)},t.prototype._iterate=function(t,e){return Ye(this._ctx,t,e,this._ctx.table.core)},t.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&a(n,t),e._ctx=n,e},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(t){var e=this._ctx;return this._read(function(n){return Ye(e,t,n,e.table.core)})},t.prototype.count=function(t){var e=this;return this._read(function(t){var n=e._ctx,r=n.table.core;if(Ve(n,!0))return r.count({trans:t,query:{index:Ue(n,r.schema),range:n.range}}).then(function(t){return Math.min(t,n.limit)});var i=0;return Ye(n,function(){return++i,!1},t,r).then(function(){return i})}).then(t)},t.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),r=n[0],i=n.length-1;function s(t,e){return e?s(t[n[e]],e-1):t[r]}var o="next"===this._ctx.dir?1:-1;function a(t,e){return Ee(s(t,i),s(e,i))*o}return this.toArray(function(t){return t.sort(a)}).then(e)},t.prototype.toArray=function(t){var e=this;return this._read(function(t){var n=e._ctx;if("next"===n.dir&&Ve(n,!0)&&n.limit>0){var r=n.valueMapper,i=Ue(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then(function(t){var e=t.result;return r?e.map(r):e})}var s=[];return Ye(n,function(t){return s.push(t)},t,n.table.core).then(function(){return s})},t)},t.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,Ve(e)?He(e,function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n(function(){t.advance(e),e=0}),!1))}}):He(e,function(){var e=t;return function(){return--e<0}})),this},t.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),He(this._ctx,function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}},!0),this},t.prototype.until=function(t,e){return We(this._ctx,function(n,r,i){return!t(n.value)||(r(i),e)}),this},t.prototype.first=function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},t.prototype.last=function(t){return this.reverse().first(t)},t.prototype.filter=function(t){return We(this._ctx,function(e){return t(e.value)}),qe(this._ctx,t),this},t.prototype.and=function(t){return this.filter(t)},t.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},t.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.key,n)})},t.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},t.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.primaryKey,n)})},t.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.key)}).then(function(){return n}).then(t)},t.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&Ve(e,!0)&&e.limit>0)return this._read(function(t){var n=Ue(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})}).then(function(t){return t.result}).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.primaryKey)}).then(function(){return n}).then(t)},t.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},t.prototype.firstKey=function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},t.prototype.lastKey=function(t){return this.reverse().firstKey(t)},t.prototype.distinct=function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return We(this._ctx,function(t){var e=t.primaryKey.toString(),r=u(n,e);return n[e]=!0,!r}),this},t.prototype.modify=function(t){var e=this,n=this._ctx;return this._write(function(r){var i;i="function"==typeof t?t:function(e){return Ie(e,t)};var o=n.table.core,a=o.schema.primaryKey,l=a.outbound,c=a.extractKey,u=200,d=e.db._options.modifyChunkSize;d&&(u="object"==typeof d?d[o.name]||d["*"]||200:d);var h=[],f=0,g=[],p=function(t,e){var n=e.failures,r=e.numFailures;f+=t-r;for(var i=0,o=s(n);i<o.length;i++){var a=o[i];h.push(n[a])}},m=t===Je;return e.clone().primaryKeys().then(function(e){var s=Ve(n)&&n.limit===1/0&&("function"!=typeof t||m)&&{index:n.index,range:n.range},a=function(d){var h=Math.min(u,e.length-d),f=e.slice(d,d+h);return(m?Promise.resolve([]):o.getMany({trans:r,keys:f,cache:"immutable"})).then(function(g){var b=[],y=[],x=l?[]:null,v=m?f:[];if(!m)for(var w=0;w<h;++w){var k=g[w],_={value:R(k),primKey:e[d+w]};!1!==i.call(_,_.value,_)&&(null==_.value?v.push(e[d+w]):l||0===Ee(c(k),c(_.value))?(y.push(_.value),l&&x.push(e[d+w])):(v.push(e[d+w]),b.push(_.value)))}return Promise.resolve(b.length>0&&o.mutate({trans:r,type:"add",values:b}).then(function(t){for(var e in t.failures)v.splice(parseInt(e),1);p(b.length,t)})).then(function(){return(y.length>0||s&&"object"==typeof t)&&o.mutate({trans:r,type:"put",keys:x,values:y,criteria:s,changeSpec:"function"!=typeof t&&t,isAdditionalChunk:d>0}).then(function(t){return p(y.length,t)})}).then(function(){return(v.length>0||s&&m)&&o.mutate({trans:r,type:"delete",keys:v,criteria:s,isAdditionalChunk:d>0}).then(function(t){return $e(n.table,v,t)}).then(function(t){return p(v.length,t)})}).then(function(){return e.length>d+h&&a(d+u)})})};return a(0).then(function(){if(h.length>0)throw new Q("Error modifying one or more objects",h,f,g);return e.length})})})},t.prototype.delete=function(){var t=this._ctx,e=t.range;return!Ve(t)||t.table.schema.yProps||!t.isPrimKey&&3!==e.type?this.modify(Je):this._write(function(n){var r=t.table.core.schema.primaryKey,i=e;return t.table.core.count({trans:n,query:{index:r,range:i}}).then(function(e){return t.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(t){var n=t.failures,r=t.numFailures;if(r)throw new Q("Could not delete some values",Object.keys(n).map(function(t){return n[t]}),e-r);return e-r})})})},t}(),Je=function(t,e){return e.value=null};function Ge(t){return ze(Xe.prototype,function(e,n){this.db=t;var r=Ae,i=null;if(n)try{r=n()}catch(t){i=t}var s=e._ctx,o=s.table,a=o.hook.reading.fire;this._ctx={table:o,index:s.index,isPrimKey:!s.index||o.schema.primKey.keyPath&&s.index===o.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:s.or,valueMapper:a!==it?a:null}})}function Ze(t,e){return t<e?-1:t===e?0:1}function tn(t,e){return t>e?-1:t===e?0:1}function en(t,e,n){var r=t instanceof un?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function nn(t){return new t.Collection(t,function(){return cn("")}).limit(0)}function rn(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function sn(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function on(t,e,n,r,i,s){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],c)<0&&(a=l)}return o<r.length&&"next"===s?t+n.substr(t.length):o<t.length&&"prev"===s?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function an(t,e,n,r){var i,s,o,a,l,c,u,d=n.length;if(!n.every(function(t){return"string"==typeof t}))return en(t,we);function h(t){i=rn(t),s=sn(t),o="next"===t?Ze:tn;var e=n.map(function(t){return{lower:s(t),upper:i(t)}}).sort(function(t,e){return o(t.lower,e.lower)});a=e.map(function(t){return t.upper}),l=e.map(function(t){return t.lower}),c=t,u="next"===t?"":r}h("next");var f=new t.Collection(t,function(){return ln(a[0],l[d-1]+r)});f._ondirectionchange=function(t){h(t)};var g=0;return f._addAlgorithm(function(t,n,r){var i=t.key;if("string"!=typeof i)return!1;var h=s(i);if(e(h,l,g))return!0;for(var f=null,p=g;p<d;++p){var m=on(i,h,a[p],l[p],o,c);null===m&&null===f?g=p+1:(null===f||o(f,m)>0)&&(f=m)}return n(null!==f?function(){t.continue(f+u)}:r),!1}),f}function ln(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function cn(t){return{type:1,lower:t,upper:t}}var un=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(t,e,n,r){n=!1!==n,r=!0===r;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(n||r)&&(!n||!r)?nn(this):new this.Collection(this,function(){return ln(t,e,!n,!r)})}catch(t){return en(this,ve)}},t.prototype.equals=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return cn(t)})},t.prototype.above=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(t,void 0,!0)})},t.prototype.aboveOrEqual=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(t,void 0,!1)})},t.prototype.below=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(void 0,t,!1,!0)})},t.prototype.belowOrEqual=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(void 0,t)})},t.prototype.startsWith=function(t){return"string"!=typeof t?en(this,we):this.between(t,t+ye,!0,!0)},t.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):an(this,function(t,e){return 0===t.indexOf(e[0])},[t],ye)},t.prototype.equalsIgnoreCase=function(t){return an(this,function(t,e){return t===e[0]},[t],"")},t.prototype.anyOfIgnoreCase=function(){var t=V.apply(N,arguments);return 0===t.length?nn(this):an(this,function(t,e){return-1!==e.indexOf(t)},t,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var t=V.apply(N,arguments);return 0===t.length?nn(this):an(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},t,ye)},t.prototype.anyOf=function(){var t=this,e=V.apply(N,arguments),n=this._cmp;try{e.sort(n)}catch(t){return en(this,ve)}if(0===e.length)return nn(this);var r=new this.Collection(this,function(){return ln(e[0],e[e.length-1])});r._ondirectionchange=function(r){n="next"===r?t._ascending:t._descending,e.sort(n)};var i=0;return r._addAlgorithm(function(t,r,s){for(var o=t.key;n(o,e[i])>0;)if(++i===e.length)return r(s),!1;return 0===n(o,e[i])||(r(function(){t.continue(e[i])}),!1)}),r},t.prototype.notEqual=function(t){return this.inAnyRange([[xe,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var t=V.apply(N,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return en(this,ve)}var e=t.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[xe,e]]},null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(t,e){var n=this,r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(0===t.length)return nn(this);if(!t.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&i(t[0],t[1])<=0}))return en(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Z.InvalidArgument);var l=!e||!1!==e.includeLowers,c=e&&!0===e.includeUppers;function u(t,e){for(var n=0,i=t.length;n<i;++n){var s=t[n];if(r(e[0],s[1])<0&&r(e[1],s[0])>0){s[0]=o(s[0],e[0]),s[1]=a(s[1],e[1]);break}}return n===i&&t.push(e),t}var d,h=i;function f(t,e){return h(t[0],e[0])}try{(d=t.reduce(u,[])).sort(f)}catch(t){return en(this,ve)}var g=0,p=c?function(t){return i(t,d[g][1])>0}:function(t){return i(t,d[g][1])>=0},m=l?function(t){return s(t,d[g][0])>0}:function(t){return s(t,d[g][0])>=0};function b(t){return!p(t)&&!m(t)}var y=p,x=new this.Collection(this,function(){return ln(d[0][0],d[d.length-1][1],!l,!c)});return x._ondirectionchange=function(t){"next"===t?(y=p,h=i):(y=m,h=s),d.sort(f)},x._addAlgorithm(function(t,e,r){for(var s=t.key;y(s);)if(++g===d.length)return e(r),!1;return!!b(s)||(0===n._cmp(s,d[g][1])||0===n._cmp(s,d[g][0])||e(function(){h===i?t.continue(d[g][0]):t.continue(d[g][1])}),!1)}),x},t.prototype.startsWithAnyOf=function(){var t=V.apply(N,arguments);return t.every(function(t){return"string"==typeof t})?0===t.length?nn(this):this.inAnyRange(t.map(function(t){return[t,t+ye]})):en(this,"startsWithAnyOf() only works with strings")},t}();function dn(t){return ze(un.prototype,function(e,n,r){if(this.db=t,this._ctx={table:e,index:":id"===n?null:n,or:r},this._cmp=this._ascending=Ee,this._descending=function(t,e){return Ee(e,t)},this._max=function(t,e){return Ee(t,e)>0?t:e},this._min=function(t,e){return Ee(t,e)<0?t:e},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new Z.MissingAPI})}function hn(t){return Jt(function(e){return fn(e),t(e.target.error),!1})}function fn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var gn="storagemutated",pn="x-storagemutated-1",mn=Fe(null,gn),bn=function(){function t(){}return t.prototype._lock=function(){return v(!Ot.global),++this._reculock,1!==this._reculock||Ot.global||(Ot.lockOwnerFor=this),this},t.prototype._unlock=function(){if(v(!Ot.global),0===--this._reculock)for(Ot.global||(Ot.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{he(t[1],t[0])}catch(t){}}return this},t.prototype._locked=function(){return this._reculock&&Ot.lockOwnerFor!==this},t.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(v(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Z.DatabaseClosed(r);case"MissingAPIError":throw new Z.MissingAPI(r.message,r);default:throw new Z.OpenFailed(r)}if(!this.active)throw new Z.TransactionInactive;return v(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Jt(function(n){fn(n),e._reject(t.error)}),t.onabort=Jt(function(n){fn(n),e.active&&e._reject(new Z.Abort(t.error)),e.active=!1,e.on("abort").fire(n)}),t.oncomplete=Jt(function(){e.active=!1,e._resolve(),"mutatedParts"in t&&mn.storagemutated.fire(t.mutatedParts)}),this},t.prototype._promise=function(t,e,n){var r=this;if("readwrite"===t&&"readwrite"!==this.mode)return pe(new Z.ReadOnly("Transaction is readonly"));if(!this.active)return pe(new Z.TransactionInactive);if(this._locked())return new $t(function(i,s){r._blockedFuncs.push([function(){r._promise(t,e,n).then(i,s)},Ot])});if(n)return ie(function(){var t=new $t(function(t,n){r._lock();var i=e(t,n,r);i&&i.then&&i.then(t,n)});return t.finally(function(){return r._unlock()}),t._lib=!0,t});var i=new $t(function(t,n){var i=e(t,n,r);i&&i.then&&i.then(t,n)});return i._lib=!0,i},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(t){var e=this._root(),n=$t.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return n});else{e._waitingFor=n,e._waitingQueue=[];var r=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(r.get(-1/0).onsuccess=t)}()}var i=e._waitingFor;return new $t(function(t,r){n.then(function(n){return e._waitingQueue.push(Jt(t.bind(null,n)))},function(t){return e._waitingQueue.push(Jt(r.bind(null,t)))}).finally(function(){e._waitingFor===i&&(e._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Z.Abort))},t.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(u(e,t))return e[t];var n=this.schema[t];if(!n)throw new Z.NotFound("Table "+t+" not part of transaction");var r=new this.db.Table(t,n,this);return r.core=this.db.core.table(t),e[t]=r,r},t}();function yn(t){return ze(bn.prototype,function(e,n,r,i,s){var o=this;"readonly"!==e&&n.forEach(function(t){var e,i=null===(e=r[t])||void 0===e?void 0:e.yProps;i&&(n=n.concat(i.map(function(t){return t.updatesTable})))}),this.db=t,this.mode=e,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Fe(this,"complete","error","abort"),this.parent=s||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new $t(function(t,e){o._resolve=t,o._reject=e}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(t){var e=o.active;return o.active=!1,o.on.error.fire(t),o.parent?o.parent._reject(t):e&&o.idbtrans&&o.idbtrans.abort(),pe(t)})})}function xn(t,e,n,r,i,s,o,a){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+vn(e),type:a}}function vn(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function wn(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:k(n,function(t){return[t.name,t]})}}function kn(t){return 1===t.length?t[0]:t}var _n=function(t){try{return t.only([[]]),_n=function(){return[[]]},[[]]}catch(t){return _n=function(){return ye},ye}};function Cn(t){return null==t?function(){}:"string"==typeof t?Mn(t):function(e){return _(e,t)}}function Mn(t){return 1===t.split(".").length?function(e){return e[t]}:function(e){return _(e,t)}}function Sn(t){return[].slice.call(t)}var An=0;function Dn(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function Pn(t,e,n){function r(t,e){var n=Sn(t.objectStoreNames);return{schema:{name:t.name,tables:n.map(function(t){return e.objectStore(t)}).map(function(t){var e=t.keyPath,n=t.autoIncrement,r=o(e),i=null==e,s={},a={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:e,autoIncrement:n,unique:!0,extractKey:Cn(e)},indexes:Sn(t.indexNames).map(function(e){return t.index(e)}).map(function(t){var e=t.name,n=t.unique,r=t.multiEntry,i=t.keyPath,a={name:e,compound:o(i),keyPath:i,unique:n,multiEntry:r,extractKey:Cn(i)};return s[Dn(i)]=a,a}),getIndexByKeyPath:function(t){return s[Dn(t)]}};return s[":id"]=a.primaryKey,null!=e&&(s[Dn(e)]=a.primaryKey),a})},hasGetAll:n.length>0&&"getAll"in e.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=t.lower,r=t.upper,i=t.lowerOpen,s=t.upperOpen;return void 0===n?void 0===r?null:e.upperBound(r,!!s):void 0===r?e.lowerBound(n,!!i):e.bound(n,r,!!i,!!s)}function s(t){var e=t.name;function n(t){var n=t.trans,r=t.type,s=t.keys,o=t.values,a=t.range;return new Promise(function(t,l){t=Jt(t);var c=n.objectStore(e),u=null==c.keyPath,d="put"===r||"add"===r;if(!d&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var h,f=(s||o||{length:1}).length;if(s&&o&&s.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return t({numFailures:0,failures:{},results:[],lastResult:void 0});var g=[],p=[],m=0,b=function(t){++m,fn(t)};if("deleteRange"===r){if(4===a.type)return t({numFailures:m,failures:p,results:[],lastResult:void 0});3===a.type?g.push(h=c.clear()):g.push(h=c.delete(i(a)))}else{var y=d?u?[o,s]:[o,null]:[s,null],x=y[0],v=y[1];if(d)for(var w=0;w<f;++w)g.push(h=v&&void 0!==v[w]?c[r](x[w],v[w]):c[r](x[w])),h.onerror=b;else for(w=0;w<f;++w)g.push(h=c[r](x[w])),h.onerror=b}var k=function(e){var n=e.target.result;g.forEach(function(t,e){return null!=t.error&&(p[e]=t.error)}),t({numFailures:m,failures:p,results:"delete"===r?s:g.map(function(t){return t.result}),lastResult:n})};h.onerror=function(t){b(t),k(t)},h.onsuccess=k})}function r(t){var n=t.trans,r=t.values,s=t.query,o=t.reverse,a=t.unique;return new Promise(function(t,l){t=Jt(t);var c=s.index,u=s.range,d=n.objectStore(e),h=c.isPrimaryKey?d:d.index(c.name),f=o?a?"prevunique":"prev":a?"nextunique":"next",g=r||!("openKeyCursor"in h)?h.openCursor(i(u),f):h.openKeyCursor(i(u),f);g.onerror=hn(l),g.onsuccess=Jt(function(e){var r=g.result;if(r){r.___id=++An,r.done=!1;var i=r.continue.bind(r),s=r.continuePrimaryKey;s&&(s=s.bind(r));var o=r.advance.bind(r),a=function(){throw new Error("Cursor not started")},c=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=a,r.fail=Jt(l),r.next=function(){var t=this,e=1;return this.start(function(){return e--?t.continue():t.stop()}).then(function(){return t})},r.start=function(t){var e=new Promise(function(t,e){t=Jt(t),g.onerror=hn(e),r.fail=e,r.stop=function(e){r.stop=r.continue=r.continuePrimaryKey=r.advance=c,t(e)}}),n=function(){if(g.result)try{t()}catch(t){r.fail(t)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return g.onsuccess=Jt(function(t){g.onsuccess=n,n()}),r.continue=i,r.continuePrimaryKey=s,r.advance=o,n(),e},t(r)}else t(null)},l)})}function s(t){return function(n){return new Promise(function(r,s){r=Jt(r);var o=n.trans,a=n.values,l=n.limit,c=n.query,u=l===1/0?void 0:l,d=c.index,h=c.range,f=o.objectStore(e),g=d.isPrimaryKey?f:f.index(d.name),p=i(h);if(0===l)return r({result:[]});if(t){var m=a?g.getAll(p,u):g.getAllKeys(p,u);m.onsuccess=function(t){return r({result:t.target.result})},m.onerror=hn(s)}else{var b=0,y=a||!("openKeyCursor"in g)?g.openCursor(p):g.openKeyCursor(p),x=[];y.onsuccess=function(t){var e=y.result;return e?(x.push(a?e.value:e.primaryKey),++b===l?r({result:x}):void e.continue()):r({result:x})},y.onerror=hn(s)}})}}return{name:e,schema:t,mutate:n,getMany:function(t){var n=t.trans,r=t.keys;return new Promise(function(t,i){t=Jt(t);for(var s,o=n.objectStore(e),a=r.length,l=new Array(a),c=0,u=0,d=function(e){var n=e.target;l[n._pos]=n.result,++u===c&&t(l)},h=hn(i),f=0;f<a;++f)null!=r[f]&&((s=o.get(r[f]))._pos=f,s.onsuccess=d,s.onerror=h,++c);0===c&&t(l)})},get:function(t){var n=t.trans,r=t.key;return new Promise(function(t,i){t=Jt(t);var s=n.objectStore(e).get(r);s.onsuccess=function(e){return t(e.target.result)},s.onerror=hn(i)})},query:s(c),openCursor:r,count:function(t){var n=t.query,r=t.trans,s=n.index,o=n.range;return new Promise(function(t,n){var a=r.objectStore(e),l=s.isPrimaryKey?a:a.index(s.name),c=i(o),u=c?l.count(c):l.count();u.onsuccess=Jt(function(e){return t(e.target.result)}),u.onerror=hn(n)})}}}var a=r(t,n),l=a.schema,c=a.hasGetAll,u=l.tables.map(function(t){return s(t)}),d={};return u.forEach(function(t){return d[t.name]=t}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!d[t])throw new Error("Table '".concat(t,"' not found"));return d[t]},MIN_KEY:-1/0,MAX_KEY:_n(e),schema:l}}function En(t,e){return e.reduce(function(t,e){var r=e.create;return n(n({},t),r(t))},t)}function On(t,e,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:En(Pn(e,i,r),t.dbcore)}}function Tn(t,e){var n=e.db,r=On(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(function(e){var n=e.name;t.core.schema.tables.some(function(t){return t.name===n})&&(e.core=t.core.table(n),t[n]instanceof t.Table&&(t[n].core=e.core))})}function Ln(t,e,n,r){n.forEach(function(n){var i=r[n];e.forEach(function(e){var r=m(e,n);(!r||"value"in r&&void 0===r.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?f(e,n,{get:function(){return this.table(n)},set:function(t){h(this,n,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[n]=new t.Table(n,i))})})}function Rn(t,e){e.forEach(function(e){for(var n in e)e[n]instanceof t.Table&&delete e[n]})}function $n(t,e){return t._cfg.version-e._cfg.version}function Bn(t,e,n,r){var i=t._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=wn("$meta",Qn("")[0],[]),t._storeNames.push("$meta"));var o=t._createTransaction("readwrite",t._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),l=Ot.transless||Ot;ie(function(){if(Ot.trans=o,Ot.transless=l,0!==e)return Tn(t,n),jn(t,o,e).then(function(e){return Fn(t,e,o,n)}).catch(a);s(i).forEach(function(t){Nn(n,t,i[t].primKey,i[t].indexes)}),Tn(t,n),$t.follow(function(){return t.on.populate.fire(o)}).catch(a)})}function In(t,e){Vn(t._dbSchema,e),e.db.version%10!=0||e.objectStoreNames.contains("$meta")||e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var n=qn(t,t.idbdb,e);Yn(t,t._dbSchema,e);for(var r=function(t){if(t.change.length||t.recreate)return console.warn("Unable to patch indexes of table ".concat(t.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=e.objectStore(t.name);t.add.forEach(function(e){ht&&console.debug("Dexie upgrade patch: Creating missing index ".concat(t.name,".").concat(e.src)),Hn(n,e)})},i=0,s=zn(n,t._dbSchema).change;i<s.length;i++){var o=r(s[i]);if("object"==typeof o)return o.value}}function jn(t,e,n){return e.storeNames.includes("$meta")?e.table("$meta").get("version").then(function(t){return null!=t?t:n}):$t.resolve(n)}function Fn(t,e,n,r){var i=[],o=t._versions,a=t._dbSchema=qn(t,t.idbdb,r),l=o.filter(function(t){return t._cfg.version>=e});if(0===l.length)return $t.resolve();function c(){return i.length?$t.resolve(i.shift()(n.idbtrans)).then(c):$t.resolve()}return l.forEach(function(o){i.push(function(){var i=a,l=o._cfg.dbschema;Yn(t,i,r),Yn(t,l,r),a=t._dbSchema=l;var c=zn(i,l);c.add.forEach(function(t){Nn(r,t[0],t[1].primKey,t[1].indexes)}),c.change.forEach(function(t){if(t.recreate)throw new Z.Upgrade("Not yet support for changing primary key");var e=r.objectStore(t.name);t.add.forEach(function(t){return Hn(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),Hn(e,t)}),t.del.forEach(function(t){return e.deleteIndex(t)})});var u=o._cfg.contentUpgrade;if(u&&o._cfg.version>e){Tn(t,r),n._memoizedTables={};var d=S(l);c.del.forEach(function(t){d[t]=i[t]}),Rn(t,[t.Transaction.prototype]),Ln(t,[t.Transaction.prototype],s(d),d),n.schema=d;var h,f=W(u);f&&se();var g=$t.follow(function(){if((h=u(n))&&f){var t=oe.bind(null,null);h.then(t,t)}});return h&&"function"==typeof h.then?$t.resolve(h):g.then(function(){return h})}}),i.push(function(e){Wn(o._cfg.dbschema,e),Rn(t,[t.Transaction.prototype]),Ln(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),n.schema=t._dbSchema}),i.push(function(e){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===o._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(t){return"$meta"!==t})):e.objectStore("$meta").put(o._cfg.version,"version"))})}),c().then(function(){Vn(a,r)})}function zn(t,e){var n,r={del:[],add:[],change:[]};for(n in t)e[n]||r.del.push(n);for(n in e){var i=t[n],s=e[n];if(i){var o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)o.recreate=!0,r.change.push(o);else{var a=i.idxByName,l=s.idxByName,c=void 0;for(c in a)l[c]||o.del.push(c);for(c in l){var u=a[c],d=l[c];u?u.src!==d.src&&o.change.push(d):o.add.push(d)}(o.del.length>0||o.add.length>0||o.change.length>0)&&r.change.push(o)}}else r.add.push([n,s])}return r}function Nn(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(t){return Hn(i,t)}),i}function Vn(t,e){s(t).forEach(function(n){e.db.objectStoreNames.contains(n)||(ht&&console.debug("Dexie: Creating missing table",n),Nn(e,n,t[n].primKey,t[n].indexes))})}function Wn(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return null==t[n]&&e.db.deleteObjectStore(n)})}function Hn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function qn(t,e,n){var r={};return y(e.objectStoreNames,0).forEach(function(t){for(var e=n.objectStore(t),i=e.keyPath,s=xn(vn(i),i||"",!0,!1,!!e.autoIncrement,i&&"string"!=typeof i,!0),o=[],a=0;a<e.indexNames.length;++a){var l=e.index(e.indexNames[a]);i=l.keyPath;var c=xn(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);o.push(c)}r[t]=wn(t,s,o)}),r}function Un(t,e,n){t.verno=e.version/10;var r=t._dbSchema=qn(t,e,n);t._storeNames=y(e.objectStoreNames,0),Ln(t,[t._allTables],s(r),r)}function Kn(t,e){var n=zn(qn(t,t.idbdb,e),t._dbSchema);return!(n.add.length||n.change.some(function(t){return t.add.length||t.change.length}))}function Yn(t,e,n){for(var r=n.db.objectStoreNames,s=0;s<r.length;++s){var o=r[s],a=n.objectStore(o);t._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var c=a.indexNames[l],u=a.index(c).keyPath,d="string"==typeof u?u:"["+y(u).join("+")+"]";if(e[o]){var h=e[o].idxByName[d];h&&(h.name=c,delete e[o].idxByName[d],e[o].idxByName[c]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Qn(t){return t.split(",").map(function(t,e){var n,r=t.split(":"),i=null===(n=r[1])||void 0===n?void 0:n.trim(),s=(t=r[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return xn(s,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),o(a),0===e,i)})}var Xn,Jn=function(){function t(){}return t.prototype._createTableSchema=function(t,e,n){return wn(t,e,n)},t.prototype._parseIndexSyntax=function(t){return Qn(t)},t.prototype._parseStoresSpec=function(t,e){var n=this;s(t).forEach(function(r){if(null!==t[r]){var i=n._parseIndexSyntax(t[r]),s=i.shift();if(!s)throw new Z.Schema("Invalid schema for table "+r+": "+t[r]);if(s.unique=!0,s.multi)throw new Z.Schema("Primary key cannot be multiEntry*");i.forEach(function(t){if(t.auto)throw new Z.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new Z.Schema("Index must have a name and cannot be an empty string")});var o=n._createTableSchema(r,s,i);e[r]=o}})},t.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,t):t;var n=e._versions,r={},i={};return n.forEach(function(t){a(r,t._cfg.storesSource),i=t._cfg.dbschema={},t._parseStoresSpec(r,i)}),e._dbSchema=i,Rn(e,[e._allTables,e,e.Transaction.prototype]),Ln(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],s(i),i),e._storeNames=s(i),this},t.prototype.upgrade=function(t){return this._cfg.contentUpgrade=dt(this._cfg.contentUpgrade||rt,t),this},t}();function Gn(t){return ze(Jn.prototype,function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new ti(_e,{addons:[],indexedDB:t,IDBKeyRange:e})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function tr(t){return t&&"function"==typeof t.databases}function er(t){var e=t.indexedDB,n=t.IDBKeyRange;return tr(e)?Promise.resolve(e.databases()).then(function(t){return t.map(function(t){return t.name}).filter(function(t){return t!==_e})}):Zn(e,n).toCollection().primaryKeys()}function nr(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!tr(n)&&e!==_e&&Zn(n,r).put({name:e}).catch(rt)}function rr(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!tr(n)&&e!==_e&&Zn(n,r).delete(e).catch(rt)}function ir(t){return ie(function(){return Ot.letThrough=!0,t()})}function sr(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function or(t){return!("from"in t)}var ar=function(t,e){if(!this){var n=new ar;return t&&"d"in t&&a(n,t),n}a(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function lr(t,e,n){var r=Ee(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(or(t))return a(t,{from:e,to:n,d:1});var i=t.l,s=t.r;if(Ee(n,t.from)<0)return i?lr(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},hr(t);if(Ee(e,t.to)>0)return s?lr(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},hr(t);Ee(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),Ee(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var o=!t.r;i&&!t.l&&cr(t,i),s&&o&&cr(t,s)}}function cr(t,e){function n(t,e){var r=e.from,i=e.to,s=e.l,o=e.r;lr(t,r,i),s&&n(t,s),o&&n(t,o)}or(e)||n(t,e)}function ur(t,e){var n=dr(e),r=n.next();if(r.done)return!1;for(var i=r.value,s=dr(t),o=s.next(i.from),a=o.value;!r.done&&!o.done;){if(Ee(a.from,i.to)<=0&&Ee(a.to,i.from)>=0)return!0;Ee(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function dr(t){var e=or(t)?null:{s:0,n:t};return{next:function(t){for(var n=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&Ee(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||Ee(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function hr(t){var e,r,i=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(r=t.l)||void 0===r?void 0:r.d)||0),s=i>1?"r":i<-1?"l":"";if(s){var o="r"===s?"l":"r",a=n({},t),l=t[s];t.from=l.from,t.to=l.to,t[s]=l[s],a[s]=l[o],t[o]=a,a.d=fr(a)}t.d=fr(t)}function fr(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}function gr(t,e){return s(e).forEach(function(n){t[n]?cr(t[n],e[n]):t[n]=O(e[n])}),t}function pr(t,e){return t.all||e.all||Object.keys(t).some(function(n){return e[n]&&ur(e[n],t[n])})}d(ar.prototype,((Xn={add:function(t){return cr(this,t),this},addKey:function(t){return lr(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(t){return lr(e,t,t)}),this},hasKey:function(t){var e=dr(this).next(t).value;return e&&Ee(e.from,t)<=0&&Ee(e.to,t)>=0}})[j]=function(){return dr(this)},Xn));var mr={},br={},yr=!1;function xr(t,e){gr(br,t),yr||(yr=!0,setTimeout(function(){yr=!1;var t=br;br={},vr(t,!1)},0))}function vr(t,e){void 0===e&&(e=!1);var n=new Set;if(t.all)for(var r=0,i=Object.values(mr);r<i.length;r++)wr(a=i[r],t,n,e);else for(var s in t){var o=/^idb\:\/\/(.*)\/(.*)\//.exec(s);if(o){var a,l=o[1],c=o[2];(a=mr["idb://".concat(l,"/").concat(c)])&&wr(a,t,n,e)}}n.forEach(function(t){return t()})}function wr(t,e,n,r){for(var i=[],s=0,o=Object.entries(t.queries.query);s<o.length;s++){for(var a=o[s],l=a[0],c=[],u=0,d=a[1];u<d.length;u++){var h=d[u];pr(e,h.obsSet)?h.subscribers.forEach(function(t){return n.add(t)}):r&&c.push(h)}r&&i.push([l,c])}if(r)for(var f=0,g=i;f<g.length;f++){var p=g[f];l=p[0],c=p[1],t.queries.query[l]=c}}function kr(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?pe(e.dbOpenError):t});e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller,i=Math.round(10*t.verno),s=!1;function o(){if(e.openCanceller!==r)throw new Z.DatabaseClosed("db.open() was cancelled")}var a=e.dbReadyResolve,l=null,c=!1,u=function(){return new $t(function(r,a){if(o(),!n)throw new Z.MissingAPI;var d=t.name,h=e.autoSchema||!i?n.open(d):n.open(d,i);if(!h)throw new Z.MissingAPI;h.onerror=hn(a),h.onblocked=Jt(t._fireOnBlocked),h.onupgradeneeded=Jt(function(r){if(l=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=fn,l.abort(),h.result.close();var i=n.deleteDatabase(d);i.onsuccess=i.onerror=Jt(function(){a(new Z.NoSuchDatabase("Database ".concat(d," doesnt exist")))})}else{l.onerror=hn(a);var o=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;c=o<1,t.idbdb=h.result,s&&In(t,l),Bn(t,o/10,l,a)}},a),h.onsuccess=Jt(function(){l=null;var n=t.idbdb=h.result,o=y(n.objectStoreNames);if(o.length>0)try{var a=n.transaction(kn(o),"readonly");if(e.autoSchema)Un(t,n,a);else if(Yn(t,t._dbSchema,a),!Kn(t,a)&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),n.close(),i=n.version+1,s=!0,r(u());Tn(t,a)}catch(t){}ke.push(t),n.onversionchange=Jt(function(n){e.vcFired=!0,t.on("versionchange").fire(n)}),n.onclose=Jt(function(){t.close({disableAutoOpen:!1})}),c&&nr(t._deps,d),r()},a)}).catch(function(t){switch(null==t?void 0:t.name){case"UnknownError":if(e.PR1398_maxLoop>0)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),u();break;case"VersionError":if(i>0)return i=0,u()}return $t.reject(t)})};return $t.race([r,("undefined"==typeof navigator?$t.resolve():sr()).then(u)]).then(function(){return o(),e.onReadyBeingFired=[],$t.resolve(ir(function(){return t.on.ready.fire(t.vip)})).then(function n(){if(e.onReadyBeingFired.length>0){var r=e.onReadyBeingFired.reduce(dt,rt);return e.onReadyBeingFired=[],$t.resolve(ir(function(){return r(t.vip)})).then(n)}})}).finally(function(){e.openCanceller===r&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)}).catch(function(n){e.dbOpenError=n;try{l&&l.abort()}catch(t){}return r===e.openCanceller&&t._close(),pe(n)}).finally(function(){e.openComplete=!0,a()}).then(function(){if(c){var e={};t.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(e["idb://".concat(t.name,"/").concat(n.name,"/").concat(r.name)]=new ar(-1/0,[[[]]]))}),e["idb://".concat(t.name,"/").concat(n.name,"/")]=e["idb://".concat(t.name,"/").concat(n.name,"/:dels")]=new ar(-1/0,[[[]]])}),mn(gn).fire(e),vr(e,!0)}return t})}function _r(t){var e=function(e){return t.next(e)},n=function(e){return t.throw(e)},r=s(e),i=s(n);function s(t){return function(e){var n=t(e),s=n.value;return n.done?s:s&&"function"==typeof s.then?s.then(r,i):o(s)?Promise.all(s).then(r,i):r(s)}}return s(e)()}function Cr(t,e,n){var r=arguments.length;if(r<2)throw new Z.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,D(i),n]}function Mr(t,e,n,r,i){return $t.resolve().then(function(){var s=Ot.transless||Ot,o=t._createTransaction(e,n,t._dbSchema,r);o.explicit=!0;var a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(r){return r.name===J.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Mr(t,e,n,null,i)})):pe(r)}var l,c=W(i);c&&se();var u=$t.follow(function(){if(l=i.call(o,o))if(c){var t=oe.bind(null,null);l.then(t,t)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=_r(l))},a);return(l&&"function"==typeof l.then?$t.resolve(l).then(function(t){return o.active?t:pe(new Z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return l})).then(function(t){return r&&o._resolve(),o._completion.then(function(){return t})}).catch(function(t){return o._reject(t),pe(t)})})}function Sr(t,e,n){for(var r=o(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function Ar(t){return n(n({},t),{table:function(e){var r=t.table(e),i=r.schema,s={},o=[];function a(t,e,r){var i=Dn(t),l=s[i]=s[i]||[],c=null==t?0:"string"==typeof t?1:t.length,u=e>0,d=n(n({},r),{name:u?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:u,keyTail:e,keyLength:c,extractKey:Cn(t),unique:!u&&r.unique});return l.push(d),d.isPrimaryKey||o.push(d),c>1&&a(2===c?t[0]:t.slice(0,c-1),e+1,r),l.sort(function(t,e){return t.keyTail-e.keyTail}),d}var l=a(i.primaryKey.keyPath,0,i.primaryKey);s[":id"]=[l];for(var c=0,u=i.indexes;c<u.length;c++){var d=u[c];a(d.keyPath,0,d)}function h(t){var e=s[Dn(t)];return e&&e[0]}function f(e,n){return{type:1===e.type?2:e.type,lower:Sr(e.lower,e.lowerOpen?t.MAX_KEY:t.MIN_KEY,n),lowerOpen:!0,upper:Sr(e.upper,e.upperOpen?t.MIN_KEY:t.MAX_KEY,n),upperOpen:!0}}function g(t){var e=t.query.index;return e.isVirtual?n(n({},t),{query:{index:e.lowLevelIndex,range:f(t.query.range,e.keyTail)}}):t}var p=n(n({},r),{schema:n(n({},i),{primaryKey:l,indexes:o,getIndexByKeyPath:h}),count:function(t){return r.count(g(t))},query:function(t){return r.query(g(t))},openCursor:function(e){var n=e.query.index,i=n.keyTail,s=n.isVirtual,o=n.keyLength;if(!s)return r.openCursor(e);function a(n){function r(r){null!=r?n.continue(Sr(r,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?n.continue(n.key.slice(0,o).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,i)):n.continue()}var s=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(e,r){n.continuePrimaryKey(Sr(e,t.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var t=n.key;return 1===o?t[0]:t.slice(0,o)}},value:{get:function(){return n.value}}});return s}return r.openCursor(g(e)).then(function(t){return t&&a(t)})}});return p}})}var Dr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ar};function Pr(t,e,n,r){return n=n||{},r=r||"",s(t).forEach(function(i){if(u(e,i)){var s=t[i],o=e[i];if("object"==typeof s&&"object"==typeof o&&s&&o){var a=I(s);a!==I(o)?n[r+i]=e[i]:"Object"===a?Pr(s,o,n,r+i+"."):s!==o&&(n[r+i]=e[i])}else s!==o&&(n[r+i]=e[i])}else n[r+i]=void 0}),s(e).forEach(function(i){u(t,i)||(n[r+i]=e[i])}),n}function Er(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}var Or={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return n(n({},t),{table:function(e){var i=t.table(e),s=i.schema.primaryKey,o=n(n({},i),{mutate:function(t){var o=Ot.trans,a=o.table(e).hook,l=a.deleting,c=a.creating,d=a.updating;switch(t.type){case"add":if(c.fire===rt)break;return o._promise("readwrite",function(){return h(t)},!0);case"put":if(c.fire===rt&&d.fire===rt)break;return o._promise("readwrite",function(){return h(t)},!0);case"delete":if(l.fire===rt)break;return o._promise("readwrite",function(){return h(t)},!0);case"deleteRange":if(l.fire===rt)break;return o._promise("readwrite",function(){return f(t)},!0)}return i.mutate(t);function h(t){var e=Ot.trans,o=t.keys||Er(s,t);if(!o)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?n(n({},t),{keys:o}):n({},t)).type&&(t.values=r([],t.values,!0)),t.keys&&(t.keys=r([],t.keys,!0)),Tr(i,t,o).then(function(n){var r=o.map(function(r,i){var o=n[i],a={onerror:null,onsuccess:null};if("delete"===t.type)l.fire.call(a,r,o,e);else if("add"===t.type||void 0===o){var h=c.fire.call(a,r,t.values[i],e);null==r&&null!=h&&(r=h,t.keys[i]=r,s.outbound||C(t.values[i],s.keyPath,r))}else{var f=Pr(o,t.values[i]),g=d.fire.call(a,f,r,o,e);if(g){var p=t.values[i];Object.keys(g).forEach(function(t){u(p,t)?p[t]=g[t]:C(p,t,g[t])})}}return a});return i.mutate(t).then(function(e){for(var i=e.failures,s=e.results,a=e.numFailures,l=e.lastResult,c=0;c<o.length;++c){var u=s?s[c]:o[c],d=r[c];null==u?d.onerror&&d.onerror(i[c]):d.onsuccess&&d.onsuccess("put"===t.type&&n[c]?t.values[c]:u)}return{failures:i,results:s,numFailures:a,lastResult:l}}).catch(function(t){return r.forEach(function(e){return e.onerror&&e.onerror(t)}),Promise.reject(t)})})}function f(t){return g(t.trans,t.range,1e4)}function g(t,e,r){return i.query({trans:t,values:!1,query:{index:s,range:e},limit:r}).then(function(i){var s=i.result;return h({type:"delete",keys:s,trans:t}).then(function(i){return i.numFailures>0?Promise.reject(i.failures[0]):s.length<r?{failures:[],numFailures:0,lastResult:void 0}:g(t,n(n({},e),{lower:s[s.length-1],lowerOpen:!0}),r)})})}}});return o}})}};function Tr(t,e,n){return"add"===e.type?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function Lr(t,e,n){try{if(!e)return null;if(e.keys.length<t.length)return null;for(var r=[],i=0,s=0;i<e.keys.length&&s<t.length;++i)0===Ee(e.keys[i],t[s])&&(r.push(n?R(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch(t){return null}}var Rr={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var r=t.table(e);return n(n({},r),{getMany:function(t){if(!t.cache)return r.getMany(t);var e=Lr(t.keys,t.trans._cache,"clone"===t.cache);return e?$t.resolve(e):r.getMany(t).then(function(e){return t.trans._cache={keys:t.keys,values:"clone"===t.cache?R(e):e},e})},mutate:function(t){return"add"!==t.type&&(t.trans._cache=null),r.mutate(t)}})}}}};function $r(t,e){return"readonly"===t.trans.mode&&!!t.subscr&&!t.trans.explicit&&"disabled"!==t.trans.db._options.cache&&!e.schema.primaryKey.outbound}function Br(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ir={stack:"dbcore",level:0,name:"Observability",create:function(t){var e=t.schema.name,r=new ar(t.MIN_KEY,t.MAX_KEY);return n(n({},t),{transaction:function(e,n,r){if(Ot.subscr&&"readonly"!==n)throw new Z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ot.querier));return t.transaction(e,n,r)},table:function(i){var a=t.table(i),l=a.schema,c=l.primaryKey,u=l.indexes,d=c.extractKey,h=c.outbound,f=c.autoIncrement&&u.filter(function(t){return t.compound&&t.keyPath.includes(c.keyPath)}),g=n(n({},a),{mutate:function(n){var s,u,d=n.trans,h=n.mutatedParts||(n.mutatedParts={}),g=function(t){var n="idb://".concat(e,"/").concat(i,"/").concat(t);return h[n]||(h[n]=new ar)},p=g(""),m=g(":dels"),b=n.type,y="deleteRange"===n.type?[n.range]:"delete"===n.type?[n.keys]:n.values.length<50?[Er(c,n).filter(function(t){return t}),n.values]:[],x=y[0],v=y[1],w=n.trans._cache;if(o(x)){p.addKeys(x);var k="delete"===b||x.length===v.length?Lr(x,w):null;k||m.addKeys(x),(k||v)&&jr(g,l,k,v)}else if(x){var _={from:null!==(s=x.lower)&&void 0!==s?s:t.MIN_KEY,to:null!==(u=x.upper)&&void 0!==u?u:t.MAX_KEY};m.add(_),p.add(_)}else p.add(r),m.add(r),l.indexes.forEach(function(t){return g(t.name).add(r)});return a.mutate(n).then(function(t){return!x||"add"!==n.type&&"put"!==n.type||(p.addKeys(t.results),f&&f.forEach(function(e){for(var r=n.values.map(function(t){return e.extractKey(t)}),i=e.keyPath.findIndex(function(t){return t===c.keyPath}),s=0,o=t.results.length;s<o;++s)r[s][i]=t.results[s];g(e.name).addKeys(r)})),d.mutatedParts=gr(d.mutatedParts||{},h),t})}}),p=function(e){var n,r,i=e.query,s=i.index,o=i.range;return[s,new ar(null!==(n=o.lower)&&void 0!==n?n:t.MIN_KEY,null!==(r=o.upper)&&void 0!==r?r:t.MAX_KEY)]},m={get:function(t){return[c,new ar(t.key)]},getMany:function(t){return[c,(new ar).addKeys(t.keys)]},count:p,query:p,openCursor:p};return s(m).forEach(function(t){g[t]=function(s){var o=Ot.subscr,l=!!o,c=$r(Ot,a)&&Br(t,s)?s.obsSet={}:o;if(l){var u=function(t){var n="idb://".concat(e,"/").concat(i,"/").concat(t);return c[n]||(c[n]=new ar)},f=u(""),g=u(":dels"),p=m[t](s),b=p[0],y=p[1];if("query"===t&&b.isPrimaryKey&&!s.values?g.add(y):u(b.name||"").add(y),!b.isPrimaryKey){if("count"!==t){var x="query"===t&&h&&s.values&&a.query(n(n({},s),{values:!1}));return a[t].apply(this,arguments).then(function(e){if("query"===t){if(h&&s.values)return x.then(function(t){var n=t.result;return f.addKeys(n),e});var n=s.values?e.result.map(d):e.result;s.values?f.addKeys(n):g.addKeys(n)}else if("openCursor"===t){var r=e,i=s.values;return r&&Object.create(r,{key:{get:function(){return g.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var t=r.primaryKey;return g.addKey(t),t}},value:{get:function(){return i&&f.addKey(r.primaryKey),r.value}}})}return e})}g.add(r)}}return a[t].apply(this,arguments)}}),g}})}};function jr(t,e,n,r){function i(e){var i=t(e.name||"");function s(t){return null!=t?e.extractKey(t):null}var a=function(t){return e.multiEntry&&o(t)?t.forEach(function(t){return i.addKey(t)}):i.addKey(t)};(n||r).forEach(function(t,e){var i=n&&s(n[e]),o=r&&s(r[e]);0!==Ee(i,o)&&(null!=i&&a(i),null!=o&&a(o))})}e.indexes.forEach(i)}function Fr(t,e,r){if(0===r.numFailures)return e;if("deleteRange"===e.type)return null;var i=e.keys?e.keys.length:"values"in e&&e.values?e.values.length:1;if(r.numFailures===i)return null;var s=n({},e);return o(s.keys)&&(s.keys=s.keys.filter(function(t,e){return!(e in r.failures)})),"values"in s&&o(s.values)&&(s.values=s.values.filter(function(t,e){return!(e in r.failures)})),s}function zr(t,e){return void 0===e.lower||(e.lowerOpen?Ee(t,e.lower)>0:Ee(t,e.lower)>=0)}function Nr(t,e){return void 0===e.upper||(e.upperOpen?Ee(t,e.upper)<0:Ee(t,e.upper)<=0)}function Vr(t,e){return zr(t,e)&&Nr(t,e)}function Wr(t,e,n,r,i,s){if(!n||0===n.length)return t;var a=e.query.index,l=a.multiEntry,c=e.query.range,u=r.schema.primaryKey.extractKey,d=a.extractKey,h=(a.lowLevelIndex||a).extractKey,f=n.reduce(function(t,n){var r=t,i=[];if("add"===n.type||"put"===n.type)for(var s=new ar,a=n.values.length-1;a>=0;--a){var h=n.values[a],f=u(h);if(!s.hasKey(f)){var g=d(h);(l&&o(g)?g.some(function(t){return Vr(t,c)}):Vr(g,c))&&(s.addKey(f),i.push(h))}}switch(n.type){case"add":var p=(new ar).addKeys(e.values?t.map(function(t){return u(t)}):t);r=t.concat(e.values?i.filter(function(t){var e=u(t);return!p.hasKey(e)&&(p.addKey(e),!0)}):i.map(function(t){return u(t)}).filter(function(t){return!p.hasKey(t)&&(p.addKey(t),!0)}));break;case"put":var m=(new ar).addKeys(n.values.map(function(t){return u(t)}));r=t.filter(function(t){return!m.hasKey(e.values?u(t):t)}).concat(e.values?i:i.map(function(t){return u(t)}));break;case"delete":var b=(new ar).addKeys(n.keys);r=t.filter(function(t){return!b.hasKey(e.values?u(t):t)});break;case"deleteRange":var y=n.range;r=t.filter(function(t){return!Vr(u(t),y)})}return r},t);return f===t?t:(f.sort(function(t,e){return Ee(h(t),h(e))||Ee(u(t),u(e))}),e.limit&&e.limit<1/0&&(f.length>e.limit?f.length=e.limit:t.length===e.limit&&f.length<e.limit&&(i.dirty=!0)),s?Object.freeze(f):f)}function Hr(t,e){return 0===Ee(t.lower,e.lower)&&0===Ee(t.upper,e.upper)&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function qr(t,e,n,r){if(void 0===t)return void 0!==e?-1:0;if(void 0===e)return 1;var i=Ee(t,e);if(0===i){if(n&&r)return 0;if(n)return 1;if(r)return-1}return i}function Ur(t,e,n,r){if(void 0===t)return void 0!==e?1:0;if(void 0===e)return-1;var i=Ee(t,e);if(0===i){if(n&&r)return 0;if(n)return-1;if(r)return 1}return i}function Kr(t,e){return qr(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&Ur(t.upper,e.upper,t.upperOpen,e.upperOpen)>=0}function Yr(t,e,n,r){var i=mr["idb://".concat(t,"/").concat(e)];if(!i)return[];var s=i.queries[n];if(!s)return[null,!1,i,null];var o=s[(r.query?r.query.index.name:null)||""];if(!o)return[null,!1,i,null];switch(n){case"query":var a=o.find(function(t){return t.req.limit===r.limit&&t.req.values===r.values&&Hr(t.req.query.range,r.query.range)});return a?[a,!0,i,o]:[o.find(function(t){return("limit"in t.req?t.req.limit:1/0)>=r.limit&&(!r.values||t.req.values)&&Kr(t.req.query.range,r.query.range)}),!1,i,o];case"count":var l=o.find(function(t){return Hr(t.req.query.range,r.query.range)});return[l,!!l,i,o]}}function Qr(t,e,n,r){t.subscribers.add(n),r.addEventListener("abort",function(){t.subscribers.delete(n),0===t.subscribers.size&&Xr(t,e)})}function Xr(t,e){setTimeout(function(){0===t.subscribers.size&&z(e,t)},3e3)}var Jr={stack:"dbcore",level:0,name:"Cache",create:function(t){var e=t.schema.name,r=n(n({},t),{transaction:function(n,r,i){var s=t.transaction(n,r,i);if("readwrite"===r){var o=new AbortController,a=o.signal,l=function(i){return function(){if(o.abort(),"readwrite"===r){for(var a=new Set,l=0,c=n;l<c.length;l++){var u=c[l],d=mr["idb://".concat(e,"/").concat(u)];if(d){var h=t.table(u),f=d.optimisticOps.filter(function(t){return t.trans===s});if(s._explicit&&i&&s.mutatedParts)for(var g=0,p=Object.values(d.queries.query);g<p.length;g++)for(var m=0,b=(v=p[g]).slice();m<b.length;m++)pr((_=b[m]).obsSet,s.mutatedParts)&&(z(v,_),_.subscribers.forEach(function(t){return a.add(t)}));else if(f.length>0){d.optimisticOps=d.optimisticOps.filter(function(t){return t.trans!==s});for(var y=0,x=Object.values(d.queries.query);y<x.length;y++)for(var v,w=0,k=(v=x[y]).slice();w<k.length;w++){var _;if(null!=(_=k[w]).res&&s.mutatedParts)if(i&&!_.dirty){var C=Object.isFrozen(_.res),M=Wr(_.res,_.req,f,h,_,C);_.dirty?(z(v,_),_.subscribers.forEach(function(t){return a.add(t)})):M!==_.res&&(_.res=M,_.promise=$t.resolve({result:M}))}else _.dirty&&z(v,_),_.subscribers.forEach(function(t){return a.add(t)})}}}}a.forEach(function(t){return t()})}}};s.addEventListener("abort",l(!1),{signal:a}),s.addEventListener("error",l(!1),{signal:a}),s.addEventListener("complete",l(!0),{signal:a})}return s},table:function(r){var i=t.table(r),s=i.schema.primaryKey,o=n(n({},i),{mutate:function(t){var o=Ot.trans;if(s.outbound||"disabled"===o.db._options.cache||o.explicit||"readwrite"!==o.idbtrans.mode)return i.mutate(t);var a=mr["idb://".concat(e,"/").concat(r)];if(!a)return i.mutate(t);var l=i.mutate(t);return"add"!==t.type&&"put"!==t.type||!(t.values.length>=50||Er(s,t).some(function(t){return null==t}))?(a.optimisticOps.push(t),t.mutatedParts&&xr(t.mutatedParts),l.then(function(e){if(e.numFailures>0){z(a.optimisticOps,t);var n=Fr(a,t,e);n&&a.optimisticOps.push(n),t.mutatedParts&&xr(t.mutatedParts)}}),l.catch(function(){z(a.optimisticOps,t),t.mutatedParts&&xr(t.mutatedParts)})):l.then(function(e){var r=n(n({},t),{values:t.values.map(function(t,r){var i;if(e.failures[r])return t;var o=(null===(i=s.keyPath)||void 0===i?void 0:i.includes("."))?R(t):n({},t);return C(o,s.keyPath,e.results[r]),o})}),i=Fr(a,r,e);a.optimisticOps.push(i),queueMicrotask(function(){return t.mutatedParts&&xr(t.mutatedParts)})}),l},query:function(t){var n;if(!$r(Ot,i)||!Br("query",t))return i.query(t);var s="immutable"===(null===(n=Ot.trans)||void 0===n?void 0:n.db._options.cache),o=Ot,a=o.requery,l=o.signal,c=Yr(e,r,"query",t),u=c[0],d=c[1],h=c[2],f=c[3];if(u&&d)u.obsSet=t.obsSet;else{var g=i.query(t).then(function(t){var e=t.result;if(u&&(u.res=e),s){for(var n=0,r=e.length;n<r;++n)Object.freeze(e[n]);Object.freeze(e)}else t.result=R(e);return t}).catch(function(t){return f&&u&&z(f,u),Promise.reject(t)});u={obsSet:t.obsSet,promise:g,subscribers:new Set,type:"query",req:t,dirty:!1},f?f.push(u):(f=[u],h||(h=mr["idb://".concat(e,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),h.queries.query[t.query.index.name||""]=f)}return Qr(u,f,a,l),u.promise.then(function(e){return{result:Wr(e.result,t,null==h?void 0:h.optimisticOps,i,u,s)}})}});return o}});return r}};function Gr(t,e){return new Proxy(t,{get:function(t,n,r){return"db"===n?e:Reflect.get(t,n,r)}})}var Zr,ti=function(){function t(e,r){var i=this;this._middlewares={},this.verno=0;var s=t.dependencies;this._options=r=n({addons:t.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var o=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:rt,dbReadyPromise:null,cancelOpen:rt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};a.dbReadyPromise=new $t(function(t){a.dbReadyResolve=t}),a.openCanceller=new $t(function(t,e){a.cancelOpen=e}),this._state=a,this.name=e,this.on=Fe(this,"populate","blocked","versionchange","close",{ready:[dt,rt]}),this.once=function(t,e){var n=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];i.on(t).unsubscribe(n),e.apply(i,r)};return i.on(t,n)},this.on.ready.subscribe=x(this.on.ready.subscribe,function(e){return function(n,r){t.vip(function(){var t=i._state;if(t.openComplete)t.dbOpenError||$t.resolve().then(n),r&&e(n);else if(t.onReadyBeingFired)t.onReadyBeingFired.push(n),r&&e(n);else{e(n);var s=i;r||e(function t(){s.on.ready.unsubscribe(n),s.on.ready.unsubscribe(t)})}})}}),this.Collection=Ge(this),this.Table=Ne(this),this.Transaction=yn(this),this.Version=Gn(this),this.WhereClause=dn(this),this.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))}),this._maxKey=_n(r.IDBKeyRange),this._createTransaction=function(t,e,n,r){return new i.Transaction(t,e,n,i._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(t){i.on("blocked").fire(t),ke.filter(function(t){return t.name===i.name&&t!==i&&!t._state.vcFired}).map(function(e){return e.on("versionchange").fire(t)})},this.use(Rr),this.use(Jr),this.use(Ir),this.use(Dr),this.use(Or);var l=new Proxy(this,{get:function(t,e,n){if("_vip"===e)return!0;if("table"===e)return function(t){return Gr(i.table(t),l)};var r=Reflect.get(t,e,n);return r instanceof je?Gr(r,l):"tables"===e?r.map(function(t){return Gr(t,l)}):"_createTransaction"===e?function(){return Gr(r.apply(this,arguments),l)}:r}});this.vip=l,o.forEach(function(t){return t(i)})}return t.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Z.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter(function(e){return e._cfg.version===t})[0];return n||(n=new this.Version(t),e.push(n),e.sort($n),n.stores({}),this._state.autoSchema=!1,n)},t.prototype._whenReady=function(t){var e=this;return this.idbdb&&(this._state.openComplete||Ot.letThrough||this._vip)?t():new $t(function(t,n){if(e._state.openComplete)return n(new Z.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return void n(new Z.DatabaseClosed);e.open().catch(rt)}e._state.dbReadyPromise.then(t,n)}).then(t)},t.prototype.use=function(t){var e=t.stack,n=t.create,r=t.level,i=t.name;i&&this.unuse({stack:e,name:i});var s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:null==r?10:r,name:i}),s.sort(function(t,e){return t.level-e.level}),this},t.prototype.unuse=function(t){var e=t.stack,n=t.name,r=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(function(t){return r?t.create!==r:!!n&&t.name!==n})),this},t.prototype.open=function(){var t=this;return he(Et,function(){return kr(t)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,e=ke.indexOf(this);if(e>=0&&ke.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new $t(function(e){t.dbReadyResolve=e}),t.openCanceller=new $t(function(e,n){t.cancelOpen=n}))},t.prototype.close=function(t){var e=(void 0===t?{disableAutoOpen:!0}:t).disableAutoOpen,n=this._state;e?(n.isBeingOpened&&n.cancelOpen(new Z.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new Z.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},t.prototype.delete=function(t){var e=this;void 0===t&&(t={disableAutoOpen:!0});var n=arguments.length>0&&"object"!=typeof arguments[0],r=this._state;return new $t(function(i,s){var o=function(){e.close(t);var n=e._deps.indexedDB.deleteDatabase(e.name);n.onsuccess=Jt(function(){rr(e._deps,e.name),i()}),n.onerror=hn(s),n.onblocked=e._fireOnBlocked};if(n)throw new Z.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return null!==this.idbdb},t.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var t=this;return s(this._allTables).map(function(e){return t._allTables[e]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var t=Cr.apply(this,arguments);return this._transaction.apply(this,t)},t.prototype._transaction=function(t,e,n){var r=this,i=Ot.trans;i&&i.db===this&&-1===t.indexOf("!")||(i=null);var s,o,a=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(o=e.map(function(t){var e=t instanceof r.Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==t||t===Ce)s=Ce;else{if("rw"!=t&&t!=Me)throw new Z.InvalidArgument("Invalid transaction mode: "+t);s=Me}if(i){if(i.mode===Ce&&s===Me){if(!a)throw new Z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach(function(t){if(i&&-1===i.storeNames.indexOf(t)){if(!a)throw new Z.SubTransaction("Table "+t+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(t){return i?i._promise(null,function(e,n){n(t)}):pe(t)}var l=Mr.bind(null,this,s,o,i,n);return i?i._promise(s,l,"lock"):Ot.trans?he(Ot.transless,function(){return r._whenReady(l)}):this._whenReady(l)},t.prototype.table=function(t){if(!u(this._allTables,t))throw new Z.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},t}(),ei="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",ni=function(){function t(t){this._subscribe=t}return t.prototype.subscribe=function(t,e,n){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:n})},t.prototype[ei]=function(){return this},t}();try{Zr={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(t){Zr={indexedDB:null,IDBKeyRange:null}}function ri(t){var e,n=!1,r=new ni(function(r){var i=W(t);function s(e){var n=Ht();try{i&&se();var r=ie(t,e);return i&&(r=r.finally(oe)),r}finally{n&&qt()}}var o,a=!1,l={},c={},u={get closed(){return a},unsubscribe:function(){a||(a=!0,o&&o.abort(),d&&mn.storagemutated.unsubscribe(g))}};r.start&&r.start(u);var d=!1,h=function(){return ge(p)};function f(){return pr(c,l)}var g=function(t){gr(l,t),f()&&h()},p=function(){if(!a&&Zr.indexedDB){l={};var i={};o&&o.abort(),o=new AbortController;var u={subscr:i,signal:o.signal,requery:h,querier:t,trans:null},f=s(u);Promise.resolve(f).then(function(t){n=!0,e=t,a||u.signal.aborted||(l={},T(c=i)||d||(mn(gn,g),d=!0),ge(function(){return!a&&r.next&&r.next(t)}))},function(t){n=!1,["DatabaseClosedError","AbortError"].includes(null==t?void 0:t.name)||a||ge(function(){a||r.error&&r.error(t)})})}};return setTimeout(h,0),u});return r.hasValue=function(){return n},r.getValue=function(){return e},r}var ii=ti;function si(t){var e=ai;try{ai=!0,mn.storagemutated.fire(t),vr(t,!0)}finally{ai=e}}d(ii,n(n({},nt),{delete:function(t){return new ii(t,{addons:[]}).delete()},exists:function(t){return new ii(t,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return er(ii.dependencies).then(t)}catch(t){return pe(new Z.MissingAPI)}},defineClass:function(){function t(t){a(this,t)}return t},ignoreTransaction:function(t){return Ot.trans?he(Ot.transless,t):t()},vip:ir,async:function(t){return function(){try{var e=_r(t.apply(this,arguments));return e&&"function"==typeof e.then?e:$t.resolve(e)}catch(t){return pe(t)}}},spawn:function(t,e,n){try{var r=_r(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:$t.resolve(r)}catch(t){return pe(t)}},currentTransaction:{get:function(){return Ot.trans||null}},waitFor:function(t,e){var n=$t.resolve("function"==typeof t?ii.ignoreTransaction(t):t).timeout(e||6e4);return Ot.trans?Ot.trans.waitFor(n):n},Promise:$t,debug:{get:function(){return ht},set:function(t){ft(t)}},derive:g,extend:a,props:d,override:x,Events:Fe,on:mn,liveQuery:ri,extendObservabilitySet:gr,getByKeyPath:_,setByKeyPath:C,delByKeyPath:M,shallowClone:S,deepClone:R,getObjectDiff:Pr,cmp:Ee,asap:w,minKey:xe,addons:[],connections:ke,errnames:J,dependencies:Zr,cache:mr,semVer:be,version:be.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,2*n)})})),ii.maxKey=_n(ii.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(mn(gn,function(t){var e;ai||(e=new CustomEvent(pn,{detail:t}),ai=!0,dispatchEvent(e),ai=!1)}),addEventListener(pn,function(t){var e=t.detail;ai||si(e)}));var oi,ai=!1,li=function(){};function ci(t){return new Be({add:t})}function ui(t){return new Be({remove:t})}function di(t,e){return new Be({replacePrefix:[t,e]})}return"undefined"!=typeof BroadcastChannel&&((li=function(){(oi=new BroadcastChannel(pn)).onmessage=function(t){return t.data&&si(t.data)}})(),"function"==typeof oi.unref&&oi.unref(),mn(gn,function(t){ai||oi.postMessage(t)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(t){if(!ti.disableBfCache&&t.persisted){ht&&console.debug("Dexie: handling persisted pagehide"),null==oi||oi.close();for(var e=0,n=ke;e<n.length;e++)n[e].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!ti.disableBfCache&&t.persisted&&(ht&&console.debug("Dexie: handling persisted pageshow"),li(),si({all:new ar(-1/0,[[]])}))})),$t.rejectionMapper=et,ft(ht),n(ti,Object.freeze({__proto__:null,Dexie:ti,liveQuery:ri,Entity:Pe,cmp:Ee,PropModification:Be,replacePrefix:di,add:ci,remove:ui,default:ti,RangeSet:ar,mergeRanges:cr,rangesOverlap:ur}),{default:ti}),ti}();var Pl=Al(Dl.exports);const El=Symbol.for("Dexie"),Ol=globalThis[El]||(globalThis[El]=Pl);if(Pl.semVer!==Ol.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Pl.semVer} and ${Ol.semVer}`);const Tl=new Ol("BookmarkInsightsDB");Tl.version(1).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}),Tl.version(2).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}).upgrade(t=>{console.log("Upgrading database to version 2 - adding rawMetadata support")}),Tl.version(3).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 3 - adding similarities and computedMetrics tables")});const Ll={enrichmentEnabled:!0,enrichmentSchedule:"manual",enrichmentBatchSize:20,enrichmentConcurrency:3,enrichmentRateLimit:1e3,enrichmentFreshnessDays:30,autoCategorizationEnabled:!0,deadLinkCheckEnabled:!0,privacyMode:!1,trackBrowsingBehavior:!1};async function Rl(){try{return await Tl.bookmarks.toArray()}catch(t){return console.error("Error getting bookmarks:",t),[]}}async function $l(t){try{return await Tl.bookmarks.delete(t),!0}catch(t){return console.error("Error deleting bookmark:",t),!1}}async function Bl(){try{const t=await Tl.bookmarks.toArray(),e={};return t.forEach(t=>{t.domain&&(e[t.domain]=(e[t.domain]||0)+1)}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,10)}catch(t){return console.error("Error getting domain stats:",t),[]}}async function Il(){try{const t=await Tl.bookmarks.toArray(),e={};return t.forEach(t=>{const n=new Date(t.dateAdded),r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;e[r]=(e[r]||0)+1}),Object.entries(e).sort()}catch(t){return console.error("Error getting activity timeline:",t),[]}}const jl={domainStats:36e5,activityTimeline:216e5,wordFrequency:864e5,ageDistribution:216e5,categoryTrends:864e5,expertiseAreas:864e5,quickStats:3e5,duplicates:864e5,similarities:864e5,insightsSummary:3e5};async function Fl(t,e,n){try{const r=await Tl.computedMetrics.get(t);if(r&&r.validUntil>Date.now())return console.log(`Cache hit for metric: ${t}`),r.data;console.log(`Cache miss for metric: ${t}, computing...`);const i=await e();return await Tl.computedMetrics.put({key:t,data:i,computedAt:Date.now(),validUntil:Date.now()+n}),i}catch(n){return console.error(`Error getting cached metric ${t}:`,n),e()}}async function zl(){return Fl("domainAnalytics",async()=>{const t=await Rl(),e={};t.forEach(t=>{if(!t.domain)return;e[t.domain]||(e[t.domain]={domain:t.domain,count:0,latestDate:0,oldestDate:1/0,enrichedCount:0});const n=e[t.domain];n.count++,t.lastChecked&&n.enrichedCount++,t.dateAdded>n.latestDate&&(n.latestDate=t.dateAdded),t.dateAdded<n.oldestDate&&(n.oldestDate=t.dateAdded)});const n=Object.values(e),r=t.length;return n.forEach(t=>{t.percentage=r>0?Math.round(t.count/r*100):0,t.dateAdded=t.latestDate}),{byRecency:[...n].sort((t,e)=>e.latestDate-t.latestDate),byCount:[...n].sort((t,e)=>e.count-t.count),top10:[...n].sort((t,e)=>e.count-t.count).slice(0,10),totalDomains:n.length,totalBookmarks:r}},jl.domainStats)}async function Nl(){return Fl("ageDistribution",async()=>{const t=await Rl(),e=Date.now(),n={"Last 24 hours":0,"Last week":0,"Last month":0,"Last 3 months":0,"Last 6 months":0,"Last year":0,"Over 1 year":0},r=864e5,i=7*r,s=30*r;return t.forEach(t=>{const o=e-t.dateAdded;o<=r?n["Last 24 hours"]++:o<=i?n["Last week"]++:o<=s?n["Last month"]++:o<=3*s?n["Last 3 months"]++:o<=6*s?n["Last 6 months"]++:o<=365*r?n["Last year"]++:n["Over 1 year"]++}),Object.entries(n)},jl.ageDistribution)}async function Vl(){return Fl("creationPatterns",async()=>{const t=await Rl(),e=new Array(24).fill(0),n=new Array(7).fill(0),r=new Array(12).fill(0),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t.forEach(t=>{const i=new Date(t.dateAdded);e[i.getHours()]++,n[i.getDay()]++,r[i.getMonth()]++}),{hourly:e.map((t,e)=>[`${e}:00`,t]),daily:n.map((t,e)=>[i[e],t]),monthly:r.map((t,e)=>[s[e],t])}},jl.ageDistribution)}async function Wl(){return Fl("wordFrequency",async()=>{const t=await Rl(),e={},n=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","about","from","up","out"]);return t.forEach(t=>{if(t.title){t.title.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>2&&!n.has(t)).forEach(t=>{e[t]=(e[t]||0)+1})}}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,20)},jl.wordFrequency)}async function Hl(){return Fl("duplicates",async()=>{const t=await Rl(),e={};return t.forEach(t=>{const n=t.url.toLowerCase().replace(/\/$/,"");e[n]||(e[n]=[]),e[n].push(t)}),Object.values(e).filter(t=>t.length>1)},jl.duplicates)}async function ql(){try{const t=await Rl(),e=["http://","https://","chrome://","chrome-extension://","file://","javascript:","data:","about:","mailto:","tel:","ftp://","sftp://","ssh://"];return t.filter(t=>{const n=t.url||"";return!e.some(t=>n.startsWith(t))||""===n.trim()})}catch(t){return console.error("Error finding malformed URLs:",t),[]}}async function Ul(){return Fl("quickStats",async()=>{const t=await Rl(),e=await Hl(),n=await async function(){try{const t=await Rl(),e=["Bookmarks Bar","Other Bookmarks","Mobile Bookmarks",""];return t.filter(t=>{const n=t.folderPath||"";return e.includes(n)||!n.includes("/")})}catch(t){return console.error("Error finding uncategorized bookmarks:",t),[]}}(),r=await ql(),i=Date.now(),s=t.filter(t=>t.lastChecked).length,o=t.filter(t=>!1===t.isAlive).length,a=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{total:t.length,enriched:s,pending:t.length-s,enrichedPercentage:t.length>0?Math.round(s/t.length*100):0,duplicateGroups:e.length,uncategorized:n.length,malformed:r.length,deadLinks:o,uniqueDomains:a,addedThisWeek:t.filter(t=>i-t.dateAdded<6048e5).length,addedThisMonth:t.filter(t=>i-t.dateAdded<2592e6).length,oldestBookmark:t.reduce((t,e)=>e.dateAdded<t?e.dateAdded:t,Date.now()),newestBookmark:t.reduce((t,e)=>e.dateAdded>t?e.dateAdded:t,0)}},jl.quickStats)}async function Kl(t){try{const e=[];for(const n of t)try{await chrome.bookmarks.remove(n)}catch(t){console.error(`Error deleting bookmark ${n}:`,t),e.push({id:n,error:t.message})}return await Tl.bookmarks.bulkDelete(t),await async function(t){const e={add:["domainStats","quickStats","activityTimeline","ageDistribution","insightsSummary"],delete:["domainStats","quickStats","duplicates","similarities","insightsSummary"],update:["quickStats","insightsSummary"],enrich:["categoryTrends","expertiseAreas","insightsSummary","quickStats"],all:Object.keys(jl)}[t]||[];try{for(const t of e)await Tl.computedMetrics.delete(t);console.log(`Invalidated caches for change type: ${t}`,e)}catch(t){console.error("Error invalidating metric caches:",t)}}("delete"),{success:t.length-e.length,errors:e}}catch(t){throw console.error("Error deleting bookmarks:",t),t}}async function Yl(){try{const t=await Rl(),e={};return t.forEach(t=>{if(t.title){const n=t.title.toLowerCase();n.includes("how to")&&(e["How-to guides"]=(e["How-to guides"]||0)+1),n.includes("tutorial")&&(e.Tutorials=(e.Tutorials||0)+1),(n.includes("documentation")||n.includes("docs"))&&(e.Documentation=(e.Documentation||0)+1),(n.includes("api")||n.includes("reference"))&&(e["API/Reference"]=(e["API/Reference"]||0)+1),(n.includes("blog")||n.includes("article"))&&(e["Blog/Articles"]=(e["Blog/Articles"]||0)+1),(n.includes("github")||n.includes("repository"))&&(e["Code Repositories"]=(e["Code Repositories"]||0)+1),(n.includes("video")||n.includes("youtube"))&&(e.Videos=(e.Videos||0)+1),(n.includes("tool")||n.includes("app"))&&(e["Tools/Apps"]=(e["Tools/Apps"]||0)+1),n.length>60&&(e["Long titles (60+ chars)"]=(e["Long titles (60+ chars)"]||0)+1),n.split(" ").length<=3&&(e["Short titles (3 words)"]=(e["Short titles (3 words)"]||0)+1)}}),Object.entries(e).sort(([,t],[,e])=>e-t)}catch(t){return console.error("Error getting title patterns:",t),[]}}async function Ql(){try{const t=await Rl(),e={},n={},r={},i={};return t.forEach(t=>{try{const s=new URL(t.url);e[s.protocol]=(e[s.protocol]||0)+1;const o=s.hostname.split(".");if(o.length>1){const t=o[o.length-1];n[t]=(n[t]||0)+1}if(o.length>2){const t=o[0];"www"!==t&&(i[t]=(i[t]||0)+1)}const a=s.pathname.split("/").filter(t=>t.length>0);if(a.length>0){const t=a[0];r[t]=(r[t]||0)+1}}catch(t){}}),{protocols:Object.entries(e).sort(([,t],[,e])=>e-t),topLevelDomains:Object.entries(n).sort(([,t],[,e])=>e-t).slice(0,10),subdomains:Object.entries(i).sort(([,t],[,e])=>e-t).slice(0,10),pathPatterns:Object.entries(r).sort(([,t],[,e])=>e-t).slice(0,15)}}catch(t){return console.error("Error getting URL patterns:",t),{protocols:[],topLevelDomains:[],subdomains:[],pathPatterns:[]}}}async function Xl(){try{const t=await Rl(),e={};let n=0,r=0;t.forEach(t=>{r++;try{const r=new URL(t.url).searchParams;if(r.toString()){n++;for(const[t]of r)e[t]=(e[t]||0)+1}}catch(t){}});return{parameters:Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,15),urlsWithParams:n,totalUrls:r,percentage:r>0?Math.round(n/r*100):0}}catch(t){return console.error("Error getting URL parameter usage:",t),{parameters:[],urlsWithParams:0,totalUrls:0,percentage:0}}}async function Jl(){try{const t=await Rl(),e={};t.forEach(t=>{e[t.domain]=(e[t.domain]||0)+1});const n=Object.entries(e).sort(([,t],[,e])=>e-t),r=t.length,i=n.slice(0,10),s=n.slice(10).reduce((t,[,e])=>t+e,0),o=i.map(([t,e])=>({domain:t,count:e,percentage:Math.round(e/r*100)}));return s>0&&o.push({domain:"Others",count:s,percentage:Math.round(s/r*100)}),o}catch(t){return console.error("Error getting domain distribution:",t),[]}}async function Gl(){try{return(await Rl()).filter(t=>!1===t.isAlive)}catch(t){return console.error("Error getting dead links:",t),[]}}async function Zl(){try{const t=await Tl.bookmarks.toArray(),e=await Tl.settings.toArray(),n=await Tl.events.orderBy("timestamp").reverse().limit(1e3).toArray(),r=await Tl.similarities.toArray(),i=t.filter(t=>t.lastChecked).length,s=t.filter(t=>t.category).length;return{version:"2.1",schemaVersion:3,createdAt:(new Date).toISOString(),metadata:{totalBookmarks:t.length,enrichedCount:i,categorizedCount:s,eventsCount:n.length,similaritiesCount:r.length},data:{bookmarks:t,settings:e,events:n,similarities:r}}}catch(t){throw console.error("Error creating backup:",t),t}}async function tc(t,e={}){const{restoreBookmarks:n=!0,restoreSettings:r=!0,restoreEvents:i=!1,restoreSimilarities:s=!0,mergeMode:o=!1}=e;try{if(!t||!t.version||!t.data)throw new Error("Invalid backup format");if(!t.data.bookmarks||!Array.isArray(t.data.bookmarks))throw new Error("Backup does not contain valid bookmarks data");const e={bookmarksRestored:0,settingsRestored:0,eventsRestored:0,similaritiesRestored:0,errors:[]};if(n&&t.data.bookmarks.length>0)if(o||await Tl.bookmarks.clear(),o){const n=await Tl.bookmarks.toArray(),r=new Map(n.map(t=>[t.id,t]));for(const n of t.data.bookmarks){const t=r.get(n.id);if(t){const r=t.lastChecked||0;(n.lastChecked||0)>r&&(await Tl.bookmarks.put(n),e.bookmarksRestored++)}else await Tl.bookmarks.put(n),e.bookmarksRestored++}}else await Tl.bookmarks.bulkPut(t.data.bookmarks),e.bookmarksRestored=t.data.bookmarks.length;return r&&t.data.settings&&t.data.settings.length>0&&(o||await Tl.settings.clear(),await Tl.settings.bulkPut(t.data.settings),e.settingsRestored=t.data.settings.length),i&&t.data.events&&t.data.events.length>0&&(o||await Tl.events.clear(),await Tl.events.bulkPut(t.data.events),e.eventsRestored=t.data.events.length),s&&t.data.similarities&&t.data.similarities.length>0&&(o||await Tl.similarities.clear(),await Tl.similarities.bulkPut(t.data.similarities),e.similaritiesRestored=t.data.similarities.length),await async function(){try{return await Tl.computedMetrics.clear(),console.log("Cleared all metric caches"),!0}catch(t){return console.error("Error clearing metric caches:",t),!1}}(),{success:!0,results:e,backupMetadata:t.metadata}}catch(t){throw console.error("Error restoring from backup:",t),t}}async function ec(){try{const t=await Zl();let e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];return e.unshift({createdAt:t.createdAt,metadata:t.metadata,data:t.data}),e.length>3&&(e=e.slice(0,3)),await chrome.storage.local.set({autoBackups:e}),console.log("Auto-backup created:",t.metadata),{success:!0,metadata:t.metadata}}catch(t){return console.error("Error creating auto-backup:",t),{success:!1,error:t.message}}}function nc(t,e,n){const r=t.slice();return r[34]=e[n],r}function rc(t,e,n){const r=t.slice();return r[37]=e[n],r}function ic(t,e,n){const r=t.slice();return r[34]=e[n],r}function sc(t,e,n){const r=t.slice();return r[42]=e[n],r}function oc(t){let e,n,r,i,s,o,a,l,c=t[42]+"";function u(){return t[21](t[42])}return{c(){e=y("div"),n=y("div"),r=v("Domain: "),i=v(c),s=w(),o=y("button"),o.textContent="",M(n,"class","text-xs text-blue-800"),M(o,"class","text-blue-600 hover:text-blue-800"),M(e,"class","flex items-center justify-between p-2 bg-blue-50 rounded-md")},m(t,c){p(t,e,c),g(e,n),g(n,r),g(n,i),g(e,s),g(e,o),a||(l=_(o,"click",u),a=!0)},p(e,n){t=e,4&n[0]&&c!==(c=t[42]+"")&&A(i,c)},d(t){t&&m(e),a=!1,l()}}}function ac(t){let e,n,r,i,s,o,a,l,c=t[34]+"";function u(){return t[22](t[34])}return{c(){e=y("div"),n=y("div"),r=v("Folder: "),i=v(c),s=w(),o=y("button"),o.textContent="",M(n,"class","text-xs text-green-800"),M(o,"class","text-green-600 hover:text-green-800"),M(e,"class","flex items-center justify-between p-2 bg-green-50 rounded-md")},m(t,c){p(t,e,c),g(e,n),g(n,r),g(n,i),g(e,s),g(e,o),a||(l=_(o,"click",u),a=!0)},p(e,n){t=e,4&n[0]&&c!==(c=t[34]+"")&&A(i,c)},d(t){t&&m(e),a=!1,l()}}}function lc(t){let e,n,r,i,s,o,a,l="week"===t[2].dateRange.period?"This Week":"month"===t[2].dateRange.period?"This Month":"This Year";return{c(){e=y("div"),n=y("div"),r=v(l),i=w(),s=y("button"),s.textContent="",M(n,"class","text-xs text-purple-800"),M(s,"class","text-purple-600 hover:text-purple-800"),M(e,"class","flex items-center justify-between p-2 bg-purple-50 rounded-md")},m(l,c){p(l,e,c),g(e,n),g(n,r),g(e,i),g(e,s),o||(a=_(s,"click",t[23]),o=!0)},p(t,e){4&e[0]&&l!==(l="week"===t[2].dateRange.period?"This Week":"month"===t[2].dateRange.period?"This Month":"This Year")&&A(r,l)},d(t){t&&m(e),o=!1,a()}}}function cc(t){let e,n,r,i=t[6].length+"";return{c(){e=v("Domains ("),n=v(i),r=v(")")},m(t,i){p(t,e,i),p(t,n,i),p(t,r,i)},p(t,e){64&e[0]&&i!==(i=t[6].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function uc(t){let e,n,r,i,s=t[6].length+"";return{c(){e=y("span"),n=v("Matching Domains ("),r=v(s),i=v(")"),M(e,"class","text-blue-600")},m(t,s){p(t,e,s),g(e,n),g(e,r),g(e,i)},p(t,e){64&e[0]&&s!==(s=t[6].length+"")&&A(r,s)},d(t){t&&m(e)}}}function dc(t){let e,n,i,s,o,a;return{c(){e=y("div"),n=y("button"),n.textContent="Recent",i=w(),s=y("button"),s.textContent="Count",M(n,"class","text-xs px-2 py-1 rounded"),M(n,"title","Sort by most recent bookmark"),T(n,"bg-blue-100","recency"===t[1]),T(n,"text-blue-700","recency"===t[1]),T(n,"text-gray-500","recency"!==t[1]),M(s,"class","text-xs px-2 py-1 rounded"),M(s,"title","Sort by bookmark count"),T(s,"bg-blue-100","count"===t[1]),T(s,"text-blue-700","count"===t[1]),T(s,"text-gray-500","count"!==t[1]),M(e,"class","flex space-x-1")},m(r,l){p(r,e,l),g(e,n),g(e,i),g(e,s),o||(a=[_(n,"click",t[27]),_(s,"click",t[28])],o=!0)},p(t,e){2&e[0]&&T(n,"bg-blue-100","recency"===t[1]),2&e[0]&&T(n,"text-blue-700","recency"===t[1]),2&e[0]&&T(n,"text-gray-500","recency"!==t[1]),2&e[0]&&T(s,"bg-blue-100","count"===t[1]),2&e[0]&&T(s,"text-blue-700","count"===t[1]),2&e[0]&&T(s,"text-gray-500","count"!==t[1])},d(t){t&&m(e),o=!1,r(a)}}}function hc(t){let e,n,r=kc(t[37].dateAdded||t[37].latestDate)+"";return{c(){e=y("span"),n=v(r)},m(t,r){p(t,e,r),g(e,n)},p(t,e){72&e[0]&&r!==(r=kc(t[37].dateAdded||t[37].latestDate)+"")&&A(n,r)},d(t){t&&m(e)}}}function fc(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b=t[37].domain+"",x=t[37].count+"",k=1!==t[37].count?"s":"",C=!t[0]&&"recency"===t[1]&&(t[37].dateAdded||t[37].latestDate)&&hc(t);function S(){return t[29](t[37])}return{c(){e=y("button"),n=y("div"),r=v(b),i=w(),s=y("div"),o=y("span"),a=v(x),l=v(" bookmark"),c=v(k),u=w(),C&&C.c(),M(n,"class","truncate font-medium"),M(s,"class","flex justify-between items-center text-xs text-gray-500 mt-1"),M(e,"class","w-full text-left px-2 py-2 text-sm hover:bg-gray-100 rounded border"),M(e,"title",d=t[37].domain),T(e,"bg-blue-50",t[2].domains.includes(t[37].domain)),T(e,"text-blue-700",t[2].domains.includes(t[37].domain)),T(e,"border-blue-200",t[2].domains.includes(t[37].domain)),T(e,"text-gray-600",!t[2].domains.includes(t[37].domain)),T(e,"border-transparent",!t[2].domains.includes(t[37].domain))},m(t,d){p(t,e,d),g(e,n),g(n,r),g(e,i),g(e,s),g(s,o),g(o,a),g(o,l),g(o,c),g(s,u),C&&C.m(s,null),h||(f=_(e,"click",S),h=!0)},p(n,i){t=n,72&i[0]&&b!==(b=t[37].domain+"")&&A(r,b),72&i[0]&&x!==(x=t[37].count+"")&&A(a,x),72&i[0]&&k!==(k=1!==t[37].count?"s":"")&&A(c,k),t[0]||"recency"!==t[1]||!t[37].dateAdded&&!t[37].latestDate?C&&(C.d(1),C=null):C?C.p(t,i):(C=hc(t),C.c(),C.m(s,null)),72&i[0]&&d!==(d=t[37].domain)&&M(e,"title",d),76&i[0]&&T(e,"bg-blue-50",t[2].domains.includes(t[37].domain)),76&i[0]&&T(e,"text-blue-700",t[2].domains.includes(t[37].domain)),76&i[0]&&T(e,"border-blue-200",t[2].domains.includes(t[37].domain)),76&i[0]&&T(e,"text-gray-600",!t[2].domains.includes(t[37].domain)),76&i[0]&&T(e,"border-transparent",!t[2].domains.includes(t[37].domain))},d(t){t&&m(e),C&&C.d(),h=!1,f()}}}function gc(t){let e,n,r,i,s,o,a,l,c=t[6].length+"";return{c(){e=y("button"),n=v("Load More ("),r=v(t[3]),i=v(" of "),s=v(c),o=v(" shown)"),M(e,"class","w-full text-center px-2 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded border border-blue-200 mt-2")},m(c,u){p(c,e,u),g(e,n),g(e,r),g(e,i),g(e,s),g(e,o),a||(l=_(e,"click",t[7]),a=!0)},p(t,e){8&e[0]&&A(r,t[3]),64&e[0]&&c!==(c=t[6].length+"")&&A(s,c)},d(t){t&&m(e),a=!1,l()}}}function pc(t){let e;return{c(){e=y("div"),e.textContent="No domains found",M(e,"class","text-xs text-gray-400 px-2 py-2 italic")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function mc(t){let e,n,r,i=t[5].length+"";return{c(){e=v("Folders ("),n=v(i),r=v(")")},m(t,i){p(t,e,i),p(t,n,i),p(t,r,i)},p(t,e){32&e[0]&&i!==(i=t[5].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function bc(t){let e,n,r,i,s=t[5].length+"";return{c(){e=y("span"),n=v("Matching Folders ("),r=v(s),i=v(")"),M(e,"class","text-blue-600")},m(t,s){p(t,e,s),g(e,n),g(e,r),g(e,i)},p(t,e){32&e[0]&&s!==(s=t[5].length+"")&&A(r,s)},d(t){t&&m(e)}}}function yc(t){let e,n,r,i,s,o,a,l=t[34]+"";function c(){return t[30](t[34])}return{c(){e=y("button"),n=y("span"),r=v(" "),i=v(l),M(n,"class","truncate block"),M(e,"class","w-full text-left px-2 py-1 text-sm hover:bg-gray-100 rounded border"),M(e,"title",s=t[34]),T(e,"bg-green-50",t[2].folders.includes(t[34])),T(e,"text-green-700",t[2].folders.includes(t[34])),T(e,"border-green-200",t[2].folders.includes(t[34])),T(e,"text-gray-600",!t[2].folders.includes(t[34])),T(e,"border-transparent",!t[2].folders.includes(t[34]))},m(t,s){p(t,e,s),g(e,n),g(n,r),g(n,i),o||(a=_(e,"click",c),o=!0)},p(n,r){t=n,48&r[0]&&l!==(l=t[34]+"")&&A(i,l),48&r[0]&&s!==(s=t[34])&&M(e,"title",s),52&r[0]&&T(e,"bg-green-50",t[2].folders.includes(t[34])),52&r[0]&&T(e,"text-green-700",t[2].folders.includes(t[34])),52&r[0]&&T(e,"border-green-200",t[2].folders.includes(t[34])),52&r[0]&&T(e,"text-gray-600",!t[2].folders.includes(t[34])),52&r[0]&&T(e,"border-transparent",!t[2].folders.includes(t[34]))},d(t){t&&m(e),o=!1,a()}}}function xc(t){let e,n,r,i,s,o,a,l,c=t[5].length+"";return{c(){e=y("button"),n=v("Load More ("),r=v(t[4]),i=v(" of "),s=v(c),o=v(" shown)"),M(e,"class","w-full text-center px-2 py-2 text-sm text-green-600 hover:bg-green-50 rounded border border-green-200 mt-2")},m(c,u){p(c,e,u),g(e,n),g(e,r),g(e,i),g(e,s),g(e,o),a||(l=_(e,"click",t[8]),a=!0)},p(t,e){16&e[0]&&A(r,t[4]),32&e[0]&&c!==(c=t[5].length+"")&&A(s,c)},d(t){t&&m(e),a=!1,l()}}}function vc(t){let e;return{c(){e=y("div"),e.textContent="No folders found",M(e,"class","text-xs text-gray-400 px-2 py-2 italic")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function wc(e){let n,i,s,o,a,l,c,u,d,h,f,x,v,k,C,S,A,D,P,E,O,L,R,$,B,I,j,F,z,N,V,W,H,q,U=e[13](),K=e[13](),Y=U&&function(e){let n,r,i;return{c(){n=y("button"),n.textContent="Clear All",M(n,"class","text-xs text-blue-600 hover:text-blue-800")},m(t,s){p(t,n,s),r||(i=_(n,"click",e[11]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}(e),Q=K&&function(t){let e,n,r,i=nt(t[2].domains),s=[];for(let e=0;e<i.length;e+=1)s[e]=oc(sc(t,i,e));let o=nt(t[2].folders),a=[];for(let e=0;e<o.length;e+=1)a[e]=ac(ic(t,o,e));let l=t[2].dateRange&&lc(t);return{c(){e=y("div");for(let t=0;t<s.length;t+=1)s[t].c();n=w();for(let t=0;t<a.length;t+=1)a[t].c();r=w(),l&&l.c(),M(e,"class","mb-4 space-y-2")},m(t,i){p(t,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);g(e,n);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(e,null);g(e,r),l&&l.m(e,null)},p(t,c){if(516&c[0]){let r;for(i=nt(t[2].domains),r=0;r<i.length;r+=1){const o=sc(t,i,r);s[r]?s[r].p(o,c):(s[r]=oc(o),s[r].c(),s[r].m(e,n))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}if(1028&c[0]){let n;for(o=nt(t[2].folders),n=0;n<o.length;n+=1){const i=ic(t,o,n);a[n]?a[n].p(i,c):(a[n]=ac(i),a[n].c(),a[n].m(e,r))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}t[2].dateRange?l?l.p(t,c):(l=lc(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(t){t&&m(e),b(s,t),b(a,t),l&&l.d()}}}(e);function X(t,e){return t[0]?uc:cc}let J=X(e),G=J(e),Z=!e[0]&&dc(e),tt=nt(e[6].slice(0,e[3])),et=[];for(let t=0;t<tt.length;t+=1)et[t]=fc(rc(e,tt,t));let rt=e[6].length>e[3]&&gc(e),it=0===e[6].length&&pc();function st(t,e){return t[0]?bc:mc}let ot=st(e),at=ot(e),lt=nt(e[5].slice(0,e[4])),ct=[];for(let t=0;t<lt.length;t+=1)ct[t]=yc(nc(e,lt,t));let ut=e[5].length>e[4]&&xc(e),dt=0===e[5].length&&vc();return{c(){n=y("div"),i=y("div"),s=y("div"),o=y("h3"),o.textContent="Filters",a=w(),Y&&Y.c(),l=w(),Q&&Q.c(),c=w(),u=y("div"),d=y("h4"),d.textContent="Date Added",h=w(),f=y("div"),x=y("button"),x.textContent="This Week",v=w(),k=y("button"),k.textContent="This Month",C=w(),S=y("button"),S.textContent="This Year",A=w(),D=y("div"),P=y("div"),E=y("h4"),G.c(),O=w(),Z&&Z.c(),L=w(),R=y("div");for(let t=0;t<et.length;t+=1)et[t].c();$=w(),rt&&rt.c(),B=w(),it&&it.c(),I=w(),j=y("div"),F=y("h4"),at.c(),z=w(),N=y("div");for(let t=0;t<ct.length;t+=1)ct[t].c();V=w(),ut&&ut.c(),W=w(),dt&&dt.c(),M(o,"class","text-sm font-medium text-gray-900"),M(s,"class","flex items-center justify-between mb-3"),M(i,"class","mb-6"),M(d,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),M(x,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),T(x,"bg-blue-50","week"===e[2].dateRange?.period),T(x,"text-blue-700","week"===e[2].dateRange?.period),M(k,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),T(k,"bg-blue-50","month"===e[2].dateRange?.period),T(k,"text-blue-700","month"===e[2].dateRange?.period),M(S,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded"),T(S,"bg-blue-50","year"===e[2].dateRange?.period),T(S,"text-blue-700","year"===e[2].dateRange?.period),M(f,"class","space-y-1"),M(u,"class","mb-6"),M(E,"class","text-xs font-medium text-gray-700 uppercase tracking-wide"),M(P,"class","flex items-center justify-between mb-2"),M(R,"class","space-y-1 max-h-96 overflow-y-auto"),M(D,"class","mb-6"),M(F,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),M(N,"class","space-y-1 max-h-64 overflow-y-auto"),M(j,"class","mb-6"),M(n,"class","w-64 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0")},m(t,r){p(t,n,r),g(n,i),g(i,s),g(s,o),g(s,a),Y&&Y.m(s,null),g(i,l),Q&&Q.m(i,null),g(n,c),g(n,u),g(u,d),g(u,h),g(u,f),g(f,x),g(f,v),g(f,k),g(f,C),g(f,S),g(n,A),g(n,D),g(D,P),g(P,E),G.m(E,null),g(P,O),Z&&Z.m(P,null),g(D,L),g(D,R);for(let t=0;t<et.length;t+=1)et[t]&&et[t].m(R,null);g(R,$),rt&&rt.m(R,null),g(R,B),it&&it.m(R,null),g(n,I),g(n,j),g(j,F),at.m(F,null),g(j,z),g(j,N);for(let t=0;t<ct.length;t+=1)ct[t]&&ct[t].m(N,null);g(N,V),ut&&ut.m(N,null),g(N,W),dt&&dt.m(N,null),H||(q=[_(x,"click",e[24]),_(k,"click",e[25]),_(S,"click",e[26])],H=!0)},p(t,e){if(U&&Y.p(t,e),K&&Q.p(t,e),4&e[0]&&T(x,"bg-blue-50","week"===t[2].dateRange?.period),4&e[0]&&T(x,"text-blue-700","week"===t[2].dateRange?.period),4&e[0]&&T(k,"bg-blue-50","month"===t[2].dateRange?.period),4&e[0]&&T(k,"text-blue-700","month"===t[2].dateRange?.period),4&e[0]&&T(S,"bg-blue-50","year"===t[2].dateRange?.period),4&e[0]&&T(S,"text-blue-700","year"===t[2].dateRange?.period),J===(J=X(t))&&G?G.p(t,e):(G.d(1),G=J(t),G&&(G.c(),G.m(E,null))),t[0]?Z&&(Z.d(1),Z=null):Z?Z.p(t,e):(Z=dc(t),Z.c(),Z.m(P,null)),591&e[0]){let n;for(tt=nt(t[6].slice(0,t[3])),n=0;n<tt.length;n+=1){const r=rc(t,tt,n);et[n]?et[n].p(r,e):(et[n]=fc(r),et[n].c(),et[n].m(R,$))}for(;n<et.length;n+=1)et[n].d(1);et.length=tt.length}if(t[6].length>t[3]?rt?rt.p(t,e):(rt=gc(t),rt.c(),rt.m(R,B)):rt&&(rt.d(1),rt=null),0===t[6].length?it||(it=pc(),it.c(),it.m(R,null)):it&&(it.d(1),it=null),ot===(ot=st(t))&&at?at.p(t,e):(at.d(1),at=ot(t),at&&(at.c(),at.m(F,null))),1076&e[0]){let n;for(lt=nt(t[5].slice(0,t[4])),n=0;n<lt.length;n+=1){const r=nc(t,lt,n);ct[n]?ct[n].p(r,e):(ct[n]=yc(r),ct[n].c(),ct[n].m(N,V))}for(;n<ct.length;n+=1)ct[n].d(1);ct.length=lt.length}t[5].length>t[4]?ut?ut.p(t,e):(ut=xc(t),ut.c(),ut.m(N,W)):ut&&(ut.d(1),ut=null),0===t[5].length?dt||(dt=vc(),dt.c(),dt.m(N,null)):dt&&(dt.d(1),dt=null)},i:t,o:t,d(t){t&&m(n),Y&&Y.d(),Q&&Q.d(),G.d(),Z&&Z.d(),b(et,t),rt&&rt.d(),it&&it.d(),at.d(),b(ct,t),ut&&ut.d(),dt&&dt.d(),H=!1,r(q)}}}function kc(t){const e=Date.now()-t,n=Math.floor(e/864e5);return 0===n?"Today":1===n?"1 day ago":n<7?`${n} days ago`:n<30?`${Math.floor(n/7)} weeks ago`:n<365?`${Math.floor(n/30)} months ago`:`${Math.floor(n/365)} years ago`}function _c(t,e,n){let r,i;const s=I();let{searchResultStats:o=null}=e,{isSearchActive:a=!1}=e,l=[],c=[],u=[],d={domains:[],folders:[],dateRange:null},h="count",f=30,g=15;function p(t){d.domains.includes(t)?n(2,d.domains=d.domains.filter(e=>e!==t),d):n(2,d.domains=[...d.domains,t],d),y()}function m(t){d.folders.includes(t)?n(2,d.folders=d.folders.filter(e=>e!==t),d):n(2,d.folders=[...d.folders,t],d),y()}function b(){n(2,d={domains:[],folders:[],dateRange:null}),y()}function y(){s("filter",d)}function x(){return d.domains.length>0||d.folders.length>0||null!==d.dateRange}function v(t){const e=new Date;let r;switch(t){case"week":r=new Date(e.getTime()-6048e5);break;case"month":r=new Date(e.getFullYear(),e.getMonth(),1);break;case"year":r=new Date(e.getFullYear(),0,1)}!function(t,e,r){n(2,d.dateRange={startDate:t,endDate:e,period:r},d),y()}(r.getTime(),e.getTime(),t)}B(async()=>{try{await async function(){n(18,l=await async function(){return(await zl()).byRecency}()),n(19,c=await async function(){return(await zl()).byCount}())}(),n(20,u=await async function(){try{const t=await Rl();return[...new Set(t.map(t=>t.folderPath).filter(t=>t))].sort()}catch(t){return console.error("Error getting unique folders:",t),[]}}())}catch(t){console.error("Error loading filters:",t)}});return t.$$set=t=>{"searchResultStats"in t&&n(15,o=t.searchResultStats),"isSearchActive"in t&&n(0,a=t.isSearchActive)},t.$$.update=()=>{819203&t.$$.dirty[0]&&n(6,r=a&&o?.domains?o.domains:"recency"===h?l:c),1081345&t.$$.dirty[0]&&n(5,i=a&&o?.folders?o.folders.map(t=>t.folder):u)},[a,h,d,f,g,i,r,function(){n(3,f+=30)},function(){n(4,g+=15)},p,m,b,y,x,v,o,function(){return x()},function(){b()},l,c,u,t=>p(t),t=>m(t),()=>{n(2,d.dateRange=null,d),y()},()=>v("week"),()=>v("month"),()=>v("year"),()=>n(1,h="recency"),()=>n(1,h="count"),t=>p(t.domain),t=>m(t)]}class Cc extends ut{constructor(t){super(),ct(this,t,_c,wc,s,{searchResultStats:15,isSearchActive:0,getHasActiveFilters:16,clearAllFilters:17},null,[-1,-1])}get getHasActiveFilters(){return this.$$.ctx[16]}get clearAllFilters(){return this.$$.ctx[17]}}const Mc={bookmarks:{icon:"",description:"Primary bookmark data with enrichment fields"},events:{icon:"",description:"Activity log (create, delete, access, enrichment events)"},cache:{icon:"",description:"General purpose cache storage"},settings:{icon:"",description:"Application settings and preferences"},similarities:{icon:"",description:"Precomputed bookmark similarity scores"},computedMetrics:{icon:"",description:"Cached computed metrics with TTL"},enrichmentQueue:{icon:"",description:"Queue of bookmarks pending enrichment"}},Sc=[{key:"domainStats",ttl:"1 hour",description:"Top domains by bookmark count"},{key:"activityTimeline",ttl:"6 hours",description:"Monthly bookmark creation timeline"},{key:"quickStats",ttl:"5 minutes",description:"Dashboard quick statistics"},{key:"wordFrequency",ttl:"24 hours",description:"Title word frequency analysis"},{key:"ageDistribution",ttl:"6 hours",description:"Bookmark age distribution"},{key:"categoryTrends",ttl:"24 hours",description:"Category distribution over time"},{key:"expertiseAreas",ttl:"24 hours",description:"User expertise based on bookmarks"},{key:"duplicates",ttl:"24 hours",description:"Detected duplicate bookmarks"},{key:"similarities",ttl:"24 hours",description:"Similar bookmark pairs"},{key:"insightsSummary",ttl:"5 minutes",description:"Aggregated insights summary"}];async function Ac(){const t=Object.keys(Mc),e=await Promise.all(t.map(async t=>{try{return{name:t,count:await Tl[t].count(),...Mc[t]}}catch(e){return{name:t,count:0,...Mc[t],error:e.message}}})),n=e.reduce((t,e)=>t+e.count,0),r=await async function(){let t=0;const e=Object.keys(Mc);for(const n of e)try{const e=await Tl[n].toArray();t+=JSON.stringify(e).length}catch(t){}if(t>1048576)return`~${(t/1048576).toFixed(1)} MB`;return`~${(t/1024).toFixed(0)} KB`}();return{tables:e,totalRecords:n,estimatedSize:r,lastChecked:Date.now()}}async function Dc(t,e={}){const{page:n=0,pageSize:r=50,sortBy:i=null,sortOrder:s="desc",searchQuery:o="",searchField:a="all",fieldFilter:l=null}=e;let c=await Tl[t].toArray();if(l&&(c=c.filter(t=>{const e=t[l.field],n=null!=e&&""!==e&&!(Array.isArray(e)&&0===e.length);return l.hasValue?n:!n})),o){const t=o.toLowerCase();c=c.filter(e=>{if("all"===a)return JSON.stringify(e).toLowerCase().includes(t);const n=e[a];return n&&String(n).toLowerCase().includes(t)})}i&&c.sort((t,e)=>{const n=t[i],r=e[i];if(n===r)return 0;if(null==n)return 1;if(null==r)return-1;if("number"==typeof n&&"number"==typeof r)return"desc"===s?r-n:n-r;const o=String(n).localeCompare(String(r));return"desc"===s?-o:o});const u=c.length,d=Math.ceil(u/r);return{records:c.slice(n*r,(n+1)*r),totalCount:u,page:n,pageSize:r,totalPages:d,hasMore:(n+1)*r<u,hasPrev:n>0}}async function Pc(){let t=[];try{t=await Tl.computedMetrics.toArray()}catch(t){console.error("Error fetching computedMetrics:",t)}const e=Date.now(),n=new Set(t.map(t=>t.key)),r=t.map(t=>{const n=t.validUntil-e;let r="valid";n<=0?r="stale":n<36e5&&(r="expiring");const i=Sc.find(e=>e.key===t.key);return{key:t.key,description:i?.description||"Custom metric",expectedTtl:i?.ttl||"Unknown",computedAt:t.computedAt,validUntil:t.validUntil,timeRemaining:n,status:r,dataSize:JSON.stringify(t.data||{}).length,hasData:!!t.data}});return Sc.forEach(t=>{n.has(t.key)||r.push({key:t.key,description:t.description,expectedTtl:t.ttl,computedAt:null,validUntil:null,timeRemaining:null,status:"never",dataSize:0,hasData:!1})}),r.sort((t,e)=>t.key.localeCompare(e.key))}function Ec(t){if(!t)return"-";const e=new Date(t),n=new Date-e,r=Math.floor(n/6e4),i=Math.floor(n/36e5),s=Math.floor(n/864e5);return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:s<7?`${s}d ago`:e.toLocaleDateString()}function Oc(t){if(!t||t<=0)return"expired";const e=Math.floor(t/6e4),n=Math.floor(t/36e5),r=Math.floor(t/864e5);return e<60?`${e}m`:n<24?`${n}h`:`${r}d`}function Tc(t,e,n){const r=t.slice();return r[61]=e[n],r}function Lc(t,e,n){const r=t.slice();return r[64]=e[n],r}function Rc(t,e,n){const r=t.slice();return r[67]=e[n],r}function $c(t,e,n){const r=t.slice();return r[70]=e[n],r}function Bc(t,e,n){const r=t.slice();return r[73]=e[n],r[75]=n,r}function Ic(t,e,n){const r=t.slice();return r[76]=e[n][0],r[77]=e[n][1],r}function jc(t,e,n){const r=t.slice();return r[80]=e[n],r}function Fc(t,e,n){const r=t.slice();return r[80]=e[n],r}function zc(t,e,n){const r=t.slice();return r[70]=e[n],r}function Nc(t,e,n){const r=t.slice();return r[87]=e[n],r}function Vc(t){let e;return{c(){e=v("")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function Wc(t){let e;return{c(){e=y("span"),e.textContent="",M(e,"class","animate-spin")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function Hc(t){let e,n;return{c(){e=y("div"),n=v(t[1]),M(e,"class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg")},m(t,r){p(t,e,r),g(e,n)},p(t,e){2&e[0]&&A(n,t[1])},d(t){t&&m(e)}}}function qc(t){let e,n,r,i,s,o,a,l,c,u,d,h=t[2].totalRecords.toLocaleString()+"",f=t[2].estimatedSize+"",x=nt(t[2].tables),k=[];for(let e=0;e<x.length;e+=1)k[e]=Uc(Nc(t,x,e));return{c(){e=y("div"),n=y("h3"),r=y("span"),r.textContent="",i=v(" Database Overview\n        "),s=y("span"),o=v("Total: "),a=v(h),l=v(" records  "),c=v(f),u=w(),d=y("div");for(let t=0;t<k.length;t+=1)k[t].c();M(s,"class","text-xs font-normal text-gray-400"),M(n,"class","text-sm font-semibold text-gray-600 mb-3 flex items-center gap-2"),M(d,"class","grid grid-cols-4 md:grid-cols-7 gap-2"),M(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4")},m(t,h){p(t,e,h),g(e,n),g(n,r),g(n,i),g(n,s),g(s,o),g(s,a),g(s,l),g(s,c),g(e,u),g(e,d);for(let t=0;t<k.length;t+=1)k[t]&&k[t].m(d,null)},p(t,e){if(4&e[0]&&h!==(h=t[2].totalRecords.toLocaleString()+"")&&A(a,h),4&e[0]&&f!==(f=t[2].estimatedSize+"")&&A(c,f),524300&e[0]){let n;for(x=nt(t[2].tables),n=0;n<x.length;n+=1){const r=Nc(t,x,n);k[n]?k[n].p(r,e):(k[n]=Uc(r),k[n].c(),k[n].m(d,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=x.length}},d(t){t&&m(e),b(k,t)}}}function Uc(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b=t[87].icon+"",x=t[87].count.toLocaleString()+"",k=t[87].name+"";function C(){return t[37](t[87])}return{c(){e=y("button"),n=y("div"),r=v(b),i=w(),s=y("div"),o=v(x),a=w(),l=y("div"),c=v(k),u=w(),M(n,"class","text-2xl"),M(s,"class","text-lg font-bold text-gray-800"),M(l,"class","text-xs text-gray-500 truncate"),M(e,"class",d="p-3 rounded-lg border transition-all hover:shadow-md "+(t[3]===t[87].name?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200 hover:bg-gray-100"))},m(t,d){p(t,e,d),g(e,n),g(n,r),g(e,i),g(e,s),g(s,o),g(e,a),g(e,l),g(l,c),g(e,u),h||(f=_(e,"click",C),h=!0)},p(n,i){t=n,4&i[0]&&b!==(b=t[87].icon+"")&&A(r,b),4&i[0]&&x!==(x=t[87].count.toLocaleString()+"")&&A(o,x),4&i[0]&&k!==(k=t[87].name+"")&&A(c,k),12&i[0]&&d!==(d="p-3 rounded-lg border transition-all hover:shadow-md "+(t[3]===t[87].name?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200 hover:bg-gray-100"))&&M(e,"class",d)},d(t){t&&m(e),h=!1,f()}}}function Kc(t){let e,n,r,i=t[70]+"";return{c(){e=y("option"),n=v(i),e.__value=r=t[70],D(e,e.__value)},m(t,r){p(t,e,r),g(e,n)},p(t,s){32&s[0]&&i!==(i=t[70]+"")&&A(n,i),32&s[0]&&r!==(r=t[70])&&(e.__value=r,D(e,e.__value))},d(t){t&&m(e)}}}function Yc(e){let n,r,i;return{c(){n=y("button"),n.textContent=" Clear",M(n,"class","px-3 py-2 text-gray-500 hover:text-gray-700")},m(t,s){p(t,n,s),r||(i=_(n,"click",e[44]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}function Qc(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[14].hasValue?"Has":"Missing",b=t[14].field+"";return{c(){e=y("div"),n=y("span"),n.textContent="Filter:",r=w(),i=y("span"),s=v(f),o=v(' "'),a=v(b),l=v('"'),c=w(),u=y("button"),u.textContent="",M(n,"class","text-gray-500"),M(i,"class","px-2 py-1 bg-blue-100 text-blue-700 rounded"),M(u,"class","text-gray-400 hover:text-gray-600"),M(e,"class","mt-2 flex items-center gap-2 text-sm")},m(f,m){p(f,e,m),g(e,n),g(e,r),g(e,i),g(i,s),g(i,o),g(i,a),g(i,l),g(e,c),g(e,u),d||(h=_(u,"click",t[26]),d=!0)},p(t,e){16384&e[0]&&f!==(f=t[14].hasValue?"Has":"Missing")&&A(s,f),16384&e[0]&&b!==(b=t[14].field+"")&&A(a,b)},d(t){t&&m(e),d=!1,h()}}}function Xc(t){let e,n,r,i,s,o,a,l=nt(t[35](t[3])),c=[];for(let e=0;e<l.length;e+=1)c[e]=eu(Fc(t,l,e));let u=nt(t[4]),d=[];for(let e=0;e<u.length;e+=1)d[e]=cu(Bc(t,u,e));return{c(){e=y("table"),n=y("thead"),r=y("tr"),i=y("th"),s=w();for(let t=0;t<c.length;t+=1)c[t].c();o=w(),a=y("tbody");for(let t=0;t<d.length;t+=1)d[t].c();M(i,"class","w-8 px-2 py-3"),M(n,"class","bg-gray-50 border-b border-gray-200"),M(a,"class","divide-y divide-gray-200"),M(e,"class","w-full text-sm")},m(t,l){p(t,e,l),g(e,n),g(n,r),g(r,i),g(r,s);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(r,null);g(e,o),g(e,a);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(a,null)},p(t,e){if(4197384&e[0]|16&e[1]){let n;for(l=nt(t[35](t[3])),n=0;n<l.length;n+=1){const i=Fc(t,l,n);c[n]?c[n].p(i,e):(c[n]=eu(i),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}if(134221848&e[0]|16&e[1]){let n;for(u=nt(t[4]),n=0;n<u.length;n+=1){const r=Bc(t,u,n);d[n]?d[n].p(r,e):(d[n]=cu(r),d[n].c(),d[n].m(a,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}},d(t){t&&m(e),b(c,t),b(d,t)}}}function Jc(e){let n;return{c(){n=y("div"),n.textContent="No records found",M(n,"class","p-8 text-center text-gray-500")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function Gc(e){let n;return{c(){n=y("div"),n.innerHTML='<span class="animate-spin inline-block mr-2"></span> Loading...',M(n,"class","p-8 text-center text-gray-500")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function Zc(e){let n;return{c(){n=y("span"),n.textContent="",M(n,"class","text-gray-300")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function tu(t){let e,n,r="asc"===t[11]?"":"";return{c(){e=y("span"),n=v(r),M(e,"class","text-blue-500")},m(t,r){p(t,e,r),g(e,n)},p(t,e){2048&e[0]&&r!==(r="asc"===t[11]?"":"")&&A(n,r)},d(t){t&&m(e)}}}function eu(t){let e,n,r,i,s,o,a,l=t[80]+"";function c(t,e){return t[10]===t[80]?tu:Zc}let u=c(t),d=u(t);function h(){return t[45](t[80])}return{c(){e=y("th"),n=y("span"),r=v(l),i=w(),d.c(),s=w(),M(n,"class","flex items-center gap-1"),M(e,"class","px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100")},m(t,l){p(t,e,l),g(e,n),g(n,r),g(n,i),d.m(n,null),g(e,s),o||(a=_(e,"click",h),o=!0)},p(e,i){t=e,8&i[0]&&l!==(l=t[80]+"")&&A(r,l),u===(u=c(t))&&d?d.p(t,i):(d.d(1),d=u(t),d&&(d.c(),d.m(n,null)))},d(t){t&&m(e),d.d(),o=!1,a()}}}function nu(t){let e,n,r,i,s=_u(t[73][t[80]])+"";return{c(){e=y("td"),n=v(s),r=w(),M(e,"class","px-4 py-3 text-gray-700 max-w-xs truncate"),M(e,"title",i=String(t[73][t[80]]??""))},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,r){24&r[0]&&s!==(s=_u(t[73][t[80]])+"")&&A(n,s),24&r[0]&&i!==(i=String(t[73][t[80]]??""))&&M(e,"title",i)},d(t){t&&m(e)}}}function ru(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,v;function k(){return t[47](t[73])}let S=t[73].url&&iu(t),A=nt(Object.entries(t[73])),D=[];for(let e=0;e<A.length;e+=1)D[e]=lu(Ic(t,A,e));return{c(){e=y("tr"),n=y("td"),r=y("div"),i=y("div"),s=y("h4"),s.textContent="Record Details",o=w(),a=y("div"),l=y("button"),l.textContent=" Copy JSON",c=w(),S&&S.c(),u=w(),d=y("div");for(let t=0;t<D.length;t+=1)D[t].c();f=w(),M(s,"class","font-semibold text-gray-800"),M(l,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded"),M(a,"class","flex gap-2"),M(i,"class","flex items-center justify-between mb-3"),M(d,"class","grid grid-cols-2 md:grid-cols-3 gap-3 text-sm"),M(r,"class","bg-white rounded-lg border border-blue-200 p-4"),M(n,"colspan",h=t[35](t[3]).length+1),M(n,"class","px-4 py-4"),M(e,"class","bg-blue-50")},m(t,h){p(t,e,h),g(e,n),g(n,r),g(r,i),g(i,s),g(i,o),g(i,a),g(a,l),g(a,c),S&&S.m(a,null),g(r,u),g(r,d);for(let t=0;t<D.length;t+=1)D[t]&&D[t].m(d,null);g(e,f),x||(v=_(l,"click",C(k)),x=!0)},p(e,r){if((t=e)[73].url?S?S.p(t,r):(S=iu(t),S.c(),S.m(a,null)):S&&(S.d(1),S=null),16&r[0]){let e;for(A=nt(Object.entries(t[73])),e=0;e<A.length;e+=1){const n=Ic(t,A,e);D[e]?D[e].p(n,r):(D[e]=lu(n),D[e].c(),D[e].m(d,null))}for(;e<D.length;e+=1)D[e].d(1);D.length=A.length}8&r[0]&&h!==(h=t[35](t[3]).length+1)&&M(n,"colspan",h)},d(t){t&&m(e),S&&S.d(),b(D,t),x=!1,v()}}}function iu(t){let e,n,r,i,s;return{c(){e=y("a"),n=v(" Open URL"),M(e,"href",r=t[73].url),M(e,"target","_blank"),M(e,"rel","noopener"),M(e,"class","px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded")},m(r,o){p(r,e,o),g(e,n),i||(s=_(e,"click",C(t[36])),i=!0)},p(t,n){16&n[0]&&r!==(r=t[73].url)&&M(e,"href",r)},d(t){t&&m(e),i=!1,s()}}}function su(t){let e,n=_u(t[77])+"";return{c(){e=v(n)},m(t,n){p(t,e,n)},p(t,r){16&r[0]&&n!==(n=_u(t[77])+"")&&A(e,n)},d(t){t&&m(e)}}}function ou(t){let e,n=(t[77]?new Date(t[77]).toLocaleString():"-")+"";return{c(){e=v(n)},m(t,n){p(t,e,n)},p(t,r){16&r[0]&&n!==(n=(t[77]?new Date(t[77]).toLocaleString():"-")+"")&&A(e,n)},d(t){t&&m(e)}}}function au(t){let e,n,r=JSON.stringify(t[77],null,2)+"";return{c(){e=y("pre"),n=v(r),M(e,"class","text-xs overflow-auto max-h-24")},m(t,r){p(t,e,r),g(e,n)},p(t,e){16&e[0]&&r!==(r=JSON.stringify(t[77],null,2)+"")&&A(n,r)},d(t){t&&m(e)}}}function lu(t){let e,n,r,i,s,o,a,l=t[76]+"";function c(t,e){return 16&e[0]&&(o=null),"object"==typeof t[77]&&null!==t[77]?au:(null==o&&(o=!!(t[76].includes("date")||t[76].includes("time")||t[76].includes("At")||"timestamp"===t[76])),o?ou:su)}let u=c(t,[-1,-1,-1]),d=u(t);return{c(){e=y("div"),n=y("div"),r=v(l),i=w(),s=y("div"),d.c(),a=w(),M(n,"class","text-xs text-gray-500 font-medium"),M(s,"class","text-gray-800 break-all"),M(e,"class","bg-gray-50 rounded p-2")},m(t,o){p(t,e,o),g(e,n),g(n,r),g(e,i),g(e,s),d.m(s,null),g(e,a)},p(t,e){16&e[0]&&l!==(l=t[76]+"")&&A(r,l),u===(u=c(t,e))&&d?d.p(t,e):(d.d(1),d=u(t),d&&(d.c(),d.m(s,null)))},d(t){t&&m(e),d.d()}}}function cu(t){let e,n,r,i,s,o,a,l,c,u=t[12]===t[75]?"":"",d=nt(t[35](t[3])),h=[];for(let e=0;e<d.length;e+=1)h[e]=nu(jc(t,d,e));function f(){return t[46](t[75])}let x=t[12]===t[75]&&ru(t);return{c(){e=y("tr"),n=y("td"),r=v(u),i=w();for(let t=0;t<h.length;t+=1)h[t].c();o=w(),x&&x.c(),a=k(),M(n,"class","px-2 py-3 text-center text-gray-400"),M(e,"class",s="hover:bg-gray-50 cursor-pointer "+(t[12]===t[75]?"bg-blue-50":""))},m(t,s){p(t,e,s),g(e,n),g(n,r),g(e,i);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null);p(t,o,s),x&&x.m(t,s),p(t,a,s),l||(c=_(e,"click",f),l=!0)},p(n,i){if(t=n,4096&i[0]&&u!==(u=t[12]===t[75]?"":"")&&A(r,u),24&i[0]|16&i[1]){let n;for(d=nt(t[35](t[3])),n=0;n<d.length;n+=1){const r=jc(t,d,n);h[n]?h[n].p(r,i):(h[n]=nu(r),h[n].c(),h[n].m(e,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}4096&i[0]&&s!==(s="hover:bg-gray-50 cursor-pointer "+(t[12]===t[75]?"bg-blue-50":""))&&M(e,"class",s),t[12]===t[75]?x?x.p(t,i):(x=ru(t),x.c(),x.m(a.parentNode,a)):x&&(x.d(1),x=null)},d(t){t&&(m(e),m(o),m(a)),b(h,t),x&&x.d(t),l=!1,c()}}}function uu(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,P,O,T,L,R,$,B,I,j,F,z,N,V,W,H=t[7].page+1+"",q=(t[7].totalPages||1)+"";return{c(){e=y("div"),n=y("div"),i=y("span"),i.textContent="Show",s=w(),o=y("select"),a=y("option"),a.textContent="10",l=y("option"),l.textContent="25",c=y("option"),c.textContent="50",u=y("option"),u.textContent="100",h=w(),f=y("span"),f.textContent="per page",b=w(),x=y("div"),k=y("button"),C=v(" Prev"),O=w(),T=y("span"),L=v("Page "),R=v(H),$=v(" of "),B=v(q),I=w(),j=y("button"),F=v("Next "),a.__value=10,D(a,a.__value),l.__value=25,D(l,l.__value),c.__value=50,D(c,c.__value),u.__value=100,D(u,u.__value),M(o,"class","px-2 py-1 border border-gray-300 rounded"),M(n,"class","flex items-center gap-2 text-sm text-gray-600"),k.disabled=S=!t[7].hasPrev,M(k,"class",P="px-3 py-1 rounded border "+(t[7].hasPrev?"hover:bg-gray-100":"opacity-50 cursor-not-allowed")),M(T,"class","text-sm text-gray-600"),j.disabled=z=!t[7].hasMore,M(j,"class",N="px-3 py-1 rounded border "+(t[7].hasMore?"hover:bg-gray-100":"opacity-50 cursor-not-allowed")),M(x,"class","flex items-center gap-2"),M(e,"class","p-4 border-t border-gray-200 flex items-center justify-between")},m(r,d){p(r,e,d),g(e,n),g(n,i),g(n,s),g(n,o),g(o,a),g(o,l),g(o,c),g(o,u),E(o,t[7].pageSize),g(n,h),g(n,f),g(e,b),g(e,x),g(x,k),g(k,C),g(x,O),g(x,T),g(T,L),g(T,R),g(T,$),g(T,B),g(x,I),g(x,j),g(j,F),V||(W=[_(o,"change",t[48]),_(k,"click",t[49]),_(j,"click",t[50])],V=!0)},p(t,e){128&e[0]&&d!==(d=t[7].pageSize)&&E(o,t[7].pageSize),128&e[0]&&S!==(S=!t[7].hasPrev)&&(k.disabled=S),128&e[0]&&P!==(P="px-3 py-1 rounded border "+(t[7].hasPrev?"hover:bg-gray-100":"opacity-50 cursor-not-allowed"))&&M(k,"class",P),128&e[0]&&H!==(H=t[7].page+1+"")&&A(R,H),128&e[0]&&q!==(q=(t[7].totalPages||1)+"")&&A(B,q),128&e[0]&&z!==(z=!t[7].hasMore)&&(j.disabled=z),128&e[0]&&N!==(N="px-3 py-1 rounded border "+(t[7].hasMore?"hover:bg-gray-100":"opacity-50 cursor-not-allowed"))&&M(j,"class",N)},d(t){t&&m(e),V=!1,r(W)}}}function du(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,E,O,T=t[70].field+"",L=t[70].coverage+"",R=t[70].populated+"";function $(){return t[51](t[70])}function B(){return t[52](t[70])}return{c(){e=y("div"),n=y("div"),i=v(T),o=w(),a=y("div"),l=y("button"),u=w(),d=y("button"),f=w(),b=y("div"),x=v(L),k=v("% ("),C=v(R),S=v(")"),D=w(),M(n,"class","w-28 text-gray-600 truncate font-mono text-xs"),M(n,"title",s=t[70].field),M(l,"class","h-full bg-green-400 hover:bg-green-500 transition-colors"),P(l,"width",t[70].coverage+"%"),M(l,"title",c="Show "+t[70].populated+" records with this field"),M(d,"class","h-full bg-gray-200 hover:bg-gray-300 transition-colors flex-1"),M(d,"title",h="Show "+t[70].empty+" records without this field"),M(a,"class","flex-1 h-5 bg-gray-100 rounded-full overflow-hidden flex cursor-pointer"),M(a,"title","Click to filter"),M(b,"class","w-20 text-right text-gray-500 text-xs"),M(e,"class","flex items-center gap-3 text-sm")},m(t,r){p(t,e,r),g(e,n),g(n,i),g(e,o),g(e,a),g(a,l),g(a,u),g(a,d),g(e,f),g(e,b),g(b,x),g(b,k),g(b,C),g(b,S),g(e,D),E||(O=[_(l,"click",$),_(d,"click",B)],E=!0)},p(e,r){t=e,64&r[0]&&T!==(T=t[70].field+"")&&A(i,T),64&r[0]&&s!==(s=t[70].field)&&M(n,"title",s),64&r[0]&&P(l,"width",t[70].coverage+"%"),64&r[0]&&c!==(c="Show "+t[70].populated+" records with this field")&&M(l,"title",c),64&r[0]&&h!==(h="Show "+t[70].empty+" records without this field")&&M(d,"title",h),64&r[0]&&L!==(L=t[70].coverage+"")&&A(x,L),64&r[0]&&R!==(R=t[70].populated+"")&&A(C,R)},d(t){t&&m(e),E=!1,r(O)}}}function hu(t){let e,n,r,i,s,o,a=t[16].size+"";return{c(){e=y("button"),n=v(" Clear Selected ("),r=v(a),i=v(")"),M(e,"class","px-3 py-1.5 text-sm bg-red-100 text-red-700 hover:bg-red-200 rounded-lg")},m(a,l){p(a,e,l),g(e,n),g(e,r),g(e,i),s||(o=_(e,"click",t[31]),s=!0)},p(t,e){65536&e[0]&&a!==(a=t[16].size+"")&&A(r,a)},d(t){t&&m(e),s=!1,o()}}}function fu(t){let e,n,r;function i(){return t[54](t[67])}return{c(){e=y("button"),e.textContent=" View",M(e,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded")},m(t,s){p(t,e,s),n||(r=_(e,"click",i),n=!0)},p(e,n){t=e},d(t){t&&m(e),n=!1,r()}}}function gu(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,O,T,L,R,$,B,I,j=Mu(t[67].status)+"",F=t[67].key+"",z=t[67].description+"",N=(t[67].computedAt?Ec(t[67].computedAt):"never")+"",V=t[67].timeRemaining?`expires in ${Oc(t[67].timeRemaining)}`:"-",W=t[67].status+"";function H(){return t[53](t[67])}let q=t[67].hasData&&fu(t);return{c(){e=y("div"),n=y("input"),i=w(),s=y("span"),o=v(j),a=w(),l=y("div"),c=y("div"),u=v(F),d=w(),h=y("div"),f=v(z),b=w(),x=y("div"),k=y("div"),C=v(N),S=w(),D=y("div"),P=v(V),E=w(),O=y("span"),T=v(W),R=w(),q&&q.c(),$=w(),M(n,"type","checkbox"),n.checked=r=t[16].has(t[67].key),M(n,"class","rounded"),M(s,"class","text-lg"),M(c,"class","font-mono text-gray-800"),M(h,"class","text-xs text-gray-500 truncate"),M(l,"class","flex-1 min-w-0"),M(x,"class","text-xs text-gray-500 text-right"),M(O,"class",L="px-2 py-0.5 text-xs rounded-full "+Cu(t[67].status)),M(e,"class","flex items-center gap-3 p-2 hover:bg-gray-50 rounded text-sm")},m(t,r){p(t,e,r),g(e,n),g(e,i),g(e,s),g(s,o),g(e,a),g(e,l),g(l,c),g(c,u),g(l,d),g(l,h),g(h,f),g(e,b),g(e,x),g(x,k),g(k,C),g(x,S),g(x,D),g(D,P),g(e,E),g(e,O),g(O,T),g(e,R),q&&q.m(e,null),g(e,$),B||(I=_(n,"change",H),B=!0)},p(i,s){t=i,98304&s[0]&&r!==(r=t[16].has(t[67].key))&&(n.checked=r),32768&s[0]&&j!==(j=Mu(t[67].status)+"")&&A(o,j),32768&s[0]&&F!==(F=t[67].key+"")&&A(u,F),32768&s[0]&&z!==(z=t[67].description+"")&&A(f,z),32768&s[0]&&N!==(N=(t[67].computedAt?Ec(t[67].computedAt):"never")+"")&&A(C,N),32768&s[0]&&V!==(V=t[67].timeRemaining?`expires in ${Oc(t[67].timeRemaining)}`:"-")&&A(P,V),32768&s[0]&&W!==(W=t[67].status+"")&&A(T,W),32768&s[0]&&L!==(L="px-2 py-0.5 text-xs rounded-full "+Cu(t[67].status))&&M(O,"class",L),t[67].hasData?q?q.p(t,s):(q=fu(t),q.c(),q.m(e,$)):q&&(q.d(1),q=null)},d(t){t&&m(e),q&&q.d(),B=!1,I()}}}function pu(e){let n;return{c(){n=y("div"),n.innerHTML='<span class="animate-spin inline-block mr-2"></span> Loading...',M(n,"class","text-center text-gray-500 py-8")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function mu(t){let e,n=nt(t[18].layers),r=[];for(let e=0;e<n.length;e+=1)r[e]=xu(Tc(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","bg-gray-50 rounded-lg p-4 space-y-4")},m(t,n){p(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(262144&i[0]){let s;for(n=nt(t[18].layers),s=0;s<n.length;s+=1){const o=Tc(t,n,s);r[s]?r[s].p(o,i):(r[s]=xu(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function bu(t){let e,n,r,i,s=t[64].label+"";return{c(){e=y("span"),n=v(s),r=w(),M(e,"class",i="px-3 py-1.5 rounded-lg text-xs font-medium "+ku(t[64].status))},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,r){262144&r[0]&&s!==(s=t[64].label+"")&&A(n,s),262144&r[0]&&i!==(i="px-3 py-1.5 rounded-lg text-xs font-medium "+ku(t[64].status))&&M(e,"class",i)},d(t){t&&m(e)}}}function yu(t){let e;return{c(){e=y("div"),e.textContent="",M(e,"class","text-center text-gray-300 text-lg")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function xu(t){let e,n,r,i,s,o,a,l=t[61].title+"",c=nt(t[61].items),u=[];for(let e=0;e<c.length;e+=1)u[e]=bu(Lc(t,c,e));let d=t[61]!==t[18].layers[t[18].layers.length-1]&&yu();return{c(){e=y("div"),n=y("div"),r=v(l),i=w(),s=y("div");for(let t=0;t<u.length;t+=1)u[t].c();o=w(),d&&d.c(),a=k(),M(n,"class","text-xs font-semibold text-gray-500 mb-2"),M(s,"class","flex flex-wrap justify-center gap-2"),M(e,"class","text-center")},m(t,l){p(t,e,l),g(e,n),g(n,r),g(e,i),g(e,s);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(s,null);p(t,o,l),d&&d.m(t,l),p(t,a,l)},p(t,e){if(262144&e[0]&&l!==(l=t[61].title+"")&&A(r,l),262144&e[0]){let n;for(c=nt(t[61].items),n=0;n<c.length;n+=1){const r=Lc(t,c,n);u[n]?u[n].p(r,e):(u[n]=bu(r),u[n].c(),u[n].m(s,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}t[61]!==t[18].layers[t[18].layers.length-1]?d||(d=yu(),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null)},d(t){t&&(m(e),m(o),m(a)),b(u,t),d&&d.d(t)}}}function vu(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,O=t[17].key+"",T=JSON.stringify(t[17].data,null,2)+"";return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("h3"),o=v("Cached Data: "),a=y("span"),l=v(O),c=w(),u=y("button"),u.textContent="",d=w(),h=y("div"),f=y("pre"),b=v(T),x=w(),k=y("div"),C=y("button"),C.textContent=" Copy JSON",S=w(),D=y("button"),D.textContent="Close",M(a,"class","font-mono text-blue-600"),M(s,"class","font-semibold text-gray-800"),M(u,"class","text-gray-400 hover:text-gray-600 text-xl"),M(i,"class","p-4 border-b border-gray-200 flex items-center justify-between"),M(f,"class","text-xs bg-gray-50 p-4 rounded-lg overflow-auto"),M(h,"class","p-4 overflow-auto max-h-[60vh]"),M(C,"class","px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg"),M(D,"class","px-4 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded-lg"),M(k,"class","p-4 border-t border-gray-200 flex justify-end gap-2"),M(n,"class","bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden"),M(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4")},m(r,m){p(r,e,m),g(e,n),g(n,i),g(i,s),g(s,o),g(s,a),g(a,l),g(i,c),g(i,u),g(n,d),g(n,h),g(h,f),g(f,b),g(n,x),g(n,k),g(k,C),g(k,S),g(k,D),P||(E=[_(u,"click",t[33]),_(C,"click",t[55]),_(D,"click",t[33])],P=!0)},p(t,e){131072&e[0]&&O!==(O=t[17].key+"")&&A(l,O),131072&e[0]&&T!==(T=JSON.stringify(t[17].data,null,2)+"")&&A(b,T)},d(t){t&&m(e),P=!1,r(E)}}}function wu(e){let n,i,s,o,a,l,c,u,d,h,f,x,k,C,S,P,O,T,L,R,$,B,I,j,F,z,N,V,W,H,U,K,Y,Q,X,J,G,Z,tt,et,rt,it,st,ot,at,lt,ct,ut,dt,ht,ft,gt,pt,mt,bt,yt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Pt,Et,Ot,Tt,Lt,Rt,$t,Bt,It=(e[2]?.tables.find(e[38])?.icon||"")+"",jt=e[7].totalCount.toLocaleString()+"",Ft=e[15].filter(Su).length+"",zt=e[15].length+"";function Nt(t,e){return t[0]?Wc:Vc}let Vt=Nt(e),Wt=Vt(e),Ht=e[1]&&Hc(e),qt=e[2]&&qc(e),Ut=nt(e[5]),Kt=[];for(let t=0;t<Ut.length;t+=1)Kt[t]=Kc(zc(e,Ut,t));let Yt=(e[8]||e[14])&&Yc(e),Qt=e[14]&&Qc(e);function Xt(t,e){return t[13]?Gc:0===t[4].length?Jc:Xc}let Jt=Xt(e),Gt=Jt(e),Zt=e[4].length>0&&uu(e),te=nt(e[6].slice(0,12)),ee=[];for(let t=0;t<te.length;t+=1)ee[t]=du($c(e,te,t));let ne=e[16].size>0&&hu(e),re=nt(e[15]),ie=[];for(let t=0;t<re.length;t+=1)ie[t]=gu(Rc(e,re,t));function se(t,e){return t[18]?mu:pu}let oe=se(e),ae=oe(e),le=e[17]&&vu(e);return{c(){n=y("div"),i=y("div"),s=y("h2"),s.textContent=" Data Explorer",o=w(),a=y("button"),Wt.c(),l=v("\n      Refresh"),c=w(),Ht&&Ht.c(),u=w(),qt&&qt.c(),d=w(),h=y("div"),f=y("div"),x=y("div"),k=y("h3"),C=v(It),S=w(),P=v(e[3]),O=w(),T=y("span"),L=v("("),R=v(jt),$=v(" records)"),B=w(),I=y("div"),j=y("button"),j.textContent=" Export Filtered",F=w(),z=y("button"),z.textContent=" Export All",N=w(),V=y("div"),W=y("div"),H=y("input"),U=w(),K=y("span"),K.textContent="",Y=w(),Q=y("select"),X=y("option"),X.textContent="All Fields";for(let t=0;t<Kt.length;t+=1)Kt[t].c();J=w(),G=y("button"),G.textContent="Search",Z=w(),Yt&&Yt.c(),tt=w(),Qt&&Qt.c(),et=w(),rt=y("div"),Gt.c(),it=w(),Zt&&Zt.c(),st=w(),ot=y("div"),at=y("h3"),at.innerHTML=' Field Coverage\n      <span class="text-sm font-normal text-gray-500">Click bars to filter</span>',lt=w(),ct=y("div");for(let t=0;t<ee.length;t+=1)ee[t].c();ut=w(),dt=y("div"),ht=y("div"),ft=y("h3"),gt=v(" Cached Metrics\n        "),pt=y("span"),mt=v(Ft),bt=v(" valid / "),yt=v(zt),xt=v(" total"),vt=w(),ne&&ne.c(),wt=w(),kt=y("div"),_t=y("label"),Ct=y("input"),St=v("\n        Select All"),At=w();for(let t=0;t<ie.length;t+=1)ie[t].c();Dt=w(),Pt=y("div"),Et=y("h3"),Et.innerHTML=' Metrics Dependency Flow\n      <span class="text-sm font-normal text-gray-500">Colors indicate cache status</span>',Ot=w(),Tt=y("div"),Tt.innerHTML="<span> Valid</span> <span> Expiring Soon</span> <span> Stale/Expired</span> <span> Never Computed</span>",Lt=w(),ae.c(),Rt=w(),le&&le.c(),M(s,"class","text-xl font-bold text-gray-800 flex items-center gap-2"),M(a,"class","px-3 py-1.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2 text-sm"),a.disabled=e[0],M(i,"class","flex items-center justify-between"),M(T,"class","text-sm font-normal text-gray-500"),M(k,"class","font-semibold text-gray-800 flex items-center gap-2"),M(j,"class","px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg"),M(j,"title","Export visible/filtered records"),M(z,"class","px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg"),M(z,"title","Export all records"),M(I,"class","flex gap-2"),M(x,"class","flex items-center justify-between mb-3"),M(H,"type","text"),M(H,"placeholder","Search records..."),M(H,"class","w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),M(K,"class","absolute left-2.5 top-2.5 text-gray-400"),M(W,"class","flex-1 relative"),X.__value="all",D(X,X.__value),M(Q,"class","px-3 py-2 border border-gray-300 rounded-lg bg-white"),void 0===e[9]&&q(()=>e[43].call(Q)),M(G,"class","px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"),M(V,"class","flex gap-2"),M(f,"class","p-4 border-b border-gray-200"),M(rt,"class","overflow-x-auto"),M(h,"class","bg-white rounded-lg shadow-sm border border-gray-200"),M(at,"class","font-semibold text-gray-800 mb-3 flex items-center gap-2"),M(ct,"class","space-y-2"),M(ot,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),M(pt,"class","text-sm font-normal text-gray-500"),M(ft,"class","font-semibold text-gray-800 flex items-center gap-2"),M(ht,"class","flex items-center justify-between mb-3"),M(Ct,"type","checkbox"),Ct.checked=Mt=e[16].size===e[15].length&&e[15].length>0,M(Ct,"class","rounded"),M(_t,"class","flex items-center gap-2 p-2 text-sm text-gray-500 hover:bg-gray-50 rounded cursor-pointer"),M(kt,"class","space-y-1"),M(dt,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),M(Et,"class","font-semibold text-gray-800 mb-3 flex items-center gap-2"),M(Tt,"class","flex gap-4 text-xs text-gray-600 mb-4"),M(Pt,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),M(n,"class","data-explorer p-4 space-y-4")},m(t,r){p(t,n,r),g(n,i),g(i,s),g(i,o),g(i,a),Wt.m(a,null),g(a,l),g(n,c),Ht&&Ht.m(n,null),g(n,u),qt&&qt.m(n,null),g(n,d),g(n,h),g(h,f),g(f,x),g(x,k),g(k,C),g(k,S),g(k,P),g(k,O),g(k,T),g(T,L),g(T,R),g(T,$),g(x,B),g(x,I),g(I,j),g(I,F),g(I,z),g(f,N),g(f,V),g(V,W),g(W,H),D(H,e[8]),g(W,U),g(W,K),g(V,Y),g(V,Q),g(Q,X);for(let t=0;t<Kt.length;t+=1)Kt[t]&&Kt[t].m(Q,null);E(Q,e[9],!0),g(V,J),g(V,G),g(V,Z),Yt&&Yt.m(V,null),g(f,tt),Qt&&Qt.m(f,null),g(h,et),g(h,rt),Gt.m(rt,null),g(h,it),Zt&&Zt.m(h,null),g(n,st),g(n,ot),g(ot,at),g(ot,lt),g(ot,ct);for(let t=0;t<ee.length;t+=1)ee[t]&&ee[t].m(ct,null);g(n,ut),g(n,dt),g(dt,ht),g(ht,ft),g(ft,gt),g(ft,pt),g(pt,mt),g(pt,bt),g(pt,yt),g(pt,xt),g(ht,vt),ne&&ne.m(ht,null),g(dt,wt),g(dt,kt),g(kt,_t),g(_t,Ct),g(_t,St),g(kt,At);for(let t=0;t<ie.length;t+=1)ie[t]&&ie[t].m(kt,null);g(n,Dt),g(n,Pt),g(Pt,Et),g(Pt,Ot),g(Pt,Tt),g(Pt,Lt),ae.m(Pt,null),g(n,Rt),le&&le.m(n,null),$t||(Bt=[_(a,"click",e[34]),_(j,"click",e[39]),_(z,"click",e[40]),_(H,"input",e[41]),_(H,"keydown",e[42]),_(Q,"change",e[43]),_(G,"click",e[23]),_(Ct,"change",e[30])],$t=!0)},p(t,e){if(Vt!==(Vt=Nt(t))&&(Wt.d(1),Wt=Vt(t),Wt&&(Wt.c(),Wt.m(a,l))),1&e[0]&&(a.disabled=t[0]),t[1]?Ht?Ht.p(t,e):(Ht=Hc(t),Ht.c(),Ht.m(n,u)):Ht&&(Ht.d(1),Ht=null),t[2]?qt?qt.p(t,e):(qt=qc(t),qt.c(),qt.m(n,d)):qt&&(qt.d(1),qt=null),12&e[0]&&It!==(It=(t[2]?.tables.find(t[38])?.icon||"")+"")&&A(C,It),8&e[0]&&A(P,t[3]),128&e[0]&&jt!==(jt=t[7].totalCount.toLocaleString()+"")&&A(R,jt),256&e[0]&&H.value!==t[8]&&D(H,t[8]),32&e[0]){let n;for(Ut=nt(t[5]),n=0;n<Ut.length;n+=1){const r=zc(t,Ut,n);Kt[n]?Kt[n].p(r,e):(Kt[n]=Kc(r),Kt[n].c(),Kt[n].m(Q,null))}for(;n<Kt.length;n+=1)Kt[n].d(1);Kt.length=Ut.length}if(544&e[0]&&E(Q,t[9]),t[8]||t[14]?Yt?Yt.p(t,e):(Yt=Yc(t),Yt.c(),Yt.m(V,null)):Yt&&(Yt.d(1),Yt=null),t[14]?Qt?Qt.p(t,e):(Qt=Qc(t),Qt.c(),Qt.m(f,null)):Qt&&(Qt.d(1),Qt=null),Jt===(Jt=Xt(t))&&Gt?Gt.p(t,e):(Gt.d(1),Gt=Jt(t),Gt&&(Gt.c(),Gt.m(rt,null))),t[4].length>0?Zt?Zt.p(t,e):(Zt=uu(t),Zt.c(),Zt.m(h,null)):Zt&&(Zt.d(1),Zt=null),33554496&e[0]){let n;for(te=nt(t[6].slice(0,12)),n=0;n<te.length;n+=1){const r=$c(t,te,n);ee[n]?ee[n].p(r,e):(ee[n]=du(r),ee[n].c(),ee[n].m(ct,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=te.length}if(32768&e[0]&&Ft!==(Ft=t[15].filter(Su).length+"")&&A(mt,Ft),32768&e[0]&&zt!==(zt=t[15].length+"")&&A(yt,zt),t[16].size>0?ne?ne.p(t,e):(ne=hu(t),ne.c(),ne.m(ht,null)):ne&&(ne.d(1),ne=null),98304&e[0]&&Mt!==(Mt=t[16].size===t[15].length&&t[15].length>0)&&(Ct.checked=Mt),536969216&e[0]|2&e[1]){let n;for(re=nt(t[15]),n=0;n<re.length;n+=1){const r=Rc(t,re,n);ie[n]?ie[n].p(r,e):(ie[n]=gu(r),ie[n].c(),ie[n].m(kt,null))}for(;n<ie.length;n+=1)ie[n].d(1);ie.length=re.length}oe===(oe=se(t))&&ae?ae.p(t,e):(ae.d(1),ae=oe(t),ae&&(ae.c(),ae.m(Pt,null))),t[17]?le?le.p(t,e):(le=vu(t),le.c(),le.m(n,null)):le&&(le.d(1),le=null)},i:t,o:t,d(t){t&&m(n),Wt.d(),Ht&&Ht.d(),qt&&qt.d(),b(Kt,t),Yt&&Yt.d(),Qt&&Qt.d(),Gt.d(),Zt&&Zt.d(),b(ee,t),ne&&ne.d(),b(ie,t),ae.d(),le&&le.d(),$t=!1,r(Bt)}}}function ku(t){switch(t){case"valid":return"bg-green-500 text-white";case"expiring":return"bg-yellow-500 text-white";case"stale":return"bg-red-500 text-white";case"source":return"bg-blue-500 text-white";case"storage":return"bg-purple-500 text-white";default:return"bg-gray-400 text-white"}}function _u(t){return null==t?"<null>":"boolean"==typeof t?t?" true":" false":"number"==typeof t?t.toLocaleString():Array.isArray(t)?0===t.length?"[]":`[${t.length} items]`:"object"==typeof t?"{...}":"string"==typeof t&&t.length>60?t.substring(0,60)+"...":String(t)}function Cu(t){switch(t){case"valid":return"bg-green-100 text-green-800";case"expiring":return"bg-yellow-100 text-yellow-800";case"stale":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-600"}}function Mu(t){switch(t){case"valid":return"";case"expiring":return"";case"stale":return"";default:return""}}const Su=t=>"valid"===t.status;function Au(t,e,n){let r=!0,i=null,s=null,o="bookmarks",a=[],l=[],c=[],u={page:0,pageSize:25,totalCount:0,totalPages:0},d="",h="all",f=null,g="desc",p=null,m=!1,b=null,y=[],x=new Set,v=null,w=null;async function k(){n(2,s=await Ac())}async function _(){n(18,w=await async function(){const t=await Pc(),e=Object.fromEntries(t.map(t=>[t.key,t.status]));return{layers:[{title:" Data Sources",items:[{id:"chromeApi",label:"Chrome Bookmarks API",status:"source"},{id:"activity",label:"User Activity",status:"source"}]},{title:" Storage",items:[{id:"bookmarks",label:"Bookmarks Table",status:"storage"},{id:"events",label:"Events Table",status:"storage"}]},{title:" Computed Metrics",items:[{id:"domainStats",label:"Domain Stats",status:e.domainStats||"none"},{id:"activityTimeline",label:"Activity Timeline",status:e.activityTimeline||"none"},{id:"quickStats",label:"Quick Stats",status:e.quickStats||"none"},{id:"similarities",label:"Similarities",status:e.similarities||"none"},{id:"wordFrequency",label:"Word Frequency",status:e.wordFrequency||"none"}]},{title:" Insights",items:[{id:"insightsSummary",label:"Summary",status:e.insightsSummary||"none"},{id:"expertiseAreas",label:"Expertise",status:e.expertiseAreas||"none"}]}]}}())}async function C(){n(13,m=!0);try{const t={page:u.page,pageSize:u.pageSize,sortBy:f,sortOrder:g,searchQuery:d,searchField:h,fieldFilter:b},e=await Dc(o,t);n(4,a=e.records),n(7,u={page:e.page,pageSize:e.pageSize,totalCount:e.totalCount,totalPages:e.totalPages,hasMore:e.hasMore,hasPrev:e.hasPrev}),n(5,l=await async function(t){const e=await Tl[t].limit(100).toArray(),n=new Set;return e.forEach(t=>{Object.keys(t).forEach(t=>n.add(t))}),[...n].sort()}(o)),n(6,c=await async function(t){const e=await Tl[t].toArray(),n={};e.forEach(t=>{Object.keys(t).forEach(e=>{n[e]||(n[e]={field:e,populated:0,empty:0,samples:[],types:new Set});const r=t[e];if(null==r||""===r||Array.isArray(r)&&0===r.length)n[e].empty++;else if(n[e].populated++,n[e].types.add(Array.isArray(r)?"array":typeof r),n[e].samples.length<3){let t=r;"string"==typeof r&&r.length>50?t=r.substring(0,50)+"...":Array.isArray(r)?t=r.slice(0,3):"object"==typeof r&&(t="{...}"),n[e].samples.push(t)}})});const r=e.length;return Object.values(n).map(t=>({...t,types:[...t.types],total:r,coverage:r>0?parseFloat((t.populated/r*100).toFixed(1)):0})).sort((t,e)=>e.coverage-t.coverage)}(o))}catch(t){console.error("Error loading table data:",t)}finally{n(13,m=!1)}}async function M(){try{n(15,y=await Pc())}catch(t){console.error("Error loading cached metrics:",t)}}async function S(t){n(3,o=t),n(7,u.page=0,u),n(8,d=""),n(10,f=null),n(12,p=null),n(14,b=null),await C()}async function A(t){n(7,u.page=t,u),n(12,p=null),await C()}async function D(t){n(7,u.pageSize=t,u),n(7,u.page=0,u),await C()}async function P(t){f===t?n(11,g="asc"===g?"desc":"asc"):(n(10,f=t),n(11,g="desc")),n(7,u.page=0,u),await C()}async function E(){n(7,u.page=0,u),await C()}function T(){n(8,d=""),n(9,h="all"),E()}async function L(t,e){n(14,b=b?.field===t&&b?.hasValue===e?null:{field:t,hasValue:e}),n(7,u.page=0,u),await C()}function R(){n(14,b=null),C()}function $(t){n(12,p=p===t?null:t)}async function I(t=!1){const e=t?{}:{searchQuery:d,searchField:h,fieldFilter:b},n=await async function(t,e={}){const{records:n}=await Dc(t,{...e,pageSize:999999});return JSON.stringify(n,null,2)}(o,e);!function(t,e){const n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}(n,`${o}_${(new Date).toISOString().split("T")[0]}.json`)}function F(t){x.has(t)?x.delete(t):x.add(t),n(16,x)}async function z(t){const e=await async function(t){try{const e=await Tl.computedMetrics.get(t);return e?.data||null}catch(e){return console.error(`Error getting cached metric ${t}:`,e),null}}(t);n(17,v={key:t,data:e})}B(async()=>{try{await k(),await C(),await M(),await _()}catch(t){n(1,i=t.message)}finally{n(0,r=!1)}});return[r,i,s,o,a,l,c,u,d,h,f,g,p,m,b,y,x,v,w,S,A,D,P,E,T,L,R,$,I,F,function(){x.size===y.length?x.clear():y.forEach(t=>x.add(t.key)),n(16,x)},async function(){const t=[...x];await async function(t){try{return await Tl.computedMetrics.bulkDelete(t),!0}catch(t){return console.error("Error invalidating metrics:",t),!1}}(t),x.clear(),await M(),await _()},z,function(){n(17,v=null)},async function(){n(0,r=!0);try{await k(),await C(),await M(),await _()}finally{n(0,r=!1)}},function(t){return{bookmarks:["id","title","domain","category","isAlive"],events:["eventId","bookmarkId","type","timestamp"],cache:["key","timestamp","ttl"],settings:["key"],similarities:["id","bookmark1Id","bookmark2Id","score"],computedMetrics:["key","computedAt","validUntil"],enrichmentQueue:["queueId","bookmarkId","addedAt","priority"]}[t]||l.slice(0,5)},function(e){j.call(this,t,e)},t=>S(t.name),t=>t.name===o,()=>I(!1),()=>I(!0),function(){d=this.value,n(8,d)},t=>"Enter"===t.key&&E(),function(){h=O(this),n(9,h),n(5,l)},()=>{T(),R()},t=>P(t),t=>$(t),t=>function(t){navigator.clipboard.writeText(JSON.stringify(t,null,2))}(t),t=>D(parseInt(t.target.value)),()=>A(u.page-1),()=>A(u.page+1),t=>L(t.field,!0),t=>L(t.field,!1),t=>F(t.key),t=>z(t.key),()=>{navigator.clipboard.writeText(JSON.stringify(v.data,null,2))}]}class Du extends ut{constructor(t){super(),ct(this,t,Au,wu,s,{},null,[-1,-1,-1])}}const Pu=t=>({}),Eu=t=>({});function Ou(t){let e,n;return{c(){e=y("p"),n=v(t[2]),M(e,"class","text-xs text-gray-500")},m(t,r){p(t,e,r),g(e,n)},p(t,e){4&e&&A(n,t[2])},d(t){t&&m(e)}}}function Tu(t){let e,n,r;return{c(){e=y("span"),n=v(""),M(e,"class",r="text-gray-400 transform transition-transform "+(t[0]?"":"rotate-180"))},m(t,r){p(t,e,r),g(e,n)},p(t,n){1&n&&r!==(r="text-gray-400 transform transition-transform "+(t[0]?"":"rotate-180"))&&M(e,"class",r)},d(t){t&&m(e)}}}function Lu(t){let e,n,r,i;const s=[$u,Ru],o=[];function a(t,e){return t[4]?0:1}return n=a(t),r=o[n]=s[n](t),{c(){e=y("div"),r.c(),M(e,"class","p-4")},m(t,r){p(t,e,r),o[n].m(e,null),i=!0},p(t,i){let l=n;n=a(t),n===l?o[n].p(t,i):(G(),et(o[l],1,1,()=>{o[l]=null}),Z(),r=o[n],r?r.p(t,i):(r=o[n]=s[n](t),r.c()),tt(r,1),r.m(e,null))},i(t){i||(tt(r),i=!0)},o(t){et(r),i=!1},d(t){t&&m(e),o[n].d()}}}function Ru(t){let e;const n=t[11].default,r=l(n,t,t[10],null);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||1024&i)&&d(r,n,t,t[10],e?u(n,t[10],i,null):h(t[10]),null)},i(t){e||(tt(r,t),e=!0)},o(t){et(r,t),e=!1},d(t){r&&r.d(t)}}}function $u(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div> <span class="ml-2 text-sm text-gray-500">Loading...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function Bu(t){let e,n,i,s,o,a,c,f,b,x,k,C,S,D,P,E,O,T,L,R,$,B,I=t[2]&&Ou(t);const j=t[11]["header-actions"],F=l(j,t,t[10],Eu);let z=t[5]&&Tu(t),N=!t[0]&&Lu(t);return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("span"),o=v(t[3]),a=w(),c=y("div"),f=y("h3"),b=v(t[1]),k=w(),I&&I.c(),C=w(),S=y("div"),F&&F.c(),D=w(),z&&z.c(),T=w(),N&&N.c(),M(s,"class","text-lg"),M(f,"class",x="text-sm font-semibold "+(t[9][t[6]]||t[9].default)),M(i,"class","flex items-center gap-2"),M(S,"class","flex items-center gap-2"),M(n,"class",P="px-4 py-3 border-b border-gray-100 flex items-center justify-between "+(t[5]?"cursor-pointer hover:bg-gray-50":"")),M(n,"role",E=t[5]?"button":"heading"),M(n,"tabindex",O=t[5]?0:-1),M(e,"class",L="rounded-lg border shadow-sm "+(t[8][t[6]]||t[8].default))},m(r,l){p(r,e,l),g(e,n),g(n,i),g(i,s),g(s,o),g(i,a),g(i,c),g(c,f),g(f,b),g(c,k),I&&I.m(c,null),g(n,C),g(n,S),F&&F.m(S,null),g(S,D),z&&z.m(S,null),g(e,T),N&&N.m(e,null),R=!0,$||(B=[_(n,"click",t[7]),_(n,"keypress",t[12])],$=!0)},p(t,[r]){(!R||8&r)&&A(o,t[3]),(!R||2&r)&&A(b,t[1]),(!R||64&r&&x!==(x="text-sm font-semibold "+(t[9][t[6]]||t[9].default)))&&M(f,"class",x),t[2]?I?I.p(t,r):(I=Ou(t),I.c(),I.m(c,null)):I&&(I.d(1),I=null),F&&F.p&&(!R||1024&r)&&d(F,j,t,t[10],R?u(j,t[10],r,Pu):h(t[10]),Eu),t[5]?z?z.p(t,r):(z=Tu(t),z.c(),z.m(S,null)):z&&(z.d(1),z=null),(!R||32&r&&P!==(P="px-4 py-3 border-b border-gray-100 flex items-center justify-between "+(t[5]?"cursor-pointer hover:bg-gray-50":"")))&&M(n,"class",P),(!R||32&r&&E!==(E=t[5]?"button":"heading"))&&M(n,"role",E),(!R||32&r&&O!==(O=t[5]?0:-1))&&M(n,"tabindex",O),t[0]?N&&(G(),et(N,1,1,()=>{N=null}),Z()):N?(N.p(t,r),1&r&&tt(N,1)):(N=Lu(t),N.c(),tt(N,1),N.m(e,null)),(!R||64&r&&L!==(L="rounded-lg border shadow-sm "+(t[8][t[6]]||t[8].default)))&&M(e,"class",L)},i(t){R||(tt(F,t),tt(N),R=!0)},o(t){et(F,t),et(N),R=!1},d(t){t&&m(e),I&&I.d(),F&&F.d(t),z&&z.d(),N&&N.d(),$=!1,r(B)}}}function Iu(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:s=""}=e,{subtitle:o=""}=e,{icon:a=""}=e,{loading:l=!1}=e,{collapsible:c=!1}=e,{collapsed:u=!1}=e,{variant:d="default"}=e;function h(){c&&n(0,u=!u)}I();return t.$$set=t=>{"title"in t&&n(1,s=t.title),"subtitle"in t&&n(2,o=t.subtitle),"icon"in t&&n(3,a=t.icon),"loading"in t&&n(4,l=t.loading),"collapsible"in t&&n(5,c=t.collapsible),"collapsed"in t&&n(0,u=t.collapsed),"variant"in t&&n(6,d=t.variant),"$$scope"in t&&n(10,i=t.$$scope)},[u,s,o,a,l,c,d,h,{default:"bg-white border-gray-200",success:"bg-green-50 border-green-200",warning:"bg-yellow-50 border-yellow-200",danger:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200"},{default:"text-gray-900",success:"text-green-800",warning:"text-yellow-800",danger:"text-red-800",info:"text-blue-800"},i,r,t=>"Enter"===t.key&&h()]}class ju extends ut{constructor(t){super(),ct(this,t,Iu,Bu,s,{title:1,subtitle:2,icon:3,loading:4,collapsible:5,collapsed:0,variant:6})}}async function Fu(){try{const t=await Tl.bookmarks.toArray(),e={};t.forEach(t=>{if(t.url)try{const n=new URL(t.url),r=n.hostname,i=n.pathname,s=r.split(".").reverse(),o=s[0],a=s[1]||"",l=s.length>2?s.slice(2).reverse().join("."):"www",c=`${a}.${o}`;e[c]||(e[c]={name:c,count:0,subdomains:{}}),e[c].count++,e[c].subdomains[l]||(e[c].subdomains[l]={name:l,count:0,paths:{}}),e[c].subdomains[l].count++;const u=i.split("/").filter(t=>t)[0]||"/";e[c].subdomains[l].paths[u]||(e[c].subdomains[l].paths[u]=0),e[c].subdomains[l].paths[u]++}catch(t){}});return Object.values(e).map(t=>({...t,subdomains:Object.values(t.subdomains).map(t=>({...t,paths:Object.entries(t.paths).map(([t,e])=>({name:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10)})).sort((t,e)=>e.count-t.count)})).sort((t,e)=>e.count-t.count)}catch(t){return console.error("Error building domain hierarchy:",t),[]}}async function zu(){try{const t=await Tl.bookmarks.toArray(),e=Date.now(),n={"Last 7 days":0,"Last 30 days":0,"Last 90 days":0,"Last year":0,Older:0},r={"Last 7 days":6048e5,"Last 30 days":2592e6,"Last 90 days":7776e6,"Last year":31536e6};return t.forEach(t=>{const i=e-t.dateAdded;i<=r["Last 7 days"]?n["Last 7 days"]++:i<=r["Last 30 days"]?n["Last 30 days"]++:i<=r["Last 90 days"]?n["Last 90 days"]++:i<=r["Last year"]?n["Last year"]++:n.Older++}),Object.entries(n).map(([t,e])=>({period:t,count:e}))}catch(t){return console.error("Error analyzing content freshness:",t),[]}}async function Nu(){try{const t=await Tl.bookmarks.toArray(),e=await Tl.events.toArray(),n=Date.now(),r=n-6048e5,i=n-2592e6,s=t.length,o=t.filter(t=>t.category).length,a=t.filter(t=>t.description||t.keywords?.length>0).length,l=t.filter(t=>null!==t.isAlive).length,c=t.filter(t=>!1===t.isAlive).length,u=t.filter(t=>!(t.lastAccessed||t.accessCount&&0!==t.accessCount)).length,d=t.filter(t=>t.dateAdded>r).length,h=t.filter(t=>t.dateAdded>i).length,f=e.filter(t=>t.timestamp>r),g=f.filter(t=>"access"===t.type).length,p=f.filter(t=>"create"===t.type).length,m={};t.forEach(t=>{t.category&&(m[t.category]=(m[t.category]||0)+1)});const b=Object.entries(m).sort(([,t],[,e])=>e-t).slice(0,5),y=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{totalBookmarks:s,categorized:o,categorizedPercentage:s>0?(o/s*100).toFixed(1):0,enriched:a,enrichedPercentage:s>0?(a/s*100).toFixed(1):0,aliveChecked:l,deadLinks:c,neverAccessed:u,neverAccessedPercentage:s>0?(u/s*100).toFixed(1):0,addedThisWeek:d,addedThisMonth:h,accessEventsThisWeek:g,createEventsThisWeek:p,topCategories:b,uniqueDomains:y}}catch(t){return console.error("Error getting insights summary:",t),{}}}async function Vu(){try{const t=await Tl.events.toArray(),e=Date.now(),n={},r={};t.forEach(t=>{n[t.type]=(n[t.type]||0)+1;const e=new Date(t.timestamp).toISOString().split("T")[0];r[e]||(r[e]={total:0,byType:{}}),r[e].total++,r[e].byType[t.type]=(r[e].byType[t.type]||0)+1});const i=[];for(let t=29;t>=0;t--){const n=new Date(e-24*t*60*60*1e3).toISOString().split("T")[0];i.push({date:n,total:r[n]?.total||0,...r[n]?.byType||{}})}return{summary:n,timeline:i,totalEvents:t.length}}catch(t){return console.error("Error getting event statistics:",t),{summary:{},timeline:[],totalEvents:0}}}async function Wu(){try{const t=await Tl.bookmarks.toArray(),e=t.filter(t=>!1===t.isAlive),n=Date.now();if(0===e.length)return{total:0,byDomain:[],byAge:{recent:0,moderate:0,old:0,ancient:0},byCategory:[],oldestDeadLinks:[],recentlyDied:[],deadLinkRate:0,checkedCount:0};const r={};e.forEach(t=>{const e=t.domain||"Unknown";r[e]=(r[e]||0)+1});const i=Object.entries(r).map(([t,e])=>({domain:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10),s=n-6048e5,o=n-2592e6,a=n-31536e6,l={recent:e.filter(t=>t.dateAdded>s).length,moderate:e.filter(t=>t.dateAdded<=s&&t.dateAdded>o).length,old:e.filter(t=>t.dateAdded<=o&&t.dateAdded>a).length,ancient:e.filter(t=>t.dateAdded<=a).length},c={};e.forEach(t=>{const e=t.category||"Uncategorized";c[e]=(c[e]||0)+1});const u=Object.entries(c).map(([t,e])=>({category:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10),d=[...e].sort((t,e)=>t.dateAdded-e.dateAdded).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,lastChecked:t.lastChecked})),h=[...e].filter(t=>t.lastChecked).sort((t,e)=>e.lastChecked-t.lastChecked).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,lastChecked:t.lastChecked})),f=t.filter(t=>null!==t.isAlive&&void 0!==t.isAlive).length,g=f>0?(e.length/f*100).toFixed(1):0;return{total:e.length,byDomain:i,byAge:l,byCategory:u,oldestDeadLinks:d,recentlyDied:h,deadLinkRate:parseFloat(g),checkedCount:f}}catch(t){return console.error("Error getting dead link insights:",t),{total:0,byDomain:[],byAge:{recent:0,moderate:0,old:0,ancient:0},byCategory:[],oldestDeadLinks:[],recentlyDied:[],deadLinkRate:0,checkedCount:0}}}async function Hu(){try{const t=await Tl.bookmarks.toArray(),e=t.length;if(0===e)return{total:0,roi:0,decayRate:0,deadLinkRatio:0,enrichmentCoverage:0,categorizationCoverage:0,duplicateScore:0,healthScore:0,metrics:{}};const n=Date.now()-7776e6,r=t.filter(t=>t.accessCount&&t.accessCount>0),i=r.length/e*100,s=t.filter(t=>t.dateAdded<n),o=s.filter(t=>!t.accessCount||0===t.accessCount),a=s.length>0?o.length/s.length*100:0,l=t.filter(t=>null!==t.isAlive&&void 0!==t.isAlive),c=t.filter(t=>!1===t.isAlive),u=l.length>0?c.length/l.length*100:0,d=t.filter(t=>t.description||t.keywords&&t.keywords.length>0||t.contentSnippet),h=d.length/e*100,f=t.filter(t=>t.category),g=f.length/e*100,p={};t.forEach(t=>{if(t.url){const e=t.url.replace(/\/$/,"").toLowerCase();p[e]=(p[e]||0)+1}});const m=Object.values(p).filter(t=>t>1).reduce((t,e)=>t+(e-1),0),b=m/e*100,y=Math.round(.25*i+.2*(100-a)+.2*(100-u)+.15*h+.1*g+.1*(100-b));return{total:e,roi:Math.round(10*i)/10,decayRate:Math.round(10*a)/10,deadLinkRatio:Math.round(10*u)/10,enrichmentCoverage:Math.round(10*h)/10,categorizationCoverage:Math.round(10*g)/10,duplicateScore:Math.round(10*b)/10,healthScore:Math.min(100,Math.max(0,y)),metrics:{accessed:r.length,neverAccessed:e-r.length,old:s.length,decayed:o.length,checked:l.length,dead:c.length,enriched:d.length,categorized:f.length,duplicates:m}}}catch(t){return console.error("Error getting collection health metrics:",t),{total:0,roi:0,decayRate:0,deadLinkRatio:0,enrichmentCoverage:0,categorizationCoverage:0,duplicateScore:0,healthScore:0,metrics:{}}}}async function qu(){try{const t=await Tl.bookmarks.toArray(),e={};t.forEach(t=>{const n=t.category||"uncategorized";e[n]=(e[n]||0)+1});const n=Object.entries(e).map(([e,n])=>({category:e,count:n,percentage:Math.round(n/t.length*1e3)/10})).sort((t,e)=>e.count-t.count),r={};t.forEach(t=>{t.keywords&&Array.isArray(t.keywords)&&t.keywords.forEach(t=>{const e=t.toLowerCase().trim();e.length>2&&(r[e]=(r[e]||0)+1)})});const i=Object.entries(r).map(([t,e])=>({keyword:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,30),s={articles:0,videos:0,documentation:0,tools:0,social:0,code:0,shopping:0,other:0};t.forEach(t=>{const e=(t.url||"").toLowerCase(),n=t.category||"";"video"===n||e.includes("youtube")||e.includes("vimeo")||e.includes("video")?s.videos++:"documentation"===n||e.includes("/docs")||e.includes("/api")||e.includes("/reference")?s.documentation++:"code"===n||e.includes("github")||e.includes("gitlab")||e.includes("stackoverflow")?s.code++:"tool"===n||e.includes("app.")||e.includes("/app")?s.tools++:"social"===n||e.includes("twitter")||e.includes("linkedin")||e.includes("reddit")?s.social++:"shopping"===n||e.includes("amazon")||e.includes("ebay")||e.includes("shop")?s.shopping++:"blog"===n||e.includes("blog")||e.includes("article")||e.includes("medium")?s.articles++:s.other++});const o=Object.entries(s).map(([e,n])=>({type:e,count:n,percentage:Math.round(n/t.length*1e3)/10})).filter(t=>t.count>0).sort((t,e)=>e.count-t.count),a={};t.forEach(t=>{let e="unknown";t.rawMetadata?.other?.language&&(e=t.rawMetadata.other.language.split("-")[0].toLowerCase()),a[e]=(a[e]||0)+1});const l=Object.entries(a).map(([e,n])=>({language:"unknown"===e?"Unknown":e.toUpperCase(),count:n,percentage:Math.round(n/t.length*1e3)/10})).sort((t,e)=>e.count-t.count),c={};t.forEach(t=>{const e=t.folderPath||"Root";c[e]=(c[e]||0)+1});return{categoryBreakdown:n,topicClusters:i,contentTypeMix:o,languageDistribution:l,folderDistribution:Object.entries(c).map(([e,n])=>({folder:e,count:n,percentage:Math.round(n/t.length*1e3)/10})).sort((t,e)=>e.count-t.count).slice(0,15),totalBookmarks:t.length}}catch(t){return console.error("Error getting content analysis:",t),{categoryBreakdown:[],topicClusters:[],contentTypeMix:[],languageDistribution:[],folderDistribution:[],totalBookmarks:0}}}async function Uu(){try{const t=await Tl.bookmarks.toArray(),e=Date.now(),n=e-2592e6,r=e-7776e6,i=e-31536e6,s=t.filter(t=>{const e=t.dateAdded<n,r=!t.accessCount||0===t.accessCount,i=!1!==t.isAlive;return e&&r&&i}).sort((t,e)=>t.dateAdded-e.dateAdded).slice(0,50).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,category:t.category,folderPath:t.folderPath,ageInDays:Math.floor((e-t.dateAdded)/864e5)})),o=t.filter(t=>{const e=!1===t.isAlive,n=!t.accessCount||0===t.accessCount,r=t.dateAdded<i&&n;return e||r}).sort((t,e)=>!1===t.isAlive&&!1!==e.isAlive?-1:!1===e.isAlive&&!1!==t.isAlive?1:t.dateAdded-e.dateAdded).slice(0,50).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,isAlive:t.isAlive,accessCount:t.accessCount||0,reason:!1===t.isAlive?"Dead link":"Old & unused",ageInDays:Math.floor((e-t.dateAdded)/864e5)})),a=t.filter(t=>{const e=t.dateAdded<r,n=!1!==t.isAlive,i=t.title&&t.url;return e&&n&&i}),l=[...a].sort(()=>Math.random()-.5).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,category:t.category,description:t.description,ageInDays:Math.floor((e-t.dateAdded)/864e5)})),c={};t.forEach(t=>{t.domain&&(c[t.domain]||(c[t.domain]=[]),c[t.domain].push(t))});const u=Object.entries(c).filter(([,t])=>t.length<=2).map(([t,e])=>({domain:t,count:e.length,bookmarks:e.map(t=>({id:t.id,title:t.title,url:t.url,dateAdded:t.dateAdded}))})).sort((t,e)=>t.count-e.count).slice(0,20);return{staleQueue:s,cleanupCandidates:o,rediscoveryFeed:l,lowValueDomains:u,stats:{totalStale:s.length,totalCleanupCandidates:o.length,totalLowValueDomains:u.length,deadLinksCount:t.filter(t=>!1===t.isAlive).length,oldUnusedCount:t.filter(t=>t.dateAdded<i&&(!t.accessCount||0===t.accessCount)).length}}}catch(t){return console.error("Error getting actionable insights:",t),{staleQueue:[],cleanupCandidates:[],rediscoveryFeed:[],lowValueDomains:[],stats:{}}}}async function Ku(){try{const t=await Tl.bookmarks.toArray(),e={};t.forEach(t=>{if(!t.domain)return;e[t.domain]||(e[t.domain]={domain:t.domain,total:0,dead:0,checked:0,accessed:0,totalAccess:0,oldestBookmark:1/0,newestBookmark:0,categories:{}});const n=e[t.domain];n.total++,null!==t.isAlive&&void 0!==t.isAlive&&(n.checked++,!1===t.isAlive&&n.dead++),t.accessCount&&t.accessCount>0&&(n.accessed++,n.totalAccess+=t.accessCount),t.dateAdded<n.oldestBookmark&&(n.oldestBookmark=t.dateAdded),t.dateAdded>n.newestBookmark&&(n.newestBookmark=t.dateAdded),t.category&&(n.categories[t.category]=(n.categories[t.category]||0)+1)});const n=Object.values(e).filter(t=>t.checked>=3).map(t=>({domain:t.domain,total:t.total,dead:t.dead,checked:t.checked,reliabilityScore:Math.round((t.checked-t.dead)/t.checked*100),deadRate:Math.round(t.dead/t.checked*100)})).sort((t,e)=>t.reliabilityScore-e.reliabilityScore).slice(0,15),r=n.filter(t=>t.deadRate>=30).sort((t,e)=>e.deadRate-t.deadRate),i=Object.values(e).map(t=>({domain:t.domain,total:t.total,accessed:t.accessed,totalAccess:t.totalAccess,engagementRate:t.total>0?Math.round(t.accessed/t.total*100):0,avgAccess:t.accessed>0?Math.round(t.totalAccess/t.accessed*10)/10:0})).filter(t=>t.totalAccess>0).sort((t,e)=>e.totalAccess-t.totalAccess).slice(0,10),s=t.length,o=Object.values(e).filter(t=>t.total/s>=.1).map(t=>({domain:t.domain,count:t.total,percentage:Math.round(t.total/s*100),topCategory:Object.entries(t.categories).sort(([,t],[,e])=>e-t)[0]?.[0]||"unknown"})).sort((t,e)=>e.percentage-t.percentage),a=Object.keys(e).length,l=s>0?Math.min(100,Math.round(a/s*100*3)):0;return{reliabilityScores:n,ephemeralSources:r,valuableDomains:i,dependencyWarnings:o,knowledgeMap:Object.values(e).map(t=>({domain:t.domain,total:t.total,accessed:t.accessed,dead:t.dead,checked:t.checked,percentage:Math.round(t.total/s*1e3)/10,topCategory:Object.entries(t.categories).sort(([,t],[,e])=>e-t)[0]?.[0]||null,categories:Object.entries(t.categories).map(([t,e])=>({category:t,count:e})).sort((t,e)=>e.count-t.count)})).sort((t,e)=>e.total-t.total).slice(0,25),diversityScore:l,uniqueDomains:a,totalBookmarks:s}}catch(t){return console.error("Error getting domain intelligence:",t),{reliabilityScores:[],ephemeralSources:[],valuableDomains:[],dependencyWarnings:[],knowledgeMap:[],diversityScore:0,uniqueDomains:0,totalBookmarks:0}}}async function Yu(){try{const t=await Tl.bookmarks.toArray(),e=Date.now(),n=Array(24).fill(0);t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded).getHours();n[e]++}});const r=n.map((t,e)=>({hour:e,hourLabel:`${e.toString().padStart(2,"0")}:00`,count:t})),i=Math.max(...n),s=r.filter(t=>t.count===i).map(t=>t.hourLabel),o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=Array(7).fill(0);t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded).getDay();a[e]++}});const l=a.map((t,e)=>({day:e,dayName:o[e],count:t})),c=a[0]+a[6],u=a.slice(1,6).reduce((t,e)=>t+e,0),d={weekday:{count:u,percentage:Math.round(u/t.length*100)},weekend:{count:c,percentage:Math.round(c/t.length*100)}},h={Today:0,"1-7 days":0,"1-4 weeks":0,"1-3 months":0,"3-6 months":0,"6-12 months":0,"1-2 years":0,"2+ years":0},f=e-864e5,g=e-6048e5,p=e-24192e5,m=e-7776e6,b=e-15552e6,y=e-31536e6,x=e-63072e6;t.forEach(t=>{t.dateAdded&&(t.dateAdded>=f?h.Today++:t.dateAdded>=g?h["1-7 days"]++:t.dateAdded>=p?h["1-4 weeks"]++:t.dateAdded>=m?h["1-3 months"]++:t.dateAdded>=b?h["3-6 months"]++:t.dateAdded>=y?h["6-12 months"]++:t.dateAdded>=x?h["1-2 years"]++:h["2+ years"]++)});const v=Object.entries(h).map(([e,n])=>({period:e,count:n,percentage:Math.round(n/t.length*100)})),w=t.reduce((t,n)=>t+(e-(n.dateAdded||e)),0),k=t.length>0?w/t.length:0,_=Math.round(k/864e5),C={};for(let t=11;t>=0;t--){const n=new Date(e);n.setMonth(n.getMonth()-t);const r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;C[r]=0}t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded),n=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;n in C&&C[n]++}});return{bookmarkingHours:r,peakHours:s,dayOfWeekDistribution:l,weekdayVsWeekend:d,ageDistribution:v,avgAgeDays:_,monthlyCreationTrend:Object.entries(C).map(([t,e])=>({month:t,monthLabel:new Date(t+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"}),count:e})),totalBookmarks:t.length}}catch(t){return console.error("Error getting time-based analysis:",t),{bookmarkingHours:[],peakHours:[],dayOfWeekDistribution:[],weekdayVsWeekend:{weekday:{count:0,percentage:0},weekend:{count:0,percentage:0}},ageDistribution:[],avgAgeDays:0,monthlyCreationTrend:[],totalBookmarks:0}}}function Qu(t,e,n){const r=t.slice();r[49]=e[n];const i=Math.max(...r[6].monthlyCreationTrend.map(t=>t.count));return r[50]=i,r}function Xu(t,e,n){const r=t.slice();return r[53]=e[n],r}function Ju(t,e,n){const r=t.slice();return r[53]=e[n],r}function Gu(t,e,n){const r=t.slice();return r[53]=e[n],r}function Zu(t,e,n){const r=t.slice();return r[60]=e[n],r}function td(t,e,n){const r=t.slice();return r[63]=e[n],r}function ed(t,e,n){const r=t.slice();return r[63]=e[n],r}function nd(t,e,n){const r=t.slice();return r[63]=e[n],r}function rd(t,e,n){const r=t.slice();return r[70]=e[n],r}function id(t,e,n){const r=t.slice();return r[73]=e[n],r}function sd(t,e,n){const r=t.slice();r[76]=e[n];const i=Math.min(1.5,.7+r[76].count/r[3].topicClusters[0].count);return r[77]=i,r}function od(t,e,n){const r=t.slice();return r[80]=e[n],r}function ad(t){let e,n,r,i,s,o,a,l=t[80].label+"";function c(){return t[18](t[80])}return{c(){e=y("button"),n=y("span"),n.textContent=`${t[80].icon}`,r=w(),i=v(l),M(n,"class","mr-1"),M(e,"class",s="px-4 py-2 rounded-t-lg text-sm font-medium transition-colors "+(t[1]===t[80].id?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"))},m(t,s){p(t,e,s),g(e,n),g(e,r),g(e,i),o||(a=_(e,"click",c),o=!0)},p(n,r){t=n,2&r[0]&&s!==(s="px-4 py-2 rounded-t-lg text-sm font-medium transition-colors "+(t[1]===t[80].id?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"))&&M(e,"class",s)},d(t){t&&m(e),o=!1,a()}}}function ld(t){let e,n,r,i,s,o,a="health"===t[1]&&t[2]&&ud(t),l="content"===t[1]&&t[3]&&bd(t),c="actions"===t[1]&&t[4]&&Ad(t),u="domains"===t[1]&&t[5]&&Vd(t),d="time"===t[1]&&t[6]&&eh(t);return{c(){a&&a.c(),e=w(),l&&l.c(),n=w(),c&&c.c(),r=w(),u&&u.c(),i=w(),d&&d.c(),s=k()},m(t,h){a&&a.m(t,h),p(t,e,h),l&&l.m(t,h),p(t,n,h),c&&c.m(t,h),p(t,r,h),u&&u.m(t,h),p(t,i,h),d&&d.m(t,h),p(t,s,h),o=!0},p(t,o){"health"===t[1]&&t[2]?a?(a.p(t,o),6&o[0]&&tt(a,1)):(a=ud(t),a.c(),tt(a,1),a.m(e.parentNode,e)):a&&(G(),et(a,1,1,()=>{a=null}),Z()),"content"===t[1]&&t[3]?l?(l.p(t,o),10&o[0]&&tt(l,1)):(l=bd(t),l.c(),tt(l,1),l.m(n.parentNode,n)):l&&(G(),et(l,1,1,()=>{l=null}),Z()),"actions"===t[1]&&t[4]?c?(c.p(t,o),18&o[0]&&tt(c,1)):(c=Ad(t),c.c(),tt(c,1),c.m(r.parentNode,r)):c&&(G(),et(c,1,1,()=>{c=null}),Z()),"domains"===t[1]&&t[5]?u?(u.p(t,o),34&o[0]&&tt(u,1)):(u=Vd(t),u.c(),tt(u,1),u.m(i.parentNode,i)):u&&(G(),et(u,1,1,()=>{u=null}),Z()),"time"===t[1]&&t[6]?d?(d.p(t,o),66&o[0]&&tt(d,1)):(d=eh(t),d.c(),tt(d,1),d.m(s.parentNode,s)):d&&(G(),et(d,1,1,()=>{d=null}),Z())},i(t){o||(tt(a),tt(l),tt(c),tt(u),tt(d),o=!0)},o(t){et(a),et(l),et(c),et(u),et(d),o=!1},d(t){t&&(m(e),m(n),m(r),m(i),m(s)),a&&a.d(t),l&&l.d(t),c&&c.d(t),u&&u.d(t),d&&d.d(t)}}}function cd(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-500">Loading insights...</span>',M(n,"class","flex items-center justify-center py-16")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function ud(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,E,O,T,L,R,$,B,I,j,F,z,N,V,W,H,q,U,K,Y,Q,X,J,G,Z,nt,rt,it,lt,ct,ut,dt,ht,ft,gt,pt,mt,bt,yt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Pt,Et,Ot,Tt,Lt,Rt,$t,Bt,It,jt,Ft,zt,Nt,Vt,Wt,Ht,qt,Ut,Kt,Yt,Qt,Xt,Jt,Gt,Zt,te,ee,ne,re,ie,se,oe,ae,le,ce=t[2].total.toLocaleString()+"",ue=t[2].healthScore+"",de=t[2].roi+"",he=t[2].metrics.accessed+"",fe=t[2].total+"",ge=t[2].decayRate+"",pe=t[2].metrics.decayed+"",me=t[2].deadLinkRatio+"",be=t[2].metrics.dead+"",ye=t[2].metrics.checked+"",xe=t[2].enrichmentCoverage+"",ve=t[2].metrics.enriched+"",we=t[2].categorizationCoverage+"",ke=t[2].metrics.categorized+"",_e=t[2].duplicateScore+"",Ce=t[2].metrics.duplicates+"";return se=new ju({props:{title:"Improvement Tips",icon:"",variant:"info",$$slots:{default:[md]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),i=y("div"),s=y("div"),o=y("h2"),o.textContent="Collection Health Score",a=w(),l=y("p"),c=v(ce),u=v(" total bookmarks"),d=w(),h=y("div"),f=y("div"),b=v(ue),x=w(),k=y("div"),k.textContent="out of 100",C=w(),S=y("div"),D=y("div"),E=w(),O=y("div"),T=y("div"),L=y("div"),L.textContent="Bookmark ROI",R=w(),$=y("div"),B=v(de),I=v("%"),F=w(),z=y("div"),N=v(he),V=v(" of "),W=v(fe),H=v(" used"),q=w(),U=y("div"),K=y("div"),K.textContent="Decay Rate",Y=w(),Q=y("div"),X=v(ge),J=v("%"),Z=w(),nt=y("div"),rt=v(pe),it=v(" old & unused"),lt=w(),ct=y("div"),ut=y("div"),ut.textContent="Dead Links",dt=w(),ht=y("div"),ft=v(me),gt=v("%"),mt=w(),bt=y("div"),yt=v(be),xt=v(" of "),vt=v(ye),wt=v(" checked"),kt=w(),_t=y("div"),Ct=y("div"),Ct.textContent="Enriched",Mt=w(),St=y("div"),At=v(xe),Dt=v("%"),Et=w(),Ot=y("div"),Tt=v(ve),Lt=v(" with metadata"),Rt=w(),$t=y("div"),Bt=y("div"),Bt.textContent="Categorized",It=w(),jt=y("div"),Ft=v(we),zt=v("%"),Vt=w(),Wt=y("div"),Ht=v(ke),qt=v(" tagged"),Ut=w(),Kt=y("div"),Yt=y("div"),Yt.textContent="Duplicates",Qt=w(),Xt=y("div"),Jt=v(_e),Gt=v("%"),te=w(),ee=y("div"),ne=v(Ce),re=v(" duplicate URLs"),ie=w(),st(se.$$.fragment),M(o,"class","text-lg font-medium opacity-90"),M(l,"class","text-sm opacity-75 mt-1"),M(f,"class","text-5xl font-bold"),M(k,"class","text-sm opacity-75"),M(h,"class","text-right"),M(i,"class","flex items-center justify-between"),M(D,"class","h-full bg-white rounded-full transition-all duration-500"),P(D,"width",t[2].healthScore+"%"),M(S,"class","mt-4 bg-white/20 rounded-full h-3 overflow-hidden"),M(n,"class","bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl p-6 text-white"),M(L,"class","text-xs text-gray-500 uppercase tracking-wide"),M($,"class",j="text-2xl font-bold mt-1 "+ch(t[2].roi)+" svelte-12ctnp6"),M(z,"class","text-xs text-gray-400 mt-1"),M(T,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(T,"role","button"),M(T,"tabindex","0"),M(K,"class","text-xs text-gray-500 uppercase tracking-wide"),M(Q,"class",G="text-2xl font-bold mt-1 "+ch(t[2].decayRate,!0)+" svelte-12ctnp6"),M(nt,"class","text-xs text-gray-400 mt-1"),M(U,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(U,"role","button"),M(U,"tabindex","0"),M(ut,"class","text-xs text-gray-500 uppercase tracking-wide"),M(ht,"class",pt="text-2xl font-bold mt-1 "+ch(t[2].deadLinkRatio,!0)+" svelte-12ctnp6"),M(bt,"class","text-xs text-gray-400 mt-1"),M(ct,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(ct,"role","button"),M(ct,"tabindex","0"),M(Ct,"class","text-xs text-gray-500 uppercase tracking-wide"),M(St,"class",Pt="text-2xl font-bold mt-1 "+ch(t[2].enrichmentCoverage)+" svelte-12ctnp6"),M(Ot,"class","text-xs text-gray-400 mt-1"),M(_t,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(_t,"role","button"),M(_t,"tabindex","0"),M(Bt,"class","text-xs text-gray-500 uppercase tracking-wide"),M(jt,"class",Nt="text-2xl font-bold mt-1 "+ch(t[2].categorizationCoverage)+" svelte-12ctnp6"),M(Wt,"class","text-xs text-gray-400 mt-1"),M($t,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M($t,"role","button"),M($t,"tabindex","0"),M(Yt,"class","text-xs text-gray-500 uppercase tracking-wide"),M(Xt,"class",Zt="text-2xl font-bold mt-1 "+ch(t[2].duplicateScore,!0)+" svelte-12ctnp6"),M(ee,"class","text-xs text-gray-400 mt-1"),M(Kt,"class","bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer"),M(Kt,"role","button"),M(Kt,"tabindex","0"),M(O,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"),M(e,"class","space-y-6")},m(r,m){p(r,e,m),g(e,n),g(n,i),g(i,s),g(s,o),g(s,a),g(s,l),g(l,c),g(l,u),g(i,d),g(i,h),g(h,f),g(f,b),g(h,x),g(h,k),g(n,C),g(n,S),g(S,D),g(e,E),g(e,O),g(O,T),g(T,L),g(T,R),g(T,$),g($,B),g($,I),g(T,F),g(T,z),g(z,N),g(z,V),g(z,W),g(z,H),g(O,q),g(O,U),g(U,K),g(U,Y),g(U,Q),g(Q,X),g(Q,J),g(U,Z),g(U,nt),g(nt,rt),g(nt,it),g(O,lt),g(O,ct),g(ct,ut),g(ct,dt),g(ct,ht),g(ht,ft),g(ht,gt),g(ct,mt),g(ct,bt),g(bt,yt),g(bt,xt),g(bt,vt),g(bt,wt),g(O,kt),g(O,_t),g(_t,Ct),g(_t,Mt),g(_t,St),g(St,At),g(St,Dt),g(_t,Et),g(_t,Ot),g(Ot,Tt),g(Ot,Lt),g(O,Rt),g(O,$t),g($t,Bt),g($t,It),g($t,jt),g(jt,Ft),g(jt,zt),g($t,Vt),g($t,Wt),g(Wt,Ht),g(Wt,qt),g(O,Ut),g(O,Kt),g(Kt,Yt),g(Kt,Qt),g(Kt,Xt),g(Xt,Jt),g(Xt,Gt),g(Kt,te),g(Kt,ee),g(ee,ne),g(ee,re),g(e,ie),ot(se,e,null),oe=!0,ae||(le=[_(T,"click",t[19]),_(T,"keypress",t[20]),_(U,"click",t[21]),_(U,"keypress",t[22]),_(ct,"click",t[23]),_(ct,"keypress",t[24]),_(_t,"click",t[25]),_(_t,"keypress",t[26]),_($t,"click",t[27]),_($t,"keypress",t[28]),_(Kt,"click",t[29]),_(Kt,"keypress",t[30])],ae=!0)},p(t,e){(!oe||4&e[0])&&ce!==(ce=t[2].total.toLocaleString()+"")&&A(c,ce),(!oe||4&e[0])&&ue!==(ue=t[2].healthScore+"")&&A(b,ue),(!oe||4&e[0])&&P(D,"width",t[2].healthScore+"%"),(!oe||4&e[0])&&de!==(de=t[2].roi+"")&&A(B,de),(!oe||4&e[0]&&j!==(j="text-2xl font-bold mt-1 "+ch(t[2].roi)+" svelte-12ctnp6"))&&M($,"class",j),(!oe||4&e[0])&&he!==(he=t[2].metrics.accessed+"")&&A(N,he),(!oe||4&e[0])&&fe!==(fe=t[2].total+"")&&A(W,fe),(!oe||4&e[0])&&ge!==(ge=t[2].decayRate+"")&&A(X,ge),(!oe||4&e[0]&&G!==(G="text-2xl font-bold mt-1 "+ch(t[2].decayRate,!0)+" svelte-12ctnp6"))&&M(Q,"class",G),(!oe||4&e[0])&&pe!==(pe=t[2].metrics.decayed+"")&&A(rt,pe),(!oe||4&e[0])&&me!==(me=t[2].deadLinkRatio+"")&&A(ft,me),(!oe||4&e[0]&&pt!==(pt="text-2xl font-bold mt-1 "+ch(t[2].deadLinkRatio,!0)+" svelte-12ctnp6"))&&M(ht,"class",pt),(!oe||4&e[0])&&be!==(be=t[2].metrics.dead+"")&&A(yt,be),(!oe||4&e[0])&&ye!==(ye=t[2].metrics.checked+"")&&A(vt,ye),(!oe||4&e[0])&&xe!==(xe=t[2].enrichmentCoverage+"")&&A(At,xe),(!oe||4&e[0]&&Pt!==(Pt="text-2xl font-bold mt-1 "+ch(t[2].enrichmentCoverage)+" svelte-12ctnp6"))&&M(St,"class",Pt),(!oe||4&e[0])&&ve!==(ve=t[2].metrics.enriched+"")&&A(Tt,ve),(!oe||4&e[0])&&we!==(we=t[2].categorizationCoverage+"")&&A(Ft,we),(!oe||4&e[0]&&Nt!==(Nt="text-2xl font-bold mt-1 "+ch(t[2].categorizationCoverage)+" svelte-12ctnp6"))&&M(jt,"class",Nt),(!oe||4&e[0])&&ke!==(ke=t[2].metrics.categorized+"")&&A(Ht,ke),(!oe||4&e[0])&&_e!==(_e=t[2].duplicateScore+"")&&A(Jt,_e),(!oe||4&e[0]&&Zt!==(Zt="text-2xl font-bold mt-1 "+ch(t[2].duplicateScore,!0)+" svelte-12ctnp6"))&&M(Xt,"class",Zt),(!oe||4&e[0])&&Ce!==(Ce=t[2].metrics.duplicates+"")&&A(ne,Ce);const n={};4&e[0]|2097152&e[2]&&(n.$$scope={dirty:e,ctx:t}),se.$set(n)},i(t){oe||(tt(se.$$.fragment,t),oe=!0)},o(t){et(se.$$.fragment,t),oe=!1},d(t){t&&m(e),at(se),ae=!1,r(le)}}}function dd(t){let e,n,r,i,s,o,a,l=t[2].roi+"";return{c(){e=y("div"),n=y("span"),n.textContent="",r=w(),i=y("span"),s=v("Low bookmark ROI ("),o=v(l),a=v("%)  consider reviewing and removing unused bookmarks"),M(n,"class","text-yellow-500"),M(e,"class","flex items-start gap-2")},m(t,l){p(t,e,l),g(e,n),g(e,r),g(e,i),g(i,s),g(i,o),g(i,a)},p(t,e){4&e[0]&&l!==(l=t[2].roi+"")&&A(o,l)},d(t){t&&m(e)}}}function hd(t){let e,n,r,i,s,o,a,l=t[2].decayRate+"";return{c(){e=y("div"),n=y("span"),n.textContent="",r=w(),i=y("span"),s=v("High decay rate ("),o=v(l),a=v("%)  many old bookmarks never accessed"),M(n,"class","text-yellow-500"),M(e,"class","flex items-start gap-2")},m(t,l){p(t,e,l),g(e,n),g(e,r),g(e,i),g(i,s),g(i,o),g(i,a)},p(t,e){4&e[0]&&l!==(l=t[2].decayRate+"")&&A(o,l)},d(t){t&&m(e)}}}function fd(t){let e,n,r,i,s,o,a=t[2].metrics.dead+"";return{c(){e=y("div"),n=y("span"),n.textContent="",r=w(),i=y("span"),s=v(a),o=v(" dead links detected  consider cleanup"),M(n,"class","text-red-500"),M(e,"class","flex items-start gap-2")},m(t,a){p(t,e,a),g(e,n),g(e,r),g(e,i),g(i,s),g(i,o)},p(t,e){4&e[0]&&a!==(a=t[2].metrics.dead+"")&&A(s,a)},d(t){t&&m(e)}}}function gd(t){let e,n,r,i,s,o,a,l=t[2].enrichmentCoverage+"";return{c(){e=y("div"),n=y("span"),n.textContent="",r=w(),i=y("span"),s=v("Run enrichment to improve metadata coverage ("),o=v(l),a=v("%)"),M(n,"class","text-blue-500"),M(e,"class","flex items-start gap-2")},m(t,l){p(t,e,l),g(e,n),g(e,r),g(e,i),g(i,s),g(i,o),g(i,a)},p(t,e){4&e[0]&&l!==(l=t[2].enrichmentCoverage+"")&&A(o,l)},d(t){t&&m(e)}}}function pd(t){let e;return{c(){e=y("div"),e.innerHTML='<span class="text-green-500"></span> <span>Your collection is in good health!</span>',M(e,"class","flex items-start gap-2")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function md(t){let e,n,r,i,s,o=t[2].roi<30&&dd(t),a=t[2].decayRate>50&&hd(t),l=t[2].deadLinkRatio>10&&fd(t),c=t[2].enrichmentCoverage<50&&gd(t),u=t[2].healthScore>=70&&pd();return{c(){e=y("div"),o&&o.c(),n=w(),a&&a.c(),r=w(),l&&l.c(),i=w(),c&&c.c(),s=w(),u&&u.c(),M(e,"class","space-y-2 text-sm")},m(t,d){p(t,e,d),o&&o.m(e,null),g(e,n),a&&a.m(e,null),g(e,r),l&&l.m(e,null),g(e,i),c&&c.m(e,null),g(e,s),u&&u.m(e,null)},p(t,d){t[2].roi<30?o?o.p(t,d):(o=dd(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),t[2].decayRate>50?a?a.p(t,d):(a=hd(t),a.c(),a.m(e,r)):a&&(a.d(1),a=null),t[2].deadLinkRatio>10?l?l.p(t,d):(l=fd(t),l.c(),l.m(e,i)):l&&(l.d(1),l=null),t[2].enrichmentCoverage<50?c?c.p(t,d):(c=gd(t),c.c(),c.m(e,s)):c&&(c.d(1),c=null),t[2].healthScore>=70?u||(u=pd(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(t){t&&m(e),o&&o.d(),a&&a.d(),l&&l.d(),c&&c.d(),u&&u.d()}}}function bd(t){let e,n,r,i,s,o,a,l,c,u,d;return n=new ju({props:{title:"Category Distribution",icon:"",subtitle:"Click a segment to filter",$$slots:{default:[yd]},$$scope:{ctx:t}}}),i=new ju({props:{title:"Content Type Mix",icon:"",$$slots:{default:[xd]},$$scope:{ctx:t}}}),o=new ju({props:{title:"Topic Clusters",icon:"",subtitle:"Most common keywords from your bookmarks",$$slots:{default:[kd]},$$scope:{ctx:t}}}),l=new ju({props:{title:"Folder Distribution",icon:"",subtitle:"Where your bookmarks live",$$slots:{default:[Cd]},$$scope:{ctx:t}}}),u=new ju({props:{title:"Language Distribution",icon:"",collapsible:!0,collapsed:!0,$$slots:{default:[Sd]},$$scope:{ctx:t}}}),{c(){e=y("div"),st(n.$$.fragment),r=w(),st(i.$$.fragment),s=w(),st(o.$$.fragment),a=w(),st(l.$$.fragment),c=w(),st(u.$$.fragment),M(e,"class","grid grid-cols-1 lg:grid-cols-2 gap-6")},m(t,h){p(t,e,h),ot(n,e,null),g(e,r),ot(i,e,null),g(e,s),ot(o,e,null),g(e,a),ot(l,e,null),g(e,c),ot(u,e,null),d=!0},p(t,e){const r={};2097152&e[2]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);const s={};2097152&e[2]&&(s.$$scope={dirty:e,ctx:t}),i.$set(s);const a={};8&e[0]|2097152&e[2]&&(a.$$scope={dirty:e,ctx:t}),o.$set(a);const c={};8&e[0]|2097152&e[2]&&(c.$$scope={dirty:e,ctx:t}),l.$set(c);const d={};8&e[0]|2097152&e[2]&&(d.$$scope={dirty:e,ctx:t}),u.$set(d)},i(t){d||(tt(n.$$.fragment,t),tt(i.$$.fragment,t),tt(o.$$.fragment,t),tt(l.$$.fragment,t),tt(u.$$.fragment,t),d=!0)},o(t){et(n.$$.fragment,t),et(i.$$.fragment,t),et(o.$$.fragment,t),et(l.$$.fragment,t),et(u.$$.fragment,t),d=!1},d(t){t&&m(e),at(n),at(i),at(o),at(l),at(u)}}}function yd(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="categoryDonutChart"></canvas>',M(n,"class","h-64")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function xd(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="contentTypeChart"></canvas>',M(n,"class","h-64")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function vd(t){let e,n,r,i,s,o,a,l,c,u=t[76].keyword+"",d=t[76].count+"";function h(){return t[31](t[76])}return{c(){e=y("button"),n=v(u),r=w(),i=y("span"),s=v("("),o=v(d),a=v(")"),M(i,"class","text-xs opacity-60 ml-1"),M(e,"class","px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors"),P(e,"font-size",t[77]+"rem")},m(t,u){p(t,e,u),g(e,n),g(e,r),g(e,i),g(i,s),g(i,o),g(i,a),l||(c=_(e,"click",h),l=!0)},p(r,i){t=r,8&i[0]&&u!==(u=t[76].keyword+"")&&A(n,u),8&i[0]&&d!==(d=t[76].count+"")&&A(o,d),8&i[0]&&P(e,"font-size",t[77]+"rem")},d(t){t&&m(e),l=!1,c()}}}function wd(t){let e;return{c(){e=y("p"),e.textContent="No keywords found. Run enrichment to extract keywords.",M(e,"class","text-gray-500 text-sm")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function kd(t){let e,n,r=nt(t[3].topicClusters.slice(0,25)),i=[];for(let e=0;e<r.length;e+=1)i[e]=vd(sd(t,r,e));let s=0===t[3].topicClusters.length&&wd();return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();n=w(),s&&s.c(),M(e,"class","flex flex-wrap gap-2")},m(t,r){p(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);g(e,n),s&&s.m(e,null)},p(t,o){if(520&o[0]){let s;for(r=nt(t[3].topicClusters.slice(0,25)),s=0;s<r.length;s+=1){const a=sd(t,r,s);i[s]?i[s].p(a,o):(i[s]=vd(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}0===t[3].topicClusters.length?s||(s=wd(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&m(e),b(i,t),s&&s.d()}}}function _d(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b=t[73].folder+"",x=t[73].count+"";return{c(){e=y("div"),n=y("div"),r=y("div"),i=y("span"),s=v(b),a=w(),l=y("span"),c=v(x),u=w(),d=y("div"),h=y("div"),f=w(),M(i,"class","text-sm truncate"),M(i,"title",o=t[73].folder),M(l,"class","text-xs text-gray-500"),M(r,"class","flex items-center justify-between mb-1"),M(h,"class","h-full bg-purple-500 rounded-full"),P(h,"width",t[73].percentage+"%"),M(d,"class","w-full bg-gray-100 rounded-full h-2 overflow-hidden"),M(n,"class","flex-1 min-w-0"),M(e,"class","flex items-center gap-2")},m(t,o){p(t,e,o),g(e,n),g(n,r),g(r,i),g(i,s),g(r,a),g(r,l),g(l,c),g(n,u),g(n,d),g(d,h),g(e,f)},p(t,e){8&e[0]&&b!==(b=t[73].folder+"")&&A(s,b),8&e[0]&&o!==(o=t[73].folder)&&M(i,"title",o),8&e[0]&&x!==(x=t[73].count+"")&&A(c,x),8&e[0]&&P(h,"width",t[73].percentage+"%")},d(t){t&&m(e)}}}function Cd(t){let e,n=nt(t[3].folderDistribution),r=[];for(let e=0;e<n.length;e+=1)r[e]=_d(id(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2 insight-scrollable")},m(t,n){p(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(8&i[0]){let s;for(n=nt(t[3].folderDistribution),s=0;s<n.length;s+=1){const o=id(t,n,s);r[s]?r[s].p(o,i):(r[s]=_d(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Md(t){let e,n,r,i,s,o,a,l,c,u,d=t[70].language+"",h=t[70].count+"",f=t[70].percentage+"";return{c(){e=y("div"),n=y("span"),r=v(d),i=w(),s=y("span"),o=v(h),a=v(" ("),l=v(f),c=v("%)"),u=w(),M(n,"class","text-sm"),M(s,"class","text-sm font-medium"),M(e,"class","flex items-center justify-between")},m(t,d){p(t,e,d),g(e,n),g(n,r),g(e,i),g(e,s),g(s,o),g(s,a),g(s,l),g(s,c),g(e,u)},p(t,e){8&e[0]&&d!==(d=t[70].language+"")&&A(r,d),8&e[0]&&h!==(h=t[70].count+"")&&A(o,h),8&e[0]&&f!==(f=t[70].percentage+"")&&A(l,f)},d(t){t&&m(e)}}}function Sd(t){let e,n=nt(t[3].languageDistribution.slice(0,10)),r=[];for(let e=0;e<n.length;e+=1)r[e]=Md(rd(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){p(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(8&i[0]){let s;for(n=nt(t[3].languageDistribution.slice(0,10)),s=0;s<n.length;s+=1){const o=rd(t,n,s);r[s]?r[s].p(o,i):(r[s]=Md(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Ad(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,O,T,L,R,$,B,I,j,F,z,N=t[4].stats.totalStale+"",V=t[4].stats.totalCleanupCandidates+"",W=t[4].stats.deadLinksCount+"",H=t[4].stats.totalLowValueDomains+"";return $=new ju({props:{title:"Rediscovery Feed",icon:"",subtitle:"Random old bookmarks you might have forgotten",$$slots:{"header-actions":[Td],default:[Od]},$$scope:{ctx:t}}}),I=new ju({props:{title:"Cleanup Candidates",icon:"",variant:"danger",subtitle:"Dead links and old unused bookmarks",$$slots:{"header-actions":[jd],default:[$d]},$$scope:{ctx:t}}}),F=new ju({props:{title:"Stale Queue",icon:"",variant:"warning",subtitle:"Unread bookmarks older than 30 days",collapsible:!0,$$slots:{default:[Nd]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v(N),o=w(),a=y("div"),a.textContent="Stale bookmarks",l=w(),c=y("div"),u=y("div"),d=v(V),h=w(),f=y("div"),f.textContent="Cleanup candidates",b=w(),x=y("div"),k=y("div"),_=v(W),C=w(),S=y("div"),S.textContent="Dead links",D=w(),P=y("div"),E=y("div"),O=v(H),T=w(),L=y("div"),L.textContent="Low-value domains",R=w(),st($.$$.fragment),B=w(),st(I.$$.fragment),j=w(),st(F.$$.fragment),M(i,"class","text-2xl font-bold text-yellow-700"),M(a,"class","text-sm text-yellow-600"),M(r,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4"),M(u,"class","text-2xl font-bold text-red-700"),M(f,"class","text-sm text-red-600"),M(c,"class","bg-red-50 border border-red-200 rounded-lg p-4"),M(k,"class","text-2xl font-bold text-gray-700"),M(S,"class","text-sm text-gray-600"),M(x,"class","bg-gray-50 border border-gray-200 rounded-lg p-4"),M(E,"class","text-2xl font-bold text-orange-700"),M(L,"class","text-sm text-orange-600"),M(P,"class","bg-orange-50 border border-orange-200 rounded-lg p-4"),M(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),M(e,"class","space-y-6")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(i,s),g(r,o),g(r,a),g(n,l),g(n,c),g(c,u),g(u,d),g(c,h),g(c,f),g(n,b),g(n,x),g(x,k),g(k,_),g(x,C),g(x,S),g(n,D),g(n,P),g(P,E),g(E,O),g(P,T),g(P,L),g(e,R),ot($,e,null),g(e,B),ot(I,e,null),g(e,j),ot(F,e,null),z=!0},p(t,e){(!z||16&e[0])&&N!==(N=t[4].stats.totalStale+"")&&A(s,N),(!z||16&e[0])&&V!==(V=t[4].stats.totalCleanupCandidates+"")&&A(d,V),(!z||16&e[0])&&W!==(W=t[4].stats.deadLinksCount+"")&&A(_,W),(!z||16&e[0])&&H!==(H=t[4].stats.totalLowValueDomains+"")&&A(O,H);const n={};144&e[0]|2097152&e[2]&&(n.$$scope={dirty:e,ctx:t}),$.$set(n);const r={};272&e[0]|2097152&e[2]&&(r.$$scope={dirty:e,ctx:t}),I.$set(r);const i={};16&e[0]|2097152&e[2]&&(i.$$scope={dirty:e,ctx:t}),F.$set(i)},i(t){z||(tt($.$$.fragment,t),tt(I.$$.fragment,t),tt(F.$$.fragment,t),z=!0)},o(t){et($.$$.fragment,t),et(I.$$.fragment,t),et(F.$$.fragment,t),z=!1},d(t){t&&m(e),at($),at(I),at(F)}}}function Dd(t){let e,n,r=t[63].description+"";return{c(){e=y("p"),n=v(r),M(e,"class","text-xs text-gray-600 mt-1 line-clamp-2 svelte-12ctnp6")},m(t,r){p(t,e,r),g(e,n)},p(t,e){16&e[0]&&r!==(r=t[63].description+"")&&A(n,r)},d(t){t&&m(e)}}}function Pd(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k=t[63].title+"",C=t[63].domain+"",S=lh(t[63].ageInDays)+"",D=t[63].description&&Dd(t);function P(){return t[32](t[63])}return{c(){e=y("div"),n=y("div"),r=y("a"),i=v(k),o=w(),a=y("div"),l=v(C),c=v("  "),u=v(S),d=w(),D&&D.c(),h=w(),f=y("button"),f.textContent="",M(r,"href",s=t[63].url),M(r,"target","_blank"),M(r,"rel","noopener noreferrer"),M(r,"class","text-sm font-medium text-gray-900 hover:text-blue-600 line-clamp-1 svelte-12ctnp6"),M(a,"class","text-xs text-gray-500 mt-1"),M(n,"class","flex-1 min-w-0"),M(f,"class","p-2 text-gray-400 hover:text-blue-600 hover:bg-white rounded-lg transition-colors"),M(f,"title","Open in new tab"),M(e,"class","flex items-start gap-3 p-3 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-100")},m(t,s){p(t,e,s),g(e,n),g(n,r),g(r,i),g(n,o),g(n,a),g(a,l),g(a,c),g(a,u),g(n,d),D&&D.m(n,null),g(e,h),g(e,f),b||(x=_(f,"click",P),b=!0)},p(e,o){t=e,16&o[0]&&k!==(k=t[63].title+"")&&A(i,k),16&o[0]&&s!==(s=t[63].url)&&M(r,"href",s),16&o[0]&&C!==(C=t[63].domain+"")&&A(l,C),16&o[0]&&S!==(S=lh(t[63].ageInDays)+"")&&A(u,S),t[63].description?D?D.p(t,o):(D=Dd(t),D.c(),D.m(n,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),D&&D.d(),b=!1,x()}}}function Ed(t){let e;return{c(){e=y("p"),e.textContent="No old bookmarks to rediscover",M(e,"class","text-gray-500 text-sm")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function Od(t){let e,n,r=nt(t[4].rediscoveryFeed),i=[];for(let e=0;e<r.length;e+=1)i[e]=Pd(nd(t,r,e));let s=0===t[4].rediscoveryFeed.length&&Ed();return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();n=w(),s&&s.c(),M(e,"class","space-y-3")},m(t,r){p(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);g(e,n),s&&s.m(e,null)},p(t,o){if(16&o[0]){let s;for(r=nt(t[4].rediscoveryFeed),s=0;s<r.length;s+=1){const a=nd(t,r,s);i[s]?i[s].p(a,o):(i[s]=Pd(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}0===t[4].rediscoveryFeed.length?s||(s=Ed(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&m(e),b(i,t),s&&s.d()}}}function Td(t){let e,n,r,i,s,o,a,l;return{c(){e=y("div"),n=y("button"),r=y("span"),i=v(""),o=v("\n              Shuffle"),M(r,"class",s="transform "+(t[7]?"animate-spin":"")),M(n,"class","px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1"),n.disabled=t[7],M(e,"slot","header-actions")},m(s,c){p(s,e,c),g(e,n),g(n,r),g(r,i),g(n,o),a||(l=_(n,"click",t[13]),a=!0)},p(t,e){128&e[0]&&s!==(s="transform "+(t[7]?"animate-spin":""))&&M(r,"class",s),128&e[0]&&(n.disabled=t[7])},d(t){t&&m(e),a=!1,l()}}}function Ld(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P=t[63].title+"",E=t[63].reason+"",O=t[63].domain+"",T=lh(t[63].ageInDays)+"";function L(){return t[33](t[63])}return{c(){e=y("div"),n=y("input"),i=w(),s=y("div"),o=y("div"),a=y("span"),l=v(P),c=w(),u=y("span"),d=v(E),f=w(),b=y("div"),x=v(O),k=v("  "),C=v(T),M(n,"type","checkbox"),n.checked=r=t[8].has(t[63].id),M(n,"class","rounded border-gray-300 text-red-600 focus:ring-red-500"),M(a,"class","text-sm truncate"),M(u,"class",h="px-1.5 py-0.5 text-xs rounded "+(!1===t[63].isAlive?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600")),M(o,"class","flex items-center gap-2"),M(b,"class","text-xs text-gray-500"),M(s,"class","flex-1 min-w-0"),M(e,"class","flex items-center gap-3 p-2 rounded-lg hover:bg-red-50 border border-transparent hover:border-red-200")},m(t,r){p(t,e,r),g(e,n),g(e,i),g(e,s),g(s,o),g(o,a),g(a,l),g(o,c),g(o,u),g(u,d),g(s,f),g(s,b),g(b,x),g(b,k),g(b,C),S||(D=_(n,"change",L),S=!0)},p(e,i){t=e,272&i[0]&&r!==(r=t[8].has(t[63].id))&&(n.checked=r),16&i[0]&&P!==(P=t[63].title+"")&&A(l,P),16&i[0]&&E!==(E=t[63].reason+"")&&A(d,E),16&i[0]&&h!==(h="px-1.5 py-0.5 text-xs rounded "+(!1===t[63].isAlive?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"))&&M(u,"class",h),16&i[0]&&O!==(O=t[63].domain+"")&&A(x,O),16&i[0]&&T!==(T=lh(t[63].ageInDays)+"")&&A(C,T)},d(t){t&&m(e),S=!1,D()}}}function Rd(t){let e;return{c(){e=y("p"),e.textContent="No cleanup candidates found. Great job keeping things tidy!",M(e,"class","text-gray-500 text-sm")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function $d(t){let e,n,r=nt(t[4].cleanupCandidates),i=[];for(let e=0;e<r.length;e+=1)i[e]=Ld(ed(t,r,e));let s=0===t[4].cleanupCandidates.length&&Rd();return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();n=w(),s&&s.c(),M(e,"class","space-y-2 insight-scrollable")},m(t,r){p(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);g(e,n),s&&s.m(e,null)},p(t,o){if(16656&o[0]){let s;for(r=nt(t[4].cleanupCandidates),s=0;s<r.length;s+=1){const a=ed(t,r,s);i[s]?i[s].p(a,o):(i[s]=Ld(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}0===t[4].cleanupCandidates.length?s||(s=Rd(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&m(e),b(i,t),s&&s.d()}}}function Bd(e){let n,r,i;return{c(){n=y("button"),n.textContent="Select All",M(n,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300")},m(t,s){p(t,n,s),r||(i=_(n,"click",e[15]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}function Id(t){let e,n,i,s,o,a,l,c,u=t[8].size+"";return{c(){e=y("button"),n=v("Delete "),i=v(u),s=v(" selected"),o=w(),a=y("button"),a.textContent="Deselect",M(e,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(a,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300")},m(r,u){p(r,e,u),g(e,n),g(e,i),g(e,s),p(r,o,u),p(r,a,u),l||(c=[_(e,"click",t[17]),_(a,"click",t[16])],l=!0)},p(t,e){256&e[0]&&u!==(u=t[8].size+"")&&A(i,u)},d(t){t&&(m(e),m(o),m(a)),l=!1,r(c)}}}function jd(t){let e;function n(t,e){return t[8].size>0?Id:Bd}let r=n(t),i=r(t);return{c(){e=y("div"),i.c(),M(e,"slot","header-actions"),M(e,"class","flex gap-2")},m(t,n){p(t,e,n),i.m(e,null)},p(t,s){r===(r=n(t))&&i?i.p(t,s):(i.d(1),i=r(t),i&&(i.c(),i.m(e,null)))},d(t){t&&m(e),i.d()}}}function Fd(t){let e,n,r,i,s,o,a,l,c,u,d=t[63].title+"",h=t[63].domain+"",f=lh(t[63].ageInDays)+"";return{c(){e=y("div"),n=y("div"),r=y("a"),i=v(d),o=w(),a=y("div"),l=v(h),c=v("  "),u=v(f),M(r,"href",s=t[63].url),M(r,"target","_blank"),M(r,"rel","noopener noreferrer"),M(r,"class","text-sm text-gray-900 hover:text-blue-600 truncate block"),M(a,"class","text-xs text-gray-500"),M(n,"class","flex-1 min-w-0"),M(e,"class","flex items-center gap-3 p-2 rounded-lg hover:bg-yellow-50")},m(t,s){p(t,e,s),g(e,n),g(n,r),g(r,i),g(n,o),g(n,a),g(a,l),g(a,c),g(a,u)},p(t,e){16&e[0]&&d!==(d=t[63].title+"")&&A(i,d),16&e[0]&&s!==(s=t[63].url)&&M(r,"href",s),16&e[0]&&h!==(h=t[63].domain+"")&&A(l,h),16&e[0]&&f!==(f=lh(t[63].ageInDays)+"")&&A(u,f)},d(t){t&&m(e)}}}function zd(t){let e,n,r,i,s=t[4].staleQueue.length-20+"";return{c(){e=y("p"),n=v("...and "),r=v(s),i=v(" more"),M(e,"class","text-xs text-gray-500 pt-2")},m(t,s){p(t,e,s),g(e,n),g(e,r),g(e,i)},p(t,e){16&e[0]&&s!==(s=t[4].staleQueue.length-20+"")&&A(r,s)},d(t){t&&m(e)}}}function Nd(t){let e,n,r=nt(t[4].staleQueue.slice(0,20)),i=[];for(let e=0;e<r.length;e+=1)i[e]=Fd(td(t,r,e));let s=t[4].staleQueue.length>20&&zd(t);return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();n=w(),s&&s.c(),M(e,"class","space-y-2 insight-scrollable")},m(t,r){p(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);g(e,n),s&&s.m(e,null)},p(t,o){if(16&o[0]){let s;for(r=nt(t[4].staleQueue.slice(0,20)),s=0;s<r.length;s+=1){const a=td(t,r,s);i[s]?i[s].p(a,o):(i[s]=Fd(a),i[s].c(),i[s].m(e,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=r.length}t[4].staleQueue.length>20?s?s.p(t,o):(s=zd(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&m(e),b(i,t),s&&s.d()}}}function Vd(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,O,T,L,R,$,B,I,j,F,z,N,V,W,H=t[5].uniqueDomains+"",q=t[5].diversityScore+"",U=t[5].valuableDomains.length+"",K=t[5].ephemeralSources.length+"",Y=t[5].dependencyWarnings.length>0&&Wd(t);I=new ju({props:{title:"Domain Reliability",icon:"",subtitle:"Click to filter by domain",$$slots:{default:[Ud]},$$scope:{ctx:t}}}),F=new ju({props:{title:"Most Valuable Domains",icon:"",subtitle:"Domains you actually use",$$slots:{default:[Yd]},$$scope:{ctx:t}}});let Q=t[5].ephemeralSources.length>0&&Qd(t);return V=new ju({props:{title:"Knowledge Map",icon:"",subtitle:"Top 25 domains in your collection",collapsible:!0,$$slots:{default:[th]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v(H),o=w(),a=y("div"),a.textContent="Unique domains",l=w(),c=y("div"),u=y("div"),d=v(q),h=v("%"),f=w(),b=y("div"),b.textContent="Diversity score",x=w(),k=y("div"),_=y("div"),C=v(U),S=w(),D=y("div"),D.textContent="High-value domains",P=w(),E=y("div"),O=y("div"),T=v(K),L=w(),R=y("div"),R.textContent="Unreliable domains",$=w(),Y&&Y.c(),B=w(),st(I.$$.fragment),j=w(),st(F.$$.fragment),z=w(),Q&&Q.c(),N=w(),st(V.$$.fragment),M(i,"class","text-2xl font-bold text-blue-700"),M(a,"class","text-sm text-blue-600"),M(r,"class","bg-blue-50 border border-blue-200 rounded-lg p-4"),M(u,"class","text-2xl font-bold text-green-700"),M(b,"class","text-sm text-green-600"),M(c,"class","bg-green-50 border border-green-200 rounded-lg p-4"),M(_,"class","text-2xl font-bold text-purple-700"),M(D,"class","text-sm text-purple-600"),M(k,"class","bg-purple-50 border border-purple-200 rounded-lg p-4"),M(O,"class","text-2xl font-bold text-red-700"),M(R,"class","text-sm text-red-600"),M(E,"class","bg-red-50 border border-red-200 rounded-lg p-4"),M(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),M(e,"class","space-y-6")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(i,s),g(r,o),g(r,a),g(n,l),g(n,c),g(c,u),g(u,d),g(u,h),g(c,f),g(c,b),g(n,x),g(n,k),g(k,_),g(_,C),g(k,S),g(k,D),g(n,P),g(n,E),g(E,O),g(O,T),g(E,L),g(E,R),g(e,$),Y&&Y.m(e,null),g(e,B),ot(I,e,null),g(e,j),ot(F,e,null),g(e,z),Q&&Q.m(e,null),g(e,N),ot(V,e,null),W=!0},p(t,n){(!W||32&n[0])&&H!==(H=t[5].uniqueDomains+"")&&A(s,H),(!W||32&n[0])&&q!==(q=t[5].diversityScore+"")&&A(d,q),(!W||32&n[0])&&U!==(U=t[5].valuableDomains.length+"")&&A(C,U),(!W||32&n[0])&&K!==(K=t[5].ephemeralSources.length+"")&&A(T,K),t[5].dependencyWarnings.length>0?Y?(Y.p(t,n),32&n[0]&&tt(Y,1)):(Y=Wd(t),Y.c(),tt(Y,1),Y.m(e,B)):Y&&(G(),et(Y,1,1,()=>{Y=null}),Z());const r={};2097152&n[2]&&(r.$$scope={dirty:n,ctx:t}),I.$set(r);const i={};32&n[0]|2097152&n[2]&&(i.$$scope={dirty:n,ctx:t}),F.$set(i),t[5].ephemeralSources.length>0?Q?(Q.p(t,n),32&n[0]&&tt(Q,1)):(Q=Qd(t),Q.c(),tt(Q,1),Q.m(e,N)):Q&&(G(),et(Q,1,1,()=>{Q=null}),Z());const o={};32&n[0]|2097152&n[2]&&(o.$$scope={dirty:n,ctx:t}),V.$set(o)},i(t){W||(tt(Y),tt(I.$$.fragment,t),tt(F.$$.fragment,t),tt(Q),tt(V.$$.fragment,t),W=!0)},o(t){et(Y),et(I.$$.fragment,t),et(F.$$.fragment,t),et(Q),et(V.$$.fragment,t),W=!1},d(t){t&&m(e),Y&&Y.d(),at(I),at(F),Q&&Q.d(),at(V)}}}function Wd(t){let e,n;return e=new ju({props:{title:"Concentration Warnings",icon:"",variant:"warning",subtitle:"Domains with >10% of your bookmarks",$$slots:{default:[qd]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ot(e,t,r),n=!0},p(t,n){const r={};32&n[0]|2097152&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Hd(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E=t[60].domain+"",O=t[60].topCategory+"",T=t[60].percentage+"",L=t[60].count+"";function R(){return t[34](t[60])}return{c(){e=y("div"),n=y("div"),r=y("button"),i=v(E),s=w(),o=y("div"),a=v("Category: "),l=v(O),c=w(),u=y("div"),d=y("div"),h=v(T),f=v("%"),b=w(),x=y("div"),k=v(L),C=v(" bookmarks"),S=w(),M(r,"class","font-medium text-gray-900 hover:text-blue-600"),M(o,"class","text-xs text-gray-500"),M(d,"class","text-lg font-bold text-yellow-700"),M(x,"class","text-xs text-gray-500"),M(u,"class","text-right"),M(e,"class","flex items-center justify-between p-3 bg-yellow-50 rounded-lg")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(n,s),g(n,o),g(o,a),g(o,l),g(e,c),g(e,u),g(u,d),g(d,h),g(d,f),g(u,b),g(u,x),g(x,k),g(x,C),g(e,S),D||(P=_(r,"click",R),D=!0)},p(e,n){t=e,32&n[0]&&E!==(E=t[60].domain+"")&&A(i,E),32&n[0]&&O!==(O=t[60].topCategory+"")&&A(l,O),32&n[0]&&T!==(T=t[60].percentage+"")&&A(h,T),32&n[0]&&L!==(L=t[60].count+"")&&A(k,L)},d(t){t&&m(e),D=!1,P()}}}function qd(t){let e,n=nt(t[5].dependencyWarnings),r=[];for(let e=0;e<n.length;e+=1)r[e]=Hd(Zu(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-3")},m(t,n){p(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(544&i[0]){let s;for(n=nt(t[5].dependencyWarnings),s=0;s<n.length;s+=1){const o=Zu(t,n,s);r[s]?r[s].p(o,i):(r[s]=Hd(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Ud(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="domainReliabilityChart"></canvas>',M(n,"class","h-72")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function Kd(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P=t[53].domain+"",E=t[53].total+"",O=t[53].totalAccess+"",T=t[53].engagementRate+"";function L(){return t[35](t[53])}return{c(){e=y("div"),n=y("button"),r=v(P),i=w(),s=y("div"),o=y("span"),a=v(E),l=v(" bookmarks"),c=w(),u=y("span"),d=v(O),h=v(" visits"),f=w(),b=y("span"),x=v(T),k=v("% engaged"),C=w(),M(n,"class","text-sm font-medium text-gray-900 hover:text-blue-600"),M(o,"class","text-gray-500"),M(u,"class","text-green-600"),M(b,"class","text-blue-600"),M(s,"class","flex items-center gap-4 text-sm"),M(e,"class","flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(e,i),g(e,s),g(s,o),g(o,a),g(o,l),g(s,c),g(s,u),g(u,d),g(u,h),g(s,f),g(s,b),g(b,x),g(b,k),g(e,C),S||(D=_(n,"click",L),S=!0)},p(e,n){t=e,32&n[0]&&P!==(P=t[53].domain+"")&&A(r,P),32&n[0]&&E!==(E=t[53].total+"")&&A(a,E),32&n[0]&&O!==(O=t[53].totalAccess+"")&&A(d,O),32&n[0]&&T!==(T=t[53].engagementRate+"")&&A(x,T)},d(t){t&&m(e),S=!1,D()}}}function Yd(t){let e,n=nt(t[5].valuableDomains),r=[];for(let e=0;e<n.length;e+=1)r[e]=Kd(Gu(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){p(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(544&i[0]){let s;for(n=nt(t[5].valuableDomains),s=0;s<n.length;s+=1){const o=Gu(t,n,s);r[s]?r[s].p(o,i):(r[s]=Kd(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Qd(t){let e,n;return e=new ju({props:{title:"Ephemeral Sources",icon:"",variant:"danger",subtitle:"Domains with high dead link rates",$$slots:{default:[Jd]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){ot(e,t,r),n=!0},p(t,n){const r={};32&n[0]|2097152&n[2]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Xd(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x=t[53].domain+"",k=t[53].deadRate+"",_=t[53].dead+"",C=t[53].checked+"";return{c(){e=y("div"),n=y("span"),r=v(x),i=w(),s=y("div"),o=y("span"),a=v(k),l=v("% dead"),c=w(),u=y("span"),d=v(_),h=v(" of "),f=v(C),b=w(),M(n,"class","text-sm font-medium text-gray-900"),M(o,"class","text-red-600"),M(u,"class","text-gray-500"),M(s,"class","flex items-center gap-4 text-sm"),M(e,"class","flex items-center justify-between p-2 bg-red-50 rounded-lg")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(e,i),g(e,s),g(s,o),g(o,a),g(o,l),g(s,c),g(s,u),g(u,d),g(u,h),g(u,f),g(e,b)},p(t,e){32&e[0]&&x!==(x=t[53].domain+"")&&A(r,x),32&e[0]&&k!==(k=t[53].deadRate+"")&&A(a,k),32&e[0]&&_!==(_=t[53].dead+"")&&A(d,_),32&e[0]&&C!==(C=t[53].checked+"")&&A(f,C)},d(t){t&&m(e)}}}function Jd(t){let e,n=nt(t[5].ephemeralSources),r=[];for(let e=0;e<n.length;e+=1)r[e]=Xd(Ju(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){p(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(32&i[0]){let s;for(n=nt(t[5].ephemeralSources),s=0;s<n.length;s+=1){const o=Ju(t,n,s);r[s]?r[s].p(o,i):(r[s]=Xd(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Gd(t){let e,n,r=t[53].topCategory+"";return{c(){e=y("span"),n=v(r),M(e,"class","px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded")},m(t,r){p(t,e,r),g(e,n)},p(t,e){32&e[0]&&r!==(r=t[53].topCategory+"")&&A(n,r)},d(t){t&&m(e)}}}function Zd(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[53].domain+"",b=t[53].total+"",x=t[53].topCategory&&Gd(t);function k(){return t[36](t[53])}return{c(){e=y("button"),n=y("div"),r=v(f),i=w(),s=y("div"),o=y("span"),a=v(b),l=v(" bookmarks"),c=w(),x&&x.c(),u=w(),M(n,"class","font-medium text-sm truncate"),M(s,"class","flex items-center gap-2 mt-1 text-xs text-gray-500"),M(e,"class","p-3 bg-gray-50 rounded-lg hover:bg-blue-50 hover:border-blue-200 border border-gray-200 text-left transition-colors")},m(t,f){p(t,e,f),g(e,n),g(n,r),g(e,i),g(e,s),g(s,o),g(o,a),g(o,l),g(s,c),x&&x.m(s,null),g(e,u),d||(h=_(e,"click",k),d=!0)},p(e,n){t=e,32&n[0]&&f!==(f=t[53].domain+"")&&A(r,f),32&n[0]&&b!==(b=t[53].total+"")&&A(a,b),t[53].topCategory?x?x.p(t,n):(x=Gd(t),x.c(),x.m(s,null)):x&&(x.d(1),x=null)},d(t){t&&m(e),x&&x.d(),d=!1,h()}}}function th(t){let e,n=nt(t[5].knowledgeMap),r=[];for(let e=0;e<n.length;e+=1)r[e]=Zd(Xu(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 insight-scrollable")},m(t,n){p(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(544&i[0]){let s;for(n=nt(t[5].knowledgeMap),s=0;s<n.length;s+=1){const o=Xu(t,n,s);r[s]?r[s].p(o,i):(r[s]=Zd(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function eh(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,O,T,L,R,$,B,I,j,F,z,N,V,W,H,q=t[6].avgAgeDays+"",U=t[6].peakHours.join(", ")+"",K=t[6].weekdayVsWeekend.weekday.percentage+"",Y=t[6].weekdayVsWeekend.weekend.percentage+"";return I=new ju({props:{title:"Bookmarking by Hour",icon:"",subtitle:"When do you save bookmarks?",$$slots:{default:[nh]},$$scope:{ctx:t}}}),F=new ju({props:{title:"Bookmarking by Day",icon:"",$$slots:{default:[rh]},$$scope:{ctx:t}}}),N=new ju({props:{title:"Collection Age Distribution",icon:"",subtitle:"How old are your bookmarks?",$$slots:{default:[ih]},$$scope:{ctx:t}}}),W=new ju({props:{title:"Monthly Save Activity",icon:"",subtitle:"Last 12 months",$$slots:{default:[oh]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v(q),o=w(),a=y("div"),a.textContent="Avg age (days)",l=w(),c=y("div"),u=y("div"),d=v(U),h=w(),f=y("div"),f.textContent="Peak hours",b=w(),x=y("div"),k=y("div"),_=v(K),C=v("%"),S=w(),D=y("div"),D.textContent="Weekday saves",P=w(),E=y("div"),O=y("div"),T=v(Y),L=v("%"),R=w(),$=y("div"),$.textContent="Weekend saves",B=w(),st(I.$$.fragment),j=w(),st(F.$$.fragment),z=w(),st(N.$$.fragment),V=w(),st(W.$$.fragment),M(i,"class","text-2xl font-bold text-blue-700"),M(a,"class","text-sm text-blue-600"),M(r,"class","bg-blue-50 border border-blue-200 rounded-lg p-4"),M(u,"class","text-2xl font-bold text-green-700"),M(f,"class","text-sm text-green-600"),M(c,"class","bg-green-50 border border-green-200 rounded-lg p-4"),M(k,"class","text-2xl font-bold text-purple-700"),M(D,"class","text-sm text-purple-600"),M(x,"class","bg-purple-50 border border-purple-200 rounded-lg p-4"),M(O,"class","text-2xl font-bold text-orange-700"),M($,"class","text-sm text-orange-600"),M(E,"class","bg-orange-50 border border-orange-200 rounded-lg p-4"),M(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),M(e,"class","space-y-6")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(i,s),g(r,o),g(r,a),g(n,l),g(n,c),g(c,u),g(u,d),g(c,h),g(c,f),g(n,b),g(n,x),g(x,k),g(k,_),g(k,C),g(x,S),g(x,D),g(n,P),g(n,E),g(E,O),g(O,T),g(O,L),g(E,R),g(E,$),g(e,B),ot(I,e,null),g(e,j),ot(F,e,null),g(e,z),ot(N,e,null),g(e,V),ot(W,e,null),H=!0},p(t,e){(!H||64&e[0])&&q!==(q=t[6].avgAgeDays+"")&&A(s,q),(!H||64&e[0])&&U!==(U=t[6].peakHours.join(", ")+"")&&A(d,U),(!H||64&e[0])&&K!==(K=t[6].weekdayVsWeekend.weekday.percentage+"")&&A(_,K),(!H||64&e[0])&&Y!==(Y=t[6].weekdayVsWeekend.weekend.percentage+"")&&A(T,Y);const n={};2097152&e[2]&&(n.$$scope={dirty:e,ctx:t}),I.$set(n);const r={};2097152&e[2]&&(r.$$scope={dirty:e,ctx:t}),F.$set(r);const i={};2097152&e[2]&&(i.$$scope={dirty:e,ctx:t}),N.$set(i);const o={};64&e[0]|2097152&e[2]&&(o.$$scope={dirty:e,ctx:t}),W.$set(o)},i(t){H||(tt(I.$$.fragment,t),tt(F.$$.fragment,t),tt(N.$$.fragment,t),tt(W.$$.fragment,t),H=!0)},o(t){et(I.$$.fragment,t),et(F.$$.fragment,t),et(N.$$.fragment,t),et(W.$$.fragment,t),H=!1},d(t){t&&m(e),at(I),at(F),at(N),at(W)}}}function nh(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="hourlyChart"></canvas>',M(n,"class","h-48")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function rh(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="weekdayChart"></canvas>',M(n,"class","h-48")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function ih(e){let n;return{c(){n=y("div"),n.innerHTML='<canvas id="ageDistributionChart"></canvas>',M(n,"class","h-56")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function sh(t){let e,n,r,i,s,o,a,l,c,u,d=t[49].monthLabel+"",h=t[49].count+"";return{c(){e=y("div"),n=y("span"),r=v(d),i=w(),s=y("div"),o=y("div"),a=w(),l=y("span"),c=v(h),u=w(),M(n,"class","text-xs text-gray-500 w-16"),M(o,"class","h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full"),P(o,"width",(t[50]>0?t[49].count/t[50]*100:0)+"%"),M(s,"class","flex-1 bg-gray-100 rounded-full h-4 overflow-hidden"),M(l,"class","text-xs font-medium text-gray-700 w-10 text-right"),M(e,"class","flex items-center gap-3")},m(t,d){p(t,e,d),g(e,n),g(n,r),g(e,i),g(e,s),g(s,o),g(e,a),g(e,l),g(l,c),g(e,u)},p(t,e){64&e[0]&&d!==(d=t[49].monthLabel+"")&&A(r,d),64&e[0]&&P(o,"width",(t[50]>0?t[49].count/t[50]*100:0)+"%"),64&e[0]&&h!==(h=t[49].count+"")&&A(c,h)},d(t){t&&m(e)}}}function oh(t){let e,n=nt(t[6].monthlyCreationTrend),r=[];for(let e=0;e<n.length;e+=1)r[e]=sh(Qu(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){p(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(64&i[0]){let s;for(n=nt(t[6].monthlyCreationTrend),s=0;s<n.length;s+=1){const o=Qu(t,n,s);r[s]?r[s].p(o,i):(r[s]=sh(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function ah(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=nt(t[10]),C=[];for(let e=0;e<k.length;e+=1)C[e]=ad(od(t,k,e));const S=[cd,ld],A=[];function D(t,e){return t[0]?0:1}return u=D(t),d=A[u]=S[u](t),{c(){e=y("div"),n=y("div");for(let t=0;t<C.length;t+=1)C[t].c();r=w(),i=y("button"),s=y("span"),o=v(""),l=v("\n      Refresh"),c=w(),d.c(),M(s,"class",a="transform "+(t[0]?"animate-spin":"")),M(i,"class","ml-auto px-3 py-2 text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1"),i.disabled=t[0],M(n,"class","flex flex-wrap gap-2 border-b border-gray-200 pb-2"),M(e,"class","space-y-6")},m(a,d){p(a,e,d),g(e,n);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(n,null);g(n,r),g(n,i),g(i,s),g(s,o),g(i,l),g(e,c),A[u].m(e,null),h=!0,f||(x=_(i,"click",t[11]),f=!0)},p(t,o){if(5122&o[0]){let e;for(k=nt(t[10]),e=0;e<k.length;e+=1){const i=od(t,k,e);C[e]?C[e].p(i,o):(C[e]=ad(i),C[e].c(),C[e].m(n,r))}for(;e<C.length;e+=1)C[e].d(1);C.length=k.length}(!h||1&o[0]&&a!==(a="transform "+(t[0]?"animate-spin":"")))&&M(s,"class",a),(!h||1&o[0])&&(i.disabled=t[0]);let l=u;u=D(t),u===l?A[u].p(t,o):(G(),et(A[l],1,1,()=>{A[l]=null}),Z(),d=A[u],d?d.p(t,o):(d=A[u]=S[u](t),d.c()),tt(d,1),d.m(e,null))},i(t){h||(tt(d),h=!0)},o(t){et(d),h=!1},d(t){t&&m(e),b(C,t),A[u].d(),f=!1,x()}}}function lh(t){return t<1?"Today":1===t?"1 day ago":t<7?`${t} days ago`:t<30?`${Math.floor(t/7)} weeks ago`:t<365?`${Math.floor(t/30)} months ago`:`${Math.floor(t/365)} years ago`}function ch(t,e=!1){const n=e?100-t:t;return n>=70?"text-green-600":n>=40?"text-yellow-600":"text-red-600"}function uh(t,e,n){js.register(...ja);const r=I();let i=!0,s="health",o=null,a=null,l=null,c=null,u=null,d=null,h=null,f=null,g=null,p=null,m=null,b=!1,y=new Set;async function x(){n(0,i=!0);try{const[t,e,r,i,s]=await Promise.all([Hu(),qu(),Uu(),Ku(),Yu()]);n(2,o=t),n(3,a=e),n(4,l=r),n(5,c=i),n(6,u=s),setTimeout(()=>{v()},100)}catch(t){console.error("Error loading insights:",t)}finally{n(0,i=!1)}}function v(){!function(){const t=document.getElementById("categoryDonutChart");if(!t||!a?.categoryBreakdown)return;d&&d.destroy();const e=a.categoryBreakdown.slice(0,8),n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#6B7280"];d=new js(t,{type:"doughnut",data:{labels:e.map(t=>t.category),datasets:[{data:e.map(t=>t.count),backgroundColor:n,borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:8,font:{size:11}}},tooltip:{callbacks:{label:t=>`${t.label}: ${t.raw} (${e[t.dataIndex].percentage}%)`}}},onClick:(t,n)=>{if(n.length>0){const t=e[n[0].index].category;r("filterByCategory",{category:t})}}}})}(),function(){const t=document.getElementById("contentTypeChart");if(!t||!a?.contentTypeMix)return;h&&h.destroy();const e=a.contentTypeMix,n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#6B7280"];h=new js(t,{type:"bar",data:{labels:e.map(t=>t.type.charAt(0).toUpperCase()+t.type.slice(1)),datasets:[{label:"Bookmarks",data:e.map(t=>t.count),backgroundColor:n.slice(0,e.length),borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,grid:{display:!1}},y:{grid:{display:!1}}}}})}(),function(){const t=document.getElementById("ageDistributionChart");if(!t||!u?.ageDistribution)return;f&&f.destroy();const e=u.ageDistribution;f=new js(t,{type:"bar",data:{labels:e.map(t=>t.period),datasets:[{label:"Bookmarks",data:e.map(t=>t.count),backgroundColor:e.map((t,e)=>{const n=.3+.1*e;return`rgba(59, 130, 246, ${Math.min(n,.9)})`}),borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>`${t.raw} bookmarks (${e[t.dataIndex].percentage}%)`}}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#f3f4f6"}}}}})}(),function(){const t=document.getElementById("hourlyChart");if(!t||!u?.bookmarkingHours)return;g&&g.destroy();const e=u.bookmarkingHours,n=Math.max(...e.map(t=>t.count));g=new js(t,{type:"bar",data:{labels:e.map(t=>t.hour),datasets:[{label:"Bookmarks",data:e.map(t=>t.count),backgroundColor:e.map(t=>`rgba(16, 185, 129, ${.2+.7*(t.count/n)})`),borderRadius:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:t=>`${t[0].label}:00 - ${t[0].label}:59`,label:t=>`${t.raw} bookmarks saved`}}},scales:{x:{grid:{display:!1},ticks:{callback:(t,e)=>e%3==0?`${e}h`:"",maxRotation:0}},y:{beginAtZero:!0,grid:{color:"#f3f4f6"}}}}})}(),function(){const t=document.getElementById("weekdayChart");if(!t||!u?.dayOfWeekDistribution)return;p&&p.destroy();const e=u.dayOfWeekDistribution,n=["#EF4444","#3B82F6","#3B82F6","#3B82F6","#3B82F6","#3B82F6","#EF4444"];p=new js(t,{type:"bar",data:{labels:e.map(t=>t.dayName.slice(0,3)),datasets:[{label:"Bookmarks",data:e.map(t=>t.count),backgroundColor:n,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"#f3f4f6"}}}}})}(),function(){const t=document.getElementById("domainReliabilityChart");if(!t||!c?.reliabilityScores)return;m&&m.destroy();const e=c.reliabilityScores.slice(0,10);m=new js(t,{type:"bar",data:{labels:e.map(t=>t.domain.length>20?t.domain.slice(0,20)+"...":t.domain),datasets:[{label:"Reliability %",data:e.map(t=>t.reliabilityScore),backgroundColor:e.map(t=>t.reliabilityScore>=80?"#10B981":t.reliabilityScore>=50?"#F59E0B":"#EF4444"),borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>`${t.raw}% alive (${e[t.dataIndex].dead} dead of ${e[t.dataIndex].checked})`}}},scales:{x:{beginAtZero:!0,max:100,grid:{color:"#f3f4f6"},ticks:{callback:t=>t+"%"}},y:{grid:{display:!1}}},onClick:(t,n)=>{if(n.length>0){const t=e[n[0].index].domain;r("filterByDomain",{domain:t})}}}})}()}function w(t){y.has(t)?y.delete(t):y.add(t),n(8,y)}B(async()=>{await x()});return[i,s,o,a,l,c,u,b,y,r,[{id:"health",label:"Health",icon:""},{id:"content",label:"Content",icon:""},{id:"actions",label:"Actions",icon:""},{id:"domains",label:"Domains",icon:""},{id:"time",label:"Time",icon:""}],x,v,async function(){n(7,b=!0);try{const t=await Uu();n(4,l={...l,rediscoveryFeed:t.rediscoveryFeed})}finally{n(7,b=!1)}},w,function(){l?.cleanupCandidates&&(l.cleanupCandidates.forEach(t=>y.add(t.id)),n(8,y))},function(){y.clear(),n(8,y)},function(){const t=Array.from(y);r("deleteBookmarks",{ids:t}),y.clear(),n(8,y)},t=>{n(1,s=t.id),setTimeout(v,100)},()=>r("filterByAccessed",{accessed:!0}),t=>"Enter"===t.key&&r("filterByAccessed",{accessed:!0}),()=>r("filterByStale"),t=>"Enter"===t.key&&r("filterByStale"),()=>r("filterByDead"),t=>"Enter"===t.key&&r("filterByDead"),()=>r("filterByUnenriched"),t=>"Enter"===t.key&&r("filterByUnenriched"),()=>r("filterByUncategorized"),t=>"Enter"===t.key&&r("filterByUncategorized"),()=>r("showDuplicates"),t=>"Enter"===t.key&&r("showDuplicates"),t=>r("searchQuery",{query:t.keyword}),t=>{return e=t.url,void window.open(e,"_blank");var e},t=>w(t.id),t=>r("filterByDomain",{domain:t.domain}),t=>r("filterByDomain",{domain:t.domain}),t=>r("filterByDomain",{domain:t.domain})]}class dh extends ut{constructor(t){super(),ct(this,t,uh,ah,s,{},null,[-1,-1,-1])}}
/**!
 * FlexSearch.js v0.8.212 (Bundle/Module)
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/flexsearch
 */var hh;function fh(t,e,n){const r=typeof n,i=typeof t;if("undefined"!==r){if("undefined"!==i){if(n){if("function"===i&&r===i)return function(e){return t(n(e))};if((e=t.constructor)===n.constructor){if(e===Array)return n.concat(t);if(e===Map){var s=new Map(n);for(var o of t)s.set(o[0],o[1]);return s}if(e===Set){for(s of(o=new Set(n),t.values()))o.add(s);return o}}}return t}return n}return"undefined"===i?e:t}function gh(t,e){return void 0===t?e:t}function ph(){return Object.create(null)}function mh(t){return"string"==typeof t}function bh(t){return"object"==typeof t}function yh(t,e){if(mh(e))t=t[e];else for(let n=0;t&&n<e.length;n++)t=t[e[n]];return t}const xh=/[^\p{L}\p{N}]+/u,vh=/(\d{3})/g,wh=/(\D)(\d{3})/g,kh=/(\d{3})(\D)/g,_h=/[\u0300-\u036f]/g;function Ch(t={}){if(!this||this.constructor!==Ch)return new Ch(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}function Mh(t){t.F=null,t.B.clear(),t.D.clear()}function Sh(t,e,n){n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):n=t),n&&(t=n.query||t,e=n.limit||e);let r=""+(e||0);n&&(r+=(n.offset||0)+!!n.context+!!n.suggest+(!1!==n.resolve)+(n.resolution||this.resolution)+(n.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new Ah);let i=this.cache.get(t+r);if(!i){const s=n&&n.cache;s&&(n.cache=!1),i=this.search(t,e,n),s&&(n.cache=s),this.cache.set(t+r,i)}return i}function Ah(t){this.limit=t&&!0!==t?t:1e3,this.cache=new Map,this.h=""}(hh=Ch.prototype).assign=function(t){this.normalize=fh(t.normalize,!0,this.normalize);let e,n=t.include,r=n||t.exclude||t.split;if(r||""===r){if("object"==typeof r&&r.constructor!==RegExp){let t="";e=!n,n||(t+="\\p{Z}"),r.letter&&(t+="\\p{L}"),r.number&&(t+="\\p{N}",e=!!n),r.symbol&&(t+="\\p{S}"),r.punctuation&&(t+="\\p{P}"),r.control&&(t+="\\p{C}"),(r=r.char)&&(t+="object"==typeof r?r.join(""):r);try{this.split=new RegExp("["+(n?"^":"")+t+"]+","u")}catch(t){this.split=/\s+/}}else this.split=r,e=!1===r||"a1a".split(r).length<2;this.numeric=fh(t.numeric,e)}else{try{this.split=fh(this.split,xh)}catch(t){this.split=/\s+/}this.numeric=fh(t.numeric,fh(this.numeric,!0))}if(this.prepare=fh(t.prepare,null,this.prepare),this.finalize=fh(t.finalize,null,this.finalize),r=t.filter,this.filter="function"==typeof r?r:fh(r&&new Set(r),null,this.filter),this.dedupe=fh(t.dedupe,!0,this.dedupe),this.matcher=fh((r=t.matcher)&&new Map(r),null,this.matcher),this.mapper=fh((r=t.mapper)&&new Map(r),null,this.mapper),this.stemmer=fh((r=t.stemmer)&&new Map(r),null,this.stemmer),this.replacer=fh(t.replacer,null,this.replacer),this.minlength=fh(t.minlength,1,this.minlength),this.maxlength=fh(t.maxlength,1024,this.maxlength),this.rtl=fh(t.rtl,!1,this.rtl),(this.cache=r=fh(t.cache,!0,this.cache))&&(this.F=null,this.L="number"==typeof r?r:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const t of this.matcher.keys())this.h+=(this.h?"|":"")+t;if(this.stemmer)for(const t of this.stemmer.keys())this.A+=(this.A?"|":"")+t;return this},hh.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&Mh(this),this},hh.addFilter=function(t){return"function"==typeof t?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&Mh(this),this},hh.addMapper=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length>1?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&Mh(this),this)},hh.addMatcher=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&Mh(this),this)},hh.addReplacer=function(t,e){return"string"==typeof t?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&Mh(this),this)},hh.encode=function(t,e){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(Mh,50,this);this.normalize&&(t="function"==typeof this.normalize?this.normalize(t):_h?t.normalize("NFKD").replace(_h,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(wh,"$1 $2").replace(kh,"$1 $2").replace(vh,"$1 "));const n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let r,i,s=[],o=ph(),a=this.split||""===this.split?t.split(this.split):[t];for(let t,c,u=0;u<a.length;u++)if((t=c=a[u])&&!(t.length<this.minlength||t.length>this.maxlength)){if(e){if(o[t])continue;o[t]=1}else{if(r===t)continue;r=t}if(n)s.push(t);else if(!this.filter||("function"==typeof this.filter?this.filter(t):!this.filter.has(t))){if(this.cache&&t.length<=this.I)if(this.F){var l=this.D.get(t);if(l||""===l){l&&s.push(l);continue}}else this.F=setTimeout(Mh,50,this);if(this.stemmer){let e;for(this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));e!==t&&t.length>2;)e=t,t=t.replace(this.K,t=>this.stemmer.get(t))}if(t&&(this.mapper||this.dedupe&&t.length>1)){l="";for(let e,n,r=0,i="";r<t.length;r++)e=t.charAt(r),e===i&&this.dedupe||((n=this.mapper&&this.mapper.get(e))||""===n?n===i&&this.dedupe||!(i=n)||(l+=n):l+=i=e);t=l}if(this.matcher&&t.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),t=t.replace(this.J,t=>this.matcher.get(t))),t&&this.replacer)for(l=0;t&&l<this.replacer.length;l+=2)t=t.replace(this.replacer[l],this.replacer[l+1]);if(this.cache&&c.length<=this.I&&(this.D.set(c,t),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),t){if(t!==c)if(e){if(o[t])continue;o[t]=1}else{if(i===t)continue;i=t}s.push(t)}}}return this.finalize&&(s=this.finalize(s)||s),this.cache&&t.length<=this.H&&(this.B.set(t,s),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),s},Ah.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},Ah.prototype.get=function(t){const e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e},Ah.prototype.remove=function(t){for(const e of this.cache){const n=e[0];e[1].includes(t)&&this.cache.delete(n)}},Ah.prototype.clear=function(){this.cache.clear(),this.h=""};const Dh={normalize:!1,numeric:!1,dedupe:!1},Ph={},Eh=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),Oh=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Th=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],Lh={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,"":2,d:3,t:3,l:4,m:5,n:5,r:6};var Rh={Exact:Dh,Default:Ph,Normalize:Ph,LatinBalance:{mapper:Eh},LatinAdvanced:{mapper:Eh,matcher:Oh,replacer:Th},LatinExtra:{mapper:Eh,replacer:Th.concat([/(?!^)[aeo]/g,""]),matcher:Oh},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let n=0;n<t.length;n++){var e=t[n];let r=e.charAt(0),i=Lh[r];for(let t,n=1;n<e.length&&(t=e.charAt(n),"h"===t||"w"===t||!(t=Lh[t])||t===i||(r+=t,i=t,4!==r.length));n++);t[n]=r}}},CJK:{split:""},LatinExact:Dh,LatinDefault:Ph,LatinSimple:Ph};function $h(t,e,n,r){let i=[];for(let s,o=0;o<t.index.length;o++)if(s=t.index[o],e>=s.length)e-=s.length;else{const o=(e=s[r?"splice":"slice"](e,n)).length;if(o&&(i=i.length?i.concat(e):e,n-=o,r&&(t.length-=o),!n))break;e=0}return i}function Bh(t){if(!this||this.constructor!==Bh)return new Bh(t);this.index=t?[t]:[],this.length=t?t.length:0;const e=this;return new Proxy([],{get:(t,n)=>"length"===n?e.length:"push"===n?function(t){e.index[e.index.length-1].push(t),e.length++}:"pop"===n?function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()}:"indexOf"===n?function(t){let n=0;for(let r,i,s=0;s<e.index.length;s++){if(r=e.index[s],i=r.indexOf(t),i>=0)return n+i;n+=r.length}return-1}:"includes"===n?function(t){for(let n=0;n<e.index.length;n++)if(e.index[n].includes(t))return!0;return!1}:"slice"===n?function(t,n){return $h(e,t||0,n||e.length,!1)}:"splice"===n?function(t,n){return $h(e,t||0,n||e.length,!0)}:"constructor"===n?Array:"symbol"!=typeof n?(t=e.index[n/2**31|0])&&t[n]:void 0,set:(t,n,r)=>(t=n/2**31|0,(e.index[t]||(e.index[t]=[]))[n]=r,e.length++,!0)})}function Ih(t=8){if(!this||this.constructor!==Ih)return new Ih(t);this.index=ph(),this.h=[],this.size=0,t>32?(this.B=zh,this.A=BigInt(t)):(this.B=Fh,this.A=t)}function jh(t=8){if(!this||this.constructor!==jh)return new jh(t);this.index=ph(),this.h=[],this.size=0,t>32?(this.B=zh,this.A=BigInt(t)):(this.B=Fh,this.A=t)}function Fh(t){let e=2**this.A-1;if("number"==typeof t)return t&e;let n=0,r=this.A+1;for(let i=0;i<t.length;i++)n=(n*r^t.charCodeAt(i))&e;return 32===this.A?n+2**31:n}function zh(t){let e=BigInt(2)**this.A-BigInt(1);var n=typeof t;if("bigint"===n)return t&e;if("number"===n)return BigInt(t)&e;n=BigInt(0);let r=this.A+BigInt(1);for(let i=0;i<t.length;i++)n=(n*r^BigInt(t.charCodeAt(i)))&e;return n}let Nh,Vh,Wh,Hh,qh;async function Uh(t){var e=(t=t.data).task;const n=t.id;let r=t.args;if("init"===e)Vh=t.options||{},(e=t.factory)?(Function("return "+e)()(self),Nh=new self.FlexSearch.Index(Vh),delete self.FlexSearch):Nh=new If(Vh),postMessage({id:n});else{let i;"export"===e&&(r[1]?(r[0]=Vh.export,r[2]=0,r[3]=1):r=null),"import"===e?r[0]&&(t=await Vh.import.call(Nh,r[0]),Nh.import(r[0],t)):((i=r&&Nh[e].apply(Nh,r))&&i.then&&(i=await i),i&&i.await&&(i=await i.await),"search"===e&&i.result&&(i=i.result)),postMessage("search"===e?{id:n,msg:i}:{id:n})}}function Kh(t){Qh.call(t,"add"),Qh.call(t,"append"),Qh.call(t,"search"),Qh.call(t,"update"),Qh.call(t,"remove"),Qh.call(t,"searchCache")}function Yh(){Wh=qh=0}function Qh(t){this[t+"Async"]=function(){const e=arguments;var n=e[e.length-1];let r;if("function"==typeof n&&(r=n,delete e[e.length-1]),Wh?qh||(qh=Date.now()-Hh>=this.priority*this.priority*3):(Wh=setTimeout(Yh,0),Hh=Date.now()),qh){const n=this;return new Promise(r=>{setTimeout(function(){r(n[t+"Async"].apply(n,e))},0)})}const i=this[t].apply(this,e);return n=i.then?i:new Promise(t=>t(i)),r&&n.then(r),n}}Bh.prototype.clear=function(){this.index.length=0},Bh.prototype.push=function(){},Ih.prototype.get=function(t){const e=this.index[this.B(t)];return e&&e.get(t)},Ih.prototype.set=function(t,e){var n=this.B(t);let r=this.index[n];r?(n=r.size,r.set(t,e),(n-=r.size)&&this.size++):(this.index[n]=r=new Map([[t,e]]),this.h.push(r),this.size++)},jh.prototype.add=function(t){var e=this.B(t);let n=this.index[e];n?(e=n.size,n.add(t),(e-=n.size)&&this.size++):(this.index[e]=n=new Set([t]),this.h.push(n),this.size++)},(hh=Ih.prototype).has=jh.prototype.has=function(t){const e=this.index[this.B(t)];return e&&e.has(t)},hh.delete=jh.prototype.delete=function(t){const e=this.index[this.B(t)];e&&e.delete(t)&&this.size--},hh.clear=jh.prototype.clear=function(){this.index=ph(),this.h=[],this.size=0},hh.values=jh.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e},hh.keys=jh.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e},hh.entries=jh.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};let Xh=0;function Jh(t={},e){function n(n){function o(t){const e=(t=t.data||t).id,n=e&&s.h[e];n&&(n(t.msg),delete s.h[e])}if(this.worker=n,this.h=ph(),this.worker)return i?this.worker.on("message",o):this.worker.onmessage=o,t.config?new Promise(function(e){Xh>1e9&&(Xh=0),s.h[++Xh]=function(){e(s)},s.worker.postMessage({id:Xh,task:"init",factory:r,options:t})}):(this.priority=t.priority||4,this.encoder=e||null,this.worker.postMessage({task:"init",factory:r,options:t}),this)}if(!this||this.constructor!==Jh)return new Jh(t);let r="undefined"!=typeof self?self._factory:"undefined"!=typeof window?window._factory:null;r&&(r=r.toString());const i="undefined"==typeof window,s=this,o=function(t,e,n){return e?"undefined"!=typeof module?new(require("worker_threads").Worker)(__dirname+"/worker/node.js"):Promise.resolve().then(function(){return Lm}).then(function(t){return new t.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Uh.toString()],{type:"text/javascript"}))):new window.Worker("string"==typeof n?n:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}(r,i,t.worker);return o.then?o.then(function(t){return n.call(s,t)}):n.call(this,o)}function Gh(t){Jh.prototype[t]=function(){const e=this,n=[].slice.call(arguments);var r=n[n.length-1];let i;return"function"==typeof r&&(i=r,n.pop()),r=new Promise(function(r){"export"===t&&"function"==typeof n[0]&&(n[0]=null),Xh>1e9&&(Xh=0),e.h[++Xh]=r,e.worker.postMessage({task:t,id:Xh,args:n})}),i?(r.then(i),this):r}}function Zh(t,e,n,r,i,s){if(t=t[i],r===n.length-1)e[i]=s||t;else if(t)if(t.constructor===Array)for(e=e[i]=Array(t.length),i=0;i<t.length;i++)Zh(t,e,n,r,i);else e=e[i]||(e[i]=ph()),i=n[++r],Zh(t,e,n,r,i)}function tf(t,e,n,r,i,s,o,a){if(t=t[o])if(r===e.length-1){if(t.constructor===Array){if(n[r]){for(e=0;e<t.length;e++)i.add(s,t[e],!0,!0);return}t=t.join(" ")}i.add(s,t,a,!0)}else if(t.constructor===Array)for(o=0;o<t.length;o++)tf(t,e,n,r,i,s,o,a);else o=e[++r],tf(t,e,n,r,i,s,o,a)}function ef(t,e,n,r){if(!t.length)return t;if(1===t.length)return t=t[0],t=n||t.length>e?t.slice(n,n+e):t,r?bf.call(this,t):t;let i=[];for(let s,o,a=0;a<t.length;a++)if((s=t[a])&&(o=s.length)){if(n){if(n>=o){n-=o;continue}s=s.slice(n,n+e),o=s.length,n=0}if(o>e&&(s=s.slice(0,e),o=e),!i.length&&o>=e)return r?bf.call(this,s):s;if(i.push(s),!(e-=o))break}return i=i.length>1?[].concat.apply([],i):i[0],r?bf.call(this,i):i}function nf(t,e,n,r){var i=r[0];if(i[0]&&i[0].query)return t[e].apply(t,i);if(!("and"!==e&&"not"!==e||t.result.length||t.await||i.suggest))return r.length>1&&(i=r[r.length-1]),(r=i.resolve)?t.await||t.result:t;let s,o,a,l,c,u=[],d=0,h=0;for(e=0;e<r.length;e++)if(i=r[e]){var f=void 0;if(i.constructor===uf)f=i.await||i.result;else if(i.then||i.constructor===Array)f=i;else{d=i.limit||0,h=i.offset||0,a=i.suggest,o=i.resolve,s=((l=i.highlight||t.highlight)||i.enrich)&&o,f=i.queue;let n=i.async||f,r=i.index,g=i.query;if(r?t.index||(t.index=r):r=t.index,g||i.tag){const s=i.field||i.pluck;if(s&&(!g||t.query&&!l||(t.query=g,t.field=s,t.highlight=l),r=r.index.get(s)),f&&(c||t.await)){let s;c=1;const o=t.C.length,a=new Promise(function(t){s=t});(function(e,r){a.h=function(){r.index=null,r.resolve=!1;let i=n?e.searchAsync(r):e.search(r);return i.then?i.then(function(e){return t.C[o]=e=e.result||e,s(e),e}):(i=i.result||i,s(i),i)}})(r,Object.assign({},i)),t.C.push(a),u[e]=a;continue}i.resolve=!1,i.index=null,f=n?r.searchAsync(i):r.search(i),i.resolve=o,i.index=r}else if(i.and)f=rf(i,"and",r);else if(i.or)f=rf(i,"or",r);else if(i.not)f=rf(i,"not",r);else{if(!i.xor)continue;f=rf(i,"xor",r)}}f.await?(c=1,f=f.await):f.then?(c=1,f=f.then(function(t){return t.result||t})):f=f.result||f,u[e]=f}if(c&&!t.await&&(t.await=new Promise(function(e){t.return=e})),c){const e=Promise.all(u).then(function(r){for(let i=0;i<t.C.length;i++)if(t.C[i]===e){t.C[i]=function(){return n.call(t,r,d,h,s,o,a,l)};break}df(t)});t.C.push(e)}else{if(!t.await)return n.call(t,u,d,h,s,o,a,l);t.C.push(function(){return n.call(t,u,d,h,s,o,a,l)})}return o?t.await||t.result:t}function rf(t,e,n){const r=(t=t[e])[0]||t;return r.index||(r.index=n),n=new uf(r),t.length>1&&(n=n[e].apply(n,t.slice(1))),n}function sf(t,e,n,r,i,s,o){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=ff(t,e,n,!1,this.h),n=0)),i&&(this.await=null),i?this.resolve(e,n,r,o):this}function of(t,e,n,r,i,s,o){if(!s&&!this.result.length)return i?this.result:this;let a;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let r=0;for(let e,n,i=0;i<t.length;i++)if((e=t[i])&&(n=e.length))r<n&&(r=n);else if(!s){r=0;break}r?(this.result=hf(t,r,e,n,s,this.h,i),a=!0):this.result=[]}else s||(this.result=t);return i&&(this.await=null),i?this.resolve(e,n,r,o,a):this}function af(t,e,n,r,i,s,o){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{s=n;var a=this.h;const r=[],o=ph();let l=0;for(let e,n=0;n<t.length;n++)if(e=t[n]){l<e.length&&(l=e.length);for(let t,n=0;n<e.length;n++)if(t=e[n])for(let e,n=0;n<t.length;n++)e=t[n],o[e]=o[e]?2:1}for(let n,c=0,u=0;c<l;c++)for(let l,d=0;d<t.length;d++)if((l=t[d])&&(n=l[c]))for(let l,h=0;h<n.length;h++)if(l=n[h],1===o[l])if(s)s--;else if(i){if(r.push(l),r.length===e){t=r;break t}}else{const n=c+(d?a:0);if(r[n]||(r[n]=[]),r[n].push(l),++u===e){t=r;break t}}t=r}this.result=t,a=!0}else s||(this.result=t);return i&&(this.await=null),i?this.resolve(e,n,r,o,a):this}function lf(t,e,n,r,i,s,o){if(!s&&!this.result.length)return i?this.result:this;if(t.length&&this.result.length){t:{s=n;var a=[];t=new Set(t.flat().flat());for(let n,r=0,o=0;r<this.result.length;r++)if(n=this.result[r])for(let l,c=0;c<n.length;c++)if(l=n[c],!t.has(l))if(s)s--;else if(i){if(a.push(l),a.length===e){t=a;break t}}else if(a[r]||(a[r]=[]),a[r].push(l),++o===e){t=a;break t}t=a}this.result=t,a=!0}return i&&(this.await=null),i?this.resolve(e,n,r,o,a):this}function cf(t,e,n,r,i){let s,o,a;"string"==typeof i?(s=i,i=""):s=i.template,o=s.indexOf("$1"),a=s.substring(o+2),o=s.substring(0,o);let l=i&&i.boundary,c=!i||!1!==i.clip,u=i&&i.merge&&a&&o&&new RegExp(a+" "+o,"g");var d=0;if("object"==typeof(i=i&&i.ellipsis)){var h=i.template;d=h.length-2,i=i.pattern}let f,g;"string"!=typeof i&&(i=!1===i?"":"..."),d&&(i=h.replace("$1",i)),h=i.length-d,"object"==typeof l&&(f=l.before,0===f&&(f=-1),g=l.after,0===g&&(g=-1),l=l.total||9e5),d=new Map;for(let L,R,$,B=0;B<e.length;B++){let I;if(r)I=e,$=r;else{var p=e[B];if($=p.field,!$)continue;I=p.result}R=n.get($),L=R.encoder,"string"!=typeof(p=d.get(L))&&(p=L.encode(t),d.set(L,p));for(let t=0;t<I.length;t++){var m=I[t].doc;if(!m)continue;if(!(m=yh(m,$)))continue;var b=m.trim().split(/\s+/);if(!b.length)continue;m="";var y=[];let e=[];for(var x=-1,v=-1,w=0,k=0;k<b.length;k++){var _=b[k],C=L.encode(_);let t;if((C=C.length>1?C.join(" "):C[0])&&_){for(var M=_.length,S=(L.split?_.replace(L.split,""):_).length-C.length,A="",D=0,P=0;P<p.length;P++){var E=p[P];if(E){var O=E.length;O+=S<0?0:S,D&&O<=D||(E=C.indexOf(E))>-1&&(A=(E?_.substring(0,E):"")+o+_.substring(E,E+O)+a+(E+O<M?_.substring(E+O):""),D=O,t=!0)}}A&&(l&&(x<0&&(x=m.length+(m?1:0)),v=m.length+(m?1:0)+A.length,w+=M,e.push(y.length),y.push({match:A})),m+=(m?" ":"")+A)}if(t){if(l&&w>=l)break}else m+=(m?" ":"")+(_=b[k]),l&&y.push({text:_})}if(w=e.length*(s.length-2),f||g||l&&m.length-w>l)if(k=v-x,f>0&&(k+=f),g>0&&(k+=g),k<=(w=l+w-2*h))b=f?x-(f>0?f:0):x-((w-k)/2|0),y=g?v+(g>0?g:0):b+w,c||(b>0&&" "!==m.charAt(b)&&" "!==m.charAt(b-1)&&((b=m.indexOf(" ",b))<0&&(b=0)),y<m.length&&" "!==m.charAt(y-1)&&" "!==m.charAt(y)&&((y=m.lastIndexOf(" ",y))<v?y=v:++y)),m=(b?i:"")+m.substring(b,y)+(y<m.length?i:"");else{for(v=[],x={},w={},k={},_={},C={},A=S=M=0,P=D=1;;){var T=void 0;for(let t,n=0;n<e.length;n++){if(t=e[n],A)if(S!==A){if(k[n+1])continue;if(t+=A,x[t]){M-=h,w[n+1]=1,k[n+1]=1;continue}if(t>=y.length-1){if(t>=y.length){k[n+1]=1,t>=b.length&&(w[n+1]=1);continue}M-=h}if(m=y[t].text,O=g&&C[n]){if(!(O>0)){k[n+1]=1;continue}if(m.length>O){if(k[n+1]=1,!c)continue;m=m.substring(0,O)}(O-=m.length)||(O=-1),C[n]=O}if(M+m.length+1<=l)m=" "+m,v[n]+=m;else{if(!c){k[n+1]=1;continue}(T=l-M-1)>0&&(m=" "+m.substring(0,T),v[n]+=m),k[n+1]=1}}else{if(k[n])continue;if(t-=S,x[t]){M-=h,k[n]=1,w[n]=1;continue}if(t<=0){if(t<0){k[n]=1,w[n]=1;continue}M-=h}if(m=y[t].text,O=f&&_[n]){if(!(O>0)){k[n]=1;continue}if(m.length>O){if(k[n]=1,!c)continue;m=m.substring(m.length-O)}(O-=m.length)||(O=-1),_[n]=O}if(M+m.length+1<=l)m+=" ",v[n]=m+v[n];else{if(!c){k[n]=1;continue}(T=m.length+1-(l-M))>=0&&T<m.length&&(m=m.substring(T)+" ",v[n]=m+v[n]),k[n]=1}}else{let e;if(m=y[t].match,f&&(_[n]=f),g&&(C[n]=g),n&&M++,t?!n&&h&&(M+=h):(w[n]=1,k[n]=1),t>=b.length-1||t<y.length-1&&y[t+1].match?e=1:h&&(M+=h),M-=s.length-2,n&&!(M+m.length<=l)){T=D=P=w[n]=0;break}v[n]=m,e&&(w[n+1]=1,k[n+1]=1)}M+=m.length,T=x[t]=1}if(T)S===A?A++:S++;else{if(S===A?D=0:P=0,!D&&!P)break;D?A=++S:A++}}m="";for(let t,e=0;e<v.length;e++)t=(w[e]?e?" ":"":(e&&!i?" ":"")+i)+v[e],m+=t;i&&!w[v.length]&&(m+=i)}u&&(m=m.replace(u," ")),I[t].highlight=m}if(r)break}return e}function uf(t,e){if(!this||this.constructor!==uf)return new uf(t,e);let n,r,i,s,o,a,l=0;if(t&&t.index){const n=t;if(e=n.index,l=n.boost||0,r=n.query){i=n.field||n.pluck,s=n.highlight;const r=n.resolve;t=n.async||n.queue,n.resolve=!1,n.index=null,t=t?e.searchAsync(n):e.search(n),n.resolve=r,n.index=e,t=t.result||t}else t=[]}if(t&&t.then){const e=this;n=[t=t.then(function(t){e.C[0]=e.result=t.result||t,df(e)})],t=[],o=new Promise(function(t){a=t})}this.index=e||null,this.result=t||[],this.h=l,this.C=n||[],this.await=o||null,this.return=a||null,this.highlight=s||null,this.query=r||"",this.field=i||""}function df(t,e){let n=t.result;var r=t.await;t.await=null;for(let e,i=0;i<t.C.length;i++)if(e=t.C[i])if("function"==typeof e)n=e(),t.C[i]=n=n.result||n,i--;else if(e.h)n=e.h(),t.C[i]=n=n.result||n,i--;else if(e.then)return t.await=r;return r=t.return,t.C=[],t.return=null,e||r(n),n}function hf(t,e,n,r,i,s,o){const a=t.length;let l,c,u=[];l=ph();for(let d,h,f,g,p=0;p<e;p++)for(let e=0;e<a;e++)if(f=t[e],p<f.length&&(d=f[p]))for(let t=0;t<d.length;t++){if(h=d[t],(c=l[h])?l[h]++:(c=0,l[h]=1),g=u[c]||(u[c]=[]),!o){let t=p+(e||!i?0:s||0);g=g[t]||(g[t]=[])}if(g.push(h),o&&n&&c===a-1&&g.length-r===n)return r?g.slice(r):g}if(t=u.length)if(i)u=u.length>1?ff(u,n,r,o,s):(u=u[0])&&n&&u.length>n||r?u.slice(r,n+r):u;else{if(t<a)return[];if(u=u[t-1],n||r)if(o)(u.length>n||r)&&(u=u.slice(r,n+r));else{i=[];for(let t,e=0;e<u.length;e++)if(t=u[e])if(r&&t.length>r)r-=t.length;else if((n&&t.length>n||r)&&(t=t.slice(r,n+r),n-=t.length,r&&(r-=t.length)),i.push(t),!n)break;u=i}}return u}function ff(t,e,n,r,i){const s=[],o=ph();let a;var l=t.length;let c;if(r){for(i=l-1;i>=0;i--)if(c=(r=t[i])&&r.length)for(l=0;l<c;l++)if(a=r[l],!o[a])if(o[a]=1,n)n--;else if(s.push(a),s.length===e)return s}else for(let u,d=l-1,h=0;d>=0;d--){u=t[d];for(let t=0;t<u.length;t++)if(c=(r=u[t])&&r.length)for(let u=0;u<c;u++)if(a=r[u],!o[a])if(o[a]=1,n)n--;else{let n=(t+(d<l-1&&i||0))/(d+1)|0;if((s[n]||(s[n]=[])).push(a),++h===e)return s}}return s}function gf(t,e,n,r,i){const s=ph(),o=[];for(let t,n=0;n<e.length;n++){t=e[n];for(let e=0;e<t.length;e++)s[t[e]]=1}if(i){for(let e,i=0;i<t.length;i++)if(e=t[i],s[e])if(r)r--;else if(o.push(e),s[e]=0,n&&0===--n)break}else for(let n,r,i=0;i<t.result.length;i++)for(n=t.result[i],e=0;e<n.length;e++)r=n[e],s[r]&&((o[i]||(o[i]=[])).push(r),s[r]=0);return o}function pf(t){const e=[],n=ph(),r=ph();for(let i,s,o,a,l,c,u,d=0;d<t.length;d++){i=t[d],s=i.field,o=i.result;for(let t=0;t<o.length;t++)l=o[t],"object"!=typeof l?l={id:a=l}:a=l.id,(c=n[a])?c.push(s):(l.field=n[a]=[s],e.push(l)),(u=l.highlight)&&(c=r[a],c||(r[a]=c={},l.highlight=c),c[s]=u)}return e}function mf(t,e,n,r,i){return(t=this.tag.get(t))&&(t=t.get(e))?((e=t.length-r)>0&&((n&&e>n||r)&&(t=t.slice(r,r+n)),i&&(t=bf.call(this,t))),t):[]}function bf(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);const e=Array(t.length);for(let n,r=0;r<t.length;r++)n=t[r],e[r]={id:n,doc:this.store.get(n)};return e}function yf(t){if(!this||this.constructor!==yf)return new yf(t);const e=t.document||t.doc||t;let n,r;if(this.B=[],this.field=[],this.D=[],this.key=(n=e.key||e.id)&&vf(n,this.D)||"id",(r=t.keystore||0)&&(this.keystore=r),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?r?new jh(r):new Set:r?new Ih(r):new Map,this.h=(n=e.store||null)&&n&&!0!==n&&[],this.store=n?r?new Ih(r):new Map:null,this.cache=(n=t.cache||null)&&new Ah(n),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=xf.call(this,t,e),this.tag=null,(n=e.tag)&&("string"==typeof n&&(n=[n]),n.length)){this.tag=new Map,this.A=[],this.F=[];for(let t,e,r=0;r<n.length;r++){if(t=n[r],e=t.field||t,!e)throw Error("The tag field from the document descriptor is undefined.");t.custom?this.A[r]=t.custom:(this.A[r]=vf(e,this.D),t.filter&&("string"==typeof this.A[r]&&(this.A[r]=new String(this.A[r])),this.A[r].G=t.filter)),this.F[r]=e,this.tag.set(e,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const e of this.index.values())e.then&&t.push(e);if(t.length){const e=this;return Promise.all(t).then(function(t){let n=0;for(const r of e.index.entries()){const i=r[0];let s=r[1];s.then&&(s=t[n],e.index.set(i,s),n++)}return e})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}function xf(t,e){const n=new Map;let r=e.index||e.field||e;mh(r)&&(r=[r]);for(let e,s,o=0;o<r.length;o++){if(e=r[o],mh(e)||(s=e,e=e.field),s=bh(s)?Object.assign({},t,s):t,this.worker){var i=void 0;i=new Jh(s,i=(i=s.encoder)&&i.encode?i:new Ch("string"==typeof i?Rh[i]:i||{})),n.set(e,i)}this.worker||n.set(e,new If(s,this.reg)),s.custom?this.B[o]=s.custom:(this.B[o]=vf(e,this.D),s.filter&&("string"==typeof this.B[o]&&(this.B[o]=new String(this.B[o])),this.B[o].G=s.filter)),this.field[o]=e}if(this.h){mh(t=e.store)&&(t=[t]);for(let e,n,r=0;r<t.length;r++)e=t[r],n=e.field||e,e.custom?(this.h[r]=e.custom,e.custom.O=n):(this.h[r]=vf(n,this.D),e.filter&&("string"==typeof this.h[r]&&(this.h[r]=new String(this.h[r])),this.h[r].G=e.filter))}return n}function vf(t,e){const n=t.split(":");let r=0;for(let i=0;i<n.length;i++)"]"===(t=n[i])[t.length-1]&&(t=t.substring(0,t.length-2))&&(e[r]=!0),t&&(n[r++]=t);return r<n.length&&(n.length=r),r>1?n:n[0]}function wf(t,e=0){let n=[],r=[];e&&(e=25e4/e*5e3|0);for(const i of t.entries())r.push(i),r.length===e&&(n.push(r),r=[]);return r.length&&n.push(r),n}function kf(t,e){e||(e=new Map);for(let n,r=0;r<t.length;r++)n=t[r],e.set(n[0],n[1]);return e}function _f(t,e=0){let n=[],r=[];e&&(e=25e4/e*1e3|0);for(const i of t.entries())r.push([i[0],wf(i[1])[0]||[]]),r.length===e&&(n.push(r),r=[]);return r.length&&n.push(r),n}function Cf(t,e){e||(e=new Map);for(let n,r,i=0;i<t.length;i++)n=t[i],r=e.get(n[0]),e.set(n[0],kf(n[1],r));return e}function Mf(t){let e=[],n=[];for(const r of t.keys())n.push(r),25e4===n.length&&(e.push(n),n=[]);return n.length&&e.push(n),e}function Sf(t,e){e||(e=new Set);for(let n=0;n<t.length;n++)e.add(t[n]);return e}function Af(t,e,n,r,i,s,o=0){const a=r&&r.constructor===Array;var l=a?r.shift():r;if(!l)return this.export(t,e,i,s+1);if((l=t((e?e+".":"")+(o+1)+"."+n,JSON.stringify(l)))&&l.then){const c=this;return l.then(function(){return Af.call(c,t,e,n,a?r:null,i,s,o+1)})}return Af.call(this,t,e,n,a?r:null,i,s,o+1)}function Df(t,e){let n="";for(const r of t.entries()){t=r[0];const i=r[1];let s="";for(let t,n=0;n<i.length;n++){t=i[n]||[""];let r="";for(let n=0;n<t.length;n++)r+=(r?",":"")+("string"===e?'"'+t[n]+'"':t[n]);r="["+r+"]",s+=(s?",":"")+r}s='["'+t+'",['+s+"]]",n+=(n?",":"")+s}return n}function Pf(t,e){let n=0;var r=void 0===e;if(t.constructor===Array){for(let i,s,o,a=0;a<t.length;a++)if((i=t[a])&&i.length){if(r)return 1;if(s=i.indexOf(e),s>=0){if(i.length>1)return i.splice(s,1),1;if(delete t[a],n)return 1;o=1}else{if(o)return 1;n++}}}else for(let i of t.entries())r=i[0],Pf(i[1],e)?n++:t.delete(r);return n}Gh("add"),Gh("append"),Gh("search"),Gh("update"),Gh("remove"),Gh("clear"),Gh("export"),Gh("import"),Jh.prototype.searchCache=Sh,Kh(Jh.prototype),yf.prototype.add=function(t,e,n){if(bh(t)&&(t=yh(e=t,this.key)),e&&(t||0===t)){if(!n&&this.reg.has(t))return this.update(t,e);for(let s,o=0;o<this.field.length;o++){s=this.B[o];var r=this.index.get(this.field[o]);if("function"==typeof s){var i=s(e);i&&r.add(t,i,n,!0)}else(!(i=s.G)||i(e))&&(s.constructor===String?s=[""+s]:mh(s)&&(s=[s]),tf(e,s,this.D,0,r,t,s[0],n))}if(this.tag)for(r=0;r<this.A.length;r++){var s=this.A[r];i=this.tag.get(this.F[r]);let a=ph();if("function"==typeof s){if(!(s=s(e)))continue}else{var o=s.G;if(o&&!o(e))continue;s.constructor===String&&(s=""+s),s=yh(e,s)}if(i&&s){mh(s)&&(s=[s]);for(let e,r,l=0;l<s.length;l++)if(e=s[l],!a[e]&&(a[e]=1,(o=i.get(e))?r=o:i.set(e,r=[]),!n||!r.includes(t))){if(r.length===2**31-1){if(o=new Bh(r),this.fastupdate)for(let t of this.reg.values())t.includes(r)&&(t[t.indexOf(r)]=o);i.set(e,r=o)}r.push(t),this.fastupdate&&((o=this.reg.get(t))?o.push(r):this.reg.set(t,[r]))}}}if(this.store&&(!n||!this.store.has(t))){let r;if(this.h){r=ph();for(let t,i=0;i<this.h.length;i++){if(t=this.h[i],(n=t.G)&&!n(e))continue;let s;if("function"==typeof t){if(s=t(e),!s)continue;t=[t.O]}else if(mh(t)||t.constructor===String){r[t]=e[t];continue}Zh(e,r,t,0,t[0],s)}}this.store.set(t,r||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this},uf.prototype.or=function(){return nf(this,"or",sf,arguments)},uf.prototype.and=function(){return nf(this,"and",of,arguments)},uf.prototype.xor=function(){return nf(this,"xor",af,arguments)},uf.prototype.not=function(){return nf(this,"not",lf,arguments)},(hh=uf.prototype).limit=function(t){if(this.await){const e=this;this.C.push(function(){return e.limit(t).result})}else if(this.result.length){const e=[];for(let n,r=0;r<this.result.length;r++)if(n=this.result[r]){if(!(n.length<=t)){e[r]=n.slice(0,t);break}if(e[r]=n,!(t-=n.length))break}this.result=e}return this},hh.offset=function(t){if(this.await){const e=this;this.C.push(function(){return e.offset(t).result})}else if(this.result.length){const e=[];for(let n,r=0;r<this.result.length;r++)(n=this.result[r])&&(n.length<=t?t-=n.length:(e[r]=n.slice(t),t=0));this.result=e}return this},hh.boost=function(t){if(this.await){const e=this;this.C.push(function(){return e.boost(t).result})}else this.h+=t;return this},hh.resolve=function(t,e,n,r,i){let s=this.await?df(this,!0):this.result;if(s.then){const o=this;return s.then(function(){return o.resolve(t,e,n,r,i)})}return s.length&&("object"==typeof t?(r=t.highlight||this.highlight,n=!!r||t.enrich,e=t.offset,t=t.limit):(r=r||this.highlight,n=!!r||n),s=i?n?bf.call(this.index,s):s:ef.call(this.index,s,t||100,e,n)),this.finalize(s,r)},hh.finalize=function(t,e){if(t.then){const n=this;return t.then(function(t){return n.finalize(t,e)})}e&&t.length&&this.query&&(t=cf(this.query,t,this.index.index,this.field,e));const n=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",n&&n(t),t},yf.prototype.search=function(t,e,n,r){n||(!e&&bh(t)?(n=t,t=""):bh(e)&&(n=e,e=0));let i=[];var s=[];let o,a,l,c,u,d,h,f,g=0,p=!0;if(n){n.constructor===Array&&(n={index:n}),t=n.query||t,o=n.pluck,a=n.merge,c=n.boost,d=o||n.field||(d=n.index)&&(d.index?null:d);var m=this.tag&&n.tag;l=n.suggest,p=!1!==n.resolve,u=n.cache,h=p&&this.store&&n.highlight;var b=!!h||p&&this.store&&n.enrich;e=n.limit||e;var y=n.offset||0;if(e||(e=p?100:0),m&&(!this.db||!r)){m.constructor!==Array&&(m=[m]);var x=[];for(let t,e=0;e<m.length;e++)if(t=m[e],t.field&&t.tag){var v=t.tag;if(v.constructor===Array)for(var w=0;w<v.length;w++)x.push(t.field,v[w]);else x.push(t.field,v)}else{v=Object.keys(t);for(let e,n,r=0;r<v.length;r++)if(e=v[r],n=t[e],n.constructor===Array)for(w=0;w<n.length;w++)x.push(e,n[w]);else x.push(e,n)}if(m=x,!t){if(s=[],x.length)for(m=0;m<x.length;m+=2){if(this.db){if(!(r=this.index.get(x[m])))continue;s.push(r=r.db.tag(x[m+1],e,y,b))}else r=mf.call(this,x[m],x[m+1],e,y,b);i.push(p?{field:x[m],tag:x[m+1],result:r}:[r])}if(s.length){const t=this;return Promise.all(s).then(function(e){for(let t=0;t<e.length;t++)p?i[t].result=e[t]:i[t]=e[t];return p?i:new uf(i.length>1?hf(i,1,0,0,l,c):i[0],t)})}return p?i:new uf(i.length>1?hf(i,1,0,0,l,c):i[0],this)}}p||o||!(d=d||this.field)||(mh(d)?o=d:(d.constructor===Array&&1===d.length&&(d=d[0]),o=d.field||d.index)),d&&d.constructor!==Array&&(d=[d])}d||(d=this.field),x=(this.worker||this.db)&&!r&&[];for(let o,a,c,_=0;_<d.length;_++){if(a=d[_],this.db&&this.tag&&!this.B[_])continue;let C;if(mh(a)||(C=a,a=C.field,t=C.query||t,e=gh(C.limit,e),y=gh(C.offset,y),l=gh(C.suggest,l),h=p&&this.store&&gh(C.highlight,h),b=!!h||p&&this.store&&gh(C.enrich,b),u=gh(C.cache,u)),r)o=r[_];else{w=(v=C||n||{}).enrich;var k=this.index.get(a);if(m&&(this.db&&(v.tag=m,v.field=d,f=k.db.support_tag_search),!f&&w&&(v.enrich=!1),f||(v.limit=0,v.offset=0)),o=u?k.searchCache(t,m&&!f?0:e,v):k.search(t,m&&!f?0:e,v),m&&!f&&(v.limit=e,v.offset=y),w&&(v.enrich=w),x){x[_]=o;continue}}if(c=(o=o.result||o)&&o.length,m&&c){if(v=[],w=0,this.db&&r){if(!f)for(k=d.length;k<r.length;k++){let t=r[k];if(t&&t.length)w++,v.push(t);else if(!l)return p?i:new uf(i,this)}}else for(let t,e,n=0;n<m.length;n+=2){if(t=this.tag.get(m[n]),!t){if(l)continue;return p?i:new uf(i,this)}if(e=(t=t&&t.get(m[n+1]))&&t.length)w++,v.push(t);else if(!l)return p?i:new uf(i,this)}if(w){if(o=gf(o,v,e,y,p),c=o.length,!c&&!l)return p?o:new uf(o,this);w--}}if(c)s[g]=a,i.push(o),g++;else if(1===d.length)return p?i:new uf(i,this)}if(x){if(this.db&&m&&m.length&&!f)for(b=0;b<m.length;b+=2){if(!(s=this.index.get(m[b]))){if(l)continue;return p?i:new uf(i,this)}x.push(s.db.tag(m[b+1],e,y,!1))}const r=this;return Promise.all(x).then(function(i){return n&&(n.resolve=p),i.length&&(i=r.search(t,e,n,i)),i})}if(!g)return p?i:new uf(i,this);if(o&&(!b||!this.store))return i=i[0],p?i:new uf(i,this);for(x=[],y=0;y<s.length;y++){if(m=i[y],b&&m.length&&void 0===m[0].doc&&(this.db?x.push(m=this.index.get(this.field[0]).db.enrich(m)):m=bf.call(this,m)),o)return p?h?cf(t,m,this.index,o,h):m:new uf(m,this);i[y]={field:s[y],result:m}}if(b&&this.db&&x.length){const e=this;return Promise.all(x).then(function(n){for(let t=0;t<n.length;t++)i[t].result=n[t];return h&&(i=cf(t,i,e.index,o,h)),a?pf(i):i})}return h&&(i=cf(t,i,this.index,o,h)),a?pf(i):i},(hh=yf.prototype).mount=function(t){let e=this.field;if(this.tag)for(let t,r=0;r<this.F.length;r++){t=this.F[r];var n=void 0;this.index.set(t,n=new If({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(t),n.tag=this.tag.get(t)}n=[];const r={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let i,s,o=0;o<e.length;o++){r.field=s=e[o],i=this.index.get(s);const a=new t.constructor(t.id,r);a.id=t.id,n[o]=a.mount(i),i.document=!0,o?i.bypass=!0:i.store=this.store}const i=this;return this.db=Promise.all(n).then(function(){i.db=!0})},hh.commit=async function(){const t=[];for(const e of this.index.values())t.push(e.commit());await Promise.all(t),this.reg.clear()},hh.destroy=function(){const t=[];for(const e of this.index.values())t.push(e.destroy());return Promise.all(t)},hh.append=function(t,e){return this.add(t,e,!0)},hh.update=function(t,e){return this.remove(t).add(t,e)},hh.remove=function(t){for(var e of(bh(t)&&(t=yh(t,this.key)),this.index.values()))e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let r of n){e=r[0];const i=r[1],s=i.indexOf(t);s>-1&&(i.length>1?i.splice(s,1):n.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this},hh.clear=function(){const t=[];for(const e of this.index.values()){const n=e.clear();n.then&&t.push(n)}if(this.tag)for(const t of this.tag.values())t.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this},hh.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)},hh.cleanup=function(){for(const t of this.index.values())t.cleanup();return this},hh.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(t){return t[0]&&t[0].doc||null}):this.store.get(t)||null},hh.set=function(t,e){return"object"==typeof t&&(t=yh(e=t,this.key)),this.store.set(t,e),this},hh.searchCache=Sh,hh.export=function(t,e,n=0,r=0){if(n<this.field.length){const i=this.field[n];if((e=this.index.get(i).export(t,i,n,r=1))&&e.then){const r=this;return e.then(function(){return r.export(t,i,n+1)})}return this.export(t,i,n+1)}let i,s;switch(r){case 0:i="reg",s=Mf(this.reg),e=null;break;case 1:i="tag",s=this.tag&&_f(this.tag,this.reg.size),e=null;break;case 2:i="doc",s=this.store&&wf(this.store),e=null;break;default:return}return Af.call(this,t,e,i,s||null,n,r)},hh.import=function(t,e){var n=t.split(".");"json"===n[n.length-1]&&n.pop();const r=n.length>2?n[0]:"";if(n=n.length>2?n[2]:n[1],this.worker&&r)return this.index.get(r).import(t);if(e){if("string"==typeof e&&(e=JSON.parse(e)),r)return this.index.get(r).import(n,e);switch(n){case"reg":this.fastupdate=!1,this.reg=Sf(e,this.reg);for(let t,e=0;e<this.field.length;e++)t=this.index.get(this.field[e]),t.fastupdate=!1,t.reg=this.reg;if(this.worker){e=[];for(const n of this.index.values())e.push(n.import(t));return Promise.all(e)}break;case"tag":this.tag=Cf(e,this.tag);break;case"doc":this.store=kf(e,this.store)}}},Kh(yf.prototype),If.prototype.remove=function(t,e){const n=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(n){if(this.fastupdate){for(let e,r,i=0;i<n.length;i++)if((e=n[i])&&(r=e.length))if(e[r-1]===t)e.pop();else{const n=e.indexOf(t);n>=0&&e.splice(n,1)}}else Pf(this.map,t),this.depth&&Pf(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&jf(this)),this.cache&&this.cache.remove(t),this};const Ef={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};function Of(t,e,n,r,i,s,o){let a,l;if(!(a=e[n])||o&&!a[o]){if(o?((e=a||(e[n]=ph()))[o]=1,l=t.ctx,(a=l.get(o))?l=a:l.set(o,l=t.keystore?new Ih(t.keystore):new Map)):(l=t.map,e[n]=1),(a=l.get(n))?l=a:l.set(n,l=a=[]),s)for(let n,s=0;s<a.length;s++)if((n=a[s])&&n.includes(i)){if(s<=r)return;n.splice(n.indexOf(i),1),t.fastupdate&&(e=t.reg.get(i))&&e.splice(e.indexOf(n),1);break}if(l=l[r]||(l[r]=[]),l.push(i),l.length===2**31-1){if(e=new Bh(l),t.fastupdate)for(let n of t.reg.values())n.includes(l)&&(n[n.indexOf(l)]=e);a[r]=l=e}t.fastupdate&&((r=t.reg.get(i))?r.push(l):t.reg.set(i,[l]))}}function Tf(t,e,n,r,i){return n&&t>1?e+(r||0)<=t?n+(i||0):(t-1)/(e+(r||0))*(n+(i||0))+1|0:0}function Lf(t,e,n,r,i,s,o){let a=t.length,l=t;if(a>1)l=hf(t,e,n,r,i,s,o);else if(1===a)return o?ef.call(null,t[0],n,r):new uf(t[0],this);return o?l:new uf(l,this)}function Rf(t,e,n,r,i,s,o){return t=Bf(this,t,e,n,r,i,s,o),this.db?t.then(function(t){return i?t||[]:new uf(t,this)}):t&&t.length?i?ef.call(this,t,n,r):new uf(t,this):i?[]:new uf([],this)}function $f(t,e,n,r){let i=[];if(t&&t.length){if(t.length<=r)return void e.push(t);for(let e,n=0;n<r;n++)(e=t[n])&&(i[n]=e);if(i.length)return void e.push(i)}if(!n)return i}function Bf(t,e,n,r,i,s,o,a){let l;return n&&(l=t.bidirectional&&e>n)&&(l=n,n=e,e=l),t.db?t.db.get(e,n,r,i,s,o,a):t=n?(t=t.ctx.get(n))&&t.get(e):t.map.get(e)}function If(t,e){if(!this||this.constructor!==If)return new If(t);if(t){var n=mh(t)?t:t.preset;n&&(t=Object.assign({},Ef[n],t))}else t={};const r=!0===(n=t.context)?{depth:1}:n||{},i=mh(t.encoder)?Rh[t.encoder]:t.encode||t.encoder||{};this.encoder=i.encode?i:"object"==typeof i?new Ch(i):{encode:i},this.resolution=t.resolution||9,this.tokenize=n=(n=t.tokenize)&&"default"!==n&&"exact"!==n&&n||"strict",this.depth="strict"===n&&r.depth||0,this.bidirectional=!1!==r.bidirectional,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(n=t.keystore||0)&&(this.keystore=n),this.map=n?new Ih(n):new Map,this.ctx=n?new Ih(n):new Map,this.reg=e||(this.fastupdate?n?new Ih(n):new Map:n?new jh(n):new Set),this.N=r.resolution||3,this.rtl=i.rtl||t.rtl||!1,this.cache=(n=t.cache||null)&&new Ah(n),this.resolve=!1!==t.resolve,(n=t.db)&&(this.db=this.mount(n)),this.M=!1!==t.commit,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}function jf(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}If.prototype.add=function(t,e,n,r){if(e&&(t||0===t)){if(!r&&!n&&this.reg.has(t))return this.update(t,e);r=this.depth;const c=(e=this.encoder.encode(e,!r)).length;if(c){const u=ph(),d=ph(),h=this.resolution;for(let f=0;f<c;f++){let g=e[this.rtl?c-1-f:f];var i=g.length;if(i&&(r||!d[g])){var s=this.score?this.score(e,g,f,null,0):Tf(h,c,f),o="";switch(this.tokenize){case"tolerant":if(Of(this,d,g,s,t,n),i>2){for(let e,r,a,l,c=1;c<i-1;c++)e=g.charAt(c),r=g.charAt(c+1),a=g.substring(0,c)+r,l=g.substring(c+2),Of(this,d,o=a+e+l,s,t,n),Of(this,d,o=a+l,s,t,n);Of(this,d,g.substring(0,g.length-1),s,t,n)}break;case"full":if(i>2){for(let r,l=0;l<i;l++)for(s=i;s>l;s--){o=g.substring(l,s),r=this.rtl?i-1-l:l;var a=this.score?this.score(e,g,f,o,r):Tf(h,c,f,i,r);Of(this,d,o,a,t,n)}break}case"bidirectional":case"reverse":if(i>1){for(a=i-1;a>0;a--){o=g[this.rtl?i-1-a:a]+o;var l=this.score?this.score(e,g,f,o,a):Tf(h,c,f,i,a);Of(this,d,o,l,t,n)}o=""}case"forward":if(i>1){for(a=0;a<i;a++)Of(this,d,o+=g[this.rtl?i-1-a:a],s,t,n);break}default:if(Of(this,d,g,s,t,n),r&&c>1&&f<c-1)for(i=this.N,o=g,s=Math.min(r+1,this.rtl?f+1:c-f),a=1;a<s;a++){g=e[this.rtl?c-1-f-a:f+a];Of(this,u,(l=this.bidirectional&&g>o)?o:g,this.score?this.score(e,o,f,g,a-1):Tf(i+(c/2>i?0:1),c,f,s-1,a-1),t,n,l?g:o)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(n?{ins:t}:{del:t}),this.M&&jf(this)),this},If.prototype.search=function(t,e,n){if(n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):(n=t,t="")),n&&n.cache)return n.cache=!1,t=this.searchCache(t,e,n),n.cache=!0,t;let r,i,s,o,a,l,c,u,d=[],h=0;n&&(t=n.query||t,e=n.limit||e,h=n.offset||0,i=n.context,s=n.suggest,u=(o=n.resolve)&&n.enrich,l=n.boost,c=n.resolution,a=this.db&&n.tag),void 0===o&&(o=this.resolve),i=this.depth&&!1!==i;let f=this.encoder.encode(t,!i);if(r=f.length,e=e||(o?100:0),1===r)return Rf.call(this,f[0],"",e,h,o,u,a);if(2===r&&i&&!s)return Rf.call(this,f[1],f[0],e,h,o,u,a);let g,p=ph(),m=0;if(i&&(g=f[0],m=1),c||0===c||(c=g?this.N:this.resolution),this.db){if(this.db.search&&!1!==(n=this.db.search(this,f,e,h,s,o,u,a)))return n;const t=this;return async function(){for(let e,n;m<r;m++){if((n=f[m])&&!p[n]){if(p[n]=1,e=await Bf(t,n,g,0,0,!1,!1),e=$f(e,d,s,c)){d=e;break}g&&(s&&e&&d.length||(g=n))}s&&g&&m===r-1&&!d.length&&(c=t.resolution,g="",m=-1,p=ph())}return Lf(d,c,e,h,s,l,o)}()}for(let t,e;m<r;m++){if((e=f[m])&&!p[e]){if(p[e]=1,t=Bf(this,e,g,0,0,!1,!1),t=$f(t,d,s,c)){d=t;break}g&&(s&&t&&d.length||(g=e))}s&&g&&m===r-1&&!d.length&&(c=this.resolution,g="",m=-1,p=ph())}return Lf(d,c,e,h,s,l,o)},(hh=If.prototype).mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)},hh.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},hh.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()},hh.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},hh.append=function(t,e){return this.add(t,e,!0)},hh.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)},hh.update=function(t,e){const n=this,r=this.remove(t);return r&&r.then?r.then(()=>n.add(t,e)):this.add(t,e)},hh.cleanup=function(){return this.fastupdate?(Pf(this.map),this.depth&&Pf(this.ctx),this):this},hh.searchCache=Sh,hh.export=function(t,e,n=0,r=0){let i,s;switch(r){case 0:i="reg",s=Mf(this.reg);break;case 1:i="cfg",s=null;break;case 2:i="map",s=wf(this.map,this.reg.size);break;case 3:i="ctx",s=_f(this.ctx,this.reg.size);break;default:return}return Af.call(this,t,e,i,s,n,r)},hh.import=function(t,e){if(e)switch("string"==typeof e&&(e=JSON.parse(e)),t=t.split("."),"json"===t[t.length-1]&&t.pop(),3===t.length&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=Sf(e,this.reg);break;case"map":this.map=kf(e,this.map);break;case"ctx":this.ctx=Cf(e,this.ctx)}},hh.serialize=function(t=!0){let e="",n="",r="";if(this.reg.size){let t;for(var i of this.reg.keys())t||(t=typeof i),e+=(e?",":"")+("string"===t?'"'+i+'"':i);e="index.reg=new Set(["+e+"]);",n=Df(this.map,t),n="index.map=new Map(["+n+"]);";for(const e of this.ctx.entries()){i=e[0];let n=Df(e[1],t);n="new Map(["+n+"])",n='["'+i+'",'+n+"]",r+=(r?",":"")+n}r="index.ctx=new Map(["+r+"]);"}return t?"function inject(index){"+e+n+r+"}":e+n+r},Kh(If.prototype);const Ff="undefined"!=typeof window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),zf=["map","ctx","tag","reg","cfg"],Nf=ph();function Vf(t,e,n){const r=t.value;let i,s=0;for(let t,o=0;o<r.length;o++){if(t=n?r:r[o]){for(let n,s,a=0;a<e.length;a++)if(s=e[a],n=t.indexOf(s),n>=0){if(i=1,!(t.length>1)){r[o]=[];break}t.splice(n,1)}s+=t.length}if(n)break}s?i&&t.update(r):t.delete(),t.continue()}function Wf(t,e){return new Promise((n,r)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,n(this.result)},t.onerror=t.onblocked=r,t=null})}function Hf(t,e){const{positive:n,phrases:r,regular:i,regexPatterns:s=[]}=e;let o=0;const a=(t.title||"").toLowerCase(),l=(t.url||"").toLowerCase(),c=(t.domain||"").toLowerCase(),u=(t.description||"").toLowerCase(),d=(t.category||"").toLowerCase(),h=[...n,...r,...i];for(const t of h)a.includes(t)&&(o+=10,a.startsWith(t)&&(o+=5)),c.includes(t)&&(o+=5),d.includes(t)&&(o+=4),u.includes(t)&&(o+=2),l.includes(t)&&(o+=1);for(const e of s)e.test(t.title||"")&&(o+=8),e.test(t.url||"")&&(o+=3),e.test(t.description||"")&&(o+=2);return o}async function qf(t,e={}){const{limit:n=50,offset:r=0}=e;if(!t||!t.trim()){const t=await Rl();return{results:t.sort((t,e)=>e.dateAdded-t.dateAdded).slice(r,r+n),total:t.length,hasMore:r+n<t.length,parsedQuery:null}}const{filters:i,remainingQuery:s}=function(t){if(!t||!t.trim())return{filters:{},remainingQuery:""};const e={};let n=t;const r=n.match(/category:(\S+)/i);r&&(e.category=r[1].toLowerCase(),n=n.replace(r[0],"").trim());const i=n.match(/domain:(\S+)/i);i&&(e.domain=i[1].toLowerCase(),n=n.replace(i[0],"").trim());const s=n.match(/accessed:(yes|no)/i);s&&(e.accessed="yes"===s[1].toLowerCase(),n=n.replace(s[0],"").trim());const o=n.match(/stale:(yes|no)/i);o&&(e.stale="yes"===o[1].toLowerCase(),n=n.replace(o[0],"").trim());const a=n.match(/enriched:(yes|no)/i);a&&(e.enriched="yes"===a[1].toLowerCase(),n=n.replace(a[0],"").trim());const l=n.match(/dead:(yes|no)/i);l&&(e.dead="yes"===l[1].toLowerCase(),n=n.replace(l[0],"").trim());const c=n.match(/folder:(?:"([^"]+)"|(\S+))/i);return c&&(e.folder=(c[1]||c[2]).toLowerCase(),n=n.replace(c[0],"").trim()),{filters:e,remainingQuery:n}}(t),o=function(t){if(!t||!t.trim())return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[],hasModifiers:!1};const e=[],n=[],r=[],i=[],s=[],o=/\/([^\/]+)\/([gimsuvy]*)?/g;let a,l=t;for(;null!==(a=o.exec(t));)try{const t=a[1],e=a[2]||"i",n=new RegExp(t,e);s.push(n)}catch(t){console.warn("Invalid regex pattern:",a[0],t.message)}l=l.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();const c=/([+-]?)"([^"]+)"/g;for(;null!==(a=c.exec(l));){const t=a[1],i=a[2].toLowerCase();"+"===t?e.push(i):"-"===t?n.push(i):r.push(i)}l=l.replace(/[+-]?"[^"]+"/g,"").trim();const u=l.split(/\s+/).filter(t=>t.length>0);for(const t of u){const r=t.toLowerCase();t.startsWith("+")&&t.length>1?e.push(r.slice(1)):t.startsWith("-")&&t.length>1?n.push(r.slice(1)):i.push(r)}return{positive:e,negative:n,phrases:r,regular:i,regexPatterns:s,hasModifiers:e.length>0||n.length>0||r.length>0||s.length>0}}(s);let a,l=await Rl();Object.keys(i).length>0&&(l=function(t,e){const n=Date.now()-2592e6;return t.filter(t=>{if(e.category&&(t.category||"uncategorized").toLowerCase()!==e.category)return!1;if(e.domain&&!(t.domain||"").toLowerCase().includes(e.domain))return!1;if(void 0!==e.accessed){const n=t.accessCount&&t.accessCount>0;if(e.accessed!==n)return!1}if(e.stale){const e=t.dateAdded<n,r=!t.accessCount||0===t.accessCount,i=!1!==t.isAlive;if(!(e&&r&&i))return!1}if(void 0!==e.enriched){const n=Boolean(t.description||t.keywords&&t.keywords.length>0||t.contentSnippet);if(e.enriched!==n)return!1}if(void 0!==e.dead){const n=!1===t.isAlive;if(e.dead!==n)return!1}return!(e.folder&&!(t.folderPath||"").toLowerCase().includes(e.folder))})}(l,i)),s.trim()?(a=l.filter(t=>function(t,e){const{positive:n,negative:r,phrases:i,regular:s,regexPatterns:o=[]}=e,a=[t.title||"",t.url||"",t.description||"",t.domain||"",t.category||"",Array.isArray(t.keywords)?t.keywords.join(" "):""].join(" ").toLowerCase(),l=[t.title||"",t.url||"",t.description||"",t.domain||"",t.category||"",Array.isArray(t.keywords)?t.keywords.join(" "):""].join(" ");for(const t of n)if(!a.includes(t))return!1;for(const t of r)if(a.includes(t))return!1;for(const t of i)if(!a.includes(t))return!1;for(const t of o){const e=t.flags.includes("i")?a:l;if(!t.test(e))return!1}if(s.length>0&&!s.some(t=>a.includes(t)))return!1;return!0}(t,o)),a=a.map(t=>({...t,_searchScore:Hf(t,o)})),a.sort((t,e)=>e._searchScore-t._searchScore)):a=l.sort((t,e)=>e.dateAdded-t.dateAdded);const c=a.length;return{results:a.slice(r,r+n),total:c,hasMore:r+n<c,parsedQuery:o,specialFilters:i}}function Uf(t,e){const n=t.toLowerCase().trim(),r=e.toLowerCase().trim();if(n===r)return 1;const i=Math.max(n.length,r.length);if(0===i)return 0;return 1-function(t,e){const n=t.length,r=e.length;if(0===n)return r;if(0===r)return n;const i=Array(n+1).fill(null).map(()=>Array(r+1).fill(0));for(let t=0;t<=n;t++)i[t][0]=t;for(let t=0;t<=r;t++)i[0][t]=t;for(let s=1;s<=n;s++)for(let n=1;n<=r;n++){const r=t[s-1]===e[n-1]?0:1;i[s][n]=Math.min(i[s-1][n]+1,i[s][n-1]+1,i[s-1][n-1]+r)}return i[n][r]}(n,r)/i}function Kf(t,e){const n=new Set(t.toLowerCase().split(/\s+/).filter(t=>t.length>2)),r=new Set(e.toLowerCase().split(/\s+/).filter(t=>t.length>2));if(0===n.size||0===r.size)return 0;const i=[...n].filter(t=>r.has(t)).length;return i/new Set([...n,...r]).size}function Yf(t){let e=0,n=0;return t.title&&t.title.length>3&&(e+=1,n++),t.description&&t.description.length>10&&(e+=1,n++),t.keywords&&t.keywords.length>0&&(e+=1,n++),t.category&&(e+=1,n++),t.domain&&(e+=1,n++),{coverage:e,fields:n,percentage:n>0?e/5*100:0}}function Qf(t,e){const n={titleFuzzy:0,titleWords:0,descriptionWords:0,keywordsOverlap:0,categoryMatch:0,domainMatch:0,urlPathSimilarity:0};if(t.title&&e.title&&(n.titleFuzzy=Uf(t.title,e.title),n.titleWords=Kf(t.title,e.title)),t.description&&e.description&&(n.descriptionWords=Kf(t.description,e.description)),t.keywords?.length>0&&e.keywords?.length>0){const r=new Set(t.keywords.map(t=>t.toLowerCase())),i=new Set(e.keywords.map(t=>t.toLowerCase())),s=[...r].filter(t=>i.has(t)).length,o=new Set([...r,...i]).size;n.keywordsOverlap=s/o}if(t.category&&e.category&&(n.categoryMatch=t.category===e.category?1:0),t.domain&&e.domain&&(n.domainMatch=t.domain===e.domain?1:0),1===n.domainMatch)try{const r=new URL(t.url).pathname,i=new URL(e.url).pathname;n.urlPathSimilarity=Uf(r,i)}catch(t){}let r;return r=1===n.domainMatch?.25*n.titleFuzzy+.2*n.titleWords+.2*n.urlPathSimilarity+.15*n.descriptionWords+.1*n.keywordsOverlap+.1*n.categoryMatch:.3*n.titleFuzzy+.25*n.titleWords+.2*n.descriptionWords+.15*n.keywordsOverlap+.1*n.categoryMatch,{combined:r,breakdown:n,sameDomain:1===n.domainMatch,sameCategory:1===n.categoryMatch}}async function Xf(t={}){const{minSimilarity:e=.5,maxPairs:n=100,prioritizeSameDomain:r=!0,requireHighCoverage:i=!1,minCoveragePercent:s=40,useCache:o=!0,forceRefresh:a=!1}=t;try{const t=`enhanced_similar_${e}_${n}`;if(o&&!a){const e=await async function(t){try{const e=await Tl.cache.get(t);return e?e.ttl&&Date.now()-e.timestamp>e.ttl?(await Tl.cache.delete(t),null):e.value:null}catch(t){return console.error("Error getting cache:",t),null}}(t);if(e&&e.pairs&&Date.now()-e.timestamp<jl.SIMILARITY)return console.log("Returning cached enhanced similar results"),{pairs:e.pairs,stats:e.stats,fromCache:!0,cachedAt:e.timestamp,cacheAge:Date.now()-e.timestamp}}const l=await Rl();if(l.length<2)return{pairs:[],stats:{total:0,sameDomain:0,crossDomain:0},fromCache:!1};let c=l;i&&(c=l.filter(t=>{const{percentage:e}=Yf(t);return e>=s}));const u=new Map;c.forEach(t=>{const e=t.domain||"unknown";u.has(e)||u.set(e,[]),u.get(e).push(t)});const d=[];for(const[t,n]of u.entries())if(!(n.length<2))for(let t=0;t<n.length;t++)for(let r=t+1;r<n.length;r++){const i=n[t],s=n[r];if(i.url===s.url)continue;const o=Qf(i,s);o.combined>=e&&d.push({bookmark1:i,bookmark2:s,similarity:o.combined,breakdown:o.breakdown,sameDomain:!0,sameCategory:o.sameCategory,coverage1:Yf(i),coverage2:Yf(s)})}if(!r||d.length<n/2){const t=Math.min(200,c.length),r=c.sort(()=>Math.random()-.5).slice(0,t);for(let t=0;t<r.length;t++){for(let n=t+1;n<r.length;n++){const i=r[t],s=r[n];if(i.domain===s.domain||i.url===s.url)continue;const o=Qf(i,s);o.combined>=e+.1&&d.push({bookmark1:i,bookmark2:s,similarity:o.combined,breakdown:o.breakdown,sameDomain:!1,sameCategory:o.sameCategory,coverage1:Yf(i),coverage2:Yf(s)})}if(d.length>=2*n)break}}const h=d.sort((t,e)=>e.similarity-t.similarity).slice(0,n),f={total:h.length,sameDomain:h.filter(t=>t.sameDomain).length,crossDomain:h.filter(t=>!t.sameDomain).length,avgSimilarity:h.length>0?h.reduce((t,e)=>t+e.similarity,0)/h.length:0};return o&&(await async function(t,e,n=null){try{return await Tl.cache.put({key:t,value:e,timestamp:Date.now(),ttl:n}),!0}catch(t){return console.error("Error setting cache:",t),!1}}(t,{pairs:h,stats:f,timestamp:Date.now()}),console.log("Cached enhanced similar results")),{pairs:h,stats:f,fromCache:!1}}catch(t){return console.error("Error finding similar bookmarks with fuzzy matching:",t),{pairs:[],stats:{total:0,sameDomain:0,crossDomain:0},fromCache:!1}}}hh=function t(e,n={}){if(!this||this.constructor!==t)return new t(e,n);"object"==typeof e&&(n=e,e=e.name),e||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(e?":"+e.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}.prototype,hh.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())},hh.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),Nf[t.id]||(Nf[t.id]=[]),Nf[t.id].push(t.field);const e=Ff.open(t.id,1);return e.onupgradeneeded=function(){const e=t.db=this.result;for(let n,r=0;r<zf.length;r++){n=zf[r];for(let r,i=0;i<Nf[t.id].length;i++)r=Nf[t.id][i],e.objectStoreNames.contains(n+("reg"!==n&&r?":"+r:""))||e.createObjectStore(n+("reg"!==n&&r?":"+r:""))}},t.db=Wf(e,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})},hh.close=function(){this.db&&this.db.close(),this.db=null},hh.destroy=function(){return Wf(Ff.deleteDatabase(this.id))},hh.clear=function(){const t=[];for(let e,n=0;n<zf.length;n++){e=zf[n];for(let n,r=0;r<Nf[this.id].length;r++)n=Nf[this.id][r],t.push(e+("reg"!==e&&n?":"+n:""))}const e=this.db.transaction(t,"readwrite");for(let n=0;n<t.length;n++)e.objectStore(t[n]).clear();return Wf(e)},hh.get=function(t,e,n=0,r=0,i=!0,s=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);const o=this;return Wf(t).then(function(t){let e=[];if(!t||!t.length)return e;if(i){if(!n&&!r&&1===t.length)return t[0];for(let i,s=0;s<t.length;s++)if((i=t[s])&&i.length){if(r>=i.length){r-=i.length;continue}const t=n?r+Math.min(i.length-r,n):i.length;for(let n=r;n<t;n++)e.push(i[n]);if(r=0,e.length===n)break}return s?o.enrich(e):e}return t})},hh.tag=function(t,e=0,n=0,r=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const i=this;return Wf(t).then(function(t){return!t||!t.length||n>=t.length?[]:e||n?(t=t.slice(n,n+e),r?i.enrich(t):t):t})},hh.enrich=function(t){"object"!=typeof t&&(t=[t]);const e=this.db.transaction("reg","readonly").objectStore("reg"),n=[];for(let r=0;r<t.length;r++)n[r]=Wf(e.get(t[r]));return Promise.all(n).then(function(e){for(let n=0;n<e.length;n++)e[n]={id:t[n],doc:e[n]?JSON.parse(e[n]):null};return e})},hh.has=function(t){return Wf(t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t)).then(function(t){return!!t})},hh.search=null,hh.info=function(){},hh.transaction=function(t,e,n){t+="reg"!==t&&this.field?":"+this.field:"";let r=this.h[t+":"+e];if(r)return n.call(this,r);let i=this.db.transaction(t,e);this.h[t+":"+e]=r=i.objectStore(t);const s=n.call(this,r);return this.h[t+":"+e]=null,Wf(i).finally(function(){return s})},hh.commit=async function(t){let e=t.commit_task,n=[];t.commit_task=[];for(let t,r=0;r<e.length;r++)t=e[r],t.del&&n.push(t.del);n.length&&await this.remove(n),t.reg.size&&(await this.transaction("map","readwrite",function(e){for(const n of t.map){const t=n[0],r=n[1];r.length&&(e.get(t).onsuccess=function(){let n=this.result;var i;if(n&&n.length){const t=Math.max(n.length,r.length);for(let e,s,o=0;o<t;o++)if((s=r[o])&&s.length){if((e=n[o])&&e.length)for(i=0;i<s.length;i++)e.push(s[i]);else n[o]=s;i=1}}else n=r,i=1;i&&e.put(n,t)})}}),await this.transaction("ctx","readwrite",function(e){for(const n of t.ctx){const t=n[0],r=n[1];for(const n of r){const r=n[0],i=n[1];i.length&&(e.get(t+":"+r).onsuccess=function(){let n=this.result;var s;if(n&&n.length){const t=Math.max(n.length,i.length);for(let e,r,o=0;o<t;o++)if((r=i[o])&&r.length){if((e=n[o])&&e.length)for(s=0;s<r.length;s++)e.push(r[s]);else n[o]=r;s=1}}else n=i,s=1;s&&e.put(n,t+":"+r)})}}}),t.store?await this.transaction("reg","readwrite",function(e){for(const n of t.store){const t=n[0],r=n[1];e.put("object"==typeof r?JSON.stringify(r):1,t)}}):t.bypass||await this.transaction("reg","readwrite",function(e){for(const n of t.reg.keys())e.put(1,n)}),t.tag&&await this.transaction("tag","readwrite",function(e){for(const n of t.tag){const t=n[0],r=n[1];r.length&&(e.get(t).onsuccess=function(){let n=this.result;n=n&&n.length?n.concat(r):r,e.put(n,t)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())},hh.remove=function(t){return"object"!=typeof t&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Vf(e,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Vf(e,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Vf(e,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let n=0;n<t.length;n++)e.delete(t[n])})])};const{document:Jf}=f;function Gf(t,e,n){const r=t.slice();return r[154]=e[n],r}function Zf(t,e,n){const r=t.slice();return r[154]=e[n],r}function tg(t,e,n){const r=t.slice();return r[167]=e[n],r[169]=n,r}function eg(t,e,n){const r=t.slice();return r[170]=e[n],r}function ng(t,e,n){const r=t.slice();return r[159]=e[n],r}function rg(t,e,n){const r=t.slice();return r[159]=e[n],r}function ig(t,e,n){const r=t.slice();return r[159]=e[n],r}function sg(t,e,n){const r=t.slice();return r[159]=e[n],r}function og(t,e,n){const r=t.slice();return r[159]=e[n],r}function ag(t,e,n){const r=t.slice();return r[183]=e[n],r[185]=n,r}function lg(t,e,n){const r=t.slice();return r[186]=e[n],r[188]=n,r}function cg(t,e,n){const r=t.slice();return r[159]=e[n],r[169]=n,r}function ug(t,e,n){const r=t.slice();return r[159]=e[n],r}function dg(t,e,n){const r=t.slice();return r[192]=e[n],r}function hg(t,e,n){const r=t.slice();return r[195]=e[n],r}function fg(t,e,n){const r=t.slice();return r[198]=e[n],r}function gg(t,e,n){const r=t.slice();return r[159]=e[n],r}function pg(t,e,n){const r=t.slice();return r[159]=e[n],r}function mg(t,e,n){const r=t.slice();return r[164]=e[n],r}function bg(e){let n,r;return n=new Du({}),{c(){st(n.$$.fragment)},m(t,e){ot(n,t,e),r=!0},p:t,i(t){r||(tt(n.$$.fragment,t),r=!0)},o(t){et(n.$$.fragment,t),r=!1},d(t){at(n,t)}}}function yg(t){let e,n,r,i;const s=[kg,wg],o=[];function a(t,e){return t[1]?0:1}return n=a(t),r=o[n]=s[n](t),{c(){e=y("div"),r.c(),M(e,"class","space-y-8")},m(t,r){p(t,e,r),o[n].m(e,null),i=!0},p(t,i){let l=n;n=a(t),n===l?o[n].p(t,i):(G(),et(o[l],1,1,()=>{o[l]=null}),Z(),r=o[n],r?r.p(t,i):(r=o[n]=s[n](t),r.c()),tt(r,1),r.m(e,null))},i(t){i||(tt(r),i=!0)},o(t){et(r),i=!1},d(t){t&&m(e),o[n].d()}}}function xg(e){let n,r;return n=new dh({}),n.$on("filterByCategory",e[56]),n.$on("filterByDomain",e[57]),n.$on("filterByAccessed",e[58]),n.$on("filterByStale",e[59]),n.$on("filterByDead",e[60]),n.$on("filterByUnenriched",e[61]),n.$on("filterByUncategorized",e[62]),n.$on("showDuplicates",e[63]),n.$on("deleteBookmarks",e[64]),n.$on("searchQuery",e[65]),{c(){st(n.$$.fragment)},m(t,e){ot(n,t,e),r=!0},p:t,i(t){r||(tt(n.$$.fragment,t),r=!0)},o(t){et(n.$$.fragment,t),r=!1},d(t){at(n,t)}}}function vg(t){let e,n,r,i,s,o,a,l,c,u,d;n=new Ml({}),n.$on("search",t[52]);let h={searchResultStats:t[14],isSearchActive:!!t[4]};o=new Cc({props:h}),t[99](o),o.$on("filter",t[53]);const f=[am,om,sm,im],b=[];function x(t,e){return t[1]?0:t[2]?1:0===t[0].length?2:3}return c=x(t),u=b[c]=f[c](t),{c(){e=y("div"),st(n.$$.fragment),r=w(),i=y("div"),s=y("div"),st(o.$$.fragment),a=w(),l=y("div"),u.c(),M(e,"class","mb-4"),M(s,"class","flex-shrink-0"),M(l,"class","flex-1 min-w-0 overflow-hidden"),M(i,"class","flex gap-6 min-h-0")},m(t,u){p(t,e,u),ot(n,e,null),p(t,r,u),p(t,i,u),g(i,s),ot(o,s,null),g(i,a),g(i,l),b[c].m(l,null),d=!0},p(t,e){const n={};16384&e[0]&&(n.searchResultStats=t[14]),16&e[0]&&(n.isSearchActive=!!t[4]),o.$set(n);let r=c;c=x(t),c===r?b[c].p(t,e):(G(),et(b[r],1,1,()=>{b[r]=null}),Z(),u=b[c],u?u.p(t,e):(u=b[c]=f[c](t),u.c()),tt(u,1),u.m(l,null))},i(t){d||(tt(n.$$.fragment,t),tt(o.$$.fragment,t),tt(u),d=!0)},o(t){et(n.$$.fragment,t),et(o.$$.fragment,t),et(u),d=!1},d(s){s&&(m(e),m(r),m(i)),at(n),t[99](null),at(o),b[c].d()}}}function wg(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,A,P,E,O,T,L,R,$,B,I,j,F,z,N,V,W,H,q,U,K,Y,Q,X,J,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,ft,gt,pt,mt,bt,yt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Pt,Et,Ot,Tt,Lt,Rt,$t,Bt,It,jt,Ft,zt,Nt,Vt,Wt,Ht,qt,Ut,Kt,Yt,Qt,Xt,Jt,Gt,Zt,te,ee,ne,re,ie,se,oe,ae,le,ce,ue,de,he,fe,ge,pe,me,be,ye,xe,ve,we,ke,_e,Ce,Me,Se,Ae,De,Pe,Ee,Oe=t[13]&&_g(t);function Te(t,e){return t[16]?Mg:Cg}let Le=Te(t),Re=Le(t),$e=t[15]&&Sg(t),Be=t[18]&&t[16]&&Ag(t),Ie=t[17]&&Pg(t);function je(t,e){return t[19].length>0?$g:t[17]?void 0:Rg}let Fe=je(t),ze=Fe&&Fe(t),Ne=!t[12]&&Ig(t),Ve=t[11].length>0&&jg(t),We=t[47]&&t[48]&&Wg(t),He=t[49]&&!t[47]&&Hg(t);function qe(t,e){return t[12]?Kg:0===t[11].length?Ug:qg}let Ue=qe(t),Ke=Ue(t),Ye=!t[24]&&ap(t);function Qe(t,e){return t[24]?up:0===t[9].length?cp:lp}let Xe=Qe(t),Je=Xe(t),Ge=t[33]&&gp(t);function Ze(t,e){return t[34]?.fromCache?mp:t[33]?pp:void 0}let tn=Ze(t),en=tn&&tn(t);function nn(t,e){return t[28]?yp:bp}let rn=nn(t),sn=rn(t);function on(t,e){return t[28]?kp:0!==t[32].length||t[33]?0===t[32].length?vp:xp:wp}let an=on(t),ln=an(t),cn=t[36]&&Dp(t);function un(t,e){return t[27]?Op:t[36]&&0!==t[36].summary.total?Pp:Ep}let dn=un(t),hn=dn(t),fn=!t[25]&&Hp(t);const gn=[Kp,Up,qp],pn=[];function mn(t,e){return t[25]?0:0===t[10].length?1:2}function bn(t,e){return t[39]?Xp:Qp}Yt=mn(t),Qt=pn[Yt]=gn[Yt](t);let yn=bn(t),xn=yn(t),vn=t[42]&&Jp(t);function wn(t,e){return 0===t[41].length?nm:em}let kn=wn(t),_n=kn(t);return{c(){Oe&&Oe.c(),e=w(),n=y("div"),i=y("div"),s=y("div"),s.innerHTML='<h3 class="text-lg font-medium text-gray-900"><svg class="w-5 h-5 inline-block mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>\n                  Bookmark Enrichment</h3> <p class="text-sm text-gray-500 mt-1">Fetch metadata (descriptions, categories, keywords) for your bookmarks</p>',o=w(),a=y("button"),Re.c(),l=w(),c=y("div"),$e&&$e.c(),u=w(),d=y("div"),h=y("div"),f=y("label"),b=v("Batch Size\n                    "),x=y("span"),x.textContent="(how many bookmarks to process)",k=w(),C=y("input"),A=w(),P=y("div"),E=y("label"),O=v("Concurrency\n                    "),T=y("span"),T.textContent="(parallel requests)",L=w(),R=y("input"),$=w(),B=y("p"),B.textContent="Higher = faster, but more resource intensive (recommended: 3-5)",I=w(),j=y("div"),F=y("label"),z=y("input"),N=w(),V=y("div"),V.innerHTML='<span class="text-sm font-medium text-gray-700">Force Re-enrich</span> <p class="text-xs text-gray-500 mt-0.5">Re-enrich all bookmarks, even those recently processed. Useful when you want fresh metadata.</p>',W=w(),Be&&Be.c(),H=w(),Ie&&Ie.c(),q=w(),ze&&ze.c(),U=w(),K=y("div"),Y=y("div"),Q=y("div"),X=y("h3"),J=v("Dead Links "),Ne&&Ne.c(),nt=w(),rt=y("p"),rt.textContent="Bookmarks detected as unreachable during enrichment",it=w(),Ve&&Ve.c(),st=w(),ot=y("div"),We&&We.c(),at=w(),He&&He.c(),lt=w(),Ke.c(),ct=w(),ut=y("div"),dt=y("div"),ht=y("h3"),ft=v("Duplicate Bookmarks "),Ye&&Ye.c(),gt=w(),pt=y("div"),Je.c(),mt=w(),bt=y("div"),yt=y("div"),xt=y("div"),vt=y("h3"),wt=v(" Smart Similar Detection "),Ge&&Ge.c(),kt=w(),_t=y("p"),_t.textContent="Advanced fuzzy matching using title, description, keywords & domain analysis",Ct=w(),Mt=y("div"),en&&en.c(),St=w(),At=y("button"),sn.c(),Dt=w(),Pt=y("div"),ln.c(),Et=w(),Ot=y("div"),Tt=y("div"),Lt=y("h3"),Rt=v(" Cleanup Candidates "),cn&&cn.c(),$t=w(),Bt=y("p"),Bt.textContent="Bookmarks that may be candidates for removal based on various criteria",It=w(),jt=y("div"),hn.c(),Ft=w(),zt=y("div"),Nt=y("div"),Vt=y("h3"),Wt=v("Invalid URLs "),fn&&fn.c(),Ht=w(),qt=y("p"),qt.textContent="Bookmarks with unrecognized URL schemes",Ut=w(),Kt=y("div"),Qt.c(),Xt=w(),Jt=y("div"),Gt=y("div"),Gt.innerHTML='<h3 class="text-lg font-medium text-gray-900"><svg class="w-5 h-5 inline-block mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg>\n                Backup &amp; Restore</h3> <p class="text-sm text-gray-500 mt-1">Protect your enrichment data - backup regularly!</p>',Zt=w(),te=y("div"),ee=y("div"),ne=y("div"),re=y("h4"),re.textContent="Create Backup",ie=w(),se=y("p"),se.textContent="Download a complete backup of your bookmarks including all enrichment data, categories, and metadata.",oe=w(),ae=y("button"),xn.c(),le=w(),ce=y("div"),ue=y("h4"),ue.textContent="Restore Backup",de=w(),he=y("p"),he.textContent="Restore from a backup file. Your current data will be auto-backed up first.",fe=w(),ge=y("label"),pe=y("span"),pe.textContent="Choose backup file",me=w(),be=y("input"),ye=w(),vn&&vn.c(),xe=w(),ve=y("div"),we=y("div"),ke=y("h4"),ke.textContent="Auto-Backups",_e=w(),Ce=y("button"),Ce.textContent="Refresh",Me=w(),Se=y("p"),Se.textContent="Auto-backups are created before restore operations and enrichment runs. Last 3 are kept.",Ae=w(),_n.c(),a.disabled=t[16],M(a,"class","px-4 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex-shrink-0"),M(i,"class","px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"),M(x,"class","text-xs text-gray-500 font-normal"),M(C,"type","number"),M(C,"min","5"),M(C,"max","100"),M(C,"class","mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),C.disabled=t[16],M(f,"class","block text-sm font-medium text-gray-700 mb-1"),M(T,"class","text-xs text-gray-500 font-normal"),M(R,"type","number"),M(R,"min","1"),M(R,"max","10"),M(R,"class","mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),R.disabled=t[16],M(E,"class","block text-sm font-medium text-gray-700 mb-1"),M(B,"class","text-xs text-gray-500 mt-1"),M(z,"type","checkbox"),M(z,"class","mt-0.5 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"),z.disabled=t[16],M(F,"class","flex items-start gap-2 cursor-pointer mt-2"),M(d,"class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"),M(c,"class","p-6"),M(n,"class","bg-white rounded-lg shadow"),M(X,"class","text-lg font-medium text-gray-900"),M(rt,"class","text-xs text-gray-500 mt-1"),M(Y,"class","px-6 py-4 border-b border-gray-200 flex items-center justify-between"),M(ot,"class","p-6"),M(K,"class","bg-white rounded-lg shadow"),M(ht,"class","text-lg font-medium text-gray-900"),M(dt,"class","px-6 py-4 border-b border-gray-200"),M(pt,"class","p-6"),M(ut,"class","bg-white rounded-lg shadow"),M(vt,"class","text-lg font-medium text-gray-900"),M(_t,"class","text-xs text-gray-500 mt-1"),At.disabled=t[28],M(At,"class","px-3 py-1.5 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),M(Mt,"class","flex items-center gap-2"),M(yt,"class","px-6 py-4 border-b border-gray-200 flex items-center justify-between flex-wrap gap-3"),M(Pt,"class","p-6"),M(bt,"class","bg-white rounded-lg shadow"),M(Lt,"class","text-lg font-medium text-gray-900"),M(Bt,"class","text-xs text-gray-500 mt-1"),M(Tt,"class","px-6 py-4 border-b border-gray-200"),M(jt,"class","p-6"),M(Ot,"class","bg-white rounded-lg shadow"),M(Vt,"class","text-lg font-medium text-gray-900"),M(qt,"class","text-xs text-gray-500 mt-1"),M(Nt,"class","px-6 py-4 border-b border-gray-200"),M(Kt,"class","p-6"),M(zt,"class","bg-white rounded-lg shadow"),M(Gt,"class","px-6 py-4 border-b border-gray-200"),M(re,"class","font-medium text-gray-900 mb-3"),M(se,"class","text-sm text-gray-600 mb-4"),ae.disabled=t[39],M(ae,"class","w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center justify-center"),M(ne,"class","border border-gray-200 rounded-lg p-4"),M(ue,"class","font-medium text-gray-900 mb-3"),M(he,"class","text-sm text-gray-600 mb-4"),M(pe,"class","sr-only"),M(be,"type","file"),M(be,"accept",".json"),M(be,"class","block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"),M(ge,"class","block"),M(ce,"class","border border-gray-200 rounded-lg p-4"),M(ee,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),M(ke,"class","font-medium text-gray-900"),M(Ce,"class","text-sm text-blue-600 hover:text-blue-800"),M(we,"class","flex justify-between items-center mb-3"),M(Se,"class","text-sm text-gray-600 mb-3"),M(ve,"class","mt-6 border-t border-gray-200 pt-6"),M(te,"class","p-6"),M(Jt,"class","bg-white rounded-lg shadow")},m(r,m){Oe&&Oe.m(r,m),p(r,e,m),p(r,n,m),g(n,i),g(i,s),g(i,o),g(i,a),Re.m(a,null),g(n,l),g(n,c),$e&&$e.m(c,null),g(c,u),g(c,d),g(d,h),g(h,f),g(f,b),g(f,x),g(f,k),g(f,C),D(C,t[20]),g(d,A),g(d,P),g(P,E),g(E,O),g(E,T),g(E,L),g(E,R),D(R,t[21]),g(P,$),g(P,B),g(d,I),g(d,j),g(j,F),g(F,z),z.checked=t[22],g(F,N),g(F,V),g(c,W),Be&&Be.m(c,null),g(c,H),Ie&&Ie.m(c,null),g(c,q),ze&&ze.m(c,null),p(r,U,m),p(r,K,m),g(K,Y),g(Y,Q),g(Q,X),g(X,J),Ne&&Ne.m(X,null),g(Q,nt),g(Q,rt),g(Y,it),Ve&&Ve.m(Y,null),g(K,st),g(K,ot),We&&We.m(ot,null),g(ot,at),He&&He.m(ot,null),g(ot,lt),Ke.m(ot,null),p(r,ct,m),p(r,ut,m),g(ut,dt),g(dt,ht),g(ht,ft),Ye&&Ye.m(ht,null),g(ut,gt),g(ut,pt),Je.m(pt,null),p(r,mt,m),p(r,bt,m),g(bt,yt),g(yt,xt),g(xt,vt),g(vt,wt),Ge&&Ge.m(vt,null),g(xt,kt),g(xt,_t),g(yt,Ct),g(yt,Mt),en&&en.m(Mt,null),g(Mt,St),g(Mt,At),sn.m(At,null),g(bt,Dt),g(bt,Pt),ln.m(Pt,null),p(r,Et,m),p(r,Ot,m),g(Ot,Tt),g(Tt,Lt),g(Lt,Rt),cn&&cn.m(Lt,null),g(Tt,$t),g(Tt,Bt),g(Ot,It),g(Ot,jt),hn.m(jt,null),p(r,Ft,m),p(r,zt,m),g(zt,Nt),g(Nt,Vt),g(Vt,Wt),fn&&fn.m(Vt,null),g(Nt,Ht),g(Nt,qt),g(zt,Ut),g(zt,Kt),pn[Yt].m(Kt,null),p(r,Xt,m),p(r,Jt,m),g(Jt,Gt),g(Jt,Zt),g(Jt,te),g(te,ee),g(ee,ne),g(ne,re),g(ne,ie),g(ne,se),g(ne,oe),g(ne,ae),xn.m(ae,null),g(ee,le),g(ee,ce),g(ce,ue),g(ce,de),g(ce,he),g(ce,fe),g(ce,ge),g(ge,pe),g(ge,me),g(ge,be),g(ce,ye),vn&&vn.m(ce,null),g(te,xe),g(te,ve),g(ve,we),g(we,ke),g(we,_e),g(we,Ce),g(ve,Me),g(ve,Se),g(ve,Ae),_n.m(ve,null),De=!0,Pe||(Ee=[_(a,"click",t[66]),_(C,"input",t[104]),_(R,"input",t[105]),_(z,"change",t[106]),_(At,"click",t[110]),_(ae,"click",t[88]),_(be,"change",t[90]),_(Ce,"click",t[91])],Pe=!0)},p(t,n){t[13]?Oe?Oe.p(t,n):(Oe=_g(t),Oe.c(),Oe.m(e.parentNode,e)):Oe&&(Oe.d(1),Oe=null),Le!==(Le=Te(t))&&(Re.d(1),Re=Le(t),Re&&(Re.c(),Re.m(a,null))),(!De||65536&n[0])&&(a.disabled=t[16]),t[15]?$e?$e.p(t,n):($e=Sg(t),$e.c(),$e.m(c,u)):$e&&($e.d(1),$e=null),(!De||65536&n[0])&&(C.disabled=t[16]),1048576&n[0]&&S(C.value)!==t[20]&&D(C,t[20]),(!De||65536&n[0])&&(R.disabled=t[16]),2097152&n[0]&&S(R.value)!==t[21]&&D(R,t[21]),(!De||65536&n[0])&&(z.disabled=t[16]),4194304&n[0]&&(z.checked=t[22]),t[18]&&t[16]?Be?Be.p(t,n):(Be=Ag(t),Be.c(),Be.m(c,H)):Be&&(Be.d(1),Be=null),t[17]?Ie?Ie.p(t,n):(Ie=Pg(t),Ie.c(),Ie.m(c,q)):Ie&&(Ie.d(1),Ie=null),Fe===(Fe=je(t))&&ze?ze.p(t,n):(ze&&ze.d(1),ze=Fe&&Fe(t),ze&&(ze.c(),ze.m(c,null))),t[12]?Ne&&(Ne.d(1),Ne=null):Ne?Ne.p(t,n):(Ne=Ig(t),Ne.c(),Ne.m(X,null)),t[11].length>0?Ve?Ve.p(t,n):(Ve=jg(t),Ve.c(),Ve.m(Y,null)):Ve&&(Ve.d(1),Ve=null),t[47]&&t[48]?We?We.p(t,n):(We=Wg(t),We.c(),We.m(ot,at)):We&&(We.d(1),We=null),t[49]&&!t[47]?He?He.p(t,n):(He=Hg(t),He.c(),He.m(ot,lt)):He&&(He.d(1),He=null),Ue===(Ue=qe(t))&&Ke?Ke.p(t,n):(Ke.d(1),Ke=Ue(t),Ke&&(Ke.c(),Ke.m(ot,null))),t[24]?Ye&&(Ye.d(1),Ye=null):Ye?Ye.p(t,n):(Ye=ap(t),Ye.c(),Ye.m(ht,null)),Xe===(Xe=Qe(t))&&Je?Je.p(t,n):(Je.d(1),Je=Xe(t),Je&&(Je.c(),Je.m(pt,null))),t[33]?Ge?Ge.p(t,n):(Ge=gp(t),Ge.c(),Ge.m(vt,null)):Ge&&(Ge.d(1),Ge=null),tn===(tn=Ze(t))&&en?en.p(t,n):(en&&en.d(1),en=tn&&tn(t),en&&(en.c(),en.m(Mt,St))),rn!==(rn=nn(t))&&(sn.d(1),sn=rn(t),sn&&(sn.c(),sn.m(At,null))),(!De||268435456&n[0])&&(At.disabled=t[28]),an===(an=on(t))&&ln?ln.p(t,n):(ln.d(1),ln=an(t),ln&&(ln.c(),ln.m(Pt,null))),t[36]?cn?cn.p(t,n):(cn=Dp(t),cn.c(),cn.m(Lt,null)):cn&&(cn.d(1),cn=null),dn===(dn=un(t))&&hn?hn.p(t,n):(hn.d(1),hn=dn(t),hn&&(hn.c(),hn.m(jt,null))),t[25]?fn&&(fn.d(1),fn=null):fn?fn.p(t,n):(fn=Hp(t),fn.c(),fn.m(Vt,null));let r=Yt;Yt=mn(t),Yt===r?pn[Yt].p(t,n):(G(),et(pn[r],1,1,()=>{pn[r]=null}),Z(),Qt=pn[Yt],Qt?Qt.p(t,n):(Qt=pn[Yt]=gn[Yt](t),Qt.c()),tt(Qt,1),Qt.m(Kt,null)),yn!==(yn=bn(t))&&(xn.d(1),xn=yn(t),xn&&(xn.c(),xn.m(ae,null))),(!De||256&n[1])&&(ae.disabled=t[39]),t[42]?vn?vn.p(t,n):(vn=Jp(t),vn.c(),vn.m(ce,null)):vn&&(vn.d(1),vn=null),kn===(kn=wn(t))&&_n?_n.p(t,n):(_n.d(1),_n=kn(t),_n&&(_n.c(),_n.m(ve,null)))},i(t){De||(tt(Qt),De=!0)},o(t){et(Qt),De=!1},d(t){t&&(m(e),m(n),m(U),m(K),m(ct),m(ut),m(mt),m(bt),m(Et),m(Ot),m(Ft),m(zt),m(Xt),m(Jt)),Oe&&Oe.d(t),Re.d(),$e&&$e.d(),Be&&Be.d(),Ie&&Ie.d(),ze&&ze.d(),Ne&&Ne.d(),Ve&&Ve.d(),We&&We.d(),He&&He.d(),Ke.d(),Ye&&Ye.d(),Je.d(),Ge&&Ge.d(),en&&en.d(),sn.d(),ln.d(),cn&&cn.d(),hn.d(),fn&&fn.d(),pn[Yt].d(),xn.d(),vn&&vn.d(),_n.d(),Pe=!1,r(Ee)}}}function kg(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',M(n,"class","flex items-center justify-center h-64")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function _g(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,O,T,L,R,$,B,I,j,F,z,N,V,W,H,q=t[13].total+"",U=t[13].duplicateGroups+"",K=t[13].deadLinks+"",Y=t[13].uniqueDomains+"",Q=t[13].addedThisWeek+"",X=t[13].addedThisMonth+"";return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(q),s=w(),o=y("div"),o.textContent="Total Bookmarks",a=w(),l=y("div"),c=y("div"),u=v(U),d=w(),h=y("div"),h.textContent="Duplicate Groups",f=w(),b=y("div"),x=y("div"),k=v(K),_=w(),C=y("div"),C.textContent="Dead Links",S=w(),D=y("div"),P=y("div"),E=v(Y),O=w(),T=y("div"),T.textContent="Unique Domains",L=w(),R=y("div"),$=y("div"),B=v(Q),I=w(),j=y("div"),j.textContent="Added This Week",F=w(),z=y("div"),N=y("div"),V=v(X),W=w(),H=y("div"),H.textContent="Added This Month",M(r,"class","text-2xl font-bold text-blue-600"),M(o,"class","text-xs text-gray-500"),M(n,"class","bg-white p-4 rounded-lg shadow text-center"),M(c,"class","text-2xl font-bold text-red-600"),M(h,"class","text-xs text-gray-500"),M(l,"class","bg-white p-4 rounded-lg shadow text-center"),M(x,"class","text-2xl font-bold text-orange-600"),M(C,"class","text-xs text-gray-500"),M(b,"class","bg-white p-4 rounded-lg shadow text-center"),M(P,"class","text-2xl font-bold text-purple-600"),M(T,"class","text-xs text-gray-500"),M(D,"class","bg-white p-4 rounded-lg shadow text-center"),M($,"class","text-2xl font-bold text-green-600"),M(j,"class","text-xs text-gray-500"),M(R,"class","bg-white p-4 rounded-lg shadow text-center"),M(N,"class","text-2xl font-bold text-cyan-600"),M(H,"class","text-xs text-gray-500"),M(z,"class","bg-white p-4 rounded-lg shadow text-center"),M(e,"class","grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(n,s),g(n,o),g(e,a),g(e,l),g(l,c),g(c,u),g(l,d),g(l,h),g(e,f),g(e,b),g(b,x),g(x,k),g(b,_),g(b,C),g(e,S),g(e,D),g(D,P),g(P,E),g(D,O),g(D,T),g(e,L),g(e,R),g(R,$),g($,B),g(R,I),g(R,j),g(e,F),g(e,z),g(z,N),g(N,V),g(z,W),g(z,H)},p(t,e){8192&e[0]&&q!==(q=t[13].total+"")&&A(i,q),8192&e[0]&&U!==(U=t[13].duplicateGroups+"")&&A(u,U),8192&e[0]&&K!==(K=t[13].deadLinks+"")&&A(k,K),8192&e[0]&&Y!==(Y=t[13].uniqueDomains+"")&&A(E,Y),8192&e[0]&&Q!==(Q=t[13].addedThisWeek+"")&&A(B,Q),8192&e[0]&&X!==(X=t[13].addedThisMonth+"")&&A(V,X)},d(t){t&&m(e)}}}function Cg(t){let e;return{c(){e=v("Run Enrichment")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function Mg(t){let e;return{c(){e=y("span"),e.innerHTML='<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n                    Enriching...',M(e,"class","flex items-center")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function Sg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[15].queueSize+"",b=t[15].enabled?"Enabled":"Disabled";return{c(){e=y("div"),n=y("span"),r=v("Queue: "),i=y("strong"),s=v(f),o=v(" bookmarks pending"),a=w(),l=y("span"),c=v("Status: "),u=y("strong"),d=v(b),M(i,"class","text-purple-600"),M(n,"class","text-gray-600"),M(u,"class",h=t[15].enabled?"text-green-600":"text-gray-500"),M(l,"class","text-gray-600"),M(e,"class","flex flex-wrap gap-4 text-sm mb-4")},m(t,h){p(t,e,h),g(e,n),g(n,r),g(n,i),g(i,s),g(n,o),g(e,a),g(e,l),g(l,c),g(l,u),g(u,d)},p(t,e){32768&e[0]&&f!==(f=t[15].queueSize+"")&&A(s,f),32768&e[0]&&b!==(b=t[15].enabled?"Enabled":"Disabled")&&A(d,b),32768&e[0]&&h!==(h=t[15].enabled?"text-green-600":"text-gray-500")&&M(u,"class",h)},d(t){t&&m(e)}}}function Ag(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x=(t[18].completed||t[18].current)+"",k=t[18].total+"",_=t[18].title&&Dg(t);return{c(){e=y("div"),n=y("div"),r=y("div"),i=y("span"),i.textContent="Processing...",s=w(),o=y("span"),a=v(x),l=v(" / "),c=v(k),u=v(" completed"),d=w(),h=y("div"),f=y("div"),b=w(),_&&_.c(),M(i,"class","text-sm font-medium text-blue-900"),M(o,"class","text-sm text-blue-700"),M(r,"class","flex justify-between items-center mb-2"),M(f,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),P(f,"width",(t[18].completed||t[18].current)/t[18].total*100+"%"),M(h,"class","w-full bg-blue-200 rounded-full h-2"),M(n,"class","mb-3"),M(e,"class","mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(r,s),g(r,o),g(o,a),g(o,l),g(o,c),g(o,u),g(n,d),g(n,h),g(h,f),g(e,b),_&&_.m(e,null)},p(t,n){262144&n[0]&&x!==(x=(t[18].completed||t[18].current)+"")&&A(a,x),262144&n[0]&&k!==(k=t[18].total+"")&&A(c,k),262144&n[0]&&P(f,"width",(t[18].completed||t[18].current)/t[18].total*100+"%"),t[18].title?_?_.p(t,n):(_=Dg(t),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(t){t&&m(e),_&&_.d()}}}function Dg(t){let e,n,r,i,s,o,a,l,c,u="processing"===t[18].status?"":"completed"===t[18].status?"":"",d=t[18].title+"",h=t[18].url+"";return{c(){e=y("div"),n=y("div"),r=v(u),i=w(),s=v(d),a=w(),l=y("div"),c=v(h),M(n,"class","font-medium truncate"),M(n,"title",o=t[18].url),M(l,"class","text-blue-600 truncate text-[10px]"),M(e,"class","text-xs text-blue-800 space-y-1")},m(t,o){p(t,e,o),g(e,n),g(n,r),g(n,i),g(n,s),g(e,a),g(e,l),g(l,c)},p(t,e){262144&e[0]&&u!==(u="processing"===t[18].status?"":"completed"===t[18].status?"":"")&&A(r,u),262144&e[0]&&d!==(d=t[18].title+"")&&A(s,d),262144&e[0]&&o!==(o=t[18].url)&&M(n,"title",o),262144&e[0]&&h!==(h=t[18].url+"")&&A(c,h)},d(t){t&&m(e)}}}function Pg(t){let e,n;function r(t,e){return t[17].error?Og:Eg}let i=r(t),s=i(t);return{c(){e=y("div"),s.c(),M(e,"class",n="mt-4 p-4 rounded-lg "+(t[17].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))},m(t,n){p(t,e,n),s.m(e,null)},p(t,o){i===(i=r(t))&&s?s.p(t,o):(s.d(1),s=i(t),s&&(s.c(),s.m(e,null))),131072&o[0]&&n!==(n="mt-4 p-4 rounded-lg "+(t[17].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))&&M(e,"class",n)},d(t){t&&m(e),s.d()}}}function Eg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b=(t[17].processed||0)+"",x=(t[17].success||0)+"",k=t[17].failed>0&&Tg(t),_=t[17].skipped>0&&Lg(t);return{c(){e=y("div"),n=y("div"),n.innerHTML="<strong>Enrichment Complete!</strong>",r=w(),i=y("div"),s=v("Processed: "),o=v(b),a=v(" bookmarks"),l=w(),c=y("div"),u=v("Successful: "),d=v(x),h=w(),k&&k.c(),f=w(),_&&_.c(),M(e,"class","text-green-700 text-sm space-y-1")},m(t,m){p(t,e,m),g(e,n),g(e,r),g(e,i),g(i,s),g(i,o),g(i,a),g(e,l),g(e,c),g(c,u),g(c,d),g(e,h),k&&k.m(e,null),g(e,f),_&&_.m(e,null)},p(t,n){131072&n[0]&&b!==(b=(t[17].processed||0)+"")&&A(o,b),131072&n[0]&&x!==(x=(t[17].success||0)+"")&&A(d,x),t[17].failed>0?k?k.p(t,n):(k=Tg(t),k.c(),k.m(e,f)):k&&(k.d(1),k=null),t[17].skipped>0?_?_.p(t,n):(_=Lg(t),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(t){t&&m(e),k&&k.d(),_&&_.d()}}}function Og(t){let e,n,r,i,s=t[17].error+"";return{c(){e=y("div"),n=y("strong"),n.textContent="Error:",r=w(),i=v(s),M(e,"class","text-red-700 text-sm")},m(t,s){p(t,e,s),g(e,n),g(e,r),g(e,i)},p(t,e){131072&e[0]&&s!==(s=t[17].error+"")&&A(i,s)},d(t){t&&m(e)}}}function Tg(t){let e,n,r,i=t[17].failed+"";return{c(){e=y("div"),n=v("Failed: "),r=v(i),M(e,"class","text-orange-600")},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){131072&e[0]&&i!==(i=t[17].failed+"")&&A(r,i)},d(t){t&&m(e)}}}function Lg(t){let e,n,r,i=t[17].skipped+"";return{c(){e=y("div"),n=v("Skipped (already enriched): "),r=v(i),M(e,"class","text-gray-600")},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){131072&e[0]&&i!==(i=t[17].skipped+"")&&A(r,i)},d(t){t&&m(e)}}}function Rg(e){let n;return{c(){n=y("p"),n.textContent='Click "Run Enrichment" to fetch metadata for bookmarks that haven\'t been enriched yet. \n                  Only new bookmarks without descriptions or categories will be processed.',M(n,"class","text-gray-500 text-sm")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function $g(t){let e,n,r,i,s,o,a,l=t[19].length+"",c=nt(t[19].slice().reverse()),u=[];for(let e=0;e<c.length;e+=1)u[e]=Bg(fg(t,c,e));return{c(){e=y("details"),n=y("summary"),r=v("View Detailed Logs ("),i=v(l),s=v(")"),o=w(),a=y("div");for(let t=0;t<u.length;t+=1)u[t].c();M(n,"class","cursor-pointer text-sm text-gray-600 hover:text-gray-800 font-medium"),M(a,"class","mt-2 max-h-64 overflow-y-auto bg-gray-50 rounded p-3 space-y-1 text-xs font-mono"),M(e,"class","mt-4")},m(t,l){p(t,e,l),g(e,n),g(n,r),g(n,i),g(n,s),g(e,o),g(e,a);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(a,null)},p(t,e){if(524288&e[0]&&l!==(l=t[19].length+"")&&A(i,l),524288&e[0]){let n;for(c=nt(t[19].slice().reverse()),n=0;n<c.length;n+=1){const r=fg(t,c,n);u[n]?u[n].p(r,e):(u[n]=Bg(r),u[n].c(),u[n].m(a,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}},d(t){t&&m(e),b(u,t)}}}function Bg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k=new Date(t[198].timestamp).toLocaleTimeString()+"",_=t[198].current+"",C=t[198].total+"",S="completed"===t[198].status?"":"failed"===t[198].status||"error"===t[198].status?"":"",D=(t[198].title||t[198].url)+"";return{c(){e=y("div"),n=y("span"),r=v(k),i=v(" \n                        ["),s=v(_),o=v("/"),a=v(C),l=v("] \n                        "),c=v(S),u=w(),d=y("span"),h=v(D),b=w(),M(n,"class","text-gray-400"),M(d,"class","truncate inline-block max-w-md"),M(d,"title",f=t[198].url),M(e,"class",x="completed"===t[198].status?"text-green-700":"failed"===t[198].status||"error"===t[198].status?"text-red-700":"text-gray-600")},m(t,f){p(t,e,f),g(e,n),g(n,r),g(e,i),g(e,s),g(e,o),g(e,a),g(e,l),g(e,c),g(e,u),g(e,d),g(d,h),g(e,b)},p(t,n){524288&n[0]&&k!==(k=new Date(t[198].timestamp).toLocaleTimeString()+"")&&A(r,k),524288&n[0]&&_!==(_=t[198].current+"")&&A(s,_),524288&n[0]&&C!==(C=t[198].total+"")&&A(a,C),524288&n[0]&&S!==(S="completed"===t[198].status?"":"failed"===t[198].status||"error"===t[198].status?"":"")&&A(c,S),524288&n[0]&&D!==(D=(t[198].title||t[198].url)+"")&&A(h,D),524288&n[0]&&f!==(f=t[198].url)&&M(d,"title",f),524288&n[0]&&x!==(x="completed"===t[198].status?"text-green-700":"failed"===t[198].status||"error"===t[198].status?"text-red-700":"text-gray-600")&&M(e,"class",x)},d(t){t&&m(e)}}}function Ig(t){let e,n,r,i=t[11].length+"";return{c(){e=v("("),n=v(i),r=v(")")},m(t,i){p(t,e,i),p(t,n,i),p(t,r,i)},p(t,e){2048&e[0]&&i!==(i=t[11].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function jg(t){let e,n,i,s,o,a,l,c;function u(t,e){return t[47]?zg:Fg}let d=u(t),h=d(t);function f(t,e){return t[26]?Vg:Ng}let b=f(t),x=b(t);return{c(){e=y("div"),n=y("button"),h.c(),s=w(),o=y("button"),x.c(),n.disabled=i=t[47]||t[26],M(n,"class","px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),M(n,"title","Re-check all dead links to see if they're alive again"),o.disabled=a=t[26]||t[47],M(o,"class","px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),M(e,"class","flex gap-2")},m(r,i){p(r,e,i),g(e,n),h.m(n,null),g(e,s),g(e,o),x.m(o,null),l||(c=[_(n,"click",t[72]),_(o,"click",t[71])],l=!0)},p(t,e){d!==(d=u(t))&&(h.d(1),h=d(t),h&&(h.c(),h.m(n,null))),67108864&e[0]|65536&e[1]&&i!==(i=t[47]||t[26])&&(n.disabled=i),b!==(b=f(t))&&(x.d(1),x=b(t),x&&(x.c(),x.m(o,null))),67108864&e[0]|65536&e[1]&&a!==(a=t[26]||t[47])&&(o.disabled=a)},d(t){t&&m(e),h.d(),x.d(),l=!1,r(c)}}}function Fg(t){let e;return{c(){e=v(" Re-check All")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function zg(t){let e,n;return{c(){e=y("div"),n=v("\n                      Re-checking..."),M(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,r){p(t,e,r),p(t,n,r)},d(t){t&&(m(e),m(n))}}}function Ng(t){let e;return{c(){e=v(" Delete All")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function Vg(t){let e,n;return{c(){e=y("div"),n=v("\n                      Deleting..."),M(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,r){p(t,e,r),p(t,n,r)},d(t){t&&(m(e),m(n))}}}function Wg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k=t[48].current+"",_=t[48].total+"",C=(t[48].title||t[48].url)+"";return{c(){e=y("div"),n=y("div"),r=y("span"),r.textContent="Re-checking dead links...",i=w(),s=y("span"),o=v(k),a=v("/"),l=v(_),c=w(),u=y("div"),d=y("div"),h=w(),f=y("p"),b=v("Checking: "),x=v(C),M(r,"class","text-sm font-medium text-blue-800"),M(s,"class","text-sm text-blue-600"),M(n,"class","flex items-center justify-between mb-2"),M(d,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),P(d,"width",t[48].current/t[48].total*100+"%"),M(u,"class","w-full bg-blue-200 rounded-full h-2 mb-2"),M(f,"class","text-xs text-blue-600 truncate"),M(e,"class","mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(n,i),g(n,s),g(s,o),g(s,a),g(s,l),g(e,c),g(e,u),g(u,d),g(e,h),g(e,f),g(f,b),g(f,x)},p(t,e){131072&e[1]&&k!==(k=t[48].current+"")&&A(o,k),131072&e[1]&&_!==(_=t[48].total+"")&&A(l,_),131072&e[1]&&P(d,"width",t[48].current/t[48].total*100+"%"),131072&e[1]&&C!==(C=(t[48].title||t[48].url)+"")&&A(x,C)},d(t){t&&m(e)}}}function Hg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,O,T,L,R,$,B=t[49].total+"",I=t[49].success+"",j=t[49].stillDead+"",F=t[49].errors+"";return{c(){e=y("div"),n=y("h4"),n.textContent="Re-check Complete",r=w(),i=y("div"),s=y("div"),o=y("div"),a=v(B),l=w(),c=y("div"),c.textContent="Total Checked",u=w(),d=y("div"),h=y("div"),f=v(I),b=w(),x=y("div"),x.textContent="Now Alive",k=w(),_=y("div"),C=y("div"),S=v(j),D=w(),P=y("div"),P.textContent="Still Dead",E=w(),O=y("div"),T=y("div"),L=v(F),R=w(),$=y("div"),$.textContent="Errors",M(n,"class","text-sm font-semibold text-green-800 mb-2"),M(o,"class","text-lg font-bold text-green-700"),M(c,"class","text-xs text-green-600"),M(s,"class","text-center"),M(h,"class","text-lg font-bold text-green-700"),M(x,"class","text-xs text-green-600"),M(d,"class","text-center"),M(C,"class","text-lg font-bold text-red-700"),M(P,"class","text-xs text-red-600"),M(_,"class","text-center"),M(T,"class","text-lg font-bold text-yellow-700"),M($,"class","text-xs text-yellow-600"),M(O,"class","text-center"),M(i,"class","grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"),M(e,"class","mb-4 p-4 bg-green-50 rounded-lg border border-green-200")},m(t,m){p(t,e,m),g(e,n),g(e,r),g(e,i),g(i,s),g(s,o),g(o,a),g(s,l),g(s,c),g(i,u),g(i,d),g(d,h),g(h,f),g(d,b),g(d,x),g(i,k),g(i,_),g(_,C),g(C,S),g(_,D),g(_,P),g(i,E),g(i,O),g(O,T),g(T,L),g(O,R),g(O,$)},p(t,e){262144&e[1]&&B!==(B=t[49].total+"")&&A(a,B),262144&e[1]&&I!==(I=t[49].success+"")&&A(f,I),262144&e[1]&&j!==(j=t[49].stillDead+"")&&A(S,j),262144&e[1]&&F!==(F=t[49].errors+"")&&A(L,F)},d(t){t&&m(e)}}}function qg(t){let e,n,r,i,s=t[23]&&t[23].total>0&&Yg(t),o=nt(t[11].slice(0,t[31])),a=[];for(let e=0;e<o.length;e+=1)a[e]=sp(ug(t,o,e));let l=t[11].length>t[31]&&op(t);return{c(){s&&s.c(),e=w(),n=y("div");for(let t=0;t<a.length;t+=1)a[t].c();r=w(),l&&l.c(),i=k(),M(n,"class","space-y-2 max-h-[32rem] overflow-y-auto")},m(t,o){s&&s.m(t,o),p(t,e,o),p(t,n,o);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(n,null);p(t,r,o),l&&l.m(t,o),p(t,i,o)},p(t,r){if(t[23]&&t[23].total>0?s?s.p(t,r):(s=Yg(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),2048&r[0]|1&r[1]|256&r[2]){let e;for(o=nt(t[11].slice(0,t[31])),e=0;e<o.length;e+=1){const i=ug(t,o,e);a[e]?a[e].p(i,r):(a[e]=sp(i),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=o.length}t[11].length>t[31]?l?l.p(t,r):(l=op(t),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){t&&(m(e),m(n),m(r),m(i)),s&&s.d(t),b(a,t),l&&l.d(t)}}}function Ug(e){let n;return{c(){n=y("p"),n.textContent="No dead links detected. Run enrichment to check bookmark availability.",M(n,"class","text-gray-500")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function Kg(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"></div> <span class="ml-3 text-gray-500">Loading dead links...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function Yg(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S,D,P,E,O,T,L,R,$,B,I,j,F,z,N,V,W,H,q,U,K=t[23].total+"",Y=t[23].deadLinkRate+"",Q=t[23].checkedCount+"",X=t[23].byDomain.length+"",J=t[23].byAge.recent>0&&Qg(t),G=t[23].byAge.moderate>0&&Xg(t),Z=t[23].byAge.old>0&&Jg(t),tt=t[23].byAge.ancient>0&&Gg(t),et=t[23].byDomain.length>0&&Zg(t),nt=t[23].byCategory.length>0&&ep(t);return{c(){e=y("div"),n=y("h4"),n.textContent=" Dead Link Insights",r=w(),i=y("div"),s=y("div"),o=y("div"),a=v(K),l=w(),c=y("div"),c.textContent="Total Dead",u=w(),d=y("div"),h=y("div"),f=v(Y),b=v("%"),x=w(),k=y("div"),k.textContent="Dead Link Rate",_=w(),C=y("div"),S=y("div"),D=v(Q),P=w(),E=y("div"),E.textContent="Total Checked",O=w(),T=y("div"),L=y("div"),R=v(X),$=w(),B=y("div"),B.textContent="Affected Domains",I=w(),j=y("div"),F=y("h5"),F.textContent="By Bookmark Age",z=w(),N=y("div"),J&&J.c(),V=w(),G&&G.c(),W=w(),Z&&Z.c(),H=w(),tt&&tt.c(),q=w(),et&&et.c(),U=w(),nt&&nt.c(),M(n,"class","text-sm font-semibold text-red-800 mb-3"),M(o,"class","text-2xl font-bold text-red-700"),M(c,"class","text-xs text-red-600"),M(s,"class","text-center"),M(h,"class","text-2xl font-bold text-red-700"),M(k,"class","text-xs text-red-600"),M(d,"class","text-center"),M(S,"class","text-2xl font-bold text-red-700"),M(E,"class","text-xs text-red-600"),M(C,"class","text-center"),M(L,"class","text-2xl font-bold text-red-700"),M(B,"class","text-xs text-red-600"),M(T,"class","text-center"),M(i,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"),M(F,"class","text-xs font-medium text-red-700 mb-2"),M(N,"class","flex gap-2 flex-wrap"),M(j,"class","mb-4"),M(e,"class","mb-6 p-4 bg-red-50 rounded-lg border border-red-200")},m(t,m){p(t,e,m),g(e,n),g(e,r),g(e,i),g(i,s),g(s,o),g(o,a),g(s,l),g(s,c),g(i,u),g(i,d),g(d,h),g(h,f),g(h,b),g(d,x),g(d,k),g(i,_),g(i,C),g(C,S),g(S,D),g(C,P),g(C,E),g(i,O),g(i,T),g(T,L),g(L,R),g(T,$),g(T,B),g(e,I),g(e,j),g(j,F),g(j,z),g(j,N),J&&J.m(N,null),g(N,V),G&&G.m(N,null),g(N,W),Z&&Z.m(N,null),g(N,H),tt&&tt.m(N,null),g(e,q),et&&et.m(e,null),g(e,U),nt&&nt.m(e,null)},p(t,n){8388608&n[0]&&K!==(K=t[23].total+"")&&A(a,K),8388608&n[0]&&Y!==(Y=t[23].deadLinkRate+"")&&A(f,Y),8388608&n[0]&&Q!==(Q=t[23].checkedCount+"")&&A(D,Q),8388608&n[0]&&X!==(X=t[23].byDomain.length+"")&&A(R,X),t[23].byAge.recent>0?J?J.p(t,n):(J=Qg(t),J.c(),J.m(N,V)):J&&(J.d(1),J=null),t[23].byAge.moderate>0?G?G.p(t,n):(G=Xg(t),G.c(),G.m(N,W)):G&&(G.d(1),G=null),t[23].byAge.old>0?Z?Z.p(t,n):(Z=Jg(t),Z.c(),Z.m(N,H)):Z&&(Z.d(1),Z=null),t[23].byAge.ancient>0?tt?tt.p(t,n):(tt=Gg(t),tt.c(),tt.m(N,null)):tt&&(tt.d(1),tt=null),t[23].byDomain.length>0?et?et.p(t,n):(et=Zg(t),et.c(),et.m(e,U)):et&&(et.d(1),et=null),t[23].byCategory.length>0?nt?nt.p(t,n):(nt=ep(t),nt.c(),nt.m(e,null)):nt&&(nt.d(1),nt=null)},d(t){t&&m(e),J&&J.d(),G&&G.d(),Z&&Z.d(),tt&&tt.d(),et&&et.d(),nt&&nt.d()}}}function Qg(t){let e,n,r,i=t[23].byAge.recent+"";return{c(){e=y("span"),n=v("< 1 week: "),r=v(i),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){8388608&e[0]&&i!==(i=t[23].byAge.recent+"")&&A(r,i)},d(t){t&&m(e)}}}function Xg(t){let e,n,r,i=t[23].byAge.moderate+"";return{c(){e=y("span"),n=v("1 week - 1 month: "),r=v(i),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){8388608&e[0]&&i!==(i=t[23].byAge.moderate+"")&&A(r,i)},d(t){t&&m(e)}}}function Jg(t){let e,n,r,i=t[23].byAge.old+"";return{c(){e=y("span"),n=v("1 month - 1 year: "),r=v(i),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){8388608&e[0]&&i!==(i=t[23].byAge.old+"")&&A(r,i)},d(t){t&&m(e)}}}function Gg(t){let e,n,r,i=t[23].byAge.ancient+"";return{c(){e=y("span"),n=v("> 1 year: "),r=v(i),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){8388608&e[0]&&i!==(i=t[23].byAge.ancient+"")&&A(r,i)},d(t){t&&m(e)}}}function Zg(t){let e,n,r,i,s=nt(t[23].byDomain.slice(0,5)),o=[];for(let e=0;e<s.length;e+=1)o[e]=tp(hg(t,s,e));return{c(){e=y("div"),n=y("h5"),n.textContent="Top Domains with Dead Links",r=w(),i=y("div");for(let t=0;t<o.length;t+=1)o[t].c();M(n,"class","text-xs font-medium text-red-700 mb-2"),M(i,"class","flex gap-2 flex-wrap"),M(e,"class","mb-4")},m(t,s){p(t,e,s),g(e,n),g(e,r),g(e,i);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(i,null)},p(t,e){if(8388608&e[0]){let n;for(s=nt(t[23].byDomain.slice(0,5)),n=0;n<s.length;n+=1){const r=hg(t,s,n);o[n]?o[n].p(r,e):(o[n]=tp(r),o[n].c(),o[n].m(i,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=s.length}},d(t){t&&m(e),b(o,t)}}}function tp(t){let e,n,r,i,s,o=t[195].domain+"",a=t[195].count+"";return{c(){e=y("span"),n=v(o),r=v(": "),i=v(a),s=w(),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,o){p(t,e,o),g(e,n),g(e,r),g(e,i),g(e,s)},p(t,e){8388608&e[0]&&o!==(o=t[195].domain+"")&&A(n,o),8388608&e[0]&&a!==(a=t[195].count+"")&&A(i,a)},d(t){t&&m(e)}}}function ep(t){let e,n,r,i,s=nt(t[23].byCategory.slice(0,5)),o=[];for(let e=0;e<s.length;e+=1)o[e]=np(dg(t,s,e));return{c(){e=y("div"),n=y("h5"),n.textContent="By Category",r=w(),i=y("div");for(let t=0;t<o.length;t+=1)o[t].c();M(n,"class","text-xs font-medium text-red-700 mb-2"),M(i,"class","flex gap-2 flex-wrap")},m(t,s){p(t,e,s),g(e,n),g(e,r),g(e,i);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(i,null)},p(t,e){if(8388608&e[0]){let n;for(s=nt(t[23].byCategory.slice(0,5)),n=0;n<s.length;n+=1){const r=dg(t,s,n);o[n]?o[n].p(r,e):(o[n]=np(r),o[n].c(),o[n].m(i,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=s.length}},d(t){t&&m(e),b(o,t)}}}function np(t){let e,n,r,i,s,o=t[192].category+"",a=t[192].count+"";return{c(){e=y("span"),n=v(o),r=v(": "),i=v(a),s=w(),M(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,o){p(t,e,o),g(e,n),g(e,r),g(e,i),g(e,s)},p(t,e){8388608&e[0]&&o!==(o=t[192].category+"")&&A(n,o),8388608&e[0]&&a!==(a=t[192].count+"")&&A(i,a)},d(t){t&&m(e)}}}function rp(t){let e,n,r,i=t[159].domain+"";return{c(){e=y("span"),n=v(" "),r=v(i),M(e,"class","text-gray-500")},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){2048&e[0]|1&e[1]&&i!==(i=t[159].domain+"")&&A(r,i)},d(t){t&&m(e)}}}function ip(t){let e,n,r,i=t[159].category+"";return{c(){e=y("span"),n=v(" "),r=v(i),M(e,"class","text-gray-500")},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){2048&e[0]|1&e[1]&&i!==(i=t[159].category+"")&&A(r,i)},d(t){t&&m(e)}}}function sp(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,O,T,L,R,$=t[159].title+"",B=t[159].url+"",I=(t[159].lastChecked?new Date(t[159].lastChecked).toLocaleDateString():"Unknown")+"",j=t[159].domain&&rp(t),F=t[159].category&&ip(t);function z(){return t[107](t[159])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=y("div"),s=v($),o=w(),a=y("div"),l=v(B),c=w(),u=y("div"),d=y("span"),h=v("Last checked: "),f=v(I),b=w(),j&&j.c(),x=w(),F&&F.c(),k=w(),C=y("div"),S=y("a"),D=v("Try Again"),E=w(),O=y("button"),O.textContent="Delete",T=w(),M(i,"class","text-sm font-medium text-gray-800 truncate"),M(a,"class","text-xs text-gray-500 truncate"),M(u,"class","text-xs text-red-600 mt-1 flex items-center gap-3"),M(r,"class","flex-1 min-w-0"),M(S,"href",P=t[159].url),M(S,"target","_blank"),M(S,"rel","noopener noreferrer"),M(S,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300"),M(O,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(C,"class","flex gap-1 ml-2 flex-shrink-0"),M(n,"class","flex items-start justify-between"),M(e,"class","p-3 bg-red-50 rounded border border-red-200")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(i,s),g(r,o),g(r,a),g(a,l),g(r,c),g(r,u),g(u,d),g(d,h),g(d,f),g(u,b),j&&j.m(u,null),g(u,x),F&&F.m(u,null),g(n,k),g(n,C),g(C,S),g(S,D),g(C,E),g(C,O),g(e,T),L||(R=_(O,"click",z),L=!0)},p(e,n){t=e,2048&n[0]|1&n[1]&&$!==($=t[159].title+"")&&A(s,$),2048&n[0]|1&n[1]&&B!==(B=t[159].url+"")&&A(l,B),2048&n[0]|1&n[1]&&I!==(I=(t[159].lastChecked?new Date(t[159].lastChecked).toLocaleDateString():"Unknown")+"")&&A(f,I),t[159].domain?j?j.p(t,n):(j=rp(t),j.c(),j.m(u,x)):j&&(j.d(1),j=null),t[159].category?F?F.p(t,n):(F=ip(t),F.c(),F.m(u,null)):F&&(F.d(1),F=null),2048&n[0]|1&n[1]&&P!==(P=t[159].url)&&M(S,"href",P)},d(t){t&&m(e),j&&j.d(),F&&F.d(),L=!1,R()}}}function op(t){let e,n,r,i,s,o,a,l,c,u=t[11].length+"";return{c(){e=y("div"),n=y("button"),r=v("Load More ("),i=v(t[31]),s=v(" of "),o=v(u),a=v(" shown)"),M(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),M(e,"class","mt-4 text-center")},m(u,d){p(u,e,d),g(e,n),g(n,r),g(n,i),g(n,s),g(n,o),g(n,a),l||(c=_(n,"click",t[69]),l=!0)},p(t,e){1&e[1]&&A(i,t[31]),2048&e[0]&&u!==(u=t[11].length+"")&&A(o,u)},d(t){t&&m(e),l=!1,c()}}}function ap(t){let e,n,r,i=t[9].length+"";return{c(){e=v("("),n=v(i),r=v(" groups)")},m(t,i){p(t,e,i),p(t,n,i),p(t,r,i)},p(t,e){512&e[0]&&i!==(i=t[9].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function lp(t){let e,n,r,i=nt(t[9].slice(0,t[29])),s=[];for(let e=0;e<i.length;e+=1)s[e]=hp(lg(t,i,e));let o=t[9].length>t[29]&&fp(t);return{c(){e=y("div");for(let t=0;t<s.length;t+=1)s[t].c();n=w(),o&&o.c(),r=k(),M(e,"class","space-y-6 max-h-[32rem] overflow-y-auto")},m(t,i){p(t,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);p(t,n,i),o&&o.m(t,i),p(t,r,i)},p(t,n){if(536871424&n[0]|2048&n[2]){let r;for(i=nt(t[9].slice(0,t[29])),r=0;r<i.length;r+=1){const o=lg(t,i,r);s[r]?s[r].p(o,n):(s[r]=hp(o),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}t[9].length>t[29]?o?o.p(t,n):(o=fp(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(t){t&&(m(e),m(n),m(r)),b(s,t),o&&o.d(t)}}}function cp(e){let n;return{c(){n=y("p"),n.textContent="No duplicate bookmarks found. Great!",M(n,"class","text-gray-500")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function up(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-500">Finding duplicates...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function dp(t){let e,n,r,i,s,o,a,l,c,u=t[159].title+"",d=(t[159].folderPath||"No folder")+"",h=t[169]>0&&function(t){let e,n,r;function i(){return t[108](t[159],t[188])}return{c(){e=y("button"),e.textContent="Delete",M(e,"class","ml-4 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 flex-shrink-0")},m(t,s){p(t,e,s),n||(r=_(e,"click",i),n=!0)},p(e,n){t=e},d(t){t&&m(e),n=!1,r()}}}(t);return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(u),s=w(),o=y("div"),a=v(d),l=w(),h&&h.c(),c=w(),M(r,"class","text-sm font-medium truncate"),M(o,"class","text-xs text-gray-500"),M(n,"class","flex-1 min-w-0"),M(e,"class","flex items-center justify-between p-2 bg-gray-50 rounded")},m(t,u){p(t,e,u),g(e,n),g(n,r),g(r,i),g(n,s),g(n,o),g(o,a),g(e,l),h&&h.m(e,null),g(e,c)},p(t,e){536871424&e[0]&&u!==(u=t[159].title+"")&&A(i,u),536871424&e[0]&&d!==(d=(t[159].folderPath||"No folder")+"")&&A(a,d),t[169]>0&&h.p(t,e)},d(t){t&&m(e),h&&h.d()}}}function hp(t){let e,n,r,i,s,o,a,l=t[186][0].url+"",c=nt(t[186]),u=[];for(let e=0;e<c.length;e+=1)u[e]=dp(cg(t,c,e));return{c(){e=y("div"),n=y("h4"),r=v(l),s=w(),o=y("div");for(let t=0;t<u.length;t+=1)u[t].c();a=w(),M(n,"class","font-medium text-gray-900 mb-3 truncate"),M(n,"title",i=t[186][0].url),M(o,"class","space-y-2"),M(e,"class","border border-gray-200 rounded-lg p-4")},m(t,i){p(t,e,i),g(e,n),g(n,r),g(e,s),g(e,o);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(o,null);g(e,a)},p(t,e){if(536871424&e[0]&&l!==(l=t[186][0].url+"")&&A(r,l),536871424&e[0]&&i!==(i=t[186][0].url)&&M(n,"title",i),536871424&e[0]|2048&e[2]){let n;for(c=nt(t[186]),n=0;n<c.length;n+=1){const r=cg(t,c,n);u[n]?u[n].p(r,e):(u[n]=dp(r),u[n].c(),u[n].m(o,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}},d(t){t&&m(e),b(u,t)}}}function fp(t){let e,n,r,i,s,o,a,l,c,u=t[9].length+"";return{c(){e=y("div"),n=y("button"),r=v("Load More ("),i=v(t[29]),s=v(" of "),o=v(u),a=v(" shown)"),M(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),M(e,"class","mt-4 text-center")},m(u,d){p(u,e,d),g(e,n),g(n,r),g(n,i),g(n,s),g(n,o),g(n,a),l||(c=_(n,"click",t[67]),l=!0)},p(t,e){536870912&e[0]&&A(i,t[29]),512&e[0]&&u!==(u=t[9].length+"")&&A(o,u)},d(t){t&&m(e),l=!1,c()}}}function gp(t){let e,n,r,i=t[33].total+"";return{c(){e=v("("),n=v(i),r=v(" pairs)")},m(t,i){p(t,e,i),p(t,n,i),p(t,r,i)},p(t,e){4&e[1]&&i!==(i=t[33].total+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function pp(e){let n;return{c(){n=y("span"),n.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>\n                    Fresh analysis',M(n,"class","inline-flex items-center gap-1.5 px-2.5 py-1 text-xs bg-green-50 text-green-700 border border-green-200 rounded-md")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function mp(t){let e,n,r,i,s,o,a,l,c,u,d,h=Math.round((t[34].cacheAge||0)/6e4)+"";return{c(){e=y("span"),n=x("svg"),r=x("path"),i=v("\n                    Cached "),s=v(h),o=v("m ago"),a=w(),l=y("button"),c=v(" Refresh"),M(r,"fill-rule","evenodd"),M(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"),M(r,"clip-rule","evenodd"),M(n,"class","w-3.5 h-3.5"),M(n,"fill","currentColor"),M(n,"viewBox","0 0 20 20"),M(e,"class","inline-flex items-center gap-1.5 px-2.5 py-1 text-xs bg-amber-50 text-amber-700 border border-amber-200 rounded-md"),M(e,"title","Loaded from cache"),l.disabled=t[28],M(l,"class","px-2.5 py-1.5 text-xs text-indigo-600 bg-indigo-50 hover:bg-indigo-100 border border-indigo-200 rounded-md disabled:opacity-50"),M(l,"title","Force refresh - recompute similarity analysis")},m(h,f){p(h,e,f),g(e,n),g(n,r),g(e,i),g(e,s),g(e,o),p(h,a,f),p(h,l,f),g(l,c),u||(d=_(l,"click",t[109]),u=!0)},p(t,e){8&e[1]&&h!==(h=Math.round((t[34].cacheAge||0)/6e4)+"")&&A(s,h),268435456&e[0]&&(l.disabled=t[28])},d(t){t&&(m(e),m(a),m(l)),u=!1,d()}}}function bp(t){let e;return{c(){e=v(" Run Analysis")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function yp(t){let e,n;return{c(){e=y("div"),n=v("\n                    Analyzing..."),M(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,r){p(t,e,r),p(t,n,r)},d(t){t&&(m(e),m(n))}}}function xp(t){let e,n,r,i,s=t[33]&&_p(t),o=nt(t[32].slice(0,t[30])),a=[];for(let e=0;e<o.length;e+=1)a[e]=Sp(ag(t,o,e));let l=t[32].length>t[30]&&Ap(t);return{c(){s&&s.c(),e=w(),n=y("div");for(let t=0;t<a.length;t+=1)a[t].c();r=w(),l&&l.c(),i=k(),M(n,"class","space-y-3 max-h-[40rem] overflow-y-auto")},m(t,o){s&&s.m(t,o),p(t,e,o),p(t,n,o);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(n,null);p(t,r,o),l&&l.m(t,o),p(t,i,o)},p(t,r){if(t[33]?s?s.p(t,r):(s=_p(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),1073741824&r[0]|2&r[1]|40960&r[2]){let e;for(o=nt(t[32].slice(0,t[30])),e=0;e<o.length;e+=1){const i=ag(t,o,e);a[e]?a[e].p(i,r):(a[e]=Sp(i),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=o.length}t[32].length>t[30]?l?l.p(t,r):(l=Ap(t),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){t&&(m(e),m(n),m(r),m(i)),s&&s.d(t),b(a,t),l&&l.d(t)}}}function vp(e){let n;return{c(){n=y("p"),n.textContent="No similar bookmarks detected with enhanced matching.",M(n,"class","text-gray-500")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function wp(e){let n;return{c(){n=y("div"),n.innerHTML='<p class="text-gray-500 mb-4">Click &quot;Run Analysis&quot; to detect similar bookmarks using advanced fuzzy matching.</p> <p class="text-xs text-gray-400">This analysis uses title, description, keywords, and domain information to find similar content.</p>',M(n,"class","text-center py-8")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function kp(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div> <span class="ml-3 text-gray-500">Running smart similarity analysis...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function _p(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,_,C,S=t[33].sameDomain+"",D=t[33].crossDomain+"",P=(100*t[33].avgSimilarity).toFixed(0)+"";return{c(){e=y("div"),n=y("div"),r=y("span"),i=y("strong"),s=v(S),o=v(" same-domain pairs"),a=w(),l=y("span"),c=y("strong"),u=v(D),d=v(" cross-domain pairs"),h=w(),f=y("span"),b=v("Avg: "),x=y("strong"),k=v(P),_=v("%"),C=v(" similar"),M(r,"class","text-indigo-700"),M(l,"class","text-indigo-600"),M(f,"class","text-indigo-500"),M(n,"class","flex gap-4 text-sm"),M(e,"class","mb-4 p-3 bg-indigo-50 rounded-lg flex items-center justify-between")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(i,s),g(r,o),g(n,a),g(n,l),g(l,c),g(c,u),g(l,d),g(n,h),g(n,f),g(f,b),g(f,x),g(x,k),g(x,_),g(f,C)},p(t,e){4&e[1]&&S!==(S=t[33].sameDomain+"")&&A(s,S),4&e[1]&&D!==(D=t[33].crossDomain+"")&&A(u,D),4&e[1]&&P!==(P=(100*t[33].avgSimilarity).toFixed(0)+"")&&A(k,P)},d(t){t&&m(e)}}}function Cp(t){let e;return{c(){e=y("span"),e.textContent="Same Domain",M(e,"class","text-xs px-2 py-1 bg-green-100 text-green-700 rounded")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function Mp(t){let e;return{c(){e=y("span"),e.textContent="Same Category",M(e,"class","text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function Sp(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D,P,E,O,T,L,R,$,B,I,j,F,z,N,V,W,H,q,U,K,Y,Q,X,J,G,Z,tt,et,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,ft,gt,pt,mt,bt,yt,xt,vt,wt=Math.round(100*t[183].similarity)+"",kt=t[183].bookmark1.title+"",_t=t[183].bookmark1.url+"",Ct=t[183].coverage1.percentage.toFixed(0)+"",Mt=t[183].bookmark2.title+"",St=t[183].bookmark2.url+"",At=t[183].coverage2.percentage.toFixed(0)+"",Dt=t[183].sameDomain&&Cp(),Pt=t[183].sameCategory&&Mp();function Et(){return t[111](t[183])}function Ot(){return t[112](t[183])}function Tt(){return t[113](t[183])}return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("span"),o=v(wt),a=v("% match"),c=w(),Dt&&Dt.c(),u=w(),Pt&&Pt.c(),d=w(),h=y("button"),h.textContent="Compare Details",f=w(),b=y("div"),x=y("div"),k=y("div"),C=y("div"),S=y("div"),D=v(kt),E=w(),O=y("div"),T=v(_t),R=w(),$=y("div"),B=y("div"),I=v("Coverage: "),j=v(Ct),F=v("%"),z=w(),N=y("div"),V=y("a"),W=v("Open"),q=w(),U=y("button"),U.textContent="Delete",K=w(),Y=y("div"),Q=y("div"),X=y("div"),J=y("div"),G=v(Mt),tt=w(),et=y("div"),nt=v(St),it=w(),st=y("div"),ot=y("div"),at=v("Coverage: "),lt=v(At),ct=v("%"),ut=w(),dt=y("div"),ht=y("a"),ft=v("Open"),pt=w(),mt=y("button"),mt.textContent="Delete",bt=w(),M(s,"class",l="text-xs font-semibold px-2 py-1 rounded "+(t[183].sameDomain?"bg-indigo-200 text-indigo-800":"bg-purple-200 text-purple-800")),M(i,"class","flex items-center gap-2"),M(h,"class","text-xs px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50"),M(n,"class","flex justify-between items-center mb-3"),M(S,"class","text-sm font-medium text-gray-800 truncate"),M(S,"title",P=t[183].bookmark1.title),M(O,"class","text-xs text-gray-500 truncate"),M(O,"title",L=t[183].bookmark1.url),M(C,"class","flex-1 min-w-0"),M(k,"class","flex justify-between items-start mb-2"),M(B,"class","text-xs text-gray-400"),M(V,"href",H=t[183].bookmark1.url),M(V,"target","_blank"),M(V,"rel","noopener"),M(V,"class","px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200"),M(U,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(N,"class","flex gap-1"),M($,"class","flex items-center justify-between mt-2"),M(x,"class","p-3 bg-white rounded border border-gray-200"),M(J,"class","text-sm font-medium text-gray-800 truncate"),M(J,"title",Z=t[183].bookmark2.title),M(et,"class","text-xs text-gray-500 truncate"),M(et,"title",rt=t[183].bookmark2.url),M(X,"class","flex-1 min-w-0"),M(Q,"class","flex justify-between items-start mb-2"),M(ot,"class","text-xs text-gray-400"),M(ht,"href",gt=t[183].bookmark2.url),M(ht,"target","_blank"),M(ht,"rel","noopener"),M(ht,"class","px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200"),M(mt,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(dt,"class","flex gap-1"),M(st,"class","flex items-center justify-between mt-2"),M(Y,"class","p-3 bg-white rounded border border-gray-200"),M(b,"class","grid grid-cols-1 md:grid-cols-2 gap-3"),M(e,"class",yt="border "+(t[183].sameDomain?"border-indigo-200 bg-indigo-50":"border-purple-200 bg-purple-50")+" rounded-lg p-4")},m(t,r){p(t,e,r),g(e,n),g(n,i),g(i,s),g(s,o),g(s,a),g(i,c),Dt&&Dt.m(i,null),g(i,u),Pt&&Pt.m(i,null),g(n,d),g(n,h),g(e,f),g(e,b),g(b,x),g(x,k),g(k,C),g(C,S),g(S,D),g(C,E),g(C,O),g(O,T),g(x,R),g(x,$),g($,B),g(B,I),g(B,j),g(B,F),g($,z),g($,N),g(N,V),g(V,W),g(N,q),g(N,U),g(b,K),g(b,Y),g(Y,Q),g(Q,X),g(X,J),g(J,G),g(X,tt),g(X,et),g(et,nt),g(Y,it),g(Y,st),g(st,ot),g(ot,at),g(ot,lt),g(ot,ct),g(st,ut),g(st,dt),g(dt,ht),g(ht,ft),g(dt,pt),g(dt,mt),g(e,bt),xt||(vt=[_(h,"click",Et),_(U,"click",Ot),_(mt,"click",Tt)],xt=!0)},p(n,r){t=n,1073741824&r[0]|2&r[1]&&wt!==(wt=Math.round(100*t[183].similarity)+"")&&A(o,wt),1073741824&r[0]|2&r[1]&&l!==(l="text-xs font-semibold px-2 py-1 rounded "+(t[183].sameDomain?"bg-indigo-200 text-indigo-800":"bg-purple-200 text-purple-800"))&&M(s,"class",l),t[183].sameDomain?Dt||(Dt=Cp(),Dt.c(),Dt.m(i,u)):Dt&&(Dt.d(1),Dt=null),t[183].sameCategory?Pt||(Pt=Mp(),Pt.c(),Pt.m(i,null)):Pt&&(Pt.d(1),Pt=null),1073741824&r[0]|2&r[1]&&kt!==(kt=t[183].bookmark1.title+"")&&A(D,kt),1073741824&r[0]|2&r[1]&&P!==(P=t[183].bookmark1.title)&&M(S,"title",P),1073741824&r[0]|2&r[1]&&_t!==(_t=t[183].bookmark1.url+"")&&A(T,_t),1073741824&r[0]|2&r[1]&&L!==(L=t[183].bookmark1.url)&&M(O,"title",L),1073741824&r[0]|2&r[1]&&Ct!==(Ct=t[183].coverage1.percentage.toFixed(0)+"")&&A(j,Ct),1073741824&r[0]|2&r[1]&&H!==(H=t[183].bookmark1.url)&&M(V,"href",H),1073741824&r[0]|2&r[1]&&Mt!==(Mt=t[183].bookmark2.title+"")&&A(G,Mt),1073741824&r[0]|2&r[1]&&Z!==(Z=t[183].bookmark2.title)&&M(J,"title",Z),1073741824&r[0]|2&r[1]&&St!==(St=t[183].bookmark2.url+"")&&A(nt,St),1073741824&r[0]|2&r[1]&&rt!==(rt=t[183].bookmark2.url)&&M(et,"title",rt),1073741824&r[0]|2&r[1]&&At!==(At=t[183].coverage2.percentage.toFixed(0)+"")&&A(lt,At),1073741824&r[0]|2&r[1]&&gt!==(gt=t[183].bookmark2.url)&&M(ht,"href",gt),1073741824&r[0]|2&r[1]&&yt!==(yt="border "+(t[183].sameDomain?"border-indigo-200 bg-indigo-50":"border-purple-200 bg-purple-50")+" rounded-lg p-4")&&M(e,"class",yt)},d(t){t&&m(e),Dt&&Dt.d(),Pt&&Pt.d(),xt=!1,r(vt)}}}function Ap(t){let e,n,r,i,s,o,a,l,c,u=t[32].length+"";return{c(){e=y("div"),n=y("button"),r=v("Load More ("),i=v(t[30]),s=v(" of "),o=v(u),a=v(" shown)"),M(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),M(e,"class","mt-4 text-center")},m(u,d){p(u,e,d),g(e,n),g(n,r),g(n,i),g(n,s),g(n,o),g(n,a),l||(c=_(n,"click",t[68]),l=!0)},p(t,e){1073741824&e[0]&&A(i,t[30]),2&e[1]&&u!==(u=t[32].length+"")&&A(o,u)},d(t){t&&m(e),l=!1,c()}}}function Dp(t){let e,n,r,i=t[36].summary.total+"";return{c(){e=v("("),n=v(i),r=v(" found)")},m(t,i){p(t,e,i),p(t,n,i),p(t,r,i)},p(t,e){32&e[1]&&i!==(i=t[36].summary.total+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function Pp(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,_,C,S,D,P,E,O,T,L,R,$,B,I,j,F,z,N,V,W,H,q=(t[36].summary.byCategory.deadLinks||0)+"",U=(t[36].summary.byCategory.oldUnused||0)+"",K=(t[36].summary.byCategory.genericTitles||0)+"",Y=(t[36].summary.byCategory.temporaryUrls||0)+"",Q=(t[36].summary.byCategory.lowScore||0)+"",X=t[36].oldUnused.length>0&&Tp(t),J=t[36].genericTitles.length>0&&$p(t),G=t[36].temporaryUrls.length>0&&jp(t),Z=t[36].lowScore.length>0&&Np(t);return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(q),s=w(),o=y("div"),o.textContent="Dead Links",a=w(),l=y("div"),c=y("div"),u=v(U),d=w(),h=y("div"),h.textContent="Old & Unused",f=w(),b=y("div"),x=y("div"),_=v(K),C=w(),S=y("div"),S.textContent="Generic Titles",D=w(),P=y("div"),E=y("div"),O=v(Y),T=w(),L=y("div"),L.textContent="Temp/Dev URLs",R=w(),$=y("div"),B=y("div"),I=v(Q),j=w(),F=y("div"),F.textContent="Low Quality",z=w(),X&&X.c(),N=w(),J&&J.c(),V=w(),G&&G.c(),W=w(),Z&&Z.c(),H=k(),M(r,"class","text-2xl font-bold text-red-600"),M(o,"class","text-xs text-red-500"),M(n,"class","p-3 bg-red-50 rounded-lg text-center"),M(c,"class","text-2xl font-bold text-orange-600"),M(h,"class","text-xs text-orange-500"),M(l,"class","p-3 bg-orange-50 rounded-lg text-center"),M(x,"class","text-2xl font-bold text-yellow-600"),M(S,"class","text-xs text-yellow-600"),M(b,"class","p-3 bg-yellow-50 rounded-lg text-center"),M(E,"class","text-2xl font-bold text-purple-600"),M(L,"class","text-xs text-purple-500"),M(P,"class","p-3 bg-purple-50 rounded-lg text-center"),M(B,"class","text-2xl font-bold text-gray-600"),M(F,"class","text-xs text-gray-500"),M($,"class","p-3 bg-gray-100 rounded-lg text-center"),M(e,"class","grid grid-cols-2 md:grid-cols-5 gap-3 mb-6")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(n,s),g(n,o),g(e,a),g(e,l),g(l,c),g(c,u),g(l,d),g(l,h),g(e,f),g(e,b),g(b,x),g(x,_),g(b,C),g(b,S),g(e,D),g(e,P),g(P,E),g(E,O),g(P,T),g(P,L),g(e,R),g(e,$),g($,B),g(B,I),g($,j),g($,F),p(t,z,m),X&&X.m(t,m),p(t,N,m),J&&J.m(t,m),p(t,V,m),G&&G.m(t,m),p(t,W,m),Z&&Z.m(t,m),p(t,H,m)},p(t,e){32&e[1]&&q!==(q=(t[36].summary.byCategory.deadLinks||0)+"")&&A(i,q),32&e[1]&&U!==(U=(t[36].summary.byCategory.oldUnused||0)+"")&&A(u,U),32&e[1]&&K!==(K=(t[36].summary.byCategory.genericTitles||0)+"")&&A(_,K),32&e[1]&&Y!==(Y=(t[36].summary.byCategory.temporaryUrls||0)+"")&&A(O,Y),32&e[1]&&Q!==(Q=(t[36].summary.byCategory.lowScore||0)+"")&&A(I,Q),t[36].oldUnused.length>0?X?X.p(t,e):(X=Tp(t),X.c(),X.m(N.parentNode,N)):X&&(X.d(1),X=null),t[36].genericTitles.length>0?J?J.p(t,e):(J=$p(t),J.c(),J.m(V.parentNode,V)):J&&(J.d(1),J=null),t[36].temporaryUrls.length>0?G?G.p(t,e):(G=jp(t),G.c(),G.m(W.parentNode,W)):G&&(G.d(1),G=null),t[36].lowScore.length>0?Z?Z.p(t,e):(Z=Np(t),Z.c(),Z.m(H.parentNode,H)):Z&&(Z.d(1),Z=null)},d(t){t&&(m(e),m(z),m(N),m(V),m(W),m(H)),X&&X.d(t),J&&J.d(t),G&&G.d(t),Z&&Z.d(t)}}}function Ep(e){let n;return{c(){n=y("p"),n.textContent="No cleanup candidates found. Your bookmarks look great!",M(n,"class","text-gray-500")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function Op(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"></div> <span class="ml-3 text-gray-500">Analyzing bookmarks for cleanup...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function Tp(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=t[36].oldUnused.length+"",C=nt(t[36].oldUnused.slice(0,t[37].oldUnused)),S=[];for(let e=0;e<C.length;e+=1)S[e]=Lp(og(t,C,e));let D=t[36].oldUnused.length>t[37].oldUnused&&Rp(t);return{c(){e=y("div"),n=y("div"),r=y("h4"),i=v(" Old & Never Accessed ("),s=v(k),o=v(")"),a=w(),l=y("button"),c=v("Delete All"),u=w(),d=y("div");for(let t=0;t<S.length;t+=1)S[t].c();h=w(),D&&D.c(),M(r,"class","text-sm font-semibold text-orange-700"),l.disabled=t[38],M(l,"class","text-xs px-2 py-1 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50"),M(n,"class","flex items-center justify-between mb-3"),M(d,"class","space-y-2 max-h-48 overflow-y-auto"),M(e,"class","mb-6")},m(m,b){p(m,e,b),g(e,n),g(n,r),g(r,i),g(r,s),g(r,o),g(n,a),g(n,l),g(l,c),g(e,u),g(e,d);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(d,null);g(e,h),D&&D.m(e,null),f||(x=_(l,"click",t[114]),f=!0)},p(t,n){if(32&n[1]&&k!==(k=t[36].oldUnused.length+"")&&A(s,k),128&n[1]&&(l.disabled=t[38]),96&n[1]|131072&n[2]){let e;for(C=nt(t[36].oldUnused.slice(0,t[37].oldUnused)),e=0;e<C.length;e+=1){const r=og(t,C,e);S[e]?S[e].p(r,n):(S[e]=Lp(r),S[e].c(),S[e].m(d,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=C.length}t[36].oldUnused.length>t[37].oldUnused?D?D.p(t,n):(D=Rp(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),b(S,t),D&&D.d(),f=!1,x()}}}function Lp(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D=t[159].title+"",P=t[159].url+"",E=t[159].usefulnessScore+"",O=new Date(t[159].dateAdded).toLocaleDateString()+"";function T(){return t[115](t[159])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(D),s=w(),o=y("div"),a=v(P),l=w(),c=y("div"),u=v("Score: "),d=v(E),h=v("  Created: "),f=v(O),b=w(),x=y("button"),x.textContent="Delete",k=w(),M(r,"class","text-sm truncate"),M(o,"class","text-xs text-gray-500 truncate"),M(c,"class","text-xs text-orange-600 mt-1"),M(n,"class","flex-1 min-w-0"),M(x,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(e,"class","p-2 bg-orange-50 rounded border border-orange-200 flex items-center justify-between")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(n,s),g(n,o),g(o,a),g(n,l),g(n,c),g(c,u),g(c,d),g(c,h),g(c,f),g(e,b),g(e,x),g(e,k),C||(S=_(x,"click",T),C=!0)},p(e,n){t=e,96&n[1]&&D!==(D=t[159].title+"")&&A(i,D),96&n[1]&&P!==(P=t[159].url+"")&&A(a,P),96&n[1]&&E!==(E=t[159].usefulnessScore+"")&&A(d,E),96&n[1]&&O!==(O=new Date(t[159].dateAdded).toLocaleDateString()+"")&&A(f,O)},d(t){t&&m(e),C=!1,S()}}}function Rp(t){let e,n,r,i,s,o,a,l,c=t[37].oldUnused+"",u=t[36].oldUnused.length+"";return{c(){e=y("button"),n=v("Show more ("),r=v(c),i=v(" of "),s=v(u),o=v(")"),M(e,"class","mt-2 text-xs text-orange-600 hover:underline")},m(c,u){p(c,e,u),g(e,n),g(e,r),g(e,i),g(e,s),g(e,o),a||(l=_(e,"click",t[116]),a=!0)},p(t,e){64&e[1]&&c!==(c=t[37].oldUnused+"")&&A(r,c),32&e[1]&&u!==(u=t[36].oldUnused.length+"")&&A(s,u)},d(t){t&&m(e),a=!1,l()}}}function $p(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=t[36].genericTitles.length+"",C=nt(t[36].genericTitles.slice(0,t[37].genericTitles)),S=[];for(let e=0;e<C.length;e+=1)S[e]=Bp(sg(t,C,e));let D=t[36].genericTitles.length>t[37].genericTitles&&Ip(t);return{c(){e=y("div"),n=y("div"),r=y("h4"),i=v(" Generic/Placeholder Titles ("),s=v(k),o=v(")"),a=w(),l=y("button"),c=v("Delete All"),u=w(),d=y("div");for(let t=0;t<S.length;t+=1)S[t].c();h=w(),D&&D.c(),M(r,"class","text-sm font-semibold text-yellow-700"),l.disabled=t[38],M(l,"class","text-xs px-2 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 disabled:opacity-50"),M(n,"class","flex items-center justify-between mb-3"),M(d,"class","space-y-2 max-h-48 overflow-y-auto"),M(e,"class","mb-6")},m(m,b){p(m,e,b),g(e,n),g(n,r),g(r,i),g(r,s),g(r,o),g(n,a),g(n,l),g(l,c),g(e,u),g(e,d);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(d,null);g(e,h),D&&D.m(e,null),f||(x=_(l,"click",t[117]),f=!0)},p(t,n){if(32&n[1]&&k!==(k=t[36].genericTitles.length+"")&&A(s,k),128&n[1]&&(l.disabled=t[38]),96&n[1]|131072&n[2]){let e;for(C=nt(t[36].genericTitles.slice(0,t[37].genericTitles)),e=0;e<C.length;e+=1){const r=sg(t,C,e);S[e]?S[e].p(r,n):(S[e]=Bp(r),S[e].c(),S[e].m(d,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=C.length}t[36].genericTitles.length>t[37].genericTitles?D?D.p(t,n):(D=Ip(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),b(S,t),D&&D.d(),f=!1,x()}}}function Bp(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[159].title+"",b=t[159].url+"";function x(){return t[118](t[159])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(f),s=w(),o=y("div"),a=v(b),l=w(),c=y("button"),c.textContent="Delete",u=w(),M(r,"class","text-sm truncate"),M(o,"class","text-xs text-gray-500 truncate"),M(n,"class","flex-1 min-w-0"),M(c,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(e,"class","p-2 bg-yellow-50 rounded border border-yellow-200 flex items-center justify-between")},m(t,f){p(t,e,f),g(e,n),g(n,r),g(r,i),g(n,s),g(n,o),g(o,a),g(e,l),g(e,c),g(e,u),d||(h=_(c,"click",x),d=!0)},p(e,n){t=e,96&n[1]&&f!==(f=t[159].title+"")&&A(i,f),96&n[1]&&b!==(b=t[159].url+"")&&A(a,b)},d(t){t&&m(e),d=!1,h()}}}function Ip(t){let e,n,r,i,s,o,a,l,c=t[37].genericTitles+"",u=t[36].genericTitles.length+"";return{c(){e=y("button"),n=v("Show more ("),r=v(c),i=v(" of "),s=v(u),o=v(")"),M(e,"class","mt-2 text-xs text-yellow-600 hover:underline")},m(c,u){p(c,e,u),g(e,n),g(e,r),g(e,i),g(e,s),g(e,o),a||(l=_(e,"click",t[119]),a=!0)},p(t,e){64&e[1]&&c!==(c=t[37].genericTitles+"")&&A(r,c),32&e[1]&&u!==(u=t[36].genericTitles.length+"")&&A(s,u)},d(t){t&&m(e),a=!1,l()}}}function jp(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=t[36].temporaryUrls.length+"",C=nt(t[36].temporaryUrls.slice(0,t[37].temporaryUrls)),S=[];for(let e=0;e<C.length;e+=1)S[e]=Fp(ig(t,C,e));let D=t[36].temporaryUrls.length>t[37].temporaryUrls&&zp(t);return{c(){e=y("div"),n=y("div"),r=y("h4"),i=v(" Temporary/Dev URLs ("),s=v(k),o=v(")"),a=w(),l=y("button"),c=v("Delete All"),u=w(),d=y("div");for(let t=0;t<S.length;t+=1)S[t].c();h=w(),D&&D.c(),M(r,"class","text-sm font-semibold text-purple-700"),l.disabled=t[38],M(l,"class","text-xs px-2 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50"),M(n,"class","flex items-center justify-between mb-3"),M(d,"class","space-y-2 max-h-48 overflow-y-auto"),M(e,"class","mb-6")},m(m,b){p(m,e,b),g(e,n),g(n,r),g(r,i),g(r,s),g(r,o),g(n,a),g(n,l),g(l,c),g(e,u),g(e,d);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(d,null);g(e,h),D&&D.m(e,null),f||(x=_(l,"click",t[120]),f=!0)},p(t,n){if(32&n[1]&&k!==(k=t[36].temporaryUrls.length+"")&&A(s,k),128&n[1]&&(l.disabled=t[38]),96&n[1]|131072&n[2]){let e;for(C=nt(t[36].temporaryUrls.slice(0,t[37].temporaryUrls)),e=0;e<C.length;e+=1){const r=ig(t,C,e);S[e]?S[e].p(r,n):(S[e]=Fp(r),S[e].c(),S[e].m(d,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=C.length}t[36].temporaryUrls.length>t[37].temporaryUrls?D?D.p(t,n):(D=zp(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),b(S,t),D&&D.d(),f=!1,x()}}}function Fp(t){let e,n,r,i,s,o,a,l,c,u,d,h,f=t[159].title+"",b=t[159].url+"";function x(){return t[121](t[159])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(f),s=w(),o=y("div"),a=v(b),l=w(),c=y("button"),c.textContent="Delete",u=w(),M(r,"class","text-sm truncate"),M(o,"class","text-xs text-gray-500 truncate"),M(n,"class","flex-1 min-w-0"),M(c,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(e,"class","p-2 bg-purple-50 rounded border border-purple-200 flex items-center justify-between")},m(t,f){p(t,e,f),g(e,n),g(n,r),g(r,i),g(n,s),g(n,o),g(o,a),g(e,l),g(e,c),g(e,u),d||(h=_(c,"click",x),d=!0)},p(e,n){t=e,96&n[1]&&f!==(f=t[159].title+"")&&A(i,f),96&n[1]&&b!==(b=t[159].url+"")&&A(a,b)},d(t){t&&m(e),d=!1,h()}}}function zp(t){let e,n,r,i,s,o,a,l,c=t[37].temporaryUrls+"",u=t[36].temporaryUrls.length+"";return{c(){e=y("button"),n=v("Show more ("),r=v(c),i=v(" of "),s=v(u),o=v(")"),M(e,"class","mt-2 text-xs text-purple-600 hover:underline")},m(c,u){p(c,e,u),g(e,n),g(e,r),g(e,i),g(e,s),g(e,o),a||(l=_(e,"click",t[122]),a=!0)},p(t,e){64&e[1]&&c!==(c=t[37].temporaryUrls+"")&&A(r,c),32&e[1]&&u!==(u=t[36].temporaryUrls.length+"")&&A(s,u)},d(t){t&&m(e),a=!1,l()}}}function Np(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,x,k=t[36].lowScore.length+"",C=nt(t[36].lowScore.slice(0,t[37].lowScore)),S=[];for(let e=0;e<C.length;e+=1)S[e]=Vp(rg(t,C,e));let D=t[36].lowScore.length>t[37].lowScore&&Wp(t);return{c(){e=y("div"),n=y("div"),r=y("h4"),i=v(" Low Quality Score ("),s=v(k),o=v(")"),a=w(),l=y("button"),c=v("Delete All"),u=w(),d=y("div");for(let t=0;t<S.length;t+=1)S[t].c();h=w(),D&&D.c(),M(r,"class","text-sm font-semibold text-gray-700"),l.disabled=t[38],M(l,"class","text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 disabled:opacity-50"),M(n,"class","flex items-center justify-between mb-3"),M(d,"class","space-y-2 max-h-48 overflow-y-auto")},m(m,b){p(m,e,b),g(e,n),g(n,r),g(r,i),g(r,s),g(r,o),g(n,a),g(n,l),g(l,c),g(e,u),g(e,d);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(d,null);g(e,h),D&&D.m(e,null),f||(x=_(l,"click",t[123]),f=!0)},p(t,n){if(32&n[1]&&k!==(k=t[36].lowScore.length+"")&&A(s,k),128&n[1]&&(l.disabled=t[38]),96&n[1]|131072&n[2]){let e;for(C=nt(t[36].lowScore.slice(0,t[37].lowScore)),e=0;e<C.length;e+=1){const r=rg(t,C,e);S[e]?S[e].p(r,n):(S[e]=Vp(r),S[e].c(),S[e].m(d,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=C.length}t[36].lowScore.length>t[37].lowScore?D?D.p(t,n):(D=Wp(t),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(t){t&&m(e),b(S,t),D&&D.d(),f=!1,x()}}}function Vp(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S,D=t[159].title+"",P=t[159].url+"",E=t[159].usefulnessScore+"",O=t[159].uselessReasons?.join(", ")+"";function T(){return t[124](t[159])}return{c(){e=y("div"),n=y("div"),r=y("div"),i=v(D),s=w(),o=y("div"),a=v(P),l=w(),c=y("div"),u=v("Score: "),d=v(E),h=v("  "),f=v(O),b=w(),x=y("button"),x.textContent="Delete",k=w(),M(r,"class","text-sm truncate"),M(o,"class","text-xs text-gray-500 truncate"),M(c,"class","text-xs text-gray-400 mt-1"),M(n,"class","flex-1 min-w-0"),M(x,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),M(e,"class","p-2 bg-gray-50 rounded border border-gray-200 flex items-center justify-between")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(n,s),g(n,o),g(o,a),g(n,l),g(n,c),g(c,u),g(c,d),g(c,h),g(c,f),g(e,b),g(e,x),g(e,k),C||(S=_(x,"click",T),C=!0)},p(e,n){t=e,96&n[1]&&D!==(D=t[159].title+"")&&A(i,D),96&n[1]&&P!==(P=t[159].url+"")&&A(a,P),96&n[1]&&E!==(E=t[159].usefulnessScore+"")&&A(d,E),96&n[1]&&O!==(O=t[159].uselessReasons?.join(", ")+"")&&A(f,O)},d(t){t&&m(e),C=!1,S()}}}function Wp(t){let e,n,r,i,s,o,a,l,c=t[37].lowScore+"",u=t[36].lowScore.length+"";return{c(){e=y("button"),n=v("Show more ("),r=v(c),i=v(" of "),s=v(u),o=v(")"),M(e,"class","mt-2 text-xs text-gray-600 hover:underline")},m(c,u){p(c,e,u),g(e,n),g(e,r),g(e,i),g(e,s),g(e,o),a||(l=_(e,"click",t[125]),a=!0)},p(t,e){64&e[1]&&c!==(c=t[37].lowScore+"")&&A(r,c),32&e[1]&&u!==(u=t[36].lowScore.length+"")&&A(s,u)},d(t){t&&m(e),a=!1,l()}}}function Hp(t){let e,n,r,i=t[10].length+"";return{c(){e=v("("),n=v(i),r=v(")")},m(t,i){p(t,e,i),p(t,n,i),p(t,r,i)},p(t,e){1024&e[0]&&i!==(i=t[10].length+"")&&A(n,i)},d(t){t&&(m(e),m(n),m(r))}}}function qp(t){let e,n,r=nt(t[10]),i=[];for(let e=0;e<r.length;e+=1)i[e]=Yp(ng(t,r,e));const s=t=>et(i[t],1,1,()=>{i[t]=null});return{c(){e=y("div");for(let t=0;t<i.length;t+=1)i[t].c();M(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,r){p(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);n=!0},p(t,n){if(1024&n[0]){let o;for(r=nt(t[10]),o=0;o<r.length;o+=1){const s=ng(t,r,o);i[o]?(i[o].p(s,n),tt(i[o],1)):(i[o]=Yp(s),i[o].c(),tt(i[o],1),i[o].m(e,null))}for(G(),o=r.length;o<i.length;o+=1)s(o);Z()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)tt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)et(i[t]);n=!1},d(t){t&&m(e),b(i,t)}}}function Up(e){let n;return{c(){n=y("p"),n.textContent="All bookmark URLs are valid.",M(n,"class","text-gray-500")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function Kp(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div> <span class="ml-3 text-gray-500">Checking URLs...</span>',M(n,"class","flex items-center justify-center py-8")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function Yp(t){let e,n;return e=new tl({props:{bookmark:t[159]}}),{c(){st(e.$$.fragment)},m(t,r){ot(e,t,r),n=!0},p(t,n){const r={};1024&n[0]&&(r.bookmark=t[159]),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Qp(t){let e,n,r;return{c(){e=x("svg"),n=x("path"),r=v("\n                      Download Backup"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),M(e,"class","w-4 h-4 mr-2"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,i){p(t,e,i),g(e,n),p(t,r,i)},d(t){t&&(m(e),m(r))}}}function Xp(t){let e,n,r,i;return{c(){e=x("svg"),n=x("circle"),r=x("path"),i=v("\n                      Creating Backup..."),M(n,"class","opacity-25"),M(n,"cx","12"),M(n,"cy","12"),M(n,"r","10"),M(n,"stroke","currentColor"),M(n,"stroke-width","4"),M(r,"class","opacity-75"),M(r,"fill","currentColor"),M(r,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),M(e,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),M(e,"fill","none"),M(e,"viewBox","0 0 24 24")},m(t,s){p(t,e,s),g(e,n),g(e,r),p(t,i,s)},d(t){t&&(m(e),m(i))}}}function Jp(t){let e,n;function r(t,e){return t[42].valid?Zp:Gp}let i=r(t),s=i(t);return{c(){e=y("div"),s.c(),M(e,"class",n="mt-3 p-3 rounded-md "+(t[42].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))},m(t,n){p(t,e,n),s.m(e,null)},p(t,o){i===(i=r(t))&&s?s.p(t,o):(s.d(1),s=i(t),s&&(s.c(),s.m(e,null))),2048&o[1]&&n!==(n="mt-3 p-3 rounded-md "+(t[42].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))&&M(e,"class",n)},d(t){t&&m(e),s.d()}}}function Gp(t){let e,n,r,i=nt(t[42].issues),s=[];for(let e=0;e<i.length;e+=1)s[e]=tm(eg(t,i,e));return{c(){e=y("p"),e.textContent=" Invalid backup file",n=w(),r=y("ul");for(let t=0;t<s.length;t+=1)s[t].c();M(e,"class","text-sm text-red-800"),M(r,"class","text-xs text-red-600 mt-1")},m(t,i){p(t,e,i),p(t,n,i),p(t,r,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(r,null)},p(t,e){if(2048&e[1]){let n;for(i=nt(t[42].issues),n=0;n<i.length;n+=1){const o=eg(t,i,n);s[n]?s[n].p(o,e):(s[n]=tm(o),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=i.length}},d(t){t&&(m(e),m(n),m(r)),b(s,t)}}}function Zp(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k=t[42].createdAt+"",C=(t[42].metadata?.totalBookmarks||0)+"",S=(t[42].metadata?.enrichedCount||0)+"",D=t[40]?"Restoring...":"Restore This Backup";return{c(){e=y("p"),n=v(" Valid backup from "),r=v(k),i=y("br"),s=w(),o=y("span"),a=v(C),l=v(" bookmarks, \n                            "),c=v(S),u=v(" enriched"),d=w(),h=y("button"),f=v(D),M(o,"class","text-xs text-green-600"),M(e,"class","text-sm text-green-800"),h.disabled=t[40],M(h,"class","mt-2 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 text-sm")},m(m,y){p(m,e,y),g(e,n),g(e,r),g(e,i),g(e,s),g(e,o),g(o,a),g(o,l),g(o,c),g(o,u),p(m,d,y),p(m,h,y),g(h,f),b||(x=_(h,"click",t[89]),b=!0)},p(t,e){2048&e[1]&&k!==(k=t[42].createdAt+"")&&A(r,k),2048&e[1]&&C!==(C=(t[42].metadata?.totalBookmarks||0)+"")&&A(a,C),2048&e[1]&&S!==(S=(t[42].metadata?.enrichedCount||0)+"")&&A(c,S),512&e[1]&&D!==(D=t[40]?"Restoring...":"Restore This Backup")&&A(f,D),512&e[1]&&(h.disabled=t[40])},d(t){t&&(m(e),m(d),m(h)),b=!1,x()}}}function tm(t){let e,n,r,i=t[170]+"";return{c(){e=y("li"),n=v(" "),r=v(i)},m(t,i){p(t,e,i),g(e,n),g(e,r)},p(t,e){2048&e[1]&&i!==(i=t[170]+"")&&A(r,i)},d(t){t&&m(e)}}}function em(t){let e,n=nt(t[41]),r=[];for(let e=0;e<n.length;e+=1)r[e]=rm(tg(t,n,e));return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","space-y-2")},m(t,n){p(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(1536&i[1]|1073741824&i[2]){let s;for(n=nt(t[41]),s=0;s<n.length;s+=1){const o=tg(t,n,s);r[s]?r[s].p(o,i):(r[s]=rm(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function nm(e){let n;return{c(){n=y("p"),n.textContent="No auto-backups yet. They will appear after your first restore or enrichment run.",M(n,"class","text-gray-500 text-sm")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function rm(t){let e,n,r,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S=new Date(t[167].createdAt).toLocaleString()+"",D=(t[167].metadata?.totalBookmarks||0)+"",P=(t[167].metadata?.enrichedCount||0)+"";function E(){return t[126](t[169])}return{c(){e=y("div"),n=y("div"),r=y("span"),i=v(S),s=w(),o=y("span"),a=v("("),l=v(D),c=v(" bookmarks, "),u=v(P),d=v(" enriched)"),h=w(),f=y("button"),b=v("Restore"),x=w(),M(r,"class","text-sm font-medium text-gray-900"),M(o,"class","text-xs text-gray-500 ml-2"),f.disabled=t[40],M(f,"class","text-sm px-3 py-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded"),M(e,"class","flex justify-between items-center p-3 bg-gray-50 rounded-md")},m(t,m){p(t,e,m),g(e,n),g(n,r),g(r,i),g(n,s),g(n,o),g(o,a),g(o,l),g(o,c),g(o,u),g(o,d),g(e,h),g(e,f),g(f,b),g(e,x),k||(C=_(f,"click",E),k=!0)},p(e,n){t=e,1024&n[1]&&S!==(S=new Date(t[167].createdAt).toLocaleString()+"")&&A(i,S),1024&n[1]&&D!==(D=(t[167].metadata?.totalBookmarks||0)+"")&&A(l,D),1024&n[1]&&P!==(P=(t[167].metadata?.enrichedCount||0)+"")&&A(u,P),512&n[1]&&(f.disabled=t[40])},d(t){t&&m(e),k=!1,C()}}}function im(t){let e,n,i,s,o,a,l,c,u,d,h,f,x,C,S,D,P,O,L,R,$,B,I,j,F,z,N,V,W,H,U,K=1!==t[5]?"s":"",Y=t[0].length+"",Q=t[44]?"Cancel":"Select",X=(t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange||t[8].searchQuery)&&lm(),J=(t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange)&&cm(t),rt=nt(Object.values(Wa)),it=[];for(let e=0;e<rt.length;e+=1)it[e]=um(mg(t,rt,e));function st(t,e){return"list"===t[45]?hm:dm}let ot=st(t),at=ot(t),lt=t[44]&&fm(t);const ct=[pm,gm],ut=[];function dt(t,e){return"list"===t[45]?0:1}F=dt(t),z=ut[F]=ct[F](t);let ht=t[6]&&ym(t);return{c(){e=y("div"),n=y("div"),i=y("h2"),s=v(t[5]),o=v(" bookmark"),a=v(K),l=w(),X&&X.c(),c=w(),J&&J.c(),u=w(),d=y("div"),h=y("div"),f=v("Showing "),x=v(Y),C=v(" of "),S=v(t[5]),D=w(),P=y("select");for(let t=0;t<it.length;t+=1)it[t].c();O=w(),L=y("button"),R=v(Q),$=w(),B=y("button"),at.c(),I=w(),lt&&lt.c(),j=w(),z.c(),N=w(),ht&&ht.c(),V=k(),M(i,"class","text-lg font-medium text-gray-900"),M(n,"class","flex items-center gap-3"),M(h,"class","text-sm text-gray-500"),M(P,"class","text-sm border border-gray-300 rounded-md px-2 py-1 bg-white"),void 0===t[7]&&q(()=>t[102].call(P)),M(L,"class","px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50"),T(L,"bg-blue-50",t[44]),T(L,"border-blue-300",t[44]),T(L,"text-blue-700",t[44]),M(B,"class","p-2 text-gray-500 hover:text-gray-700 border border-gray-300 rounded-md"),M(B,"title","Toggle view mode"),M(d,"class","flex flex-wrap items-center gap-2 sm:gap-4"),M(e,"class","mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4")},m(r,m){p(r,e,m),g(e,n),g(n,i),g(i,s),g(i,o),g(i,a),g(i,l),X&&X.m(i,null),g(n,c),J&&J.m(n,null),g(e,u),g(e,d),g(d,h),g(h,f),g(h,x),g(h,C),g(h,S),g(d,D),g(d,P);for(let t=0;t<it.length;t+=1)it[t]&&it[t].m(P,null);E(P,t[7],!0),g(d,O),g(d,L),g(L,R),g(d,$),g(d,B),at.m(B,null),p(r,I,m),lt&&lt.m(r,m),p(r,j,m),ut[F].m(r,m),p(r,N,m),ht&&ht.m(r,m),p(r,V,m),W=!0,H||(U=[_(P,"change",t[102]),_(P,"change",t[103]),_(L,"click",t[81]),_(B,"click",t[87])],H=!0)},p(t,e){if((!W||32&e[0])&&A(s,t[5]),(!W||32&e[0])&&K!==(K=1!==t[5]?"s":"")&&A(a,K),t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange||t[8].searchQuery?X||(X=lm(),X.c(),X.m(i,null)):X&&(X.d(1),X=null),t[8].domains.length>0||t[8].folders.length>0||t[8].dateRange?J?J.p(t,e):(J=cm(t),J.c(),J.m(n,null)):J&&(J.d(1),J=null),(!W||1&e[0])&&Y!==(Y=t[0].length+"")&&A(x,Y),(!W||32&e[0])&&A(S,t[5]),0&e){let n;for(rt=nt(Object.values(Wa)),n=0;n<rt.length;n+=1){const r=mg(t,rt,n);it[n]?it[n].p(r,e):(it[n]=um(r),it[n].c(),it[n].m(P,null))}for(;n<it.length;n+=1)it[n].d(1);it.length=rt.length}128&e[0]&&E(P,t[7]),(!W||8192&e[1])&&Q!==(Q=t[44]?"Cancel":"Select")&&A(R,Q),(!W||8192&e[1])&&T(L,"bg-blue-50",t[44]),(!W||8192&e[1])&&T(L,"border-blue-300",t[44]),(!W||8192&e[1])&&T(L,"text-blue-700",t[44]),ot!==(ot=st(t))&&(at.d(1),at=ot(t),at&&(at.c(),at.m(B,null))),t[44]?lt?lt.p(t,e):(lt=fm(t),lt.c(),lt.m(j.parentNode,j)):lt&&(lt.d(1),lt=null);let r=F;F=dt(t),F===r?ut[F].p(t,e):(G(),et(ut[r],1,1,()=>{ut[r]=null}),Z(),z=ut[F],z?z.p(t,e):(z=ut[F]=ct[F](t),z.c()),tt(z,1),z.m(N.parentNode,N)),t[6]?ht?ht.p(t,e):(ht=ym(t),ht.c(),ht.m(V.parentNode,V)):ht&&(ht.d(1),ht=null)},i(t){W||(tt(z),W=!0)},o(t){et(z),W=!1},d(t){t&&(m(e),m(I),m(j),m(N),m(V)),X&&X.d(),J&&J.d(),b(it,t),at.d(),lt&&lt.d(t),ut[F].d(t),ht&&ht.d(t),H=!1,r(U)}}}function sm(e){let n;function r(t,e){return t[4]?km:wm}let i=r(e),s=i(e);return{c(){n=y("div"),s.c(),M(n,"class","text-center text-gray-500 p-8")},m(t,e){p(t,n,e),s.m(n,null)},p(t,e){i===(i=r(t))&&s?s.p(t,e):(s.d(1),s=i(t),s&&(s.c(),s.m(n,null)))},i:t,o:t,d(t){t&&m(n),s.d()}}}function om(e){let n,r,i,s,o,a,l,c;return{c(){n=y("div"),r=y("p"),i=v("Error: "),s=v(e[2]),o=w(),a=y("button"),a.textContent="Retry",M(a,"class","mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"),M(n,"class","text-center text-red-600 p-8")},m(t,u){p(t,n,u),g(n,r),g(r,i),g(r,s),g(n,o),g(n,a),l||(c=_(a,"click",e[100]),l=!0)},p(t,e){4&e[0]&&A(s,t[2])},i:t,o:t,d(t){t&&m(n),l=!1,c()}}}function am(e){let n;return{c(){n=y("div"),n.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',M(n,"class","flex items-center justify-center h-64")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function lm(t){let e;return{c(){e=y("span"),e.textContent="(filtered)",M(e,"class","text-sm text-gray-500")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function cm(e){let n,r,i;return{c(){n=y("button"),n.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>\n                    Clear Filters',M(n,"class","inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-red-600 bg-red-50 hover:bg-red-100 border border-red-200 rounded-md transition-colors"),M(n,"title","Clear all sidebar filters")},m(t,s){p(t,n,s),r||(i=_(n,"click",e[101]),r=!0)},p:t,d(t){t&&m(n),r=!1,i()}}}function um(e){let n,r,i=e[164].label+"";return{c(){n=y("option"),r=v(i),n.__value=e[164].key,D(n,n.__value)},m(t,e){p(t,n,e),g(n,r)},p:t,d(t){t&&m(n)}}}function dm(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M4 6h16M4 10h16M4 14h16M4 18h16"),M(e,"class","w-4 h-4"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){p(t,e,r),g(e,n)},d(t){t&&m(e)}}}function hm(t){let e,n;return{c(){e=x("svg"),n=x("path"),M(n,"stroke-linecap","round"),M(n,"stroke-linejoin","round"),M(n,"stroke-width","2"),M(n,"d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"),M(e,"class","w-4 h-4"),M(e,"fill","none"),M(e,"stroke","currentColor"),M(e,"viewBox","0 0 24 24")},m(t,r){p(t,e,r),g(e,n)},d(t){t&&m(e)}}}function fm(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,C,S=t[43].size+"";return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("span"),o=v(S),a=v(" selected"),l=w(),c=y("button"),c.textContent="Select All",u=w(),d=y("button"),d.textContent="Deselect All",h=w(),f=y("button"),b=v("Delete Selected"),M(s,"class","text-sm text-blue-700"),M(c,"class","text-sm text-blue-600 hover:text-blue-800"),M(d,"class","text-sm text-blue-600 hover:text-blue-800"),M(i,"class","flex flex-wrap items-center gap-2 sm:gap-4"),f.disabled=x=0===t[43].size,M(f,"class","px-4 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed self-start sm:self-auto"),M(n,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"),M(e,"class","mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md")},m(r,m){p(r,e,m),g(e,n),g(n,i),g(i,s),g(s,o),g(s,a),g(i,l),g(i,c),g(i,u),g(i,d),g(n,h),g(n,f),g(f,b),k||(C=[_(c,"click",t[83]),_(d,"click",t[84]),_(f,"click",t[85])],k=!0)},p(t,e){4096&e[1]&&S!==(S=t[43].size+"")&&A(o,S),4096&e[1]&&x!==(x=0===t[43].size)&&(f.disabled=x)},d(t){t&&m(e),k=!1,r(C)}}}function gm(t){let e,n,r=[],i=new Map,s=nt(t[0]);const o=t=>t[159].id;for(let e=0;e<s.length;e+=1){let n=gg(t,s,e),a=o(n);i.set(a,r[e]=mm(a,n))}return{c(){e=y("div");for(let t=0;t<r.length;t+=1)r[t].c();M(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,i){p(t,e,i);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null);n=!0},p(t,n){1&n[0]&&(s=nt(t[0]),G(),r=it(r,n,o,1,t,s,i,e,rt,mm,null,gg),Z())},i(t){if(!n){for(let t=0;t<s.length;t+=1)tt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)et(r[t]);n=!1},d(t){t&&m(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function pm(t){let e,n,r,i=[],s=new Map,o=nt(t[0]);const a=t=>t[159].id;for(let e=0;e<o.length;e+=1){let n=pg(t,o,e),r=a(n);s.set(r,i[e]=bm(r,n))}return{c(){e=y("div"),n=y("div");for(let t=0;t<i.length;t+=1)i[t].c();M(n,"class","max-w-full overflow-x-auto"),M(e,"class","bg-white rounded-lg shadow overflow-hidden")},m(t,s){p(t,e,s),g(e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(n,null);r=!0},p(t,e){1&e[0]|12288&e[1]|17825792&e[2]&&(o=nt(t[0]),G(),i=it(i,e,a,1,t,o,s,n,rt,bm,null,pg),Z())},i(t){if(!r){for(let t=0;t<o.length;t+=1)tt(i[t]);r=!0}},o(t){for(let t=0;t<i.length;t+=1)et(i[t]);r=!1},d(t){t&&m(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function mm(t,e){let n,r,i;return r=new tl({props:{bookmark:e[159]}}),{key:t,first:null,c(){n=k(),st(r.$$.fragment),this.first=n},m(t,e){p(t,n,e),ot(r,t,e),i=!0},p(t,n){e=t;const i={};1&n[0]&&(i.bookmark=e[159]),r.$set(i)},i(t){i||(tt(r.$$.fragment,t),i=!0)},o(t){et(r.$$.fragment,t),i=!1},d(t){t&&m(n),at(r,t)}}}function bm(t,e){let n,r,i;return r=new dl({props:{bookmark:e[159],multiSelectMode:e[44],isSelected:e[43].has(e[159].id)}}),r.$on("toggle-select",e[82]),r.$on("delete",e[86]),{key:t,first:null,c(){n=k(),st(r.$$.fragment),this.first=n},m(t,e){p(t,n,e),ot(r,t,e),i=!0},p(t,n){e=t;const i={};1&n[0]&&(i.bookmark=e[159]),8192&n[1]&&(i.multiSelectMode=e[44]),1&n[0]|4096&n[1]&&(i.isSelected=e[43].has(e[159].id)),r.$set(i)},i(t){i||(tt(r.$$.fragment,t),i=!0)},o(t){et(r.$$.fragment,t),i=!1},d(t){t&&m(n),at(r,t)}}}function ym(t){let e,n,r,i;function s(t,e){return t[1]?vm:xm}let o=s(t),a=o(t);return{c(){e=y("div"),n=y("button"),a.c(),n.disabled=t[1],M(n,"class","px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"),M(e,"class","mt-8 text-center")},m(s,o){p(s,e,o),g(e,n),a.m(n,null),r||(i=_(n,"click",t[51]),r=!0)},p(t,e){o!==(o=s(t))&&(a.d(1),a=o(t),a&&(a.c(),a.m(n,null))),2&e[0]&&(n.disabled=t[1])},d(t){t&&m(e),a.d(),r=!1,i()}}}function xm(t){let e;return{c(){e=v("Load More")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function vm(t){let e;return{c(){e=y("div"),e.innerHTML='<div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>\n                      Loading...',M(e,"class","flex items-center")},m(t,n){p(t,e,n)},d(t){t&&m(e)}}}function wm(e){let n;return{c(){n=y("p"),n.textContent="No bookmarks found"},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function km(t){let e,n,r,i;return{c(){e=y("p"),n=v('No bookmarks found for "'),r=v(t[4]),i=v('"')},m(t,s){p(t,e,s),g(e,n),g(e,r),g(e,i)},p(t,e){16&e[0]&&A(r,t[4])},d(t){t&&m(e)}}}function _m(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,k,S,D,E,O,T,L,R,$,B,I,j,F,z,N,V,W,H,q,U,K,Y,Q,X,J,G,Z,tt,et,nt,rt,it,st,ot,at,lt,ct,ut,dt,ht,ft,gt,pt,mt,bt,yt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Pt,Et,Ot,Tt,Lt,Rt,$t,Bt,It,jt,Ft,zt,Nt,Vt,Wt,Ht,qt,Ut,Kt,Yt,Qt,Xt,Jt,Gt,Zt,te,ee,ne,re,ie,se,oe,ae,le,ce,ue,de,he,fe,ge,pe,me,be,ye,xe,ve,we,ke,_e,Ce,Me,Se,Ae,De,Pe,Ee,Oe,Te,Le,Re,$e,Be,Ie,je,Fe,ze,Ne,Ve,We,He,qe,Ue,Ke,Ye,Qe,Xe,Je,Ge,Ze,tn,en,nn,rn,sn,on,an,ln,cn,un,dn,hn,fn,gn,pn,mn,bn,yn,xn,vn,wn,kn,_n,Cn,Mn,Sn,An,Dn=Math.round(100*t[35].similarity)+"",Pn=Math.round(100*(t[35].breakdown?.titleFuzzy||0))+"",En=Math.round(100*(t[35].breakdown?.titleWords||0))+"",On=Math.round(100*(t[35].breakdown?.descriptionWords||0))+"",Tn=Math.round(100*(t[35].breakdown?.keywordsOverlap||0))+"",Ln=t[35].bookmark1.title+"",Rn=t[35].bookmark1.url+"",$n=(t[35].bookmark1.domain||"N/A")+"",Bn=(t[35].bookmark1.category||"Uncategorized")+"",In=(t[35].bookmark1.description||"No description")+"",jn=new Date(t[35].bookmark1.dateAdded).toLocaleDateString()+"",Fn=t[35].coverage1.percentage.toFixed(0)+"",zn=t[35].bookmark2.title+"",Nn=t[35].bookmark2.url+"",Vn=(t[35].bookmark2.domain||"N/A")+"",Wn=(t[35].bookmark2.category||"Uncategorized")+"",Hn=(t[35].bookmark2.description||"No description")+"",qn=new Date(t[35].bookmark2.dateAdded).toLocaleDateString()+"",Un=t[35].coverage2.percentage.toFixed(0)+"";function Kn(t,e){return t[35].bookmark1.keywords?.length>0?Mm:Cm}let Yn=Kn(t),Qn=Yn(t);function Xn(t,e){return t[35].bookmark2.keywords?.length>0?Dm:Am}let Jn=Xn(t),Gn=Jn(t);return{c(){e=y("div"),n=y("div"),i=y("div"),s=y("h3"),s.textContent="Compare Similar Bookmarks",o=w(),a=y("button"),a.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',l=w(),c=y("div"),u=y("div"),d=y("div"),h=y("span"),f=v(Dn),b=v("%"),x=w(),k=y("span"),k.textContent="Overall Similarity",S=w(),D=y("div"),E=y("h4"),E.textContent="Similarity Breakdown",O=w(),T=y("div"),L=y("div"),R=y("div"),$=v(Pn),B=v("%"),I=w(),j=y("div"),j.textContent="Title (Fuzzy)",F=w(),z=y("div"),N=y("div"),V=v(En),W=v("%"),H=w(),q=y("div"),q.textContent="Title (Words)",U=w(),K=y("div"),Y=y("div"),Q=v(On),X=v("%"),J=w(),G=y("div"),G.textContent="Description",Z=w(),tt=y("div"),et=y("div"),nt=v(Tn),rt=v("%"),it=w(),st=y("div"),st.textContent="Keywords",ot=w(),at=y("div"),lt=y("div"),ct=y("div"),ct.innerHTML='<span class="text-sm font-medium text-blue-800">Bookmark 1</span>',ut=w(),dt=y("div"),ht=y("div"),ft=y("div"),ft.textContent="Title",gt=w(),pt=y("div"),mt=v(Ln),bt=w(),yt=y("div"),xt=y("div"),xt.textContent="URL",vt=w(),wt=y("a"),kt=v(Rn),Ct=w(),Mt=y("div"),St=y("div"),St.textContent="Domain",At=w(),Dt=y("div"),Pt=v($n),Et=w(),Ot=y("div"),Tt=y("div"),Tt.textContent="Category",Lt=w(),Rt=y("div"),$t=v(Bn),Bt=w(),It=y("div"),jt=y("div"),jt.textContent="Description",Ft=w(),zt=y("div"),Nt=v(In),Vt=w(),Wt=y("div"),Ht=y("div"),Ht.textContent="Keywords",qt=w(),Ut=y("div"),Qn.c(),Kt=w(),Yt=y("div"),Qt=y("div"),Qt.textContent="Added",Xt=w(),Jt=y("div"),Gt=v(jn),Zt=w(),te=y("div"),ee=y("div"),ee.textContent="Metadata Coverage",ne=w(),re=y("div"),ie=y("div"),se=w(),oe=y("div"),ae=v(Fn),le=v("%"),ce=w(),ue=y("div"),de=y("a"),he=v("Open"),ge=w(),pe=y("button"),pe.textContent="Delete This",me=w(),be=y("div"),ye=y("div"),ye.innerHTML='<span class="text-sm font-medium text-green-800">Bookmark 2</span>',xe=w(),ve=y("div"),we=y("div"),ke=y("div"),ke.textContent="Title",_e=w(),Ce=y("div"),Me=v(zn),Se=w(),Ae=y("div"),De=y("div"),De.textContent="URL",Pe=w(),Ee=y("a"),Oe=v(Nn),Le=w(),Re=y("div"),$e=y("div"),$e.textContent="Domain",Be=w(),Ie=y("div"),je=v(Vn),Fe=w(),ze=y("div"),Ne=y("div"),Ne.textContent="Category",Ve=w(),We=y("div"),He=v(Wn),qe=w(),Ue=y("div"),Ke=y("div"),Ke.textContent="Description",Ye=w(),Qe=y("div"),Xe=v(Hn),Je=w(),Ge=y("div"),Ze=y("div"),Ze.textContent="Keywords",tn=w(),en=y("div"),Gn.c(),nn=w(),rn=y("div"),sn=y("div"),sn.textContent="Added",on=w(),an=y("div"),ln=v(qn),cn=w(),un=y("div"),dn=y("div"),dn.textContent="Metadata Coverage",hn=w(),fn=y("div"),gn=y("div"),pn=w(),mn=y("div"),bn=v(Un),yn=v("%"),xn=w(),vn=y("div"),wn=y("a"),kn=v("Open"),Cn=w(),Mn=y("button"),Mn.textContent="Delete This",M(s,"class","text-lg font-semibold text-gray-900"),M(a,"class","text-gray-400 hover:text-gray-600"),M(i,"class","sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center"),M(h,"class","text-2xl font-bold text-indigo-700"),M(k,"class","ml-2 text-sm text-indigo-600"),M(d,"class","inline-flex items-center px-4 py-2 bg-indigo-100 rounded-full"),M(u,"class","text-center mb-6"),M(E,"class","text-sm font-semibold text-gray-700 mb-3"),M(R,"class","text-lg font-bold text-blue-600"),M(j,"class","text-xs text-gray-500"),M(L,"class","text-center"),M(N,"class","text-lg font-bold text-green-600"),M(q,"class","text-xs text-gray-500"),M(z,"class","text-center"),M(Y,"class","text-lg font-bold text-purple-600"),M(G,"class","text-xs text-gray-500"),M(K,"class","text-center"),M(et,"class","text-lg font-bold text-orange-600"),M(st,"class","text-xs text-gray-500"),M(tt,"class","text-center"),M(T,"class","grid grid-cols-2 md:grid-cols-4 gap-3"),M(D,"class","mb-6 p-4 bg-gray-50 rounded-lg"),M(ct,"class","bg-blue-50 px-4 py-2 border-b border-blue-200"),M(ft,"class","text-xs text-gray-500 uppercase mb-1"),M(pt,"class","text-sm font-medium"),M(xt,"class","text-xs text-gray-500 uppercase mb-1"),M(wt,"href",_t=t[35].bookmark1.url),M(wt,"target","_blank"),M(wt,"rel","noopener"),M(wt,"class","text-sm text-blue-600 hover:underline break-all"),M(St,"class","text-xs text-gray-500 uppercase mb-1"),M(Dt,"class","text-sm"),M(Tt,"class","text-xs text-gray-500 uppercase mb-1"),M(Rt,"class","text-sm"),M(jt,"class","text-xs text-gray-500 uppercase mb-1"),M(zt,"class","text-sm text-gray-600"),M(Ht,"class","text-xs text-gray-500 uppercase mb-1"),M(Ut,"class","flex flex-wrap gap-1"),M(Qt,"class","text-xs text-gray-500 uppercase mb-1"),M(Jt,"class","text-sm"),M(ee,"class","text-xs text-gray-500 uppercase mb-1"),M(ie,"class","bg-blue-600 h-2 rounded-full"),P(ie,"width",t[35].coverage1.percentage+"%"),M(re,"class","w-full bg-gray-200 rounded-full h-2"),M(oe,"class","text-xs text-gray-400 mt-1"),M(de,"href",fe=t[35].bookmark1.url),M(de,"target","_blank"),M(de,"rel","noopener"),M(de,"class","flex-1 px-3 py-2 text-center text-sm bg-gray-100 rounded hover:bg-gray-200"),M(pe,"class","flex-1 px-3 py-2 text-center text-sm bg-red-600 text-white rounded hover:bg-red-700"),M(ue,"class","pt-3 border-t border-gray-200 flex gap-2"),M(dt,"class","p-4 space-y-3"),M(lt,"class","border border-gray-200 rounded-lg overflow-hidden"),M(ye,"class","bg-green-50 px-4 py-2 border-b border-green-200"),M(ke,"class","text-xs text-gray-500 uppercase mb-1"),M(Ce,"class","text-sm font-medium"),M(De,"class","text-xs text-gray-500 uppercase mb-1"),M(Ee,"href",Te=t[35].bookmark2.url),M(Ee,"target","_blank"),M(Ee,"rel","noopener"),M(Ee,"class","text-sm text-blue-600 hover:underline break-all"),M($e,"class","text-xs text-gray-500 uppercase mb-1"),M(Ie,"class","text-sm"),M(Ne,"class","text-xs text-gray-500 uppercase mb-1"),M(We,"class","text-sm"),M(Ke,"class","text-xs text-gray-500 uppercase mb-1"),M(Qe,"class","text-sm text-gray-600"),M(Ze,"class","text-xs text-gray-500 uppercase mb-1"),M(en,"class","flex flex-wrap gap-1"),M(sn,"class","text-xs text-gray-500 uppercase mb-1"),M(an,"class","text-sm"),M(dn,"class","text-xs text-gray-500 uppercase mb-1"),M(gn,"class","bg-green-600 h-2 rounded-full"),P(gn,"width",t[35].coverage2.percentage+"%"),M(fn,"class","w-full bg-gray-200 rounded-full h-2"),M(mn,"class","text-xs text-gray-400 mt-1"),M(wn,"href",_n=t[35].bookmark2.url),M(wn,"target","_blank"),M(wn,"rel","noopener"),M(wn,"class","flex-1 px-3 py-2 text-center text-sm bg-gray-100 rounded hover:bg-gray-200"),M(Mn,"class","flex-1 px-3 py-2 text-center text-sm bg-red-600 text-white rounded hover:bg-red-700"),M(vn,"class","pt-3 border-t border-gray-200 flex gap-2"),M(ve,"class","p-4 space-y-3"),M(be,"class","border border-gray-200 rounded-lg overflow-hidden"),M(at,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),M(c,"class","p-6"),M(n,"class","bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"),M(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4")},m(r,m){p(r,e,m),g(e,n),g(n,i),g(i,s),g(i,o),g(i,a),g(n,l),g(n,c),g(c,u),g(u,d),g(d,h),g(h,f),g(h,b),g(d,x),g(d,k),g(c,S),g(c,D),g(D,E),g(D,O),g(D,T),g(T,L),g(L,R),g(R,$),g(R,B),g(L,I),g(L,j),g(T,F),g(T,z),g(z,N),g(N,V),g(N,W),g(z,H),g(z,q),g(T,U),g(T,K),g(K,Y),g(Y,Q),g(Y,X),g(K,J),g(K,G),g(T,Z),g(T,tt),g(tt,et),g(et,nt),g(et,rt),g(tt,it),g(tt,st),g(c,ot),g(c,at),g(at,lt),g(lt,ct),g(lt,ut),g(lt,dt),g(dt,ht),g(ht,ft),g(ht,gt),g(ht,pt),g(pt,mt),g(dt,bt),g(dt,yt),g(yt,xt),g(yt,vt),g(yt,wt),g(wt,kt),g(dt,Ct),g(dt,Mt),g(Mt,St),g(Mt,At),g(Mt,Dt),g(Dt,Pt),g(dt,Et),g(dt,Ot),g(Ot,Tt),g(Ot,Lt),g(Ot,Rt),g(Rt,$t),g(dt,Bt),g(dt,It),g(It,jt),g(It,Ft),g(It,zt),g(zt,Nt),g(dt,Vt),g(dt,Wt),g(Wt,Ht),g(Wt,qt),g(Wt,Ut),Qn.m(Ut,null),g(dt,Kt),g(dt,Yt),g(Yt,Qt),g(Yt,Xt),g(Yt,Jt),g(Jt,Gt),g(dt,Zt),g(dt,te),g(te,ee),g(te,ne),g(te,re),g(re,ie),g(te,se),g(te,oe),g(oe,ae),g(oe,le),g(dt,ce),g(dt,ue),g(ue,de),g(de,he),g(ue,ge),g(ue,pe),g(at,me),g(at,be),g(be,ye),g(be,xe),g(be,ve),g(ve,we),g(we,ke),g(we,_e),g(we,Ce),g(Ce,Me),g(ve,Se),g(ve,Ae),g(Ae,De),g(Ae,Pe),g(Ae,Ee),g(Ee,Oe),g(ve,Le),g(ve,Re),g(Re,$e),g(Re,Be),g(Re,Ie),g(Ie,je),g(ve,Fe),g(ve,ze),g(ze,Ne),g(ze,Ve),g(ze,We),g(We,He),g(ve,qe),g(ve,Ue),g(Ue,Ke),g(Ue,Ye),g(Ue,Qe),g(Qe,Xe),g(ve,Je),g(ve,Ge),g(Ge,Ze),g(Ge,tn),g(Ge,en),Gn.m(en,null),g(ve,nn),g(ve,rn),g(rn,sn),g(rn,on),g(rn,an),g(an,ln),g(ve,cn),g(ve,un),g(un,dn),g(un,hn),g(un,fn),g(fn,gn),g(un,pn),g(un,mn),g(mn,bn),g(mn,yn),g(ve,xn),g(ve,vn),g(vn,wn),g(wn,kn),g(vn,Cn),g(vn,Mn),Sn||(An=[_(a,"click",t[76]),_(pe,"click",t[127]),_(Mn,"click",t[128]),_(n,"click",C(t[94])),_(e,"click",t[76])],Sn=!0)},p(t,e){16&e[1]&&Dn!==(Dn=Math.round(100*t[35].similarity)+"")&&A(f,Dn),16&e[1]&&Pn!==(Pn=Math.round(100*(t[35].breakdown?.titleFuzzy||0))+"")&&A($,Pn),16&e[1]&&En!==(En=Math.round(100*(t[35].breakdown?.titleWords||0))+"")&&A(V,En),16&e[1]&&On!==(On=Math.round(100*(t[35].breakdown?.descriptionWords||0))+"")&&A(Q,On),16&e[1]&&Tn!==(Tn=Math.round(100*(t[35].breakdown?.keywordsOverlap||0))+"")&&A(nt,Tn),16&e[1]&&Ln!==(Ln=t[35].bookmark1.title+"")&&A(mt,Ln),16&e[1]&&Rn!==(Rn=t[35].bookmark1.url+"")&&A(kt,Rn),16&e[1]&&_t!==(_t=t[35].bookmark1.url)&&M(wt,"href",_t),16&e[1]&&$n!==($n=(t[35].bookmark1.domain||"N/A")+"")&&A(Pt,$n),16&e[1]&&Bn!==(Bn=(t[35].bookmark1.category||"Uncategorized")+"")&&A($t,Bn),16&e[1]&&In!==(In=(t[35].bookmark1.description||"No description")+"")&&A(Nt,In),Yn===(Yn=Kn(t))&&Qn?Qn.p(t,e):(Qn.d(1),Qn=Yn(t),Qn&&(Qn.c(),Qn.m(Ut,null))),16&e[1]&&jn!==(jn=new Date(t[35].bookmark1.dateAdded).toLocaleDateString()+"")&&A(Gt,jn),16&e[1]&&P(ie,"width",t[35].coverage1.percentage+"%"),16&e[1]&&Fn!==(Fn=t[35].coverage1.percentage.toFixed(0)+"")&&A(ae,Fn),16&e[1]&&fe!==(fe=t[35].bookmark1.url)&&M(de,"href",fe),16&e[1]&&zn!==(zn=t[35].bookmark2.title+"")&&A(Me,zn),16&e[1]&&Nn!==(Nn=t[35].bookmark2.url+"")&&A(Oe,Nn),16&e[1]&&Te!==(Te=t[35].bookmark2.url)&&M(Ee,"href",Te),16&e[1]&&Vn!==(Vn=(t[35].bookmark2.domain||"N/A")+"")&&A(je,Vn),16&e[1]&&Wn!==(Wn=(t[35].bookmark2.category||"Uncategorized")+"")&&A(He,Wn),16&e[1]&&Hn!==(Hn=(t[35].bookmark2.description||"No description")+"")&&A(Xe,Hn),Jn===(Jn=Xn(t))&&Gn?Gn.p(t,e):(Gn.d(1),Gn=Jn(t),Gn&&(Gn.c(),Gn.m(en,null))),16&e[1]&&qn!==(qn=new Date(t[35].bookmark2.dateAdded).toLocaleDateString()+"")&&A(ln,qn),16&e[1]&&P(gn,"width",t[35].coverage2.percentage+"%"),16&e[1]&&Un!==(Un=t[35].coverage2.percentage.toFixed(0)+"")&&A(bn,Un),16&e[1]&&_n!==(_n=t[35].bookmark2.url)&&M(wn,"href",_n)},d(t){t&&m(e),Qn.d(),Gn.d(),Sn=!1,r(An)}}}function Cm(e){let n;return{c(){n=y("span"),n.textContent="No keywords",M(n,"class","text-sm text-gray-400")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function Mm(t){let e,n=nt(t[35].bookmark1.keywords.slice(0,5)),r=[];for(let e=0;e<n.length;e+=1)r[e]=Sm(Zf(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=k()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);p(t,e,n)},p(t,i){if(16&i[1]){let s;for(n=nt(t[35].bookmark1.keywords.slice(0,5)),s=0;s<n.length;s+=1){const o=Zf(t,n,s);r[s]?r[s].p(o,i):(r[s]=Sm(o),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Sm(t){let e,n,r=t[154]+"";return{c(){e=y("span"),n=v(r),M(e,"class","px-2 py-0.5 bg-gray-100 text-xs rounded")},m(t,r){p(t,e,r),g(e,n)},p(t,e){16&e[1]&&r!==(r=t[154]+"")&&A(n,r)},d(t){t&&m(e)}}}function Am(e){let n;return{c(){n=y("span"),n.textContent="No keywords",M(n,"class","text-sm text-gray-400")},m(t,e){p(t,n,e)},p:t,d(t){t&&m(n)}}}function Dm(t){let e,n=nt(t[35].bookmark2.keywords.slice(0,5)),r=[];for(let e=0;e<n.length;e+=1)r[e]=Pm(Gf(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=k()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);p(t,e,n)},p(t,i){if(16&i[1]){let s;for(n=nt(t[35].bookmark2.keywords.slice(0,5)),s=0;s<n.length;s+=1){const o=Gf(t,n,s);r[s]?r[s].p(o,i):(r[s]=Pm(o),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(t){t&&m(e),b(r,t)}}}function Pm(t){let e,n,r=t[154]+"";return{c(){e=y("span"),n=v(r),M(e,"class","px-2 py-0.5 bg-gray-100 text-xs rounded")},m(t,r){p(t,e,r),g(e,n)},p(t,e){16&e[1]&&r!==(r=t[154]+"")&&A(n,r)},d(t){t&&m(e)}}}function Em(t){let e,n,i,s,o,a,l,c,u,d,h,f,b,x,v,C,S,A,D,P,E,O,L,R,$,B,I;const j=[vg,xg,yg,bg],F=[];function z(t,e){return"bookmarks"===t[3]?0:"insights"===t[3]?1:"health"===t[3]?2:"dataExplorer"===t[3]?3:-1}~(E=z(t))&&(O=F[E]=j[E](t));let N=t[35]&&_m(t);return{c(){e=w(),n=y("div"),i=y("header"),s=y("div"),o=y("div"),a=y("div"),l=y("h1"),l.textContent="Bookmark Insight",c=w(),u=y("button"),u.innerHTML='<svg class="w-4 h-4 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>\n            Export',d=w(),h=y("nav"),f=y("button"),f.textContent="Bookmarks",b=w(),x=y("button"),x.textContent="Insights",v=w(),C=y("button"),C.textContent="Health",S=w(),A=y("button"),A.textContent=" Data",D=w(),P=y("div"),O&&O.c(),L=w(),N&&N.c(),R=k(),Jf.title="Bookmark Insight Dashboard",M(l,"class","text-2xl font-bold text-gray-900"),M(u,"class","px-3 py-1 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"),M(u,"title","Export bookmarks to JSON"),M(a,"class","flex items-center space-x-4"),M(f,"class","px-4 py-2 rounded-md text-sm font-medium"),T(f,"bg-blue-100","bookmarks"===t[3]),T(f,"text-blue-700","bookmarks"===t[3]),T(f,"text-gray-500","bookmarks"!==t[3]),T(f,"hover:text-gray-700","bookmarks"!==t[3]),M(x,"class","px-4 py-2 rounded-md text-sm font-medium"),T(x,"bg-blue-100","insights"===t[3]),T(x,"text-blue-700","insights"===t[3]),T(x,"text-gray-500","insights"!==t[3]),T(x,"hover:text-gray-700","insights"!==t[3]),M(C,"class","px-4 py-2 rounded-md text-sm font-medium"),T(C,"bg-blue-100","health"===t[3]),T(C,"text-blue-700","health"===t[3]),T(C,"text-gray-500","health"!==t[3]),T(C,"hover:text-gray-700","health"!==t[3]),M(A,"class","px-4 py-2 rounded-md text-sm font-medium"),T(A,"bg-blue-100","dataExplorer"===t[3]),T(A,"text-blue-700","dataExplorer"===t[3]),T(A,"text-gray-500","dataExplorer"!==t[3]),T(A,"hover:text-gray-700","dataExplorer"!==t[3]),M(h,"class","flex space-x-4"),M(o,"class","flex justify-between items-center py-4"),M(s,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),M(i,"class","bg-white shadow-sm border-b border-gray-200"),M(P,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"),M(n,"class","min-h-screen bg-gray-50")},m(r,m){p(r,e,m),p(r,n,m),g(n,i),g(i,s),g(s,o),g(o,a),g(a,l),g(a,c),g(a,u),g(o,d),g(o,h),g(h,f),g(h,b),g(h,x),g(h,v),g(h,C),g(h,S),g(h,A),g(n,D),g(n,P),~E&&F[E].m(P,null),p(r,L,m),N&&N.m(r,m),p(r,R,m),$=!0,B||(I=[_(u,"click",t[93]),_(f,"click",t[95]),_(x,"click",t[96]),_(C,"click",t[97]),_(A,"click",t[98])],B=!0)},p(t,e){(!$||8&e[0])&&T(f,"bg-blue-100","bookmarks"===t[3]),(!$||8&e[0])&&T(f,"text-blue-700","bookmarks"===t[3]),(!$||8&e[0])&&T(f,"text-gray-500","bookmarks"!==t[3]),(!$||8&e[0])&&T(f,"hover:text-gray-700","bookmarks"!==t[3]),(!$||8&e[0])&&T(x,"bg-blue-100","insights"===t[3]),(!$||8&e[0])&&T(x,"text-blue-700","insights"===t[3]),(!$||8&e[0])&&T(x,"text-gray-500","insights"!==t[3]),(!$||8&e[0])&&T(x,"hover:text-gray-700","insights"!==t[3]),(!$||8&e[0])&&T(C,"bg-blue-100","health"===t[3]),(!$||8&e[0])&&T(C,"text-blue-700","health"===t[3]),(!$||8&e[0])&&T(C,"text-gray-500","health"!==t[3]),(!$||8&e[0])&&T(C,"hover:text-gray-700","health"!==t[3]),(!$||8&e[0])&&T(A,"bg-blue-100","dataExplorer"===t[3]),(!$||8&e[0])&&T(A,"text-blue-700","dataExplorer"===t[3]),(!$||8&e[0])&&T(A,"text-gray-500","dataExplorer"!==t[3]),(!$||8&e[0])&&T(A,"hover:text-gray-700","dataExplorer"!==t[3]);let n=E;E=z(t),E===n?~E&&F[E].p(t,e):(O&&(G(),et(F[n],1,1,()=>{F[n]=null}),Z()),~E?(O=F[E],O?O.p(t,e):(O=F[E]=j[E](t),O.c()),tt(O,1),O.m(P,null)):O=null),t[35]?N?N.p(t,e):(N=_m(t),N.c(),N.m(R.parentNode,R)):N&&(N.d(1),N=null)},i(t){$||(tt(O),$=!0)},o(t){et(O),$=!1},d(t){t&&(m(e),m(n),m(L),m(R)),~E&&F[E].d(),N&&N.d(t),B=!1,r(I)}}}function Om(t,e,n){js.register(...ja);let r,i=[],s=!0,o=null,a="bookmarks",l="",c=0,u=0,d=!1,h="date_desc",f={domains:[],folders:[],dateRange:null,searchQuery:"",sortBy:"date_desc"},g=null,p=null,m=null,b=null,y=null,x=null,v=null,w=null,k=null,_=null,C=[],M=[],A=[],D=[],P=!1,E=null,T=null,L=null,R=!1,$=null,I=null,F=[],N=20,V=3,W=!1,H=[],q=[],U=null,K=null,Y=null,Q=!1,X=!1,J=!1,G=!1,Z=!1,tt=!1,et=10,nt=10,rt=10,it=[],st=null,ot=null,at=null,lt=null,ct={deadLinks:10,oldUnused:10,genericTitles:10,temporaryUrls:10,lowScore:10},ut=!1,dt=null,ht=!1,ft=!1,gt=[],pt=!1,mt=null,bt=null,yt=new Set,xt=!1,vt="list";async function wt(t=0,e=!1){try{const r={...f},s=await async function(t=0,e=50,n={}){try{let r=await Rl();if(n.domains&&n.domains.length>0&&(r=r.filter(t=>n.domains.includes(t.domain))),n.folders&&n.folders.length>0&&(r=r.filter(t=>n.folders.includes(t.folderPath))),n.dateRange&&(r=r.filter(t=>t.dateAdded>=n.dateRange.startDate&&t.dateAdded<=n.dateRange.endDate)),n.searchQuery){const t=n.searchQuery.toLowerCase();r=r.filter(e=>e.title&&e.title.toLowerCase().includes(t)||e.url&&e.url.toLowerCase().includes(t)||e.domain&&e.domain.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}switch(n.category&&(r=r.filter(t=>t.category===n.category)),void 0!==n.isEnriched&&(r=n.isEnriched?r.filter(t=>t.lastChecked):r.filter(t=>!t.lastChecked)),n.sortBy||"date_desc"){case"date_asc":r.sort((t,e)=>t.dateAdded-e.dateAdded);break;case"title_asc":r.sort((t,e)=>(t.title||"").localeCompare(e.title||""));break;case"title_desc":r.sort((t,e)=>(e.title||"").localeCompare(t.title||""));break;case"domain_asc":r.sort((t,e)=>(t.domain||"").localeCompare(e.domain||""));break;case"accessed_desc":r.sort((t,e)=>(e.lastAccessed||0)-(t.lastAccessed||0));break;default:r.sort((t,e)=>e.dateAdded-t.dateAdded)}const i=t*e,s=i+e;return{bookmarks:r.slice(i,s),totalCount:r.length,hasMore:s<r.length,currentPage:t,totalPages:Math.ceil(r.length/e)}}catch(t){return console.error("Error getting paginated bookmarks:",t),{bookmarks:[],totalCount:0,hasMore:!1,currentPage:0,totalPages:0}}}(t,50,r);n(0,i=e?[...i,...s.bookmarks]:s.bookmarks),c=s.currentPage,n(5,u=s.totalCount),n(6,d=s.hasMore)}catch(t){throw console.error("Error loading bookmarks:",t),t}}async function kt(t){const e=t.detail.query;n(4,l=e),n(8,f.searchQuery=e,f);try{if(n(1,s=!0),c=0,e&&e.trim()){const t=(await qf(e,{limit:1e3})).results||[];n(14,T=function(t){const e=new Map,n=new Map;for(const r of t){if(r.domain){const t=e.get(r.domain)||{count:0,latestDate:0};t.count++,r.dateAdded>t.latestDate&&(t.latestDate=r.dateAdded),e.set(r.domain,t)}if(r.folderPath){const t=n.get(r.folderPath)||0;n.set(r.folderPath,t+1)}}return{domains:Array.from(e.entries()).map(([t,e])=>({domain:t,count:e.count,latestDate:e.latestDate})).sort((t,e)=>e.count-t.count),folders:Array.from(n.entries()).map(([t,e])=>({folder:t,count:e})).sort((t,e)=>e.count-t.count)}}(t));let r=t;f.domains&&f.domains.length>0&&(r=r.filter(t=>f.domains.includes(t.domain))),f.folders&&f.folders.length>0&&(r=r.filter(t=>f.folders.includes(t.folderPath))),f.dateRange&&(r=r.filter(t=>t.dateAdded>=f.dateRange.startDate&&t.dateAdded<=f.dateRange.endDate));const s=f.sortBy||"relevance";if("relevance"!==s)switch(s){case"date_desc":r.sort((t,e)=>e.dateAdded-t.dateAdded);break;case"date_asc":r.sort((t,e)=>t.dateAdded-e.dateAdded);break;case"title_asc":r.sort((t,e)=>(t.title||"").localeCompare(e.title||""));break;case"title_desc":r.sort((t,e)=>(e.title||"").localeCompare(t.title||""))}const o=50*c;n(0,i=r.slice(o,o+50)),n(5,u=r.length),n(6,d=o+50<r.length)}else n(14,T=null),await wt()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}}async function _t(t){n(7,h=t),n(8,f.sortBy=t,f);try{n(1,s=!0),c=0,await wt()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}}async function Ct(t){n(3,a=t),n(1,s=!0);try{"bookmarks"===t?(c=0,await wt()):"insights"===t?await Mt():"health"===t&&await St()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}}async function Mt(){try{const[t,e,n,r,i,s,o,a,l,c,u,d,h]=await Promise.all([Bl(),Il(),Wl(),Yl(),Nl(),Vl(),Ql(),Xl(),Jl(),Fu(),zu(),Nu(),Vu()]);dt=a,H=c,q=u,U=d,K=h,setTimeout(()=>{const a=document.getElementById("domainChart");a&&(g&&g.destroy(),g=new js(a,{type:"bar",data:{labels:t.map(([t])=>t),datasets:[{label:"Bookmarks",data:t.map(([,t])=>t),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top 10 Most Bookmarked Domains"}},scales:{y:{beginAtZero:!0}}}}));const d=document.getElementById("domainDistributionChart");d&&(w&&w.destroy(),w=new js(d,{type:"pie",data:{labels:l.map(t=>t.domain),datasets:[{data:l.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Distribution by Domain"},tooltip:{callbacks:{label(t){const e=l[t.dataIndex];return`${e.domain}: ${e.count} (${e.percentage}%)`}}}}}}));const h=document.getElementById("activityChart");h&&(p&&p.destroy(),p=new js(h,{type:"line",data:{labels:e.map(([t])=>t),datasets:[{label:"Bookmarks Added",data:e.map(([,t])=>t),fill:!1,borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Activity Timeline"}},scales:{y:{beginAtZero:!0}}}}));const f=document.getElementById("wordCloudChart");f&&(m&&m.destroy(),m=new js(f,{type:"bar",data:{labels:n.map(([t])=>t),datasets:[{label:"Frequency",data:n.map(([,t])=>t),backgroundColor:"rgba(168, 85, 247, 0.5)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:1}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Most Frequent Words in Bookmark Titles"}},scales:{x:{beginAtZero:!0}}}}));const C=document.getElementById("titlePatternsChart");C&&(b&&b.destroy(),b=new js(C,{type:"doughnut",data:{labels:r.map(([t])=>t),datasets:[{data:r.map(([,t])=>t),backgroundColor:["#F59E0B","#10B981","#3B82F6","#EF4444","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Common Title Patterns & Types"}}}}));const M=document.getElementById("ageDistributionChart");M&&(y&&y.destroy(),y=new js(M,{type:"bar",data:{labels:i.map(([t])=>t),datasets:[{label:"Bookmarks",data:i.map(([,t])=>t),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Age Distribution"}},scales:{y:{beginAtZero:!0}}}}));const S=document.getElementById("creationPatternsChart");S&&(x&&x.destroy(),x=new js(S,{type:"radar",data:{labels:s.daily.map(([t])=>t),datasets:[{label:"Bookmarks Created",data:s.daily.map(([,t])=>t),backgroundColor:"rgba(245, 158, 11, 0.2)",borderColor:"rgba(245, 158, 11, 1)",borderWidth:2}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Creation Patterns by Day of Week"}},scales:{r:{beginAtZero:!0}}}}));const A=document.getElementById("urlPatternsChart");A&&(v&&v.destroy(),v=new js(A,{type:"bar",data:{labels:o.topLevelDomains.map(([t])=>`.${t}`),datasets:[{label:"Count",data:o.topLevelDomains.map(([,t])=>t),backgroundColor:"rgba(236, 72, 153, 0.5)",borderColor:"rgba(236, 72, 153, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top Level Domains Distribution"}},scales:{y:{beginAtZero:!0}}}}));const D=document.getElementById("domainHierarchyChart");if(D&&c.length>0){k&&k.destroy();const t=c.slice(0,15);k=new js(D,{type:"bar",data:{labels:t.map(t=>t.name),datasets:[{label:"Bookmarks",data:t.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4","#F43F5E","#22C55E","#A855F7","#0EA5E9"]}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Domain Hierarchy (Top 15 Domains)"},legend:{display:!1}},scales:{x:{beginAtZero:!0}}}})}const P=document.getElementById("freshnessChart");P&&u.length>0&&(_&&_.destroy(),_=new js(P,{type:"doughnut",data:{labels:u.map(t=>t.period),datasets:[{data:u.map(t=>t.count),backgroundColor:["#22C55E","#84CC16","#F59E0B","#F97316","#EF4444"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Freshness"}}}}))},100)}catch(t){console.error("Error loading insights:",t)}}async function St(){n(29,et=10),n(30,nt=10),n(31,rt=10);try{n(24,Q=!0),X=!0,n(12,P=!0),n(25,J=!0),n(13,E=await Ul()),await At(),Hl().then(t=>{n(9,C=t),n(24,Q=!1)}).catch(t=>{console.error("Error loading duplicates:",t),n(24,Q=!1)}),Gl().then(t=>{n(11,D=t),n(12,P=!1)}).catch(t=>{console.error("Error loading dead links:",t),n(12,P=!1)}),Wu().then(t=>{n(23,Y=t)}).catch(t=>{console.error("Error loading dead link insights:",t)}),ql().then(t=>{n(10,M=t),n(25,J=!1)}).catch(t=>{console.error("Error loading malformed URLs:",t),n(25,J=!1)}),X=!1,A=[],n(28,tt=!1),n(27,Z=!1)}catch(t){console.error("Error loading health data:",t)}}async function At(){try{const t=await chrome.runtime.sendMessage({action:"getEnrichmentStatus"});t.success&&n(15,L=t);const e=await async function(){try{return await Tl.settings.get("app")||Ll}catch(t){return console.error("Error getting settings:",t),Ll}}();e&&(n(20,N=e.enrichmentBatchSize||20),n(21,V=e.enrichmentConcurrency||3))}catch(t){console.error("Error loading enrichment status:",t)}}async function Dt(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted dead link: ${t}`)):console.log(`Bookmark ${t} no longer exists`),n(11,D=D.filter(e=>e.id!==t)),Y&&n(23,Y={...Y,total:Y.total-1}),await $l(t)}catch(t){console.error("Error deleting dead link:",t)}}B(async()=>{try{await wt(),"insights"===a?await Mt():"health"===a&&await St()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}chrome.runtime.onMessage.addListener((t,e,r)=>{if("enrichmentProgress"===t.action&&t.progress){n(18,I=t.progress);const e={timestamp:Date.now(),...t.progress};n(19,F=[...F,e]),F.length>100&&n(19,F=F.slice(-100))}})});let Pt=!1,Et=null,Ot=null;async function Tt(t,e){try{const r=await chrome.bookmarks.get([t]);r&&r.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted bookmark: ${t}`)):console.log(`Bookmark ${t} no longer exists`),n(9,C=C.map((n,r)=>r===e?n.filter(e=>e.id!==t):n).filter(t=>t.length>1))}catch(t){console.error("Error deleting bookmark:",t),n(24,Q=!0),Hl().then(t=>{n(9,C=t),n(24,Q=!1)})}}async function Lt(t=!1){n(28,tt=!0),n(32,it=[]),n(33,st=null),n(34,ot=null);try{const e=await Xf({minSimilarity:.4,maxPairs:100,prioritizeSameDomain:!0,forceRefresh:t});n(32,it=e.pairs),n(33,st=e.stats),n(34,ot={fromCache:e.fromCache,cachedAt:e.cachedAt,cacheAge:e.cacheAge})}catch(t){console.error("Error running smart similar detection:",t)}finally{n(28,tt=!1)}}function Rt(t){n(35,at=t)}function $t(){n(35,at=null)}async function Bt(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0&&await chrome.bookmarks.remove(t),await $l(t),n(32,it=it.filter(e=>e.bookmark1.id!==t&&e.bookmark2.id!==t)),!at||at.bookmark1.id!==t&&at.bookmark2.id!==t||$t()}catch(t){console.error("Error deleting bookmark from comparison:",t)}}function It(t){n(37,ct={...ct,[t]:ct[t]+10})}async function jt(t,e){try{const r=await chrome.bookmarks.get([t]);r&&r.length>0&&await chrome.bookmarks.remove(t),await $l(t),lt&&n(36,lt={...lt,[e]:lt[e].filter(e=>e.id!==t),summary:{...lt.summary,total:lt.summary.total-1,byCategory:{...lt.summary.byCategory,[e]:lt.summary.byCategory[e]-1}}})}catch(t){console.error("Error deleting useless bookmark:",t)}}async function Ft(t){if(!lt||!lt[t]||0===lt[t].length)return;const e=lt[t].length;if(confirm(`Are you sure you want to delete all ${e} bookmarks in "${t}"? This action cannot be undone.`)){n(38,ut=!0);try{const r=lt[t].map(t=>t.id);await Kl(r),n(36,lt={...lt,[t]:[],summary:{...lt.summary,total:lt.summary.total-e,byCategory:{...lt.summary.byCategory,[t]:0}}})}catch(t){console.error("Error deleting useless bookmarks:",t)}finally{n(38,ut=!1)}}}async function zt(t){if(confirm(`Restore auto-backup from ${gt[t].createdAt}?\n\nThis will replace your current data.`)){n(40,ft=!0);try{const e=await async function(t=0){try{const e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];if(t<0||t>=e.length)throw new Error(`Invalid backup index: ${t}. Available: 0-${e.length-1}`);const n={version:"2.1",...e[t]};return await tc(n)}catch(t){throw console.error("Error restoring from auto-backup:",t),t}}(t);e.success&&(alert("Restore complete! Refreshing..."),window.location.reload())}catch(t){console.error("Error restoring auto-backup:",t),alert("Error: "+t.message)}finally{n(40,ft=!1)}}}return[i,s,o,a,l,u,d,h,f,C,M,D,P,E,T,L,R,$,I,F,N,V,W,Y,Q,J,G,Z,tt,et,nt,rt,it,st,ot,at,lt,ct,ut,ht,ft,gt,bt,yt,xt,vt,r,Pt,Et,Ot,wt,async function(){if(d&&!s)try{n(1,s=!0),await wt(c+1,!0)}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}},kt,async function(t){const e=t.detail;n(8,f={...f,...e});try{if(n(1,s=!0),c=0,l&&l.trim())return void await kt({detail:{query:l}});await wt()}catch(t){n(2,o=t.message)}finally{n(1,s=!1)}},_t,Ct,function(t){const{category:e}=t.detail;n(8,f={...f,searchQuery:`category:${e}`}),n(3,a="bookmarks"),wt(0,!1)},function(t){const{domain:e}=t.detail;n(8,f={...f,domains:[e]}),n(3,a="bookmarks"),wt(0,!1)},async function(t){n(4,l="accessed:yes"),n(3,a="bookmarks"),await kt(l)},async function(){n(4,l="stale:yes"),n(3,a="bookmarks"),await kt(l)},async function(){n(3,a="health"),await St()},async function(){n(4,l="enriched:no"),n(3,a="bookmarks"),await kt(l)},async function(){n(4,l="category:uncategorized"),n(3,a="bookmarks"),await kt(l)},function(){n(3,a="health"),St()},async function(t){const{ids:e}=t.detail;if(e&&0!==e.length&&confirm(`Are you sure you want to delete ${e.length} bookmark(s)?`))try{await Kl(e),await wt(0,!1)}catch(t){console.error("Error deleting bookmarks:",t),alert("Failed to delete some bookmarks. Please try again.")}},async function(t){const{query:e}=t.detail;n(4,l=e),n(3,a="bookmarks"),await kt(e)},async function(){n(16,R=!0),n(17,$=null),n(18,I=null),n(19,F=[]);try{console.log("Creating auto-backup before enrichment..."),await ec();const t=await chrome.runtime.sendMessage({action:"runEnrichment",batchSize:N,concurrency:V,force:W});t.success?(n(17,$=t.result),await At()):n(17,$={error:t.error})}catch(t){console.error("Error running enrichment:",t),n(17,$={error:t.message})}finally{n(16,R=!1)}},function(){n(29,et+=10)},function(){n(30,nt+=10)},function(){n(31,rt+=10)},Dt,async function(){if(0===D.length)return;if(confirm(`Are you sure you want to delete all ${D.length} dead links? This action cannot be undone.`)){n(26,G=!0);try{const t=D.map(t=>t.id),e=await Kl(t);console.log(`Deleted ${e.success} dead links, ${e.errors.length} errors`),n(11,D=[]),n(23,Y=null),Wu().then(t=>{n(23,Y=t)})}catch(t){console.error("Error deleting all dead links:",t),Gl().then(t=>{n(11,D=t)})}finally{n(26,G=!1)}}},async function(){if(0===D.length)return;if(!confirm(`Re-check ${D.length} dead links? This will attempt to fetch each URL again to verify if it's still unreachable.`))return;n(47,Pt=!0),n(48,Et=null),n(49,Ot=null);const t=t=>{"reEnrichProgress"===t.action&&t.progress&&n(48,Et=t.progress)};chrome.runtime.onMessage.addListener(t);try{const t=await chrome.runtime.sendMessage({action:"reEnrichDeadLinks"});if(t.success){n(49,Ot=t.results);const e=await Gl();n(11,D=e);const r=await Wu();n(23,Y=r)}else console.error("Error re-enriching dead links:",t.error),n(49,Ot={error:t.error})}catch(t){console.error("Error re-enriching dead links:",t),n(49,Ot={error:t.message})}finally{n(47,Pt=!1),chrome.runtime.onMessage.removeListener(t)}},Tt,Lt,Rt,$t,Bt,It,jt,Ft,function(){n(44,xt=!xt),xt||(yt.clear(),n(43,yt))},function(t){const{bookmarkId:e,selected:r}=t.detail;r?yt.add(e):yt.delete(e),n(43,yt)},function(){n(43,yt=new Set(i.map(t=>t.id)))},function(){yt.clear(),n(43,yt)},async function(){if(0!==yt.size&&confirm(`Are you sure you want to delete ${yt.size} bookmark(s)?`))try{n(1,s=!0);const t=Array.from(yt),e=await Kl(t);e.errors.length>0?(console.error("Some bookmarks could not be deleted:",e.errors),alert(`${e.success} bookmarks deleted successfully. ${e.errors.length} failed.`)):alert(`${e.success} bookmarks deleted successfully.`),yt.clear(),n(43,yt),n(44,xt=!1),c=0,await wt()}catch(t){console.error("Error deleting bookmarks:",t),alert("Error deleting bookmarks. Please try again.")}finally{n(1,s=!1)}},async function(t){const{bookmarkId:e}=t.detail;if(confirm("Are you sure you want to delete this bookmark?"))try{await $l(e),c=0,await wt()}catch(t){console.error("Error deleting bookmark:",t),alert("Error deleting bookmark. Please try again.")}},function(){n(45,vt="list"===vt?"card":"list")},async function(){n(39,ht=!0);try{const t=await async function(){try{const t=await Zl(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=`bookmark-insights-backup-${(new Date).toISOString().slice(0,10)}.json`,i=document.createElement("a");return i.href=n,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),{success:!0,filename:r,metadata:t.metadata}}catch(t){throw console.error("Error downloading backup:",t),t}}();t.success&&alert(`Backup saved: ${t.filename}\n\nContains:\n- ${t.metadata.totalBookmarks} bookmarks\n- ${t.metadata.enrichedCount} enriched\n- ${t.metadata.categorizedCount} categorized`)}catch(t){console.error("Error creating backup:",t),alert("Error creating backup: "+t.message)}finally{n(39,ht=!1)}},async function(){if(mt)if(bt&&bt.valid){if(confirm(`Restore backup from ${bt.createdAt}?\n\nThis will replace your current data with:\n- ${bt.metadata.totalBookmarks} bookmarks\n- ${bt.metadata.enrichedCount} enriched\n\nYour current data will be auto-backed up first.`)){n(40,ft=!0);try{await ec();const t=await mt.text(),e=JSON.parse(t),r=await tc(e);r.success&&(alert(`Restore complete!\n\n- ${r.results.bookmarksRestored} bookmarks restored\n- ${r.results.similaritiesRestored} similarities restored\n\nRefreshing...`),pt=!1,mt=null,n(42,bt=null),window.location.reload())}catch(t){console.error("Error restoring backup:",t),alert("Error restoring backup: "+t.message)}finally{n(40,ft=!1)}}}else alert("Please select a valid backup file");else alert("Please select a backup file first")},async function(t){const e=t.target.files[0];if(e){mt=e;try{const t=await e.text(),r=JSON.parse(t);n(42,bt=function(t){const e=[];if(!t)return{valid:!1,issues:["Backup is empty or null"]};if(t.version||e.push("Missing version field"),t.data){if(t.data.bookmarks&&Array.isArray(t.data.bookmarks)||e.push("Missing or invalid bookmarks array"),t.data.bookmarks&&t.data.bookmarks.length>0){const n=t.data.bookmarks[0];n.id&&n.url||e.push("Bookmarks are missing required fields (id, url)")}}else e.push("Missing data field");return{valid:0===e.length,issues:e,metadata:t.metadata||null,version:t.version||"unknown",createdAt:t.createdAt||"unknown"}}(r))}catch(t){n(42,bt={valid:!1,issues:["Invalid JSON file"]})}}},async function(){n(41,gt=await async function(){try{return((await chrome.storage.local.get(["autoBackups"])).autoBackups||[]).map((t,e)=>({index:e,createdAt:t.createdAt,metadata:t.metadata}))}catch(t){return console.error("Error listing auto-backups:",t),[]}}())},zt,async function(){try{const t=await async function(){try{const t=await Rl();return{exportDate:(new Date).toISOString(),version:"2.0",totalBookmarks:t.length,bookmarks:t}}catch(t){throw console.error("Error exporting bookmarks:",t),t}}(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`bookmarks-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}catch(t){console.error("Error exporting bookmarks:",t),alert("Error exporting bookmarks. Please try again.")}},function(e){j.call(this,t,e)},()=>Ct("bookmarks"),()=>Ct("insights"),()=>Ct("health"),()=>Ct("dataExplorer"),function(t){z[t?"unshift":"push"](()=>{r=t,n(46,r)})},()=>wt(),()=>{r&&r.clearAllFilters()},function(){h=O(this),n(7,h)},t=>_t(t.target.value),function(){N=S(this.value),n(20,N)},function(){V=S(this.value),n(21,V)},function(){W=this.checked,n(22,W)},t=>Dt(t.id),(t,e)=>Tt(t.id,e),()=>Lt(!0),()=>Lt(!1),t=>Rt(t),t=>Bt(t.bookmark1.id),t=>Bt(t.bookmark2.id),()=>Ft("oldUnused"),t=>jt(t.id,"oldUnused"),()=>It("oldUnused"),()=>Ft("genericTitles"),t=>jt(t.id,"genericTitles"),()=>It("genericTitles"),()=>Ft("temporaryUrls"),t=>jt(t.id,"temporaryUrls"),()=>It("temporaryUrls"),()=>Ft("lowScore"),t=>jt(t.id,"lowScore"),()=>It("lowScore"),t=>zt(t),()=>Bt(at.bookmark1.id),()=>Bt(at.bookmark2.id)]}const Tm=new class extends ut{constructor(t){super(),ct(this,t,Om,Em,s,{},null,[-1,-1,-1,-1,-1,-1,-1])}}({target:document.body});var Lm=Object.freeze({__proto__:null,default:{}});export{Tm as default};
