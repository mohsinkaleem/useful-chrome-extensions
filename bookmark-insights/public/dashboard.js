function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s;function a(t,e){return t===e||(s||(s=document.createElement("a")),s.href=e,t===s.href)}function l(e,...n){if(null==e){for(const t of n)t(void 0);return t}const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t,e,n){t.$$.on_destroy.push(l(e,n))}function u(t,e,n,r){if(t){const i=d(t,e,n,r);return t[0](i)}}function d(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function h(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function f(t,e,n,r,i,o){if(i){const s=d(e,n,r,o);t.p(s,i)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}const g="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function m(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function x(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function k(t){return document.createTextNode(t)}function _(){return k(" ")}function C(){return k("")}function M(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function S(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function A(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function D(t){return""===t?null:+t}function T(t,e){e=""+e,t.data!==e&&(t.data=e)}function P(t,e){t.value=null==e?"":e}function E(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function L(t,e,n){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function O(t){const e=t.querySelector(":checked");return e&&e.__value}function R(t,e,n){t.classList.toggle(e,!!n)}let B;function j(t){B=t}function $(){if(!B)throw new Error("Function called outside component initialization");return B}function I(t){$().$$.on_mount.push(t)}function z(){const t=$();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}(e,n,{cancelable:r});return i.slice().forEach(e=>{e.call(t,o)}),!o.defaultPrevented}return!0}}function F(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t.call(this,e))}const N=[],W=[];let H=[];const V=[],q=Promise.resolve();let U=!1;function K(t){H.push(t)}const Y=new Set;let Q=0;function J(){if(0!==Q)return;const t=B;do{try{for(;Q<N.length;){const t=N[Q];Q++,j(t),X(t.$$)}}catch(t){throw N.length=0,Q=0,t}for(j(null),N.length=0,Q=0;W.length;)W.pop()();for(let t=0;t<H.length;t+=1){const e=H[t];Y.has(e)||(Y.add(e),e())}H.length=0}while(N.length);for(;V.length;)V.pop()();U=!1,Y.clear(),j(t)}function X(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}const G=new Set;let Z;function tt(){Z={r:0,c:[],p:Z}}function et(){Z.r||r(Z.c),Z=Z.p}function nt(t,e){t&&t.i&&(G.delete(t),t.i(e))}function rt(t,e,n,r){if(t&&t.o){if(G.has(t))return;G.add(t),Z.c.push(()=>{G.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function it(t){return void 0!==t?.length?t:Array.from(t)}function ot(t,e){rt(t,1,1,()=>{e.delete(t.key)})}function st(t,e,n,i,o,s,a,l,c,u,d,h){let f=t.length,p=s.length,g=f;const m={};for(;g--;)m[t[g].key]=g;const y=[],b=new Map,x=new Map,v=[];for(g=p;g--;){const t=h(o,s,g),r=n(t);let l=a.get(r);l?i&&v.push(()=>l.p(t,e)):(l=u(r,t),l.c()),b.set(r,y[g]=l),r in m&&x.set(r,Math.abs(g-m[r]))}const w=new Set,k=new Set;function _(t){nt(t,1),t.m(l,d),a.set(t.key,t),d=t.first,p--}for(;f&&p;){const e=y[p-1],n=t[f-1],r=e.key,i=n.key;e===n?(d=e.first,f--,p--):b.has(i)?!a.has(r)||w.has(r)?_(e):k.has(i)?f--:x.get(r)>x.get(i)?(k.add(r),_(e)):(w.add(i),f--):(c(n,a),f--)}for(;f--;){const e=t[f];b.has(e.key)||c(e,a)}for(;p;)_(y[p-1]);return r(v),y}function at(t){t&&t.c()}function lt(t,n,o){const{fragment:s,after_update:a}=t.$$;s&&s.m(n,o),K(()=>{const n=t.$$.on_mount.map(e).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]}),a.forEach(K)}function ct(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];H.forEach(r=>-1===t.indexOf(r)?e.push(r):n.push(r)),n.forEach(t=>t()),H=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(t,e){-1===t.$$.dirty[0]&&(N.push(t),U||(U=!0,q.then(J)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function dt(e,i,o,s,a,l,c=null,u=[-1]){const d=B;j(e);const h=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||d.$$.root};c&&c(h.root);let f=!1;if(h.ctx=o?o(e,i.props||{},(t,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),f&&ut(e,t)),n}):[],h.update(),f=!0,r(h.before_update),h.fragment=!!s&&s(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(b)}else h.fragment&&h.fragment.c();i.intro&&nt(e.$$.fragment),lt(e,i.target,i.anchor),J()}j(d)}class ht{$$=void 0;$$set=void 0;$destroy(){ct(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function ft(t){return t+.5|0}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const pt=(t,e,n)=>Math.max(Math.min(t,n),e);function gt(t){return pt(ft(2.55*t),0,255)}function mt(t){return pt(ft(255*t),0,255)}function yt(t){return pt(ft(t/2.55)/100,0,1)}function bt(t){return pt(ft(100*t),0,100)}const xt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},vt=[..."0123456789ABCDEF"],wt=t=>vt[15&t],kt=t=>vt[(240&t)>>4]+vt[15&t],_t=t=>(240&t)>>4==(15&t);function Ct(t){var e=(t=>_t(t.r)&&_t(t.g)&&_t(t.b)&&_t(t.a))(t)?wt:kt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const Mt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function St(t,e,n){const r=e*Math.min(n,1-n),i=(e,i=(e+t/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function At(t,e,n){const r=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Dt(t,e,n){const r=St(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Tt(t){const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),o=Math.min(e,n,r),s=(i+o)/2;let a,l,c;return i!==o&&(c=i-o,l=s>.5?c/(2-i-o):c/(i+o),a=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(e,n,r,c,i),a=60*a+.5),[0|a,l||0,s]}function Pt(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(mt)}function Et(t,e,n){return Pt(St,t,e,n)}function Lt(t){return(t%360+360)%360}function Ot(t){const e=Mt.exec(t);let n,r=255;if(!e)return;e[5]!==n&&(r=e[6]?gt(+e[5]):mt(+e[5]));const i=Lt(+e[2]),o=+e[3]/100,s=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return Pt(Dt,t,e,n)}(i,o,s):"hsv"===e[1]?function(t,e,n){return Pt(At,t,e,n)}(i,o,s):Et(i,o,s),{r:n[0],g:n[1],b:n[2],a:r}}const Rt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Bt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let jt;function $t(t){jt||(jt=function(){const t={},e=Object.keys(Bt),n=Object.keys(Rt);let r,i,o,s,a;for(r=0;r<e.length;r++){for(s=a=e[r],i=0;i<n.length;i++)o=n[i],a=a.replace(o,Rt[o]);o=parseInt(Bt[s],16),t[a]=[o>>16&255,o>>8&255,255&o]}return t}(),jt.transparent=[0,0,0,0]);const e=jt[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const It=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const zt=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Ft=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Nt(t,e,n){if(t){let r=Tt(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=Et(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Wt(t,e){return t?Object.assign(e||{},t):t}function Ht(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=mt(t[3]))):(e=Wt(t,{r:0,g:0,b:0,a:1})).a=mt(e.a),e}function Vt(t){return"r"===t.charAt(0)?function(t){const e=It.exec(t);let n,r,i,o=255;if(e){if(e[7]!==n){const t=+e[7];o=e[8]?gt(t):pt(255*t,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?gt(n):pt(n,0,255)),r=255&(e[4]?gt(r):pt(r,0,255)),i=255&(e[6]?gt(i):pt(i,0,255)),{r:n,g:r,b:i,a:o}}}(t):Ot(t)}class qt{constructor(t){if(t instanceof qt)return t;const e=typeof t;let n;var r,i,o;"object"===e?n=Ht(t):"string"===e&&(o=(r=t).length,"#"===r[0]&&(4===o||5===o?i={r:255&17*xt[r[1]],g:255&17*xt[r[2]],b:255&17*xt[r[3]],a:5===o?17*xt[r[4]]:255}:7!==o&&9!==o||(i={r:xt[r[1]]<<4|xt[r[2]],g:xt[r[3]]<<4|xt[r[4]],b:xt[r[5]]<<4|xt[r[6]],a:9===o?xt[r[7]]<<4|xt[r[8]]:255})),n=i||$t(t)||Vt(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Wt(this._rgb);return t&&(t.a=yt(t.a)),t}set rgb(t){this._rgb=Ht(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${yt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?Ct(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=Tt(t),n=e[0],r=bt(e[1]),i=bt(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${yt(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let i;const o=e===i?.5:e,s=2*o-1,a=n.a-r.a,l=((s*a===-1?s:(s+a)/(1+s*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const r=Ft(yt(t.r)),i=Ft(yt(t.g)),o=Ft(yt(t.b));return{r:mt(zt(r+n*(Ft(yt(e.r))-r))),g:mt(zt(i+n*(Ft(yt(e.g))-i))),b:mt(zt(o+n*(Ft(yt(e.b))-o))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new qt(this.rgb)}alpha(t){return this._rgb.a=mt(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=ft(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Nt(this._rgb,2,t),this}darken(t){return Nt(this._rgb,2,-t),this}saturate(t){return Nt(this._rgb,1,t),this}desaturate(t){return Nt(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=Tt(t);n[0]=Lt(n[0]+e),n=Et(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ut(){}const Kt=(()=>{let t=0;return()=>t++})();function Yt(t){return null==t}function Qt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Jt(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Xt(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function Gt(t,e){return Xt(t)?t:e}function Zt(t,e){return void 0===t?e:t}const te=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ee(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function ne(t,e,n,r){let i,o,s;if(Qt(t))if(o=t.length,r)for(i=o-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<o;i++)e.call(n,t[i],i);else if(Jt(t))for(s=Object.keys(t),o=s.length,i=0;i<o;i++)e.call(n,t[s[i]],s[i])}function re(t,e){let n,r,i,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],o=e[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function ie(t){if(Qt(t))return t.map(ie);if(Jt(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ie(t[n[i]]);return e}return t}function oe(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function se(t,e,n,r){if(!oe(t))return;const i=e[t],o=n[t];Jt(i)&&Jt(o)?ae(i,o,r):e[t]=ie(o)}function ae(t,e,n){const r=Qt(e)?e:[e],i=r.length;if(!Jt(t))return t;const o=(n=n||{}).merger||se;let s;for(let e=0;e<i;++e){if(s=r[e],!Jt(s))continue;const i=Object.keys(s);for(let e=0,r=i.length;e<r;++e)o(i[e],t,s,n)}return t}function le(t,e){return ae(t,e,{merger:ce})}function ce(t,e,n){if(!oe(t))return;const r=e[t],i=n[t];Jt(r)&&Jt(i)?le(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ie(i))}const ue={"":t=>t,x:t=>t.x,y:t=>t.y};function de(t,e){const n=ue[e]||(ue[e]=function(t){const e=function(t){const e=t.split("."),n=[];let r="";for(const t of e)r+=t,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function he(t){return t.charAt(0).toUpperCase()+t.slice(1)}const fe=t=>void 0!==t,pe=t=>"function"==typeof t,ge=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const me=Math.PI,ye=2*me,be=ye+me,xe=Number.POSITIVE_INFINITY,ve=me/180,we=me/2,ke=me/4,_e=2*me/3,Ce=Math.log10,Me=Math.sign;function Se(t,e,n){return Math.abs(t-e)<n}function Ae(t){const e=Math.round(t);t=Se(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Ce(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function De(t){return!function(t){return"symbol"==typeof t||"object"==typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Te(t,e,n){let r,i,o;for(r=0,i=t.length;r<i;r++)o=t[r][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Pe(t){return t*(me/180)}function Ee(t){return t*(180/me)}function Le(t){if(!Xt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Oe(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*me&&(o+=ye),{angle:o,distance:i}}function Re(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Be(t,e){return(t-e+be)%ye-me}function je(t){return(t%ye+ye)%ye}function $e(t,e,n,r){const i=je(t),o=je(e),s=je(n),a=je(o-i),l=je(s-i),c=je(i-o),u=je(i-s);return i===o||i===s||r&&o===s||a>l&&c<u}function Ie(t,e,n){return Math.max(e,Math.min(n,t))}function ze(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Fe(t,e,n){n=n||(n=>t[n]<e);let r,i=t.length-1,o=0;for(;i-o>1;)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const Ne=(t,e,n,r)=>Fe(t,n,r?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),We=(t,e,n)=>Fe(t,n,r=>t[r][e]>=n);const He=["push","pop","shift","splice","unshift"];function Ve(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(He.forEach(e=>{delete t[e]}),delete t._chartjs)}function qe(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ue="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Ke(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,Ue.call(window,()=>{r=!1,t.apply(e,n)}))}}const Ye=t=>"start"===t?"left":"end"===t?"right":"center",Qe=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Je(t,e,n){const r=e.length;let i=0,o=r;if(t._sorted){const{iScale:s,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=s.axis,{min:d,max:h,minDefined:f,maxDefined:p}=s.getUserBounds();if(f){if(i=Math.min(Ne(l,u,d).lo,n?r:Ne(e,u,s.getPixelForValue(d)).lo),c){const t=l.slice(0,i+1).reverse().findIndex(t=>!Yt(t[a.axis]));i-=Math.max(0,t)}i=Ie(i,0,r-1)}if(p){let t=Math.max(Ne(l,s.axis,h,!0).hi+1,n?0:Ne(e,u,s.getPixelForValue(h),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!Yt(t[a.axis]));t+=Math.max(0,e)}o=Ie(t,i,r)-i}else o=r-i}return{start:i,count:o}}function Xe(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const Ge=t=>0===t||1===t,Ze=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*ye/n),tn=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ye/n)+1,en={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*we),easeOutSine:t=>Math.sin(t*we),easeInOutSine:t=>-.5*(Math.cos(me*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ge(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ge(t)?t:Ze(t,.075,.3),easeOutElastic:t=>Ge(t)?t:tn(t,.075,.3),easeInOutElastic(t){const e=.1125;return Ge(t)?t:t<.5?.5*Ze(2*t,e,.45):.5+.5*tn(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-en.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*en.easeInBounce(2*t):.5*en.easeOutBounce(2*t-1)+.5};function nn(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function rn(t){return nn(t)?t:new qt(t)}function on(t){return nn(t)?t:new qt(t).saturate(.5).darken(.1).hexString()}const sn=["x","y","borderWidth","radius","tension"],an=["color","borderColor","backgroundColor"];const ln=new Map;function cn(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let r=ln.get(n);return r||(r=new Intl.NumberFormat(t,e),ln.set(n,r)),r}(e,n).format(t)}const un={values:t=>Qt(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const r=this.chart.options.locale;let i,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const s=Ce(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),cn(t,r,l)},logarithmic(t,e,n){if(0===t)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Ce(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?un.numeric.call(this,t,e,n):""}};var dn={formatters:un};const hn=Object.create(null),fn=Object.create(null);function pn(t,e){if(!e)return t;const n=e.split(".");for(let e=0,r=n.length;e<r;++e){const r=n[e];t=t[r]||(t[r]=Object.create(null))}return t}function gn(t,e,n){return"string"==typeof e?ae(pn(t,e),n):ae(pn(t,""),e)}class mn{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>on(e.backgroundColor),this.hoverBorderColor=(t,e)=>on(e.borderColor),this.hoverColor=(t,e)=>on(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return gn(this,t,e)}get(t){return pn(this,t)}describe(t,e){return gn(fn,t,e)}override(t,e){return gn(hn,t,e)}route(t,e,n,r){const i=pn(this,t),o=pn(this,n),s="_"+e;Object.defineProperties(i,{[s]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=o[r];return Jt(t)?Object.assign({},e,t):Zt(t,e)},set(t){this[s]=t}}})}apply(t){t.forEach(t=>t(this))}}var yn=new mn({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:an},numbers:{type:"number",properties:sn}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function bn(t,e,n,r,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,n.push(i)),o>r&&(r=o),r}function xn(t,e,n,r){let i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let s=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],null==d||Qt(d)){if(Qt(d))for(c=0,u=d.length;c<u;c++)h=d[c],null==h||Qt(h)||(s=bn(t,i,o,s,h))}else s=bn(t,i,o,s,d);t.restore();const f=o.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[o[l]];o.splice(0,f)}return s}function vn(t,e,n){const r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function wn(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function kn(t,e,n,r){_n(t,e,n,r,null)}function _n(t,e,n,r,i){let o,s,a,l,c,u,d,h;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*ve;if(f&&"object"==typeof f&&(o=f.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(n,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,g,0,0,ye):t.arc(n,r,g,0,ye),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=_e,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=_e,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,s=Math.cos(m+ke)*l,d=Math.cos(m+ke)*(i?i/2-c:l),a=Math.sin(m+ke)*l,h=Math.sin(m+ke)*(i?i/2-c:l),t.arc(n-d,r-a,c,m-me,m-we),t.arc(n+h,r-s,c,m-we,m),t.arc(n+d,r+a,c,m,m+we),t.arc(n-h,r+s,c,m+we,m+me),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}m+=ke;case"rectRot":d=Math.cos(m)*(i?i/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+h,r-s),t.lineTo(n+d,r+a),t.lineTo(n-h,r+s),t.closePath();break;case"crossRot":m+=ke;case"cross":d=Math.cos(m)*(i?i/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-s),t.lineTo(n-h,r+s);break;case"star":d=Math.cos(m)*(i?i/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-s),t.lineTo(n-h,r+s),m+=ke,d=Math.cos(m)*(i?i/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-s),t.lineTo(n-h,r+s);break;case"line":s=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-s,r-a),t.lineTo(n+s,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Cn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Mn(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Sn(t){t.restore()}function An(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else"after"===i!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Dn(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Tn(t,e,n,r,i){if(i.strikethrough||i.underline){const o=t.measureText(r),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(s,u),t.lineTo(a,u),t.stroke()}}function Pn(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function En(t,e,n,r,i,o={}){const s=Qt(e)?e:[e],a=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Yt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<s.length;++l)c=s[l],o.backdrop&&Pn(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Yt(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,n,r,o.maxWidth)),t.fillText(c,n,r,o.maxWidth),Tn(t,n,r,c,o),r+=Number(i.lineHeight);t.restore()}function Ln(t,e){const{x:n,y:r,w:i,h:o,radius:s}=e;t.arc(n+s.topLeft,r+s.topLeft,s.topLeft,1.5*me,me,!0),t.lineTo(n,r+o-s.bottomLeft),t.arc(n+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,me,we,!0),t.lineTo(n+i-s.bottomRight,r+o),t.arc(n+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,we,0,!0),t.lineTo(n+i,r+s.topRight),t.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-we,!0),t.lineTo(n+s.topLeft,r)}const On=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Rn=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Bn(t,e){const n=(""+t).match(On);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const jn=t=>+t||0;function $n(t,e){const n={},r=Jt(e),i=r?Object.keys(e):e,o=Jt(t)?r?n=>Zt(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of i)n[t]=jn(o(t));return n}function In(t){return $n(t,{top:"y",right:"x",bottom:"y",left:"x"})}function zn(t){return $n(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Fn(t){const e=In(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Nn(t,e){t=t||{},e=e||yn.font;let n=Zt(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let r=Zt(t.style,e.style);r&&!(""+r).match(Rn)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Zt(t.family,e.family),lineHeight:Bn(Zt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Zt(t.weight,e.weight),string:""};return i.string=function(t){return!t||Yt(t.size)||Yt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function Wn(t,e,n,r){let i,o,s,a=!0;for(i=0,o=t.length;i<o;++i)if(s=t[i],void 0!==s&&(void 0!==e&&"function"==typeof s&&(s=s(e),a=!1),void 0!==n&&Qt(s)&&(s=s[n%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function Hn(t,e){return Object.assign(Object.create(t),e)}function Vn(t,e=[""],n,r,i=()=>t[0]){const o=n||t;void 0===r&&(r=er("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:r,_getTarget:i,override:n=>Vn([n,...t],e,o,r)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,r)=>Qn(n,r,()=>function(t,e,n,r){let i;for(const o of e)if(i=er(Kn(o,t),n),void 0!==i)return Yn(t,i)?Zn(n,r,t,i):i}(r,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>nr(t).includes(e),ownKeys:t=>nr(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function qn(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Un(t,r),setContext:e=>qn(t,e,n,r),override:i=>qn(t.override(i),e,n,r)};return new Proxy(i,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Qn(t,e,()=>function(t,e,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=t;let a=r[e];pe(a)&&s.isScriptable(e)&&(a=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:s,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(o,s||r);a.delete(t),Yn(t,l)&&(l=Zn(i._scopes,i,t,l));return l}(e,a,t,n));Qt(a)&&a.length&&(a=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=n;if(void 0!==o.index&&r(t))return e[o.index%e.length];if(Jt(e[0])){const n=e,r=i._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=Zn(r,i,t,l);e.push(qn(n,o,s&&s[t],a))}}return e}(e,a,t,s.isIndexable));Yn(e,a)&&(a=qn(a,i,o&&o[e],s));return a}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,r)=>(t[n]=r,delete e[n],!0)})}function Un(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:pe(n)?n:()=>n,isIndexable:pe(r)?r:()=>r}}const Kn=(t,e)=>t?t+he(e):e,Yn=(t,e)=>Jt(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Qn(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const r=n();return t[e]=r,r}function Jn(t,e,n){return pe(t)?t(e,n):t}const Xn=(t,e)=>!0===t?e:"string"==typeof t?de(e,t):void 0;function Gn(t,e,n,r,i){for(const o of e){const e=Xn(n,o);if(e){t.add(e);const o=Jn(e._fallback,n,i);if(void 0!==o&&o!==n&&o!==r)return o}else if(!1===e&&void 0!==r&&n!==r)return null}return!1}function Zn(t,e,n,r){const i=e._rootScopes,o=Jn(e._fallback,n,r),s=[...t,...i],a=new Set;a.add(r);let l=tr(a,s,n,o||n,r);return null!==l&&((void 0===o||o===n||(l=tr(a,s,o,l,r),null!==l))&&Vn(Array.from(a),[""],i,o,()=>function(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];if(Qt(i)&&Jt(n))return n;return i||{}}(e,n,r)))}function tr(t,e,n,r,i){for(;n;)n=Gn(t,e,n,r,i);return n}function er(t,e){for(const n of e){if(!n)continue;const e=n[t];if(void 0!==e)return e}}function nr(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function rr(t,e,n,r){const{iScale:i}=t,{key:o="r"}=this._parsing,s=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],s[a]={r:i.parse(de(u,o),c)};return s}const ir=Number.EPSILON||1e-14,or=(t,e)=>e<t.length&&!t[e].skip&&t[e],sr=t=>"x"===t?"y":"x";function ar(t,e,n,r){const i=t.skip?e:t,o=e,s=n.skip?e:n,a=Re(o,i),l=Re(s,o);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:o.x-d*(s.x-i.x),y:o.y-d*(s.y-i.y)},next:{x:o.x+h*(s.x-i.x),y:o.y+h*(s.y-i.y)}}}function lr(t,e="x"){const n=sr(e),r=t.length,i=Array(r).fill(0),o=Array(r);let s,a,l,c=or(t,0);for(s=0;s<r;++s)if(a=l,l=c,c=or(t,s+1),l){if(c){const t=c[e]-l[e];i[s]=0!==t?(c[n]-l[n])/t:0}o[s]=a?c?Me(i[s-1])!==Me(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(t,e,n){const r=t.length;let i,o,s,a,l,c=or(t,0);for(let u=0;u<r-1;++u)l=c,c=or(t,u+1),l&&c&&(Se(e[u],0,ir)?n[u]=n[u+1]=0:(i=n[u]/e[u],o=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),n[u]=i*s*e[u],n[u+1]=o*s*e[u])))}(t,i,o),function(t,e,n="x"){const r=sr(n),i=t.length;let o,s,a,l=or(t,0);for(let c=0;c<i;++c){if(s=a,a=l,l=or(t,c+1),!a)continue;const i=a[n],u=a[r];s&&(o=(i-s[n])/3,a[`cp1${n}`]=i-o,a[`cp1${r}`]=u-o*e[c]),l&&(o=(l[n]-i)/3,a[`cp2${n}`]=i+o,a[`cp2${r}`]=u+o*e[c])}}(t,o,e)}function cr(t,e,n){return Math.max(Math.min(t,n),e)}function ur(t,e,n,r,i){let o,s,a,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)lr(t,i);else{let n=r?t[t.length-1]:t[0];for(o=0,s=t.length;o<s;++o)a=t[o],l=ar(n,a,t[Math.min(o+1,s-(r?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&function(t,e){let n,r,i,o,s,a=Cn(t[0],e);for(n=0,r=t.length;n<r;++n)s=o,o=a,a=n<r-1&&Cn(t[n+1],e),o&&(i=t[n],s&&(i.cp1x=cr(i.cp1x,e.left,e.right),i.cp1y=cr(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=cr(i.cp2x,e.left,e.right),i.cp2y=cr(i.cp2y,e.top,e.bottom)))}(t,n)}function dr(){return"undefined"!=typeof window&&"undefined"!=typeof document}function hr(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function fr(t,e,n){let r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}const pr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const gr=["top","right","bottom","left"];function mr(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=gr[i];r[o]=parseFloat(t[e+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function yr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=pr(n),o="border-box"===i.boxSizing,s=mr(i,"padding"),a=mr(i,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:o}=r;let s,a,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(i,o,t.target))s=i,a=o;else{const t=e.getBoundingClientRect();s=r.clientX-t.left,a=r.clientY-t.top,l=!0}return{x:s,y:a,box:l}}(t,n),d=s.left+(u&&a.left),h=s.top+(u&&a.top);let{width:f,height:p}=e;return o&&(f-=s.width+a.width,p-=s.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const br=t=>Math.round(10*t)/10;function xr(t,e,n,r){const i=pr(t),o=mr(i,"margin"),s=fr(i.maxWidth,t,"clientWidth")||xe,a=fr(i.maxHeight,t,"clientHeight")||xe,l=function(t,e,n){let r,i;if(void 0===e||void 0===n){const o=t&&hr(t);if(o){const t=o.getBoundingClientRect(),s=pr(o),a=mr(s,"border","width"),l=mr(s,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,r=fr(s.maxWidth,o,"clientWidth"),i=fr(s.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||xe,maxHeight:i||xe}}(t,e,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const t=mr(i,"border","width"),e=mr(i,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-o.width),u=Math.max(0,r?c/r:u-o.height),c=br(Math.min(c,s,l.maxWidth)),u=br(Math.min(u,a,l.maxHeight)),c&&!u&&(u=br(c/2));return(void 0!==e||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=br(Math.floor(u*r))),{width:c,height:u}}function vr(t,e,n){const r=e||1,i=Math.floor(t.height*r),o=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||s.height!==i||s.width!==o)&&(t.currentDevicePixelRatio=r,s.height=i,s.width=o,t.ctx.setTransform(r,0,0,r,0,0),!0)}const wr=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};dr()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function kr(t,e){const n=function(t,e){return pr(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function _r(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Cr(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function Mr(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=_r(t,i,n),a=_r(i,o,n),l=_r(o,e,n),c=_r(s,a,n),u=_r(a,l,n);return _r(c,u,n)}function Sr(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Ar(t,e){let n,r;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Dr(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Tr(t){return"angle"===t?{between:$e,compare:Be,normalize:je}:{between:ze,compare:(t,e)=>t-e,normalize:t=>t}}function Pr({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n==0,style:i}}function Er(t,e,n){if(!n)return[t];const{property:r,start:i,end:o}=n,s=e.length,{compare:a,between:l,normalize:c}=Tr(r),{start:u,end:d,loop:h,style:f}=function(t,e,n){const{property:r,start:i,end:o}=n,{between:s,normalize:a}=Tr(r),l=e.length;let c,u,{start:d,end:h,loop:f}=t;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&s(a(e[d%l][r]),i,o);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:t.style}}(t,e,n),p=[];let g,m,y,b=!1,x=null;const v=()=>b||l(i,y,g)&&0!==a(i,y),w=()=>!b||0===a(o,g)||l(o,y,g);for(let t=u,n=u;t<=d;++t)m=e[t%s],m.skip||(g=c(m[r]),g!==y&&(b=l(g,i,o),null===x&&v()&&(x=0===a(g,i)?t:n),null!==x&&w()&&(p.push(Pr({start:x,end:t,loop:h,count:s,style:f})),x=null),n=t,y=g));return null!==x&&p.push(Pr({start:x,end:d,loop:h,count:s,style:f})),p}function Lr(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const o=Er(r[i],t.points,e);o.length&&n.push(...o)}return n}function Or(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){const i=t._chart.getContext(),o=Rr(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=n.length,c=[];let u=o,d=e[0].start,h=d;function f(t,e,r,i){const o=a?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=o;for(;n[e%l].skip;)e+=o;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:r,style:i}),u=i,d=e%l)}}for(const t of e){d=a?d:t.start;let e,o=n[d%l];for(h=d+1;h<=t.end;h++){const a=n[h%l];e=Rr(r.setContext(Hn(i,{type:"segment",p0:o,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),Br(e,u)&&f(d,h-1,t.loop,u),o=a,u=e}d<h-1&&f(d,h-1,t.loop,u)}return c}(t,e,n,r):e}function Rr(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Br(t,e){if(!e)return!1;const n=[],r=function(t,e){return nn(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function jr(t,e,n){return t.options.clip?t[n]:e[n]}function $r(t,e){const n=e._clip;if(n.disabled)return!1;const r=function(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:jr(n,e,"left"),right:jr(n,e,"right"),top:jr(r,e,"top"),bottom:jr(r,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:r.bottom+(!0===n.bottom?0:n.bottom)}}
/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Ir{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const i=e.listeners[r],o=e.duration;i.forEach(r=>r({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ue.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,s=i.length-1,a=!1;for(;s>=0;--s)o=i[s],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),a=!0):(i[s]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=i.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var zr=new Ir;const Fr="transparent",Nr={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const r=rn(t||Fr),i=r.valid&&rn(e||Fr);return i&&i.valid?i.mix(r,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Wr{constructor(t,e,n,r){const i=e[n];r=Wn([t.to,r,i,t.from]);const o=Wn([t.from,i,r]);this._active=!0,this._fn=t.fn||Nr[t.type||typeof o],this._easing=en[t.easing]||en.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Wn([t.to,e,r,t.from]),this._from=Wn([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,s=this._to;let a;if(this._active=i!==s&&(o||e<n),!this._active)return this._target[r]=s,void this._notify(!0);e<0?this._target[r]=i:(a=e/n%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,s,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class Hr{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Jt(t))return;const e=Object.keys(yn.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Jt(i))return;const o={};for(const t of e)o[t]=i[t];(Qt(i.properties)&&i.properties||[r]).forEach(t=>{t!==r&&n.has(t)||n.set(t,o)})})}_animateOptions(t,e){const n=e.options,r=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(t,e){const n=[],r=Object.keys(e);for(let e=0;e<r.length;e++){const i=t[r[e]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),i}_createAnimations(t,e){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(t,e));continue}const c=e[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,s);continue}u.cancel()}d&&d.duration?(i[l]=u=new Wr(d,t,l,c),r.push(u)):t[l]=c}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(zr.add(this._chart,n),!0):void 0}}function Vr(t,e){const n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:r?o:i,end:r?i:o}}function qr(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function Ur(t,e,n,r={}){const i=t.keys,o="single"===r.mode;let s,a,l,c;if(null===e)return;let u=!1;for(s=0,a=i.length;s<a;++s){if(l=+i[s],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Xt(c)&&(o||0===e||Me(e)===Me(c))&&(e+=c)}return u||r.all?e:0}function Kr(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Yr(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Qr(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function Jr(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=r,l=o.axis,c=s.axis,u=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,s,r),d=e.length;let h;for(let t=0;t<d;++t){const n=e[t],{[l]:o,[c]:d}=n;h=(n._stacks||(n._stacks={}))[c]=Yr(i,u,o),h[a]=d,h._top=Qr(h,s,!0,r.type),h._bottom=Qr(h,s,!1,r.type);(h._visualValues||(h._visualValues={}))[a]=d}}function Xr(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function Gr(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][n])return;delete e[r][n],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[n]&&delete e[r]._visualValues[n]}}}const Zr=t=>"reset"===t||"none"===t,ti=(t,e)=>e?t:Object.assign({},t);class ei{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Kr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Gr(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(t,e,n,r)=>"x"===t?e:"r"===t?r:n,i=e.xAxisID=Zt(n.xAxisID,Xr(t,"x")),o=e.yAxisID=Zt(n.yAxisID,Xr(t,"y")),s=e.rAxisID=Zt(n.rAxisID,Xr(t,"r")),a=e.indexAxis,l=e.iAxisID=r(a,i,o,s),c=e.vAxisID=r(a,o,i,s);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(s),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ve(this._data,this),t._stacked&&Gr(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Jt(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:r}=e,i="x"===n.axis?"x":"y",o="x"===r.axis?"x":"y",s=Object.keys(t),a=new Array(s.length);let l,c,u;for(l=0,c=s.length;l<c;++l)u=s[l],a[l]={[i]:u,[o]:t[u]};return a}(e,t)}else if(n!==e){if(n){Ve(n,this);const t=this._cachedMeta;Gr(t),t._parsed=[]}e&&Object.isExtensible(e)&&(i=this,(r=e)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),He.forEach(t=>{const e="_onData"+he(t),n=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...t){const i=n.apply(this,t);return r._chartjs.listeners.forEach(n=>{"function"==typeof n[e]&&n[e](...t)}),i}})}))),this._syncList=[],this._data=e}var r,i}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=e._stacked;e._stacked=Kr(e.vScale,e),e.stack!==n.stack&&(r=!0,Gr(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&(Jr(this,e._parsed),e._stacked=Kr(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,s=i.axis;let a,l,c,u=0===t&&e===r.length||n._sorted,d=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=Qt(r[t])?this.parseArrayData(n,r,t,e):Jt(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);const i=()=>null===l[s]||d&&l[s]<d[s];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],u&&(i()&&(u=!1),d=l);n._sorted=u}o&&Jr(this,c)}parsePrimitiveData(t,e,n,r){const{iScale:i,vScale:o}=t,s=i.axis,a=o.axis,l=i.getLabels(),c=i===o,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[s]:c||i.parse(l[f],f),[a]:o.parse(e[f],f)};return u}parseArrayData(t,e,n,r){const{xScale:i,yScale:o}=t,s=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],s[a]={x:i.parse(u[0],c),y:o.parse(u[1],c)};return s}parseObjectData(t,e,n,r){const{xScale:i,yScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=e[d],l[c]={x:i.parse(de(h,s),d),y:o.parse(de(h,a),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,i=this._cachedMeta,o=e[t.axis];return Ur({keys:qr(r,!0),values:e._stacks[t.axis]._visualValues},o,i.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const i=n[e.axis];let o=null===i?NaN:i;const s=r&&n._stacks[e.axis];r&&s&&(r.values=s,o=Ur(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&t===n.iScale,o=r.length,s=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:qr(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(s);let d,h;function f(){h=r[d];const e=h[s.axis];return!Xt(h[t.axis])||c>e||u<e}for(d=0;d<o&&(f()||(this.updateRangeFromParsed(l,t,h,a),!i));++d);if(i)for(d=o-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,t,h,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=e.length;r<i;++r)o=e[r][t.axis],Xt(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,r,i;return Jt(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}(Zt(this.options.clip,function(t,e,n){if(!1===n)return!1;const r=Vr(t,n),i=Vr(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],i=e.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||r.length-s,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,i,s,a),c=s;c<s+a;++c){const e=r[c];e.hidden||(e.active&&l?o.push(e):e.draw(t,i))}for(c=0;c<o.length;++c)o[c].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];i=e.$context||(e.$context=function(t,e,n){return Hn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=function(t,e){return Hn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!e,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const r="active"===e,i=this._cachedDataOpts,o=t+"-"+e,s=i[o],a=this.enableOptionSharing&&fe(n);if(s)return ti(s,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=r?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(yn.elements[t]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,r,e),u);return f.$shared&&(f.$shared=a,i[o]=Object.freeze(ti(f,a))),f}_resolveAnimations(t,e,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${e}`,s=i[o];if(s)return s;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,e),o=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(o,this.getContext(t,n,e))}const l=new Hr(r,a&&a.animations);return a&&a._cacheable&&(i[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Zr(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:o}}updateElement(t,e,n,r){Zr(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!Zr(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const r=n.length,i=e.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,e,n=!0){const r=this._cachedMeta,i=r.data,o=t+e;let s;const a=t=>{for(t.length+=e,s=t.length-1;s>=o;s--)t[s]=t[s-e]};for(a(i),s=t;s<o;++s)i[s]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(t,e),n&&this.updateElements(i,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&Gr(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ni(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let e=0,i=n.length;e<i;e++)r=r.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=qe(r.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let r,i,o,s,a=e._length;const l=()=>{32767!==o&&-32768!==o&&(fe(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),l();for(s=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),l();return a}function ri(t,e,n,r){return Qt(t)?function(t,e,n,r){const i=n.parse(t[0],r),o=n.parse(t[1],r),s=Math.min(i,o),a=Math.max(i,o);let l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:o,min:s,max:a}}(t,e,n,r):e[n.axis]=n.parse(t,r),e}function ii(t,e,n,r){const i=t.iScale,o=t.vScale,s=i.getLabels(),a=i===o,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=e[c],d={},d[i.axis]=a||i.parse(s[c],c),l.push(ri(h,d,o,c));return l}function oi(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function si(t,e,n,r){let i=e.borderSkipped;const o={};if(!i)return void(t.borderSkipped=o);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:c,bottom:u}=function(t){let e,n,r,i,o;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:e,top:i,bottom:o}}(t);"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(o[ai(u,s,a,l)]=!0,i=c)),o[ai(i,s,a,l)]=!0,t.borderSkipped=o}function ai(t,e,n,r){var i,o,s;return r?(s=n,t=li(t=(i=t)===(o=e)?s:i===s?o:i,n,e)):t=li(t,e,n),t}function li(t,e,n){return"start"===t?e:"end"===t?n:t}function ci(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class ui extends ei{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,o,s=t=>+n[t];if(Jt(n[t])){const{key:t="value"}=this._parsing;s=e=>+de(n[e],t)}for(i=t,o=t+e;i<o;++i)r._parsed[i]=s(i)}}_getRotation(){return Pe(this.options.rotation-90)}_getCircumference(){return Pe(this.options.circumference)}_getRotationExtents(){let t=ye,e=-ye;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-o)/2,0),a=Math.min((l=this.options.cutout,c=s,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let r=1,i=1,o=0,s=0;if(e<ye){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(t,e,r)=>$e(t,a,l,!0)?1:Math.max(e,e*n,r,r*n),p=(t,e,r)=>$e(t,a,l,!0)?-1:Math.min(e,e*n,r,r*n),g=f(0,c,d),m=f(we,u,h),y=p(me,c,d),b=p(me+we,u,h);r=(g-y)/2,i=(m-b)/2,o=-(g+y)/2,s=-(m+b)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}(h,d,a),y=(n.width-o)/f,b=(n.height-o)/p,x=Math.max(Math.min(y,b)/2,0),v=te(this.options.radius,x),w=(v-Math.max(v*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=m*v,r.total=this.calculateTotal(),this.outerRadius=v-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/ye)}updateElements(t,e,n,r){const i="reset"===r,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,u=i&&a.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,r);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,i);for(g=e;g<e+n;++g){const e=this._circumference(g,i),n=t[g],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:h,innerRadius:d};p&&(o.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=e,this.updateElement(n,g,o,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,r=0;for(n=0;n<e.length;n++){const i=t._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||e[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ye*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=cn(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,i,o,s,a;if(!t)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),t=o.data,s=o.controller;break}if(!t)return 0;for(r=0,i=t.length;r<i;++r)a=s.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Zt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class di extends ei{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=cn(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}parseObjectData(t,e,n,r){return rr.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),o=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,r){const i="reset"===r,o=this.chart,s=o.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*me;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<e;++d)h+=this._computeAngle(d,r,f);for(d=e;d<e+n;d++){const e=t[d];let n=h,p=h+this._computeAngle(d,r,f),g=o.getDataVisibility(d)?a.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=p,i&&(s.animateScale&&(g=0),s.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(d,e.active?"active":r)};this.updateElement(e,d,m,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?Pe(this.resolveDataElementOptions(t,e).angle||n):0}}var hi=Object.freeze({__proto__:null,BarController:class extends ei{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,r){return ii(t,e,n,r)}parseArrayData(t,e,n,r){return ii(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:i,vScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?s:a,c="x"===o.axis?s:a,u=[];let d,h,f,p;for(d=n,h=n+r;d<h;++d)p=e[d],f={},f[i.axis]=i.parse(de(p,l),d),u.push(ri(de(p,c),f,o,d));return u}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const i=n._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,i=this.getParsed(t),o=i._custom,s=oi(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const i="reset"===r,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(e,r);for(let h=e;h<e+n;h++){const e=this.getParsed(h),n=i||Yt(e[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(e._stacks||{})[s.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||oi(e._custom)||o===p._top||o===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(g.options=u||this.resolveDataElementOptions(h,t[h].active?"active":r));const m=g.options||t[h].options;si(g,m,p,o),ci(g,m,c.ratio),this.updateElement(t[h],h,g,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),i=n.options.stacked,o=[],s=this._cachedMeta.controller.getParsed(e),a=s&&s[n.axis],l=t=>{const e=t._parsed.find(t=>t[n.axis]===a),r=e&&e[t.vScale.axis];if(Yt(r)||isNaN(r))return!0};for(const n of r)if((void 0===e||!l(n))&&((!1===i||-1===o.indexOf(n.stack)||void 0===i&&void 0===n.stack)&&o.push(n.stack),n.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Zt("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let i,o;for(i=0,o=e.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const s=t.barThickness;return{min:s||ni(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,s=i||0,a=this.getParsed(t),l=a._custom,c=oi(l);let u,d,h=a[e.axis],f=0,p=n?this.applyStack(e,a,n):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&Me(h)!==Me(l.barEnd)&&(f=0),f+=h);const g=Yt(i)||c?f:i;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,d=u-m,Math.abs(d)<o){d=function(t,e,n){return 0!==t?Me(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(d,e,s)*o,h===s&&(m-=d/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),l=Math.min(t,i),f=Math.max(t,i);m=Math.max(Math.min(m,f),l),u=m+d,n&&!c&&(a._stacks[e.axis]._visualValues[r]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(s)){const t=Me(d)*e.getLineWidthForValue(s)/2;m+=t,d-=t}return{size:d,base:m,head:u,center:u+d/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,i=r.skipNull,o=Zt(r.maxBarThickness,1/0);let s,a;const l=this._getAxisCount();if(e.grouped){const n=i?this._getStackCount(t):e.stackCount,c="flex"===r.barThickness?function(t,e,n,r){const i=e.pixels,o=i[t];let s=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;null===s&&(s=o-(null===a?e.end-e.start:a-o)),null===a&&(a=o+o-s);const c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/r,ratio:n.barPercentage,start:c}}(t,e,r,n*l):function(t,e,n,r){const i=n.barThickness;let o,s;return Yt(i)?(o=e.min*n.categoryPercentage,s=n.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:e.pixels[t]-o/2}}(t,e,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(Zt(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+d;s=c.start+c.chunk*h+c.chunk/2,a=Math.min(o,c.chunk*c.ratio)}else s=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(o,e.min*e.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[e.axis]||n[i].hidden||n[i].draw(this._ctx)}},BubbleController:class extends ei{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,r){const i=super.parsePrimitiveData(t,e,n,r);for(let t=0;t<i.length;t++)i[t]._custom=this.resolveDataElementOptions(t+n).radius;return i}parseArrayData(t,e,n,r){const i=super.parseArrayData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=Zt(r[2],this.resolveDataElementOptions(t+n).radius)}return i}parseObjectData(t,e,n,r){const i=super.parseObjectData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=Zt(r&&r.r&&+r.r,this.resolveDataElementOptions(t+n).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,o=this.getParsed(t),s=r.getLabelForValue(o.x),a=i.getLabelForValue(o.y),l=o._custom;return{label:n[t]||"",value:"("+s+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,r),c=o.axis,u=s.axis;for(let d=e;d<e+n;d++){const e=t[d],n=!i&&this.getParsed(d),h={},f=h[c]=i?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),p=h[u]=i?s.getBasePixel():s.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=a||this.resolveDataElementOptions(d,e.active?"active":r),i&&(h.options.radius=0)),this.updateElement(e,d,h,r)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==e&&(r.radius=0),r.radius+=Zt(n&&n._custom,i),r}},DoughnutController:ui,LineController:class extends ei{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=e,o=this.chart._animationsDisabled;let{start:s,count:a}=Je(e,r,o);this._drawStart=s,this._drawCount=a,Xe(e)&&(s=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},t),this.updateElements(r,s,a,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,r),d=o.axis,h=s.axis,{spanGaps:f,segment:p}=this.options,g=De(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,y=e+n,b=t.length;let x=e>0&&this.getParsed(e-1);for(let n=0;n<b;++n){const f=t[n],b=m?f:{};if(n<e||n>=y){b.skip=!0;continue}const v=this.getParsed(n),w=Yt(v[h]),k=b[d]=o.getPixelForValue(v[d],n),_=b[h]=i||w?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,v,a):v[h],n);b.skip=isNaN(k)||isNaN(_)||w,b.stop=n>0&&Math.abs(v[d]-x[d])>g,p&&(b.parsed=v,b.raw=l.data[n]),u&&(b.options=c||this.resolveDataElementOptions(n,f.active?"active":r)),m||this.updateElement(f,n,b,r),x=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends ui{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:di,RadarController:class extends ei{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,r){return rr.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===r.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,n,r){const i=this._cachedMeta.rScale,o="reset"===r;for(let s=e;s<e+n;s++){const e=t[s],n=this.resolveDataElementOptions(s,e.active?"active":r),a=i.getPointPositionForValue(s,this.getParsed(s).r),l=o?i.xCenter:a.x,c=o?i.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,s,u,r)}}},ScatterController:class extends ei{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,o=this.getParsed(t),s=r.getLabelForValue(o.x),a=i.getLabelForValue(o.y);return{label:n[t]||"",value:"("+s+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,r=this.chart._animationsDisabled;let{start:i,count:o}=Je(e,n,r);if(this._drawStart=i,this._drawCount=o,Xe(e)&&(i=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:o}=e;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const s=this.resolveDatasetElementOptions(t);s.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:s},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,i,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),h=o.axis,f=s.axis,{spanGaps:p,segment:g}=this.options,m=De(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r;let b=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),p=y?e:{},x=Yt(n[f]),v=p[h]=o.getPixelForValue(n[h],c),w=p[f]=i||x?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,n,a):n[f],c);p.skip=isNaN(v)||isNaN(w)||x,p.stop=c>0&&Math.abs(n[h]-b[h])>m,g&&(p.parsed=n,p.raw=l.data[c]),d&&(p.options=u||this.resolveDataElementOptions(c,e.active?"active":r)),y||this.updateElement(e,c,p,r),b=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!e.length)return r;const i=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,i,o)/2}}});function fi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pi{static override(t){Object.assign(pi.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return fi()}parse(){return fi()}format(){return fi()}add(){return fi()}diff(){return fi()}startOf(){return fi()}endOf(){return fi()}}var gi=pi;function mi(t,e,n,r){const{controller:i,data:o,_sorted:s}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&"r"!==e&&s&&o.length){const s=a._reversePixels?We:Ne;if(!r){const r=s(o,e,n);if(l){const{vScale:e}=i._cachedMeta,{_parsed:n}=t,o=n.slice(0,r.lo+1).reverse().findIndex(t=>!Yt(t[e.axis]));r.lo-=Math.max(0,o);const s=n.slice(r.hi).findIndex(t=>!Yt(t[e.axis]));r.hi+=Math.max(0,s)}return r}if(i._sharedOptions){const t=o[0],r="function"==typeof t.getRange&&t.getRange(e);if(r){const t=s(o,e,n-r),i=s(o,e,n+r);return{lo:t.lo,hi:i.hi}}}}return{lo:0,hi:o.length-1}}function yi(t,e,n,r,i){const o=t.getSortedVisibleDatasetMetas(),s=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:a}=o[t],{lo:l,hi:c}=mi(o[t],e,s,i);for(let t=l;t<=c;++t){const e=a[t];e.skip||r(e,n,t)}}}function bi(t,e,n,r,i){const o=[];if(!i&&!t.isPointInArea(e))return o;return yi(t,n,e,function(n,s,a){(i||Cn(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&o.push({element:n,datasetIndex:s,index:a})},!0),o}function xi(t,e,n,r,i,o){let s=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){const i=e?Math.abs(t.x-r.x):0,o=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return yi(t,n,e,function(n,c,u){const d=n.inRange(e.x,e.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!(!!o||t.isPointInArea(h))&&!d)return;const f=a(e,h);f<l?(s=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&s.push({element:n,datasetIndex:c,index:u})}),s}function vi(t,e,n,r,i,o){return o||t.isPointInArea(e)?"r"!==n||r?xi(t,e,n,r,i,o):function(t,e,n,r){let i=[];return yi(t,n,e,function(t,n,o){const{startAngle:s,endAngle:a}=t.getProps(["startAngle","endAngle"],r),{angle:l}=Oe(t,{x:e.x,y:e.y});$e(l,s,a)&&i.push({element:t,datasetIndex:n,index:o})}),i}(t,e,n,i):[]}function wi(t,e,n,r,i){const o=[],s="x"===n?"inXRange":"inYRange";let a=!1;return yi(t,n,e,(t,r,l)=>{t[s]&&t[s](e[n],i)&&(o.push({element:t,datasetIndex:r,index:l}),a=a||t.inRange(e.x,e.y,i))}),r&&!a?[]:o}var ki={evaluateInteractionItems:yi,modes:{index(t,e,n,r){const i=yr(e,t),o=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?bi(t,i,o,r,s):vi(t,i,o,!1,r,s),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,r){const i=yr(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;let a=n.intersect?bi(t,i,o,r,s):vi(t,i,o,!1,r,s);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,r)=>bi(t,yr(e,t),n.axis||"xy",r,n.includeInvisible||!1),nearest(t,e,n,r){const i=yr(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;return vi(t,i,o,n.intersect,r,s)},x:(t,e,n,r)=>wi(t,yr(e,t),"x",n.intersect,r),y:(t,e,n,r)=>wi(t,yr(e,t),"y",n.intersect,r)}};const _i=["left","top","right","bottom"];function Ci(t,e){return t.filter(t=>t.pos===e)}function Mi(t,e){return t.filter(t=>-1===_i.indexOf(t.pos)&&t.box.axis===e)}function Si(t,e){return t.sort((t,n)=>{const r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function Ai(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:r,stackWeight:i}=n;if(!t||!_i.includes(r))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,s,a;for(o=0,s=t.length;o<s;++o){a=t[o];const{fullSize:s}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:s&&e.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:s&&e.availableHeight)}return n}function Di(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Ti(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Pi(t,e,n,r){const{pos:i,box:o}=n,s=t.maxPadding;if(!Jt(i)){n.size&&(t[i]-=n.size);const e=r[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[i]+=n.size}o.getPadding&&Ti(s,o.getPadding());const a=Math.max(0,e.outerWidth-Di(s,t,"left","right")),l=Math.max(0,e.outerHeight-Di(s,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Ei(t,e){const n=e.maxPadding;function r(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{r[t]=Math.max(e[t],n[t])}),r}return r(t?["left","right"]:["top","bottom"])}function Li(t,e,n,r){const i=[];let o,s,a,l,c,u;for(o=0,s=t.length,c=0;o<s;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,Ei(a.horizontal,e));const{same:s,other:d}=Pi(e,n,a,r);c|=s&&i.length,u=u||d,l.fullSize||i.push(a)}return c&&Li(i,e,n,r)||u}function Oi(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Ri(t,e,n,r){const i=n.padding;let{x:o,y:s}=e;for(const a of t){const t=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=e.w*c,o=l.size||t.height;fe(l.start)&&(s=l.start),t.fullSize?Oi(t,i.left,s,n.outerWidth-i.right-i.left,o):Oi(t,e.left+l.placed,s,r,o),l.start=s,l.placed+=r,s=t.bottom}else{const r=e.h*c,s=l.size||t.width;fe(l.start)&&(o=l.start),t.fullSize?Oi(t,o,i.top,s,n.outerHeight-i.bottom-i.top):Oi(t,o,e.top+l.placed,s,r),l.start=o,l.placed+=r,o=t.right}}e.x=o,e.y=s}var Bi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Fn(t.options.layout.padding),o=Math.max(e-i.width,0),s=Math.max(n-i.height,0),a=function(t){const e=function(t){const e=[];let n,r,i,o,s,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],({position:o,options:{stack:s,stackWeight:a=1}}=i),e.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return e}(t),n=Si(e.filter(t=>t.box.fullSize),!0),r=Si(Ci(e,"left"),!0),i=Si(Ci(e,"right")),o=Si(Ci(e,"top"),!0),s=Si(Ci(e,"bottom")),a=Mi(e,"x"),l=Mi(e,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(l).concat(s).concat(a),chartArea:Ci(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:o.concat(s).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;ne(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const u=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},i);Ti(h,Fn(r));const f=Object.assign({maxPadding:h,w:o,h:s,x:i.left,y:i.top},i),p=Ai(l.concat(c),d);Li(a.fullSize,f,d,p),Li(l,f,d,p),Li(c,f,d,p)&&Li(l,f,d,p),function(t){const e=t.maxPadding;function n(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Ri(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Ri(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ne(a.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class ji{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class $i extends ji{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ii="$chartjs",zi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Fi=t=>null===t||""===t;const Ni=!!wr&&{passive:!0};function Wi(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Ni)}function Hi(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Vi(t,e,n){const r=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Hi(n.addedNodes,r),e=e&&!Hi(n.removedNodes,r);e&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function qi(t,e,n){const r=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Hi(n.removedNodes,r),e=e&&!Hi(n.addedNodes,r);e&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ui=new Map;let Ki=0;function Yi(){const t=window.devicePixelRatio;t!==Ki&&(Ki=t,Ui.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Qi(t,e,n){const r=t.canvas,i=r&&hr(r);if(!i)return;const o=Ke((t,e)=>{const r=i.clientWidth;n(t,e),r<i.clientWidth&&n()},window),s=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||o(n,r)});return s.observe(i),function(t,e){Ui.size||window.addEventListener("resize",Yi),Ui.set(t,e)}(t,o),s}function Ji(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Ui.delete(t),Ui.size||window.removeEventListener("resize",Yi)}(t)}function Xi(t,e,n){const r=t.canvas,i=Ke(e=>{null!==t.ctx&&n(function(t,e){const n=zi[t.type]||t.type,{x:r,y:i}=yr(t,e);return{type:n,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==i?i:null}}(e,t))},t);return function(t,e,n){t&&t.addEventListener(e,n,Ni)}(r,e,i),i}class Gi extends ji{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Ii]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Fi(i)){const e=kr(t,"width");void 0!==e&&(t.width=e)}if(Fi(r))if(""===t.style.height)t.height=t.width/(e||2);else{const e=kr(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Ii])return!1;const n=e[Ii].initial;["height","width"].forEach(t=>{const r=n[t];Yt(r)?e.removeAttribute(t):e.setAttribute(t,r)});const r=n.style||{};return Object.keys(r).forEach(t=>{e.style[t]=r[t]}),e.width=e.width,delete e[Ii],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),i={attach:Vi,detach:qi,resize:Qi}[e]||Xi;r[e]=i(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:Ji,detach:Ji,resize:Ji}[e]||Wi)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return xr(t,e,n,r)}isAttached(t){const e=t&&hr(t);return!(!e||!e.isConnected)}}class Zi{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return De(this.x)&&De(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(t=>{r[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),r}}function to(t,e){const n=t.options.ticks,r=function(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),i=Math.min(n.maxTicksLimit||r,r),o=n.major.enabled?function(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}(e):[],s=o.length,a=o[0],l=o[s-1],c=[];if(s>i)return function(t,e,n,r){let i,o=0,s=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===s&&(e.push(t[i]),o++,s=n[o*r])}(e,c,o,s/i),c;const u=function(t,e,n){const r=function(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}(t),i=e.length/n;if(!r)return Math.max(i,1);const o=function(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}(r);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>i)return e}return Math.max(i,1)}(o,e,i);if(s>0){let t,n;const r=s>1?Math.round((l-a)/(s-1)):null;for(eo(e,c,u,Yt(r)?0:a-r,a),t=0,n=s-1;t<n;t++)eo(e,c,u,o[t],o[t+1]);return eo(e,c,u,l,Yt(r)?e.length:l+r),c}return eo(e,c,u),c}function eo(t,e,n,r,i){const o=Zt(r,0),s=Math.min(Zt(i,t.length),t.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=o;c<0;)u++,c=Math.round(o+u*n);for(l=Math.max(o,0);l<s;l++)l===c&&(e.push(t[l]),u++,c=Math.round(o+u*n))}const no=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,ro=(t,e)=>Math.min(e||t,t);function io(t,e){const n=[],r=t.length/e,i=t.length;let o=0;for(;o<i;o+=r)n.push(t[Math.floor(o)]);return n}function oo(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),o=t._startPixel,s=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-o,s-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<o-a||c>s+a)))return c}function so(t){return t.drawTicks?t.tickLength:0}function ao(t,e){if(!t.display)return 0;const n=Nn(t.font,e),r=Fn(t.padding);return(Qt(t.text)?t.text.length:1)*n.lineHeight+r.height}function lo(t,e,n){let r=Ye(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class co extends Zi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=Gt(t,Number.POSITIVE_INFINITY),e=Gt(e,Number.NEGATIVE_INFINITY),n=Gt(n,Number.POSITIVE_INFINITY),r=Gt(r,Number.NEGATIVE_INFINITY),{min:Gt(t,n),max:Gt(e,r),minDefined:Xt(t),maxDefined:Xt(e)}}getMinMax(t){let e,{min:n,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:n,max:r};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)e=s[a].controller.getMinMax(this,t),i||(n=Math.min(n,e.min)),o||(r=Math.max(r,e.max));return n=o&&n>r?r:n,r=i&&n>r?n:r,{min:Gt(n,Gt(r,n)),max:Gt(r,Gt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ee(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:r,max:i}=t,o=te(e,(i-r)/2),s=(t,e)=>n&&0===t?0:t+e;return{min:s(r,-Math.abs(o)),max:s(i,o)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?io(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=to(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ee(this.options.afterUpdate,[this])}beforeSetDimensions(){ee(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ee(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ee(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ee(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],i.label=ee(e.callback,[i.value,n,t],this)}afterTickToLabelConversion(){ee(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ee(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=ro(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,i=e.maxRotation;let o,s,a,l=r;if(!this._isVisible()||!e.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=Ie(this.chart.width-u,0,this.maxWidth);o=t.offset?this.maxWidth/n:h/(n-1),u+6>o&&(o=h/(n-(t.offset?.5:1)),s=this.maxHeight-so(t.grid)-e.padding-ao(t.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=Ee(Math.min(Math.asin(Ie((c.highest.height+6)/o,-1,1)),Math.asin(Ie(s/a,-1,1))-Math.asin(Ie(d/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){ee(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ee(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=ao(r,e.options.font);if(s?(t.width=this.maxWidth,t.height=so(i)+o):(t.height=this.maxHeight,t.width=so(i)+o),n.display&&this.ticks.length){const{first:e,last:r,widest:i,highest:o}=this._getLabelSizes(),a=2*n.padding,l=Pe(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(s){const e=n.mirror?0:u*i.width+c*o.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*i.width+u*o.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,r,u,c)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:i,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=r*t.width,d=n*e.height):(u=n*t.height,d=r*e.width):"start"===i?d=e.width:"end"===i?u=t.width:"inner"!==i&&(u=t.width/2,d=e.width/2),this.paddingLeft=Math.max((u-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((d-c+o)*this.width/(this.width-c),0)}else{let n=e.height/2,r=t.height/2;"start"===i?(n=0,r=t.height):"end"===i&&(n=e.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ee(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Yt(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=io(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:r,_longestTextCache:i}=this,o=[],s=[],a=Math.floor(e/ro(e,n));let l,c,u,d,h,f,p,g,m,y,b,x=0,v=0;for(l=0;l<e;l+=a){if(d=t[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,p=i[f]=i[f]||{data:{},gc:[]},g=h.lineHeight,m=y=0,Yt(d)||Qt(d)){if(Qt(d))for(c=0,u=d.length;c<u;++c)b=d[c],Yt(b)||Qt(b)||(m=bn(r,p.data,p.gc,m,b),y+=g)}else m=bn(r,p.data,p.gc,m,d),y=g;o.push(m),s.push(y),x=Math.max(m,x),v=Math.max(y,v)}!function(t,e){ne(t,t=>{const n=t.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete t.data[n[i]];n.splice(0,r)}})}(i,e);const w=o.indexOf(x),k=s.indexOf(v),_=t=>({width:o[t]||0,height:s[t]||0});return{first:_(0),last:_(e-1),widest:_(w),highest:_(k),widths:o,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Ie(this._alignToPixels?vn(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Hn(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Hn(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Pe(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,s=i?i.widest.width+o:0,a=i?i.highest.height+o:0;return this.isHorizontal()?a*n>s*r?s/n:a/r:a*r<s*n?a/n:s/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:s}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=so(i),d=[],h=s.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,g=function(t){return vn(n,t,f)};let m,y,b,x,v,w,k,_,C,M,S,A;if("top"===o)m=g(this.bottom),w=this.bottom-u,_=m-p,M=g(t.top)+p,A=t.bottom;else if("bottom"===o)m=g(this.top),M=t.top,A=g(t.bottom)-p,w=m+p,_=this.top+u;else if("left"===o)m=g(this.right),v=this.right-u,k=m-p,C=g(t.left)+p,S=t.right;else if("right"===o)m=g(this.left),C=t.left,S=g(t.right)-p,v=m+p,k=this.left+u;else if("x"===e){if("center"===o)m=g((t.top+t.bottom)/2+.5);else if(Jt(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}M=t.top,A=t.bottom,w=m+p,_=w+u}else if("y"===e){if("center"===o)m=g((t.left+t.right)/2);else if(Jt(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}v=m-p,k=v-u,C=t.left,S=t.right}const D=Zt(r.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/D));for(y=0;y<c;y+=T){const t=this.getContext(y),e=i.setContext(t),r=s.setContext(t),o=e.lineWidth,c=e.color,u=r.dash||[],h=r.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;b=oo(this,y,a),void 0!==b&&(x=vn(n,b,o),l?v=k=C=S=x:w=_=M=A=x,d.push({tx1:v,ty1:w,tx2:k,ty2:_,x1:C,y1:M,x2:S,y2:A,width:o,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,d}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,d=so(n.grid),h=d+c,f=u?-c:h,p=-Pe(this.labelRotation),g=[];let m,y,b,x,v,w,k,_,C,M,S,A,D="middle";if("top"===r)w=this.bottom-f,k=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,k=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(d);k=t.textAlign,v=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(d);k=t.textAlign,v=t.x}else if("x"===e){if("center"===r)w=(t.top+t.bottom)/2+h;else if(Jt(r)){const t=Object.keys(r)[0],e=r[t];w=this.chart.scales[t].getPixelForValue(e)+h}k=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)v=(t.left+t.right)/2-h;else if(Jt(r)){const t=Object.keys(r)[0],e=r[t];v=this.chart.scales[t].getPixelForValue(e)}k=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===a?D="top":"end"===a&&(D="bottom"));const T=this._getLabelSizes();for(m=0,y=s.length;m<y;++m){b=s[m],x=b.label;const t=i.setContext(this.getContext(m));_=this.getPixelForTick(m)+i.labelOffset,C=this._resolveTickFontOptions(m),M=C.lineHeight,S=Qt(x)?x.length:1;const e=S/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let d,h=k;if(o?(v=_,"inner"===k&&(h=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),A="top"===r?"near"===l||0!==p?-S*M+M/2:"center"===l?-T.highest.height/2-e*M+M:-T.highest.height+M/2:"near"===l||0!==p?M/2:"center"===l?T.highest.height/2-e*M:T.highest.height-S*M,u&&(A*=-1),0===p||t.showLabelBackdrop||(v+=M/2*Math.sin(p))):(w=_,A=(1-S)*M/2),t.showLabelBackdrop){const e=Fn(t.backdropPadding),n=T.heights[m],r=T.widths[m];let i=A-e.top,o=0-e.left;switch(D){case"middle":i-=n/2;break;case"bottom":i-=n}switch(k){case"center":o-=r/2;break;case"right":o-=r;break;case"inner":m===y-1?o-=r:m>0&&(o-=r/2)}d={left:o,top:i,width:r+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:x,font:C,textOffset:A,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:D,translation:[v,w],backdrop:d}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Pe(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=t+i,s=this._getLabelSizes().widest.width;let a,l;return"left"===e?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l=this.left)):"right"===e?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===n?a="left":"center"===n?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:i,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const s=(t,e,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(i=0,o=r.length;i<o;++i){const t=r[i];e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const s=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=vn(t,this.left,o)-o/2,c=vn(t,this.right,s)+s/2,u=d=a):(u=vn(t,this.top,o)-o/2,d=vn(t,this.bottom,s)+s/2,l=c=a),e.save(),e.lineWidth=i.width,e.strokeStyle=i.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&Mn(e,n);const r=this.getLabelItems(t);for(const t of r){const n=t.options,r=t.font;En(e,t.label,0,t.textOffset,r,n)}n&&Sn(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const i=Nn(n.font),o=Fn(n.padding),s=n.align;let a=i.lineHeight/2;"bottom"===e||"center"===e||Jt(e)?(a+=o.bottom,Qt(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=o.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(t,e,n,r){const{top:i,left:o,bottom:s,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d,h,f,p=0;const g=s-i,m=a-o;if(t.isHorizontal()){if(h=Qe(r,o,a),Jt(n)){const t=Object.keys(n)[0],r=n[t];f=u[t].getPixelForValue(r)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:no(t,n,e);d=a-o}else{if(Jt(n)){const t=Object.keys(n)[0],r=n[t];h=u[t].getPixelForValue(r)-m+e}else h="center"===n?(c.left+c.right)/2-m+e:no(t,n,e);f=Qe(r,s,i),p="left"===n?-we:we}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,a,e,s);En(t,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:lo(s,e,r),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Zt(t.grid&&t.grid.z,-1),r=Zt(t.border&&t.border.z,0);return this._isVisible()&&this.draw===co.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=e.length;i<o;++i){const o=e[i];o[n]!==this.id||t&&o.type!==t||r.push(o)}return r}_resolveTickFontOptions(t){return Nn(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class uo{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,function(t,e,n){const r=ae(Object.create(null),[n?yn.get(n):{},yn.get(e),t.defaults]);yn.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),o=[t].concat(r).join("."),s=e[n].split("."),a=s.pop(),l=s.join(".");yn.route(o,i,l,a)})}(e,t.defaultRoutes);t.descriptors&&yn.describe(e,t.descriptors)}(t,o,n),this.override&&yn.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in yn[r]&&(delete yn[r][n],this.override&&delete hn[n])}}class ho{constructor(){this.controllers=new uo(ei,"datasets",!0),this.elements=new uo(Zi,"elements"),this.plugins=new uo(Object,"plugins"),this.scales=new uo(co,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(e=>{const r=n||this._getRegistryForType(e);n||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):ne(e,e=>{const r=n||this._getRegistryForType(e);this._exec(t,r,e)})})}_exec(t,e,n){const r=he(t);ee(n["before"+r],[],n),e[t](n),ee(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var fo=new ho;class po{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(const i of t){const t=i.plugin;if(!1===ee(t[n],[e,r,i.options],t)&&r.cancelable)return!1}return!0}invalidate(){Yt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=Zt(n.options&&n.options.plugins,{}),i=function(t){const e={},n=[],r=Object.keys(fo.plugins.items);for(let t=0;t<r.length;t++)n.push(fo.getPlugin(r[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const r=i[t];-1===n.indexOf(r)&&(n.push(r),e[r.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==r||e?function(t,{plugins:e,localIds:n},r,i){const o=[],s=t.getContext();for(const a of e){const e=a.id,l=go(r[e],i);null!==l&&o.push({plugin:a,options:mo(t.config,{plugin:a,local:n[e]},l,s)})}return o}(t,i,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function go(t,e){return e||!1!==t?!0===t?{}:t:null}function mo(t,{plugin:e,local:n},r,i){const o=t.pluginScopeKeys(e),s=t.getOptionScopes(r,o);return n&&e.defaults&&s.push(e.defaults),t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yo(t,e){const n=yn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function bo(t){if("x"===t||"y"===t||"r"===t)return t}function xo(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function vo(t,...e){if(bo(t))return t;for(const n of e){const e=n.axis||xo(n.position)||t.length>1&&bo(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function wo(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function ko(t,e){const n=hn[t.type]||{scales:{}},r=e.scales||{},i=yo(t.type,e),o=Object.create(null);return Object.keys(r).forEach(e=>{const s=r[e];if(!Jt(s))return console.error(`Invalid scale configuration for scale: ${e}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=vo(e,s,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return wo(t,"x",n[0])||wo(t,"y",n[0])}return{}}(e,t),yn.scales[s.type]),l=function(t,e){return t===e?"_index_":"_value_"}(a,i),c=n.scales||{};o[e]=le(Object.create(null),[{axis:a},s,c[a],c[l]])}),t.data.datasets.forEach(n=>{const i=n.type||t.type,s=n.indexAxis||yo(i,e),a=(hn[i]||{}).scales||{};Object.keys(a).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,s),i=n[e+"AxisID"]||e;o[i]=o[i]||Object.create(null),le(o[i],[{axis:e},r[i],a[t]])})}),Object.keys(o).forEach(t=>{const e=o[t];le(e,[yn.scales[e.type],yn.scale])}),o}function _o(t){const e=t.options||(t.options={});e.plugins=Zt(e.plugins,{}),e.scales=ko(t,e)}function Co(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Mo=new Map,So=new Set;function Ao(t,e){let n=Mo.get(t);return n||(n=e(),Mo.set(t,n),So.add(n)),n}const Do=(t,e,n)=>{const r=de(e,n);void 0!==r&&t.add(r)};class To{constructor(t){this._config=function(t){return(t=t||{}).data=Co(t.data),_o(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Co(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),_o(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ao(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Ao(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Ao(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return Ao(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:i}=this,o=this._cachedScopes(t,n),s=o.get(e);if(s)return s;const a=new Set;e.forEach(e=>{t&&(a.add(t),e.forEach(e=>Do(a,t,e))),e.forEach(t=>Do(a,r,t)),e.forEach(t=>Do(a,hn[i]||{},t)),e.forEach(t=>Do(a,yn,t)),e.forEach(t=>Do(a,fn,t))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),So.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,hn[e]||{},yn.datasets[e]||{},{type:e},yn,fn]}resolveNamedOptions(t,e,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:s}=Po(this._resolverCache,t,r);let a=o;if(function(t,e){const{isScriptable:n,isIndexable:r}=Un(t);for(const i of e){const e=n(i),o=r(i),s=(o||e)&&t[i];if(e&&(pe(s)||Eo(s))||o&&Qt(s))return!0}return!1}(o,e)){i.$shared=!1;a=qn(o,n=pe(n)?n():n,this.createResolver(t,n,s))}for(const t of e)i[t]=a[t];return i}createResolver(t,e,n=[""],r){const{resolver:i}=Po(this._resolverCache,t,n);return Jt(e)?qn(i,e,void 0,r):i}}function Po(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let o=r.get(i);if(!o){o={resolver:Vn(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},r.set(i,o)}return o}const Eo=t=>Jt(t)&&Object.getOwnPropertyNames(t).some(e=>pe(t[e]));const Lo=["top","bottom","left","right","chartArea"];function Oo(t,e){return"top"===t||"bottom"===t||-1===Lo.indexOf(t)&&"x"===e}function Ro(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Bo(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ee(n&&n.onComplete,[t],e)}function jo(t){const e=t.chart,n=e.options.animation;ee(n&&n.onProgress,[t],e)}function $o(t){return dr()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Io={},zo=t=>{const e=$o(t);return Object.values(Io).filter(t=>t.canvas===e).pop()};function Fo(t,e,n){const r=Object.keys(t);for(const i of r){const r=+i;if(r>=e){const o=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=o)}}}class No{static defaults=yn;static instances=Io;static overrides=hn;static registry=fo;static version="4.5.0";static getChart=zo;static register(...t){fo.add(...t),Wo()}static unregister(...t){fo.remove(...t),Wo()}constructor(t,e){const n=this.config=new To(e),r=$o(t),i=zo(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!dr()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?$i:Gi}(r)),this.platform.updateConfig(n);const s=this.platform.acquireContext(r,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,c=a&&a.width;this.id=Kt(),this.ctx=s,this.canvas=a,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new po,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}(t=>this.update(t),o.resizeDelay||0),this._dataChanges=[],Io[this.id]=this,s&&a?(zr.listen(this,"complete",Bo),zr.listen(this,"progress",jo),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:i}=this;return Yt(t)?e&&i?i:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return fo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():vr(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wn(this.canvas,this.ctx),this}stop(){return zr.stop(this),this}resize(t,e){zr.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,i),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,vr(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),ee(n.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){ne(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let i=[];e&&(i=i.concat(Object.keys(e).map(t=>{const n=e[t],r=vo(t,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}}))),ne(i,e=>{const i=e.options,o=i.id,s=vo(o,i),a=Zt(i.type,e.dtype);void 0!==i.position&&Oo(i.position,s)===Oo(e.dposition)||(i.position=e.dposition),r[o]=!0;let l=null;if(o in n&&n[o].type===a)l=n[o];else{l=new(fo.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,t)}),ne(r,(t,e)=>{t||delete n[e]}),ne(n,t=>{Bi.configure(this,t,t.options),Bi.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Ro("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const r=e[n];let i=this.getDatasetMeta(n);const o=r.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=o,i.indexAxis=r.indexAxis||yo(o,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const e=fo.getController(o),{datasetElementType:r,dataElementType:s}=yn.datasets[o];Object.assign(e,{dataElementType:fo.getElement(s),datasetElementType:r&&fo.getElement(r)}),i.controller=new e(this,n),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){ne(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(n),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||ne(i,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ro("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){ne(this.scales,t=>{Bi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);ge(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of e){Fo(t,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),r=n(0);for(let t=1;t<e;t++)if(!ge(r,n(t)))return;return Array.from(r).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Bi.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],ne(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,pe(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(zr.has(this)?this.attached&&!zr.running(this)&&zr.start(this):(this.draw(),Bo({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,i;for(r=0,i=e.length;r<i;++r){const i=e[r];t&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},r=$r(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Mn(e,r),t.controller.draw(),r&&Sn(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Cn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const i=ki.modes[e];return"function"==typeof i?i(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(t=>t&&t._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Hn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);fe(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(i,{visible:n}),this.update(e=>e.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),zr.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),wn(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Io[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};ne(this.options.events,t=>n(t,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(n,r)=>{t[n]&&(e.removeEventListener(this,n,r),delete t[n])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const s=()=>{r("attach",s),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",s)},e.isAttached(this.canvas)?s():o()}unbindEvents(){ne(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ne(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let i,o,s,a;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){o=t[s];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}});!re(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const r=this.options.hover,i=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),o=i(e,t),s=n?t:i(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:i}=this,o=e,s=this._getActiveElements(t,r,n,o),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,ee(i.onHover,[t,s,this],this),a&&ee(i.onClick,[t,s,this],this));const c=!re(s,r);return(c||e)&&(this._active=s,this._updateHoverStyles(s,r,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}function Wo(){return ne(No.instances,t=>t._plugins.invalidate())}function Ho(t,e,n,r){const i=$n(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(n-e)/2,s=Math.min(o,r*e/2),a=t=>{const e=(n-Math.min(o,t))*r/2;return Ie(t,0,Math.min(o,e))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ie(i.innerStart,0,s),innerEnd:Ie(i.innerEnd,0,s)}}function Vo(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function qo(t,e,n,r,i,o){const{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const t=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(p-(0!==t?p*t/(t+r):p))/2}const g=(p-Math.max(.001,p*d-n/me)/d)/2,m=l+g+f,y=i-g-f,{outerStart:b,outerEnd:x,innerStart:v,innerEnd:w}=Ho(e,h,d,y-m),k=d-b,_=d-x,C=m+b/k,M=y-x/_,S=h+v,A=h+w,D=m+v/S,T=y-w/A;if(t.beginPath(),o){const e=(C+M)/2;if(t.arc(s,a,d,C,e),t.arc(s,a,d,e,M),x>0){const e=Vo(_,M,s,a);t.arc(e.x,e.y,x,M,y+we)}const n=Vo(A,y,s,a);if(t.lineTo(n.x,n.y),w>0){const e=Vo(A,T,s,a);t.arc(e.x,e.y,w,y+we,T+Math.PI)}const r=(y-w/h+(m+v/h))/2;if(t.arc(s,a,h,y-w/h,r,!0),t.arc(s,a,h,r,m+v/h,!0),v>0){const e=Vo(S,D,s,a);t.arc(e.x,e.y,v,D+Math.PI,m-we)}const i=Vo(k,m,s,a);if(t.lineTo(i.x,i.y),b>0){const e=Vo(k,C,s,a);t.arc(e.x,e.y,b,m-we,C)}}else{t.moveTo(s,a);const e=Math.cos(C)*d+s,n=Math.sin(C)*d+a;t.lineTo(e,n);const r=Math.cos(M)*d+s,i=Math.sin(M)*d+a;t.lineTo(r,i)}t.closePath()}function Uo(t,e,n,r,i){const{fullCircles:o,startAngle:s,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=h,p?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let g=e.endAngle;if(o){qo(t,e,n,r,g,i);for(let e=0;e<o;++e)t.stroke();isNaN(a)||(g=s+(a%ye||ye))}p&&function(t,e,n){const{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(o,s,a,r-c,n+c),l>i?(c=i/l,t.arc(o,s,l,n+c,r-c,!0)):t.arc(o,s,i,n+we,r-we),t.closePath(),t.clip()}(t,e,g),l.selfJoin&&g-s>=me&&0===f&&"miter"!==u&&function(t,e,n){const{startAngle:r,x:i,y:o,outerRadius:s,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/s,je(r-n));if(t.beginPath(),t.arc(i,o,s-c/2,r+d/2,n-d/2),a>0){const e=Math.min(c/a,je(r-n));t.arc(i,o,a+c/2,n-e/2,r+e/2,!0)}else{const e=Math.min(c/2,s*je(r-n));if("round"===u)t.arc(i,o,e,n-me/2,r+me/2,!0);else if("bevel"===u){const s=2*e*e,a=-s*Math.cos(n+me/2)+i,l=-s*Math.sin(n+me/2)+o,c=s*Math.cos(r+me/2)+i,u=s*Math.sin(r+me/2)+o;t.lineTo(a,l),t.lineTo(c,u)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,g),o||(qo(t,e,n,r,g,i),t.stroke())}function Ko(t,e,n=e){t.lineCap=Zt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Zt(n.borderDash,e.borderDash)),t.lineDashOffset=Zt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Zt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Zt(n.borderWidth,e.borderWidth),t.strokeStyle=Zt(n.borderColor,e.borderColor)}function Yo(t,e,n){t.lineTo(n.x,n.y)}function Qo(t,e,n={}){const r=t.length,{start:i=0,end:o=r-1}=n,{start:s,end:a}=e,l=Math.max(i,s),c=Math.min(o,a),u=i<s&&o<s||i>a&&o>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function Jo(t,e,n,r){const{points:i,options:o}=e,{count:s,start:a,loop:l,ilen:c}=Qo(i,n,r),u=function(t){return t.stepped?An:t.tension||"monotone"===t.cubicInterpolationMode?Dn:Yo}(o);let d,h,f,{move:p=!0,reverse:g}=r||{};for(d=0;d<=c;++d)h=i[(a+(g?c-d:d))%s],h.skip||(p?(t.moveTo(h.x,h.y),p=!1):u(t,f,h,g,o.stepped),f=h);return l&&(h=i[(a+(g?c:0))%s],u(t,f,h,g,o.stepped)),!!l}function Xo(t,e,n,r){const i=e.points,{count:o,start:s,ilen:a}=Qo(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,p,g,m=0,y=0;const b=t=>(s+(c?a-t:t))%o,x=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(d=i[b(0)],t.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=i[b(u)],d.skip)continue;const e=d.x,n=d.y,r=0|e;r===h?(n<f?f=n:n>p&&(p=n),m=(y*m+e)/++y):(x(),t.lineTo(e,n),h=r,y=0,f=p=n),g=n}x()}function Go(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n)?Xo:Jo}const Zo="function"==typeof Path2D;function ts(t,e,n,r){Zo&&!e.options.segment?function(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),Ko(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){const{segments:i,options:o}=e,s=Go(e);for(const a of i)Ko(t,o,a.style),t.beginPath(),s(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}(t,e,n,r)}class es extends Zi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;ur(this._points,n,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const o=!!t._loop,{start:s,end:a}=function(t,e,n,r){let i=0,o=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}(n,i,o,r);return Or(t,!0===r?[{start:s,end:a,loop:o}]:function(t,e,n,r){const i=t.length,o=[];let s,a=e,l=t[e];for(s=e+1;s<=n;++s){const n=t[s%i];n.skip||n.stop?l.skip||(r=!1,o.push({start:e%i,end:(s-1)%i,loop:r}),e=a=n.stop?s:null):(a=s,l.skip&&(e=s)),l=n}return null!==a&&o.push({start:e%i,end:a%i,loop:r}),o}(n,s,a<s?a+i:a,!!t._fullLoop&&0===s&&a===i-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,r=t[e],i=this.points,o=Lr(this,{property:e,start:r,end:r});if(!o.length)return;const s=[],a=function(t){return t.stepped?Cr:t.tension||"monotone"===t.cubicInterpolationMode?Mr:_r}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:u}=o[l],d=i[c],h=i[u];if(d===h){s.push(d);continue}const f=a(d,h,Math.abs((r-d[e])/(h[e]-d[e])),n.stepped);f[e]=t[e],s.push(f)}return 1===s.length?s[0]:s}pathSegment(t,e,n){return Go(this)(t,this,e,n)}path(t,e,n){const r=this.segments,i=Go(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const s of r)o&=i(t,this,s,{start:e,end:e+n-1});return!!o}draw(t,e,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),ts(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ns(t,e,n,r){const i=t.options,{[n]:o}=t.getProps([n],r);return Math.abs(e-o)<i.radius+i.hitRadius}function rs(t,e){const{x:n,y:r,base:i,width:o,height:s}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=s/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=o/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function is(t,e,n,r){return t?0:Ie(e,n,r)}function os(t){const e=rs(t),n=e.right-e.left,r=e.bottom-e.top,i=function(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,o=In(r);return{t:is(i.top,o.top,0,n),r:is(i.right,o.right,0,e),b:is(i.bottom,o.bottom,0,n),l:is(i.left,o.left,0,e)}}(t,n/2,r/2),o=function(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=zn(i),s=Math.min(e,n),a=t.borderSkipped,l=r||Jt(i);return{topLeft:is(!l||a.top||a.left,o.topLeft,0,s),topRight:is(!l||a.top||a.right,o.topRight,0,s),bottomLeft:is(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:is(!l||a.bottom||a.right,o.bottomRight,0,s)}}(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function ss(t,e,n,r){const i=null===e,o=null===n,s=t&&!(i&&o)&&rs(t,r);return s&&(i||ze(e,s.left,s.right))&&(o||ze(n,s.top,s.bottom))}function as(t,e){t.rect(e.x,e.y,e.w,e.h)}function ls(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-r,s=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+o,h:t.h+s,radius:t.radius}}var cs=Object.freeze({__proto__:null,ArcElement:class extends Zi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=Oe(r,{x:t,y:e}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=Zt(u,a-s),f=$e(i,s,a)&&s!==a,p=h>=ye||f,g=ze(o,l+d,c+d);return p&&g}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(o+s+l+a)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/4,i=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ye?Math.floor(n/ye):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const s=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(s)*r,Math.sin(s)*r);const a=r*(1-Math.sin(Math.min(me,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,r,i){const{fullCircles:o,startAngle:s,circumference:a}=e;let l=e.endAngle;if(o){qo(t,e,n,r,l,i);for(let e=0;e<o;++e)t.fill();isNaN(a)||(l=s+(a%ye||ye))}qo(t,e,n,r,l,i),t.fill()}(t,this,a,i,o),Uo(t,this,a,i,o),t.restore()}},BarElement:class extends Zi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=os(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?Ln:as;var a;t.save(),o.w===i.w&&o.h===i.h||(t.beginPath(),s(t,ls(o,e,i)),t.clip(),s(t,ls(i,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),s(t,ls(i,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return ss(this,t,e,n)}inXRange(t,e){return ss(this,t,null,e)}inYRange(t,e){return ss(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+r)/2:e,y:i?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:es,PointElement:class extends Zi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return ns(this,t,"x",e)}inYRange(t,e){return ns(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!Cn(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,kn(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const us=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],ds=us.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function hs(t){return us[t%us.length]}function fs(t){return ds[t%ds.length]}function ps(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof ui?e=function(t,e){return t.backgroundColor=t.data.map(()=>hs(e++)),e}(n,e):i instanceof di?e=function(t,e){return t.backgroundColor=t.data.map(()=>fs(e++)),e}(n,e):i&&(e=function(t,e){return t.borderColor=hs(e),t.backgroundColor=fs(e),++e}(n,e))}}function gs(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var ms={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:o}=i,s=gs(r)||(a=i)&&(a.borderColor||a.backgroundColor)||o&&gs(o)||"rgba(0,0,0,0.1)"!==yn.borderColor||"rgba(0,0,0,0.1)"!==yn.backgroundColor;var a;if(!n.forceOverride&&s)return;const l=ps(t);r.forEach(l)}};function ys(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function bs(t){t.data.datasets.forEach(t=>{ys(t)})}var xs={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void bs(t);const r=t.width;t.data.datasets.forEach((e,i)=>{const{_data:o,indexAxis:s}=e,a=t.getDatasetMeta(i),l=o||e.data;if("y"===Wn([s,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=t.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let{start:u,count:d}=function(t,e){const n=e.length;let r,i=0;const{iScale:o}=t,{min:s,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(i=Ie(Ne(e,o.axis,s).lo,0,n-1)),r=c?Ie(Ne(e,o.axis,a).hi+1,i,n)-i:n-i,{start:i,count:r}}(a,l);if(d<=(n.threshold||4*r))return void ys(e);let h;switch(Yt(o)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":h=function(t,e,n,r,i){const o=i.samples||r;if(o>=n)return t.slice(e,e+n);const s=[],a=(n-2)/(o-2);let l=0;const c=e+n-1;let u,d,h,f,p,g=e;for(s[l++]=t[g],u=0;u<o-2;u++){let r,i=0,o=0;const c=Math.floor((u+1)*a)+1+e,m=Math.min(Math.floor((u+2)*a)+1,n)+e,y=m-c;for(r=c;r<m;r++)i+=t[r].x,o+=t[r].y;i/=y,o/=y;const b=Math.floor(u*a)+1+e,x=Math.min(Math.floor((u+1)*a)+1,n)+e,{x:v,y:w}=t[g];for(h=f=-1,r=b;r<x;r++)f=.5*Math.abs((v-i)*(t[r].y-w)-(v-t[r].x)*(o-w)),f>h&&(h=f,d=t[r],p=r);s[l++]=d,g=p}return s[l++]=t[c],s}(l,u,d,r,n);break;case"min-max":h=function(t,e,n,r){let i,o,s,a,l,c,u,d,h,f,p=0,g=0;const m=[],y=e+n-1,b=t[e].x,x=t[y].x-b;for(i=e;i<e+n;++i){o=t[i],s=(o.x-b)/x*r,a=o.y;const e=0|s;if(e===l)a<h?(h=a,c=i):a>f&&(f=a,u=i),p=(g*p+o.x)/++g;else{const n=i-1;if(!Yt(c)&&!Yt(u)){const e=Math.min(c,u),r=Math.max(c,u);e!==d&&e!==n&&m.push({...t[e],x:p}),r!==d&&r!==n&&m.push({...t[r],x:p})}i>0&&n!==d&&m.push(t[n]),m.push(o),l=e,g=0,h=f=a,c=u=d=i}}return m}(l,u,d,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=h})},destroy(t){bs(t)}};function vs(t,e,n,r){if(r)return;let i=e[t],o=n[t];return"angle"===t&&(i=je(i),o=je(o)),{property:t,start:i,end:o}}function ws(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function ks(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function _s(t,e){let n=[],r=!1;return Qt(t)?(r=!0,n=t):n=function(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,o=[];return e.segments.forEach(({start:t,end:e})=>{e=ws(t,e,i);const s=i[t],a=i[e];null!==r?(o.push({x:s.x,y:r}),o.push({x:a.x,y:r})):null!==n&&(o.push({x:n,y:s.y}),o.push({x:n,y:a.y}))}),o}(t,e),n.length?new es({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Cs(t){return t&&!1!==t.fill}function Ms(t,e,n){let r=t[e].fill;const i=[e];let o;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!Xt(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function Ss(t,e,n){const r=function(t){const e=t.options,n=e.fill;let r=Zt(n&&n.target,n);void 0===r&&(r=!!e.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(t);if(Jt(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return Xt(i)&&Math.floor(i)===i?function(t,e,n,r){"-"!==t&&"+"!==t||(n=e+n);if(n===e||n<0||n>=r)return!1;return n}(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function As(t,e,n){const r=[];for(let i=0;i<n.length;i++){const o=n[i],{first:s,last:a,point:l}=Ds(o,e,"x");if(!(!l||s&&a))if(s)r.unshift(l);else if(t.push(l),!a)break}t.push(...r)}function Ds(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],o=t.segments,s=t.points;let a=!1,l=!1;for(let t=0;t<o.length;t++){const e=o[t],r=s[e.start][n],c=s[e.end][n];if(ze(i,r,c)){a=i===r,l=i===c;break}}return{first:a,last:l,point:r}}class Ts{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:i,radius:o}=this;return e=e||{start:0,end:ye},t.arc(r,i,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,i=t.angle;return{x:e+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function Ps(t){const{chart:e,fill:n,line:r}=t;if(Xt(n))return function(t,e){const n=t.getDatasetMeta(e),r=n&&t.isDatasetVisible(e);return r?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:r}=t,i=[],o=r.segments,s=r.points,a=function(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let t=0;t<r.length;t++){const i=r[t];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}(e,n);a.push(_s({x:null,y:e.bottom},r));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)As(i,s[t],a)}return new es({points:i,options:{}})}(t);if("shape"===n)return!0;const i=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,s=function(t,e,n){let r;return r="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Jt(t)?t.value:e.getBaseValue(),r}(n,e,o),a=[];if(r.grid.circular){const t=e.getPointPositionForValue(0,o);return new Ts({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(s)})}for(let t=0;t<i;++t)a.push(e.getPointPositionForValue(t,s));return a}(t);return function(t){const{scale:e={},fill:n}=t,r=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Jt(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(Xt(r)){const t=e.isHorizontal();return{x:t?r:null,y:t?null:r}}return null}(t)}(t);return i instanceof Ts?i:_s(i,r)}function Es(t,e,n){const r=Ps(e),{chart:i,index:o,line:s,scale:a,axis:l}=e,c=s.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},p=i.getDatasetMeta(o),g=$r(i,p);r&&s.points.length&&(Mn(t,n),function(t,e){const{line:n,target:r,above:i,below:o,area:s,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=o;o!==i&&("x"===c?(Ls(t,r,s.top),Rs(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Ls(t,r,s.bottom)):"y"===c&&(Os(t,r,s.left),Rs(t,{line:n,target:r,color:o,scale:a,property:c,clip:l}),t.restore(),t.save(),Os(t,r,s.right),u=i));Rs(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}(t,{line:s,target:r,above:h,below:f,area:n,scale:a,axis:l,clip:g}),Sn(t))}function Ls(t,e,n){const{segments:r,points:i}=e;let o=!0,s=!1;t.beginPath();for(const a of r){const{start:r,end:l}=a,c=i[r],u=i[ws(r,l,i)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Os(t,e,n){const{segments:r,points:i}=e;let o=!0,s=!1;t.beginPath();for(const a of r){const{start:r,end:l}=a,c=i[r],u=i[ws(r,l,i)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(n,c.y),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(n,u.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Rs(t,e){const{line:n,target:r,property:i,color:o,scale:s,clip:a}=e,l=function(t,e,n){const r=t.segments,i=t.points,o=e.points,s=[];for(const t of r){let{start:r,end:a}=t;a=ws(r,a,i);const l=vs(n,i[r],i[a],t.loop);if(!e.segments){s.push({source:t,target:l,start:i[r],end:i[a]});continue}const c=Lr(e,l);for(const e of c){const r=vs(n,o[e.start],o[e.end],e.loop),a=Er(t,i,r);for(const t of a)s.push({source:t,target:e,start:{[n]:ks(l,r,"start",Math.max)},end:{[n]:ks(l,r,"end",Math.min)}})}}return s}(n,r,i);for(const{source:e,target:c,start:u,end:d}of l){const{style:{backgroundColor:l=o}={}}=e,h=!0!==r;t.save(),t.fillStyle=l,Bs(t,s,a,h&&vs(i,u,d)),t.beginPath();const f=!!n.pathSegment(t,e);let p;if(h){f?t.closePath():js(t,r,d,i);const e=!!r.pathSegment(t,c,{move:f,reverse:!0});p=f&&e,p||js(t,r,u,i)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function Bs(t,e,n,r){const i=e.chart.chartArea,{property:o,start:s,end:a}=r||{};if("x"===o||"y"===o){let e,r,l,c;"x"===o?(e=s,r=i.top,l=a,c=i.bottom):(e=i.left,r=s,l=i.right,c=a),t.beginPath(),n&&(e=Math.max(e,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),t.rect(e,r,l-e,c-r),t.clip()}}function js(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var $s={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let o,s,a,l;for(s=0;s<r;++s)o=t.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof es&&(l={visible:t.isDatasetVisible(s),index:s,fill:Ss(a,s,r),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,i.push(l);for(s=0;s<r;++s)l=i[s],l&&!1!==l.fill&&(l.fill=Ms(i,s,n.propagate))},beforeDraw(t,e,n){const r="beforeDraw"===n.drawTime,i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),r&&n.fill&&Es(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=t.getSortedVisibleDatasetMetas();for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;Cs(n)&&Es(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;Cs(r)&&"beforeDatasetDraw"===n.drawTime&&Es(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Is=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}};class zs extends Zi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ee(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=Nn(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=Is(n,i);let l,c;e.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,i,s,a)+10):(c=this.maxHeight,l=this._fitCols(o,r,s,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+s;let u=t;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((t,f)=>{const p=n+e/2+i.measureText(t.text).width;(0===f||l[l.length-1]+p+2*s>o)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),a[f]={left:0,top:h,row:d,width:p,height:r},l[l.length-1]+=p+s}),u}_fitCols(t,e,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-t;let u=s,d=0,h=0,f=0,p=0;return this.legendItems.forEach((t,o)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,r,i){const o=function(t,e,n,r){let i=t.text;i&&"string"!=typeof i&&(i=i.reduce((t,e)=>t.length>e.length?t:e));return e+n.size/2+r.measureText(i).width}(r,t,e,n),s=function(t,e,n){let r=t;"string"!=typeof e.text&&(r=Fs(e,n));return r}(i,r,e.lineHeight);return{itemWidth:o,itemHeight:s}}(n,e,i,t,r);o>0&&h+m+2*s>c&&(u+=d+s,l.push({width:d,height:h}),f+=d+s,p++,d=h=0),a[o]={left:f,top:h,col:p,width:g,height:m},d=Math.max(d,g),h+=m+s}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:i}}=this,o=Sr(i,this.left,this.width);if(this.isHorizontal()){let i=0,s=Qe(n,this.left+r,this.right-this.lineWidths[i]);for(const a of e)i!==a.row&&(i=a.row,s=Qe(n,this.left+r,this.right-this.lineWidths[i])),a.top+=this.top+t+r,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+r}else{let i=0,s=Qe(n,this.top+t+r,this.bottom-this.columnSizes[i].height);for(const a of e)a.col!==i&&(i=a.col,s=Qe(n,this.top+t+r,this.bottom-this.columnSizes[i].height)),a.top=s,a.left+=this.left+r,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Mn(t,this),this._draw(),Sn(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:i,labels:o}=t,s=yn.color,a=Sr(t.rtl,this.left,this.width),l=Nn(o.font),{padding:c}=o,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Is(o,u),m=this.isHorizontal(),y=this._computeTitleHeight();h=m?{x:Qe(i,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:Qe(i,this.top+y+c,this.bottom-e[0].height),line:0},Ar(this.ctx,t.textDirection);const b=g+c;this.legendItems.forEach((x,v)=>{r.strokeStyle=x.fontColor,r.fillStyle=x.fontColor;const w=r.measureText(x.text).width,k=a.textAlign(x.textAlign||(x.textAlign=o.textAlign)),_=f+d+w;let C=h.x,M=h.y;a.setWidth(this.width),m?v>0&&C+_+c>this.right&&(M=h.y+=b,h.line++,C=h.x=Qe(i,this.left+c,this.right-n[h.line])):v>0&&M+b>this.bottom&&(C=h.x=C+e[h.line].width+c,h.line++,M=h.y=Qe(i,this.top+y+c,this.bottom-e[h.line].height));if(function(t,e,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=Zt(n.lineWidth,1);if(r.fillStyle=Zt(n.fillStyle,s),r.lineCap=Zt(n.lineCap,"butt"),r.lineDashOffset=Zt(n.lineDashOffset,0),r.lineJoin=Zt(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=Zt(n.strokeStyle,s),r.setLineDash(Zt(n.lineDash,[])),o.usePointStyle){const s={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=a.xPlus(t,f/2);_n(r,s,l,e+d,o.pointStyleWidth&&f)}else{const o=e+Math.max((u-p)/2,0),s=a.leftForLtr(t,f),l=zn(n.borderRadius);r.beginPath(),Object.values(l).some(t=>0!==t)?Ln(r,{x:s,y:o,w:f,h:p,radius:l}):r.rect(s,o,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(a.x(C),M,x),C=((t,e,n,r)=>t===(r?"left":"right")?n:"center"===t?(e+n)/2:e)(k,C+f+d,m?C+_:this.right,t.rtl),function(t,e,n){En(r,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(C),M,x),m)h.x+=_+c;else if("string"!=typeof x.text){const t=l.lineHeight;h.y+=Fs(x,t)+c}else h.y+=b}),Dr(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Nn(e.font),r=Fn(e.padding);if(!e.display)return;const i=Sr(t.rtl,this.left,this.width),o=this.ctx,s=e.position,a=n.size/2,l=r.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=Qe(t.align,u,this.right-d);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+Qe(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const h=Qe(s,u,u+d);o.textAlign=i.textAlign(Ye(s)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,En(o,e.text,h,c,n)}_computeTitleHeight(){const t=this.options.title,e=Nn(t.font),n=Fn(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,i;if(ze(t,this.left,this.right)&&ze(e,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],ze(t,r.left,r.left+r.width)&&ze(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const o=this._hoveredItem,s=(i=n,null!==(r=o)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);o&&!s&&ee(e.onLeave,[t,o,this],this),this._hoveredItem=n,n&&!s&&ee(e.onHover,[t,n,this],this)}else n&&ee(e.onClick,[t,n,this],this);var r,i}}function Fs(t,e){return e*(t.text?t.text.length:0)}var Ns={id:"legend",_element:zs,start(t,e,n){const r=t.legend=new zs({ctx:t.ctx,options:n,chart:t});Bi.configure(t,r,n),Bi.addBox(t,r)},stop(t){Bi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Bi.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=Fn(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Ws extends Zi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Qt(n.text)?n.text.length:1;this._padding=Fn(n.padding);const i=r*Nn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:i,options:o}=this,s=o.align;let a,l,c,u=0;return this.isHorizontal()?(l=Qe(s,n,i),c=e+t,a=i-n):("left"===o.position?(l=n+t,c=Qe(s,r,e),u=-.5*me):(l=i-t,c=Qe(s,e,r),u=.5*me),a=r-e),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Nn(e.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(r);En(t,e.text,0,0,n,{color:e.color,maxWidth:s,rotation:a,textAlign:Ye(e.align),textBaseline:"middle",translation:[i,o]})}}var Hs={id:"title",_element:Ws,start(t,e,n){!function(t,e){const n=new Ws({ctx:t.ctx,options:e,chart:t});Bi.configure(t,n,e),Bi.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Bi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Bi.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Vs=new WeakMap;var qs={id:"subtitle",start(t,e,n){const r=new Ws({ctx:t.ctx,options:n,chart:t});Bi.configure(t,r,n),Bi.addBox(t,r),Vs.set(t,r)},stop(t){Bi.removeBox(t,Vs.get(t)),Vs.delete(t)},beforeUpdate(t,e,n){const r=Vs.get(t);Bi.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Us={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();r.add(t.x),i+=t.y,++o}}if(0===o||0===r.size)return!1;return{x:[...r].reduce((t,e)=>t+e)/r.size,y:i/o}},nearest(t,e){if(!t.length)return!1;let n,r,i,o=e.x,s=e.y,a=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){const r=t[n].element;if(r&&r.hasValue()){const t=Re(e,r.getCenterPoint());t<a&&(a=t,i=r)}}if(i){const t=i.tooltipPosition();o=t.x,s=t.y}return{x:o,y:s}}};function Ks(t,e){return e&&(Qt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ys(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Qs(t,e){const{element:n,datasetIndex:r,index:i}=e,o=t.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:t,label:s,parsed:o.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Js(t,e){const n=t.chart.ctx,{body:r,footer:i,title:o}=t,{boxWidth:s,boxHeight:a}=e,l=Nn(e.bodyFont),c=Nn(e.titleFont),u=Nn(e.footerFont),d=o.length,h=i.length,f=r.length,p=Fn(e.padding);let g=p.height,m=0,y=r.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let b=0;const x=function(t){m=Math.max(m,n.measureText(t).width+b)};return n.save(),n.font=c.string,ne(t.title,x),n.font=l.string,ne(t.beforeBody.concat(t.afterBody),x),b=e.displayColors?s+2+e.boxPadding:0,ne(r,t=>{ne(t.before,x),ne(t.lines,x),ne(t.after,x)}),b=0,n.font=u.string,ne(t.footer,x),n.restore(),m+=p.width,{width:m,height:g}}function Xs(t,e,n,r){const{x:i,width:o}=n,{width:s,chartArea:{left:a,right:l}}=t;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=o/2?c="left":i>=s-o/2&&(c="right"),function(t,e,n,r){const{x:i,width:o}=r,s=n.caretSize+n.caretPadding;return"left"===t&&i+o+s>e.width||"right"===t&&i-o-s<0||void 0}(c,t,e,n)&&(c="center"),c}function Gs(t,e,n){const r=n.yAlign||e.yAlign||function(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Xs(t,e,n,r),yAlign:r}}function Zs(t,e,n,r){const{caretSize:i,caretPadding:o,cornerRadius:s}=t,{xAlign:a,yAlign:l}=n,c=i+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=zn(s);let p=function(t,e){let{x:n,width:r}=t;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,a);const g=function(t,e,n){let{y:r,height:i}=t;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,h)+i:"right"===a&&(p+=Math.max(d,f)+i),{x:Ie(p,0,r.width-e.width),y:Ie(g,0,r.height-e.height)}}function ta(t,e,n){const r=Fn(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function ea(t){return Ks([],Ys(t))}function na(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ra={beforeTitle:Ut,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ut,beforeBody:Ut,beforeLabel:Ut,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Yt(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ut,afterBody:Ut,beforeFooter:Ut,footer:Ut,afterFooter:Ut};function ia(t,e,n,r){const i=t[e].call(n,r);return void 0===i?ra[e].call(n,r):i}class oa extends Zi{static positioners=Us;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new Hr(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Hn(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,r=ia(n,"beforeTitle",this,t),i=ia(n,"title",this,t),o=ia(n,"afterTitle",this,t);let s=[];return s=Ks(s,Ys(r)),s=Ks(s,Ys(i)),s=Ks(s,Ys(o)),s}getBeforeBody(t,e){return ea(ia(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,r=[];return ne(t,t=>{const e={before:[],lines:[],after:[]},i=na(n,t);Ks(e.before,Ys(ia(i,"beforeLabel",this,t))),Ks(e.lines,ia(i,"label",this,t)),Ks(e.after,Ys(ia(i,"afterLabel",this,t))),r.push(e)}),r}getAfterBody(t,e){return ea(ia(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=ia(n,"beforeFooter",this,t),i=ia(n,"footer",this,t),o=ia(n,"afterFooter",this,t);let s=[];return s=Ks(s,Ys(r)),s=Ks(s,Ys(i)),s=Ks(s,Ys(o)),s}_createItems(t){const e=this._active,n=this.chart.data,r=[],i=[],o=[];let s,a,l=[];for(s=0,a=e.length;s<a;++s)l.push(Qs(this.chart,e[s]));return t.filter&&(l=l.filter((e,r,i)=>t.filter(e,r,i,n))),t.itemSort&&(l=l.sort((e,r)=>t.itemSort(e,r,n))),ne(l,e=>{const n=na(t.callbacks,e);r.push(ia(n,"labelColor",this,e)),i.push(ia(n,"labelPointStyle",this,e)),o.push(ia(n,"labelTextColor",this,e))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const t=Us[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=Js(this,n),s=Object.assign({},t,e),a=Gs(this.chart,n,s),l=Zs(n,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:s}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=zn(s),{x:d,y:h}=t,{width:f,height:p}=e;let g,m,y,b,x,v;return"center"===i?(x=h+p/2,"left"===r?(g=d,m=g-o,b=x+o,v=x-o):(g=d+f,m=g+o,b=x-o,v=x+o),y=g):(m="left"===r?d+Math.max(a,c)+o:"right"===r?d+f-Math.max(l,u)-o:this.caretX,"top"===i?(b=h,x=b-o,g=m-o,y=m+o):(b=h+p,x=b+o,g=m+o,y=m-o),v=b),{x1:g,x2:m,x3:y,y1:b,y2:x,y3:v}}drawTitle(t,e,n){const r=this.title,i=r.length;let o,s,a;if(i){const l=Sr(n.rtl,this.x,this.width);for(t.x=ta(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",o=Nn(n.titleFont),s=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,a=0;a<i;++a)e.fillText(r[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s,a+1===i&&(t.y+=n.titleMarginBottom-s)}}_drawColorBox(t,e,n,r,i){const o=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=i,c=Nn(i.bodyFont),u=ta(this,"left",i),d=r.x(u),h=a<c.lineHeight?(c.lineHeight-a)/2:0,f=e.y+h;if(i.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=f+a/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,kn(t,e,n,c),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,kn(t,e,n,c)}else{t.lineWidth=Jt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),s=zn(o.borderRadius);Object.values(s).some(t=>0!==t)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Ln(t,{x:e,y:f,w:l,h:a,radius:s}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Ln(t,{x:n,y:f+1,w:l-2,h:a-2,radius:s}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=o.backgroundColor,t.fillRect(n,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Nn(n.bodyFont);let d=u.lineHeight,h=0;const f=Sr(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+h),t.y+d/2),t.y+=d+i},g=f.textAlign(o);let m,y,b,x,v,w,k;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=ta(this,g,n),e.fillStyle=n.bodyColor,ne(this.beforeBody,p),h=s&&"right"!==g?"center"===o?l/2+c:l+2+c:0,x=0,w=r.length;x<w;++x){for(m=r[x],y=this.labelTextColors[x],e.fillStyle=y,ne(m.before,p),b=m.lines,s&&b.length&&(this._drawColorBox(e,t,x,f,n),d=Math.max(u.lineHeight,a)),v=0,k=b.length;v<k;++v)p(b[v]),d=u.lineHeight;ne(m.after,p)}h=0,d=u.lineHeight,ne(this.afterBody,p),t.y-=i}drawFooter(t,e,n){const r=this.footer,i=r.length;let o,s;if(i){const a=Sr(n.rtl,this.x,this.width);for(t.x=ta(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",o=Nn(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,s=0;s<i;++s)e.fillText(r[s],a.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:i,yAlign:o}=this,{x:s,y:a}=t,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=zn(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(s+u,a),"top"===o&&this.drawCaret(t,e,n,r),e.lineTo(s+l-d,a),e.quadraticCurveTo(s+l,a,s+l,a+d),"center"===o&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(s+l,a+c-f),e.quadraticCurveTo(s+l,a+c,s+l-f,a+c),"bottom"===o&&this.drawCaret(t,e,n,r),e.lineTo(s+h,a+c),e.quadraticCurveTo(s,a+c,s,a+c-h),"center"===o&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(s,a+u),e.quadraticCurveTo(s,a,s+u,a),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Us[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=Js(this,t),s=Object.assign({},n,this._size),a=Gs(e,t,s),l=Zs(t,s,a,e);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Fn(e.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&s&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),Ar(t,e.textDirection),i.y+=o.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),Dr(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map(({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}),i=!re(n,r),o=this._positionChanged(r,e);(i||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,e,n),s=this._positionChanged(o,t),a=e||!re(o,i)||s;return a&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,r){const i=this.options;if("mouseout"===t.type)return[];if(!r)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:r,options:i}=this,o=Us[i.position].call(this,t,e);return!1!==o&&(n!==o.x||r!==o.y)}}var sa={id:"tooltip",_element:oa,positioners:Us,afterInit(t,e,n){n&&(t.tooltip=new oa({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ra},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},aa=Object.freeze({__proto__:null,Colors:ms,Decimation:xs,Filler:$s,Legend:Ns,SubTitle:qs,Title:Hs,Tooltip:sa});function la(t,e,n,r){const i=t.indexOf(e);if(-1===i)return((t,e,n,r)=>("string"==typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,r);return i!==t.lastIndexOf(e)?n:i}function ca(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function ua(t,e){const n=[],{bounds:r,step:i,min:o,max:s,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=t,h=i||1,f=c-1,{min:p,max:g}=e,m=!Yt(o),y=!Yt(s),b=!Yt(l),x=(g-p)/(u+1);let v,w,k,_,C=Ae((g-p)/f/h)*h;if(C<1e-14&&!m&&!y)return[{value:p},{value:g}];_=Math.ceil(g/C)-Math.floor(p/C),_>f&&(C=Ae(_*C/f/h)*h),Yt(a)||(v=Math.pow(10,a),C=Math.ceil(C*v)/v),"ticks"===r?(w=Math.floor(p/C)*C,k=Math.ceil(g/C)*C):(w=p,k=g),m&&y&&i&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((s-o)/i,C/1e3)?(_=Math.round(Math.min((s-o)/C,c)),C=(s-o)/_,w=o,k=s):b?(w=m?o:w,k=y?s:k,_=l-1,C=(k-w)/_):(_=(k-w)/C,_=Se(_,Math.round(_),C/1e3)?Math.round(_):Math.ceil(_));const M=Math.max(Le(C),Le(w));v=Math.pow(10,Yt(a)?M:a),w=Math.round(w*v)/v,k=Math.round(k*v)/v;let S=0;for(m&&(d&&w!==o?(n.push({value:o}),w<o&&S++,Se(Math.round((w+S*C)*v)/v,o,da(o,x,t))&&S++):w<o&&S++);S<_;++S){const t=Math.round((w+S*C)*v)/v;if(y&&t>s)break;n.push({value:t})}return y&&d&&k!==s?n.length&&Se(n[n.length-1].value,s,da(s,x,t))?n[n.length-1].value=s:n.push({value:s}):y&&k!==s||n.push({value:k}),n}function da(t,e,{horizontal:n,minRotation:r}){const i=Pe(r),o=(n?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+t).length;return Math.min(e/o,s)}class ha extends co{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Yt(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=t=>r=e?r:t,s=t=>i=n?i:t;if(t){const t=Me(r),e=Me(i);t<0&&e<0?s(0):t>0&&e>0&&o(0)}if(r===i){let e=0===i?1:Math.abs(.05*i);s(i+e),t||o(r-e)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=ua({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Te(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return cn(t,this.chart.options.locale,this.options.ticks.format)}}class fa extends ha{static id="linear";static defaults={ticks:{callback:dn.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Xt(t)?t:0,this.max=Xt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=Pe(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const pa=t=>Math.floor(Ce(t)),ga=(t,e)=>Math.pow(10,pa(t)+e);function ma(t){return 1===t/Math.pow(10,pa(t))}function ya(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function ba(t,{min:e,max:n}){e=Gt(t.min,e);const r=[],i=pa(e);let o=function(t,e){let n=pa(e-t);for(;ya(t,e,n)>10;)n++;for(;ya(t,e,n)<10;)n--;return Math.min(n,pa(t))}(e,n),s=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((e-l)*s)/s,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,o)),h=Gt(t.min,Math.round((l+u+d*Math.pow(10,o))*s)/s);for(;h<n;)r.push({value:h,major:ma(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,s=o>=0?1:s),h=Math.round((l+u+d*Math.pow(10,o))*s)/s;const f=Gt(t.max,h);return r.push({value:f,major:ma(f),significand:d}),r}class xa extends co{static id="logarithmic";static defaults={ticks:{callback:dn.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=ha.prototype.parse.apply(this,[t,e]);if(0!==n)return Xt(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Xt(t)?Math.max(0,t):null,this.max=Xt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Xt(this._userMin)&&(this.min=t===ga(this.min,0)?ga(this.min,-1):ga(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const i=e=>n=t?n:e,o=t=>r=e?r:t;n===r&&(n<=0?(i(1),o(10)):(i(ga(n,-1)),o(ga(r,1)))),n<=0&&i(ga(r,-1)),r<=0&&o(ga(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,e=ba({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Te(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":cn(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ce(t),this._valueRange=Ce(this.max)-Ce(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ce(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function va(t){const e=t.ticks;if(e.display&&t.display){const t=Fn(e.backdropPadding);return Zt(e.font&&e.font.size,yn.font.size)+t.height}return 0}function wa(t,e,n){return n=Qt(n)?n:[n],{w:xn(t,e.string,n),h:n.length*e.lineHeight}}function ka(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function _a(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],o=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?me/o:0;for(let l=0;l<o;l++){const o=s.setContext(t.getPointLabelContext(l));i[l]=o.padding;const c=t.getPointPosition(l,t.drawingArea+i[l],a),u=Nn(o.font),d=wa(t.ctx,u,t._pointLabels[l]);r[l]=d;const h=je(t.getIndexAngle(l)+a),f=Math.round(Ee(h));Ca(n,e,h,ka(f,c.x,d.w,0,180),ka(f,c.y,d.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const r=[],i=t._pointLabels.length,o=t.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:va(o)/2,additionalAngle:s?me/i:0};let c;for(let o=0;o<i;o++){l.padding=n[o],l.size=e[o];const i=Ma(t,o,l);r.push(i),"auto"===a&&(i.visible=Sa(i,c),i.visible&&(c=i))}return r}(t,r,i)}function Ca(t,e,n,r,i){const o=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/o,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/s,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function Ma(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:o,padding:s,size:a}=n,l=t.getPointPosition(e,r+i+s,o),c=Math.round(Ee(je(l.angle+we))),u=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,a.h,c),d=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),h=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function Sa(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:o}=t;return!(Cn({x:n,y:r},e)||Cn({x:n,y:o},e)||Cn({x:i,y:r},e)||Cn({x:i,y:o},e))}function Aa(t,e,n){const{left:r,top:i,right:o,bottom:s}=n,{backdropColor:a}=e;if(!Yt(a)){const n=zn(e.borderRadius),l=Fn(e.backdropPadding);t.fillStyle=a;const c=r-l.left,u=i-l.top,d=o-r+l.width,h=s-i+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),Ln(t,{x:c,y:u,w:d,h:h,radius:n}),t.fill()):t.fillRect(c,u,d,h)}}function Da(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,ye);else{let n=t.getPointPosition(0,e);i.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=t.getPointPosition(o,e),i.lineTo(n.x,n.y)}}class Ta extends ha{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:dn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Fn(va(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Xt(t)&&!isNaN(t)?t:0,this.max=Xt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/va(this.options))}generateTickLabels(t){ha.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=ee(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?_a(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return je(t*(ye/(this._pointLabels.length||1))+Pe(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Yt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Yt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Hn(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-we+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Da(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r,border:i}=e,o=this._pointLabels.length;let s,a,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const e=t._pointLabelItems[i];if(!e.visible)continue;const o=r.setContext(t.getPointLabelContext(i));Aa(n,o,e);const s=Nn(o.font),{x:a,y:l,textAlign:c}=e;En(n,t._pointLabels[i],a,l+s.lineHeight/2,s,{color:o.color,textAlign:c,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),s=r.setContext(n),l=i.setContext(n);!function(t,e,n,r,i){const o=t.ctx,s=e.circular,{color:a,lineWidth:l}=e;!s&&!r||!a||!l||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),Da(t,n,s,r),o.closePath(),o.stroke(),o.restore())}(this,s,a,o,l)}}),n.display){for(t.save(),s=o-1;s>=0;s--){const r=n.setContext(this.getPointLabelContext(s)),{color:i,lineWidth:o}=r;o&&i&&(t.lineWidth=o,t.strokeStyle=i,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(s,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((r,s)=>{if(0===s&&this.min>=0&&!e.reverse)return;const a=n.setContext(this.getContext(s)),l=Nn(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){t.font=l.string,o=t.measureText(r.label).width,t.fillStyle=a.backdropColor;const e=Fn(a.backdropPadding);t.fillRect(-o/2-e.left,-i-l.size/2-e.top,o+e.width,l.size+e.height)}En(t,r.label,0,-i,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),t.restore()}drawTitle(){}}const Pa={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ea=Object.keys(Pa);function La(t,e){return t-e}function Oa(t,e){if(Yt(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:o}=t._parseOpts;let s=e;return"function"==typeof r&&(s=r(s)),Xt(s)||(s="string"==typeof r?n.parse(s,r):n.parse(s)),null===s?null:(i&&(s="week"!==i||!De(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function Ra(t,e,n,r){const i=Ea.length;for(let o=Ea.indexOf(t);o<i-1;++o){const t=Pa[Ea[o]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(i*t.size))<=r)return Ea[o]}return Ea[i-1]}function Ba(t,e,n){if(n){if(n.length){const{lo:r,hi:i}=Fe(n,e);t[n[r]>=e?n[r]:n[i]]=!0}}else t[e]=!0}function ja(t,e,n){const r=[],i={},o=e.length;let s,a;for(s=0;s<o;++s)a=e[s],i[a]=s,r.push({value:a,major:!1});return 0!==o&&n?function(t,e,n,r){const i=t._adapter,o=+i.startOf(e[0].value,r),s=e[e.length-1].value;let a,l;for(a=o;a<=s;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}(t,r,i,n):r}class $a extends co{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),r=this._adapter=new gi(t.adapters.date);r.init(e),le(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Oa(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:s}=this.getUserBounds();function a(t){o||isNaN(t.min)||(r=Math.min(r,t.min)),s||isNaN(t.max)||(i=Math.max(i,t.max))}o&&s||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),r=Xt(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),i=Xt(i)&&!isNaN(i)?i:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=function(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}(r,i,this.max);return this._unit=e.unit||(n.autoSkip?Ra(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,n,r,i){for(let o=Ea.length-1;o>=Ea.indexOf(n);o--){const n=Ea[o];if(Pa[n].common&&t._adapter.diff(i,r,n)>=e-1)return n}return Ea[n?Ea.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Ea.indexOf(t)+1,n=Ea.length;e<n;++e)if(Pa[Ea[e]].common)return Ea[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&o.reverse(),ja(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,n,r=0,i=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),i=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=Ie(r,0,o),i=Ie(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||Ra(i.minUnit,e,n,this._getLabelCapacity(e)),s=Zt(r.ticks.stepSize,1),a="week"===o&&i.isoWeekday,l=De(a)||!0===a,c={};let u,d,h=e;if(l&&(h=+t.startOf(h,"isoWeek",a)),h=+t.startOf(h,l?"day":o),t.diff(n,e,o)>1e5*s)throw new Error(e+" and "+n+" are too far apart with stepSize of "+s+" "+o);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+t.add(u,s,o),d++)Ba(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||Ba(c,u,f),Object.keys(c).sort(La).map(t=>+t)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,i=e||n[r];return this._adapter.format(t,i)}_tickFormatFunction(t,e,n,r){const i=this.options,o=i.ticks.callback;if(o)return ee(o,[t,e,n],this);const s=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&s[a],u=l&&s[l],d=n[e],h=l&&u&&d&&d.major;return this._adapter.format(t,r||(h?u:c))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=Pe(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),o=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:n*i+s*o,h:n*o+s*i}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,ja(this,[t],this._majorUnit),r),o=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(Oa(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return qe(t.sort(La))}}function Ia(t,e,n){let r,i,o,s,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Ne(t,"pos",e)),({pos:r,time:o}=t[a]),({pos:i,time:s}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Ne(t,"time",e)),({time:r,pos:o}=t[a]),({time:i,pos:s}=t[l]));const c=i-r;return c?o+(s-o)*(e-r)/c:o}var za=Object.freeze({__proto__:null,CategoryScale:class extends co{static id="category";static defaults={ticks:{callback:ca}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:r}of e)t[n]===r&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Yt(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Ie(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:la(n,t,Zt(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)r.push({value:n});return r}getLabelForValue(t){return ca.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:fa,LogarithmicScale:xa,RadialLinearScale:Ta,TimeScale:$a,TimeSeriesScale:class extends $a{static id="timeseries";static defaults=$a.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ia(e,this.min),this._tableRange=Ia(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],i=[];let o,s,a,l,c;for(o=0,s=t.length;o<s;++o)l=t[o],l>=e&&l<=n&&r.push(l);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,s=r.length;o<s;++o)c=r[o+1],a=r[o-1],l=r[o],Math.round((c+a)/2)!==l&&i.push({time:l,pos:o/(s-1)});return i}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ia(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Ia(this._table,n*this._tableRange+this._minPos,!0)}}});const Fa=[hi,cs,aa,za],Na=new Set(["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","have","has","had","do","does","did","will","would","could","should","may","might","can","about","from","up","out","into","over","under","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their","what","which","who","when","where","why","how","all","each","every","both","few","more","most","other","some","such","no","not","only","same","so","than","too","very","just","also","now","here","there","then","once","if","any","as"]);function Wa(t){return new Date(t).toLocaleDateString()}function Ha(t){if(t.url.startsWith("http://")||t.url.startsWith("https://")){const e=t.domain||"unknown",n=e.charAt(0).toUpperCase(),r=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899"];return`data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="${r[e.length%r.length]}"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white" font-weight="bold">${n}</text></svg>`}switch(t.domain||""){case"chrome-internal":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23EA4335"/><circle cx="8" cy="8" r="3" fill="white"/></svg>';case"local-file":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F59E0B"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';case"javascript-bookmarklet":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23F7DF1E"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="black" font-weight="bold">JS</text></svg>';case"data-uri":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%2310B981"/><text x="8" y="12" font-family="Arial" font-size="8" text-anchor="middle" fill="white" font-weight="bold">D</text></svg>';case"contact-link":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%238B5CF6"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white">@</text></svg>';case"other-protocol":return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%236B7280"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="white"></text></svg>';default:return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23E5E7EB"/><text x="8" y="12" font-family="Arial" font-size="10" text-anchor="middle" fill="%236B7280">?</text></svg>'}}function Va(t){if(t.faviconUrl)return t.faviconUrl;if(t.url&&(t.url.startsWith("http://")||t.url.startsWith("https://")))try{return`https://www.google.com/s2/favicons?domain=${t.domain||new URL(t.url).hostname}&sz=32`}catch(t){}return Ha(t)}function qa(t){switch(t.domain){case"chrome-internal":return"Chrome";case"local-file":return"Local File";case"javascript-bookmarklet":return"Bookmarklet";case"data-uri":return"Data URI";case"contact-link":return"Contact";case"other-protocol":return"Other";case"invalid-url":return"Invalid URL";default:return t.domain}}async function Ua(t){try{return await navigator.clipboard.writeText(t),!0}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}const Ka={RELEVANCE:{key:"relevance",label:"Best Match",sort:(t,e)=>(e._searchScore||0)-(t._searchScore||0)},DATE_DESC:{key:"date_desc",label:"Newest First",sort:(t,e)=>e.dateAdded-t.dateAdded},DATE_ASC:{key:"date_asc",label:"Oldest First",sort:(t,e)=>t.dateAdded-e.dateAdded},TITLE_ASC:{key:"title_asc",label:"Title A-Z",sort:(t,e)=>(t.title||"").localeCompare(e.title||"")},TITLE_DESC:{key:"title_desc",label:"Title Z-A",sort:(t,e)=>(e.title||"").localeCompare(t.title||"")},DOMAIN_ASC:{key:"domain_asc",label:"Domain A-Z",sort:(t,e)=>(t.domain||"").localeCompare(e.domain||"")}};function Ya(t){const e=Object.values(Ka).find(e=>e.key===t);return e?e.sort:Ka.DATE_DESC.sort}function Qa(t,e){if(!t||!e)return t;const{positive:n,phrases:r,regular:i,regexPatterns:o}=e,s=[...n||[],...r||[],...i||[]];if(0===s.length&&(!o||0===o.length))return t;const a=[];s.forEach(e=>{if(!e)return;const n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(n,"gi");let i;for(;null!==(i=r.exec(t));)a.push({start:i.index,end:i.index+i[0].length})}),o&&o.forEach(e=>{const n=e.flags.includes("g")?e.flags:e.flags+"g";try{const r=new RegExp(e.source,n);let i;for(;null!==(i=r.exec(t));)a.push({start:i.index,end:i.index+i[0].length}),i.index===r.lastIndex&&r.lastIndex++}catch(t){console.warn("Invalid regex for highlighting:",t)}}),a.sort((t,e)=>t.start-e.start);const l=[];if(a.length>0){let t=a[0];for(let e=1;e<a.length;e++){const n=a[e];n.start<t.end?t.end=Math.max(t.end,n.end):(l.push(t),t=n)}l.push(t)}let c=t;for(let t=l.length-1;t>=0;t--){const{start:e,end:n}=l[t],r=c.slice(0,e),i=c.slice(e,n),o=c.slice(n);c=`${r}<mark class="bg-yellow-200 text-gray-900 rounded-sm px-0.5">${i}</mark>${o}`}return c}const Ja=[];function Xa(e,n=t){let r;const i=new Set;function s(t){if(o(e,t)&&(e=t,r)){const t=!Ja.length;for(const t of i)t[1](),Ja.push(t,e);if(t){for(let t=0;t<Ja.length;t+=2)Ja[t][0](Ja[t+1]);Ja.length=0}}}function a(t){s(t(e))}return{set:s,update:a,subscribe:function(o,l=t){const c=[o,l];return i.add(c),1===i.size&&(r=n(s,a)||t),o(e),()=>{i.delete(c),0===i.size&&r&&(r(),r=null)}}}}function Ga(e,n,o){const s=!Array.isArray(e),a=s?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=n.length<2;return u=(e,o)=>{let u=!1;const d=[];let h=0,f=t;const p=()=>{if(h)return;f();const r=n(s?d[0]:d,e,o);c?e(r):f=i(r)?r:t},g=a.map((t,e)=>l(t,t=>{d[e]=t,h&=~(1<<e),u&&p()},()=>{h|=1<<e}));return u=!0,p(),function(){r(g),f(),u=!1}},{subscribe:Xa(o,u).subscribe};var u}var Za="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function tl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var el={exports:{}};el.exports=function(){
/*! *****************************************************************************
	    Copyright (c) Microsoft Corporation.
	    Permission to use, copy, modify, and/or distribute this software for any
	    purpose with or without fee is hereby granted.
	    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	    PERFORMANCE OF THIS SOFTWARE.
	    ***************************************************************************** */
var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};function r(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Za,o=Object.keys,s=Array.isArray;function a(t,e){return"object"!=typeof e||o(e).forEach(function(n){t[n]=e[n]}),t}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,c={}.hasOwnProperty;function u(t,e){return c.call(t,e)}function d(t,e){"function"==typeof e&&(e=e(l(t))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(e).forEach(function(n){f(t,n,e[n])})}var h=Object.defineProperty;function f(t,e,n,r){h(t,e,a(n&&u(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(t){return{from:function(e){return t.prototype=Object.create(e.prototype),f(t.prototype,"constructor",t),{extend:d.bind(null,t.prototype)}}}}var g=Object.getOwnPropertyDescriptor;function m(t,e){var n;return g(t,e)||(n=l(t))&&m(n,e)}var y=[].slice;function b(t,e,n){return y.call(t,e,n)}function x(t,e){return e(t)}function v(t){if(!t)throw new Error("Assertion Failed")}function w(t){i.setImmediate?setImmediate(t):setTimeout(t,0)}function k(t,e){return t.reduce(function(t,n,r){var i=e(n,r);return i&&(t[i[0]]=i[1]),t},{})}function _(t,e){if("string"==typeof e&&u(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var o=_(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(-1!==s){var a=t[e.substr(0,s)];return null==a?void 0:_(a,e.substr(s+1))}}function C(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){v("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)C(t,e[r],n[r])}else{var o=e.indexOf(".");if(-1!==o){var a=e.substr(0,o),l=e.substr(o+1);if(""===l)void 0===n?s(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var c=t[a];c&&u(t,a)||(c=t[a]={}),C(c,l,n)}}else void 0===n?s(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function M(t,e){"string"==typeof e?C(t,e,void 0):"length"in e&&[].map.call(e,function(e){C(t,e,void 0)})}function S(t){var e={};for(var n in t)u(t,n)&&(e[n]=t[n]);return e}var A=[].concat;function D(t){return A.apply([],t)}var T="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return i[t]}),P=new Set(T.map(function(t){return i[t]}));function E(t){var e={};for(var n in t)if(u(t,n)){var r=t[n];e[n]=!r||"object"!=typeof r||P.has(r.constructor)?r:E(r)}return e}function L(t){for(var e in t)if(u(t,e))return!1;return!0}var O=null;function R(t){O=new WeakMap;var e=B(t);return O=null,e}function B(t){if(!t||"object"!=typeof t)return t;var e=O.get(t);if(e)return e;if(s(t)){e=[],O.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(B(t[n]))}else if(P.has(t.constructor))e=t;else{var i=l(t);for(var o in e=i===Object.prototype?{}:Object.create(i),O.set(t,e),t)u(t,o)&&(e[o]=B(t[o]))}return e}var j={}.toString;function $(t){return j.call(t).slice(8,-1)}var I="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",z="symbol"==typeof I?function(t){var e;return null!=t&&(e=t[I])&&e.apply(t)}:function(){return null};function F(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n>=0}var N={};function W(t){var e,n,r,i;if(1===arguments.length){if(s(t))return t.slice();if(this===N&&"string"==typeof t)return[t];if(i=z(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var H="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},V=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],q=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(V),U={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(t,e){this.name=t,this.message=e}function Y(t,e){return t+". Errors: "+Object.keys(e).map(function(t){return e[t].toString()}).filter(function(t,e,n){return n.indexOf(t)===e}).join("\n")}function Q(t,e,n,r){this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Y(t,e)}function J(t,e){this.name="BulkError",this.failures=Object.keys(e).map(function(t){return e[t]}),this.failuresByPos=e,this.message=Y(t,this.failures)}p(K).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(Q).from(K),p(J).from(K);var X=q.reduce(function(t,e){return t[e]=e+"Error",t},{}),G=K,Z=q.reduce(function(t,e){var n=e+"Error";function r(t,r){this.name=n,t?"string"==typeof t?(this.message="".concat(t).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=U[e]||n,this.inner=null)}return p(r).from(G),t[e]=r,t},{});Z.Syntax=SyntaxError,Z.Type=TypeError,Z.Range=RangeError;var tt=V.reduce(function(t,e){return t[e+"Error"]=Z[e],t},{});function et(t,e){if(!t||t instanceof K||t instanceof TypeError||t instanceof SyntaxError||!t.name||!tt[t.name])return t;var n=new tt[t.name](e||t.message,t);return"stack"in t&&f(n,"stack",{get:function(){return this.inner.stack}}),n}var nt=q.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=Z[e]),t},{});function rt(){}function it(t){return t}function ot(t,e){return null==t||t===it?e:function(n){return e(t(n))}}function st(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function at(t,e){return t===rt?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?st(r,this.onsuccess):r),i&&(this.onerror=this.onerror?st(i,this.onerror):i),void 0!==o?o:n}}function lt(t,e){return t===rt?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?st(n,this.onsuccess):n),r&&(this.onerror=this.onerror?st(r,this.onerror):r)}}function ct(t,e){return t===rt?e:function(n){var r=t.apply(this,arguments);a(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?st(i,this.onsuccess):i),o&&(this.onerror=this.onerror?st(o,this.onerror):o),void 0===r?void 0===s?void 0:s:a(r,s)}}function ut(t,e){return t===rt?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function dt(t,e){return t===rt?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}nt.ModifyError=Q,nt.DexieError=K,nt.BulkError=J;var ht="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ft(t,e){ht=t}var pt={},gt=100,mt="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,l(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,l(e),t]}(),yt=mt[0],bt=mt[1],xt=mt[2],vt=bt&&bt.then,wt=yt&&yt.constructor,kt=!!xt;function _t(){queueMicrotask(Ht)}var Ct=function(t,e){Lt.push([t,e]),St&&(_t(),St=!1)},Mt=!0,St=!0,At=[],Dt=[],Tt=it,Pt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:rt,pgp:!1,env:{},finalize:rt},Et=Pt,Lt=[],Ot=0,Rt=[];function Bt(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=Et;if("function"!=typeof t){if(t!==pt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&zt(this,this._value))}this._state=null,this._value=null,++e.ref,It(this,t)}var jt={get:function(){var t=Et,e=ne;function n(n,r){var i=this,o=!t.global&&(t!==Et||e!==ne),s=o&&!se(),a=new Bt(function(e,a){Nt(i,new $t(fe(n,t,o,s),fe(r,t,o,s),e,a,t))});return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return n.prototype=pt,n},set:function(t){f(this,"then",t&&t.prototype===pt?jt:{get:function(){return t},set:jt.set})}};function $t(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function It(t,e){try{e(function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Vt();e&&"function"==typeof e.then?It(t,function(t,n){e instanceof Bt?e._then(t,n):e.then(t,n)}):(t._state=!0,t._value=e,Ft(t)),n&&qt()}},zt.bind(null,t))}catch(e){zt(t,e)}}function zt(t,e){if(Dt.push(e),null===t._state){var n=t._lib&&Vt();e=Tt(e),t._state=!1,t._value=e,Yt(t),Ft(t),n&&qt()}}function Ft(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Nt(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===Ot&&(++Ot,Ct(function(){0===--Ot&&Ut()},[]))}function Nt(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ot,Ct(Wt,[n,t,e])}else t._listeners.push(e)}function Wt(t,e,n){try{var r,i=e._value;!e._state&&Dt.length&&(Dt=[]),r=ht&&e._consoleTask?e._consoleTask.run(function(){return t(i)}):t(i),e._state||-1!==Dt.indexOf(i)||Qt(e),n.resolve(r)}catch(t){n.reject(t)}finally{0===--Ot&&Ut(),--n.psd.ref||n.psd.finalize()}}function Ht(){he(Pt,function(){Vt()&&qt()})}function Vt(){var t=Mt;return Mt=!1,St=!1,t}function qt(){var t,e,n;do{for(;Lt.length>0;)for(t=Lt,Lt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Lt.length>0);Mt=!0,St=!0}function Ut(){var t=At;At=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=Rt.slice(0),n=e.length;n;)e[--n]()}function Kt(t){function e(){t(),Rt.splice(Rt.indexOf(e),1)}Rt.push(e),++Ot,Ct(function(){0===--Ot&&Ut()},[])}function Yt(t){At.some(function(e){return e._value===t._value})||At.push(t)}function Qt(t){for(var e=At.length;e;)if(At[--e]._value===t._value)return void At.splice(e,1)}function Jt(t){return new Bt(pt,!1,t)}function Xt(t,e){var n=Et;return function(){var r=Vt(),i=Et;try{return ue(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{ue(i,!1),r&&qt()}}}d(Bt.prototype,{then:jt,_then:function(t,e){Nt(this,new $t(null,null,t,e,Et))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?n(t):Jt(t)}):this.then(null,function(t){return t&&t.name===e?n(t):Jt(t)})},finally:function(t){return this.then(function(e){return Bt.resolve(t()).then(function(){return e})},function(e){return Bt.resolve(t()).then(function(){return Jt(e)})})},timeout:function(t,e){var n=this;return t<1/0?new Bt(function(r,i){var o=setTimeout(function(){return i(new Z.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Bt.prototype,Symbol.toStringTag,"Dexie.Promise"),Pt.env=de(),d(Bt,{all:function(){var t=W.apply(null,arguments).map(ae);return new Bt(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach(function(i,o){return Bt.resolve(i).then(function(n){t[o]=n,--r||e(t)},n)})})},resolve:function(t){return t instanceof Bt?t:t&&"function"==typeof t.then?new Bt(function(e,n){t.then(e,n)}):new Bt(pt,!0,t)},reject:Jt,race:function(){var t=W.apply(null,arguments).map(ae);return new Bt(function(e,n){t.map(function(t){return Bt.resolve(t).then(e,n)})})},PSD:{get:function(){return Et},set:function(t){return Et=t}},totalEchoes:{get:function(){return ne}},newPSD:ie,usePSD:he,scheduler:{get:function(){return Ct},set:function(t){Ct=t}},rejectionMapper:{get:function(){return Tt},set:function(t){Tt=t}},follow:function(t,e){return new Bt(function(n,r){return ie(function(e,n){var r=Et;r.unhandleds=[],r.onunhandled=n,r.finalize=st(function(){var t=this;Kt(function(){0===t.unhandleds.length?e():n(t.unhandleds[0])})},r.finalize),t()},e,n,r)})}}),wt&&(wt.allSettled&&f(Bt,"allSettled",function(){var t=W.apply(null,arguments).map(ae);return new Bt(function(e){0===t.length&&e([]);var n=t.length,r=new Array(n);t.forEach(function(t,i){return Bt.resolve(t).then(function(t){return r[i]={status:"fulfilled",value:t}},function(t){return r[i]={status:"rejected",reason:t}}).then(function(){return--n||e(r)})})})}),wt.any&&"undefined"!=typeof AggregateError&&f(Bt,"any",function(){var t=W.apply(null,arguments).map(ae);return new Bt(function(e,n){0===t.length&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(t,o){return Bt.resolve(t).then(function(t){return e(t)},function(t){i[o]=t,--r||n(new AggregateError(i))})})})}),wt.withResolvers&&(Bt.withResolvers=wt.withResolvers));var Gt={awaits:0,echoes:0,id:0},Zt=0,te=[],ee=0,ne=0,re=0;function ie(t,e,n,r){var i=Et,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++re,Pt.env,o.env=kt?{Promise:Bt,PromiseProp:{value:Bt,configurable:!0,writable:!0},all:Bt.all,race:Bt.race,allSettled:Bt.allSettled,any:Bt.any,resolve:Bt.resolve,reject:Bt.reject}:{},e&&a(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=he(o,t,n,r);return 0===o.ref&&o.finalize(),s}function oe(){return Gt.id||(Gt.id=++Zt),++Gt.awaits,Gt.echoes+=gt,Gt.id}function se(){return!!Gt.awaits&&(0===--Gt.awaits&&(Gt.id=0),Gt.echoes=Gt.awaits*gt,!0)}function ae(t){return Gt.echoes&&t&&t.constructor===wt?(oe(),t.then(function(t){return se(),t},function(t){return se(),ge(t)})):t}function le(t){++ne,Gt.echoes&&0!==--Gt.echoes||(Gt.echoes=Gt.awaits=Gt.id=0),te.push(Et),ue(t,!0)}function ce(){var t=te[te.length-1];te.pop(),ue(t,!1)}function ue(t,e){var n=Et;if((e?!Gt.echoes||ee++&&t===Et:!ee||--ee&&t===Et)||queueMicrotask(e?le.bind(null,t):ce),t!==Et&&(Et=t,n===Pt&&(Pt.env=de()),kt)){var r=Pt.env.Promise,o=t.env;(n.global||t.global)&&(Object.defineProperty(i,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function de(){var t=i.Promise;return kt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function he(t,e,n,r,i){var o=Et;try{return ue(t,!0),e(n,r,i)}finally{ue(o,!1)}}function fe(t,e,n,r){return"function"!=typeof t?t:function(){var i=Et;n&&oe(),ue(e,!0);try{return t.apply(this,arguments)}finally{ue(i,!1),r&&queueMicrotask(se)}}}function pe(t){Promise===wt&&0===Gt.echoes?0===ee?t():enqueueNativeMicroTask(t):setTimeout(t,0)}-1===(""+vt).indexOf("[native code]")&&(oe=se=rt);var ge=Bt.reject;function me(t,e,n,r){if(t.idbdb&&(t._state.openComplete||Et.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===X.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return me(t,e,n,r)})):ge(i)}return i._promise(e,function(t,e){return ie(function(){return Et.trans=i,r(t,e,i)})}).then(function(t){if("readwrite"===e)try{i.idbtrans.commit()}catch(t){}return"readonly"===e?t:i._completion.then(function(){return t})})}if(t._state.openComplete)return ge(new Z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return ge(new Z.DatabaseClosed);t.open().catch(rt)}return t._state.dbReadyPromise.then(function(){return me(t,e,n,r)})}var ye="4.2.1",be=String.fromCharCode(65535),xe=-1/0,ve="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",we="String expected.",ke=[],_e="__dbnames",Ce="readonly",Me="readwrite";function Se(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Ae={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function De(t){return"string"!=typeof t||/\./.test(t)?function(t){return t}:function(e){return void 0===e[t]&&t in e&&delete(e=R(e))[t],e}}function Te(){throw Z.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Pe(t,e){try{var n=Oe(t),r=Oe(e);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Le(Re(t),Re(e));case"Array":return Ee(t,e)}}catch(t){}return NaN}function Ee(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,o=0;o<i;++o){var s=Pe(t[o],e[o]);if(0!==s)return s}return n===r?0:n<r?-1:1}function Le(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,o=0;o<i;++o)if(t[o]!==e[o])return t[o]<e[o]?-1:1;return n===r?0:n<r?-1:1}function Oe(t){var e=typeof t;if("object"!==e)return e;if(ArrayBuffer.isView(t))return"binary";var n=$(t);return"ArrayBuffer"===n?"binary":n}function Re(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}function Be(t,e,n){var r=t.schema.yProps;return r?(e&&n.numFailures>0&&(e=e.filter(function(t,e){return!n.failures[e]})),Promise.all(r.map(function(n){var r=n.updatesTable;return e?t.db.table(r).where("k").anyOf(e).delete():t.db.table(r).clear()})).then(function(){return n})):n}var je=function(){function t(t){this["@@propmod"]=t}return t.prototype.execute=function(t){var e,n=this["@@propmod"];if(void 0!==n.add){var i=n.add;if(s(i))return r(r([],s(t)?t:[],!0),i,!0).sort();if("number"==typeof i)return(Number(t)||0)+i;if("bigint"==typeof i)try{return BigInt(t)+i}catch(t){return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(void 0!==n.remove){var o=n.remove;if(s(o))return s(t)?t.filter(function(t){return!o.includes(t)}).sort():[];if("number"==typeof o)return Number(t)-o;if("bigint"==typeof o)try{return BigInt(t)-o}catch(t){return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}var a=null===(e=n.replacePrefix)||void 0===e?void 0:e[0];return a&&"string"==typeof t&&t.startsWith(a)?n.replacePrefix[1]+t.substring(a.length):t},t}();function $e(t,e){for(var n=o(e),r=n.length,i=!1,s=0;s<r;++s){var a=n[s],l=e[a],c=_(t,a);l instanceof je?(C(t,a,l.execute(c)),i=!0):c!==l&&(C(t,a,l),i=!0)}return i}var Ie=function(){function t(){}return t.prototype._trans=function(t,e,n){var r=this._tx||Et.trans,i=this.name,o=ht&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===t?"read":"write"," ").concat(this.name));function s(t,n,r){if(!r.schema[i])throw new Z.NotFound("Table "+i+" not part of transaction");return e(r.idbtrans,r)}var a=Vt();try{var l=r&&r.db._novip===this.db._novip?r===Et.trans?r._promise(t,s,n):ie(function(){return r._promise(t,s,n)},{trans:r,transless:Et.transless||Et}):me(this.db,t,[this.name],s);return o&&(l._consoleTask=o,l=l.catch(function(t){return console.trace(t),ge(t)})),l}finally{a&&qt()}},t.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):null==t?ge(new Z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(e){return n.core.get({trans:e,key:t}).then(function(t){return n.hook.reading.fire(t)})}).then(e)},t.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(s(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var e=o(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(t){if(t.compound&&e.every(function(e){return t.keyPath.indexOf(e)>=0})){for(var n=0;n<e.length;++n)if(-1===e.indexOf(t.keyPath[n]))return!1;return!0}return!1}).sort(function(t,e){return t.keyPath.length-e.keyPath.length})[0];if(n&&this.db._maxKey!==be){var r=n.keyPath.slice(0,e.length);return this.where(r).equals(r.map(function(e){return t[e]}))}!n&&ht&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(e.join("+"),"]"));var i=this.schema.idxByName;function a(t,e){return 0===Pe(t,e)}var l=e.reduce(function(e,n){var r=e[0],o=e[1],l=i[n],c=t[n];return[r||l,r||!l?Se(o,l&&l.multi?function(t){var e=_(t,n);return s(e)&&e.some(function(t){return a(c,t)})}:function(t){return a(c,_(t,n))}):o]},[null,null]),c=l[0],u=l[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(u):n?this.filter(u):this.where(e).equals("")},t.prototype.filter=function(t){return this.toCollection().and(t)},t.prototype.count=function(t){return this.toCollection().count(t)},t.prototype.offset=function(t){return this.toCollection().offset(t)},t.prototype.limit=function(t){return this.toCollection().limit(t)},t.prototype.each=function(t){return this.toCollection().each(t)},t.prototype.toArray=function(t){return this.toCollection().toArray(t)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,s(t)?"[".concat(t.join("+"),"]"):t))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(t){var n=this,r=n.db,i=n.name;this.schema.mappedClass=t,t.prototype instanceof Te&&(t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),Object.defineProperty(n.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),n.prototype.table=function(){return i},n}(t));for(var o=new Set,s=t.prototype;s;s=l(s))Object.getOwnPropertyNames(s).forEach(function(t){return o.add(t)});var a=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(!o.has(r))try{n[r]=e[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=a,this.hook("reading",a),t},t.prototype.defineClass=function(){function t(t){a(this,t)}return this.mapToClass(t)},t.prototype.add=function(t,e){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,s=t;return o&&i&&(s=De(o)(t)),this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[s]})}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):t.lastResult}).then(function(e){if(o)try{C(t,o,e)}catch(t){}return e})},t.prototype.upsert=function(t,e){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(i){return n.core.get({trans:i,key:t}).then(function(o){var s=null!=o?o:{};return $e(s,e),r&&C(s,r,t),n.core.mutate({trans:i,type:"put",values:[s],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[e]}}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):!!o})})})},t.prototype.update=function(t,e){if("object"!=typeof t||s(t))return this.where(":id").equals(t).modify(e);var n=_(t,this.schema.primKey.keyPath);return void 0===n?ge(new Z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)},t.prototype.put=function(t,e){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,s=t;return o&&i&&(s=De(o)(t)),this._trans("readwrite",function(t){return n.core.mutate({trans:t,type:"put",values:[s],keys:null!=e?[e]:null})}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):t.lastResult}).then(function(e){if(o)try{C(t,o,e)}catch(t){}return e})},t.prototype.delete=function(t){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]}).then(function(n){return Be(e,[t],n)}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):void 0})})},t.prototype.clear=function(){var t=this;return this._trans("readwrite",function(e){return t.core.mutate({trans:e,type:"deleteRange",range:Ae}).then(function(e){return Be(t,null,e)})}).then(function(t){return t.numFailures?Bt.reject(t.failures[0]):void 0})},t.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",function(n){return e.core.getMany({keys:t,trans:n}).then(function(t){return t.map(function(t){return e.hook.reading.fire(t)})})})},t.prototype.bulkAdd=function(t,e,n){var r=this,i=Array.isArray(e)?e:void 0,o=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(e){var n=r.schema.primKey,s=n.auto,a=n.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&s?t.map(De(a)):t;return r.core.mutate({trans:e,type:"add",keys:i,values:c,wantResults:o}).then(function(t){var e=t.numFailures,n=t.results,i=t.lastResult,s=t.failures;if(0===e)return o?n:i;throw new J("".concat(r.name,".bulkAdd(): ").concat(e," of ").concat(l," operations failed"),s)})})},t.prototype.bulkPut=function(t,e,n){var r=this,i=Array.isArray(e)?e:void 0,o=(n=n||(i?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",function(e){var n=r.schema.primKey,s=n.auto,a=n.keyPath;if(a&&i)throw new Z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new Z.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,c=a&&s?t.map(De(a)):t;return r.core.mutate({trans:e,type:"put",keys:i,values:c,wantResults:o}).then(function(t){var e=t.numFailures,n=t.results,i=t.lastResult,s=t.failures;if(0===e)return o?n:i;throw new J("".concat(r.name,".bulkPut(): ").concat(e," of ").concat(l," operations failed"),s)})})},t.prototype.bulkUpdate=function(t){var e=this,n=this.core,r=t.map(function(t){return t.key}),i=t.map(function(t){return t.changes}),o=[];return this._trans("readwrite",function(s){return n.getMany({trans:s,keys:r,cache:"clone"}).then(function(a){var l=[],c=[];t.forEach(function(t,n){var r=t.key,i=t.changes,s=a[n];if(s){for(var u=0,d=Object.keys(i);u<d.length;u++){var h=d[u],f=i[h];if(h===e.schema.primKey.keyPath){if(0!==Pe(f,r))throw new Z.Constraint("Cannot update primary key in bulkUpdate()")}else C(s,h,f)}o.push(n),l.push(r),c.push(s)}});var u=l.length;return n.mutate({trans:s,type:"put",keys:l,values:c,updates:{keys:r,changeSpecs:i}}).then(function(t){var n=t.numFailures,r=t.failures;if(0===n)return u;for(var i=0,s=Object.keys(r);i<s.length;i++){var a=s[i],l=o[Number(a)];if(null!=l){var c=r[a];delete r[a],r[l]=c}}throw new J("".concat(e.name,".bulkUpdate(): ").concat(n," of ").concat(u," operations failed"),r)})})})},t.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"delete",keys:t}).then(function(n){return Be(e,t,n)})}).then(function(t){var r=t.numFailures,i=t.lastResult,o=t.failures;if(0===r)return i;throw new J("".concat(e.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),o)})},t}();function ze(t){var e={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return e[n].subscribe.apply(null,o),t}if("string"==typeof n)return e[n]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(t,r,i){if("object"==typeof t)return l(t);r||(r=ut),i||(i=rt);var o={subscribers:[],fire:i,subscribe:function(t){-1===o.subscribers.indexOf(t)&&(o.subscribers.push(t),o.fire=r(o.fire,t))},unsubscribe:function(t){o.subscribers=o.subscribers.filter(function(e){return e!==t}),o.fire=o.subscribers.reduce(r,i)}};return e[t]=n[t]=o,o}function l(t){o(t).forEach(function(e){var n=t[e];if(s(n))a(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new Z.InvalidArgument("Invalid event config");var r=a(e,it,function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];r.subscribers.forEach(function(t){w(function(){t.apply(null,e)})})})}})}}function Fe(t,e){return p(e).from({prototype:t}),e}function Ne(t){return Fe(Ie.prototype,function(e,n,r){this.db=t,this._tx=r,this.name=e,this.schema=n,this.hook=t._allTables[e]?t._allTables[e].hook:ze(null,{creating:[at,rt],reading:[ot,it],updating:[ct,rt],deleting:[lt,rt]})})}function We(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function He(t,e){t.filter=Se(t.filter,e)}function Ve(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Se(r(),e())}:e,t.justLimit=n&&!r}function qe(t,e){t.isMatch=Se(t.isMatch,e)}function Ue(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new Z.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Ke(t,e,n){var r=Ue(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function Ye(t,e,n,r){var i=t.replayFilter?Se(t.filter,t.replayFilter()):t.filter;if(t.or){var o={},s=function(t,n,r){if(!i||i(n,r,function(t){return n.stop(t)},function(t){return n.fail(t)})){var s=n.primaryKey,a=""+s;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(s)),u(o,a)||(o[a]=!0,e(t,n,r))}};return Promise.all([t.or._iterate(s,n),Qe(Ke(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return Qe(Ke(t,r,n),Se(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Qe(t,e,n,r){var i=Xt(r?function(t,e,i){return n(r(t),e,i)}:n);return t.then(function(t){if(t)return t.start(function(){var n=function(){return t.continue()};e&&!e(t,function(t){return n=t},function(e){t.stop(e),n=rt},function(e){t.fail(e),n=rt})||i(t.value,t,function(t){return n=t}),n()})})}var Je=function(){function t(){}return t.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,ge.bind(null,n.error)):n.table._trans("readonly",t).then(e)},t.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,ge.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},t.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=Se(e.algorithm,t)},t.prototype._iterate=function(t,e){return Ye(this._ctx,t,e,this._ctx.table.core)},t.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&a(n,t),e._ctx=n,e},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(t){var e=this._ctx;return this._read(function(n){return Ye(e,t,n,e.table.core)})},t.prototype.count=function(t){var e=this;return this._read(function(t){var n=e._ctx,r=n.table.core;if(We(n,!0))return r.count({trans:t,query:{index:Ue(n,r.schema),range:n.range}}).then(function(t){return Math.min(t,n.limit)});var i=0;return Ye(n,function(){return++i,!1},t,r).then(function(){return i})}).then(t)},t.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),r=n[0],i=n.length-1;function o(t,e){return e?o(t[n[e]],e-1):t[r]}var s="next"===this._ctx.dir?1:-1;function a(t,e){return Pe(o(t,i),o(e,i))*s}return this.toArray(function(t){return t.sort(a)}).then(e)},t.prototype.toArray=function(t){var e=this;return this._read(function(t){var n=e._ctx;if("next"===n.dir&&We(n,!0)&&n.limit>0){var r=n.valueMapper,i=Ue(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then(function(t){var e=t.result;return r?e.map(r):e})}var o=[];return Ye(n,function(t){return o.push(t)},t,n.table.core).then(function(){return o})},t)},t.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,We(e)?Ve(e,function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n(function(){t.advance(e),e=0}),!1))}}):Ve(e,function(){var e=t;return function(){return--e<0}})),this},t.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Ve(this._ctx,function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}},!0),this},t.prototype.until=function(t,e){return He(this._ctx,function(n,r,i){return!t(n.value)||(r(i),e)}),this},t.prototype.first=function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},t.prototype.last=function(t){return this.reverse().first(t)},t.prototype.filter=function(t){return He(this._ctx,function(e){return t(e.value)}),qe(this._ctx,t),this},t.prototype.and=function(t){return this.filter(t)},t.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},t.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.key,n)})},t.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},t.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.primaryKey,n)})},t.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.key)}).then(function(){return n}).then(t)},t.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&We(e,!0)&&e.limit>0)return this._read(function(t){var n=Ue(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})}).then(function(t){return t.result}).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.primaryKey)}).then(function(){return n}).then(t)},t.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},t.prototype.firstKey=function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},t.prototype.lastKey=function(t){return this.reverse().firstKey(t)},t.prototype.distinct=function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return He(this._ctx,function(t){var e=t.primaryKey.toString(),r=u(n,e);return n[e]=!0,!r}),this},t.prototype.modify=function(t){var e=this,n=this._ctx;return this._write(function(r){var i;i="function"==typeof t?t:function(e){return $e(e,t)};var s=n.table.core,a=s.schema.primaryKey,l=a.outbound,c=a.extractKey,u=200,d=e.db._options.modifyChunkSize;d&&(u="object"==typeof d?d[s.name]||d["*"]||200:d);var h=[],f=0,p=[],g=function(t,e){var n=e.failures,r=e.numFailures;f+=t-r;for(var i=0,s=o(n);i<s.length;i++){var a=s[i];h.push(n[a])}},m=t===Xe;return e.clone().primaryKeys().then(function(e){var o=We(n)&&n.limit===1/0&&("function"!=typeof t||m)&&{index:n.index,range:n.range},a=function(d){var h=Math.min(u,e.length-d),f=e.slice(d,d+h);return(m?Promise.resolve([]):s.getMany({trans:r,keys:f,cache:"immutable"})).then(function(p){var y=[],b=[],x=l?[]:null,v=m?f:[];if(!m)for(var w=0;w<h;++w){var k=p[w],_={value:R(k),primKey:e[d+w]};!1!==i.call(_,_.value,_)&&(null==_.value?v.push(e[d+w]):l||0===Pe(c(k),c(_.value))?(b.push(_.value),l&&x.push(e[d+w])):(v.push(e[d+w]),y.push(_.value)))}return Promise.resolve(y.length>0&&s.mutate({trans:r,type:"add",values:y}).then(function(t){for(var e in t.failures)v.splice(parseInt(e),1);g(y.length,t)})).then(function(){return(b.length>0||o&&"object"==typeof t)&&s.mutate({trans:r,type:"put",keys:x,values:b,criteria:o,changeSpec:"function"!=typeof t&&t,isAdditionalChunk:d>0}).then(function(t){return g(b.length,t)})}).then(function(){return(v.length>0||o&&m)&&s.mutate({trans:r,type:"delete",keys:v,criteria:o,isAdditionalChunk:d>0}).then(function(t){return Be(n.table,v,t)}).then(function(t){return g(v.length,t)})}).then(function(){return e.length>d+h&&a(d+u)})})};return a(0).then(function(){if(h.length>0)throw new Q("Error modifying one or more objects",h,f,p);return e.length})})})},t.prototype.delete=function(){var t=this._ctx,e=t.range;return!We(t)||t.table.schema.yProps||!t.isPrimKey&&3!==e.type?this.modify(Xe):this._write(function(n){var r=t.table.core.schema.primaryKey,i=e;return t.table.core.count({trans:n,query:{index:r,range:i}}).then(function(e){return t.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(t){var n=t.failures,r=t.numFailures;if(r)throw new Q("Could not delete some values",Object.keys(n).map(function(t){return n[t]}),e-r);return e-r})})})},t}(),Xe=function(t,e){return e.value=null};function Ge(t){return Fe(Je.prototype,function(e,n){this.db=t;var r=Ae,i=null;if(n)try{r=n()}catch(t){i=t}var o=e._ctx,s=o.table,a=s.hook.reading.fire;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:a!==it?a:null}})}function Ze(t,e){return t<e?-1:t===e?0:1}function tn(t,e){return t>e?-1:t===e?0:1}function en(t,e,n){var r=t instanceof un?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function nn(t){return new t.Collection(t,function(){return cn("")}).limit(0)}function rn(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function on(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function sn(t,e,n,r,i,o){for(var s=Math.min(t.length,r.length),a=-1,l=0;l<s;++l){var c=e[l];if(c!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],c)<0&&(a=l)}return s<r.length&&"next"===o?t+n.substr(t.length):s<t.length&&"prev"===o?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function an(t,e,n,r){var i,o,s,a,l,c,u,d=n.length;if(!n.every(function(t){return"string"==typeof t}))return en(t,we);function h(t){i=rn(t),o=on(t),s="next"===t?Ze:tn;var e=n.map(function(t){return{lower:o(t),upper:i(t)}}).sort(function(t,e){return s(t.lower,e.lower)});a=e.map(function(t){return t.upper}),l=e.map(function(t){return t.lower}),c=t,u="next"===t?"":r}h("next");var f=new t.Collection(t,function(){return ln(a[0],l[d-1]+r)});f._ondirectionchange=function(t){h(t)};var p=0;return f._addAlgorithm(function(t,n,r){var i=t.key;if("string"!=typeof i)return!1;var h=o(i);if(e(h,l,p))return!0;for(var f=null,g=p;g<d;++g){var m=sn(i,h,a[g],l[g],s,c);null===m&&null===f?p=g+1:(null===f||s(f,m)>0)&&(f=m)}return n(null!==f?function(){t.continue(f+u)}:r),!1}),f}function ln(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function cn(t){return{type:1,lower:t,upper:t}}var un=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(t,e,n,r){n=!1!==n,r=!0===r;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(n||r)&&(!n||!r)?nn(this):new this.Collection(this,function(){return ln(t,e,!n,!r)})}catch(t){return en(this,ve)}},t.prototype.equals=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return cn(t)})},t.prototype.above=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(t,void 0,!0)})},t.prototype.aboveOrEqual=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(t,void 0,!1)})},t.prototype.below=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(void 0,t,!1,!0)})},t.prototype.belowOrEqual=function(t){return null==t?en(this,ve):new this.Collection(this,function(){return ln(void 0,t)})},t.prototype.startsWith=function(t){return"string"!=typeof t?en(this,we):this.between(t,t+be,!0,!0)},t.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):an(this,function(t,e){return 0===t.indexOf(e[0])},[t],be)},t.prototype.equalsIgnoreCase=function(t){return an(this,function(t,e){return t===e[0]},[t],"")},t.prototype.anyOfIgnoreCase=function(){var t=W.apply(N,arguments);return 0===t.length?nn(this):an(this,function(t,e){return-1!==e.indexOf(t)},t,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var t=W.apply(N,arguments);return 0===t.length?nn(this):an(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},t,be)},t.prototype.anyOf=function(){var t=this,e=W.apply(N,arguments),n=this._cmp;try{e.sort(n)}catch(t){return en(this,ve)}if(0===e.length)return nn(this);var r=new this.Collection(this,function(){return ln(e[0],e[e.length-1])});r._ondirectionchange=function(r){n="next"===r?t._ascending:t._descending,e.sort(n)};var i=0;return r._addAlgorithm(function(t,r,o){for(var s=t.key;n(s,e[i])>0;)if(++i===e.length)return r(o),!1;return 0===n(s,e[i])||(r(function(){t.continue(e[i])}),!1)}),r},t.prototype.notEqual=function(t){return this.inAnyRange([[xe,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var t=W.apply(N,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return en(this,ve)}var e=t.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[xe,e]]},null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(t,e){var n=this,r=this._cmp,i=this._ascending,o=this._descending,s=this._min,a=this._max;if(0===t.length)return nn(this);if(!t.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&i(t[0],t[1])<=0}))return en(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Z.InvalidArgument);var l=!e||!1!==e.includeLowers,c=e&&!0===e.includeUppers;function u(t,e){for(var n=0,i=t.length;n<i;++n){var o=t[n];if(r(e[0],o[1])<0&&r(e[1],o[0])>0){o[0]=s(o[0],e[0]),o[1]=a(o[1],e[1]);break}}return n===i&&t.push(e),t}var d,h=i;function f(t,e){return h(t[0],e[0])}try{(d=t.reduce(u,[])).sort(f)}catch(t){return en(this,ve)}var p=0,g=c?function(t){return i(t,d[p][1])>0}:function(t){return i(t,d[p][1])>=0},m=l?function(t){return o(t,d[p][0])>0}:function(t){return o(t,d[p][0])>=0};function y(t){return!g(t)&&!m(t)}var b=g,x=new this.Collection(this,function(){return ln(d[0][0],d[d.length-1][1],!l,!c)});return x._ondirectionchange=function(t){"next"===t?(b=g,h=i):(b=m,h=o),d.sort(f)},x._addAlgorithm(function(t,e,r){for(var o=t.key;b(o);)if(++p===d.length)return e(r),!1;return!!y(o)||(0===n._cmp(o,d[p][1])||0===n._cmp(o,d[p][0])||e(function(){h===i?t.continue(d[p][0]):t.continue(d[p][1])}),!1)}),x},t.prototype.startsWithAnyOf=function(){var t=W.apply(N,arguments);return t.every(function(t){return"string"==typeof t})?0===t.length?nn(this):this.inAnyRange(t.map(function(t){return[t,t+be]})):en(this,"startsWithAnyOf() only works with strings")},t}();function dn(t){return Fe(un.prototype,function(e,n,r){if(this.db=t,this._ctx={table:e,index:":id"===n?null:n,or:r},this._cmp=this._ascending=Pe,this._descending=function(t,e){return Pe(e,t)},this._max=function(t,e){return Pe(t,e)>0?t:e},this._min=function(t,e){return Pe(t,e)<0?t:e},this._IDBKeyRange=t._deps.IDBKeyRange,!this._IDBKeyRange)throw new Z.MissingAPI})}function hn(t){return Xt(function(e){return fn(e),t(e.target.error),!1})}function fn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var pn="storagemutated",gn="x-storagemutated-1",mn=ze(null,pn),yn=function(){function t(){}return t.prototype._lock=function(){return v(!Et.global),++this._reculock,1!==this._reculock||Et.global||(Et.lockOwnerFor=this),this},t.prototype._unlock=function(){if(v(!Et.global),0===--this._reculock)for(Et.global||(Et.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{he(t[1],t[0])}catch(t){}}return this},t.prototype._locked=function(){return this._reculock&&Et.lockOwnerFor!==this},t.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(v(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Z.DatabaseClosed(r);case"MissingAPIError":throw new Z.MissingAPI(r.message,r);default:throw new Z.OpenFailed(r)}if(!this.active)throw new Z.TransactionInactive;return v(null===this._completion._state),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Xt(function(n){fn(n),e._reject(t.error)}),t.onabort=Xt(function(n){fn(n),e.active&&e._reject(new Z.Abort(t.error)),e.active=!1,e.on("abort").fire(n)}),t.oncomplete=Xt(function(){e.active=!1,e._resolve(),"mutatedParts"in t&&mn.storagemutated.fire(t.mutatedParts)}),this},t.prototype._promise=function(t,e,n){var r=this;if("readwrite"===t&&"readwrite"!==this.mode)return ge(new Z.ReadOnly("Transaction is readonly"));if(!this.active)return ge(new Z.TransactionInactive);if(this._locked())return new Bt(function(i,o){r._blockedFuncs.push([function(){r._promise(t,e,n).then(i,o)},Et])});if(n)return ie(function(){var t=new Bt(function(t,n){r._lock();var i=e(t,n,r);i&&i.then&&i.then(t,n)});return t.finally(function(){return r._unlock()}),t._lib=!0,t});var i=new Bt(function(t,n){var i=e(t,n,r);i&&i.then&&i.then(t,n)});return i._lib=!0,i},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(t){var e=this._root(),n=Bt.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return n});else{e._waitingFor=n,e._waitingQueue=[];var r=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(r.get(-1/0).onsuccess=t)}()}var i=e._waitingFor;return new Bt(function(t,r){n.then(function(n){return e._waitingQueue.push(Xt(t.bind(null,n)))},function(t){return e._waitingQueue.push(Xt(r.bind(null,t)))}).finally(function(){e._waitingFor===i&&(e._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Z.Abort))},t.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(u(e,t))return e[t];var n=this.schema[t];if(!n)throw new Z.NotFound("Table "+t+" not part of transaction");var r=new this.db.Table(t,n,this);return r.core=this.db.core.table(t),e[t]=r,r},t}();function bn(t){return Fe(yn.prototype,function(e,n,r,i,o){var s=this;"readonly"!==e&&n.forEach(function(t){var e,i=null===(e=r[t])||void 0===e?void 0:e.yProps;i&&(n=n.concat(i.map(function(t){return t.updatesTable})))}),this.db=t,this.mode=e,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=ze(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Bt(function(t,e){s._resolve=t,s._reject=e}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(t){var e=s.active;return s.active=!1,s.on.error.fire(t),s.parent?s.parent._reject(t):e&&s.idbtrans&&s.idbtrans.abort(),ge(t)})})}function xn(t,e,n,r,i,o,s,a){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+vn(e),type:a}}function vn(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function wn(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:k(n,function(t){return[t.name,t]})}}function kn(t){return 1===t.length?t[0]:t}var _n=function(t){try{return t.only([[]]),_n=function(){return[[]]},[[]]}catch(t){return _n=function(){return be},be}};function Cn(t){return null==t?function(){}:"string"==typeof t?Mn(t):function(e){return _(e,t)}}function Mn(t){return 1===t.split(".").length?function(e){return e[t]}:function(e){return _(e,t)}}function Sn(t){return[].slice.call(t)}var An=0;function Dn(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function Tn(t,e,n){function r(t,e){var n=Sn(t.objectStoreNames);return{schema:{name:t.name,tables:n.map(function(t){return e.objectStore(t)}).map(function(t){var e=t.keyPath,n=t.autoIncrement,r=s(e),i=null==e,o={},a={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:e,autoIncrement:n,unique:!0,extractKey:Cn(e)},indexes:Sn(t.indexNames).map(function(e){return t.index(e)}).map(function(t){var e=t.name,n=t.unique,r=t.multiEntry,i=t.keyPath,a={name:e,compound:s(i),keyPath:i,unique:n,multiEntry:r,extractKey:Cn(i)};return o[Dn(i)]=a,a}),getIndexByKeyPath:function(t){return o[Dn(t)]}};return o[":id"]=a.primaryKey,null!=e&&(o[Dn(e)]=a.primaryKey),a})},hasGetAll:n.length>0&&"getAll"in e.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=t.lower,r=t.upper,i=t.lowerOpen,o=t.upperOpen;return void 0===n?void 0===r?null:e.upperBound(r,!!o):void 0===r?e.lowerBound(n,!!i):e.bound(n,r,!!i,!!o)}function o(t){var e=t.name;function n(t){var n=t.trans,r=t.type,o=t.keys,s=t.values,a=t.range;return new Promise(function(t,l){t=Xt(t);var c=n.objectStore(e),u=null==c.keyPath,d="put"===r||"add"===r;if(!d&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var h,f=(o||s||{length:1}).length;if(o&&s&&o.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return t({numFailures:0,failures:{},results:[],lastResult:void 0});var p=[],g=[],m=0,y=function(t){++m,fn(t)};if("deleteRange"===r){if(4===a.type)return t({numFailures:m,failures:g,results:[],lastResult:void 0});3===a.type?p.push(h=c.clear()):p.push(h=c.delete(i(a)))}else{var b=d?u?[s,o]:[s,null]:[o,null],x=b[0],v=b[1];if(d)for(var w=0;w<f;++w)p.push(h=v&&void 0!==v[w]?c[r](x[w],v[w]):c[r](x[w])),h.onerror=y;else for(w=0;w<f;++w)p.push(h=c[r](x[w])),h.onerror=y}var k=function(e){var n=e.target.result;p.forEach(function(t,e){return null!=t.error&&(g[e]=t.error)}),t({numFailures:m,failures:g,results:"delete"===r?o:p.map(function(t){return t.result}),lastResult:n})};h.onerror=function(t){y(t),k(t)},h.onsuccess=k})}function r(t){var n=t.trans,r=t.values,o=t.query,s=t.reverse,a=t.unique;return new Promise(function(t,l){t=Xt(t);var c=o.index,u=o.range,d=n.objectStore(e),h=c.isPrimaryKey?d:d.index(c.name),f=s?a?"prevunique":"prev":a?"nextunique":"next",p=r||!("openKeyCursor"in h)?h.openCursor(i(u),f):h.openKeyCursor(i(u),f);p.onerror=hn(l),p.onsuccess=Xt(function(e){var r=p.result;if(r){r.___id=++An,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var s=r.advance.bind(r),a=function(){throw new Error("Cursor not started")},c=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=a,r.fail=Xt(l),r.next=function(){var t=this,e=1;return this.start(function(){return e--?t.continue():t.stop()}).then(function(){return t})},r.start=function(t){var e=new Promise(function(t,e){t=Xt(t),p.onerror=hn(e),r.fail=e,r.stop=function(e){r.stop=r.continue=r.continuePrimaryKey=r.advance=c,t(e)}}),n=function(){if(p.result)try{t()}catch(t){r.fail(t)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Xt(function(t){p.onsuccess=n,n()}),r.continue=i,r.continuePrimaryKey=o,r.advance=s,n(),e},t(r)}else t(null)},l)})}function o(t){return function(n){return new Promise(function(r,o){r=Xt(r);var s=n.trans,a=n.values,l=n.limit,c=n.query,u=l===1/0?void 0:l,d=c.index,h=c.range,f=s.objectStore(e),p=d.isPrimaryKey?f:f.index(d.name),g=i(h);if(0===l)return r({result:[]});if(t){var m=a?p.getAll(g,u):p.getAllKeys(g,u);m.onsuccess=function(t){return r({result:t.target.result})},m.onerror=hn(o)}else{var y=0,b=a||!("openKeyCursor"in p)?p.openCursor(g):p.openKeyCursor(g),x=[];b.onsuccess=function(t){var e=b.result;return e?(x.push(a?e.value:e.primaryKey),++y===l?r({result:x}):void e.continue()):r({result:x})},b.onerror=hn(o)}})}}return{name:e,schema:t,mutate:n,getMany:function(t){var n=t.trans,r=t.keys;return new Promise(function(t,i){t=Xt(t);for(var o,s=n.objectStore(e),a=r.length,l=new Array(a),c=0,u=0,d=function(e){var n=e.target;l[n._pos]=n.result,++u===c&&t(l)},h=hn(i),f=0;f<a;++f)null!=r[f]&&((o=s.get(r[f]))._pos=f,o.onsuccess=d,o.onerror=h,++c);0===c&&t(l)})},get:function(t){var n=t.trans,r=t.key;return new Promise(function(t,i){t=Xt(t);var o=n.objectStore(e).get(r);o.onsuccess=function(e){return t(e.target.result)},o.onerror=hn(i)})},query:o(c),openCursor:r,count:function(t){var n=t.query,r=t.trans,o=n.index,s=n.range;return new Promise(function(t,n){var a=r.objectStore(e),l=o.isPrimaryKey?a:a.index(o.name),c=i(s),u=c?l.count(c):l.count();u.onsuccess=Xt(function(e){return t(e.target.result)}),u.onerror=hn(n)})}}}var a=r(t,n),l=a.schema,c=a.hasGetAll,u=l.tables.map(function(t){return o(t)}),d={};return u.forEach(function(t){return d[t.name]=t}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!d[t])throw new Error("Table '".concat(t,"' not found"));return d[t]},MIN_KEY:-1/0,MAX_KEY:_n(e),schema:l}}function Pn(t,e){return e.reduce(function(t,e){var r=e.create;return n(n({},t),r(t))},t)}function En(t,e,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:Pn(Tn(e,i,r),t.dbcore)}}function Ln(t,e){var n=e.db,r=En(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(function(e){var n=e.name;t.core.schema.tables.some(function(t){return t.name===n})&&(e.core=t.core.table(n),t[n]instanceof t.Table&&(t[n].core=e.core))})}function On(t,e,n,r){n.forEach(function(n){var i=r[n];e.forEach(function(e){var r=m(e,n);(!r||"value"in r&&void 0===r.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?f(e,n,{get:function(){return this.table(n)},set:function(t){h(this,n,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[n]=new t.Table(n,i))})})}function Rn(t,e){e.forEach(function(e){for(var n in e)e[n]instanceof t.Table&&delete e[n]})}function Bn(t,e){return t._cfg.version-e._cfg.version}function jn(t,e,n,r){var i=t._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=wn("$meta",Qn("")[0],[]),t._storeNames.push("$meta"));var s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);var a=s._reject.bind(s),l=Et.transless||Et;ie(function(){if(Et.trans=s,Et.transless=l,0!==e)return Ln(t,n),In(t,s,e).then(function(e){return zn(t,e,s,n)}).catch(a);o(i).forEach(function(t){Nn(n,t,i[t].primKey,i[t].indexes)}),Ln(t,n),Bt.follow(function(){return t.on.populate.fire(s)}).catch(a)})}function $n(t,e){Wn(t._dbSchema,e),e.db.version%10!=0||e.objectStoreNames.contains("$meta")||e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var n=qn(t,t.idbdb,e);Yn(t,t._dbSchema,e);for(var r=function(t){if(t.change.length||t.recreate)return console.warn("Unable to patch indexes of table ".concat(t.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=e.objectStore(t.name);t.add.forEach(function(e){ht&&console.debug("Dexie upgrade patch: Creating missing index ".concat(t.name,".").concat(e.src)),Vn(n,e)})},i=0,o=Fn(n,t._dbSchema).change;i<o.length;i++){var s=r(o[i]);if("object"==typeof s)return s.value}}function In(t,e,n){return e.storeNames.includes("$meta")?e.table("$meta").get("version").then(function(t){return null!=t?t:n}):Bt.resolve(n)}function zn(t,e,n,r){var i=[],s=t._versions,a=t._dbSchema=qn(t,t.idbdb,r),l=s.filter(function(t){return t._cfg.version>=e});if(0===l.length)return Bt.resolve();function c(){return i.length?Bt.resolve(i.shift()(n.idbtrans)).then(c):Bt.resolve()}return l.forEach(function(s){i.push(function(){var i=a,l=s._cfg.dbschema;Yn(t,i,r),Yn(t,l,r),a=t._dbSchema=l;var c=Fn(i,l);c.add.forEach(function(t){Nn(r,t[0],t[1].primKey,t[1].indexes)}),c.change.forEach(function(t){if(t.recreate)throw new Z.Upgrade("Not yet support for changing primary key");var e=r.objectStore(t.name);t.add.forEach(function(t){return Vn(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),Vn(e,t)}),t.del.forEach(function(t){return e.deleteIndex(t)})});var u=s._cfg.contentUpgrade;if(u&&s._cfg.version>e){Ln(t,r),n._memoizedTables={};var d=S(l);c.del.forEach(function(t){d[t]=i[t]}),Rn(t,[t.Transaction.prototype]),On(t,[t.Transaction.prototype],o(d),d),n.schema=d;var h,f=H(u);f&&oe();var p=Bt.follow(function(){if((h=u(n))&&f){var t=se.bind(null,null);h.then(t,t)}});return h&&"function"==typeof h.then?Bt.resolve(h):p.then(function(){return h})}}),i.push(function(e){Hn(s._cfg.dbschema,e),Rn(t,[t.Transaction.prototype]),On(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),n.schema=t._dbSchema}),i.push(function(e){t.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(t.idbdb.version/10)===s._cfg.version?(t.idbdb.deleteObjectStore("$meta"),delete t._dbSchema.$meta,t._storeNames=t._storeNames.filter(function(t){return"$meta"!==t})):e.objectStore("$meta").put(s._cfg.version,"version"))})}),c().then(function(){Wn(a,r)})}function Fn(t,e){var n,r={del:[],add:[],change:[]};for(n in t)e[n]||r.del.push(n);for(n in e){var i=t[n],o=e[n];if(i){var s={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto)s.recreate=!0,r.change.push(s);else{var a=i.idxByName,l=o.idxByName,c=void 0;for(c in a)l[c]||s.del.push(c);for(c in l){var u=a[c],d=l[c];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(s.del.length>0||s.add.length>0||s.change.length>0)&&r.change.push(s)}}else r.add.push([n,o])}return r}function Nn(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(t){return Vn(i,t)}),i}function Wn(t,e){o(t).forEach(function(n){e.db.objectStoreNames.contains(n)||(ht&&console.debug("Dexie: Creating missing table",n),Nn(e,n,t[n].primKey,t[n].indexes))})}function Hn(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return null==t[n]&&e.db.deleteObjectStore(n)})}function Vn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function qn(t,e,n){var r={};return b(e.objectStoreNames,0).forEach(function(t){for(var e=n.objectStore(t),i=e.keyPath,o=xn(vn(i),i||"",!0,!1,!!e.autoIncrement,i&&"string"!=typeof i,!0),s=[],a=0;a<e.indexNames.length;++a){var l=e.index(e.indexNames[a]);i=l.keyPath;var c=xn(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(c)}r[t]=wn(t,o,s)}),r}function Un(t,e,n){t.verno=e.version/10;var r=t._dbSchema=qn(t,e,n);t._storeNames=b(e.objectStoreNames,0),On(t,[t._allTables],o(r),r)}function Kn(t,e){var n=Fn(qn(t,t.idbdb,e),t._dbSchema);return!(n.add.length||n.change.some(function(t){return t.add.length||t.change.length}))}function Yn(t,e,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var s=r[o],a=n.objectStore(s);t._hasGetAll="getAll"in a;for(var l=0;l<a.indexNames.length;++l){var c=a.indexNames[l],u=a.index(c).keyPath,d="string"==typeof u?u:"["+b(u).join("+")+"]";if(e[s]){var h=e[s].idxByName[d];h&&(h.name=c,delete e[s].idxByName[d],e[s].idxByName[c]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Qn(t){return t.split(",").map(function(t,e){var n,r=t.split(":"),i=null===(n=r[1])||void 0===n?void 0:n.trim(),o=(t=r[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return xn(o,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),s(a),0===e,i)})}var Jn,Xn=function(){function t(){}return t.prototype._createTableSchema=function(t,e,n){return wn(t,e,n)},t.prototype._parseIndexSyntax=function(t){return Qn(t)},t.prototype._parseStoresSpec=function(t,e){var n=this;o(t).forEach(function(r){if(null!==t[r]){var i=n._parseIndexSyntax(t[r]),o=i.shift();if(!o)throw new Z.Schema("Invalid schema for table "+r+": "+t[r]);if(o.unique=!0,o.multi)throw new Z.Schema("Primary key cannot be multiEntry*");i.forEach(function(t){if(t.auto)throw new Z.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new Z.Schema("Index must have a name and cannot be an empty string")});var s=n._createTableSchema(r,o,i);e[r]=s}})},t.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,t):t;var n=e._versions,r={},i={};return n.forEach(function(t){a(r,t._cfg.storesSource),i=t._cfg.dbschema={},t._parseStoresSpec(r,i)}),e._dbSchema=i,Rn(e,[e._allTables,e,e.Transaction.prototype]),On(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],o(i),i),e._storeNames=o(i),this},t.prototype.upgrade=function(t){return this._cfg.contentUpgrade=dt(this._cfg.contentUpgrade||rt,t),this},t}();function Gn(t){return Fe(Xn.prototype,function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new ti(_e,{addons:[],indexedDB:t,IDBKeyRange:e})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function tr(t){return t&&"function"==typeof t.databases}function er(t){var e=t.indexedDB,n=t.IDBKeyRange;return tr(e)?Promise.resolve(e.databases()).then(function(t){return t.map(function(t){return t.name}).filter(function(t){return t!==_e})}):Zn(e,n).toCollection().primaryKeys()}function nr(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!tr(n)&&e!==_e&&Zn(n,r).put({name:e}).catch(rt)}function rr(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!tr(n)&&e!==_e&&Zn(n,r).delete(e).catch(rt)}function ir(t){return ie(function(){return Et.letThrough=!0,t()})}function or(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function sr(t){return!("from"in t)}var ar=function(t,e){if(!this){var n=new ar;return t&&"d"in t&&a(n,t),n}a(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function lr(t,e,n){var r=Pe(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(sr(t))return a(t,{from:e,to:n,d:1});var i=t.l,o=t.r;if(Pe(n,t.from)<0)return i?lr(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},hr(t);if(Pe(e,t.to)>0)return o?lr(o,e,n):t.r={from:e,to:n,d:1,l:null,r:null},hr(t);Pe(e,t.from)<0&&(t.from=e,t.l=null,t.d=o?o.d+1:1),Pe(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var s=!t.r;i&&!t.l&&cr(t,i),o&&s&&cr(t,o)}}function cr(t,e){function n(t,e){var r=e.from,i=e.to,o=e.l,s=e.r;lr(t,r,i),o&&n(t,o),s&&n(t,s)}sr(e)||n(t,e)}function ur(t,e){var n=dr(e),r=n.next();if(r.done)return!1;for(var i=r.value,o=dr(t),s=o.next(i.from),a=s.value;!r.done&&!s.done;){if(Pe(a.from,i.to)<=0&&Pe(a.to,i.from)>=0)return!0;Pe(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(s=o.next(i.from)).value}return!1}function dr(t){var e=sr(t)?null:{s:0,n:t};return{next:function(t){for(var n=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&Pe(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||Pe(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function hr(t){var e,r,i=((null===(e=t.r)||void 0===e?void 0:e.d)||0)-((null===(r=t.l)||void 0===r?void 0:r.d)||0),o=i>1?"r":i<-1?"l":"";if(o){var s="r"===o?"l":"r",a=n({},t),l=t[o];t.from=l.from,t.to=l.to,t[o]=l[o],a[o]=l[s],t[s]=a,a.d=fr(a)}t.d=fr(t)}function fr(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}function pr(t,e){return o(e).forEach(function(n){t[n]?cr(t[n],e[n]):t[n]=E(e[n])}),t}function gr(t,e){return t.all||e.all||Object.keys(t).some(function(n){return e[n]&&ur(e[n],t[n])})}d(ar.prototype,((Jn={add:function(t){return cr(this,t),this},addKey:function(t){return lr(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(t){return lr(e,t,t)}),this},hasKey:function(t){var e=dr(this).next(t).value;return e&&Pe(e.from,t)<=0&&Pe(e.to,t)>=0}})[I]=function(){return dr(this)},Jn));var mr={},yr={},br=!1;function xr(t,e){pr(yr,t),br||(br=!0,setTimeout(function(){br=!1;var t=yr;yr={},vr(t,!1)},0))}function vr(t,e){void 0===e&&(e=!1);var n=new Set;if(t.all)for(var r=0,i=Object.values(mr);r<i.length;r++)wr(a=i[r],t,n,e);else for(var o in t){var s=/^idb\:\/\/(.*)\/(.*)\//.exec(o);if(s){var a,l=s[1],c=s[2];(a=mr["idb://".concat(l,"/").concat(c)])&&wr(a,t,n,e)}}n.forEach(function(t){return t()})}function wr(t,e,n,r){for(var i=[],o=0,s=Object.entries(t.queries.query);o<s.length;o++){for(var a=s[o],l=a[0],c=[],u=0,d=a[1];u<d.length;u++){var h=d[u];gr(e,h.obsSet)?h.subscribers.forEach(function(t){return n.add(t)}):r&&c.push(h)}r&&i.push([l,c])}if(r)for(var f=0,p=i;f<p.length;f++){var g=p[f];l=g[0],c=g[1],t.queries.query[l]=c}}function kr(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?ge(e.dbOpenError):t});e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller,i=Math.round(10*t.verno),o=!1;function s(){if(e.openCanceller!==r)throw new Z.DatabaseClosed("db.open() was cancelled")}var a=e.dbReadyResolve,l=null,c=!1,u=function(){return new Bt(function(r,a){if(s(),!n)throw new Z.MissingAPI;var d=t.name,h=e.autoSchema||!i?n.open(d):n.open(d,i);if(!h)throw new Z.MissingAPI;h.onerror=hn(a),h.onblocked=Xt(t._fireOnBlocked),h.onupgradeneeded=Xt(function(r){if(l=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=fn,l.abort(),h.result.close();var i=n.deleteDatabase(d);i.onsuccess=i.onerror=Xt(function(){a(new Z.NoSuchDatabase("Database ".concat(d," doesnt exist")))})}else{l.onerror=hn(a);var s=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;c=s<1,t.idbdb=h.result,o&&$n(t,l),jn(t,s/10,l,a)}},a),h.onsuccess=Xt(function(){l=null;var n=t.idbdb=h.result,s=b(n.objectStoreNames);if(s.length>0)try{var a=n.transaction(kn(s),"readonly");if(e.autoSchema)Un(t,n,a);else if(Yn(t,t._dbSchema,a),!Kn(t,a)&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),n.close(),i=n.version+1,o=!0,r(u());Ln(t,a)}catch(t){}ke.push(t),n.onversionchange=Xt(function(n){e.vcFired=!0,t.on("versionchange").fire(n)}),n.onclose=Xt(function(){t.close({disableAutoOpen:!1})}),c&&nr(t._deps,d),r()},a)}).catch(function(t){switch(null==t?void 0:t.name){case"UnknownError":if(e.PR1398_maxLoop>0)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),u();break;case"VersionError":if(i>0)return i=0,u()}return Bt.reject(t)})};return Bt.race([r,("undefined"==typeof navigator?Bt.resolve():or()).then(u)]).then(function(){return s(),e.onReadyBeingFired=[],Bt.resolve(ir(function(){return t.on.ready.fire(t.vip)})).then(function n(){if(e.onReadyBeingFired.length>0){var r=e.onReadyBeingFired.reduce(dt,rt);return e.onReadyBeingFired=[],Bt.resolve(ir(function(){return r(t.vip)})).then(n)}})}).finally(function(){e.openCanceller===r&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)}).catch(function(n){e.dbOpenError=n;try{l&&l.abort()}catch(t){}return r===e.openCanceller&&t._close(),ge(n)}).finally(function(){e.openComplete=!0,a()}).then(function(){if(c){var e={};t.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(e["idb://".concat(t.name,"/").concat(n.name,"/").concat(r.name)]=new ar(-1/0,[[[]]]))}),e["idb://".concat(t.name,"/").concat(n.name,"/")]=e["idb://".concat(t.name,"/").concat(n.name,"/:dels")]=new ar(-1/0,[[[]]])}),mn(pn).fire(e),vr(e,!0)}return t})}function _r(t){var e=function(e){return t.next(e)},n=function(e){return t.throw(e)},r=o(e),i=o(n);function o(t){return function(e){var n=t(e),o=n.value;return n.done?o:o&&"function"==typeof o.then?o.then(r,i):s(o)?Promise.all(o).then(r,i):r(o)}}return o(e)()}function Cr(t,e,n){var r=arguments.length;if(r<2)throw new Z.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,D(i),n]}function Mr(t,e,n,r,i){return Bt.resolve().then(function(){var o=Et.transless||Et,s=t._createTransaction(e,n,t._dbSchema,r);s.explicit=!0;var a={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(r){return r.name===X.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return Mr(t,e,n,null,i)})):ge(r)}var l,c=H(i);c&&oe();var u=Bt.follow(function(){if(l=i.call(s,s))if(c){var t=se.bind(null,null);l.then(t,t)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=_r(l))},a);return(l&&"function"==typeof l.then?Bt.resolve(l).then(function(t){return s.active?t:ge(new Z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return l})).then(function(t){return r&&s._resolve(),s._completion.then(function(){return t})}).catch(function(t){return s._reject(t),ge(t)})})}function Sr(t,e,n){for(var r=s(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function Ar(t){return n(n({},t),{table:function(e){var r=t.table(e),i=r.schema,o={},s=[];function a(t,e,r){var i=Dn(t),l=o[i]=o[i]||[],c=null==t?0:"string"==typeof t?1:t.length,u=e>0,d=n(n({},r),{name:u?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:u,keyTail:e,keyLength:c,extractKey:Cn(t),unique:!u&&r.unique});return l.push(d),d.isPrimaryKey||s.push(d),c>1&&a(2===c?t[0]:t.slice(0,c-1),e+1,r),l.sort(function(t,e){return t.keyTail-e.keyTail}),d}var l=a(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[l];for(var c=0,u=i.indexes;c<u.length;c++){var d=u[c];a(d.keyPath,0,d)}function h(t){var e=o[Dn(t)];return e&&e[0]}function f(e,n){return{type:1===e.type?2:e.type,lower:Sr(e.lower,e.lowerOpen?t.MAX_KEY:t.MIN_KEY,n),lowerOpen:!0,upper:Sr(e.upper,e.upperOpen?t.MIN_KEY:t.MAX_KEY,n),upperOpen:!0}}function p(t){var e=t.query.index;return e.isVirtual?n(n({},t),{query:{index:e.lowLevelIndex,range:f(t.query.range,e.keyTail)}}):t}var g=n(n({},r),{schema:n(n({},i),{primaryKey:l,indexes:s,getIndexByKeyPath:h}),count:function(t){return r.count(p(t))},query:function(t){return r.query(p(t))},openCursor:function(e){var n=e.query.index,i=n.keyTail,o=n.isVirtual,s=n.keyLength;if(!o)return r.openCursor(e);function a(n){function r(r){null!=r?n.continue(Sr(r,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?n.continue(n.key.slice(0,s).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,i)):n.continue()}var o=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(e,r){n.continuePrimaryKey(Sr(e,t.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var t=n.key;return 1===s?t[0]:t.slice(0,s)}},value:{get:function(){return n.value}}});return o}return r.openCursor(p(e)).then(function(t){return t&&a(t)})}});return g}})}var Dr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ar};function Tr(t,e,n,r){return n=n||{},r=r||"",o(t).forEach(function(i){if(u(e,i)){var o=t[i],s=e[i];if("object"==typeof o&&"object"==typeof s&&o&&s){var a=$(o);a!==$(s)?n[r+i]=e[i]:"Object"===a?Tr(o,s,n,r+i+"."):o!==s&&(n[r+i]=e[i])}else o!==s&&(n[r+i]=e[i])}else n[r+i]=void 0}),o(e).forEach(function(i){u(t,i)||(n[r+i]=e[i])}),n}function Pr(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}var Er={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return n(n({},t),{table:function(e){var i=t.table(e),o=i.schema.primaryKey,s=n(n({},i),{mutate:function(t){var s=Et.trans,a=s.table(e).hook,l=a.deleting,c=a.creating,d=a.updating;switch(t.type){case"add":if(c.fire===rt)break;return s._promise("readwrite",function(){return h(t)},!0);case"put":if(c.fire===rt&&d.fire===rt)break;return s._promise("readwrite",function(){return h(t)},!0);case"delete":if(l.fire===rt)break;return s._promise("readwrite",function(){return h(t)},!0);case"deleteRange":if(l.fire===rt)break;return s._promise("readwrite",function(){return f(t)},!0)}return i.mutate(t);function h(t){var e=Et.trans,s=t.keys||Pr(o,t);if(!s)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?n(n({},t),{keys:s}):n({},t)).type&&(t.values=r([],t.values,!0)),t.keys&&(t.keys=r([],t.keys,!0)),Lr(i,t,s).then(function(n){var r=s.map(function(r,i){var s=n[i],a={onerror:null,onsuccess:null};if("delete"===t.type)l.fire.call(a,r,s,e);else if("add"===t.type||void 0===s){var h=c.fire.call(a,r,t.values[i],e);null==r&&null!=h&&(r=h,t.keys[i]=r,o.outbound||C(t.values[i],o.keyPath,r))}else{var f=Tr(s,t.values[i]),p=d.fire.call(a,f,r,s,e);if(p){var g=t.values[i];Object.keys(p).forEach(function(t){u(g,t)?g[t]=p[t]:C(g,t,p[t])})}}return a});return i.mutate(t).then(function(e){for(var i=e.failures,o=e.results,a=e.numFailures,l=e.lastResult,c=0;c<s.length;++c){var u=o?o[c]:s[c],d=r[c];null==u?d.onerror&&d.onerror(i[c]):d.onsuccess&&d.onsuccess("put"===t.type&&n[c]?t.values[c]:u)}return{failures:i,results:o,numFailures:a,lastResult:l}}).catch(function(t){return r.forEach(function(e){return e.onerror&&e.onerror(t)}),Promise.reject(t)})})}function f(t){return p(t.trans,t.range,1e4)}function p(t,e,r){return i.query({trans:t,values:!1,query:{index:o,range:e},limit:r}).then(function(i){var o=i.result;return h({type:"delete",keys:o,trans:t}).then(function(i){return i.numFailures>0?Promise.reject(i.failures[0]):o.length<r?{failures:[],numFailures:0,lastResult:void 0}:p(t,n(n({},e),{lower:o[o.length-1],lowerOpen:!0}),r)})})}}});return s}})}};function Lr(t,e,n){return"add"===e.type?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function Or(t,e,n){try{if(!e)return null;if(e.keys.length<t.length)return null;for(var r=[],i=0,o=0;i<e.keys.length&&o<t.length;++i)0===Pe(e.keys[i],t[o])&&(r.push(n?R(e.values[i]):e.values[i]),++o);return r.length===t.length?r:null}catch(t){return null}}var Rr={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var r=t.table(e);return n(n({},r),{getMany:function(t){if(!t.cache)return r.getMany(t);var e=Or(t.keys,t.trans._cache,"clone"===t.cache);return e?Bt.resolve(e):r.getMany(t).then(function(e){return t.trans._cache={keys:t.keys,values:"clone"===t.cache?R(e):e},e})},mutate:function(t){return"add"!==t.type&&(t.trans._cache=null),r.mutate(t)}})}}}};function Br(t,e){return"readonly"===t.trans.mode&&!!t.subscr&&!t.trans.explicit&&"disabled"!==t.trans.db._options.cache&&!e.schema.primaryKey.outbound}function jr(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var $r={stack:"dbcore",level:0,name:"Observability",create:function(t){var e=t.schema.name,r=new ar(t.MIN_KEY,t.MAX_KEY);return n(n({},t),{transaction:function(e,n,r){if(Et.subscr&&"readonly"!==n)throw new Z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Et.querier));return t.transaction(e,n,r)},table:function(i){var a=t.table(i),l=a.schema,c=l.primaryKey,u=l.indexes,d=c.extractKey,h=c.outbound,f=c.autoIncrement&&u.filter(function(t){return t.compound&&t.keyPath.includes(c.keyPath)}),p=n(n({},a),{mutate:function(n){var o,u,d=n.trans,h=n.mutatedParts||(n.mutatedParts={}),p=function(t){var n="idb://".concat(e,"/").concat(i,"/").concat(t);return h[n]||(h[n]=new ar)},g=p(""),m=p(":dels"),y=n.type,b="deleteRange"===n.type?[n.range]:"delete"===n.type?[n.keys]:n.values.length<50?[Pr(c,n).filter(function(t){return t}),n.values]:[],x=b[0],v=b[1],w=n.trans._cache;if(s(x)){g.addKeys(x);var k="delete"===y||x.length===v.length?Or(x,w):null;k||m.addKeys(x),(k||v)&&Ir(p,l,k,v)}else if(x){var _={from:null!==(o=x.lower)&&void 0!==o?o:t.MIN_KEY,to:null!==(u=x.upper)&&void 0!==u?u:t.MAX_KEY};m.add(_),g.add(_)}else g.add(r),m.add(r),l.indexes.forEach(function(t){return p(t.name).add(r)});return a.mutate(n).then(function(t){return!x||"add"!==n.type&&"put"!==n.type||(g.addKeys(t.results),f&&f.forEach(function(e){for(var r=n.values.map(function(t){return e.extractKey(t)}),i=e.keyPath.findIndex(function(t){return t===c.keyPath}),o=0,s=t.results.length;o<s;++o)r[o][i]=t.results[o];p(e.name).addKeys(r)})),d.mutatedParts=pr(d.mutatedParts||{},h),t})}}),g=function(e){var n,r,i=e.query,o=i.index,s=i.range;return[o,new ar(null!==(n=s.lower)&&void 0!==n?n:t.MIN_KEY,null!==(r=s.upper)&&void 0!==r?r:t.MAX_KEY)]},m={get:function(t){return[c,new ar(t.key)]},getMany:function(t){return[c,(new ar).addKeys(t.keys)]},count:g,query:g,openCursor:g};return o(m).forEach(function(t){p[t]=function(o){var s=Et.subscr,l=!!s,c=Br(Et,a)&&jr(t,o)?o.obsSet={}:s;if(l){var u=function(t){var n="idb://".concat(e,"/").concat(i,"/").concat(t);return c[n]||(c[n]=new ar)},f=u(""),p=u(":dels"),g=m[t](o),y=g[0],b=g[1];if("query"===t&&y.isPrimaryKey&&!o.values?p.add(b):u(y.name||"").add(b),!y.isPrimaryKey){if("count"!==t){var x="query"===t&&h&&o.values&&a.query(n(n({},o),{values:!1}));return a[t].apply(this,arguments).then(function(e){if("query"===t){if(h&&o.values)return x.then(function(t){var n=t.result;return f.addKeys(n),e});var n=o.values?e.result.map(d):e.result;o.values?f.addKeys(n):p.addKeys(n)}else if("openCursor"===t){var r=e,i=o.values;return r&&Object.create(r,{key:{get:function(){return p.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var t=r.primaryKey;return p.addKey(t),t}},value:{get:function(){return i&&f.addKey(r.primaryKey),r.value}}})}return e})}p.add(r)}}return a[t].apply(this,arguments)}}),p}})}};function Ir(t,e,n,r){function i(e){var i=t(e.name||"");function o(t){return null!=t?e.extractKey(t):null}var a=function(t){return e.multiEntry&&s(t)?t.forEach(function(t){return i.addKey(t)}):i.addKey(t)};(n||r).forEach(function(t,e){var i=n&&o(n[e]),s=r&&o(r[e]);0!==Pe(i,s)&&(null!=i&&a(i),null!=s&&a(s))})}e.indexes.forEach(i)}function zr(t,e,r){if(0===r.numFailures)return e;if("deleteRange"===e.type)return null;var i=e.keys?e.keys.length:"values"in e&&e.values?e.values.length:1;if(r.numFailures===i)return null;var o=n({},e);return s(o.keys)&&(o.keys=o.keys.filter(function(t,e){return!(e in r.failures)})),"values"in o&&s(o.values)&&(o.values=o.values.filter(function(t,e){return!(e in r.failures)})),o}function Fr(t,e){return void 0===e.lower||(e.lowerOpen?Pe(t,e.lower)>0:Pe(t,e.lower)>=0)}function Nr(t,e){return void 0===e.upper||(e.upperOpen?Pe(t,e.upper)<0:Pe(t,e.upper)<=0)}function Wr(t,e){return Fr(t,e)&&Nr(t,e)}function Hr(t,e,n,r,i,o){if(!n||0===n.length)return t;var a=e.query.index,l=a.multiEntry,c=e.query.range,u=r.schema.primaryKey.extractKey,d=a.extractKey,h=(a.lowLevelIndex||a).extractKey,f=n.reduce(function(t,n){var r=t,i=[];if("add"===n.type||"put"===n.type)for(var o=new ar,a=n.values.length-1;a>=0;--a){var h=n.values[a],f=u(h);if(!o.hasKey(f)){var p=d(h);(l&&s(p)?p.some(function(t){return Wr(t,c)}):Wr(p,c))&&(o.addKey(f),i.push(h))}}switch(n.type){case"add":var g=(new ar).addKeys(e.values?t.map(function(t){return u(t)}):t);r=t.concat(e.values?i.filter(function(t){var e=u(t);return!g.hasKey(e)&&(g.addKey(e),!0)}):i.map(function(t){return u(t)}).filter(function(t){return!g.hasKey(t)&&(g.addKey(t),!0)}));break;case"put":var m=(new ar).addKeys(n.values.map(function(t){return u(t)}));r=t.filter(function(t){return!m.hasKey(e.values?u(t):t)}).concat(e.values?i:i.map(function(t){return u(t)}));break;case"delete":var y=(new ar).addKeys(n.keys);r=t.filter(function(t){return!y.hasKey(e.values?u(t):t)});break;case"deleteRange":var b=n.range;r=t.filter(function(t){return!Wr(u(t),b)})}return r},t);return f===t?t:(f.sort(function(t,e){return Pe(h(t),h(e))||Pe(u(t),u(e))}),e.limit&&e.limit<1/0&&(f.length>e.limit?f.length=e.limit:t.length===e.limit&&f.length<e.limit&&(i.dirty=!0)),o?Object.freeze(f):f)}function Vr(t,e){return 0===Pe(t.lower,e.lower)&&0===Pe(t.upper,e.upper)&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function qr(t,e,n,r){if(void 0===t)return void 0!==e?-1:0;if(void 0===e)return 1;var i=Pe(t,e);if(0===i){if(n&&r)return 0;if(n)return 1;if(r)return-1}return i}function Ur(t,e,n,r){if(void 0===t)return void 0!==e?1:0;if(void 0===e)return-1;var i=Pe(t,e);if(0===i){if(n&&r)return 0;if(n)return-1;if(r)return 1}return i}function Kr(t,e){return qr(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&Ur(t.upper,e.upper,t.upperOpen,e.upperOpen)>=0}function Yr(t,e,n,r){var i=mr["idb://".concat(t,"/").concat(e)];if(!i)return[];var o=i.queries[n];if(!o)return[null,!1,i,null];var s=o[(r.query?r.query.index.name:null)||""];if(!s)return[null,!1,i,null];switch(n){case"query":var a=s.find(function(t){return t.req.limit===r.limit&&t.req.values===r.values&&Vr(t.req.query.range,r.query.range)});return a?[a,!0,i,s]:[s.find(function(t){return("limit"in t.req?t.req.limit:1/0)>=r.limit&&(!r.values||t.req.values)&&Kr(t.req.query.range,r.query.range)}),!1,i,s];case"count":var l=s.find(function(t){return Vr(t.req.query.range,r.query.range)});return[l,!!l,i,s]}}function Qr(t,e,n,r){t.subscribers.add(n),r.addEventListener("abort",function(){t.subscribers.delete(n),0===t.subscribers.size&&Jr(t,e)})}function Jr(t,e){setTimeout(function(){0===t.subscribers.size&&F(e,t)},3e3)}var Xr={stack:"dbcore",level:0,name:"Cache",create:function(t){var e=t.schema.name,r=n(n({},t),{transaction:function(n,r,i){var o=t.transaction(n,r,i);if("readwrite"===r){var s=new AbortController,a=s.signal,l=function(i){return function(){if(s.abort(),"readwrite"===r){for(var a=new Set,l=0,c=n;l<c.length;l++){var u=c[l],d=mr["idb://".concat(e,"/").concat(u)];if(d){var h=t.table(u),f=d.optimisticOps.filter(function(t){return t.trans===o});if(o._explicit&&i&&o.mutatedParts)for(var p=0,g=Object.values(d.queries.query);p<g.length;p++)for(var m=0,y=(v=g[p]).slice();m<y.length;m++)gr((_=y[m]).obsSet,o.mutatedParts)&&(F(v,_),_.subscribers.forEach(function(t){return a.add(t)}));else if(f.length>0){d.optimisticOps=d.optimisticOps.filter(function(t){return t.trans!==o});for(var b=0,x=Object.values(d.queries.query);b<x.length;b++)for(var v,w=0,k=(v=x[b]).slice();w<k.length;w++){var _;if(null!=(_=k[w]).res&&o.mutatedParts)if(i&&!_.dirty){var C=Object.isFrozen(_.res),M=Hr(_.res,_.req,f,h,_,C);_.dirty?(F(v,_),_.subscribers.forEach(function(t){return a.add(t)})):M!==_.res&&(_.res=M,_.promise=Bt.resolve({result:M}))}else _.dirty&&F(v,_),_.subscribers.forEach(function(t){return a.add(t)})}}}}a.forEach(function(t){return t()})}}};o.addEventListener("abort",l(!1),{signal:a}),o.addEventListener("error",l(!1),{signal:a}),o.addEventListener("complete",l(!0),{signal:a})}return o},table:function(r){var i=t.table(r),o=i.schema.primaryKey,s=n(n({},i),{mutate:function(t){var s=Et.trans;if(o.outbound||"disabled"===s.db._options.cache||s.explicit||"readwrite"!==s.idbtrans.mode)return i.mutate(t);var a=mr["idb://".concat(e,"/").concat(r)];if(!a)return i.mutate(t);var l=i.mutate(t);return"add"!==t.type&&"put"!==t.type||!(t.values.length>=50||Pr(o,t).some(function(t){return null==t}))?(a.optimisticOps.push(t),t.mutatedParts&&xr(t.mutatedParts),l.then(function(e){if(e.numFailures>0){F(a.optimisticOps,t);var n=zr(a,t,e);n&&a.optimisticOps.push(n),t.mutatedParts&&xr(t.mutatedParts)}}),l.catch(function(){F(a.optimisticOps,t),t.mutatedParts&&xr(t.mutatedParts)})):l.then(function(e){var r=n(n({},t),{values:t.values.map(function(t,r){var i;if(e.failures[r])return t;var s=(null===(i=o.keyPath)||void 0===i?void 0:i.includes("."))?R(t):n({},t);return C(s,o.keyPath,e.results[r]),s})}),i=zr(a,r,e);a.optimisticOps.push(i),queueMicrotask(function(){return t.mutatedParts&&xr(t.mutatedParts)})}),l},query:function(t){var n;if(!Br(Et,i)||!jr("query",t))return i.query(t);var o="immutable"===(null===(n=Et.trans)||void 0===n?void 0:n.db._options.cache),s=Et,a=s.requery,l=s.signal,c=Yr(e,r,"query",t),u=c[0],d=c[1],h=c[2],f=c[3];if(u&&d)u.obsSet=t.obsSet;else{var p=i.query(t).then(function(t){var e=t.result;if(u&&(u.res=e),o){for(var n=0,r=e.length;n<r;++n)Object.freeze(e[n]);Object.freeze(e)}else t.result=R(e);return t}).catch(function(t){return f&&u&&F(f,u),Promise.reject(t)});u={obsSet:t.obsSet,promise:p,subscribers:new Set,type:"query",req:t,dirty:!1},f?f.push(u):(f=[u],h||(h=mr["idb://".concat(e,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),h.queries.query[t.query.index.name||""]=f)}return Qr(u,f,a,l),u.promise.then(function(e){return{result:Hr(e.result,t,null==h?void 0:h.optimisticOps,i,u,o)}})}});return s}});return r}};function Gr(t,e){return new Proxy(t,{get:function(t,n,r){return"db"===n?e:Reflect.get(t,n,r)}})}var Zr,ti=function(){function t(e,r){var i=this;this._middlewares={},this.verno=0;var o=t.dependencies;this._options=r=n({addons:t.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var s=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:rt,dbReadyPromise:null,cancelOpen:rt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};a.dbReadyPromise=new Bt(function(t){a.dbReadyResolve=t}),a.openCanceller=new Bt(function(t,e){a.cancelOpen=e}),this._state=a,this.name=e,this.on=ze(this,"populate","blocked","versionchange","close",{ready:[dt,rt]}),this.once=function(t,e){var n=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];i.on(t).unsubscribe(n),e.apply(i,r)};return i.on(t,n)},this.on.ready.subscribe=x(this.on.ready.subscribe,function(e){return function(n,r){t.vip(function(){var t=i._state;if(t.openComplete)t.dbOpenError||Bt.resolve().then(n),r&&e(n);else if(t.onReadyBeingFired)t.onReadyBeingFired.push(n),r&&e(n);else{e(n);var o=i;r||e(function t(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(t)})}})}}),this.Collection=Ge(this),this.Table=Ne(this),this.Transaction=bn(this),this.Version=Gn(this),this.WhereClause=dn(this),this.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))}),this._maxKey=_n(r.IDBKeyRange),this._createTransaction=function(t,e,n,r){return new i.Transaction(t,e,n,i._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(t){i.on("blocked").fire(t),ke.filter(function(t){return t.name===i.name&&t!==i&&!t._state.vcFired}).map(function(e){return e.on("versionchange").fire(t)})},this.use(Rr),this.use(Xr),this.use($r),this.use(Dr),this.use(Er);var l=new Proxy(this,{get:function(t,e,n){if("_vip"===e)return!0;if("table"===e)return function(t){return Gr(i.table(t),l)};var r=Reflect.get(t,e,n);return r instanceof Ie?Gr(r,l):"tables"===e?r.map(function(t){return Gr(t,l)}):"_createTransaction"===e?function(){return Gr(r.apply(this,arguments),l)}:r}});this.vip=l,s.forEach(function(t){return t(i)})}return t.prototype.version=function(t){if(isNaN(t)||t<.1)throw new Z.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new Z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter(function(e){return e._cfg.version===t})[0];return n||(n=new this.Version(t),e.push(n),e.sort(Bn),n.stores({}),this._state.autoSchema=!1,n)},t.prototype._whenReady=function(t){var e=this;return this.idbdb&&(this._state.openComplete||Et.letThrough||this._vip)?t():new Bt(function(t,n){if(e._state.openComplete)return n(new Z.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return void n(new Z.DatabaseClosed);e.open().catch(rt)}e._state.dbReadyPromise.then(t,n)}).then(t)},t.prototype.use=function(t){var e=t.stack,n=t.create,r=t.level,i=t.name;i&&this.unuse({stack:e,name:i});var o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:n,level:null==r?10:r,name:i}),o.sort(function(t,e){return t.level-e.level}),this},t.prototype.unuse=function(t){var e=t.stack,n=t.name,r=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(function(t){return r?t.create!==r:!!n&&t.name!==n})),this},t.prototype.open=function(){var t=this;return he(Pt,function(){return kr(t)})},t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,e=ke.indexOf(this);if(e>=0&&ke.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new Bt(function(e){t.dbReadyResolve=e}),t.openCanceller=new Bt(function(e,n){t.cancelOpen=n}))},t.prototype.close=function(t){var e=(void 0===t?{disableAutoOpen:!0}:t).disableAutoOpen,n=this._state;e?(n.isBeingOpened&&n.cancelOpen(new Z.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new Z.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},t.prototype.delete=function(t){var e=this;void 0===t&&(t={disableAutoOpen:!0});var n=arguments.length>0&&"object"!=typeof arguments[0],r=this._state;return new Bt(function(i,o){var s=function(){e.close(t);var n=e._deps.indexedDB.deleteDatabase(e.name);n.onsuccess=Xt(function(){rr(e._deps,e.name),i()}),n.onerror=hn(o),n.onblocked=e._fireOnBlocked};if(n)throw new Z.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(s):s()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return null!==this.idbdb},t.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var t=this;return o(this._allTables).map(function(e){return t._allTables[e]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var t=Cr.apply(this,arguments);return this._transaction.apply(this,t)},t.prototype._transaction=function(t,e,n){var r=this,i=Et.trans;i&&i.db===this&&-1===t.indexOf("!")||(i=null);var o,s,a=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(s=e.map(function(t){var e=t instanceof r.Table?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==t||t===Ce)o=Ce;else{if("rw"!=t&&t!=Me)throw new Z.InvalidArgument("Invalid transaction mode: "+t);o=Me}if(i){if(i.mode===Ce&&o===Me){if(!a)throw new Z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&s.forEach(function(t){if(i&&-1===i.storeNames.indexOf(t)){if(!a)throw new Z.SubTransaction("Table "+t+" not included in parent transaction.");i=null}}),a&&i&&!i.active&&(i=null)}}catch(t){return i?i._promise(null,function(e,n){n(t)}):ge(t)}var l=Mr.bind(null,this,o,s,i,n);return i?i._promise(o,l,"lock"):Et.trans?he(Et.transless,function(){return r._whenReady(l)}):this._whenReady(l)},t.prototype.table=function(t){if(!u(this._allTables,t))throw new Z.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},t}(),ei="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",ni=function(){function t(t){this._subscribe=t}return t.prototype.subscribe=function(t,e,n){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:n})},t.prototype[ei]=function(){return this},t}();try{Zr={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(t){Zr={indexedDB:null,IDBKeyRange:null}}function ri(t){var e,n=!1,r=new ni(function(r){var i=H(t);function o(e){var n=Vt();try{i&&oe();var r=ie(t,e);return i&&(r=r.finally(se)),r}finally{n&&qt()}}var s,a=!1,l={},c={},u={get closed(){return a},unsubscribe:function(){a||(a=!0,s&&s.abort(),d&&mn.storagemutated.unsubscribe(p))}};r.start&&r.start(u);var d=!1,h=function(){return pe(g)};function f(){return gr(c,l)}var p=function(t){pr(l,t),f()&&h()},g=function(){if(!a&&Zr.indexedDB){l={};var i={};s&&s.abort(),s=new AbortController;var u={subscr:i,signal:s.signal,requery:h,querier:t,trans:null},f=o(u);Promise.resolve(f).then(function(t){n=!0,e=t,a||u.signal.aborted||(l={},L(c=i)||d||(mn(pn,p),d=!0),pe(function(){return!a&&r.next&&r.next(t)}))},function(t){n=!1,["DatabaseClosedError","AbortError"].includes(null==t?void 0:t.name)||a||pe(function(){a||r.error&&r.error(t)})})}};return setTimeout(h,0),u});return r.hasValue=function(){return n},r.getValue=function(){return e},r}var ii=ti;function oi(t){var e=ai;try{ai=!0,mn.storagemutated.fire(t),vr(t,!0)}finally{ai=e}}d(ii,n(n({},nt),{delete:function(t){return new ii(t,{addons:[]}).delete()},exists:function(t){return new ii(t,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return er(ii.dependencies).then(t)}catch(t){return ge(new Z.MissingAPI)}},defineClass:function(){function t(t){a(this,t)}return t},ignoreTransaction:function(t){return Et.trans?he(Et.transless,t):t()},vip:ir,async:function(t){return function(){try{var e=_r(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Bt.resolve(e)}catch(t){return ge(t)}}},spawn:function(t,e,n){try{var r=_r(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:Bt.resolve(r)}catch(t){return ge(t)}},currentTransaction:{get:function(){return Et.trans||null}},waitFor:function(t,e){var n=Bt.resolve("function"==typeof t?ii.ignoreTransaction(t):t).timeout(e||6e4);return Et.trans?Et.trans.waitFor(n):n},Promise:Bt,debug:{get:function(){return ht},set:function(t){ft(t)}},derive:p,extend:a,props:d,override:x,Events:ze,on:mn,liveQuery:ri,extendObservabilitySet:pr,getByKeyPath:_,setByKeyPath:C,delByKeyPath:M,shallowClone:S,deepClone:R,getObjectDiff:Tr,cmp:Pe,asap:w,minKey:xe,addons:[],connections:ke,errnames:X,dependencies:Zr,cache:mr,semVer:ye,version:ye.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,2*n)})})),ii.maxKey=_n(ii.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(mn(pn,function(t){var e;ai||(e=new CustomEvent(gn,{detail:t}),ai=!0,dispatchEvent(e),ai=!1)}),addEventListener(gn,function(t){var e=t.detail;ai||oi(e)}));var si,ai=!1,li=function(){};function ci(t){return new je({add:t})}function ui(t){return new je({remove:t})}function di(t,e){return new je({replacePrefix:[t,e]})}return"undefined"!=typeof BroadcastChannel&&((li=function(){(si=new BroadcastChannel(gn)).onmessage=function(t){return t.data&&oi(t.data)}})(),"function"==typeof si.unref&&si.unref(),mn(pn,function(t){ai||si.postMessage(t)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(t){if(!ti.disableBfCache&&t.persisted){ht&&console.debug("Dexie: handling persisted pagehide"),null==si||si.close();for(var e=0,n=ke;e<n.length;e++)n[e].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(t){!ti.disableBfCache&&t.persisted&&(ht&&console.debug("Dexie: handling persisted pageshow"),li(),oi({all:new ar(-1/0,[[]])}))})),Bt.rejectionMapper=et,ft(ht),n(ti,Object.freeze({__proto__:null,Dexie:ti,liveQuery:ri,Entity:Te,cmp:Pe,PropModification:je,replacePrefix:di,add:ci,remove:ui,default:ti,RangeSet:ar,mergeRanges:cr,rangesOverlap:ur}),{default:ti}),ti}();var nl=tl(el.exports);const rl=Symbol.for("Dexie"),il=globalThis[rl]||(globalThis[rl]=nl);if(nl.semVer!==il.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${nl.semVer} and ${il.semVer}`);function ol(t){return{youtube:"YouTube",github:"GitHub",medium:"Medium",devto:"DEV Community",substack:"Substack",twitter:"Twitter/X",reddit:"Reddit",stackoverflow:"Stack Overflow",npm:"npm",other:"Other"}[t]||t}function sl(t){return{youtube:"",github:"",medium:"",devto:"",substack:"",twitter:"",reddit:"",stackoverflow:"",npm:"",other:""}[t]||""}function al(t){return{video:"Video",short:"Short",channel:"Channel",playlist:"Playlist",repo:"Repository",issue:"Issue",pr:"Pull Request",gist:"Gist",file:"File",wiki:"Wiki",article:"Article",profile:"Profile",question:"Question",package:"Package",subreddit:"Subreddit",post:"Post",tweet:"Tweet",home:"Home",search:"Search",page:"Page"}[t]||t}const ll=new il("BookmarkInsightsDB");ll.version(1).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}),ll.version(2).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key"}).upgrade(t=>{console.log("Upgrading database to version 2 - adding rawMetadata support")}),ll.version(3).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 3 - adding similarities and computedMetrics tables")}),ll.version(4).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId, platform, creator, contentType",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 4 - adding platformData indexes")}),ll.version(5).stores({bookmarks:"id, url, title, domain, category, dateAdded, lastAccessed, lastChecked, isAlive, parentId, platform, creator, contentType, publishedDate",enrichmentQueue:"++queueId, bookmarkId, addedAt, priority",events:"++eventId, bookmarkId, type, timestamp",cache:"key",settings:"key",similarities:"++id, bookmark1Id, bookmark2Id, score, [bookmark1Id+bookmark2Id]",computedMetrics:"key"}).upgrade(t=>{console.log("Upgrading database to version 5 - adding deep metadata analysis fields")});const cl={enrichmentEnabled:!0,enrichmentSchedule:"manual",enrichmentBatchSize:50,enrichmentConcurrency:5,enrichmentRateLimit:1e3,enrichmentFreshnessDays:30,autoCategorizationEnabled:!0,deadLinkCheckEnabled:!0,privacyMode:!1,trackBrowsingBehavior:!1};async function ul(){try{return await ll.settings.get("app")||cl}catch(t){return console.error("Error getting settings:",t),cl}}async function dl(){try{return await ll.bookmarks.toArray()}catch(t){return console.error("Error getting bookmarks:",t),[]}}async function hl(t){try{return await ll.bookmarks.put(t),!0}catch(t){return console.error("Error upserting bookmark:",t),!1}}async function fl(t){try{return await ll.bookmarks.delete(t),!0}catch(t){return console.error("Error deleting bookmark:",t),!1}}async function pl(){try{const t=await ll.bookmarks.toArray(),e={};return t.forEach(t=>{t.domain&&(e[t.domain]=(e[t.domain]||0)+1)}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,10)}catch(t){return console.error("Error getting domain stats:",t),[]}}async function gl(){try{const t=await ll.bookmarks.toArray(),e={};return t.forEach(t=>{const n=new Date(t.dateAdded),r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;e[r]=(e[r]||0)+1}),Object.entries(e).sort()}catch(t){return console.error("Error getting activity timeline:",t),[]}}async function ml(t,e,n=null){try{return await ll.cache.put({key:t,value:e,timestamp:Date.now(),ttl:n}),!0}catch(t){return console.error("Error setting cache:",t),!1}}async function yl(t){try{const e=await ll.cache.get(t);return e?e.ttl&&Date.now()-e.timestamp>e.ttl?(await ll.cache.delete(t),null):e.value:null}catch(t){return console.error("Error getting cache:",t),null}}const bl={domainStats:36e5,activityTimeline:216e5,wordFrequency:864e5,ageDistribution:216e5,categoryTrends:864e5,expertiseAreas:864e5,quickStats:3e5,duplicates:864e5,similarities:864e5,insightsSummary:3e5};async function xl(t,e,n){try{const r=await ll.computedMetrics.get(t);if(r&&r.validUntil>Date.now())return console.log(`Cache hit for metric: ${t}`),r.data;console.log(`Cache miss for metric: ${t}, computing...`);const i=await e();return await ll.computedMetrics.put({key:t,data:i,computedAt:Date.now(),validUntil:Date.now()+n}),i}catch(n){return console.error(`Error getting cached metric ${t}:`,n),e()}}async function vl(t){const e={add:["domainStats","quickStats","activityTimeline","ageDistribution","insightsSummary"],delete:["domainStats","quickStats","duplicates","similarities","insightsSummary"],update:["quickStats","insightsSummary"],enrich:["categoryTrends","expertiseAreas","insightsSummary","quickStats"],all:Object.keys(bl)}[t]||[];try{for(const t of e)await ll.computedMetrics.delete(t);console.log(`Invalidated caches for change type: ${t}`,e)}catch(t){console.error("Error invalidating metric caches:",t)}}async function wl(){try{return await ll.computedMetrics.clear(),console.log("Cleared all metric caches"),!0}catch(t){return console.error("Error clearing metric caches:",t),!1}}async function kl(){return xl("domainAnalytics",async()=>{const t=await dl(),e={};t.forEach(t=>{if(!t.domain)return;e[t.domain]||(e[t.domain]={domain:t.domain,count:0,latestDate:0,oldestDate:1/0,enrichedCount:0});const n=e[t.domain];n.count++,t.lastChecked&&n.enrichedCount++,t.dateAdded>n.latestDate&&(n.latestDate=t.dateAdded),t.dateAdded<n.oldestDate&&(n.oldestDate=t.dateAdded)});const n=Object.values(e),r=t.length;return n.forEach(t=>{t.percentage=r>0?Math.round(t.count/r*100):0,t.dateAdded=t.latestDate}),{byRecency:[...n].sort((t,e)=>e.latestDate-t.latestDate),byCount:[...n].sort((t,e)=>e.count-t.count),top10:[...n].sort((t,e)=>e.count-t.count).slice(0,10),totalDomains:n.length,totalBookmarks:r}},bl.domainStats)}async function _l(){try{const t=await dl(),e={};return t.forEach(t=>{t.folderPath&&(e[t.folderPath]=(e[t.folderPath]||0)+1)}),Object.entries(e).map(([t,e])=>({folder:t,count:e})).sort((t,e)=>e.count-t.count)}catch(t){return console.error("Error getting unique folders:",t),[]}}async function Cl(){return xl("ageDistribution",async()=>{const t=await dl(),e=Date.now(),n={"Last 24 hours":0,"Last week":0,"Last month":0,"Last 3 months":0,"Last 6 months":0,"Last year":0,"Over 1 year":0},r=864e5,i=7*r,o=30*r;return t.forEach(t=>{const s=e-t.dateAdded;s<=r?n["Last 24 hours"]++:s<=i?n["Last week"]++:s<=o?n["Last month"]++:s<=3*o?n["Last 3 months"]++:s<=6*o?n["Last 6 months"]++:s<=365*r?n["Last year"]++:n["Over 1 year"]++}),Object.entries(n)},bl.ageDistribution)}async function Ml(){return xl("creationPatterns",async()=>{const t=await dl(),e=new Array(24).fill(0),n=new Array(7).fill(0),r=new Array(12).fill(0),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t.forEach(t=>{const i=new Date(t.dateAdded);e[i.getHours()]++,n[i.getDay()]++,r[i.getMonth()]++}),{hourly:e.map((t,e)=>[`${e}:00`,t]),daily:n.map((t,e)=>[i[e],t]),monthly:r.map((t,e)=>[o[e],t])}},bl.ageDistribution)}async function Sl(){return xl("wordFrequency",async()=>{const t=await dl(),e={};return t.forEach(t=>{if(t.title){t.title.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>2&&!Na.has(t)).forEach(t=>{e[t]=(e[t]||0)+1})}}),Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,20)},bl.wordFrequency)}async function Al(){return xl("duplicates",async()=>{const t=await dl(),e={};return t.forEach(t=>{const n=t.url.toLowerCase().replace(/\/$/,"");e[n]||(e[n]=[]),e[n].push(t)}),Object.values(e).filter(t=>t.length>1)},bl.duplicates)}async function Dl(){try{const t=await dl(),e=["Bookmarks Bar","Other Bookmarks","Mobile Bookmarks",""];return t.filter(t=>{const n=t.folderPath||"";return e.includes(n)||!n.includes("/")})}catch(t){return console.error("Error finding uncategorized bookmarks:",t),[]}}async function Tl(){try{const t=await dl(),e=["http://","https://","chrome://","chrome-extension://","file://","javascript:","data:","about:","mailto:","tel:","ftp://","sftp://","ssh://"];return t.filter(t=>{const n=t.url||"";return!e.some(t=>n.startsWith(t))||""===n.trim()})}catch(t){return console.error("Error finding malformed URLs:",t),[]}}async function Pl(){return xl("quickStats",async()=>{const t=await dl(),e=await Al(),n=await Dl(),r=await Tl(),i=Date.now(),o=t.filter(t=>t.lastChecked).length,s=t.filter(t=>!1===t.isAlive).length,a=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{total:t.length,enriched:o,pending:t.length-o,enrichedPercentage:t.length>0?Math.round(o/t.length*100):0,duplicateGroups:e.length,uncategorized:n.length,malformed:r.length,deadLinks:s,uniqueDomains:a,addedThisWeek:t.filter(t=>i-t.dateAdded<6048e5).length,addedThisMonth:t.filter(t=>i-t.dateAdded<2592e6).length,oldestBookmark:t.reduce((t,e)=>e.dateAdded<t?e.dateAdded:t,Date.now()),newestBookmark:t.reduce((t,e)=>e.dateAdded>t?e.dateAdded:t,0)}},bl.quickStats)}async function El(){try{const t=await dl();return{exportDate:(new Date).toISOString(),version:"2.0",totalBookmarks:t.length,bookmarks:t}}catch(t){throw console.error("Error exporting bookmarks:",t),t}}async function Ll(){return(await kl()).byRecency}async function Ol(){return(await kl()).byCount}async function Rl(t){try{const e=[];for(const n of t)try{await chrome.bookmarks.remove(n)}catch(t){console.error(`Error deleting bookmark ${n}:`,t),e.push({id:n,error:t.message})}return await ll.bookmarks.bulkDelete(t),await vl("delete"),{success:t.length-e.length,errors:e}}catch(t){throw console.error("Error deleting bookmarks:",t),t}}async function Bl(){try{const t=await dl(),e={};return t.forEach(t=>{if(t.title){const n=t.title.toLowerCase();n.includes("how to")&&(e["How-to guides"]=(e["How-to guides"]||0)+1),n.includes("tutorial")&&(e.Tutorials=(e.Tutorials||0)+1),(n.includes("documentation")||n.includes("docs"))&&(e.Documentation=(e.Documentation||0)+1),(n.includes("api")||n.includes("reference"))&&(e["API/Reference"]=(e["API/Reference"]||0)+1),(n.includes("blog")||n.includes("article"))&&(e["Blog/Articles"]=(e["Blog/Articles"]||0)+1),(n.includes("github")||n.includes("repository"))&&(e["Code Repositories"]=(e["Code Repositories"]||0)+1),(n.includes("video")||n.includes("youtube"))&&(e.Videos=(e.Videos||0)+1),(n.includes("tool")||n.includes("app"))&&(e["Tools/Apps"]=(e["Tools/Apps"]||0)+1),n.length>60&&(e["Long titles (60+ chars)"]=(e["Long titles (60+ chars)"]||0)+1),n.split(" ").length<=3&&(e["Short titles (3 words)"]=(e["Short titles (3 words)"]||0)+1)}}),Object.entries(e).sort(([,t],[,e])=>e-t)}catch(t){return console.error("Error getting title patterns:",t),[]}}async function jl(){try{const t=await dl(),e={},n={},r={},i={};return t.forEach(t=>{try{const o=new URL(t.url);e[o.protocol]=(e[o.protocol]||0)+1;const s=o.hostname.split(".");if(s.length>1){const t=s[s.length-1];n[t]=(n[t]||0)+1}if(s.length>2){const t=s[0];"www"!==t&&(i[t]=(i[t]||0)+1)}const a=o.pathname.split("/").filter(t=>t.length>0);if(a.length>0){const t=a[0];r[t]=(r[t]||0)+1}}catch(t){}}),{protocols:Object.entries(e).sort(([,t],[,e])=>e-t),topLevelDomains:Object.entries(n).sort(([,t],[,e])=>e-t).slice(0,10),subdomains:Object.entries(i).sort(([,t],[,e])=>e-t).slice(0,10),pathPatterns:Object.entries(r).sort(([,t],[,e])=>e-t).slice(0,15)}}catch(t){return console.error("Error getting URL patterns:",t),{protocols:[],topLevelDomains:[],subdomains:[],pathPatterns:[]}}}async function $l(){try{const t=await dl(),e={};let n=0,r=0;t.forEach(t=>{r++;try{const r=new URL(t.url).searchParams;if(r.toString()){n++;for(const[t]of r)e[t]=(e[t]||0)+1}}catch(t){}});return{parameters:Object.entries(e).sort(([,t],[,e])=>e-t).slice(0,15),urlsWithParams:n,totalUrls:r,percentage:r>0?Math.round(n/r*100):0}}catch(t){return console.error("Error getting URL parameter usage:",t),{parameters:[],urlsWithParams:0,totalUrls:0,percentage:0}}}async function Il(){try{const t=await dl(),e={};t.forEach(t=>{e[t.domain]=(e[t.domain]||0)+1});const n=Object.entries(e).sort(([,t],[,e])=>e-t),r=t.length,i=n.slice(0,10),o=n.slice(10).reduce((t,[,e])=>t+e,0),s=i.map(([t,e])=>({domain:t,count:e,percentage:Math.round(e/r*100)}));return o>0&&s.push({domain:"Others",count:o,percentage:Math.round(o/r*100)}),s}catch(t){return console.error("Error getting domain distribution:",t),[]}}async function zl(){try{return(await dl()).filter(t=>!1===t.isAlive)}catch(t){return console.error("Error getting dead links:",t),[]}}async function Fl(){try{const t=await ll.bookmarks.toArray(),e=await ll.settings.toArray(),n=await ll.events.orderBy("timestamp").reverse().limit(1e3).toArray(),r=await ll.similarities.toArray(),i=t.filter(t=>t.lastChecked).length,o=t.filter(t=>t.category).length;return{version:"2.1",schemaVersion:3,createdAt:(new Date).toISOString(),metadata:{totalBookmarks:t.length,enrichedCount:i,categorizedCount:o,eventsCount:n.length,similaritiesCount:r.length},data:{bookmarks:t,settings:e,events:n,similarities:r}}}catch(t){throw console.error("Error creating backup:",t),t}}async function Nl(){try{const t=await Fl(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=`bookmark-insights-backup-${(new Date).toISOString().slice(0,10)}.json`,i=document.createElement("a");return i.href=n,i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),{success:!0,filename:r,metadata:t.metadata}}catch(t){throw console.error("Error downloading backup:",t),t}}async function Wl(t,e={}){const{restoreBookmarks:n=!0,restoreSettings:r=!0,restoreEvents:i=!1,restoreSimilarities:o=!0,mergeMode:s=!1}=e;try{if(!t||!t.version||!t.data)throw new Error("Invalid backup format");if(!t.data.bookmarks||!Array.isArray(t.data.bookmarks))throw new Error("Backup does not contain valid bookmarks data");const e={bookmarksRestored:0,settingsRestored:0,eventsRestored:0,similaritiesRestored:0,errors:[]};if(n&&t.data.bookmarks.length>0)if(s||await ll.bookmarks.clear(),s){const n=await ll.bookmarks.toArray(),r=new Map(n.map(t=>[t.id,t]));for(const n of t.data.bookmarks){const t=r.get(n.id);if(t){const r=t.lastChecked||0;(n.lastChecked||0)>r&&(await ll.bookmarks.put(n),e.bookmarksRestored++)}else await ll.bookmarks.put(n),e.bookmarksRestored++}}else await ll.bookmarks.bulkPut(t.data.bookmarks),e.bookmarksRestored=t.data.bookmarks.length;return r&&t.data.settings&&t.data.settings.length>0&&(s||await ll.settings.clear(),await ll.settings.bulkPut(t.data.settings),e.settingsRestored=t.data.settings.length),i&&t.data.events&&t.data.events.length>0&&(s||await ll.events.clear(),await ll.events.bulkPut(t.data.events),e.eventsRestored=t.data.events.length),o&&t.data.similarities&&t.data.similarities.length>0&&(s||await ll.similarities.clear(),await ll.similarities.bulkPut(t.data.similarities),e.similaritiesRestored=t.data.similarities.length),await wl(),{success:!0,results:e,backupMetadata:t.metadata}}catch(t){throw console.error("Error restoring from backup:",t),t}}function Hl(t){const e=[];if(!t)return{valid:!1,issues:["Backup is empty or null"]};if(t.version||e.push("Missing version field"),t.data){if(t.data.bookmarks&&Array.isArray(t.data.bookmarks)||e.push("Missing or invalid bookmarks array"),t.data.bookmarks&&t.data.bookmarks.length>0){const n=t.data.bookmarks[0];n.id&&n.url||e.push("Bookmarks are missing required fields (id, url)")}}else e.push("Missing data field");return{valid:0===e.length,issues:e,metadata:t.metadata||null,version:t.version||"unknown",createdAt:t.createdAt||"unknown"}}async function Vl(){try{const t=await Fl();let e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];return e.unshift({createdAt:t.createdAt,metadata:t.metadata,data:t.data}),e.length>3&&(e=e.slice(0,3)),await chrome.storage.local.set({autoBackups:e}),console.log("Auto-backup created:",t.metadata),{success:!0,metadata:t.metadata}}catch(t){return console.error("Error creating auto-backup:",t),{success:!1,error:t.message}}}async function ql(){try{const t=await chrome.storage.local.get(["autoBackups"]);return(t.autoBackups||[]).map((t,e)=>({index:e,createdAt:t.createdAt,metadata:t.metadata}))}catch(t){return console.error("Error listing auto-backups:",t),[]}}async function Ul(t=0){try{const e=(await chrome.storage.local.get(["autoBackups"])).autoBackups||[];if(t<0||t>=e.length)throw new Error(`Invalid backup index: ${t}. Available: 0-${e.length-1}`);const n={version:"2.1",...e[t]};return await Wl(n)}catch(t){throw console.error("Error restoring from auto-backup:",t),t}}var Kl=Object.freeze({__proto__:null,CACHE_DURATIONS:bl,clearAllMetricCaches:wl,createAutoBackup:Vl,createBackup:Fl,db:ll,deleteBookmark:fl,deleteBookmarks:Rl,downloadBackup:Nl,exportBookmarks:El,findDuplicates:Al,findMalformedUrls:Tl,findUncategorizedBookmarks:Dl,getActivityTimeline:gl,getAllBookmarks:dl,getBookmarkAgeDistribution:Cl,getBookmarkCreationPatterns:Ml,getCache:yl,getCachedMetric:xl,getConsolidatedDomainAnalytics:kl,getDeadLinks:zl,getDomainDistribution:Il,getDomainStats:pl,getDomainsByCount:Ol,getDomainsByRecency:Ll,getQuickStats:Pl,getSettings:ul,getTitlePatterns:Bl,getTitleWordFrequency:Sl,getUniqueFolders:_l,getUrlParameterUsage:$l,getUrlPatterns:jl,invalidateMetricCaches:vl,listAutoBackups:ql,restoreFromAutoBackup:Ul,restoreFromBackup:Wl,setCache:ml,upsertBookmark:hl,validateBackup:Hl});const Yl=(()=>{const{subscribe:t,set:e,update:n}=Xa({total:0,enriched:0,pending:0,deadLinks:0,duplicates:0,uniqueDomains:0,addedThisWeek:0,addedThisMonth:0,lastUpdated:null,loading:!0});let r=null;return{subscribe:t,async refresh(){try{const t=await dl(),n=Date.now(),r=6048e5,i=2592e6,o=t.length,s=t.filter(t=>t.lastChecked).length,a=t.filter(t=>!1===t.isAlive).length,l=new Set(t.map(t=>t.domain).filter(t=>t)).size,c=t.filter(t=>n-t.dateAdded<r).length,u=t.filter(t=>n-t.dateAdded<i).length,d=await xl("quickDuplicateCount",async()=>{const e=new Map;return t.forEach(t=>{const n=t.url.toLowerCase().replace(/\/$/,"");e.has(n)||e.set(n,0),e.set(n,e.get(n)+1)}),Array.from(e.values()).filter(t=>t>1).length},bl.quickStats);e({total:o,enriched:s,pending:o-s,deadLinks:a,duplicates:d,uniqueDomains:l,addedThisWeek:c,addedThisMonth:u,lastUpdated:Date.now(),loading:!1})}catch(t){console.error("Error refreshing stats:",t),n(t=>({...t,loading:!1}))}},startAutoRefresh(t=3e4){if(this.refresh(),!r){r=setInterval(()=>{"undefined"!=typeof document&&"visible"===document.visibilityState&&this.refresh()},t),console.log("Stats auto-refresh started (visibility-aware)")}},stopAutoRefresh(){r&&(clearInterval(r),r=null,console.log("Stats auto-refresh stopped"))}}})();Ga(Yl,t=>0===t.total?0:Math.round(t.enriched/t.total*100)),Ga(Yl,t=>t.pending);const Ql=function(){const{subscribe:t,set:e,update:n}=Xa([]);let r=0,i=null;return{subscribe:t,set:e,getCached:async(n=3e4)=>{const o=Date.now();let s=[];if(t(t=>{s=t})(),s.length>0&&o-r<n)return s;if(i){const t=await i;return null!==t?t:s}i=(async()=>{try{const t=await dl();return e(t),r=Date.now(),t}catch(t){return console.error("Error fetching bookmarks:",t),null}finally{i=null}})();const a=await i;return null!==a?a:s},refresh:async()=>{i=(async()=>{try{const t=await dl();return e(t),r=Date.now(),t}catch(t){return console.error("Error refreshing bookmarks:",t),null}finally{i=null}})();const t=await i;return null!==t?t:[]},invalidate:()=>{r=0}}}();const Jl=function(){const{subscribe:t,set:e,update:n}=Xa({domains:[],folders:[],topics:[],types:[],creators:[],tags:[],deadLinks:!1,stale:!1,dateRange:null,readingTimeRange:null,qualityScoreRange:null,hasPublishedDate:null});return{subscribe:t,set:e,addFilter:(t,e)=>n(n=>{if(!Array.isArray(n[t]))return"boolean"==typeof n[t]?{...n,[t]:e}:{...n,[t]:e};if("creators"===t){if(!n.creators.find(t=>t.key===e.key))return{...n,creators:[...n.creators,e]}}else{const r=String(e).toLowerCase();if(!n[t].some(t=>String(t).toLowerCase()===r))return{...n,[t]:[...n[t],e]}}return n}),removeFilter:(t,e)=>n(n=>{if(Array.isArray(n[t])){if("creators"===t)return{...n,creators:n.creators.filter(t=>t.key!==e.key)};const r=String(e).toLowerCase();return{...n,[t]:n[t].filter(t=>String(t).toLowerCase()!==r)}}return"boolean"==typeof n[t]?{...n,[t]:!1}:{...n,[t]:null}}),toggleFilter:(t,e)=>n(n=>{if(Array.isArray(n[t])){if("creators"===t){return n.creators.find(t=>t.key===e.key)?{...n,creators:n.creators.filter(t=>t.key!==e.key)}:{...n,creators:[...n.creators,e]}}const r=String(e).toLowerCase(),i=n[t].findIndex(t=>String(t).toLowerCase()===r);return-1!==i?{...n,[t]:n[t].filter((t,e)=>e!==i)}:{...n,[t]:[...n[t],e]}}return"boolean"==typeof n[t]?{...n,[t]:!n[t]}:n}),setFilter:(t,e)=>n(n=>({...n,[t]:e})),clearFilters:()=>e({domains:[],folders:[],topics:[],types:[],creators:[],tags:[],deadLinks:!1,stale:!1,dateRange:null,readingTimeRange:null,qualityScoreRange:null,hasPublishedDate:null}),reset:()=>e({domains:[],folders:[],topics:[],types:[],creators:[],tags:[],deadLinks:!1,stale:!1,dateRange:null,readingTimeRange:null,qualityScoreRange:null,hasPublishedDate:null})}}(),Xl=Xa("");const Gl=function(){const{subscribe:t,set:e,update:n}=Xa(new Set);return{subscribe:t,set:e,toggle:t=>n(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n}),add:t=>n(e=>{const n=new Set(e);return n.add(t),n}),remove:t=>n(e=>{const n=new Set(e);return n.delete(t),n}),selectAll:t=>e(new Set(t)),clear:()=>e(new Set)}}();function Zl(t,e,n){const r=t.slice();return r[9]=e[n],r}function tc(t,e,n){const r=t.slice();return r[12]=e[n],r}function ec(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',A(e,"class","text-red-500"),A(e,"title","Dead link")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function nc(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',A(e,"class","text-green-500"),A(e,"title","Enriched with metadata")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function rc(t){let e,n,r,i,o;return{c(){e=v("span"),n=w("svg"),r=w("path"),i=w("path"),A(r,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),A(i,"fill-rule","evenodd"),A(i,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),A(i,"clip-rule","evenodd"),A(n,"class","w-3.5 h-3.5"),A(n,"fill","currentColor"),A(n,"viewBox","0 0 20 20"),A(e,"class","text-blue-500 text-xs"),A(e,"title",o="Accessed "+t[0].accessCount+" times")},m(t,o){y(t,e,o),m(e,n),m(n,r),m(n,i)},p(t,n){1&n&&o!==(o="Accessed "+t[0].accessCount+" times")&&A(e,"title",o)},d(t){t&&b(e)}}}function ic(t){let e,n,r,i,o=t[0].category+"";return{c(){e=v("span"),n=k(" "),r=k(o),A(e,"class","text-xs text-purple-600 bg-purple-50 px-2 py-0.5 rounded"),A(e,"title",i="Category: "+t[0].category)},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,n){1&n&&o!==(o=t[0].category+"")&&T(r,o),1&n&&i!==(i="Category: "+t[0].category)&&A(e,"title",i)},d(t){t&&b(e)}}}function oc(t){let e,n,r=Qa(t[0].description,t[1])+"";return{c(){e=v("p"),A(e,"class","text-xs text-gray-500 mt-2 line-clamp-2 w-full"),A(e,"title",n=t[0].description)},m(t,n){y(t,e,n),e.innerHTML=r},p(t,i){3&i&&r!==(r=Qa(t[0].description,t[1])+"")&&(e.innerHTML=r),1&i&&n!==(n=t[0].description)&&A(e,"title",n)},d(t){t&&b(e)}}}function sc(t){let e,n,r,i=t[0].readingTime&&ac(t),o=t[0].publishedDate&&lc(t),s=t[0].contentQualityScore&&cc(t);return{c(){e=v("div"),i&&i.c(),n=_(),o&&o.c(),r=_(),s&&s.c(),A(e,"class","flex items-center gap-2 mt-2 flex-wrap")},m(t,a){y(t,e,a),i&&i.m(e,null),m(e,n),o&&o.m(e,null),m(e,r),s&&s.m(e,null)},p(t,a){t[0].readingTime?i?i.p(t,a):(i=ac(t),i.c(),i.m(e,n)):i&&(i.d(1),i=null),t[0].publishedDate?o?o.p(t,a):(o=lc(t),o.c(),o.m(e,r)):o&&(o.d(1),o=null),t[0].contentQualityScore?s?s.p(t,a):(s=cc(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&b(e),i&&i.d(),o&&o.d(),s&&s.d()}}}function ac(t){let e,n,r,i,o=t[0].readingTime+"";return{c(){e=v("span"),n=k(" "),r=k(o),i=k(" min"),A(e,"class","text-xs text-gray-600 bg-gray-50 px-2 py-0.5 rounded flex items-center gap-1"),A(e,"title","Estimated reading time")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i)},p(t,e){1&e&&o!==(o=t[0].readingTime+"")&&T(r,o)},d(t){t&&b(e)}}}function lc(t){let e,n,r,i=Wa(t[0].publishedDate)+"";return{c(){e=v("span"),n=k(" "),r=k(i),A(e,"class","text-xs text-gray-600 bg-gray-50 px-2 py-0.5 rounded flex items-center gap-1"),A(e,"title","Published date")},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){1&e&&i!==(i=Wa(t[0].publishedDate)+"")&&T(r,i)},d(t){t&&b(e)}}}function cc(t){let e,n,r,i=t[0].contentQualityScore+"";return{c(){e=v("span"),n=k(" "),r=k(i),A(e,"class","text-xs px-2 py-0.5 rounded flex items-center gap-1"),A(e,"title","Content quality score"),R(e,"text-green-700",t[0].contentQualityScore>=70),R(e,"bg-green-50",t[0].contentQualityScore>=70),R(e,"text-yellow-700",t[0].contentQualityScore>=40&&t[0].contentQualityScore<70),R(e,"bg-yellow-50",t[0].contentQualityScore>=40&&t[0].contentQualityScore<70),R(e,"text-orange-700",t[0].contentQualityScore<40),R(e,"bg-orange-50",t[0].contentQualityScore<40)},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,n){1&n&&i!==(i=t[0].contentQualityScore+"")&&T(r,i),1&n&&R(e,"text-green-700",t[0].contentQualityScore>=70),1&n&&R(e,"bg-green-50",t[0].contentQualityScore>=70),1&n&&R(e,"text-yellow-700",t[0].contentQualityScore>=40&&t[0].contentQualityScore<70),1&n&&R(e,"bg-yellow-50",t[0].contentQualityScore>=40&&t[0].contentQualityScore<70),1&n&&R(e,"text-orange-700",t[0].contentQualityScore<40),1&n&&R(e,"bg-orange-50",t[0].contentQualityScore<40)},d(t){t&&b(e)}}}function uc(t){let e,n,r=it(t[0].smartTags.slice(0,5)),i=[];for(let e=0;e<r.length;e+=1)i[e]=dc(tc(t,r,e));let o=t[0].smartTags.length>5&&hc(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();n=_(),o&&o.c(),A(e,"class","flex items-center gap-1 mt-2 flex-wrap")},m(t,r){y(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,n),o&&o.m(e,null)},p(t,s){if(1&s){let o;for(r=it(t[0].smartTags.slice(0,5)),o=0;o<r.length;o+=1){const a=tc(t,r,o);i[o]?i[o].p(a,s):(i[o]=dc(a),i[o].c(),i[o].m(e,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}t[0].smartTags.length>5?o?o.p(t,s):(o=hc(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&b(e),x(i,t),o&&o.d()}}}function dc(t){let e,n,r=t[12]+"";return{c(){e=v("span"),n=k(r),A(e,"class","text-xs text-indigo-600 bg-indigo-50 px-1.5 py-0.5 rounded"),A(e,"title","Smart tag")},m(t,r){y(t,e,r),m(e,n)},p(t,e){1&e&&r!==(r=t[12]+"")&&T(n,r)},d(t){t&&b(e)}}}function hc(t){let e,n,r,i,o=t[0].smartTags.length-5+"";return{c(){e=v("span"),n=k("+"),r=k(o),i=k(" more"),A(e,"class","text-xs text-gray-500")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i)},p(t,e){1&e&&o!==(o=t[0].smartTags.length-5+"")&&T(r,o)},d(t){t&&b(e)}}}function fc(t){let e,n,r=it(t[0].topics.slice(0,4)),i=[];for(let e=0;e<r.length;e+=1)i[e]=pc(Zl(t,r,e));let o=t[0].topics.length>4&&gc(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();n=_(),o&&o.c(),A(e,"class","flex items-center gap-1 mt-2 flex-wrap")},m(t,r){y(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,n),o&&o.m(e,null)},p(t,s){if(1&s){let o;for(r=it(t[0].topics.slice(0,4)),o=0;o<r.length;o+=1){const a=Zl(t,r,o);i[o]?i[o].p(a,s):(i[o]=pc(a),i[o].c(),i[o].m(e,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}t[0].topics.length>4?o?o.p(t,s):(o=gc(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&b(e),x(i,t),o&&o.d()}}}function pc(t){let e,n,r,i,o=t[9]+"";return{c(){e=v("span"),n=k(" "),r=k(o),A(e,"class","text-xs text-teal-600 bg-teal-50 px-1.5 py-0.5 rounded"),A(e,"title",i="Topic: "+t[9])},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,n){1&n&&o!==(o=t[9]+"")&&T(r,o),1&n&&i!==(i="Topic: "+t[9])&&A(e,"title",i)},d(t){t&&b(e)}}}function gc(t){let e,n,r,i,o=t[0].topics.length-4+"";return{c(){e=v("span"),n=k("+"),r=k(o),i=k(" more"),A(e,"class","text-xs text-gray-500")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i)},p(t,e){1&e&&o!==(o=t[0].topics.length-4+"")&&T(r,o)},d(t){t&&b(e)}}}function mc(t){let e,n;return{c(){e=w("svg"),n=w("path"),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),A(e,"class","w-4 h-4"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,r){y(t,e,r),m(e,n)},d(t){t&&b(e)}}}function yc(t){let e,n;return{c(){e=w("svg"),n=w("path"),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M5 13l4 4L19 7"),A(e,"class","w-4 h-4 text-green-500"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,r){y(t,e,r),m(e,n)},d(t){t&&b(e)}}}function bc(t){let e,n,r,i,o=t[0].folderPath+"";return{c(){e=v("p"),n=k(" "),r=k(o),A(e,"class","text-xs text-gray-400 mt-1 truncate"),A(e,"title",i=t[0].folderPath)},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,n){1&n&&o!==(o=t[0].folderPath+"")&&T(r,o),1&n&&i!==(i=t[0].folderPath)&&A(e,"title",i)},d(t){t&&b(e)}}}function xc(e){let n,i,o,s,l,c,u,d,h,f,p,g,x,w,C,S,D,P,E,L,O,B,j,$,I,z,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z=Qa(e[0].title,e[1])+"",tt=Qa(e[0].url,e[1])+"",et=qa(e[0])+"",nt=Wa(e[0].dateAdded)+"",rt=!1===e[0].isAlive&&ec(),it=(e[0].description||e[0].keywords&&e[0].keywords.length>0)&&nc(),ot=e[0].accessCount>0&&rc(e),st=e[0].category&&ic(e),at=e[0].description&&oc(e),lt=(e[0].readingTime||e[0].publishedDate||e[0].contentQualityScore)&&sc(e),ct=e[0].smartTags&&e[0].smartTags.length>0&&uc(e),ut=e[0].topics&&e[0].topics.length>0&&fc(e);function dt(t,e){return t[2]?yc:mc}let ht=dt(e),ft=ht(e),pt=e[0].folderPath&&bc(e);return{c(){n=v("div"),i=v("div"),o=v("input"),l=_(),c=v("div"),u=v("img"),h=_(),f=v("div"),p=v("div"),g=v("h3"),w=_(),C=v("div"),rt&&rt.c(),S=_(),it&&it.c(),D=_(),ot&&ot.c(),P=_(),E=v("p"),O=_(),B=v("div"),j=v("div"),$=v("span"),I=k(et),z=_(),st&&st.c(),F=_(),at&&at.c(),N=_(),lt&&lt.c(),W=_(),ct&&ct.c(),H=_(),ut&&ut.c(),V=_(),q=v("div"),U=v("button"),ft.c(),K=_(),Y=v("span"),Q=k(nt),J=_(),pt&&pt.c(),A(o,"type","checkbox"),o.checked=s=e[3].has(e[0].id),A(o,"class","w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 cursor-pointer"),A(i,"class","absolute top-2 right-2 z-10"),R(i,"opacity-0",!e[3].has(e[0].id)),R(i,"group-hover:opacity-100",!0),a(u.src,d=Va(e[0]))||A(u,"src",d),A(u,"alt","Favicon"),A(u,"class","w-4 h-4 mt-1 flex-shrink-0"),A(g,"class","text-sm font-medium text-gray-900 truncate flex-1"),A(g,"title",x=e[0].title),A(C,"class","flex items-center gap-1 flex-shrink-0"),A(p,"class","flex items-center gap-1.5"),A(E,"class","text-xs text-gray-500 truncate mt-1 max-w-full"),A(E,"title",L=e[0].url),A($,"class","text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded"),A(j,"class","flex items-center gap-1.5"),A(U,"class","p-1 text-gray-400 hover:text-blue-600 transition-colors"),A(U,"title","Copy URL"),A(Y,"class","text-xs text-gray-400"),A(q,"class","flex items-center space-x-2"),A(B,"class","flex items-center justify-between mt-2 gap-2 flex-wrap"),A(f,"class","flex-1 min-w-0"),A(c,"class","flex items-start space-x-3"),A(n,"class","bookmark-card bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow cursor-pointer border border-gray-200 relative group svelte-1oo2sed"),A(n,"role","button"),A(n,"tabindex","0"),R(n,"border-red-200",!1===e[0].isAlive),R(n,"bg-red-50",!1===e[0].isAlive),R(n,"ring-2",e[3].has(e[0].id)),R(n,"ring-blue-500",e[3].has(e[0].id))},m(t,r){y(t,n,r),m(n,i),m(i,o),m(n,l),m(n,c),m(c,u),m(c,h),m(c,f),m(f,p),m(p,g),g.innerHTML=Z,m(p,w),m(p,C),rt&&rt.m(C,null),m(C,S),it&&it.m(C,null),m(C,D),ot&&ot.m(C,null),m(f,P),m(f,E),E.innerHTML=tt,m(f,O),m(f,B),m(B,j),m(j,$),m($,I),m(j,z),st&&st.m(j,null),m(B,F),at&&at.m(B,null),m(B,N),lt&&lt.m(B,null),m(B,W),ct&&ct.m(B,null),m(B,H),ut&&ut.m(B,null),m(B,V),m(B,q),m(q,U),ft.m(U,null),m(q,K),m(q,Y),m(Y,Q),m(f,J),pt&&pt.m(f,null),X||(G=[M(o,"click",e[6]),M(U,"click",e[5]),M(n,"click",e[4]),M(n,"keydown",e[7])],X=!0)},p(t,[e]){9&e&&s!==(s=t[3].has(t[0].id))&&(o.checked=s),9&e&&R(i,"opacity-0",!t[3].has(t[0].id)),1&e&&!a(u.src,d=Va(t[0]))&&A(u,"src",d),3&e&&Z!==(Z=Qa(t[0].title,t[1])+"")&&(g.innerHTML=Z),1&e&&x!==(x=t[0].title)&&A(g,"title",x),!1===t[0].isAlive?rt||(rt=ec(),rt.c(),rt.m(C,S)):rt&&(rt.d(1),rt=null),t[0].description||t[0].keywords&&t[0].keywords.length>0?it||(it=nc(),it.c(),it.m(C,D)):it&&(it.d(1),it=null),t[0].accessCount>0?ot?ot.p(t,e):(ot=rc(t),ot.c(),ot.m(C,null)):ot&&(ot.d(1),ot=null),3&e&&tt!==(tt=Qa(t[0].url,t[1])+"")&&(E.innerHTML=tt),1&e&&L!==(L=t[0].url)&&A(E,"title",L),1&e&&et!==(et=qa(t[0])+"")&&T(I,et),t[0].category?st?st.p(t,e):(st=ic(t),st.c(),st.m(j,null)):st&&(st.d(1),st=null),t[0].description?at?at.p(t,e):(at=oc(t),at.c(),at.m(B,N)):at&&(at.d(1),at=null),t[0].readingTime||t[0].publishedDate||t[0].contentQualityScore?lt?lt.p(t,e):(lt=sc(t),lt.c(),lt.m(B,W)):lt&&(lt.d(1),lt=null),t[0].smartTags&&t[0].smartTags.length>0?ct?ct.p(t,e):(ct=uc(t),ct.c(),ct.m(B,H)):ct&&(ct.d(1),ct=null),t[0].topics&&t[0].topics.length>0?ut?ut.p(t,e):(ut=fc(t),ut.c(),ut.m(B,V)):ut&&(ut.d(1),ut=null),ht!==(ht=dt(t))&&(ft.d(1),ft=ht(t),ft&&(ft.c(),ft.m(U,null))),1&e&&nt!==(nt=Wa(t[0].dateAdded)+"")&&T(Q,nt),t[0].folderPath?pt?pt.p(t,e):(pt=bc(t),pt.c(),pt.m(f,null)):pt&&(pt.d(1),pt=null),1&e&&R(n,"border-red-200",!1===t[0].isAlive),1&e&&R(n,"bg-red-50",!1===t[0].isAlive),9&e&&R(n,"ring-2",t[3].has(t[0].id)),9&e&&R(n,"ring-blue-500",t[3].has(t[0].id))},i:t,o:t,d(t){t&&b(n),rt&&rt.d(),it&&it.d(),ot&&ot.d(),st&&st.d(),at&&at.d(),lt&&lt.d(),ct&&ct.d(),ut&&ut.d(),ft.d(),pt&&pt.d(),X=!1,r(G)}}}function vc(t,e,n){let r;c(t,Gl,t=>n(3,r=t));let{bookmark:i}=e,{parsedSearchQuery:o=null}=e;z();let s=!1;function a(t){const e=!(t&&(t.shiftKey||t.metaKey||t.ctrlKey));!function(t,e=!0){chrome.tabs.create({url:t,active:e})}(i.url,e)}return t.$$set=t=>{"bookmark"in t&&n(0,i=t.bookmark),"parsedSearchQuery"in t&&n(1,o=t.parsedSearchQuery)},[i,o,s,r,a,async function(t){t.stopPropagation(),await Ua(i.url)&&(n(2,s=!0),setTimeout(()=>n(2,s=!1),2e3))},function(t){t.stopPropagation(),Gl.toggle(i.id)},t=>"Enter"===t.key&&a(t)]}class wc extends ht{constructor(t){super(),dt(this,t,vc,xc,o,{bookmark:0,parsedSearchQuery:1})}}function kc(t){let e,n,r,i;return{c(){e=v("input"),A(e,"type","checkbox"),e.checked=n=t[4].has(t[0].id),A(e,"class","mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded")},m(n,o){y(n,e,o),r||(i=M(e,"change",t[7]),r=!0)},p(t,r){17&r&&n!==(n=t[4].has(t[0].id))&&(e.checked=n)},d(t){t&&b(e),r=!1,i()}}}function _c(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',A(e,"class","text-red-500"),A(e,"title","Dead link")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Cc(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',A(e,"class","text-green-500"),A(e,"title","Enriched with metadata")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Mc(t){let e,n,r,i,o;return{c(){e=v("span"),n=w("svg"),r=w("path"),i=w("path"),A(r,"d","M10 12a2 2 0 100-4 2 2 0 000 4z"),A(i,"fill-rule","evenodd"),A(i,"d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"),A(i,"clip-rule","evenodd"),A(n,"class","w-3.5 h-3.5"),A(n,"fill","currentColor"),A(n,"viewBox","0 0 20 20"),A(e,"class","text-blue-500 text-xs"),A(e,"title",o="Accessed "+t[0].accessCount+" times")},m(t,o){y(t,e,o),m(e,n),m(n,r),m(n,i)},p(t,n){1&n&&o!==(o="Accessed "+t[0].accessCount+" times")&&A(e,"title",o)},d(t){t&&b(e)}}}function Sc(t){let e,n,r,i,o,s,a=t[0].readingTime+"";return{c(){e=v("span"),e.textContent="|",n=_(),r=v("span"),i=k(" "),o=k(a),s=k("m"),A(e,"class","text-gray-300"),A(r,"class","text-gray-600 bg-gray-50 px-1.5 py-0.5 rounded"),A(r,"title","Estimated reading time")},m(t,a){y(t,e,a),y(t,n,a),y(t,r,a),m(r,i),m(r,o),m(r,s)},p(t,e){1&e&&a!==(a=t[0].readingTime+"")&&T(o,a)},d(t){t&&(b(e),b(n),b(r))}}}function Ac(t){let e,n;return{c(){e=w("svg"),n=w("path"),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"),A(e,"class","w-4 h-4"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,r){y(t,e,r),m(e,n)},d(t){t&&b(e)}}}function Dc(t){let e,n;return{c(){e=w("svg"),n=w("path"),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M5 13l4 4L19 7"),A(e,"class","w-4 h-4 text-green-500"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,r){y(t,e,r),m(e,n)},d(t){t&&b(e)}}}function Tc(e){let n,i,o,s,l,c,u,d,h,f,p,g,x,w,C,D,P,E,L,O,B,j,$,I,z,F,N,W,H,V,q,U,K,Y,Q,J=Qa(e[0].title,e[1])+"",X=e[0].url+"",G=Wa(e[0].dateAdded)+"",Z=e[2]&&kc(e),tt=!1===e[0].isAlive&&_c(),et=(e[0].description||e[0].keywords&&e[0].keywords.length>0)&&Cc(),nt=e[0].accessCount>0&&Mc(e),rt=e[0].readingTime&&Sc(e);function it(t,e){return t[3]?Dc:Ac}let ot=it(e),st=ot(e);return{c(){n=v("div"),i=v("div"),Z&&Z.c(),o=_(),s=v("img"),c=_(),u=v("div"),d=v("div"),h=v("div"),f=v("div"),p=v("h3"),x=_(),w=v("div"),tt&&tt.c(),C=_(),et&&et.c(),D=_(),nt&&nt.c(),P=_(),E=v("div"),L=v("span"),O=k(X),j=_(),rt&&rt.c(),$=_(),I=v("div"),z=v("span"),F=k(G),N=_(),W=v("div"),H=v("button"),H.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',V=_(),q=v("button"),st.c(),U=_(),K=v("button"),K.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>',a(s.src,l=Va(e[0]))||A(s,"src",l),A(s,"alt","Favicon"),A(s,"class","w-4 h-4 mr-3 flex-shrink-0"),A(p,"class","text-sm font-medium text-gray-900 truncate hover:text-blue-600"),A(p,"title",g=e[0].title),A(w,"class","flex items-center gap-1 flex-shrink-0"),A(f,"class","flex items-center gap-2"),A(L,"class","flex px-1.5 py-0.5 rounded truncate max-w-5xl"),A(L,"title",B=e[0].url),A(E,"class","flex items-center gap-2 text-xs text-gray-500 mt-0.5"),A(h,"class","flex-1 min-w-0 flex flex-col"),A(z,"class","text-xs text-gray-400 whitespace-nowrap hidden sm:block"),A(H,"class","p-1 text-gray-400 hover:text-purple-600"),A(H,"title","Enrich metadata now"),A(q,"class","p-1 text-gray-400 hover:text-blue-600"),A(q,"title","Copy URL"),A(K,"class","p-1 text-gray-400 hover:text-red-600"),A(K,"title","Delete bookmark"),A(W,"class","flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity svelte-hs6pz6"),A(I,"class","flex items-center gap-3 flex-shrink-0"),A(d,"class","flex items-center justify-between gap-2"),A(u,"class","flex-1 min-w-0 cursor-pointer"),A(u,"role","button"),A(u,"tabindex","0"),A(i,"class","flex items-center px-3 py-2"),A(n,"class","bookmark-list-item group bg-white border-b border-gray-200 hover:bg-gray-50 transition-colors svelte-hs6pz6"),R(n,"selected",e[4].has(e[0].id)),R(n,"bg-red-50",!1===e[0].isAlive),R(n,"border-red-200",!1===e[0].isAlive)},m(t,r){y(t,n,r),m(n,i),Z&&Z.m(i,null),m(i,o),m(i,s),m(i,c),m(i,u),m(u,d),m(d,h),m(h,f),m(f,p),p.innerHTML=J,m(f,x),m(f,w),tt&&tt.m(w,null),m(w,C),et&&et.m(w,null),m(w,D),nt&&nt.m(w,null),m(h,P),m(h,E),m(E,L),m(L,O),m(E,j),rt&&rt.m(E,null),m(d,$),m(d,I),m(I,z),m(z,F),m(I,N),m(I,W),m(W,H),m(W,V),m(W,q),st.m(q,null),m(W,U),m(W,K),Y||(Q=[M(s,"error",e[6]),M(H,"click",S(e[11])),M(q,"click",e[10]),M(K,"click",e[9]),M(u,"click",e[8]),M(u,"keydown",e[12])],Y=!0)},p(t,[e]){t[2]?Z?Z.p(t,e):(Z=kc(t),Z.c(),Z.m(i,o)):Z&&(Z.d(1),Z=null),1&e&&!a(s.src,l=Va(t[0]))&&A(s,"src",l),3&e&&J!==(J=Qa(t[0].title,t[1])+"")&&(p.innerHTML=J),1&e&&g!==(g=t[0].title)&&A(p,"title",g),!1===t[0].isAlive?tt||(tt=_c(),tt.c(),tt.m(w,C)):tt&&(tt.d(1),tt=null),t[0].description||t[0].keywords&&t[0].keywords.length>0?et||(et=Cc(),et.c(),et.m(w,D)):et&&(et.d(1),et=null),t[0].accessCount>0?nt?nt.p(t,e):(nt=Mc(t),nt.c(),nt.m(w,null)):nt&&(nt.d(1),nt=null),1&e&&X!==(X=t[0].url+"")&&T(O,X),1&e&&B!==(B=t[0].url)&&A(L,"title",B),t[0].readingTime?rt?rt.p(t,e):(rt=Sc(t),rt.c(),rt.m(E,null)):rt&&(rt.d(1),rt=null),1&e&&G!==(G=Wa(t[0].dateAdded)+"")&&T(F,G),ot!==(ot=it(t))&&(st.d(1),st=ot(t),st&&(st.c(),st.m(q,null))),17&e&&R(n,"selected",t[4].has(t[0].id)),1&e&&R(n,"bg-red-50",!1===t[0].isAlive),1&e&&R(n,"border-red-200",!1===t[0].isAlive)},i:t,o:t,d(t){t&&b(n),Z&&Z.d(),tt&&tt.d(),et&&et.d(),nt&&nt.d(),rt&&rt.d(),st.d(),Y=!1,r(Q)}}}function Pc(t,e,n){let r;c(t,Gl,t=>n(4,r=t));let{bookmark:i}=e,{parsedSearchQuery:o=null}=e,{multiSelectMode:s=!1}=e;const a=z();let l=!1;function u(t){const e=!(t&&(t.shiftKey||t.metaKey||t.ctrlKey));!function(t,e=!0){chrome.tabs.create({url:t,active:e})}(i.url,e)}return t.$$set=t=>{"bookmark"in t&&n(0,i=t.bookmark),"parsedSearchQuery"in t&&n(1,o=t.parsedSearchQuery),"multiSelectMode"in t&&n(2,s=t.multiSelectMode)},[i,o,s,l,r,a,function(t){t.target.src=Ha(i)},function(t){Gl.toggle(i.id)},u,function(t){t.stopPropagation(),a("delete",{bookmarkId:i.id})},async function(t){t.stopPropagation(),await Ua(i.url)&&(n(3,l=!0),setTimeout(()=>n(3,l=!1),2e3))},()=>a("enrich",{bookmarkId:i.id}),t=>"Enter"===t.key&&u(t)]}class Ec extends ht{constructor(t){super(),dt(this,t,Pc,Tc,o,{bookmark:0,parsedSearchQuery:1,multiSelectMode:2})}}function Lc(t,e,n){const r=t.slice();return r[13]=e[n],r}function Oc(t,e,n){const r=t.slice();return r[16]=e[n],r}function Rc(t,e,n){const r=t.slice();return r[19]=e[n],r}function Bc(t,e,n){const r=t.slice();return r[19]=e[n],r}function jc(e){let n,r,i;return{c(){n=v("button"),n.innerHTML='<svg class="h-5 w-5 text-gray-400 hover:text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',A(n,"class","absolute inset-y-0 right-0 pr-3 flex items-center"),A(n,"type","button"),A(n,"title","Clear search (Esc)")},m(t,o){y(t,n,o),r||(i=M(n,"click",e[7]),r=!0)},p:t,d(t){t&&b(n),r=!1,i()}}}function $c(t){let e,n,r,i,o=it(t[4].positive),s=[];for(let e=0;e<o.length;e+=1)s[e]=Ic(Bc(t,o,e));let a=it(t[4].negative),l=[];for(let e=0;e<a.length;e+=1)l[e]=zc(Rc(t,a,e));let c=it(t[4].phrases),u=[];for(let e=0;e<c.length;e+=1)u[e]=Fc(Oc(t,c,e));let d=it(t[4].regexPatterns),h=[];for(let e=0;e<d.length;e+=1)h[e]=Nc(Lc(t,d,e));return{c(){e=v("div");for(let t=0;t<s.length;t+=1)s[t].c();n=_();for(let t=0;t<l.length;t+=1)l[t].c();r=_();for(let t=0;t<u.length;t+=1)u[t].c();i=_();for(let t=0;t<h.length;t+=1)h[t].c();A(e,"class","flex flex-wrap gap-1.5 mt-2")},m(t,o){y(t,e,o);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);m(e,n);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);m(e,r);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(e,null);m(e,i);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null)},p(t,f){if(16&f){let r;for(o=it(t[4].positive),r=0;r<o.length;r+=1){const i=Bc(t,o,r);s[r]?s[r].p(i,f):(s[r]=Ic(i),s[r].c(),s[r].m(e,n))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}if(16&f){let n;for(a=it(t[4].negative),n=0;n<a.length;n+=1){const i=Rc(t,a,n);l[n]?l[n].p(i,f):(l[n]=zc(i),l[n].c(),l[n].m(e,r))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}if(16&f){let n;for(c=it(t[4].phrases),n=0;n<c.length;n+=1){const r=Oc(t,c,n);u[n]?u[n].p(r,f):(u[n]=Fc(r),u[n].c(),u[n].m(e,i))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}if(16&f){let n;for(d=it(t[4].regexPatterns),n=0;n<d.length;n+=1){const r=Lc(t,d,n);h[n]?h[n].p(r,f):(h[n]=Nc(r),h[n].c(),h[n].m(e,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}},d(t){t&&b(e),x(s,t),x(l,t),x(u,t),x(h,t)}}}function Ic(t){let e,n,r,i,o,s=t[19]+"";return{c(){e=v("span"),n=w("svg"),r=w("path"),i=_(),o=k(s),A(r,"fill-rule","evenodd"),A(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),A(r,"clip-rule","evenodd"),A(n,"class","w-3 h-3 mr-1"),A(n,"fill","currentColor"),A(n,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800")},m(t,s){y(t,e,s),m(e,n),m(n,r),m(e,i),m(e,o)},p(t,e){16&e&&s!==(s=t[19]+"")&&T(o,s)},d(t){t&&b(e)}}}function zc(t){let e,n,r,i,o,s=t[19]+"";return{c(){e=v("span"),n=w("svg"),r=w("path"),i=_(),o=k(s),A(r,"fill-rule","evenodd"),A(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"),A(r,"clip-rule","evenodd"),A(n,"class","w-3 h-3 mr-1"),A(n,"fill","currentColor"),A(n,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800")},m(t,s){y(t,e,s),m(e,n),m(n,r),m(e,i),m(e,o)},p(t,e){16&e&&s!==(s=t[19]+"")&&T(o,s)},d(t){t&&b(e)}}}function Fc(t){let e,n,r,i,o,s,a=t[16]+"";return{c(){e=v("span"),n=w("svg"),r=w("path"),i=k('\n          "'),o=k(a),s=k('"'),A(r,"fill-rule","evenodd"),A(r,"d","M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z"),A(r,"clip-rule","evenodd"),A(n,"class","w-3 h-3 mr-1"),A(n,"fill","currentColor"),A(n,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800")},m(t,a){y(t,e,a),m(e,n),m(n,r),m(e,i),m(e,o),m(e,s)},p(t,e){16&e&&a!==(a=t[16]+"")&&T(o,a)},d(t){t&&b(e)}}}function Nc(t){let e,n,r,i,o,s,a=t[13]+"";return{c(){e=v("span"),n=w("svg"),r=w("path"),i=_(),o=k(a),s=_(),A(r,"stroke-linecap","round"),A(r,"stroke-linejoin","round"),A(r,"stroke-width","2"),A(r,"d","M10 20l4-16m4 4l-4 4 4 4M6 16l-4-4 4-4"),A(n,"class","w-3 h-3 mr-1"),A(n,"fill","none"),A(n,"stroke","currentColor"),A(n,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800")},m(t,a){y(t,e,a),m(e,n),m(n,r),m(e,i),m(e,o),m(e,s)},p(t,e){16&e&&a!==(a=t[13]+"")&&T(o,a)},d(t){t&&b(e)}}}function Wc(t){let e;return{c(){e=v("div"),e.innerHTML='<h4 class="font-medium text-gray-900 mb-3 flex items-center gap-2"><svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>\n        Search Syntax</h4> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-green-100 text-green-800 rounded text-xs whitespace-nowrap">+term</code> <span class="text-gray-600">Must include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-800 rounded text-xs whitespace-nowrap">-term</code> <span class="text-gray-600">Must NOT include this term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-blue-100 text-blue-800 rounded text-xs whitespace-nowrap">&quot;exact phrase&quot;</code> <span class="text-gray-600">Match exact phrase</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-gray-100 text-gray-700 rounded text-xs whitespace-nowrap">word</code> <span class="text-gray-600">Regular search term</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-purple-100 text-purple-800 rounded text-xs whitespace-nowrap">/regex/</code> <span class="text-gray-600">Regular expression pattern</span></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><svg class="w-4 h-4 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>\n          Special Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">category:tech</code> <span class="text-gray-600"> Filter by category</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">domain:github.com</code> <span class="text-gray-600"> Filter by domain</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-indigo-100 text-indigo-800 rounded text-xs whitespace-nowrap">folder:&quot;Work/Projects&quot;</code> <span class="text-gray-600"> Filter by folder path</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">accessed:yes</code> <span class="text-gray-600"> Has been accessed (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-amber-100 text-amber-800 rounded text-xs whitespace-nowrap">stale:yes</code> <span class="text-gray-600"> Old &amp; never accessed</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-teal-100 text-teal-800 rounded text-xs whitespace-nowrap">enriched:yes</code> <span class="text-gray-600"> Has metadata (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-red-100 text-red-700 rounded text-xs whitespace-nowrap">dead:yes</code> <span class="text-gray-600"> Dead links (yes/no)</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><h5 class="font-medium text-gray-800 mb-2 flex items-center gap-2 text-sm"><span class="text-lg"></span>\n          Platform Filters</h5> <div class="space-y-2 text-sm"><div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">platform:youtube</code> <span class="text-gray-600"> Filter by platform (youtube, github, medium, etc.)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">channel:@mkbhd</code> <span class="text-gray-600"> YouTube channel (with or without @)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">repo:facebook/react</code> <span class="text-gray-600"> GitHub repository (owner/repo)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">author:username</code> <span class="text-gray-600"> Blog/article author</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">type:video</code> <span class="text-gray-600"> Content type (video, issue, article, repo, pr)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">hasimage:yes</code> <span class="text-gray-600"> Has thumbnail image (yes/no)</span></div> <div class="flex items-start gap-3"><code class="px-1.5 py-0.5 bg-pink-100 text-pink-800 rounded text-xs whitespace-nowrap">playlist:PLxxx</code> <span class="text-gray-600"> YouTube playlist ID</span></div></div></div> <div class="mt-4 pt-3 border-t border-gray-100"><p class="text-xs text-gray-500"><strong>Example:</strong> <code class="bg-gray-100 px-1 rounded">javascript +tutorial -video &quot;best practices&quot;</code></p> <p class="text-xs text-gray-500 mt-1"><strong>With filters:</strong> <code class="bg-gray-100 px-1 rounded">domain:github.com category:development enriched:yes</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Platform:</strong> <code class="bg-gray-100 px-1 rounded">platform:youtube channel:@fireship type:video</code></p> <p class="text-xs text-gray-500 mt-1"><strong>Regex:</strong> <code class="bg-gray-100 px-1 rounded">/react.*hooks?/</code></p></div>',A(e,"class","absolute z-20 w-full mt-2 p-4 bg-white border border-gray-200 rounded-lg shadow-lg max-h-[70vh] overflow-y-auto")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Hc(e){let n,i,o,s,a,l,c,u,d,h,f,p,g,x=e[0]&&jc(e),w=e[0]&&(e[4].positive.length>0||e[4].negative.length>0||e[4].phrases.length>0||e[4].regexPatterns.length>0)&&$c(e),k=e[3]&&Wc();return{c(){n=v("div"),i=v("div"),o=v("div"),s=v("div"),s.innerHTML='<svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',a=_(),l=v("input"),c=_(),x&&x.c(),u=_(),d=v("button"),d.innerHTML='<svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',h=_(),w&&w.c(),f=_(),k&&k.c(),A(s,"class","absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"),A(l,"type","text"),A(l,"placeholder",e[1]),A(l,"class","block w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"),A(l,"autocomplete","off"),A(l,"spellcheck","false"),A(o,"class","relative flex-1"),A(d,"class","p-2.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg border border-gray-300 transition-colors"),A(d,"type","button"),A(d,"title","Search help"),A(i,"class","flex items-center gap-2"),A(n,"class","relative mb-4 search-container")},m(t,r){y(t,n,r),m(n,i),m(i,o),m(o,s),m(o,a),m(o,l),e[9](l),P(l,e[0]),m(o,c),x&&x.m(o,null),m(i,u),m(i,d),m(n,h),w&&w.m(n,null),m(n,f),k&&k.m(n,null),p||(g=[M(l,"input",e[10]),M(l,"input",e[5]),M(l,"focus",Vc),M(l,"keydown",e[6]),M(d,"click",e[8])],p=!0)},p(t,[e]){2&e&&A(l,"placeholder",t[1]),1&e&&l.value!==t[0]&&P(l,t[0]),t[0]?x?x.p(t,e):(x=jc(t),x.c(),x.m(o,null)):x&&(x.d(1),x=null),t[0]&&(t[4].positive.length>0||t[4].negative.length>0||t[4].phrases.length>0||t[4].regexPatterns.length>0)?w?w.p(t,e):(w=$c(t),w.c(),w.m(n,f)):w&&(w.d(1),w=null),t[3]?k||(k=Wc(),k.c(),k.m(n,null)):k&&(k.d(1),k=null)},i:t,o:t,d(t){t&&b(n),e[9](null),x&&x.d(),w&&w.d(),k&&k.d(),p=!1,r(g)}}}function Vc(){}function qc(t,e,n){let r;const i=z();let o,s,{value:a=""}=e,{placeholder:l='Search: use +term (must include), -term (exclude), "exact phrase"'}=e,c=!1;function u(){n(0,a=""),i("search",{query:""}),s?.focus()}return I(()=>{}),t.$$set=t=>{"value"in t&&n(0,a=t.value),"placeholder"in t&&n(1,l=t.placeholder)},t.$$.update=()=>{1&t.$$.dirty&&n(4,r=function(t){if(!t)return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[]};const e=[],n=[],r=[],i=[],o=[];(t.match(/\/([^\/]+)\/([gimsuvy]*)?/g)||[]).forEach(t=>o.push(t));let s=t.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();return(s.match(/"([^"]+)"/g)||[]).forEach(t=>r.push(t.slice(1,-1))),s=s.replace(/"[^"]+"/g,"").trim(),s.split(/\s+/).filter(t=>t.length>0).forEach(t=>{t.startsWith("+")&&t.length>1?e.push(t.slice(1)):t.startsWith("-")&&t.length>1?n.push(t.slice(1)):i.push(t)}),{positive:e,negative:n,phrases:r,regular:i,regexPatterns:o}}(a))},[a,l,s,c,r,function(t){n(0,a=t.target.value),clearTimeout(o),o=setTimeout(()=>{i("search",{query:a})},200)},function(t){"Escape"===t.key?u():"Enter"===t.key&&(clearTimeout(o),i("search",{query:a}))},u,function(){n(3,c=!c)},function(t){W[t?"unshift":"push"](()=>{s=t,n(2,s)})},function(){a=this.value,n(0,a)}]}class Uc extends ht{constructor(t){super(),dt(this,t,qc,Hc,o,{value:0,placeholder:1})}}const Kc={tech:{id:"tech",name:"Technology",icon:"",keywords:["technology","tech","software","hardware","computer","digital","gadget","device","smartphone","laptop","pc","server","cloud","saas","startup","silicon valley","innovation"],domains:["techcrunch.com","theverge.com","arstechnica.com","wired.com","engadget.com","gizmodo.com","cnet.com","zdnet.com","venturebeat.com"],subtopics:{ai:{id:"tech/ai",name:"AI & Machine Learning",keywords:["artificial intelligence","machine learning","deep learning","neural network","nlp","natural language","computer vision","llm","gpt","transformer","reinforcement learning","supervised learning","unsupervised","chatgpt","openai","anthropic","claude","gemini","stable diffusion","midjourney","data science","ml ops","model training","inference","embeddings"],domains:["openai.com","huggingface.co","arxiv.org","paperswithcode.com"]},web3:{id:"tech/web3",name:"Web3 & Blockchain",keywords:["blockchain","cryptocurrency","crypto","bitcoin","ethereum","web3","defi","nft","smart contract","solidity","wallet","token","dao"],domains:["coinbase.com","binance.com","etherscan.io","opensea.io"]}}},coding:{id:"coding",name:"Programming",icon:"",keywords:["programming","coding","developer","development","code","software engineering","backend","frontend","fullstack","full-stack","devops","api","sdk","framework","library","package","module","dependency","npm","pip","git","version control","debugging","testing","deployment","ci/cd"],domains:["github.com","gitlab.com","bitbucket.org","stackoverflow.com","npmjs.com","pypi.org","crates.io","packagist.org","rubygems.org"],subtopics:{javascript:{id:"coding/javascript",name:"JavaScript",keywords:["javascript","typescript","node.js","nodejs","react","vue","angular","svelte","nextjs","next.js","nuxt","express","deno","bun","vite","webpack","esbuild","rollup","jsx","tsx","ecmascript","es6","es2020"],domains:["nodejs.org","reactjs.org","vuejs.org","svelte.dev"]},python:{id:"coding/python",name:"Python",keywords:["python","django","flask","fastapi","pandas","numpy","pytorch","tensorflow","scikit-learn","jupyter","notebook","pip","conda","virtualenv","asyncio","pydantic","sqlalchemy"],domains:["python.org","pypi.org","realpython.com","djangoproject.com"]},rust:{id:"coding/rust",name:"Rust",keywords:["rust","rustlang","cargo","crate","tokio","async-std","wasm"],domains:["rust-lang.org","crates.io","docs.rs"]},go:{id:"coding/go",name:"Go",keywords:["golang","go language","goroutine","gin","fiber","echo"],domains:["golang.org","go.dev","pkg.go.dev"]}}},tutorials:{id:"tutorials",name:"Tutorials",icon:"",keywords:["tutorial","how to","howto","how-to","guide","learn","learning","beginner","introduction","intro to","getting started","step by step","step-by-step","walkthrough","explained","crash course","masterclass","fundamentals","basics","complete guide","definitive guide","cheatsheet","cheat sheet","quick start","quickstart"],domains:["tutorialspoint.com","w3schools.com","freecodecamp.org","codecademy.com","coursera.org","udemy.com","pluralsight.com","egghead.io","frontendmasters.com","levelup.gitconnected.com"]},blogs:{id:"blogs",name:"Blogs & Articles",icon:"",keywords:["blog","article","post","opinion","essay","thoughts on","my experience","story","journey","lessons learned","reflection","review"],domains:["medium.com","dev.to","hashnode.com","substack.com","wordpress.com","blogger.com","ghost.io","mirror.xyz"]},videos:{id:"videos",name:"Videos",icon:"",keywords:["video","watch","stream","streaming","episode","podcast","webinar","talk","presentation","conference talk","keynote","demo","screencast"],domains:["youtube.com","youtu.be","vimeo.com","twitch.tv","dailymotion.com","loom.com","wistia.com","ted.com"]},religious:{id:"religious",name:"Religious & Spiritual",icon:"",keywords:["islam","islamic","muslim","quran","hadith","sunnah","prophet","allah","prayer","salah","fasting","ramadan","hajj","zakat","mosque","masjid","imam","sheikh","fatwa","halal","haram","christianity","christian","bible","jesus","church","gospel","judaism","jewish","torah","synagogue","rabbi","buddhism","buddhist","meditation","dharma","zen","hinduism","hindu","yoga","vedic","spirituality","spiritual","faith","belief","worship","religious","religion","scripture","sermon","dua","tafsir","recitation","tilawah"],domains:["islamqa.info","sunnah.com","quran.com","islamweb.net","biblegateway.com","gotquestions.org","chabad.org","myjewishlearning.com"]},news:{id:"news",name:"News",icon:"",keywords:["news","breaking","headline","report","latest","update","announcement","press release","coverage","journalism","current events","world news"],domains:["reuters.com","apnews.com","bbc.com","cnn.com","nytimes.com","theguardian.com","washingtonpost.com","wsj.com","bloomberg.com","aljazeera.com","news.ycombinator.com"]},tools:{id:"tools",name:"Tools & Apps",icon:"",keywords:["tool","app","application","utility","extension","plugin","addon","software","platform","service","saas","free tool","online tool","generator","converter","calculator","formatter","validator","linter"],domains:["notion.so","figma.com","canva.com","trello.com","asana.com","slack.com","discord.com","vercel.com","netlify.com","heroku.com","postman.com","insomnia.rest"]},documentation:{id:"documentation",name:"Documentation",icon:"",keywords:["documentation","docs","api reference","api docs","reference","specification","spec","manual","handbook","wiki","changelog","release notes","readme"],domains:["docs.github.com","developer.mozilla.org","devdocs.io","readthedocs.org","gitbook.io","notion.site","confluence.atlassian.com"]},research:{id:"research",name:"Research & Papers",icon:"",keywords:["research","paper","study","academic","journal","publication","thesis","dissertation","peer-reviewed","scientific","experiment","findings","methodology","abstract","citation","arxiv"],domains:["arxiv.org","scholar.google.com","researchgate.net","academia.edu","semanticscholar.org","paperswithcode.com","nature.com","sciencedirect.com"]},design:{id:"design",name:"Design & UI/UX",icon:"",keywords:["design","ui","ux","user interface","user experience","graphic design","web design","visual design","typography","color","layout","wireframe","prototype","mockup","figma","sketch","adobe","illustration","icon","logo","branding","animation","motion design"],domains:["figma.com","dribbble.com","behance.net","awwwards.com","uxdesign.cc","smashingmagazine.com","nngroup.com","invisionapp.com"]},career:{id:"career",name:"Career & Jobs",icon:"",keywords:["career","job","hiring","interview","resume","cv","portfolio","salary","remote work","freelance","contract","employment","recruiting","linkedin","networking","job search","tech job"],domains:["linkedin.com","indeed.com","glassdoor.com","levels.fyi","wellfound.com","remoteok.io","weworkremotely.com","dice.com"]},entertainment:{id:"entertainment",name:"Entertainment",icon:"",keywords:["entertainment","game","gaming","movie","film","tv","series","anime","manga","comic","music","song","album","artist","sports","esports","hobby","fun","leisure"],domains:["imdb.com","rottentomatoes.com","ign.com","gamespot.com","spotify.com","netflix.com","twitch.tv","steamcommunity.com"]},finance:{id:"finance",name:"Finance & Investing",icon:"",keywords:["finance","investing","investment","stock","market","trading","portfolio","dividend","etf","mutual fund","retirement","401k","savings","budgeting","financial planning","wealth","money"],domains:["yahoo.com/finance","investopedia.com","fool.com","seekingalpha.com","morningstar.com","robinhood.com","fidelity.com","vanguard.com"]},productivity:{id:"productivity",name:"Productivity",icon:"",keywords:["productivity","workflow","automation","efficiency","time management","task management","project management","organization","habit","goal setting","focus","gtd","getting things done","lifehack"],domains:["notion.so","todoist.com","asana.com","monday.com","clickup.com","obsidian.md","roamresearch.com","zapier.com","make.com"]},security:{id:"security",name:"Security & Privacy",icon:"",keywords:["security","cybersecurity","privacy","hacking","vulnerability","exploit","penetration testing","pentest","encryption","authentication","authorization","oauth","jwt","ssl","tls","firewall","vpn","password","malware","ransomware","phishing","data breach"],domains:["owasp.org","hackerone.com","security.stackexchange.com","krebsonsecurity.com","schneier.com","thehackernews.com"]}};function Yc(t){const e=function(t){if(!t)return null;const e=t.split("/"),n=Kc[e[0]];if(!n)return null;if(1===e.length)return{id:n.id,name:n.name,icon:n.icon,isSubtopic:!1};const r=n.subtopics?.[e[1]];return r?{id:r.id,name:r.name,icon:n.icon,isSubtopic:!0,parentId:n.id,parentName:n.name}:null}(t);return e?`${e.icon} ${e.name}`:t}function Qc(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Jc(t,e,n){const r=t.slice();return r[75]=e[n],r}function Xc(t,e,n){const r=t.slice();r[78]=e[n];const i=r[22]("creators",`${r[78].platform}:${r[78].creator}`);return r[79]=i,r}function Gc(t,e,n){const r=t.slice();return r[82]=e[n],r}function Zc(t,e,n){const r=t.slice();return r[85]=e[n],r}function tu(t,e,n){const r=t.slice();return r[88]=e[n],r}function eu(t,e,n){const r=t.slice();return r[91]=e[n],r}function nu(t,e,n){const r=t.slice();return r[94]=e[n],r}function ru(t,e,n){const r=t.slice();return r[97]=e[n],r}function iu(t,e,n){const r=t.slice();return r[100]=e[n],r}function ou(t,e,n){const r=t.slice();return r[103]=e[n],r}function su(e){let n,r,i;return{c(){n=v("button"),n.textContent="Clear All",A(n,"class","text-xs text-blue-600 hover:text-blue-800")},m(t,o){y(t,n,o),r||(i=M(n,"click",e[28]),r=!0)},p:t,d(t){t&&b(n),r=!1,i()}}}function au(t){let e,n,r,i,o,s,a=it(t[3].topics),l=[];for(let e=0;e<a.length;e+=1)l[e]=lu(ou(t,a,e));let c=it(t[3].creators),u=[];for(let e=0;e<c.length;e+=1)u[e]=cu(iu(t,c,e));let d=it(t[3].types),h=[];for(let e=0;e<d.length;e+=1)h[e]=uu(ru(t,d,e));let f=it(t[3].domains),p=[];for(let e=0;e<f.length;e+=1)p[e]=du(nu(t,f,e));let g=it(t[3].folders),w=[];for(let e=0;e<g.length;e+=1)w[e]=hu(eu(t,g,e));let k=t[3].dateRange&&fu(t);return{c(){e=v("div");for(let t=0;t<l.length;t+=1)l[t].c();n=_();for(let t=0;t<u.length;t+=1)u[t].c();r=_();for(let t=0;t<h.length;t+=1)h[t].c();i=_();for(let t=0;t<p.length;t+=1)p[t].c();o=_();for(let t=0;t<w.length;t+=1)w[t].c();s=_(),k&&k.c(),A(e,"class","mb-4 flex flex-wrap gap-2")},m(t,a){y(t,e,a);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);m(e,n);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(e,null);m(e,r);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null);m(e,i);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(e,null);m(e,o);for(let t=0;t<w.length;t+=1)w[t]&&w[t].m(e,null);m(e,s),k&&k.m(e,null)},p(t,m){if(33554440&m[0]){let r;for(a=it(t[3].topics),r=0;r<a.length;r+=1){const i=ou(t,a,r);l[r]?l[r].p(i,m):(l[r]=lu(i),l[r].c(),l[r].m(e,n))}for(;r<l.length;r+=1)l[r].d(1);l.length=a.length}if(67108872&m[0]){let n;for(c=it(t[3].creators),n=0;n<c.length;n+=1){const i=iu(t,c,n);u[n]?u[n].p(i,m):(u[n]=cu(i),u[n].c(),u[n].m(e,r))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}if(134217736&m[0]){let n;for(d=it(t[3].types),n=0;n<d.length;n+=1){const r=ru(t,d,n);h[n]?h[n].p(r,m):(h[n]=uu(r),h[n].c(),h[n].m(e,i))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}if(8388616&m[0]){let n;for(f=it(t[3].domains),n=0;n<f.length;n+=1){const r=nu(t,f,n);p[n]?p[n].p(r,m):(p[n]=du(r),p[n].c(),p[n].m(e,o))}for(;n<p.length;n+=1)p[n].d(1);p.length=f.length}if(16777224&m[0]){let n;for(g=it(t[3].folders),n=0;n<g.length;n+=1){const r=eu(t,g,n);w[n]?w[n].p(r,m):(w[n]=hu(r),w[n].c(),w[n].m(e,s))}for(;n<w.length;n+=1)w[n].d(1);w.length=g.length}t[3].dateRange?k?k.p(t,m):(k=fu(t),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},d(t){t&&b(e),x(l,t),x(u,t),x(h,t),x(p,t),x(w,t),k&&k.d()}}}function lu(t){let e,n,r,i,o,s,a,l=Yc(t[103])+"";function c(){return t[42](t[103])}return{c(){e=v("div"),n=v("div"),r=k(l),i=_(),o=v("button"),o.textContent="",A(n,"class","text-[10px] text-indigo-800"),A(o,"class","text-indigo-600 hover:text-indigo-800 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-indigo-50 rounded-md border border-indigo-100")},m(t,l){y(t,e,l),m(e,n),m(n,r),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,n){t=e,8&n[0]&&l!==(l=Yc(t[103])+"")&&T(r,l)},d(t){t&&b(e),s=!1,a()}}}function cu(t){let e,n,r,i,o,s,a,l=t[100].creator+"";function c(){return t[43](t[100])}return{c(){e=v("div"),n=v("div"),r=k(l),i=_(),o=v("button"),o.textContent="",A(n,"class","text-[10px] text-pink-800"),A(o,"class","text-pink-600 hover:text-pink-800 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-pink-50 rounded-md border border-pink-100")},m(t,l){y(t,e,l),m(e,n),m(n,r),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,n){t=e,8&n[0]&&l!==(l=t[100].creator+"")&&T(r,l)},d(t){t&&b(e),s=!1,a()}}}function uu(t){let e,n,r,i,o,s,a,l=al(t[97])+"";function c(){return t[44](t[97])}return{c(){e=v("div"),n=v("div"),r=k(l),i=_(),o=v("button"),o.textContent="",A(n,"class","text-[10px] text-orange-800"),A(o,"class","text-orange-600 hover:text-orange-800 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-orange-50 rounded-md border border-orange-100")},m(t,l){y(t,e,l),m(e,n),m(n,r),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,n){t=e,8&n[0]&&l!==(l=al(t[97])+"")&&T(r,l)},d(t){t&&b(e),s=!1,a()}}}function du(t){let e,n,r,i,o,s,a,l=t[94]+"";function c(){return t[45](t[94])}return{c(){e=v("div"),n=v("div"),r=k(l),i=_(),o=v("button"),o.textContent="",A(n,"class","text-[10px] text-blue-800"),A(o,"class","text-blue-600 hover:text-blue-800 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-blue-50 rounded-md border border-blue-100")},m(t,l){y(t,e,l),m(e,n),m(n,r),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,n){t=e,8&n[0]&&l!==(l=t[94]+"")&&T(r,l)},d(t){t&&b(e),s=!1,a()}}}function hu(t){let e,n,r,i,o,s,a,l=t[91]+"";function c(){return t[46](t[91])}return{c(){e=v("div"),n=v("div"),r=k(l),i=_(),o=v("button"),o.textContent="",A(n,"class","text-[10px] text-green-800"),A(o,"class","text-green-600 hover:text-green-800 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-green-50 rounded-md border border-green-100")},m(t,l){y(t,e,l),m(e,n),m(n,r),m(e,i),m(e,o),s||(a=M(o,"click",c),s=!0)},p(e,n){t=e,8&n[0]&&l!==(l=t[91]+"")&&T(r,l)},d(t){t&&b(e),s=!1,a()}}}function fu(t){let e,n,r,i,o,s,a,l="week"===t[3].dateRange.period?"This Week":"twoWeek"===t[3].dateRange.period?"This 2-Week":"month"===t[3].dateRange.period?"This Month":"threeMonth"===t[3].dateRange.period?"This 3-Month":"sixMonth"===t[3].dateRange.period?"This 6-Month":"year"===t[3].dateRange.period?"This Year":"Older";return{c(){e=v("div"),n=v("div"),r=k(l),i=_(),o=v("button"),o.textContent="",A(n,"class","text-[10px] text-purple-800"),A(o,"class","text-purple-600 hover:text-purple-800 font-bold"),A(e,"class","flex items-center space-x-1 p-1.5 bg-purple-50 rounded-md border border-purple-100")},m(l,c){y(l,e,c),m(e,n),m(n,r),m(e,i),m(e,o),s||(a=M(o,"click",t[47]),s=!0)},p(t,e){8&e[0]&&l!==(l="week"===t[3].dateRange.period?"This Week":"twoWeek"===t[3].dateRange.period?"This 2-Week":"month"===t[3].dateRange.period?"This Month":"threeMonth"===t[3].dateRange.period?"This 3-Month":"sixMonth"===t[3].dateRange.period?"This 6-Month":"year"===t[3].dateRange.period?"This Year":"Older")&&T(r,l)},d(t){t&&b(e),s=!1,a()}}}function pu(t){let e,n,r,i=t[15].length+"";return{c(){e=k(" Domains ("),n=k(i),r=k(")")},m(t,i){y(t,e,i),y(t,n,i),y(t,r,i)},p(t,e){32768&e[0]&&i!==(i=t[15].length+"")&&T(n,i)},d(t){t&&(b(e),b(n),b(r))}}}function gu(t){let e,n,r,i,o=t[15].length+"";return{c(){e=v("span"),n=k("Matching Domains ("),r=k(o),i=k(")"),A(e,"class","text-blue-600")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i)},p(t,e){32768&e[0]&&o!==(o=t[15].length+"")&&T(r,o)},d(t){t&&b(e)}}}function mu(t){let e,n,r,i=!t[0]&&yu(t),o=it(t[15].slice(0,t[4])),s=[];for(let e=0;e<o.length;e+=1)s[e]=bu(tu(t,o,e));let a=t[15].length>t[4]&&xu(t);return{c(){i&&i.c(),e=_(),n=v("div");for(let t=0;t<s.length;t+=1)s[t].c();r=_(),a&&a.c(),A(n,"class","flex gap-2 overflow-x-auto pb-2"),E(n,"max-height","200px"),E(n,"flex-wrap","wrap")},m(t,o){i&&i.m(t,o),y(t,e,o),y(t,n,o);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(n,null);m(n,r),a&&a.m(n,null)},p(t,l){if(t[0]?i&&(i.d(1),i=null):i?i.p(t,l):(i=yu(t),i.c(),i.m(e.parentNode,e)),12615696&l[0]){let e;for(o=it(t[15].slice(0,t[4])),e=0;e<o.length;e+=1){const i=tu(t,o,e);s[e]?s[e].p(i,l):(s[e]=bu(i),s[e].c(),s[e].m(n,r))}for(;e<s.length;e+=1)s[e].d(1);s.length=o.length}t[15].length>t[4]?a?a.p(t,l):(a=xu(t),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},d(t){t&&(b(e),b(n)),i&&i.d(t),x(s,t),a&&a.d()}}}function yu(t){let e,n,i,o,s,a;return{c(){e=v("div"),n=v("button"),n.textContent="Recent",i=_(),o=v("button"),o.textContent="Count",A(n,"class","text-[10px] px-1.5 py-0.5 rounded"),A(n,"title","Sort by most recent bookmark"),R(n,"bg-blue-100","recency"===t[1]),R(n,"text-blue-700","recency"===t[1]),R(n,"text-gray-500","recency"!==t[1]),A(o,"class","text-[10px] px-1.5 py-0.5 rounded"),A(o,"title","Sort by bookmark count"),R(o,"bg-blue-100","count"===t[1]),R(o,"text-blue-700","count"===t[1]),R(o,"text-gray-500","count"!==t[1]),A(e,"class","flex space-x-1 mb-2")},m(r,l){y(r,e,l),m(e,n),m(e,i),m(e,o),s||(a=[M(n,"click",t[49]),M(o,"click",t[50])],s=!0)},p(t,e){2&e[0]&&R(n,"bg-blue-100","recency"===t[1]),2&e[0]&&R(n,"text-blue-700","recency"===t[1]),2&e[0]&&R(n,"text-gray-500","recency"!==t[1]),2&e[0]&&R(o,"bg-blue-100","count"===t[1]),2&e[0]&&R(o,"text-blue-700","count"===t[1]),2&e[0]&&R(o,"text-gray-500","count"!==t[1])},d(t){t&&b(e),s=!1,r(a)}}}function bu(t){let e,n,r,i,o,s,a,l,c,u=t[88].domain+"",d=t[88].count+"";function h(){return t[51](t[88])}return{c(){e=v("button"),n=v("span"),r=k(u),i=_(),o=v("span"),s=k(d),A(n,"class","font-medium"),A(o,"class","text-[10px] text-gray-400"),A(e,"class","flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 rounded border flex items-center gap-1.5"),A(e,"title",a=t[88].domain),R(e,"bg-blue-50",t[22]("domains",t[88].domain)),R(e,"text-blue-700",t[22]("domains",t[88].domain)),R(e,"border-blue-200",t[22]("domains",t[88].domain)),R(e,"text-gray-600",!t[22]("domains",t[88].domain)),R(e,"border-transparent",!t[22]("domains",t[88].domain))},m(t,a){y(t,e,a),m(e,n),m(n,r),m(e,i),m(e,o),m(o,s),l||(c=M(e,"click",h),l=!0)},p(n,i){t=n,32784&i[0]&&u!==(u=t[88].domain+"")&&T(r,u),32784&i[0]&&d!==(d=t[88].count+"")&&T(s,d),32784&i[0]&&a!==(a=t[88].domain)&&A(e,"title",a),4227088&i[0]&&R(e,"bg-blue-50",t[22]("domains",t[88].domain)),4227088&i[0]&&R(e,"text-blue-700",t[22]("domains",t[88].domain)),4227088&i[0]&&R(e,"border-blue-200",t[22]("domains",t[88].domain)),4227088&i[0]&&R(e,"text-gray-600",!t[22]("domains",t[88].domain)),4227088&i[0]&&R(e,"border-transparent",!t[22]("domains",t[88].domain))},d(t){t&&b(e),l=!1,c()}}}function xu(e){let n,r,i;return{c(){n=v("button"),n.textContent="Load More",A(n,"class","w-full text-center px-2 py-1.5 text-xs text-blue-600 hover:bg-blue-50 rounded border border-blue-200 mt-2")},m(t,o){y(t,n,o),r||(i=M(n,"click",e[16]),r=!0)},p:t,d(t){t&&b(n),r=!1,i()}}}function vu(t){let e,n,r,i=t[14].length+"";return{c(){e=k(" Folders ("),n=k(i),r=k(")")},m(t,i){y(t,e,i),y(t,n,i),y(t,r,i)},p(t,e){16384&e[0]&&i!==(i=t[14].length+"")&&T(n,i)},d(t){t&&(b(e),b(n),b(r))}}}function wu(t){let e,n,r,i,o=t[14].length+"";return{c(){e=v("span"),n=k("Matching Folders ("),r=k(o),i=k(")"),A(e,"class","text-blue-600")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i)},p(t,e){16384&e[0]&&o!==(o=t[14].length+"")&&T(r,o)},d(t){t&&b(e)}}}function ku(t){let e,n,r=it(t[14].slice(0,t[5])),i=[];for(let e=0;e<r.length;e+=1)i[e]=_u(Zc(t,r,e));let o=t[14].length>t[5]&&Cu(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();n=_(),o&&o.c(),A(e,"class","flex gap-2 overflow-x-auto pb-2"),E(e,"max-height","200px"),E(e,"flex-wrap","wrap")},m(t,r){y(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,n),o&&o.m(e,null)},p(t,s){if(20987936&s[0]){let o;for(r=it(t[14].slice(0,t[5])),o=0;o<r.length;o+=1){const a=Zc(t,r,o);i[o]?i[o].p(a,s):(i[o]=_u(a),i[o].c(),i[o].m(e,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}t[14].length>t[5]?o?o.p(t,s):(o=Cu(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&b(e),x(i,t),o&&o.d()}}}function _u(t){let e,n,r,i,o,s,a,l,c,u,d=t[85].folder.toLowerCase().replace("bookmarks","")+"",h=t[85].count+"";function f(){return t[53](t[85])}return{c(){e=v("button"),n=v("span"),r=k(" "),i=k(d),o=_(),s=v("span"),a=k(h),A(n,"class","font-medium"),A(s,"class","text-[10px] text-gray-400"),A(e,"class","flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 rounded border flex items-center gap-1.5"),A(e,"title",l=t[85].folder),R(e,"bg-green-50",t[22]("folders",t[85].folder)),R(e,"text-green-700",t[22]("folders",t[85].folder)),R(e,"border-green-200",t[22]("folders",t[85].folder)),R(e,"text-gray-600",!t[22]("folders",t[85].folder)),R(e,"border-transparent",!t[22]("folders",t[85].folder))},m(t,l){y(t,e,l),m(e,n),m(n,r),m(n,i),m(e,o),m(e,s),m(s,a),c||(u=M(e,"click",f),c=!0)},p(n,r){t=n,16416&r[0]&&d!==(d=t[85].folder.toLowerCase().replace("bookmarks","")+"")&&T(i,d),16416&r[0]&&h!==(h=t[85].count+"")&&T(a,h),16416&r[0]&&l!==(l=t[85].folder)&&A(e,"title",l),4210720&r[0]&&R(e,"bg-green-50",t[22]("folders",t[85].folder)),4210720&r[0]&&R(e,"text-green-700",t[22]("folders",t[85].folder)),4210720&r[0]&&R(e,"border-green-200",t[22]("folders",t[85].folder)),4210720&r[0]&&R(e,"text-gray-600",!t[22]("folders",t[85].folder)),4210720&r[0]&&R(e,"border-transparent",!t[22]("folders",t[85].folder))},d(t){t&&b(e),c=!1,u()}}}function Cu(e){let n,r,i;return{c(){n=v("button"),n.textContent="Load More",A(n,"class","w-full text-center px-2 py-1.5 text-xs text-green-600 hover:bg-green-50 rounded border border-green-200 mt-2")},m(t,o){y(t,n,o),r||(i=M(n,"click",e[17]),r=!0)},p:t,d(t){t&&b(n),r=!1,i()}}}function Mu(t){let e,n,r,i,o,s,a,l,c,u,d,h,f=t[13].length+"",p=t[9].topics?"":"",g=t[9].topics&&Su(t);return{c(){e=v("div"),n=v("button"),r=v("span"),i=k(" Topics ("),o=k(f),s=k(")"),a=_(),l=v("span"),c=k(p),u=_(),g&&g.c(),A(l,"class","text-gray-400"),A(n,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),A(e,"class","mb-0")},m(f,p){y(f,e,p),m(e,n),m(n,r),m(r,i),m(r,o),m(r,s),m(n,a),m(n,l),m(l,c),m(e,u),g&&g.m(e,null),d||(h=M(n,"click",t[54]),d=!0)},p(t,n){8192&n[0]&&f!==(f=t[13].length+"")&&T(o,f),512&n[0]&&p!==(p=t[9].topics?"":"")&&T(c,p),t[9].topics?g?g.p(t,n):(g=Su(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(t){t&&b(e),g&&g.d(),d=!1,h()}}}function Su(t){let e,n,r=it(t[13].slice(0,t[8])),i=[];for(let e=0;e<r.length;e+=1)i[e]=Au(Gc(t,r,e));let o=t[13].length>t[8]&&Du(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();n=_(),o&&o.c(),A(e,"class","flex gap-2 overflow-x-auto pb-2"),E(e,"max-height","200px"),E(e,"flex-wrap","wrap")},m(t,r){y(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,n),o&&o.m(e,null)},p(t,s){if(37757184&s[0]){let o;for(r=it(t[13].slice(0,t[8])),o=0;o<r.length;o+=1){const a=Gc(t,r,o);i[o]?i[o].p(a,s):(i[o]=Au(a),i[o].c(),i[o].m(e,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}t[13].length>t[8]?o?o.p(t,s):(o=Du(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&b(e),x(i,t),o&&o.d()}}}function Au(t){let e,n,r,i,o,s,a,l,c=Yc(t[82].topic)+"",u=t[82].count+"";function d(){return t[55](t[82])}return{c(){e=v("button"),n=v("span"),r=k(c),i=_(),o=v("span"),s=k(u),A(n,"class","font-medium"),A(o,"class","text-[10px] text-gray-400"),A(e,"class","flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 rounded border flex items-center gap-1.5"),R(e,"bg-indigo-50",t[22]("topics",t[82].topic)),R(e,"text-indigo-700",t[22]("topics",t[82].topic)),R(e,"border-indigo-200",t[22]("topics",t[82].topic)),R(e,"text-gray-600",!t[22]("topics",t[82].topic)),R(e,"border-transparent",!t[22]("topics",t[82].topic))},m(t,c){y(t,e,c),m(e,n),m(n,r),m(e,i),m(e,o),m(o,s),a||(l=M(e,"click",d),a=!0)},p(n,i){t=n,8448&i[0]&&c!==(c=Yc(t[82].topic)+"")&&T(r,c),8448&i[0]&&u!==(u=t[82].count+"")&&T(s,u),4202752&i[0]&&R(e,"bg-indigo-50",t[22]("topics",t[82].topic)),4202752&i[0]&&R(e,"text-indigo-700",t[22]("topics",t[82].topic)),4202752&i[0]&&R(e,"border-indigo-200",t[22]("topics",t[82].topic)),4202752&i[0]&&R(e,"text-gray-600",!t[22]("topics",t[82].topic)),4202752&i[0]&&R(e,"border-transparent",!t[22]("topics",t[82].topic))},d(t){t&&b(e),a=!1,l()}}}function Du(e){let n,r,i;return{c(){n=v("button"),n.textContent="Show more",A(n,"class","w-full text-center px-2 py-1.5 text-xs text-indigo-600 hover:bg-indigo-50 rounded border border-indigo-200 mt-2")},m(t,o){y(t,n,o),r||(i=M(n,"click",e[20]),r=!0)},p:t,d(t){t&&b(n),r=!1,i()}}}function Tu(t){let e,n,r,i,o,s,a,l,c,u,d,h,f=t[12].length+"",p=t[9].creators?"":"",g=t[9].creators&&Pu(t);return{c(){e=v("div"),n=v("button"),r=v("span"),i=k(" Top Creators ("),o=k(f),s=k(")"),a=_(),l=v("span"),c=k(p),u=_(),g&&g.c(),A(l,"class","text-gray-400"),A(n,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),A(e,"class","mb-0")},m(f,p){y(f,e,p),m(e,n),m(n,r),m(r,i),m(r,o),m(r,s),m(n,a),m(n,l),m(l,c),m(e,u),g&&g.m(e,null),d||(h=M(n,"click",t[56]),d=!0)},p(t,n){4096&n[0]&&f!==(f=t[12].length+"")&&T(o,f),512&n[0]&&p!==(p=t[9].creators?"":"")&&T(c,p),t[9].creators?g?g.p(t,n):(g=Pu(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(t){t&&b(e),g&&g.d(),d=!1,h()}}}function Pu(t){let e,n,r=it(t[12].slice(0,t[6])),i=[];for(let e=0;e<r.length;e+=1)i[e]=Eu(Xc(t,r,e));let o=t[12].length>t[6]&&Lu(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();n=_(),o&&o.c(),A(e,"class","flex gap-2 overflow-x-auto pb-2"),E(e,"max-height","200px"),E(e,"flex-wrap","wrap")},m(t,r){y(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,n),o&&o.m(e,null)},p(t,s){if(71307328&s[0]){let o;for(r=it(t[12].slice(0,t[6])),o=0;o<r.length;o+=1){const a=Xc(t,r,o);i[o]?i[o].p(a,s):(i[o]=Eu(a),i[o].c(),i[o].m(e,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}t[12].length>t[6]?o?o.p(t,s):(o=Lu(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&b(e),x(i,t),o&&o.d()}}}function Eu(t){let e,n,r,i,o,s,a,l,c,u=t[78].creator+"",d=t[78].count+"";function h(){return t[57](t[78])}return{c(){e=v("button"),n=v("span"),r=k(" "),i=k(u),o=_(),s=v("span"),a=k(d),A(n,"class","font-medium"),A(s,"class","text-[10px] text-gray-400"),A(e,"class","flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 rounded border flex items-center gap-1.5"),R(e,"bg-pink-50",t[79]),R(e,"text-pink-700",t[79]),R(e,"border-pink-200",t[79]),R(e,"text-gray-600",!t[79]),R(e,"border-transparent",!t[79])},m(t,u){y(t,e,u),m(e,n),m(n,r),m(n,i),m(e,o),m(e,s),m(s,a),l||(c=M(e,"click",h),l=!0)},p(n,r){t=n,4160&r[0]&&u!==(u=t[78].creator+"")&&T(i,u),4160&r[0]&&d!==(d=t[78].count+"")&&T(a,d),4198464&r[0]&&R(e,"bg-pink-50",t[79]),4198464&r[0]&&R(e,"text-pink-700",t[79]),4198464&r[0]&&R(e,"border-pink-200",t[79]),4198464&r[0]&&R(e,"text-gray-600",!t[79]),4198464&r[0]&&R(e,"border-transparent",!t[79])},d(t){t&&b(e),l=!1,c()}}}function Lu(e){let n,r,i;return{c(){n=v("button"),n.textContent="Show more",A(n,"class","w-full text-center px-2 py-1 text-xs text-pink-600 hover:bg-pink-50 rounded")},m(t,o){y(t,n,o),r||(i=M(n,"click",e[18]),r=!0)},p:t,d(t){t&&b(n),r=!1,i()}}}function Ou(t){let e,n,r,i,o,s,a,l,c,u,d,h,f=t[11].length+"",p=t[9].contentTypes?"":"",g=t[9].contentTypes&&Ru(t);return{c(){e=v("div"),n=v("button"),r=v("span"),i=k(" Content Types ("),o=k(f),s=k(")"),a=_(),l=v("span"),c=k(p),u=_(),g&&g.c(),A(l,"class","text-gray-400"),A(n,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),A(e,"class","mb-0")},m(f,p){y(f,e,p),m(e,n),m(n,r),m(r,i),m(r,o),m(r,s),m(n,a),m(n,l),m(l,c),m(e,u),g&&g.m(e,null),d||(h=M(n,"click",t[58]),d=!0)},p(t,n){2048&n[0]&&f!==(f=t[11].length+"")&&T(o,f),512&n[0]&&p!==(p=t[9].contentTypes?"":"")&&T(c,p),t[9].contentTypes?g?g.p(t,n):(g=Ru(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(t){t&&b(e),g&&g.d(),d=!1,h()}}}function Ru(t){let e,n,r=it(t[11].slice(0,t[7])),i=[];for(let e=0;e<r.length;e+=1)i[e]=Bu(Jc(t,r,e));let o=t[11].length>t[7]&&ju(t);return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();n=_(),o&&o.c(),A(e,"class","flex gap-2 overflow-x-auto pb-2"),E(e,"max-height","200px"),E(e,"flex-wrap","wrap")},m(t,r){y(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,n),o&&o.m(e,null)},p(t,s){if(138414208&s[0]){let o;for(r=it(t[11].slice(0,t[7])),o=0;o<r.length;o+=1){const a=Jc(t,r,o);i[o]?i[o].p(a,s):(i[o]=Bu(a),i[o].c(),i[o].m(e,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}t[11].length>t[7]?o?o.p(t,s):(o=ju(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&b(e),x(i,t),o&&o.d()}}}function Bu(t){let e,n,r,i,o,s,a,l,c=al(t[75].type)+"",u=t[75].count+"";function d(){return t[59](t[75])}return{c(){e=v("button"),n=v("span"),r=k(c),i=_(),o=v("span"),s=k(u),A(n,"class","font-medium"),A(o,"class","text-[10px] text-gray-400"),A(e,"class","flex-shrink-0 px-2 py-1 text-[11px] hover:bg-gray-100 rounded border flex items-center gap-1.5"),R(e,"bg-orange-50",t[22]("types",t[75].type)),R(e,"text-orange-700",t[22]("types",t[75].type)),R(e,"border-orange-200",t[22]("types",t[75].type)),R(e,"text-gray-600",!t[22]("types",t[75].type)),R(e,"border-transparent",!t[22]("types",t[75].type))},m(t,c){y(t,e,c),m(e,n),m(n,r),m(e,i),m(e,o),m(o,s),a||(l=M(e,"click",d),a=!0)},p(n,i){t=n,2176&i[0]&&c!==(c=al(t[75].type)+"")&&T(r,c),2176&i[0]&&u!==(u=t[75].count+"")&&T(s,u),4196480&i[0]&&R(e,"bg-orange-50",t[22]("types",t[75].type)),4196480&i[0]&&R(e,"text-orange-700",t[22]("types",t[75].type)),4196480&i[0]&&R(e,"border-orange-200",t[22]("types",t[75].type)),4196480&i[0]&&R(e,"text-gray-600",!t[22]("types",t[75].type)),4196480&i[0]&&R(e,"border-transparent",!t[22]("types",t[75].type))},d(t){t&&b(e),a=!1,l()}}}function ju(e){let n,r,i;return{c(){n=v("button"),n.textContent="Show more",A(n,"class","w-full text-center px-2 py-1 text-xs text-orange-600 hover:bg-orange-50 rounded")},m(t,o){y(t,n,o),r||(i=M(n,"click",e[19]),r=!0)},p:t,d(t){t&&b(n),r=!1,i()}}}function $u(e){let n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,P,E,L,O,B,j,$,I,z,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z,tt,et,nt,rt,it,ot,st,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,yt,bt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Tt,Pt,Et,Lt,Ot=e[9].domains?"":"",Rt=e[9].folders?"":"",Bt=e[10].week+"",jt=e[10].twoWeek+"",$t=e[10].month+"",It=e[10].threeMonth+"",zt=e[10].sixMonth+"",Ft=e[10].year+"",Nt=e[10].older+"",Wt=e[2]&&su(e),Ht=e[2]&&au(e);function Vt(t,e){return t[0]?gu:pu}let qt=Vt(e),Ut=qt(e),Kt=e[9].domains&&mu(e);function Yt(t,e){return t[0]?wu:vu}let Qt=Yt(e),Jt=Qt(e),Xt=e[9].folders&&ku(e),Gt=e[13].length>0&&Mu(e),Zt=e[12].length>0&&Tu(e),te=e[11].length>0&&Ou(e);return{c(){n=v("div"),i=v("div"),o=v("div"),s=v("h3"),s.textContent="Filters",a=_(),Wt&&Wt.c(),l=_(),Ht&&Ht.c(),c=_(),u=v("div"),d=v("div"),h=v("button"),f=v("span"),Ut.c(),p=_(),g=v("span"),x=k(Ot),w=_(),Kt&&Kt.c(),C=_(),S=v("div"),D=v("button"),P=v("span"),Jt.c(),E=_(),L=v("span"),O=k(Rt),B=_(),Xt&&Xt.c(),j=_(),Gt&&Gt.c(),$=_(),Zt&&Zt.c(),I=_(),te&&te.c(),z=_(),F=v("div"),N=v("h4"),N.textContent="Date Added",W=_(),H=v("div"),V=v("button"),q=v("span"),q.textContent="This Week",U=_(),K=v("span"),Y=k(Bt),Q=_(),J=v("button"),X=v("span"),X.textContent="This 2-Week",G=_(),Z=v("span"),tt=k(jt),et=_(),nt=v("button"),rt=v("span"),rt.textContent="This Month",it=_(),ot=v("span"),st=k($t),at=_(),lt=v("button"),ct=v("span"),ct.textContent="This 3-Month",ut=_(),dt=v("span"),ht=k(It),ft=_(),pt=v("button"),gt=v("span"),gt.textContent="This 6-Month",mt=_(),yt=v("span"),bt=k(zt),xt=_(),vt=v("button"),wt=v("span"),wt.textContent="This Year",kt=_(),_t=v("span"),Ct=k(Ft),Mt=_(),St=v("button"),At=v("span"),At.textContent="Older",Dt=_(),Tt=v("span"),Pt=k(Nt),A(s,"class","text-sm font-medium text-gray-900"),A(o,"class","flex items-center justify-between mb-3"),A(i,"class","mb-6"),A(g,"class","text-gray-400"),A(h,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),A(d,"class","mb-0"),A(L,"class","text-gray-400"),A(D,"class","w-full flex items-center justify-between text-xs font-medium text-gray-700 uppercase tracking-wide mb-2 hover:text-gray-900"),A(S,"class","mb-0"),A(N,"class","text-xs font-medium text-gray-700 uppercase tracking-wide mb-2"),A(q,"class","text-xs"),A(K,"class","text-[10px] text-gray-400"),A(V,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded flex items-center justify-between"),R(V,"bg-blue-50","week"===e[3].dateRange?.period),R(V,"text-blue-700","week"===e[3].dateRange?.period),A(X,"class","text-xs"),A(Z,"class","text-[10px] text-gray-400"),A(J,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded flex items-center justify-between"),R(J,"bg-blue-50","twoWeek"===e[3].dateRange?.period),R(J,"text-blue-700","twoWeek"===e[3].dateRange?.period),A(rt,"class","text-xs"),A(ot,"class","text-[10px] text-gray-400"),A(nt,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded flex items-center justify-between"),R(nt,"bg-blue-50","month"===e[3].dateRange?.period),R(nt,"text-blue-700","month"===e[3].dateRange?.period),A(ct,"class","text-xs"),A(dt,"class","text-[10px] text-gray-400"),A(lt,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded flex items-center justify-between"),R(lt,"bg-blue-50","threeMonth"===e[3].dateRange?.period),R(lt,"text-blue-700","threeMonth"===e[3].dateRange?.period),A(gt,"class","text-xs"),A(yt,"class","text-[10px] text-gray-400"),A(pt,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded flex items-center justify-between"),R(pt,"bg-blue-50","sixMonth"===e[3].dateRange?.period),R(pt,"text-blue-700","sixMonth"===e[3].dateRange?.period),A(wt,"class","text-xs"),A(_t,"class","text-[10px] text-gray-400"),A(vt,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded flex items-center justify-between"),R(vt,"bg-blue-50","year"===e[3].dateRange?.period),R(vt,"text-blue-700","year"===e[3].dateRange?.period),A(At,"class","text-xs"),A(Tt,"class","text-[10px] text-gray-400"),A(St,"class","w-full text-left px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded flex items-center justify-between"),R(St,"bg-blue-50","older"===e[3].dateRange?.period),R(St,"text-blue-700","older"===e[3].dateRange?.period),A(H,"class","grid grid-cols-1 gap-1"),A(F,"class","mb-0"),A(u,"class","grid grid-cols-2 gap-x-6 gap-y-6"),A(n,"class","w-[24rem] bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto flex-shrink-0")},m(t,r){y(t,n,r),m(n,i),m(i,o),m(o,s),m(o,a),Wt&&Wt.m(o,null),m(i,l),Ht&&Ht.m(i,null),m(n,c),m(n,u),m(u,d),m(d,h),m(h,f),Ut.m(f,null),m(h,p),m(h,g),m(g,x),m(d,w),Kt&&Kt.m(d,null),m(u,C),m(u,S),m(S,D),m(D,P),Jt.m(P,null),m(D,E),m(D,L),m(L,O),m(S,B),Xt&&Xt.m(S,null),m(u,j),Gt&&Gt.m(u,null),m(u,$),Zt&&Zt.m(u,null),m(u,I),te&&te.m(u,null),m(u,z),m(u,F),m(F,N),m(F,W),m(F,H),m(H,V),m(V,q),m(V,U),m(V,K),m(K,Y),m(H,Q),m(H,J),m(J,X),m(J,G),m(J,Z),m(Z,tt),m(H,et),m(H,nt),m(nt,rt),m(nt,it),m(nt,ot),m(ot,st),m(H,at),m(H,lt),m(lt,ct),m(lt,ut),m(lt,dt),m(dt,ht),m(H,ft),m(H,pt),m(pt,gt),m(pt,mt),m(pt,yt),m(yt,bt),m(H,xt),m(H,vt),m(vt,wt),m(vt,kt),m(vt,_t),m(_t,Ct),m(H,Mt),m(H,St),m(St,At),m(St,Dt),m(St,Tt),m(Tt,Pt),Et||(Lt=[M(h,"click",e[48]),M(D,"click",e[52]),M(V,"click",e[60]),M(J,"click",e[61]),M(nt,"click",e[62]),M(lt,"click",e[63]),M(pt,"click",e[64]),M(vt,"click",e[65]),M(St,"click",e[66])],Et=!0)},p(t,e){t[2]?Wt?Wt.p(t,e):(Wt=su(t),Wt.c(),Wt.m(o,null)):Wt&&(Wt.d(1),Wt=null),t[2]?Ht?Ht.p(t,e):(Ht=au(t),Ht.c(),Ht.m(i,null)):Ht&&(Ht.d(1),Ht=null),qt===(qt=Vt(t))&&Ut?Ut.p(t,e):(Ut.d(1),Ut=qt(t),Ut&&(Ut.c(),Ut.m(f,null))),512&e[0]&&Ot!==(Ot=t[9].domains?"":"")&&T(x,Ot),t[9].domains?Kt?Kt.p(t,e):(Kt=mu(t),Kt.c(),Kt.m(d,null)):Kt&&(Kt.d(1),Kt=null),Qt===(Qt=Yt(t))&&Jt?Jt.p(t,e):(Jt.d(1),Jt=Qt(t),Jt&&(Jt.c(),Jt.m(P,null))),512&e[0]&&Rt!==(Rt=t[9].folders?"":"")&&T(O,Rt),t[9].folders?Xt?Xt.p(t,e):(Xt=ku(t),Xt.c(),Xt.m(S,null)):Xt&&(Xt.d(1),Xt=null),t[13].length>0?Gt?Gt.p(t,e):(Gt=Mu(t),Gt.c(),Gt.m(u,$)):Gt&&(Gt.d(1),Gt=null),t[12].length>0?Zt?Zt.p(t,e):(Zt=Tu(t),Zt.c(),Zt.m(u,I)):Zt&&(Zt.d(1),Zt=null),t[11].length>0?te?te.p(t,e):(te=Ou(t),te.c(),te.m(u,z)):te&&(te.d(1),te=null),1024&e[0]&&Bt!==(Bt=t[10].week+"")&&T(Y,Bt),8&e[0]&&R(V,"bg-blue-50","week"===t[3].dateRange?.period),8&e[0]&&R(V,"text-blue-700","week"===t[3].dateRange?.period),1024&e[0]&&jt!==(jt=t[10].twoWeek+"")&&T(tt,jt),8&e[0]&&R(J,"bg-blue-50","twoWeek"===t[3].dateRange?.period),8&e[0]&&R(J,"text-blue-700","twoWeek"===t[3].dateRange?.period),1024&e[0]&&$t!==($t=t[10].month+"")&&T(st,$t),8&e[0]&&R(nt,"bg-blue-50","month"===t[3].dateRange?.period),8&e[0]&&R(nt,"text-blue-700","month"===t[3].dateRange?.period),1024&e[0]&&It!==(It=t[10].threeMonth+"")&&T(ht,It),8&e[0]&&R(lt,"bg-blue-50","threeMonth"===t[3].dateRange?.period),8&e[0]&&R(lt,"text-blue-700","threeMonth"===t[3].dateRange?.period),1024&e[0]&&zt!==(zt=t[10].sixMonth+"")&&T(bt,zt),8&e[0]&&R(pt,"bg-blue-50","sixMonth"===t[3].dateRange?.period),8&e[0]&&R(pt,"text-blue-700","sixMonth"===t[3].dateRange?.period),1024&e[0]&&Ft!==(Ft=t[10].year+"")&&T(Ct,Ft),8&e[0]&&R(vt,"bg-blue-50","year"===t[3].dateRange?.period),8&e[0]&&R(vt,"text-blue-700","year"===t[3].dateRange?.period),1024&e[0]&&Nt!==(Nt=t[10].older+"")&&T(Pt,Nt),8&e[0]&&R(St,"bg-blue-50","older"===t[3].dateRange?.period),8&e[0]&&R(St,"text-blue-700","older"===t[3].dateRange?.period)},i:t,o:t,d(t){t&&b(n),Wt&&Wt.d(),Ht&&Ht.d(),Ut.d(),Kt&&Kt.d(),Jt.d(),Xt&&Xt.d(),Gt&&Gt.d(),Zt&&Zt.d(),te&&te.d(),Et=!1,r(Lt)}}}function Iu(t,e,n){let r,i,o,s,a,l,u,d,h;c(t,Jl,t=>n(3,h=t));let{searchResultStats:f=null}=e,{isSearchActive:p=!1}=e,g=[],m=[],y=[],b=[],x=[],v=[],w={week:0,twoWeek:0,month:0,threeMonth:0,sixMonth:0,year:0,older:0},k="count",_=40,C=10,M=10,S=10,A=15,D={topics:!0,creators:!0,contentTypes:!0,domains:!0,folders:!0};async function T(){const t=await Ql.getCached(),e=Date.now(),r=864e5,i=7*r,o=14*r,s=90*r,a=180*r,l=new Date,c=l.getFullYear(),u=new Date(c,l.getMonth(),1).getTime(),d=new Date(c,0,1).getTime();let h=0,f=0,p=0,g=0,m=0,y=0,b=0;t.forEach(t=>{const n=t.dateAdded;e-n<i&&h++,e-n<o&&f++,n>=u&&p++,e-n<s&&g++,e-n<a&&m++,n>=d&&y++,n<d&&b++}),n(40,w={week:h,twoWeek:f,month:p,threeMonth:g,sixMonth:m,year:y,older:b})}async function P(){n(34,g=await Ll()),n(35,m=await Ol())}async function E(){const t=await Ql.getCached(),e={},r={},i={};t.forEach(t=>{const n=t.topics||[];for(const t of n)e[t]=(e[t]||0)+1;if(t.creator){const e=`${t.platform||"other"}:${t.creator}`;r[e]||(r[e]={creator:t.creator,platform:t.platform||"other",count:0}),r[e].count++}t.contentType&&(i[t.contentType]=(i[t.contentType]||0)+1)}),n(37,b=Object.entries(e).map(([t,e])=>({topic:t,count:e})).sort((t,e)=>e.count-t.count)),n(38,x=Object.values(r).sort((t,e)=>e.count-t.count)),n(39,v=Object.entries(i).map(([t,e])=>({type:t,count:e})).sort((t,e)=>e.count-t.count))}function L(t){n(9,D[t]=!D[t],D)}function O(t){Jl.toggleFilter("domains",t)}function R(t){Jl.toggleFilter("folders",t)}function B(t){Jl.toggleFilter("topics",t)}function j(t,e){const n=`${e}:${t}`;Jl.toggleFilter("creators",{key:n,creator:t,platform:e})}function $(t){Jl.toggleFilter("types",t)}function z(t){if(h.dateRange?.period===t)return void Jl.setFilter("dateRange",null);const e=new Date,n=e.getFullYear();let r,i=e.getTime();switch(t){case"week":r=new Date(e.getTime()-6048e5);break;case"twoWeek":r=new Date(e.getTime()-12096e5);break;case"month":r=new Date(n,e.getMonth(),1);break;case"threeMonth":r=new Date(e.getTime()-7776e6);break;case"sixMonth":r=new Date(e.getTime()-15552e6);break;case"year":r=new Date(n,0,1);break;case"older":r=new Date(0),i=new Date(n,0,1).getTime()-1}!function(t,e,n){Jl.setFilter("dateRange",{startDate:t,endDate:e,period:n})}(r.getTime(),i,t)}I(async()=>{try{await P(),await E(),await T(),n(36,y=await _l())}catch(t){console.error("Error loading filters:",t)}});return t.$$set=t=>{"searchResultStats"in t&&n(30,f=t.searchResultStats),"isSearchActive"in t&&n(0,p=t.isSearchActive)},t.$$.update=()=>{8&t.$$.dirty[0]&&n(2,r=h.domains.length>0||h.folders.length>0||h.topics.length>0||h.creators.length>0||h.types.length>0||h.tags&&h.tags.length>0||h.deadLinks||h.stale||null!==h.dateRange||null!==h.readingTimeRange||null!==h.qualityScoreRange||null!==h.hasPublishedDate),1073741829&t.$$.dirty[0]&&n(41,i=(p||r)&&null!=f),1073741826&t.$$.dirty[0]|1048&t.$$.dirty[1]&&n(15,o=i&&f?.domains?f.domains:"recency"===k?g:m),1073741824&t.$$.dirty[0]|1056&t.$$.dirty[1]&&n(14,s=i&&f?.folders?f.folders:y),1073741824&t.$$.dirty[0]|1088&t.$$.dirty[1]&&n(13,a=i&&f?.topics?f.topics:b),1073741824&t.$$.dirty[0]|1152&t.$$.dirty[1]&&n(12,l=i&&f?.creators?f.creators:x),1073741824&t.$$.dirty[0]|1280&t.$$.dirty[1]&&n(11,u=i&&f?.contentTypes?f.contentTypes:v),1073741824&t.$$.dirty[0]|1536&t.$$.dirty[1]&&n(10,d=i&&f?.dateCounts?f.dateCounts:w)},[p,k,r,h,_,C,M,S,A,D,d,u,l,a,s,o,function(){n(4,_+=30)},function(){n(5,C+=15)},function(){n(6,M+=10)},function(){n(7,S+=10)},function(){n(8,A+=10)},L,function(t,e){return void 0!==h[t]&&(Array.isArray(h[t])?"creators"===t?h[t].some(t=>t.key===e):h[t].some(t=>String(t).toLowerCase()===String(e).toLowerCase()):h[t]===e)},O,R,B,j,$,function(){Jl.clearFilters()},z,f,function(){return r},function(){Jl.clearFilters()},async function(){try{await P(),await E(),await T(),n(36,y=await _l())}catch(t){console.error("Error refreshing sidebar:",t)}},g,m,y,b,x,v,w,i,t=>B(t),t=>j(t.creator,t.platform),t=>$(t),t=>O(t),t=>R(t),()=>{Jl.setFilter("dateRange",null)},()=>L("domains"),()=>n(1,k="recency"),()=>n(1,k="count"),t=>O(t.domain),()=>L("folders"),t=>R(t.folder),()=>L("topics"),t=>B(t.topic),()=>L("creators"),t=>j(t.creator,t.platform),()=>L("contentTypes"),t=>$(t.type),()=>z("week"),()=>z("twoWeek"),()=>z("month"),()=>z("threeMonth"),()=>z("sixMonth"),()=>z("year"),()=>z("older")]}class zu extends ht{constructor(t){super(),dt(this,t,Iu,$u,o,{searchResultStats:30,isSearchActive:0,getHasActiveFilters:31,clearAllFilters:32,refresh:33},null,[-1,-1,-1,-1])}get getHasActiveFilters(){return this.$$.ctx[31]}get clearAllFilters(){return this.$$.ctx[32]}get refresh(){return this.$$.ctx[33]}}const Fu={bookmarks:{icon:"",description:"Primary bookmark data with enrichment fields"},events:{icon:"",description:"Activity log (create, delete, access, enrichment events)"},cache:{icon:"",description:"General purpose cache storage"},settings:{icon:"",description:"Application settings and preferences"},similarities:{icon:"",description:"Precomputed bookmark similarity scores"},computedMetrics:{icon:"",description:"Cached computed metrics with TTL"},enrichmentQueue:{icon:"",description:"Queue of bookmarks pending enrichment"}},Nu=[{key:"domainStats",ttl:"1 hour",description:"Top domains by bookmark count"},{key:"activityTimeline",ttl:"6 hours",description:"Monthly bookmark creation timeline"},{key:"quickStats",ttl:"5 minutes",description:"Dashboard quick statistics"},{key:"wordFrequency",ttl:"24 hours",description:"Title word frequency analysis"},{key:"ageDistribution",ttl:"6 hours",description:"Bookmark age distribution"},{key:"categoryTrends",ttl:"24 hours",description:"Category distribution over time"},{key:"expertiseAreas",ttl:"24 hours",description:"User expertise based on bookmarks"},{key:"duplicates",ttl:"24 hours",description:"Detected duplicate bookmarks"},{key:"similarities",ttl:"24 hours",description:"Similar bookmark pairs"},{key:"insightsSummary",ttl:"5 minutes",description:"Aggregated insights summary"}];async function Wu(){const t=Object.keys(Fu),e=await Promise.all(t.map(async t=>{try{return{name:t,count:await ll[t].count(),...Fu[t]}}catch(e){return{name:t,count:0,...Fu[t],error:e.message}}})),n=e.reduce((t,e)=>t+e.count,0),r=await async function(){let t=0;const e=Object.keys(Fu);for(const n of e)try{const e=await ll[n].toArray();t+=JSON.stringify(e).length}catch(t){}if(t>1048576)return`~${(t/1048576).toFixed(1)} MB`;return`~${(t/1024).toFixed(0)} KB`}();return{tables:e,totalRecords:n,estimatedSize:r,lastChecked:Date.now()}}async function Hu(t,e={}){const{page:n=0,pageSize:r=50,sortBy:i=null,sortOrder:o="desc",searchQuery:s="",searchField:a="all",fieldFilter:l=null}=e;let c=await ll[t].toArray();if(l&&(c=c.filter(t=>{const e=t[l.field],n=null!=e&&""!==e&&!(Array.isArray(e)&&0===e.length);return l.hasValue?n:!n})),s){const t=s.toLowerCase();c=c.filter(e=>{if("all"===a)return JSON.stringify(e).toLowerCase().includes(t);const n=e[a];return n&&String(n).toLowerCase().includes(t)})}i&&c.sort((t,e)=>{const n=t[i],r=e[i];if(n===r)return 0;if(null==n)return 1;if(null==r)return-1;if("number"==typeof n&&"number"==typeof r)return"desc"===o?r-n:n-r;const s=String(n).localeCompare(String(r));return"desc"===o?-s:s});const u=c.length,d=Math.ceil(u/r);return{records:c.slice(n*r,(n+1)*r),totalCount:u,page:n,pageSize:r,totalPages:d,hasMore:(n+1)*r<u,hasPrev:n>0}}async function Vu(){let t=[];try{t=await ll.computedMetrics.toArray()}catch(t){console.error("Error fetching computedMetrics:",t)}const e=Date.now(),n=new Set(t.map(t=>t.key)),r=t.map(t=>{const n=t.validUntil-e;let r="valid";n<=0?r="stale":n<36e5&&(r="expiring");const i=Nu.find(e=>e.key===t.key);return{key:t.key,description:i?.description||"Custom metric",expectedTtl:i?.ttl||"Unknown",computedAt:t.computedAt,validUntil:t.validUntil,timeRemaining:n,status:r,dataSize:JSON.stringify(t.data||{}).length,hasData:!!t.data}});return Nu.forEach(t=>{n.has(t.key)||r.push({key:t.key,description:t.description,expectedTtl:t.ttl,computedAt:null,validUntil:null,timeRemaining:null,status:"never",dataSize:0,hasData:!1})}),r.sort((t,e)=>t.key.localeCompare(e.key))}function qu(t){if(!t)return"-";const e=new Date(t),n=new Date-e,r=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:e.toLocaleDateString()}function Uu(t){if(!t||t<=0)return"expired";const e=Math.floor(t/6e4),n=Math.floor(t/36e5),r=Math.floor(t/864e5);return e<60?`${e}m`:n<24?`${n}h`:`${r}d`}function Ku(t,e,n){const r=t.slice();return r[61]=e[n],r}function Yu(t,e,n){const r=t.slice();return r[64]=e[n],r}function Qu(t,e,n){const r=t.slice();return r[67]=e[n],r}function Ju(t,e,n){const r=t.slice();return r[70]=e[n],r}function Xu(t,e,n){const r=t.slice();return r[73]=e[n],r[75]=n,r}function Gu(t,e,n){const r=t.slice();return r[76]=e[n][0],r[77]=e[n][1],r}function Zu(t,e,n){const r=t.slice();return r[80]=e[n],r}function td(t,e,n){const r=t.slice();return r[80]=e[n],r}function ed(t,e,n){const r=t.slice();return r[70]=e[n],r}function nd(t,e,n){const r=t.slice();return r[87]=e[n],r}function rd(t){let e;return{c(){e=k("")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function id(t){let e;return{c(){e=v("span"),e.textContent="",A(e,"class","animate-spin")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function od(t){let e,n;return{c(){e=v("div"),n=k(t[1]),A(e,"class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg")},m(t,r){y(t,e,r),m(e,n)},p(t,e){2&e[0]&&T(n,t[1])},d(t){t&&b(e)}}}function sd(t){let e,n,r,i,o,s,a,l,c,u,d,h=t[2].totalRecords.toLocaleString()+"",f=t[2].estimatedSize+"",p=it(t[2].tables),g=[];for(let e=0;e<p.length;e+=1)g[e]=ad(nd(t,p,e));return{c(){e=v("div"),n=v("h3"),r=v("span"),r.textContent="",i=k(" Database Overview\n        "),o=v("span"),s=k("Total: "),a=k(h),l=k(" records  "),c=k(f),u=_(),d=v("div");for(let t=0;t<g.length;t+=1)g[t].c();A(o,"class","text-xs font-normal text-gray-400"),A(n,"class","text-sm font-semibold text-gray-600 mb-3 flex items-center gap-2"),A(d,"class","grid grid-cols-4 md:grid-cols-7 gap-2"),A(e,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4")},m(t,h){y(t,e,h),m(e,n),m(n,r),m(n,i),m(n,o),m(o,s),m(o,a),m(o,l),m(o,c),m(e,u),m(e,d);for(let t=0;t<g.length;t+=1)g[t]&&g[t].m(d,null)},p(t,e){if(4&e[0]&&h!==(h=t[2].totalRecords.toLocaleString()+"")&&T(a,h),4&e[0]&&f!==(f=t[2].estimatedSize+"")&&T(c,f),524300&e[0]){let n;for(p=it(t[2].tables),n=0;n<p.length;n+=1){const r=nd(t,p,n);g[n]?g[n].p(r,e):(g[n]=ad(r),g[n].c(),g[n].m(d,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=p.length}},d(t){t&&b(e),x(g,t)}}}function ad(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p=t[87].icon+"",g=t[87].count.toLocaleString()+"",x=t[87].name+"";function w(){return t[37](t[87])}return{c(){e=v("button"),n=v("div"),r=k(p),i=_(),o=v("div"),s=k(g),a=_(),l=v("div"),c=k(x),u=_(),A(n,"class","text-2xl"),A(o,"class","text-lg font-bold text-gray-800"),A(l,"class","text-xs text-gray-500 truncate"),A(e,"class",d="p-3 rounded-lg border transition-all hover:shadow-md "+(t[3]===t[87].name?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200 hover:bg-gray-100"))},m(t,d){y(t,e,d),m(e,n),m(n,r),m(e,i),m(e,o),m(o,s),m(e,a),m(e,l),m(l,c),m(e,u),h||(f=M(e,"click",w),h=!0)},p(n,i){t=n,4&i[0]&&p!==(p=t[87].icon+"")&&T(r,p),4&i[0]&&g!==(g=t[87].count.toLocaleString()+"")&&T(s,g),4&i[0]&&x!==(x=t[87].name+"")&&T(c,x),12&i[0]&&d!==(d="p-3 rounded-lg border transition-all hover:shadow-md "+(t[3]===t[87].name?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200 hover:bg-gray-100"))&&A(e,"class",d)},d(t){t&&b(e),h=!1,f()}}}function ld(t){let e,n,r,i=t[70]+"";return{c(){e=v("option"),n=k(i),e.__value=r=t[70],P(e,e.__value)},m(t,r){y(t,e,r),m(e,n)},p(t,o){32&o[0]&&i!==(i=t[70]+"")&&T(n,i),32&o[0]&&r!==(r=t[70])&&(e.__value=r,P(e,e.__value))},d(t){t&&b(e)}}}function cd(e){let n,r,i;return{c(){n=v("button"),n.textContent=" Clear",A(n,"class","px-3 py-2 text-gray-500 hover:text-gray-700")},m(t,o){y(t,n,o),r||(i=M(n,"click",e[44]),r=!0)},p:t,d(t){t&&b(n),r=!1,i()}}}function ud(t){let e,n,r,i,o,s,a,l,c,u,d,h,f=t[14].hasValue?"Has":"Missing",p=t[14].field+"";return{c(){e=v("div"),n=v("span"),n.textContent="Filter:",r=_(),i=v("span"),o=k(f),s=k(' "'),a=k(p),l=k('"'),c=_(),u=v("button"),u.textContent="",A(n,"class","text-gray-500"),A(i,"class","px-2 py-1 bg-blue-100 text-blue-700 rounded"),A(u,"class","text-gray-400 hover:text-gray-600"),A(e,"class","mt-2 flex items-center gap-2 text-sm")},m(f,p){y(f,e,p),m(e,n),m(e,r),m(e,i),m(i,o),m(i,s),m(i,a),m(i,l),m(e,c),m(e,u),d||(h=M(u,"click",t[26]),d=!0)},p(t,e){16384&e[0]&&f!==(f=t[14].hasValue?"Has":"Missing")&&T(o,f),16384&e[0]&&p!==(p=t[14].field+"")&&T(a,p)},d(t){t&&b(e),d=!1,h()}}}function dd(t){let e,n,r,i,o,s,a,l=it(t[35](t[3])),c=[];for(let e=0;e<l.length;e+=1)c[e]=md(td(t,l,e));let u=it(t[4]),d=[];for(let e=0;e<u.length;e+=1)d[e]=Cd(Xu(t,u,e));return{c(){e=v("table"),n=v("thead"),r=v("tr"),i=v("th"),o=_();for(let t=0;t<c.length;t+=1)c[t].c();s=_(),a=v("tbody");for(let t=0;t<d.length;t+=1)d[t].c();A(i,"class","w-8 px-2 py-3"),A(n,"class","bg-gray-50 border-b border-gray-200"),A(a,"class","divide-y divide-gray-200"),A(e,"class","w-full text-sm")},m(t,l){y(t,e,l),m(e,n),m(n,r),m(r,i),m(r,o);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(r,null);m(e,s),m(e,a);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(a,null)},p(t,e){if(4197384&e[0]|16&e[1]){let n;for(l=it(t[35](t[3])),n=0;n<l.length;n+=1){const i=td(t,l,n);c[n]?c[n].p(i,e):(c[n]=md(i),c[n].c(),c[n].m(r,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}if(134221848&e[0]|16&e[1]){let n;for(u=it(t[4]),n=0;n<u.length;n+=1){const r=Xu(t,u,n);d[n]?d[n].p(r,e):(d[n]=Cd(r),d[n].c(),d[n].m(a,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}},d(t){t&&b(e),x(c,t),x(d,t)}}}function hd(e){let n;return{c(){n=v("div"),n.textContent="No records found",A(n,"class","p-8 text-center text-gray-500")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function fd(e){let n;return{c(){n=v("div"),n.innerHTML='<span class="animate-spin inline-block mr-2"></span> Loading...',A(n,"class","p-8 text-center text-gray-500")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function pd(e){let n;return{c(){n=v("span"),n.textContent="",A(n,"class","text-gray-300")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function gd(t){let e,n,r="asc"===t[11]?"":"";return{c(){e=v("span"),n=k(r),A(e,"class","text-blue-500")},m(t,r){y(t,e,r),m(e,n)},p(t,e){2048&e[0]&&r!==(r="asc"===t[11]?"":"")&&T(n,r)},d(t){t&&b(e)}}}function md(t){let e,n,r,i,o,s,a,l=t[80]+"";function c(t,e){return t[10]===t[80]?gd:pd}let u=c(t),d=u(t);function h(){return t[45](t[80])}return{c(){e=v("th"),n=v("span"),r=k(l),i=_(),d.c(),o=_(),A(n,"class","flex items-center gap-1"),A(e,"class","px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100")},m(t,l){y(t,e,l),m(e,n),m(n,r),m(n,i),d.m(n,null),m(e,o),s||(a=M(e,"click",h),s=!0)},p(e,i){t=e,8&i[0]&&l!==(l=t[80]+"")&&T(r,l),u===(u=c(t))&&d?d.p(t,i):(d.d(1),d=u(t),d&&(d.c(),d.m(n,null)))},d(t){t&&b(e),d.d(),s=!1,a()}}}function yd(t){let e,n,r,i,o=Id(t[73][t[80]])+"";return{c(){e=v("td"),n=k(o),r=_(),A(e,"class","px-4 py-3 text-gray-700 max-w-xs truncate"),A(e,"title",i=String(t[73][t[80]]??""))},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,r){24&r[0]&&o!==(o=Id(t[73][t[80]])+"")&&T(n,o),24&r[0]&&i!==(i=String(t[73][t[80]]??""))&&A(e,"title",i)},d(t){t&&b(e)}}}function bd(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g;function w(){return t[47](t[73])}let k=t[73].url&&xd(t),C=it(Object.entries(t[73])),D=[];for(let e=0;e<C.length;e+=1)D[e]=_d(Gu(t,C,e));return{c(){e=v("tr"),n=v("td"),r=v("div"),i=v("div"),o=v("h4"),o.textContent="Record Details",s=_(),a=v("div"),l=v("button"),l.textContent=" Copy JSON",c=_(),k&&k.c(),u=_(),d=v("div");for(let t=0;t<D.length;t+=1)D[t].c();f=_(),A(o,"class","font-semibold text-gray-800"),A(l,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded"),A(a,"class","flex gap-2"),A(i,"class","flex items-center justify-between mb-3"),A(d,"class","grid grid-cols-2 md:grid-cols-3 gap-3 text-sm"),A(r,"class","bg-white rounded-lg border border-blue-200 p-4"),A(n,"colspan",h=t[35](t[3]).length+1),A(n,"class","px-4 py-4"),A(e,"class","bg-blue-50")},m(t,h){y(t,e,h),m(e,n),m(n,r),m(r,i),m(i,o),m(i,s),m(i,a),m(a,l),m(a,c),k&&k.m(a,null),m(r,u),m(r,d);for(let t=0;t<D.length;t+=1)D[t]&&D[t].m(d,null);m(e,f),p||(g=M(l,"click",S(w)),p=!0)},p(e,r){if((t=e)[73].url?k?k.p(t,r):(k=xd(t),k.c(),k.m(a,null)):k&&(k.d(1),k=null),16&r[0]){let e;for(C=it(Object.entries(t[73])),e=0;e<C.length;e+=1){const n=Gu(t,C,e);D[e]?D[e].p(n,r):(D[e]=_d(n),D[e].c(),D[e].m(d,null))}for(;e<D.length;e+=1)D[e].d(1);D.length=C.length}8&r[0]&&h!==(h=t[35](t[3]).length+1)&&A(n,"colspan",h)},d(t){t&&b(e),k&&k.d(),x(D,t),p=!1,g()}}}function xd(t){let e,n,r,i,o;return{c(){e=v("a"),n=k(" Open URL"),A(e,"href",r=t[73].url),A(e,"target","_blank"),A(e,"rel","noopener"),A(e,"class","px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded")},m(r,s){y(r,e,s),m(e,n),i||(o=M(e,"click",S(t[36])),i=!0)},p(t,n){16&n[0]&&r!==(r=t[73].url)&&A(e,"href",r)},d(t){t&&b(e),i=!1,o()}}}function vd(t){let e,n=Id(t[77])+"";return{c(){e=k(n)},m(t,n){y(t,e,n)},p(t,r){16&r[0]&&n!==(n=Id(t[77])+"")&&T(e,n)},d(t){t&&b(e)}}}function wd(t){let e,n=(t[77]?new Date(t[77]).toLocaleString():"-")+"";return{c(){e=k(n)},m(t,n){y(t,e,n)},p(t,r){16&r[0]&&n!==(n=(t[77]?new Date(t[77]).toLocaleString():"-")+"")&&T(e,n)},d(t){t&&b(e)}}}function kd(t){let e,n,r=JSON.stringify(t[77],null,2)+"";return{c(){e=v("pre"),n=k(r),A(e,"class","text-xs overflow-auto max-h-24")},m(t,r){y(t,e,r),m(e,n)},p(t,e){16&e[0]&&r!==(r=JSON.stringify(t[77],null,2)+"")&&T(n,r)},d(t){t&&b(e)}}}function _d(t){let e,n,r,i,o,s,a,l=t[76]+"";function c(t,e){return 16&e[0]&&(s=null),"object"==typeof t[77]&&null!==t[77]?kd:(null==s&&(s=!!(t[76].includes("date")||t[76].includes("time")||t[76].includes("At")||"timestamp"===t[76])),s?wd:vd)}let u=c(t,[-1,-1,-1]),d=u(t);return{c(){e=v("div"),n=v("div"),r=k(l),i=_(),o=v("div"),d.c(),a=_(),A(n,"class","text-xs text-gray-500 font-medium"),A(o,"class","text-gray-800 break-all"),A(e,"class","bg-gray-50 rounded p-2")},m(t,s){y(t,e,s),m(e,n),m(n,r),m(e,i),m(e,o),d.m(o,null),m(e,a)},p(t,e){16&e[0]&&l!==(l=t[76]+"")&&T(r,l),u===(u=c(t,e))&&d?d.p(t,e):(d.d(1),d=u(t),d&&(d.c(),d.m(o,null)))},d(t){t&&b(e),d.d()}}}function Cd(t){let e,n,r,i,o,s,a,l,c,u=t[12]===t[75]?"":"",d=it(t[35](t[3])),h=[];for(let e=0;e<d.length;e+=1)h[e]=yd(Zu(t,d,e));function f(){return t[46](t[75])}let p=t[12]===t[75]&&bd(t);return{c(){e=v("tr"),n=v("td"),r=k(u),i=_();for(let t=0;t<h.length;t+=1)h[t].c();s=_(),p&&p.c(),a=C(),A(n,"class","px-2 py-3 text-center text-gray-400"),A(e,"class",o="hover:bg-gray-50 cursor-pointer "+(t[12]===t[75]?"bg-blue-50":""))},m(t,o){y(t,e,o),m(e,n),m(n,r),m(e,i);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(e,null);y(t,s,o),p&&p.m(t,o),y(t,a,o),l||(c=M(e,"click",f),l=!0)},p(n,i){if(t=n,4096&i[0]&&u!==(u=t[12]===t[75]?"":"")&&T(r,u),24&i[0]|16&i[1]){let n;for(d=it(t[35](t[3])),n=0;n<d.length;n+=1){const r=Zu(t,d,n);h[n]?h[n].p(r,i):(h[n]=yd(r),h[n].c(),h[n].m(e,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}4096&i[0]&&o!==(o="hover:bg-gray-50 cursor-pointer "+(t[12]===t[75]?"bg-blue-50":""))&&A(e,"class",o),t[12]===t[75]?p?p.p(t,i):(p=bd(t),p.c(),p.m(a.parentNode,a)):p&&(p.d(1),p=null)},d(t){t&&(b(e),b(s),b(a)),x(h,t),p&&p.d(t),l=!1,c()}}}function Md(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,E,O,R,B,j,$,I,z,F,N,W,H,V=t[7].page+1+"",q=(t[7].totalPages||1)+"";return{c(){e=v("div"),n=v("div"),i=v("span"),i.textContent="Show",o=_(),s=v("select"),a=v("option"),a.textContent="10",l=v("option"),l.textContent="25",c=v("option"),c.textContent="50",u=v("option"),u.textContent="100",h=_(),f=v("span"),f.textContent="per page",p=_(),g=v("div"),x=v("button"),w=k(" Prev"),D=_(),E=v("span"),O=k("Page "),R=k(V),B=k(" of "),j=k(q),$=_(),I=v("button"),z=k("Next "),a.__value=10,P(a,a.__value),l.__value=25,P(l,l.__value),c.__value=50,P(c,c.__value),u.__value=100,P(u,u.__value),A(s,"class","px-2 py-1 border border-gray-300 rounded"),A(n,"class","flex items-center gap-2 text-sm text-gray-600"),x.disabled=C=!t[7].hasPrev,A(x,"class",S="px-3 py-1 rounded border "+(t[7].hasPrev?"hover:bg-gray-100":"opacity-50 cursor-not-allowed")),A(E,"class","text-sm text-gray-600"),I.disabled=F=!t[7].hasMore,A(I,"class",N="px-3 py-1 rounded border "+(t[7].hasMore?"hover:bg-gray-100":"opacity-50 cursor-not-allowed")),A(g,"class","flex items-center gap-2"),A(e,"class","p-4 border-t border-gray-200 flex items-center justify-between")},m(r,d){y(r,e,d),m(e,n),m(n,i),m(n,o),m(n,s),m(s,a),m(s,l),m(s,c),m(s,u),L(s,t[7].pageSize),m(n,h),m(n,f),m(e,p),m(e,g),m(g,x),m(x,w),m(g,D),m(g,E),m(E,O),m(E,R),m(E,B),m(E,j),m(g,$),m(g,I),m(I,z),W||(H=[M(s,"change",t[48]),M(x,"click",t[49]),M(I,"click",t[50])],W=!0)},p(t,e){128&e[0]&&d!==(d=t[7].pageSize)&&L(s,t[7].pageSize),128&e[0]&&C!==(C=!t[7].hasPrev)&&(x.disabled=C),128&e[0]&&S!==(S="px-3 py-1 rounded border "+(t[7].hasPrev?"hover:bg-gray-100":"opacity-50 cursor-not-allowed"))&&A(x,"class",S),128&e[0]&&V!==(V=t[7].page+1+"")&&T(R,V),128&e[0]&&q!==(q=(t[7].totalPages||1)+"")&&T(j,q),128&e[0]&&F!==(F=!t[7].hasMore)&&(I.disabled=F),128&e[0]&&N!==(N="px-3 py-1 rounded border "+(t[7].hasMore?"hover:bg-gray-100":"opacity-50 cursor-not-allowed"))&&A(I,"class",N)},d(t){t&&b(e),W=!1,r(H)}}}function Sd(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,P,L=t[70].field+"",O=t[70].coverage+"",R=t[70].populated+"";function B(){return t[51](t[70])}function j(){return t[52](t[70])}return{c(){e=v("div"),n=v("div"),i=k(L),s=_(),a=v("div"),l=v("button"),u=_(),d=v("button"),f=_(),p=v("div"),g=k(O),x=k("% ("),w=k(R),C=k(")"),S=_(),A(n,"class","w-28 text-gray-600 truncate font-mono text-xs"),A(n,"title",o=t[70].field),A(l,"class","h-full bg-green-400 hover:bg-green-500 transition-colors"),E(l,"width",t[70].coverage+"%"),A(l,"title",c="Show "+t[70].populated+" records with this field"),A(d,"class","h-full bg-gray-200 hover:bg-gray-300 transition-colors flex-1"),A(d,"title",h="Show "+t[70].empty+" records without this field"),A(a,"class","flex-1 h-5 bg-gray-100 rounded-full overflow-hidden flex cursor-pointer"),A(a,"title","Click to filter"),A(p,"class","w-20 text-right text-gray-500 text-xs"),A(e,"class","flex items-center gap-3 text-sm")},m(t,r){y(t,e,r),m(e,n),m(n,i),m(e,s),m(e,a),m(a,l),m(a,u),m(a,d),m(e,f),m(e,p),m(p,g),m(p,x),m(p,w),m(p,C),m(e,S),D||(P=[M(l,"click",B),M(d,"click",j)],D=!0)},p(e,r){t=e,64&r[0]&&L!==(L=t[70].field+"")&&T(i,L),64&r[0]&&o!==(o=t[70].field)&&A(n,"title",o),64&r[0]&&E(l,"width",t[70].coverage+"%"),64&r[0]&&c!==(c="Show "+t[70].populated+" records with this field")&&A(l,"title",c),64&r[0]&&h!==(h="Show "+t[70].empty+" records without this field")&&A(d,"title",h),64&r[0]&&O!==(O=t[70].coverage+"")&&T(g,O),64&r[0]&&R!==(R=t[70].populated+"")&&T(w,R)},d(t){t&&b(e),D=!1,r(P)}}}function Ad(t){let e,n,r,i,o,s,a=t[16].size+"";return{c(){e=v("button"),n=k(" Clear Selected ("),r=k(a),i=k(")"),A(e,"class","px-3 py-1.5 text-sm bg-red-100 text-red-700 hover:bg-red-200 rounded-lg")},m(a,l){y(a,e,l),m(e,n),m(e,r),m(e,i),o||(s=M(e,"click",t[31]),o=!0)},p(t,e){65536&e[0]&&a!==(a=t[16].size+"")&&T(r,a)},d(t){t&&b(e),o=!1,s()}}}function Dd(t){let e,n,r;function i(){return t[54](t[67])}return{c(){e=v("button"),e.textContent=" View",A(e,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded")},m(t,o){y(t,e,o),n||(r=M(e,"click",i),n=!0)},p(e,n){t=e},d(t){t&&b(e),n=!1,r()}}}function Td(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,P,E,L,O,R,B,j,$,I=Fd(t[67].status)+"",z=t[67].key+"",F=t[67].description+"",N=(t[67].computedAt?qu(t[67].computedAt):"never")+"",W=t[67].timeRemaining?`expires in ${Uu(t[67].timeRemaining)}`:"-",H=t[67].status+"";function V(){return t[53](t[67])}let q=t[67].hasData&&Dd(t);return{c(){e=v("div"),n=v("input"),i=_(),o=v("span"),s=k(I),a=_(),l=v("div"),c=v("div"),u=k(z),d=_(),h=v("div"),f=k(F),p=_(),g=v("div"),x=v("div"),w=k(N),C=_(),S=v("div"),D=k(W),P=_(),E=v("span"),L=k(H),R=_(),q&&q.c(),B=_(),A(n,"type","checkbox"),n.checked=r=t[16].has(t[67].key),A(n,"class","rounded"),A(o,"class","text-lg"),A(c,"class","font-mono text-gray-800"),A(h,"class","text-xs text-gray-500 truncate"),A(l,"class","flex-1 min-w-0"),A(g,"class","text-xs text-gray-500 text-right"),A(E,"class",O="px-2 py-0.5 text-xs rounded-full "+zd(t[67].status)),A(e,"class","flex items-center gap-3 p-2 hover:bg-gray-50 rounded text-sm")},m(t,r){y(t,e,r),m(e,n),m(e,i),m(e,o),m(o,s),m(e,a),m(e,l),m(l,c),m(c,u),m(l,d),m(l,h),m(h,f),m(e,p),m(e,g),m(g,x),m(x,w),m(g,C),m(g,S),m(S,D),m(e,P),m(e,E),m(E,L),m(e,R),q&&q.m(e,null),m(e,B),j||($=M(n,"change",V),j=!0)},p(i,o){t=i,98304&o[0]&&r!==(r=t[16].has(t[67].key))&&(n.checked=r),32768&o[0]&&I!==(I=Fd(t[67].status)+"")&&T(s,I),32768&o[0]&&z!==(z=t[67].key+"")&&T(u,z),32768&o[0]&&F!==(F=t[67].description+"")&&T(f,F),32768&o[0]&&N!==(N=(t[67].computedAt?qu(t[67].computedAt):"never")+"")&&T(w,N),32768&o[0]&&W!==(W=t[67].timeRemaining?`expires in ${Uu(t[67].timeRemaining)}`:"-")&&T(D,W),32768&o[0]&&H!==(H=t[67].status+"")&&T(L,H),32768&o[0]&&O!==(O="px-2 py-0.5 text-xs rounded-full "+zd(t[67].status))&&A(E,"class",O),t[67].hasData?q?q.p(t,o):(q=Dd(t),q.c(),q.m(e,B)):q&&(q.d(1),q=null)},d(t){t&&b(e),q&&q.d(),j=!1,$()}}}function Pd(e){let n;return{c(){n=v("div"),n.innerHTML='<span class="animate-spin inline-block mr-2"></span> Loading...',A(n,"class","text-center text-gray-500 py-8")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Ed(t){let e,n=it(t[18].layers),r=[];for(let e=0;e<n.length;e+=1)r[e]=Rd(Ku(t,n,e));return{c(){e=v("div");for(let t=0;t<r.length;t+=1)r[t].c();A(e,"class","bg-gray-50 rounded-lg p-4 space-y-4")},m(t,n){y(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(262144&i[0]){let o;for(n=it(t[18].layers),o=0;o<n.length;o+=1){const s=Ku(t,n,o);r[o]?r[o].p(s,i):(r[o]=Rd(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&b(e),x(r,t)}}}function Ld(t){let e,n,r,i,o=t[64].label+"";return{c(){e=v("span"),n=k(o),r=_(),A(e,"class",i="px-3 py-1.5 rounded-lg text-xs font-medium "+$d(t[64].status))},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,r){262144&r[0]&&o!==(o=t[64].label+"")&&T(n,o),262144&r[0]&&i!==(i="px-3 py-1.5 rounded-lg text-xs font-medium "+$d(t[64].status))&&A(e,"class",i)},d(t){t&&b(e)}}}function Od(t){let e;return{c(){e=v("div"),e.textContent="",A(e,"class","text-center text-gray-300 text-lg")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Rd(t){let e,n,r,i,o,s,a,l=t[61].title+"",c=it(t[61].items),u=[];for(let e=0;e<c.length;e+=1)u[e]=Ld(Yu(t,c,e));let d=t[61]!==t[18].layers[t[18].layers.length-1]&&Od();return{c(){e=v("div"),n=v("div"),r=k(l),i=_(),o=v("div");for(let t=0;t<u.length;t+=1)u[t].c();s=_(),d&&d.c(),a=C(),A(n,"class","text-xs font-semibold text-gray-500 mb-2"),A(o,"class","flex flex-wrap justify-center gap-2"),A(e,"class","text-center")},m(t,l){y(t,e,l),m(e,n),m(n,r),m(e,i),m(e,o);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(o,null);y(t,s,l),d&&d.m(t,l),y(t,a,l)},p(t,e){if(262144&e[0]&&l!==(l=t[61].title+"")&&T(r,l),262144&e[0]){let n;for(c=it(t[61].items),n=0;n<c.length;n+=1){const r=Yu(t,c,n);u[n]?u[n].p(r,e):(u[n]=Ld(r),u[n].c(),u[n].m(o,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}t[61]!==t[18].layers[t[18].layers.length-1]?d||(d=Od(),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null)},d(t){t&&(b(e),b(s),b(a)),x(u,t),d&&d.d(t)}}}function Bd(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,P,E=t[17].key+"",L=JSON.stringify(t[17].data,null,2)+"";return{c(){e=v("div"),n=v("div"),i=v("div"),o=v("h3"),s=k("Cached Data: "),a=v("span"),l=k(E),c=_(),u=v("button"),u.textContent="",d=_(),h=v("div"),f=v("pre"),p=k(L),g=_(),x=v("div"),w=v("button"),w.textContent=" Copy JSON",C=_(),S=v("button"),S.textContent="Close",A(a,"class","font-mono text-blue-600"),A(o,"class","font-semibold text-gray-800"),A(u,"class","text-gray-400 hover:text-gray-600 text-xl"),A(i,"class","p-4 border-b border-gray-200 flex items-center justify-between"),A(f,"class","text-xs bg-gray-50 p-4 rounded-lg overflow-auto"),A(h,"class","p-4 overflow-auto max-h-[60vh]"),A(w,"class","px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg"),A(S,"class","px-4 py-2 bg-blue-500 text-white hover:bg-blue-600 rounded-lg"),A(x,"class","p-4 border-t border-gray-200 flex justify-end gap-2"),A(n,"class","bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden"),A(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4")},m(r,b){y(r,e,b),m(e,n),m(n,i),m(i,o),m(o,s),m(o,a),m(a,l),m(i,c),m(i,u),m(n,d),m(n,h),m(h,f),m(f,p),m(n,g),m(n,x),m(x,w),m(x,C),m(x,S),D||(P=[M(u,"click",t[33]),M(w,"click",t[55]),M(S,"click",t[33])],D=!0)},p(t,e){131072&e[0]&&E!==(E=t[17].key+"")&&T(l,E),131072&e[0]&&L!==(L=JSON.stringify(t[17].data,null,2)+"")&&T(p,L)},d(t){t&&b(e),D=!1,r(P)}}}function jd(e){let n,i,o,s,a,l,c,u,d,h,f,p,g,w,C,S,D,E,O,R,B,j,$,I,z,F,N,W,H,V,q,U,Y,Q,J,X,G,Z,tt,et,nt,rt,ot,st,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,yt,bt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Tt,Pt,Et,Lt,Ot,Rt,Bt,jt,$t=(e[2]?.tables.find(e[38])?.icon||"")+"",It=e[7].totalCount.toLocaleString()+"",zt=e[15].filter(Nd).length+"",Ft=e[15].length+"";function Nt(t,e){return t[0]?id:rd}let Wt=Nt(e),Ht=Wt(e),Vt=e[1]&&od(e),qt=e[2]&&sd(e),Ut=it(e[5]),Kt=[];for(let t=0;t<Ut.length;t+=1)Kt[t]=ld(ed(e,Ut,t));let Yt=(e[8]||e[14])&&cd(e),Qt=e[14]&&ud(e);function Jt(t,e){return t[13]?fd:0===t[4].length?hd:dd}let Xt=Jt(e),Gt=Xt(e),Zt=e[4].length>0&&Md(e),te=it(e[6].slice(0,12)),ee=[];for(let t=0;t<te.length;t+=1)ee[t]=Sd(Ju(e,te,t));let ne=e[16].size>0&&Ad(e),re=it(e[15]),ie=[];for(let t=0;t<re.length;t+=1)ie[t]=Td(Qu(e,re,t));function oe(t,e){return t[18]?Ed:Pd}let se=oe(e),ae=se(e),le=e[17]&&Bd(e);return{c(){n=v("div"),i=v("div"),o=v("h2"),o.textContent=" Data Explorer",s=_(),a=v("button"),Ht.c(),l=k("\n      Refresh"),c=_(),Vt&&Vt.c(),u=_(),qt&&qt.c(),d=_(),h=v("div"),f=v("div"),p=v("div"),g=v("h3"),w=k($t),C=_(),S=k(e[3]),D=_(),E=v("span"),O=k("("),R=k(It),B=k(" records)"),j=_(),$=v("div"),I=v("button"),I.textContent=" Export Filtered",z=_(),F=v("button"),F.textContent=" Export All",N=_(),W=v("div"),H=v("div"),V=v("input"),q=_(),U=v("span"),U.textContent="",Y=_(),Q=v("select"),J=v("option"),J.textContent="All Fields";for(let t=0;t<Kt.length;t+=1)Kt[t].c();X=_(),G=v("button"),G.textContent="Search",Z=_(),Yt&&Yt.c(),tt=_(),Qt&&Qt.c(),et=_(),nt=v("div"),Gt.c(),rt=_(),Zt&&Zt.c(),ot=_(),st=v("div"),at=v("h3"),at.innerHTML=' Field Coverage\n      <span class="text-sm font-normal text-gray-500">Click bars to filter</span>',lt=_(),ct=v("div");for(let t=0;t<ee.length;t+=1)ee[t].c();ut=_(),dt=v("div"),ht=v("div"),ft=v("h3"),pt=k(" Cached Metrics\n        "),gt=v("span"),mt=k(zt),yt=k(" valid / "),bt=k(Ft),xt=k(" total"),vt=_(),ne&&ne.c(),wt=_(),kt=v("div"),_t=v("label"),Ct=v("input"),St=k("\n        Select All"),At=_();for(let t=0;t<ie.length;t+=1)ie[t].c();Dt=_(),Tt=v("div"),Pt=v("h3"),Pt.innerHTML=' Metrics Dependency Flow\n      <span class="text-sm font-normal text-gray-500">Colors indicate cache status</span>',Et=_(),Lt=v("div"),Lt.innerHTML="<span> Valid</span> <span> Expiring Soon</span> <span> Stale/Expired</span> <span> Never Computed</span>",Ot=_(),ae.c(),Rt=_(),le&&le.c(),A(o,"class","text-xl font-bold text-gray-800 flex items-center gap-2"),A(a,"class","px-3 py-1.5 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2 text-sm"),a.disabled=e[0],A(i,"class","flex items-center justify-between"),A(E,"class","text-sm font-normal text-gray-500"),A(g,"class","font-semibold text-gray-800 flex items-center gap-2"),A(I,"class","px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg"),A(I,"title","Export visible/filtered records"),A(F,"class","px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg"),A(F,"title","Export all records"),A($,"class","flex gap-2"),A(p,"class","flex items-center justify-between mb-3"),A(V,"type","text"),A(V,"placeholder","Search records..."),A(V,"class","w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"),A(U,"class","absolute left-2.5 top-2.5 text-gray-400"),A(H,"class","flex-1 relative"),J.__value="all",P(J,J.__value),A(Q,"class","px-3 py-2 border border-gray-300 rounded-lg bg-white"),void 0===e[9]&&K(()=>e[43].call(Q)),A(G,"class","px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"),A(W,"class","flex gap-2"),A(f,"class","p-4 border-b border-gray-200"),A(nt,"class","overflow-x-auto"),A(h,"class","bg-white rounded-lg shadow-sm border border-gray-200"),A(at,"class","font-semibold text-gray-800 mb-3 flex items-center gap-2"),A(ct,"class","space-y-2"),A(st,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),A(gt,"class","text-sm font-normal text-gray-500"),A(ft,"class","font-semibold text-gray-800 flex items-center gap-2"),A(ht,"class","flex items-center justify-between mb-3"),A(Ct,"type","checkbox"),Ct.checked=Mt=e[16].size===e[15].length&&e[15].length>0,A(Ct,"class","rounded"),A(_t,"class","flex items-center gap-2 p-2 text-sm text-gray-500 hover:bg-gray-50 rounded cursor-pointer"),A(kt,"class","space-y-1"),A(dt,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),A(Pt,"class","font-semibold text-gray-800 mb-3 flex items-center gap-2"),A(Lt,"class","flex gap-4 text-xs text-gray-600 mb-4"),A(Tt,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-4"),A(n,"class","data-explorer p-4 space-y-4")},m(t,r){y(t,n,r),m(n,i),m(i,o),m(i,s),m(i,a),Ht.m(a,null),m(a,l),m(n,c),Vt&&Vt.m(n,null),m(n,u),qt&&qt.m(n,null),m(n,d),m(n,h),m(h,f),m(f,p),m(p,g),m(g,w),m(g,C),m(g,S),m(g,D),m(g,E),m(E,O),m(E,R),m(E,B),m(p,j),m(p,$),m($,I),m($,z),m($,F),m(f,N),m(f,W),m(W,H),m(H,V),P(V,e[8]),m(H,q),m(H,U),m(W,Y),m(W,Q),m(Q,J);for(let t=0;t<Kt.length;t+=1)Kt[t]&&Kt[t].m(Q,null);L(Q,e[9],!0),m(W,X),m(W,G),m(W,Z),Yt&&Yt.m(W,null),m(f,tt),Qt&&Qt.m(f,null),m(h,et),m(h,nt),Gt.m(nt,null),m(h,rt),Zt&&Zt.m(h,null),m(n,ot),m(n,st),m(st,at),m(st,lt),m(st,ct);for(let t=0;t<ee.length;t+=1)ee[t]&&ee[t].m(ct,null);m(n,ut),m(n,dt),m(dt,ht),m(ht,ft),m(ft,pt),m(ft,gt),m(gt,mt),m(gt,yt),m(gt,bt),m(gt,xt),m(ht,vt),ne&&ne.m(ht,null),m(dt,wt),m(dt,kt),m(kt,_t),m(_t,Ct),m(_t,St),m(kt,At);for(let t=0;t<ie.length;t+=1)ie[t]&&ie[t].m(kt,null);m(n,Dt),m(n,Tt),m(Tt,Pt),m(Tt,Et),m(Tt,Lt),m(Tt,Ot),ae.m(Tt,null),m(n,Rt),le&&le.m(n,null),Bt||(jt=[M(a,"click",e[34]),M(I,"click",e[39]),M(F,"click",e[40]),M(V,"input",e[41]),M(V,"keydown",e[42]),M(Q,"change",e[43]),M(G,"click",e[23]),M(Ct,"change",e[30])],Bt=!0)},p(t,e){if(Wt!==(Wt=Nt(t))&&(Ht.d(1),Ht=Wt(t),Ht&&(Ht.c(),Ht.m(a,l))),1&e[0]&&(a.disabled=t[0]),t[1]?Vt?Vt.p(t,e):(Vt=od(t),Vt.c(),Vt.m(n,u)):Vt&&(Vt.d(1),Vt=null),t[2]?qt?qt.p(t,e):(qt=sd(t),qt.c(),qt.m(n,d)):qt&&(qt.d(1),qt=null),12&e[0]&&$t!==($t=(t[2]?.tables.find(t[38])?.icon||"")+"")&&T(w,$t),8&e[0]&&T(S,t[3]),128&e[0]&&It!==(It=t[7].totalCount.toLocaleString()+"")&&T(R,It),256&e[0]&&V.value!==t[8]&&P(V,t[8]),32&e[0]){let n;for(Ut=it(t[5]),n=0;n<Ut.length;n+=1){const r=ed(t,Ut,n);Kt[n]?Kt[n].p(r,e):(Kt[n]=ld(r),Kt[n].c(),Kt[n].m(Q,null))}for(;n<Kt.length;n+=1)Kt[n].d(1);Kt.length=Ut.length}if(544&e[0]&&L(Q,t[9]),t[8]||t[14]?Yt?Yt.p(t,e):(Yt=cd(t),Yt.c(),Yt.m(W,null)):Yt&&(Yt.d(1),Yt=null),t[14]?Qt?Qt.p(t,e):(Qt=ud(t),Qt.c(),Qt.m(f,null)):Qt&&(Qt.d(1),Qt=null),Xt===(Xt=Jt(t))&&Gt?Gt.p(t,e):(Gt.d(1),Gt=Xt(t),Gt&&(Gt.c(),Gt.m(nt,null))),t[4].length>0?Zt?Zt.p(t,e):(Zt=Md(t),Zt.c(),Zt.m(h,null)):Zt&&(Zt.d(1),Zt=null),33554496&e[0]){let n;for(te=it(t[6].slice(0,12)),n=0;n<te.length;n+=1){const r=Ju(t,te,n);ee[n]?ee[n].p(r,e):(ee[n]=Sd(r),ee[n].c(),ee[n].m(ct,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=te.length}if(32768&e[0]&&zt!==(zt=t[15].filter(Nd).length+"")&&T(mt,zt),32768&e[0]&&Ft!==(Ft=t[15].length+"")&&T(bt,Ft),t[16].size>0?ne?ne.p(t,e):(ne=Ad(t),ne.c(),ne.m(ht,null)):ne&&(ne.d(1),ne=null),98304&e[0]&&Mt!==(Mt=t[16].size===t[15].length&&t[15].length>0)&&(Ct.checked=Mt),536969216&e[0]|2&e[1]){let n;for(re=it(t[15]),n=0;n<re.length;n+=1){const r=Qu(t,re,n);ie[n]?ie[n].p(r,e):(ie[n]=Td(r),ie[n].c(),ie[n].m(kt,null))}for(;n<ie.length;n+=1)ie[n].d(1);ie.length=re.length}se===(se=oe(t))&&ae?ae.p(t,e):(ae.d(1),ae=se(t),ae&&(ae.c(),ae.m(Tt,null))),t[17]?le?le.p(t,e):(le=Bd(t),le.c(),le.m(n,null)):le&&(le.d(1),le=null)},i:t,o:t,d(t){t&&b(n),Ht.d(),Vt&&Vt.d(),qt&&qt.d(),x(Kt,t),Yt&&Yt.d(),Qt&&Qt.d(),Gt.d(),Zt&&Zt.d(),x(ee,t),ne&&ne.d(),x(ie,t),ae.d(),le&&le.d(),Bt=!1,r(jt)}}}function $d(t){switch(t){case"valid":return"bg-green-500 text-white";case"expiring":return"bg-yellow-500 text-white";case"stale":return"bg-red-500 text-white";case"source":return"bg-blue-500 text-white";case"storage":return"bg-purple-500 text-white";default:return"bg-gray-400 text-white"}}function Id(t){return null==t?"<null>":"boolean"==typeof t?t?" true":" false":"number"==typeof t?t.toLocaleString():Array.isArray(t)?0===t.length?"[]":`[${t.length} items]`:"object"==typeof t?"{...}":"string"==typeof t&&t.length>60?t.substring(0,60)+"...":String(t)}function zd(t){switch(t){case"valid":return"bg-green-100 text-green-800";case"expiring":return"bg-yellow-100 text-yellow-800";case"stale":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-600"}}function Fd(t){switch(t){case"valid":return"";case"expiring":return"";case"stale":return"";default:return""}}const Nd=t=>"valid"===t.status;function Wd(t,e,n){let r=!0,i=null,o=null,s="bookmarks",a=[],l=[],c=[],u={page:0,pageSize:25,totalCount:0,totalPages:0},d="",h="all",f=null,p="desc",g=null,m=!1,y=null,b=[],x=new Set,v=null,w=null;async function k(){n(2,o=await Wu())}async function _(){n(18,w=await async function(){const t=await Vu(),e=Object.fromEntries(t.map(t=>[t.key,t.status]));return{layers:[{title:" Data Sources",items:[{id:"chromeApi",label:"Chrome Bookmarks API",status:"source"},{id:"activity",label:"User Activity",status:"source"}]},{title:" Storage",items:[{id:"bookmarks",label:"Bookmarks Table",status:"storage"},{id:"events",label:"Events Table",status:"storage"}]},{title:" Computed Metrics",items:[{id:"domainStats",label:"Domain Stats",status:e.domainStats||"none"},{id:"activityTimeline",label:"Activity Timeline",status:e.activityTimeline||"none"},{id:"quickStats",label:"Quick Stats",status:e.quickStats||"none"},{id:"similarities",label:"Similarities",status:e.similarities||"none"},{id:"wordFrequency",label:"Word Frequency",status:e.wordFrequency||"none"}]},{title:" Insights",items:[{id:"insightsSummary",label:"Summary",status:e.insightsSummary||"none"},{id:"expertiseAreas",label:"Expertise",status:e.expertiseAreas||"none"}]}]}}())}async function C(){n(13,m=!0);try{const t={page:u.page,pageSize:u.pageSize,sortBy:f,sortOrder:p,searchQuery:d,searchField:h,fieldFilter:y},e=await Hu(s,t);n(4,a=e.records),n(7,u={page:e.page,pageSize:e.pageSize,totalCount:e.totalCount,totalPages:e.totalPages,hasMore:e.hasMore,hasPrev:e.hasPrev}),n(5,l=await async function(t){const e=await ll[t].limit(100).toArray(),n=new Set;return e.forEach(t=>{Object.keys(t).forEach(t=>n.add(t))}),[...n].sort()}(s)),n(6,c=await async function(t){const e=await ll[t].toArray(),n={};e.forEach(t=>{Object.keys(t).forEach(e=>{n[e]||(n[e]={field:e,populated:0,empty:0,samples:[],types:new Set});const r=t[e];if(null==r||""===r||Array.isArray(r)&&0===r.length)n[e].empty++;else if(n[e].populated++,n[e].types.add(Array.isArray(r)?"array":typeof r),n[e].samples.length<3){let t=r;"string"==typeof r&&r.length>50?t=r.substring(0,50)+"...":Array.isArray(r)?t=r.slice(0,3):"object"==typeof r&&(t="{...}"),n[e].samples.push(t)}})});const r=e.length;return Object.values(n).map(t=>({...t,types:[...t.types],total:r,coverage:r>0?parseFloat((t.populated/r*100).toFixed(1)):0})).sort((t,e)=>e.coverage-t.coverage)}(s))}catch(t){console.error("Error loading table data:",t)}finally{n(13,m=!1)}}async function M(){try{n(15,b=await Vu())}catch(t){console.error("Error loading cached metrics:",t)}}async function S(t){n(3,s=t),n(7,u.page=0,u),n(8,d=""),n(10,f=null),n(12,g=null),n(14,y=null),await C()}async function A(t){n(7,u.page=t,u),n(12,g=null),await C()}async function D(t){n(7,u.pageSize=t,u),n(7,u.page=0,u),await C()}async function T(t){f===t?n(11,p="asc"===p?"desc":"asc"):(n(10,f=t),n(11,p="desc")),n(7,u.page=0,u),await C()}async function P(){n(7,u.page=0,u),await C()}function E(){n(8,d=""),n(9,h="all"),P()}async function L(t,e){n(14,y=y?.field===t&&y?.hasValue===e?null:{field:t,hasValue:e}),n(7,u.page=0,u),await C()}function R(){n(14,y=null),C()}function B(t){n(12,g=g===t?null:t)}async function j(t=!1){const e=t?{}:{searchQuery:d,searchField:h,fieldFilter:y},n=await async function(t,e={}){const{records:n}=await Hu(t,{...e,pageSize:999999});return JSON.stringify(n,null,2)}(s,e);!function(t,e){const n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}(n,`${s}_${(new Date).toISOString().split("T")[0]}.json`)}function $(t){x.has(t)?x.delete(t):x.add(t),n(16,x)}async function z(t){const e=await async function(t){try{const e=await ll.computedMetrics.get(t);return e?.data||null}catch(e){return console.error(`Error getting cached metric ${t}:`,e),null}}(t);n(17,v={key:t,data:e})}I(async()=>{try{await k(),await C(),await M(),await _()}catch(t){n(1,i=t.message)}finally{n(0,r=!1)}});return[r,i,o,s,a,l,c,u,d,h,f,p,g,m,y,b,x,v,w,S,A,D,T,P,E,L,R,B,j,$,function(){x.size===b.length?x.clear():b.forEach(t=>x.add(t.key)),n(16,x)},async function(){const t=[...x];await async function(t){try{return await ll.computedMetrics.bulkDelete(t),!0}catch(t){return console.error("Error invalidating metrics:",t),!1}}(t),x.clear(),await M(),await _()},z,function(){n(17,v=null)},async function(){n(0,r=!0);try{await k(),await C(),await M(),await _()}finally{n(0,r=!1)}},function(t){return{bookmarks:["id","title","domain","category","isAlive"],events:["eventId","bookmarkId","type","timestamp"],cache:["key","timestamp","ttl"],settings:["key"],similarities:["id","bookmark1Id","bookmark2Id","score"],computedMetrics:["key","computedAt","validUntil"],enrichmentQueue:["queueId","bookmarkId","addedAt","priority"]}[t]||l.slice(0,5)},function(e){F.call(this,t,e)},t=>S(t.name),t=>t.name===s,()=>j(!1),()=>j(!0),function(){d=this.value,n(8,d)},t=>"Enter"===t.key&&P(),function(){h=O(this),n(9,h),n(5,l)},()=>{E(),R()},t=>T(t),t=>B(t),t=>function(t){navigator.clipboard.writeText(JSON.stringify(t,null,2))}(t),t=>D(parseInt(t.target.value)),()=>A(u.page-1),()=>A(u.page+1),t=>L(t.field,!0),t=>L(t.field,!1),t=>$(t.key),t=>z(t.key),()=>{navigator.clipboard.writeText(JSON.stringify(v.data,null,2))}]}class Hd extends ht{constructor(t){super(),dt(this,t,Wd,jd,o,{},null,[-1,-1,-1])}}const Vd=t=>({}),qd=t=>({});function Ud(t){let e,n;return{c(){e=v("p"),n=k(t[2]),A(e,"class","text-xs text-gray-500")},m(t,r){y(t,e,r),m(e,n)},p(t,e){4&e&&T(n,t[2])},d(t){t&&b(e)}}}function Kd(t){let e,n,r;return{c(){e=v("span"),n=k(""),A(e,"class",r="text-gray-400 transform transition-transform "+(t[0]?"":"rotate-180"))},m(t,r){y(t,e,r),m(e,n)},p(t,n){1&n&&r!==(r="text-gray-400 transform transition-transform "+(t[0]?"":"rotate-180"))&&A(e,"class",r)},d(t){t&&b(e)}}}function Yd(t){let e,n,r,i;const o=[Jd,Qd],s=[];function a(t,e){return t[4]?0:1}return n=a(t),r=s[n]=o[n](t),{c(){e=v("div"),r.c(),A(e,"class","p-4")},m(t,r){y(t,e,r),s[n].m(e,null),i=!0},p(t,i){let l=n;n=a(t),n===l?s[n].p(t,i):(tt(),rt(s[l],1,1,()=>{s[l]=null}),et(),r=s[n],r?r.p(t,i):(r=s[n]=o[n](t),r.c()),nt(r,1),r.m(e,null))},i(t){i||(nt(r),i=!0)},o(t){rt(r),i=!1},d(t){t&&b(e),s[n].d()}}}function Qd(t){let e;const n=t[11].default,r=u(n,t,t[10],null);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||1024&i)&&f(r,n,t,t[10],e?h(n,t[10],i,null):p(t[10]),null)},i(t){e||(nt(r,t),e=!0)},o(t){rt(r,t),e=!1},d(t){r&&r.d(t)}}}function Jd(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"></div> <span class="ml-2 text-sm text-gray-500">Loading...</span>',A(n,"class","flex items-center justify-center py-8")},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&b(n)}}}function Xd(t){let e,n,i,o,s,a,l,c,d,g,x,w,C,S,D,P,E,L,O,R,B,j,$=t[2]&&Ud(t);const I=t[11]["header-actions"],z=u(I,t,t[10],qd);let F=t[5]&&Kd(t),N=!t[0]&&Yd(t);return{c(){e=v("div"),n=v("div"),i=v("div"),o=v("span"),s=k(t[3]),a=_(),l=v("div"),c=v("h3"),d=k(t[1]),x=_(),$&&$.c(),w=_(),C=v("div"),z&&z.c(),S=_(),F&&F.c(),L=_(),N&&N.c(),A(o,"class","text-lg"),A(c,"class",g="text-sm font-semibold "+(t[9][t[6]]||t[9].default)),A(i,"class","flex items-center gap-2"),A(C,"class","flex items-center gap-2"),A(n,"class",D="px-4 py-3 border-b border-gray-100 flex items-center justify-between "+(t[5]?"cursor-pointer hover:bg-gray-50":"")),A(n,"role",P=t[5]?"button":"heading"),A(n,"tabindex",E=t[5]?0:-1),A(e,"class",O="rounded-lg border shadow-sm "+(t[8][t[6]]||t[8].default))},m(r,u){y(r,e,u),m(e,n),m(n,i),m(i,o),m(o,s),m(i,a),m(i,l),m(l,c),m(c,d),m(l,x),$&&$.m(l,null),m(n,w),m(n,C),z&&z.m(C,null),m(C,S),F&&F.m(C,null),m(e,L),N&&N.m(e,null),R=!0,B||(j=[M(n,"click",t[7]),M(n,"keypress",t[12])],B=!0)},p(t,[r]){(!R||8&r)&&T(s,t[3]),(!R||2&r)&&T(d,t[1]),(!R||64&r&&g!==(g="text-sm font-semibold "+(t[9][t[6]]||t[9].default)))&&A(c,"class",g),t[2]?$?$.p(t,r):($=Ud(t),$.c(),$.m(l,null)):$&&($.d(1),$=null),z&&z.p&&(!R||1024&r)&&f(z,I,t,t[10],R?h(I,t[10],r,Vd):p(t[10]),qd),t[5]?F?F.p(t,r):(F=Kd(t),F.c(),F.m(C,null)):F&&(F.d(1),F=null),(!R||32&r&&D!==(D="px-4 py-3 border-b border-gray-100 flex items-center justify-between "+(t[5]?"cursor-pointer hover:bg-gray-50":"")))&&A(n,"class",D),(!R||32&r&&P!==(P=t[5]?"button":"heading"))&&A(n,"role",P),(!R||32&r&&E!==(E=t[5]?0:-1))&&A(n,"tabindex",E),t[0]?N&&(tt(),rt(N,1,1,()=>{N=null}),et()):N?(N.p(t,r),1&r&&nt(N,1)):(N=Yd(t),N.c(),nt(N,1),N.m(e,null)),(!R||64&r&&O!==(O="rounded-lg border shadow-sm "+(t[8][t[6]]||t[8].default)))&&A(e,"class",O)},i(t){R||(nt(z,t),nt(N),R=!0)},o(t){rt(z,t),rt(N),R=!1},d(t){t&&b(e),$&&$.d(),z&&z.d(t),F&&F.d(),N&&N.d(),B=!1,r(j)}}}function Gd(t,e,n){let{$$slots:r={},$$scope:i}=e,{title:o=""}=e,{subtitle:s=""}=e,{icon:a=""}=e,{loading:l=!1}=e,{collapsible:c=!1}=e,{collapsed:u=!1}=e,{variant:d="default"}=e;function h(){c&&n(0,u=!u)}z();return t.$$set=t=>{"title"in t&&n(1,o=t.title),"subtitle"in t&&n(2,s=t.subtitle),"icon"in t&&n(3,a=t.icon),"loading"in t&&n(4,l=t.loading),"collapsible"in t&&n(5,c=t.collapsible),"collapsed"in t&&n(0,u=t.collapsed),"variant"in t&&n(6,d=t.variant),"$$scope"in t&&n(10,i=t.$$scope)},[u,o,s,a,l,c,d,h,{default:"bg-white border-gray-200",success:"bg-green-50 border-green-200",warning:"bg-yellow-50 border-yellow-200",danger:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200"},{default:"text-gray-900",success:"text-green-800",warning:"text-yellow-800",danger:"text-red-800",info:"text-blue-800"},i,r,t=>"Enter"===t.key&&h()]}class Zd extends ht{constructor(t){super(),dt(this,t,Gd,Xd,o,{title:1,subtitle:2,icon:3,loading:4,collapsible:5,collapsed:0,variant:6})}}async function th(){return await dl()}async function eh(){try{const t=await th(),e={};t.forEach(t=>{if(t.url)try{const n=new URL(t.url),r=n.hostname,i=n.pathname,o=r.split(".").reverse(),s=o[0],a=o[1]||"",l=o.length>2?o.slice(2).reverse().join("."):"www",c=`${a}.${s}`;e[c]||(e[c]={name:c,count:0,subdomains:{}}),e[c].count++,e[c].subdomains[l]||(e[c].subdomains[l]={name:l,count:0,paths:{}}),e[c].subdomains[l].count++;const u=i.split("/").filter(t=>t)[0]||"/";e[c].subdomains[l].paths[u]||(e[c].subdomains[l].paths[u]=0),e[c].subdomains[l].paths[u]++}catch(t){}});return Object.values(e).map(t=>({...t,subdomains:Object.values(t.subdomains).map(t=>({...t,paths:Object.entries(t.paths).map(([t,e])=>({name:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10)})).sort((t,e)=>e.count-t.count)})).sort((t,e)=>e.count-t.count)}catch(t){return console.error("Error building domain hierarchy:",t),[]}}async function nh(){try{const t=await th(),e=Date.now(),n={"Last 7 days":0,"Last 30 days":0,"Last 90 days":0,"Last year":0,Older:0},r={"Last 7 days":6048e5,"Last 30 days":2592e6,"Last 90 days":7776e6,"Last year":31536e6};return t.forEach(t=>{const i=e-t.dateAdded;i<=r["Last 7 days"]?n["Last 7 days"]++:i<=r["Last 30 days"]?n["Last 30 days"]++:i<=r["Last 90 days"]?n["Last 90 days"]++:i<=r["Last year"]?n["Last year"]++:n.Older++}),Object.entries(n).map(([t,e])=>({period:t,count:e}))}catch(t){return console.error("Error analyzing content freshness:",t),[]}}async function rh(){try{const t=await th(),e=await ll.events.toArray(),n=Date.now(),r=n-6048e5,i=n-2592e6,o=t.length,s=t.filter(t=>t.category).length,a=t.filter(t=>t.description||t.keywords?.length>0).length,l=t.filter(t=>null!==t.isAlive).length,c=t.filter(t=>!1===t.isAlive).length,u=t.filter(t=>!(t.lastAccessed||t.accessCount&&0!==t.accessCount)).length,d=t.filter(t=>t.dateAdded>r).length,h=t.filter(t=>t.dateAdded>i).length,f=e.filter(t=>t.timestamp>r),p=f.filter(t=>"access"===t.type).length,g=f.filter(t=>"create"===t.type).length,m={};t.forEach(t=>{t.category&&(m[t.category]=(m[t.category]||0)+1)});const y=Object.entries(m).sort(([,t],[,e])=>e-t).slice(0,5),b=new Set(t.map(t=>t.domain).filter(t=>t)).size;return{totalBookmarks:o,categorized:s,categorizedPercentage:o>0?(s/o*100).toFixed(1):0,enriched:a,enrichedPercentage:o>0?(a/o*100).toFixed(1):0,aliveChecked:l,deadLinks:c,neverAccessed:u,neverAccessedPercentage:o>0?(u/o*100).toFixed(1):0,addedThisWeek:d,addedThisMonth:h,accessEventsThisWeek:p,createEventsThisWeek:g,topCategories:y,uniqueDomains:b}}catch(t){return console.error("Error getting insights summary:",t),{}}}async function ih(){try{const t=await ll.events.toArray(),e=Date.now(),n={},r={};t.forEach(t=>{n[t.type]=(n[t.type]||0)+1;const e=new Date(t.timestamp).toISOString().split("T")[0];r[e]||(r[e]={total:0,byType:{}}),r[e].total++,r[e].byType[t.type]=(r[e].byType[t.type]||0)+1});const i=[];for(let t=29;t>=0;t--){const n=new Date(e-24*t*60*60*1e3).toISOString().split("T")[0];i.push({date:n,total:r[n]?.total||0,...r[n]?.byType||{}})}return{summary:n,timeline:i,totalEvents:t.length}}catch(t){return console.error("Error getting event statistics:",t),{summary:{},timeline:[],totalEvents:0}}}async function oh(){try{const t=await th(),e=t.filter(t=>!1===t.isAlive),n=Date.now();if(0===e.length)return{total:0,byDomain:[],byAge:{recent:0,moderate:0,old:0,ancient:0},byCategory:[],oldestDeadLinks:[],recentlyDied:[],deadLinkRate:0,checkedCount:0};const r={};e.forEach(t=>{const e=t.domain||"Unknown";r[e]=(r[e]||0)+1});const i=Object.entries(r).map(([t,e])=>({domain:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10),o=n-6048e5,s=n-2592e6,a=n-31536e6,l={recent:e.filter(t=>t.dateAdded>o).length,moderate:e.filter(t=>t.dateAdded<=o&&t.dateAdded>s).length,old:e.filter(t=>t.dateAdded<=s&&t.dateAdded>a).length,ancient:e.filter(t=>t.dateAdded<=a).length},c={};e.forEach(t=>{const e=t.category||"Uncategorized";c[e]=(c[e]||0)+1});const u=Object.entries(c).map(([t,e])=>({category:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,10),d=[...e].sort((t,e)=>t.dateAdded-e.dateAdded).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,lastChecked:t.lastChecked})),h=[...e].filter(t=>t.lastChecked).sort((t,e)=>e.lastChecked-t.lastChecked).slice(0,5).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,lastChecked:t.lastChecked})),f=t.filter(t=>null!==t.isAlive&&void 0!==t.isAlive).length,p=f>0?(e.length/f*100).toFixed(1):0;return{total:e.length,byDomain:i,byAge:l,byCategory:u,oldestDeadLinks:d,recentlyDied:h,deadLinkRate:parseFloat(p),checkedCount:f}}catch(t){return console.error("Error getting dead link insights:",t),{total:0,byDomain:[],byAge:{recent:0,moderate:0,old:0,ancient:0},byCategory:[],oldestDeadLinks:[],recentlyDied:[],deadLinkRate:0,checkedCount:0}}}async function sh(){try{const t=await th(),e={};t.forEach(t=>{const n=t.category||"uncategorized";e[n]=(e[n]||0)+1});const n=Object.entries(e).map(([e,n])=>({category:e,count:n,percentage:Math.round(n/t.length*1e3)/10})).sort((t,e)=>e.count-t.count),r={};t.forEach(t=>{t.keywords&&Array.isArray(t.keywords)&&t.keywords.forEach(t=>{const e=t.toLowerCase().trim();e.length>2&&(r[e]=(r[e]||0)+1)})});const i=Object.entries(r).map(([t,e])=>({keyword:t,count:e})).sort((t,e)=>e.count-t.count).slice(0,30),o={articles:0,videos:0,documentation:0,tools:0,social:0,code:0,shopping:0,other:0};t.forEach(t=>{const e=(t.url||"").toLowerCase(),n=t.category||"";"video"===n||e.includes("youtube")||e.includes("vimeo")||e.includes("video")?o.videos++:"documentation"===n||e.includes("/docs")||e.includes("/api")||e.includes("/reference")?o.documentation++:"code"===n||e.includes("github")||e.includes("gitlab")||e.includes("stackoverflow")?o.code++:"tool"===n||e.includes("app.")||e.includes("/app")?o.tools++:"social"===n||e.includes("twitter")||e.includes("linkedin")||e.includes("reddit")?o.social++:"shopping"===n||e.includes("amazon")||e.includes("ebay")||e.includes("shop")?o.shopping++:"blog"===n||e.includes("blog")||e.includes("article")||e.includes("medium")?o.articles++:o.other++});const s=Object.entries(o).map(([e,n])=>({type:e,count:n,percentage:Math.round(n/t.length*1e3)/10})).filter(t=>t.count>0).sort((t,e)=>e.count-t.count),a={};t.forEach(t=>{let e="unknown";t.rawMetadata?.other?.language&&(e=t.rawMetadata.other.language.split("-")[0].toLowerCase()),a[e]=(a[e]||0)+1});const l=Object.entries(a).map(([e,n])=>({language:"unknown"===e?"Unknown":e.toUpperCase(),count:n,percentage:Math.round(n/t.length*1e3)/10})).sort((t,e)=>e.count-t.count),c={};t.forEach(t=>{const e=t.folderPath||"Root";c[e]=(c[e]||0)+1});return{categoryBreakdown:n,topicClusters:i,contentTypeMix:s,languageDistribution:l,folderDistribution:Object.entries(c).map(([e,n])=>({folder:e,count:n,percentage:Math.round(n/t.length*1e3)/10})).sort((t,e)=>e.count-t.count).slice(0,15),totalBookmarks:t.length}}catch(t){return console.error("Error getting content analysis:",t),{categoryBreakdown:[],topicClusters:[],contentTypeMix:[],languageDistribution:[],folderDistribution:[],totalBookmarks:0}}}async function ah(){try{const t=await th(),e=Date.now(),n=e-2592e6,r=e-7776e6,i=e-31536e6,o=t.filter(t=>{const e=t.dateAdded<n,r=!t.accessCount||0===t.accessCount,i=!1!==t.isAlive;return e&&r&&i}).sort((t,e)=>t.dateAdded-e.dateAdded).slice(0,50).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,category:t.category,folderPath:t.folderPath,ageInDays:Math.floor((e-t.dateAdded)/864e5)})),s=t.filter(t=>{const e=!1===t.isAlive,n=!t.accessCount||0===t.accessCount,r=t.dateAdded<i&&n;return e||r}).sort((t,e)=>!1===t.isAlive&&!1!==e.isAlive?-1:!1===e.isAlive&&!1!==t.isAlive?1:t.dateAdded-e.dateAdded).slice(0,50).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,isAlive:t.isAlive,accessCount:t.accessCount||0,reason:!1===t.isAlive?"Dead link":"Old & unused",ageInDays:Math.floor((e-t.dateAdded)/864e5)})),a=t.filter(t=>{const e=t.dateAdded<r,n=!1!==t.isAlive,i=t.title&&t.url;return e&&n&&i}),l=[...a].sort(()=>Math.random()-.5).slice(0,10).map(t=>({id:t.id,title:t.title,url:t.url,domain:t.domain,dateAdded:t.dateAdded,category:t.category,description:t.description,ageInDays:Math.floor((e-t.dateAdded)/864e5)})),c={};t.forEach(t=>{t.domain&&(c[t.domain]||(c[t.domain]=[]),c[t.domain].push(t))});const u=Object.entries(c).filter(([,t])=>t.length<=2).map(([t,e])=>({domain:t,count:e.length,bookmarks:e.map(t=>({id:t.id,title:t.title,url:t.url,dateAdded:t.dateAdded}))})).sort((t,e)=>t.count-e.count).slice(0,20);return{staleQueue:o,cleanupCandidates:s,rediscoveryFeed:l,lowValueDomains:u,stats:{totalStale:o.length,totalCleanupCandidates:s.length,totalLowValueDomains:u.length,deadLinksCount:t.filter(t=>!1===t.isAlive).length,oldUnusedCount:t.filter(t=>t.dateAdded<i&&(!t.accessCount||0===t.accessCount)).length}}}catch(t){return console.error("Error getting actionable insights:",t),{staleQueue:[],cleanupCandidates:[],rediscoveryFeed:[],lowValueDomains:[],stats:{}}}}async function lh(){try{const t=await th(),e={};t.forEach(t=>{if(!t.domain)return;e[t.domain]||(e[t.domain]={domain:t.domain,total:0,dead:0,checked:0,accessed:0,totalAccess:0,oldestBookmark:1/0,newestBookmark:0,categories:{}});const n=e[t.domain];n.total++,null!==t.isAlive&&void 0!==t.isAlive&&(n.checked++,!1===t.isAlive&&n.dead++),t.accessCount&&t.accessCount>0&&(n.accessed++,n.totalAccess+=t.accessCount),t.dateAdded<n.oldestBookmark&&(n.oldestBookmark=t.dateAdded),t.dateAdded>n.newestBookmark&&(n.newestBookmark=t.dateAdded),t.category&&(n.categories[t.category]=(n.categories[t.category]||0)+1)});const n=Object.values(e).filter(t=>t.checked>=3).map(t=>({domain:t.domain,total:t.total,dead:t.dead,checked:t.checked,reliabilityScore:Math.round((t.checked-t.dead)/t.checked*100),deadRate:Math.round(t.dead/t.checked*100)})).sort((t,e)=>t.reliabilityScore-e.reliabilityScore).slice(0,15),r=n.filter(t=>t.deadRate>=30).sort((t,e)=>e.deadRate-t.deadRate),i=Object.values(e).map(t=>({domain:t.domain,total:t.total,accessed:t.accessed,totalAccess:t.totalAccess,engagementRate:t.total>0?Math.round(t.accessed/t.total*100):0,avgAccess:t.accessed>0?Math.round(t.totalAccess/t.accessed*10)/10:0})).filter(t=>t.totalAccess>0).sort((t,e)=>e.totalAccess-t.totalAccess).slice(0,10),o=t.length,s=Object.values(e).filter(t=>t.total/o>=.1).map(t=>({domain:t.domain,count:t.total,percentage:Math.round(t.total/o*100),topCategory:Object.entries(t.categories).sort(([,t],[,e])=>e-t)[0]?.[0]||"unknown"})).sort((t,e)=>e.percentage-t.percentage),a=Object.keys(e).length,l=o>0?Math.min(100,Math.round(a/o*100*3)):0;return{reliabilityScores:n,ephemeralSources:r,valuableDomains:i,dependencyWarnings:s,knowledgeMap:Object.values(e).map(t=>({domain:t.domain,total:t.total,accessed:t.accessed,dead:t.dead,checked:t.checked,percentage:Math.round(t.total/o*1e3)/10,topCategory:Object.entries(t.categories).sort(([,t],[,e])=>e-t)[0]?.[0]||null,categories:Object.entries(t.categories).map(([t,e])=>({category:t,count:e})).sort((t,e)=>e.count-t.count)})).sort((t,e)=>e.total-t.total).slice(0,25),diversityScore:l,uniqueDomains:a,totalBookmarks:o}}catch(t){return console.error("Error getting domain intelligence:",t),{reliabilityScores:[],ephemeralSources:[],valuableDomains:[],dependencyWarnings:[],knowledgeMap:[],diversityScore:0,uniqueDomains:0,totalBookmarks:0}}}async function ch(){try{const t=await th(),e=Date.now(),n=Array(24).fill(0);t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded).getHours();n[e]++}});const r=n.map((t,e)=>({hour:e,hourLabel:`${e.toString().padStart(2,"0")}:00`,count:t})),i=Math.max(...n),o=r.filter(t=>t.count===i).map(t=>t.hourLabel),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=Array(7).fill(0);t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded).getDay();a[e]++}});const l=a.map((t,e)=>({day:e,dayName:s[e],count:t})),c=a[0]+a[6],u=a.slice(1,6).reduce((t,e)=>t+e,0),d={weekday:{count:u,percentage:Math.round(u/t.length*100)},weekend:{count:c,percentage:Math.round(c/t.length*100)}},h={Today:0,"1-7 days":0,"1-4 weeks":0,"1-3 months":0,"3-6 months":0,"6-12 months":0,"1-2 years":0,"2+ years":0},f=e-864e5,p=e-6048e5,g=e-24192e5,m=e-7776e6,y=e-15552e6,b=e-31536e6,x=e-63072e6;t.forEach(t=>{t.dateAdded&&(t.dateAdded>=f?h.Today++:t.dateAdded>=p?h["1-7 days"]++:t.dateAdded>=g?h["1-4 weeks"]++:t.dateAdded>=m?h["1-3 months"]++:t.dateAdded>=y?h["3-6 months"]++:t.dateAdded>=b?h["6-12 months"]++:t.dateAdded>=x?h["1-2 years"]++:h["2+ years"]++)});const v=Object.entries(h).map(([e,n])=>({period:e,count:n,percentage:Math.round(n/t.length*100)})),w=t.reduce((t,n)=>t+(e-(n.dateAdded||e)),0),k=t.length>0?w/t.length:0,_=Math.round(k/864e5),C={};for(let t=11;t>=0;t--){const n=new Date(e);n.setMonth(n.getMonth()-t);const r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;C[r]=0}t.forEach(t=>{if(t.dateAdded){const e=new Date(t.dateAdded),n=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;n in C&&C[n]++}});return{bookmarkingHours:r,peakHours:o,dayOfWeekDistribution:l,weekdayVsWeekend:d,ageDistribution:v,avgAgeDays:_,monthlyCreationTrend:Object.entries(C).map(([t,e])=>({month:t,monthLabel:new Date(t+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"}),count:e})),totalBookmarks:t.length}}catch(t){return console.error("Error getting time-based analysis:",t),{bookmarkingHours:[],peakHours:[],dayOfWeekDistribution:[],weekdayVsWeekend:{weekday:{count:0,percentage:0},weekend:{count:0,percentage:0}},ageDistribution:[],avgAgeDays:0,monthlyCreationTrend:[],totalBookmarks:0}}}async function uh(){try{const t=await th(),e=t.length;if(0===e)return{platforms:[],total:0};const n={};t.forEach(t=>{const e=t.platform||"other";n[e]=(n[e]||0)+1});return{platforms:Object.entries(n).map(([t,n])=>({platform:t,count:n,percentage:Math.round(n/e*100)})).sort((t,e)=>e.count-t.count),total:e}}catch(t){return console.error("Error getting platform distribution:",t),{platforms:[],total:0}}}async function dh(t=10){try{const e=await th(),n=Date.now(),r=n-2592e6,i={};e.forEach(t=>{if(!t.creator)return;const e=`${t.platform}:${t.creator}`;i[e]||(i[e]={creator:t.creator,platform:t.platform||"other",totalCount:0,recentCount:0,contentTypes:new Set,thumbnail:null,firstSaved:1/0,lastSaved:0}),i[e].totalCount++,t.dateAdded>r&&i[e].recentCount++,t.contentType&&i[e].contentTypes.add(t.contentType),t.dateAdded<i[e].firstSaved&&(i[e].firstSaved=t.dateAdded),t.dateAdded>i[e].lastSaved&&(i[e].lastSaved=t.dateAdded),!i[e].thumbnail&&t.platformData?.extra?.thumbnail&&(i[e].thumbnail=t.platformData.extra.thumbnail)});return Object.values(i).map(t=>({...t,contentTypes:Array.from(t.contentTypes),velocity:t.firstSaved!==1/0?(t.totalCount/Math.max(1,(n-t.firstSaved)/2592e6)).toFixed(1):0})).sort((t,e)=>e.totalCount-t.totalCount).slice(0,t)}catch(t){return console.error("Error getting creator leaderboard:",t),[]}}function hh(t,e,n){const r=t.slice();return r[26]=e[n],r}function fh(t,e,n){const r=t.slice();return r[29]=e[n],r}function ph(t,e,n){const r=t.slice();return r[32]=e[n],r[34]=n,r}function gh(t,e,n){const r=t.slice();return r[35]=e[n],r}function mh(t,e,n){const r=t.slice();r[38]=e[n];const i=Math.min(1.5,.7+r[38].count/r[2].topicClusters[0].count);return r[39]=i,r}function yh(t,e,n){const r=t.slice();return r[42]=e[n],r}function bh(t){let e,n,r,i,o,s,a,l=t[42].label+"";function c(){return t[13](t[42])}return{c(){e=v("button"),n=v("span"),n.textContent=`${t[42].icon}`,r=_(),i=k(l),A(n,"class","mr-1"),A(e,"class",o="px-4 py-2 rounded-t-lg text-sm font-medium transition-colors "+(t[1]===t[42].id?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"))},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i),s||(a=M(e,"click",c),s=!0)},p(n,r){t=n,2&r[0]&&o!==(o="px-4 py-2 rounded-t-lg text-sm font-medium transition-colors "+(t[1]===t[42].id?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"))&&A(e,"class",o)},d(t){t&&b(e),s=!1,a()}}}function xh(t){let e,n,r,i="content"===t[1]&&t[2]&&wh(t),o="actions"===t[1]&&t[3]&&Ih(t);return{c(){i&&i.c(),e=_(),o&&o.c(),n=C()},m(t,s){i&&i.m(t,s),y(t,e,s),o&&o.m(t,s),y(t,n,s),r=!0},p(t,r){"content"===t[1]&&t[2]?i?(i.p(t,r),6&r[0]&&nt(i,1)):(i=wh(t),i.c(),nt(i,1),i.m(e.parentNode,e)):i&&(tt(),rt(i,1,1,()=>{i=null}),et()),"actions"===t[1]&&t[3]?o?(o.p(t,r),10&r[0]&&nt(o,1)):(o=Ih(t),o.c(),nt(o,1),o.m(n.parentNode,n)):o&&(tt(),rt(o,1,1,()=>{o=null}),et())},i(t){r||(nt(i),nt(o),r=!0)},o(t){rt(i),rt(o),r=!1},d(t){t&&(b(e),b(n)),i&&i.d(t),o&&o.d(t)}}}function vh(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-500">Loading insights...</span>',A(n,"class","flex items-center justify-center py-16")},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&b(n)}}}function wh(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,M,S,D,P,E,L,O,R,B,j,$,I,z,F,N,W,H,V,q,U,K,Y,Q,J=t[2].totalBookmarks+"",X=(t[2].categoryBreakdown?.length||0)+"",G=(t[5]?.platforms?.length||0)+"",Z=(t[6]?.length||0)+"";j=new Zd({props:{title:"Platform Breakdown",icon:"",subtitle:"Click to filter by platform",$$slots:{default:[kh]},$$scope:{ctx:t}}}),I=new Zd({props:{title:"Category Distribution",icon:"",subtitle:"Click a segment to filter",$$slots:{default:[_h]},$$scope:{ctx:t}}}),F=new Zd({props:{title:"Content Type Mix",icon:"",$$slots:{default:[Ch]},$$scope:{ctx:t}}}),W=new Zd({props:{title:"Bookmarks Added Over Time",icon:"",subtitle:"Last 12 months",$$slots:{default:[Mh]},$$scope:{ctx:t}}}),V=new Zd({props:{title:"Topic Clusters",icon:"",subtitle:"Most common keywords from your bookmarks",$$slots:{default:[Th]},$$scope:{ctx:t}}}),U=new Zd({props:{title:"Folder Distribution",icon:"",subtitle:"Where your bookmarks live",$$slots:{default:[Eh]},$$scope:{ctx:t}}});let it=t[6]&&t[6].length>0&&Lh(t),ot=t[4]?.ephemeralSources?.length>0&&Bh(t);return{c(){e=v("div"),n=v("div"),r=v("div"),i=v("div"),o=k(J),s=_(),a=v("div"),a.textContent="Total Bookmarks",l=_(),c=v("div"),u=v("div"),d=k(X),h=_(),f=v("div"),f.textContent="Categories",p=_(),g=v("div"),x=v("div"),w=k(G),C=_(),M=v("div"),M.textContent="Platforms",S=_(),D=v("div"),P=v("div"),E=k(Z),L=_(),O=v("div"),O.textContent="Creators",R=_(),B=v("div"),at(j.$$.fragment),$=_(),at(I.$$.fragment),z=_(),at(F.$$.fragment),N=_(),at(W.$$.fragment),H=_(),at(V.$$.fragment),q=_(),at(U.$$.fragment),K=_(),it&&it.c(),Y=_(),ot&&ot.c(),A(i,"class","text-2xl font-bold text-blue-700"),A(a,"class","text-sm text-blue-600"),A(r,"class","bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-4"),A(u,"class","text-2xl font-bold text-purple-700"),A(f,"class","text-sm text-purple-600"),A(c,"class","bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200 rounded-lg p-4"),A(x,"class","text-2xl font-bold text-green-700"),A(M,"class","text-sm text-green-600"),A(g,"class","bg-gradient-to-br from-green-50 to-green-100 border border-green-200 rounded-lg p-4"),A(P,"class","text-2xl font-bold text-orange-700"),A(O,"class","text-sm text-orange-600"),A(D,"class","bg-gradient-to-br from-orange-50 to-orange-100 border border-orange-200 rounded-lg p-4"),A(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4"),A(B,"class","grid grid-cols-1 lg:grid-cols-2 gap-6"),A(e,"class","space-y-6")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(i,o),m(r,s),m(r,a),m(n,l),m(n,c),m(c,u),m(u,d),m(c,h),m(c,f),m(n,p),m(n,g),m(g,x),m(x,w),m(g,C),m(g,M),m(n,S),m(n,D),m(D,P),m(P,E),m(D,L),m(D,O),m(e,R),m(e,B),lt(j,B,null),m(B,$),lt(I,B,null),m(B,z),lt(F,B,null),m(B,N),lt(W,B,null),m(e,H),lt(V,e,null),m(e,q),lt(U,e,null),m(e,K),it&&it.m(e,null),m(e,Y),ot&&ot.m(e,null),Q=!0},p(t,n){(!Q||4&n[0])&&J!==(J=t[2].totalBookmarks+"")&&T(o,J),(!Q||4&n[0])&&X!==(X=(t[2].categoryBreakdown?.length||0)+"")&&T(d,X),(!Q||32&n[0])&&G!==(G=(t[5]?.platforms?.length||0)+"")&&T(w,G),(!Q||64&n[0])&&Z!==(Z=(t[6]?.length||0)+"")&&T(E,Z);const r={};16384&n[1]&&(r.$$scope={dirty:n,ctx:t}),j.$set(r);const i={};16384&n[1]&&(i.$$scope={dirty:n,ctx:t}),I.$set(i);const s={};16384&n[1]&&(s.$$scope={dirty:n,ctx:t}),F.$set(s);const a={};16384&n[1]&&(a.$$scope={dirty:n,ctx:t}),W.$set(a);const l={};4&n[0]|16384&n[1]&&(l.$$scope={dirty:n,ctx:t}),V.$set(l);const c={};4&n[0]|16384&n[1]&&(c.$$scope={dirty:n,ctx:t}),U.$set(c),t[6]&&t[6].length>0?it?(it.p(t,n),64&n[0]&&nt(it,1)):(it=Lh(t),it.c(),nt(it,1),it.m(e,Y)):it&&(tt(),rt(it,1,1,()=>{it=null}),et()),t[4]?.ephemeralSources?.length>0?ot?(ot.p(t,n),16&n[0]&&nt(ot,1)):(ot=Bh(t),ot.c(),nt(ot,1),ot.m(e,null)):ot&&(tt(),rt(ot,1,1,()=>{ot=null}),et())},i(t){Q||(nt(j.$$.fragment,t),nt(I.$$.fragment,t),nt(F.$$.fragment,t),nt(W.$$.fragment,t),nt(V.$$.fragment,t),nt(U.$$.fragment,t),nt(it),nt(ot),Q=!0)},o(t){rt(j.$$.fragment,t),rt(I.$$.fragment,t),rt(F.$$.fragment,t),rt(W.$$.fragment,t),rt(V.$$.fragment,t),rt(U.$$.fragment,t),rt(it),rt(ot),Q=!1},d(t){t&&b(e),ct(j),ct(I),ct(F),ct(W),ct(V),ct(U),it&&it.d(),ot&&ot.d()}}}function kh(e){let n;return{c(){n=v("div"),n.innerHTML='<canvas id="platformDonutChart"></canvas>',A(n,"class","h-64")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function _h(e){let n;return{c(){n=v("div"),n.innerHTML='<canvas id="categoryDonutChart"></canvas>',A(n,"class","h-64")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Ch(e){let n;return{c(){n=v("div"),n.innerHTML='<canvas id="contentTypeChart"></canvas>',A(n,"class","h-64")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Mh(e){let n;return{c(){n=v("div"),n.innerHTML='<canvas id="dateAddedChart"></canvas>',A(n,"class","h-64")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Sh(e){let n;return{c(){n=v("p"),n.textContent="No keywords found. Run enrichment to extract keywords.",A(n,"class","text-gray-500 text-sm")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Ah(t){let e,n=it(t[2].topicClusters.slice(0,25)),r=[];for(let e=0;e<n.length;e+=1)r[e]=Dh(mh(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);y(t,e,n)},p(t,i){if(260&i[0]){let o;for(n=it(t[2].topicClusters.slice(0,25)),o=0;o<n.length;o+=1){const s=mh(t,n,o);r[o]?r[o].p(s,i):(r[o]=Dh(s),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&b(e),x(r,t)}}}function Dh(t){let e,n,r,i,o,s,a,l,c,u,d=t[38].keyword+"",h=t[38].count+"";function f(){return t[14](t[38])}return{c(){e=v("button"),n=k(d),r=_(),i=v("span"),o=k("("),s=k(h),a=k(")"),l=_(),A(i,"class","text-xs opacity-60 ml-1"),A(e,"class","px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors"),E(e,"font-size",t[39]+"rem")},m(t,d){y(t,e,d),m(e,n),m(e,r),m(e,i),m(i,o),m(i,s),m(i,a),m(e,l),c||(u=M(e,"click",f),c=!0)},p(r,i){t=r,4&i[0]&&d!==(d=t[38].keyword+"")&&T(n,d),4&i[0]&&h!==(h=t[38].count+"")&&T(s,h),4&i[0]&&E(e,"font-size",t[39]+"rem")},d(t){t&&b(e),c=!1,u()}}}function Th(t){let e;function n(t,e){return t[2].topicClusters&&t[2].topicClusters.length>0?Ah:Sh}let r=n(t),i=r(t);return{c(){e=v("div"),i.c(),A(e,"class","flex flex-wrap gap-2")},m(t,n){y(t,e,n),i.m(e,null)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e,null)))},d(t){t&&b(e),i.d()}}}function Ph(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p=t[35].folder+"",g=t[35].count+"";return{c(){e=v("div"),n=v("div"),r=v("div"),i=v("span"),o=k(p),a=_(),l=v("span"),c=k(g),u=_(),d=v("div"),h=v("div"),f=_(),A(i,"class","text-sm truncate"),A(i,"title",s=t[35].folder),A(l,"class","text-xs text-gray-500"),A(r,"class","flex items-center justify-between mb-1"),A(h,"class","h-full bg-purple-500 rounded-full"),E(h,"width",t[35].percentage+"%"),A(d,"class","w-full bg-gray-100 rounded-full h-2 overflow-hidden"),A(n,"class","flex-1 min-w-0"),A(e,"class","flex items-center gap-2")},m(t,s){y(t,e,s),m(e,n),m(n,r),m(r,i),m(i,o),m(r,a),m(r,l),m(l,c),m(n,u),m(n,d),m(d,h),m(e,f)},p(t,e){4&e[0]&&p!==(p=t[35].folder+"")&&T(o,p),4&e[0]&&s!==(s=t[35].folder)&&A(i,"title",s),4&e[0]&&g!==(g=t[35].count+"")&&T(c,g),4&e[0]&&E(h,"width",t[35].percentage+"%")},d(t){t&&b(e)}}}function Eh(t){let e,n=it(t[2].folderDistribution),r=[];for(let e=0;e<n.length;e+=1)r[e]=Ph(gh(t,n,e));return{c(){e=v("div");for(let t=0;t<r.length;t+=1)r[t].c();A(e,"class","space-y-2 insight-scrollable svelte-qemdpo")},m(t,n){y(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(4&i[0]){let o;for(n=it(t[2].folderDistribution),o=0;o<n.length;o+=1){const s=gh(t,n,o);r[o]?r[o].p(s,i):(r[o]=Ph(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&b(e),x(r,t)}}}function Lh(t){let e,n;return e=new Zd({props:{title:"Creator Leaderboard",icon:"",subtitle:"Your most bookmarked creators",$$slots:{default:[Rh]},$$scope:{ctx:t}}}),{c(){at(e.$$.fragment)},m(t,r){lt(e,t,r),n=!0},p(t,n){const r={};64&n[0]|16384&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Oh(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,P,E,L,O,R,B=t[32].creator+"",j=sl(t[32].platform)+"",$=t[32].count+"",I=(t[32].recentCount||0)+"";function z(){return t[15](t[32])}return{c(){e=v("button"),n=v("div"),n.textContent=`${t[34]+1}`,r=_(),i=v("div"),o=v("div"),s=v("span"),a=k(B),l=_(),c=v("span"),u=k(j),h=_(),f=v("div"),p=k($),g=k(" bookmarks"),x=_(),w=v("div"),C=v("div"),S=k("+"),D=k(I),P=_(),E=v("div"),E.textContent="last 30d",L=_(),A(n,"class","w-6 h-6 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-xs font-bold"),A(s,"class","font-medium text-sm truncate"),A(c,"class","text-xs px-1.5 py-0.5 bg-gray-100 rounded"),A(c,"title",d=ol(t[32].platform)),A(o,"class","flex items-center gap-2"),A(f,"class","text-xs text-gray-500"),A(i,"class","flex-1 min-w-0"),A(C,"class","text-xs font-medium text-green-600"),A(E,"class","text-xs text-gray-400"),A(w,"class","text-right"),A(e,"class","w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-50 transition-colors text-left")},m(t,d){y(t,e,d),m(e,n),m(e,r),m(e,i),m(i,o),m(o,s),m(s,a),m(o,l),m(o,c),m(c,u),m(i,h),m(i,f),m(f,p),m(f,g),m(e,x),m(e,w),m(w,C),m(C,S),m(C,D),m(w,P),m(w,E),m(e,L),O||(R=M(e,"click",z),O=!0)},p(e,n){t=e,64&n[0]&&B!==(B=t[32].creator+"")&&T(a,B),64&n[0]&&j!==(j=sl(t[32].platform)+"")&&T(u,j),64&n[0]&&d!==(d=ol(t[32].platform))&&A(c,"title",d),64&n[0]&&$!==($=t[32].count+"")&&T(p,$),64&n[0]&&I!==(I=(t[32].recentCount||0)+"")&&T(D,I)},d(t){t&&b(e),O=!1,R()}}}function Rh(t){let e,n=it(t[6].slice(0,10)),r=[];for(let e=0;e<n.length;e+=1)r[e]=Oh(ph(t,n,e));return{c(){e=v("div");for(let t=0;t<r.length;t+=1)r[t].c();A(e,"class","space-y-2 insight-scrollable svelte-qemdpo")},m(t,n){y(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(320&i[0]){let o;for(n=it(t[6].slice(0,10)),o=0;o<n.length;o+=1){const s=ph(t,n,o);r[o]?r[o].p(s,i):(r[o]=Oh(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&b(e),x(r,t)}}}function Bh(t){let e,n;return e=new Zd({props:{title:"Ephemeral Sources",icon:"",variant:"danger",subtitle:"Domains with high dead link rates",$$slots:{default:[$h]},$$scope:{ctx:t}}}),{c(){at(e.$$.fragment)},m(t,r){lt(e,t,r),n=!0},p(t,n){const r={};16&n[0]|16384&n[1]&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function jh(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g=t[29].domain+"",x=t[29].deadRate+"",w=t[29].dead+"",C=t[29].checked+"";return{c(){e=v("div"),n=v("span"),r=k(g),i=_(),o=v("div"),s=v("span"),a=k(x),l=k("% dead"),c=_(),u=v("span"),d=k(w),h=k(" of "),f=k(C),p=_(),A(n,"class","text-sm font-medium text-gray-900"),A(s,"class","text-red-600"),A(u,"class","text-gray-500"),A(o,"class","flex items-center gap-4 text-sm"),A(e,"class","flex items-center justify-between p-2 bg-red-50 rounded-lg")},m(t,g){y(t,e,g),m(e,n),m(n,r),m(e,i),m(e,o),m(o,s),m(s,a),m(s,l),m(o,c),m(o,u),m(u,d),m(u,h),m(u,f),m(e,p)},p(t,e){16&e[0]&&g!==(g=t[29].domain+"")&&T(r,g),16&e[0]&&x!==(x=t[29].deadRate+"")&&T(a,x),16&e[0]&&w!==(w=t[29].dead+"")&&T(d,w),16&e[0]&&C!==(C=t[29].checked+"")&&T(f,C)},d(t){t&&b(e)}}}function $h(t){let e,n=it(t[4].ephemeralSources),r=[];for(let e=0;e<n.length;e+=1)r[e]=jh(fh(t,n,e));return{c(){e=v("div");for(let t=0;t<r.length;t+=1)r[t].c();A(e,"class","space-y-2")},m(t,n){y(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(16&i[0]){let o;for(n=it(t[4].ephemeralSources),o=0;o<n.length;o+=1){const s=fh(t,n,o);r[o]?r[o].p(s,i):(r[o]=jh(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&b(e),x(r,t)}}}function Ih(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,M,S,D,P,E=t[3].stats.totalStale+"",L=t[3].stats.deadLinksCount+"",O=t[3].stats.totalLowValueDomains+"";return D=new Zd({props:{title:"Rediscovery Feed",icon:"",subtitle:"Random old bookmarks you might have forgotten",$$slots:{"header-actions":[Hh],default:[Wh]},$$scope:{ctx:t}}}),{c(){e=v("div"),n=v("div"),r=v("div"),i=v("div"),o=k(E),s=_(),a=v("div"),a.textContent="Stale bookmarks",l=_(),c=v("div"),u=v("div"),d=k(L),h=_(),f=v("div"),f.textContent="Dead links (check Health tab)",p=_(),g=v("div"),x=v("div"),w=k(O),C=_(),M=v("div"),M.textContent="Low-value domains",S=_(),at(D.$$.fragment),A(i,"class","text-2xl font-bold text-yellow-700"),A(a,"class","text-sm text-yellow-600"),A(r,"class","bg-yellow-50 border border-yellow-200 rounded-lg p-4"),A(u,"class","text-2xl font-bold text-gray-700"),A(f,"class","text-sm text-gray-600"),A(c,"class","bg-gray-50 border border-gray-200 rounded-lg p-4"),A(x,"class","text-2xl font-bold text-orange-700"),A(M,"class","text-sm text-orange-600"),A(g,"class","bg-orange-50 border border-orange-200 rounded-lg p-4"),A(n,"class","grid grid-cols-2 md:grid-cols-3 gap-4"),A(e,"class","space-y-6")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(i,o),m(r,s),m(r,a),m(n,l),m(n,c),m(c,u),m(u,d),m(c,h),m(c,f),m(n,p),m(n,g),m(g,x),m(x,w),m(g,C),m(g,M),m(e,S),lt(D,e,null),P=!0},p(t,e){(!P||8&e[0])&&E!==(E=t[3].stats.totalStale+"")&&T(o,E),(!P||8&e[0])&&L!==(L=t[3].stats.deadLinksCount+"")&&T(d,L),(!P||8&e[0])&&O!==(O=t[3].stats.totalLowValueDomains+"")&&T(w,O);const n={};136&e[0]|16384&e[1]&&(n.$$scope={dirty:e,ctx:t}),D.$set(n)},i(t){P||(nt(D.$$.fragment,t),P=!0)},o(t){rt(D.$$.fragment,t),P=!1},d(t){t&&b(e),ct(D)}}}function zh(t){let e,n,r=t[26].description+"";return{c(){e=v("p"),n=k(r),A(e,"class","text-xs text-gray-600 mt-1 line-clamp-2 svelte-qemdpo")},m(t,r){y(t,e,r),m(e,n)},p(t,e){8&e[0]&&r!==(r=t[26].description+"")&&T(n,r)},d(t){t&&b(e)}}}function Fh(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x=t[26].title+"",w=t[26].domain+"",C=qh(t[26].ageInDays)+"",S=t[26].description&&zh(t);function D(){return t[16](t[26])}return{c(){e=v("div"),n=v("div"),r=v("a"),i=k(x),s=_(),a=v("div"),l=k(w),c=k("  "),u=k(C),d=_(),S&&S.c(),h=_(),f=v("button"),f.textContent="",A(r,"href",o=t[26].url),A(r,"target","_blank"),A(r,"rel","noopener noreferrer"),A(r,"class","text-sm font-medium text-gray-900 hover:text-blue-600 line-clamp-1 svelte-qemdpo"),A(a,"class","text-xs text-gray-500 mt-1"),A(n,"class","flex-1 min-w-0"),A(f,"class","p-2 text-gray-400 hover:text-blue-600 hover:bg-white rounded-lg transition-colors"),A(f,"title","Open in new tab"),A(e,"class","flex items-start gap-2 p-2 bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-100")},m(t,o){y(t,e,o),m(e,n),m(n,r),m(r,i),m(n,s),m(n,a),m(a,l),m(a,c),m(a,u),m(n,d),S&&S.m(n,null),m(e,h),m(e,f),p||(g=M(f,"click",D),p=!0)},p(e,s){t=e,8&s[0]&&x!==(x=t[26].title+"")&&T(i,x),8&s[0]&&o!==(o=t[26].url)&&A(r,"href",o),8&s[0]&&w!==(w=t[26].domain+"")&&T(l,w),8&s[0]&&C!==(C=qh(t[26].ageInDays)+"")&&T(u,C),t[26].description?S?S.p(t,s):(S=zh(t),S.c(),S.m(n,null)):S&&(S.d(1),S=null)},d(t){t&&b(e),S&&S.d(),p=!1,g()}}}function Nh(t){let e;return{c(){e=v("p"),e.textContent="No old bookmarks to rediscover",A(e,"class","text-gray-500 text-sm")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Wh(t){let e,n,r=it(t[3].rediscoveryFeed),i=[];for(let e=0;e<r.length;e+=1)i[e]=Fh(hh(t,r,e));let o=0===t[3].rediscoveryFeed.length&&Nh();return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();n=_(),o&&o.c(),A(e,"class","space-y-2")},m(t,r){y(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);m(e,n),o&&o.m(e,null)},p(t,s){if(8&s[0]){let o;for(r=it(t[3].rediscoveryFeed),o=0;o<r.length;o+=1){const a=hh(t,r,o);i[o]?i[o].p(a,s):(i[o]=Fh(a),i[o].c(),i[o].m(e,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}0===t[3].rediscoveryFeed.length?o||(o=Nh(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(t){t&&b(e),x(i,t),o&&o.d()}}}function Hh(t){let e,n,r,i,o,s,a,l;return{c(){e=v("div"),n=v("button"),r=v("span"),i=k(""),s=k("\n              Shuffle"),A(r,"class",o="transform "+(t[7]?"animate-spin":"")),A(n,"class","px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center gap-1"),n.disabled=t[7],A(e,"slot","header-actions")},m(o,c){y(o,e,c),m(e,n),m(n,r),m(r,i),m(n,s),a||(l=M(n,"click",t[12]),a=!0)},p(t,e){128&e[0]&&o!==(o="transform "+(t[7]?"animate-spin":""))&&A(r,"class",o),128&e[0]&&(n.disabled=t[7])},d(t){t&&b(e),a=!1,l()}}}function Vh(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g=it(t[9]),w=[];for(let e=0;e<g.length;e+=1)w[e]=bh(yh(t,g,e));const C=[vh,xh],S=[];function D(t,e){return t[0]?0:1}return u=D(t),d=S[u]=C[u](t),{c(){e=v("div"),n=v("div");for(let t=0;t<w.length;t+=1)w[t].c();r=_(),i=v("button"),o=v("span"),s=k(""),l=k("\n      Refresh"),c=_(),d.c(),A(o,"class",a="transform "+(t[0]?"animate-spin":"")),A(i,"class","ml-auto px-3 py-2 text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1"),i.disabled=t[0],A(n,"class","flex flex-wrap gap-2 border-b border-gray-200 pb-2"),A(e,"class","space-y-6")},m(a,d){y(a,e,d),m(e,n);for(let t=0;t<w.length;t+=1)w[t]&&w[t].m(n,null);m(n,r),m(n,i),m(i,o),m(o,s),m(i,l),m(e,c),S[u].m(e,null),h=!0,f||(p=M(i,"click",t[10]),f=!0)},p(t,s){if(2562&s[0]){let e;for(g=it(t[9]),e=0;e<g.length;e+=1){const i=yh(t,g,e);w[e]?w[e].p(i,s):(w[e]=bh(i),w[e].c(),w[e].m(n,r))}for(;e<w.length;e+=1)w[e].d(1);w.length=g.length}(!h||1&s[0]&&a!==(a="transform "+(t[0]?"animate-spin":"")))&&A(o,"class",a),(!h||1&s[0])&&(i.disabled=t[0]);let l=u;u=D(t),u===l?S[u].p(t,s):(tt(),rt(S[l],1,1,()=>{S[l]=null}),et(),d=S[u],d?d.p(t,s):(d=S[u]=C[u](t),d.c()),nt(d,1),d.m(e,null))},i(t){h||(nt(d),h=!0)},o(t){rt(d),h=!1},d(t){t&&b(e),x(w,t),S[u].d(),f=!1,p()}}}function qh(t){return t<1?"Today":1===t?"1 day ago":t<7?`${t} days ago`:t<30?`${Math.floor(t/7)} weeks ago`:t<365?`${Math.floor(t/30)} months ago`:`${Math.floor(t/365)} years ago`}function Uh(t,e,n){No.register(...Fa);const r=z();let i=!0,o="content",s=null,a=null,l=null,c=null,u=null,d=null,h=null,f=null,p=null,g=null,m=!1;async function y(){n(0,i=!0);try{const[t,e,r,i,o,h]=await Promise.all([sh(),ah(),lh(),ch(),uh(),dh(15)]);n(2,s=t),n(3,a=e),n(4,l=r),c=i,n(5,u=o),n(6,d=h),setTimeout(()=>{b()},100)}catch(t){console.error("Error loading insights:",t)}finally{n(0,i=!1)}}function b(){!function(){const t=document.getElementById("categoryDonutChart");if(!t||!s?.categoryBreakdown)return;h&&h.destroy();const e=s.categoryBreakdown.slice(0,8),n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#6B7280"];h=new No(t,{type:"doughnut",data:{labels:e.map(t=>t.category),datasets:[{data:e.map(t=>t.count),backgroundColor:n,borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:8,font:{size:11}}},tooltip:{callbacks:{label:t=>`${t.label}: ${t.raw} (${e[t.dataIndex].percentage}%)`}}},onClick:(t,n)=>{if(n.length>0){const t=e[n[0].index].category;r("filterByCategory",{category:t})}}}})}(),function(){const t=document.getElementById("contentTypeChart");if(!t||!s?.contentTypeMix)return;f&&f.destroy();const e=s.contentTypeMix,n=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#6B7280"];f=new No(t,{type:"bar",data:{labels:e.map(t=>t.type.charAt(0).toUpperCase()+t.type.slice(1)),datasets:[{label:"Bookmarks",data:e.map(t=>t.count),backgroundColor:n.slice(0,e.length),borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,grid:{display:!1}},y:{grid:{display:!1}}}}})}(),function(){const t=document.getElementById("platformDonutChart");if(!t||!u?.platforms)return;p&&p.destroy();const e=u.platforms.slice(0,8),n={youtube:"#FF0000",github:"#24292F",medium:"#00AB6C",devto:"#0A0A0A",substack:"#FF6719",twitter:"#1DA1F2",reddit:"#FF4500",stackoverflow:"#F48024",npm:"#CB3837",other:"#6B7280"};p=new No(t,{type:"doughnut",data:{labels:e.map(t=>ol(t.platform)),datasets:[{data:e.map(t=>t.count),backgroundColor:e.map(t=>n[t.platform]||n.other),borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:8,font:{size:11}}},tooltip:{callbacks:{label:t=>`${t.label}: ${t.raw} (${e[t.dataIndex].percentage}%)`}}},onClick:(t,n)=>{if(n.length>0){const t=e[n[0].index].platform;r("filterByPlatform",{platform:t})}}}})}(),function(){const t=document.getElementById("dateAddedChart");if(!t||!c?.monthlyCreationTrend)return;g&&g.destroy();const e=c.monthlyCreationTrend;g=new No(t,{type:"line",data:{labels:e.map(t=>t.monthLabel),datasets:[{label:"Bookmarks Added",data:e.map(t=>t.count),fill:!0,borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.3,pointRadius:3,pointHoverRadius:5}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>`${t.raw} bookmarks added`}}},scales:{x:{grid:{display:!1},ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,grid:{color:"#f3f4f6"}}}}})}()}I(async()=>{await y()});return[i,o,s,a,l,u,d,m,r,[{id:"content",label:"Content & Overview",icon:""},{id:"actions",label:"Actions",icon:""}],y,b,async function(){n(7,m=!0);try{const t=await ah();n(3,a={...a,rediscoveryFeed:t.rediscoveryFeed})}finally{n(7,m=!1)}},t=>{n(1,o=t.id),setTimeout(b,100)},t=>r("searchQuery",{query:t.keyword}),t=>r("filterByCreator",{creator:t.creator}),t=>{return e=t.url,void window.open(e,"_blank");var e}]}class Kh extends ht{constructor(t){super(),dt(this,t,Uh,Vh,o,{},null,[-1,-1])}}
/**!
 * FlexSearch.js v0.8.212 (Bundle/Module)
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/flexsearch
 */var Yh;function Qh(t,e,n){const r=typeof n,i=typeof t;if("undefined"!==r){if("undefined"!==i){if(n){if("function"===i&&r===i)return function(e){return t(n(e))};if((e=t.constructor)===n.constructor){if(e===Array)return n.concat(t);if(e===Map){var o=new Map(n);for(var s of t)o.set(s[0],s[1]);return o}if(e===Set){for(o of(s=new Set(n),t.values()))s.add(o);return s}}}return t}return n}return"undefined"===i?e:t}function Jh(t,e){return void 0===t?e:t}function Xh(){return Object.create(null)}function Gh(t){return"string"==typeof t}function Zh(t){return"object"==typeof t}function tf(t,e){if(Gh(e))t=t[e];else for(let n=0;t&&n<e.length;n++)t=t[e[n]];return t}const ef=/[^\p{L}\p{N}]+/u,nf=/(\d{3})/g,rf=/(\D)(\d{3})/g,of=/(\d{3})(\D)/g,sf=/[\u0300-\u036f]/g;function af(t={}){if(!this||this.constructor!==af)return new af(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}function lf(t){t.F=null,t.B.clear(),t.D.clear()}function cf(t,e,n){n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):n=t),n&&(t=n.query||t,e=n.limit||e);let r=""+(e||0);n&&(r+=(n.offset||0)+!!n.context+!!n.suggest+(!1!==n.resolve)+(n.resolution||this.resolution)+(n.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new uf);let i=this.cache.get(t+r);if(!i){const o=n&&n.cache;o&&(n.cache=!1),i=this.search(t,e,n),o&&(n.cache=o),this.cache.set(t+r,i)}return i}function uf(t){this.limit=t&&!0!==t?t:1e3,this.cache=new Map,this.h=""}(Yh=af.prototype).assign=function(t){this.normalize=Qh(t.normalize,!0,this.normalize);let e,n=t.include,r=n||t.exclude||t.split;if(r||""===r){if("object"==typeof r&&r.constructor!==RegExp){let t="";e=!n,n||(t+="\\p{Z}"),r.letter&&(t+="\\p{L}"),r.number&&(t+="\\p{N}",e=!!n),r.symbol&&(t+="\\p{S}"),r.punctuation&&(t+="\\p{P}"),r.control&&(t+="\\p{C}"),(r=r.char)&&(t+="object"==typeof r?r.join(""):r);try{this.split=new RegExp("["+(n?"^":"")+t+"]+","u")}catch(t){this.split=/\s+/}}else this.split=r,e=!1===r||"a1a".split(r).length<2;this.numeric=Qh(t.numeric,e)}else{try{this.split=Qh(this.split,ef)}catch(t){this.split=/\s+/}this.numeric=Qh(t.numeric,Qh(this.numeric,!0))}if(this.prepare=Qh(t.prepare,null,this.prepare),this.finalize=Qh(t.finalize,null,this.finalize),r=t.filter,this.filter="function"==typeof r?r:Qh(r&&new Set(r),null,this.filter),this.dedupe=Qh(t.dedupe,!0,this.dedupe),this.matcher=Qh((r=t.matcher)&&new Map(r),null,this.matcher),this.mapper=Qh((r=t.mapper)&&new Map(r),null,this.mapper),this.stemmer=Qh((r=t.stemmer)&&new Map(r),null,this.stemmer),this.replacer=Qh(t.replacer,null,this.replacer),this.minlength=Qh(t.minlength,1,this.minlength),this.maxlength=Qh(t.maxlength,1024,this.maxlength),this.rtl=Qh(t.rtl,!1,this.rtl),(this.cache=r=Qh(t.cache,!0,this.cache))&&(this.F=null,this.L="number"==typeof r?r:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const t of this.matcher.keys())this.h+=(this.h?"|":"")+t;if(this.stemmer)for(const t of this.stemmer.keys())this.A+=(this.A?"|":"")+t;return this},Yh.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&lf(this),this},Yh.addFilter=function(t){return"function"==typeof t?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&lf(this),this},Yh.addMapper=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length>1?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&lf(this),this)},Yh.addMatcher=function(t,e){return"object"==typeof t?this.addReplacer(t,e):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&lf(this),this)},Yh.addReplacer=function(t,e){return"string"==typeof t?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&lf(this),this)},Yh.encode=function(t,e){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(lf,50,this);this.normalize&&(t="function"==typeof this.normalize?this.normalize(t):sf?t.normalize("NFKD").replace(sf,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(rf,"$1 $2").replace(of,"$1 $2").replace(nf,"$1 "));const n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let r,i,o=[],s=Xh(),a=this.split||""===this.split?t.split(this.split):[t];for(let t,c,u=0;u<a.length;u++)if((t=c=a[u])&&!(t.length<this.minlength||t.length>this.maxlength)){if(e){if(s[t])continue;s[t]=1}else{if(r===t)continue;r=t}if(n)o.push(t);else if(!this.filter||("function"==typeof this.filter?this.filter(t):!this.filter.has(t))){if(this.cache&&t.length<=this.I)if(this.F){var l=this.D.get(t);if(l||""===l){l&&o.push(l);continue}}else this.F=setTimeout(lf,50,this);if(this.stemmer){let e;for(this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));e!==t&&t.length>2;)e=t,t=t.replace(this.K,t=>this.stemmer.get(t))}if(t&&(this.mapper||this.dedupe&&t.length>1)){l="";for(let e,n,r=0,i="";r<t.length;r++)e=t.charAt(r),e===i&&this.dedupe||((n=this.mapper&&this.mapper.get(e))||""===n?n===i&&this.dedupe||!(i=n)||(l+=n):l+=i=e);t=l}if(this.matcher&&t.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),t=t.replace(this.J,t=>this.matcher.get(t))),t&&this.replacer)for(l=0;t&&l<this.replacer.length;l+=2)t=t.replace(this.replacer[l],this.replacer[l+1]);if(this.cache&&c.length<=this.I&&(this.D.set(c,t),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),t){if(t!==c)if(e){if(s[t])continue;s[t]=1}else{if(i===t)continue;i=t}o.push(t)}}}return this.finalize&&(o=this.finalize(o)||o),this.cache&&t.length<=this.H&&(this.B.set(t,o),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),o},uf.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},uf.prototype.get=function(t){const e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e},uf.prototype.remove=function(t){for(const e of this.cache){const n=e[0];e[1].includes(t)&&this.cache.delete(n)}},uf.prototype.clear=function(){this.cache.clear(),this.h=""};const df={normalize:!1,numeric:!1,dedupe:!1},hf={},ff=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),pf=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),gf=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],mf={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,"":2,d:3,t:3,l:4,m:5,n:5,r:6};var yf={Exact:df,Default:hf,Normalize:hf,LatinBalance:{mapper:ff},LatinAdvanced:{mapper:ff,matcher:pf,replacer:gf},LatinExtra:{mapper:ff,replacer:gf.concat([/(?!^)[aeo]/g,""]),matcher:pf},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let n=0;n<t.length;n++){var e=t[n];let r=e.charAt(0),i=mf[r];for(let t,n=1;n<e.length&&(t=e.charAt(n),"h"===t||"w"===t||!(t=mf[t])||t===i||(r+=t,i=t,4!==r.length));n++);t[n]=r}}},CJK:{split:""},LatinExact:df,LatinDefault:hf,LatinSimple:hf};function bf(t,e,n,r){let i=[];for(let o,s=0;s<t.index.length;s++)if(o=t.index[s],e>=o.length)e-=o.length;else{const s=(e=o[r?"splice":"slice"](e,n)).length;if(s&&(i=i.length?i.concat(e):e,n-=s,r&&(t.length-=s),!n))break;e=0}return i}function xf(t){if(!this||this.constructor!==xf)return new xf(t);this.index=t?[t]:[],this.length=t?t.length:0;const e=this;return new Proxy([],{get:(t,n)=>"length"===n?e.length:"push"===n?function(t){e.index[e.index.length-1].push(t),e.length++}:"pop"===n?function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()}:"indexOf"===n?function(t){let n=0;for(let r,i,o=0;o<e.index.length;o++){if(r=e.index[o],i=r.indexOf(t),i>=0)return n+i;n+=r.length}return-1}:"includes"===n?function(t){for(let n=0;n<e.index.length;n++)if(e.index[n].includes(t))return!0;return!1}:"slice"===n?function(t,n){return bf(e,t||0,n||e.length,!1)}:"splice"===n?function(t,n){return bf(e,t||0,n||e.length,!0)}:"constructor"===n?Array:"symbol"!=typeof n?(t=e.index[n/2**31|0])&&t[n]:void 0,set:(t,n,r)=>(t=n/2**31|0,(e.index[t]||(e.index[t]=[]))[n]=r,e.length++,!0)})}function vf(t=8){if(!this||this.constructor!==vf)return new vf(t);this.index=Xh(),this.h=[],this.size=0,t>32?(this.B=_f,this.A=BigInt(t)):(this.B=kf,this.A=t)}function wf(t=8){if(!this||this.constructor!==wf)return new wf(t);this.index=Xh(),this.h=[],this.size=0,t>32?(this.B=_f,this.A=BigInt(t)):(this.B=kf,this.A=t)}function kf(t){let e=2**this.A-1;if("number"==typeof t)return t&e;let n=0,r=this.A+1;for(let i=0;i<t.length;i++)n=(n*r^t.charCodeAt(i))&e;return 32===this.A?n+2**31:n}function _f(t){let e=BigInt(2)**this.A-BigInt(1);var n=typeof t;if("bigint"===n)return t&e;if("number"===n)return BigInt(t)&e;n=BigInt(0);let r=this.A+BigInt(1);for(let i=0;i<t.length;i++)n=(n*r^BigInt(t.charCodeAt(i)))&e;return n}let Cf,Mf,Sf,Af,Df;async function Tf(t){var e=(t=t.data).task;const n=t.id;let r=t.args;if("init"===e)Mf=t.options||{},(e=t.factory)?(Function("return "+e)()(self),Cf=new self.FlexSearch.Index(Mf),delete self.FlexSearch):Cf=new xp(Mf),postMessage({id:n});else{let i;"export"===e&&(r[1]?(r[0]=Mf.export,r[2]=0,r[3]=1):r=null),"import"===e?r[0]&&(t=await Mf.import.call(Cf,r[0]),Cf.import(r[0],t)):((i=r&&Cf[e].apply(Cf,r))&&i.then&&(i=await i),i&&i.await&&(i=await i.await),"search"===e&&i.result&&(i=i.result)),postMessage("search"===e?{id:n,msg:i}:{id:n})}}function Pf(t){Lf.call(t,"add"),Lf.call(t,"append"),Lf.call(t,"search"),Lf.call(t,"update"),Lf.call(t,"remove"),Lf.call(t,"searchCache")}function Ef(){Sf=Df=0}function Lf(t){this[t+"Async"]=function(){const e=arguments;var n=e[e.length-1];let r;if("function"==typeof n&&(r=n,delete e[e.length-1]),Sf?Df||(Df=Date.now()-Af>=this.priority*this.priority*3):(Sf=setTimeout(Ef,0),Af=Date.now()),Df){const n=this;return new Promise(r=>{setTimeout(function(){r(n[t+"Async"].apply(n,e))},0)})}const i=this[t].apply(this,e);return n=i.then?i:new Promise(t=>t(i)),r&&n.then(r),n}}xf.prototype.clear=function(){this.index.length=0},xf.prototype.push=function(){},vf.prototype.get=function(t){const e=this.index[this.B(t)];return e&&e.get(t)},vf.prototype.set=function(t,e){var n=this.B(t);let r=this.index[n];r?(n=r.size,r.set(t,e),(n-=r.size)&&this.size++):(this.index[n]=r=new Map([[t,e]]),this.h.push(r),this.size++)},wf.prototype.add=function(t){var e=this.B(t);let n=this.index[e];n?(e=n.size,n.add(t),(e-=n.size)&&this.size++):(this.index[e]=n=new Set([t]),this.h.push(n),this.size++)},(Yh=vf.prototype).has=wf.prototype.has=function(t){const e=this.index[this.B(t)];return e&&e.has(t)},Yh.delete=wf.prototype.delete=function(t){const e=this.index[this.B(t)];e&&e.delete(t)&&this.size--},Yh.clear=wf.prototype.clear=function(){this.index=Xh(),this.h=[],this.size=0},Yh.values=wf.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e},Yh.keys=wf.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e},Yh.entries=wf.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};let Of=0;function Rf(t={},e){function n(n){function s(t){const e=(t=t.data||t).id,n=e&&o.h[e];n&&(n(t.msg),delete o.h[e])}if(this.worker=n,this.h=Xh(),this.worker)return i?this.worker.on("message",s):this.worker.onmessage=s,t.config?new Promise(function(e){Of>1e9&&(Of=0),o.h[++Of]=function(){e(o)},o.worker.postMessage({id:Of,task:"init",factory:r,options:t})}):(this.priority=t.priority||4,this.encoder=e||null,this.worker.postMessage({task:"init",factory:r,options:t}),this)}if(!this||this.constructor!==Rf)return new Rf(t);let r="undefined"!=typeof self?self._factory:"undefined"!=typeof window?window._factory:null;r&&(r=r.toString());const i="undefined"==typeof window,o=this,s=function(t,e,n){return e?"undefined"!=typeof module?new(require("worker_threads").Worker)(__dirname+"/worker/node.js"):Promise.resolve().then(function(){return lb}).then(function(t){return new t.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Tf.toString()],{type:"text/javascript"}))):new window.Worker("string"==typeof n?n:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}(r,i,t.worker);return s.then?s.then(function(t){return n.call(o,t)}):n.call(this,s)}function Bf(t){Rf.prototype[t]=function(){const e=this,n=[].slice.call(arguments);var r=n[n.length-1];let i;return"function"==typeof r&&(i=r,n.pop()),r=new Promise(function(r){"export"===t&&"function"==typeof n[0]&&(n[0]=null),Of>1e9&&(Of=0),e.h[++Of]=r,e.worker.postMessage({task:t,id:Of,args:n})}),i?(r.then(i),this):r}}function jf(t,e,n,r,i,o){if(t=t[i],r===n.length-1)e[i]=o||t;else if(t)if(t.constructor===Array)for(e=e[i]=Array(t.length),i=0;i<t.length;i++)jf(t,e,n,r,i);else e=e[i]||(e[i]=Xh()),i=n[++r],jf(t,e,n,r,i)}function $f(t,e,n,r,i,o,s,a){if(t=t[s])if(r===e.length-1){if(t.constructor===Array){if(n[r]){for(e=0;e<t.length;e++)i.add(o,t[e],!0,!0);return}t=t.join(" ")}i.add(o,t,a,!0)}else if(t.constructor===Array)for(s=0;s<t.length;s++)$f(t,e,n,r,i,o,s,a);else s=e[++r],$f(t,e,n,r,i,o,s,a)}function If(t,e,n,r){if(!t.length)return t;if(1===t.length)return t=t[0],t=n||t.length>e?t.slice(n,n+e):t,r?Zf.call(this,t):t;let i=[];for(let o,s,a=0;a<t.length;a++)if((o=t[a])&&(s=o.length)){if(n){if(n>=s){n-=s;continue}o=o.slice(n,n+e),s=o.length,n=0}if(s>e&&(o=o.slice(0,e),s=e),!i.length&&s>=e)return r?Zf.call(this,o):o;if(i.push(o),!(e-=s))break}return i=i.length>1?[].concat.apply([],i):i[0],r?Zf.call(this,i):i}function zf(t,e,n,r){var i=r[0];if(i[0]&&i[0].query)return t[e].apply(t,i);if(!("and"!==e&&"not"!==e||t.result.length||t.await||i.suggest))return r.length>1&&(i=r[r.length-1]),(r=i.resolve)?t.await||t.result:t;let o,s,a,l,c,u=[],d=0,h=0;for(e=0;e<r.length;e++)if(i=r[e]){var f=void 0;if(i.constructor===Uf)f=i.await||i.result;else if(i.then||i.constructor===Array)f=i;else{d=i.limit||0,h=i.offset||0,a=i.suggest,s=i.resolve,o=((l=i.highlight||t.highlight)||i.enrich)&&s,f=i.queue;let n=i.async||f,r=i.index,p=i.query;if(r?t.index||(t.index=r):r=t.index,p||i.tag){const o=i.field||i.pluck;if(o&&(!p||t.query&&!l||(t.query=p,t.field=o,t.highlight=l),r=r.index.get(o)),f&&(c||t.await)){let o;c=1;const s=t.C.length,a=new Promise(function(t){o=t});(function(e,r){a.h=function(){r.index=null,r.resolve=!1;let i=n?e.searchAsync(r):e.search(r);return i.then?i.then(function(e){return t.C[s]=e=e.result||e,o(e),e}):(i=i.result||i,o(i),i)}})(r,Object.assign({},i)),t.C.push(a),u[e]=a;continue}i.resolve=!1,i.index=null,f=n?r.searchAsync(i):r.search(i),i.resolve=s,i.index=r}else if(i.and)f=Ff(i,"and",r);else if(i.or)f=Ff(i,"or",r);else if(i.not)f=Ff(i,"not",r);else{if(!i.xor)continue;f=Ff(i,"xor",r)}}f.await?(c=1,f=f.await):f.then?(c=1,f=f.then(function(t){return t.result||t})):f=f.result||f,u[e]=f}if(c&&!t.await&&(t.await=new Promise(function(e){t.return=e})),c){const e=Promise.all(u).then(function(r){for(let i=0;i<t.C.length;i++)if(t.C[i]===e){t.C[i]=function(){return n.call(t,r,d,h,o,s,a,l)};break}Kf(t)});t.C.push(e)}else{if(!t.await)return n.call(t,u,d,h,o,s,a,l);t.C.push(function(){return n.call(t,u,d,h,o,s,a,l)})}return s?t.await||t.result:t}function Ff(t,e,n){const r=(t=t[e])[0]||t;return r.index||(r.index=n),n=new Uf(r),t.length>1&&(n=n[e].apply(n,t.slice(1))),n}function Nf(t,e,n,r,i,o,s){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=Qf(t,e,n,!1,this.h),n=0)),i&&(this.await=null),i?this.resolve(e,n,r,s):this}function Wf(t,e,n,r,i,o,s){if(!o&&!this.result.length)return i?this.result:this;let a;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let r=0;for(let e,n,i=0;i<t.length;i++)if((e=t[i])&&(n=e.length))r<n&&(r=n);else if(!o){r=0;break}r?(this.result=Yf(t,r,e,n,o,this.h,i),a=!0):this.result=[]}else o||(this.result=t);return i&&(this.await=null),i?this.resolve(e,n,r,s,a):this}function Hf(t,e,n,r,i,o,s){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{o=n;var a=this.h;const r=[],s=Xh();let l=0;for(let e,n=0;n<t.length;n++)if(e=t[n]){l<e.length&&(l=e.length);for(let t,n=0;n<e.length;n++)if(t=e[n])for(let e,n=0;n<t.length;n++)e=t[n],s[e]=s[e]?2:1}for(let n,c=0,u=0;c<l;c++)for(let l,d=0;d<t.length;d++)if((l=t[d])&&(n=l[c]))for(let l,h=0;h<n.length;h++)if(l=n[h],1===s[l])if(o)o--;else if(i){if(r.push(l),r.length===e){t=r;break t}}else{const n=c+(d?a:0);if(r[n]||(r[n]=[]),r[n].push(l),++u===e){t=r;break t}}t=r}this.result=t,a=!0}else o||(this.result=t);return i&&(this.await=null),i?this.resolve(e,n,r,s,a):this}function Vf(t,e,n,r,i,o,s){if(!o&&!this.result.length)return i?this.result:this;if(t.length&&this.result.length){t:{o=n;var a=[];t=new Set(t.flat().flat());for(let n,r=0,s=0;r<this.result.length;r++)if(n=this.result[r])for(let l,c=0;c<n.length;c++)if(l=n[c],!t.has(l))if(o)o--;else if(i){if(a.push(l),a.length===e){t=a;break t}}else if(a[r]||(a[r]=[]),a[r].push(l),++s===e){t=a;break t}t=a}this.result=t,a=!0}return i&&(this.await=null),i?this.resolve(e,n,r,s,a):this}function qf(t,e,n,r,i){let o,s,a;"string"==typeof i?(o=i,i=""):o=i.template,s=o.indexOf("$1"),a=o.substring(s+2),s=o.substring(0,s);let l=i&&i.boundary,c=!i||!1!==i.clip,u=i&&i.merge&&a&&s&&new RegExp(a+" "+s,"g");var d=0;if("object"==typeof(i=i&&i.ellipsis)){var h=i.template;d=h.length-2,i=i.pattern}let f,p;"string"!=typeof i&&(i=!1===i?"":"..."),d&&(i=h.replace("$1",i)),h=i.length-d,"object"==typeof l&&(f=l.before,0===f&&(f=-1),p=l.after,0===p&&(p=-1),l=l.total||9e5),d=new Map;for(let O,R,B,j=0;j<e.length;j++){let $;if(r)$=e,B=r;else{var g=e[j];if(B=g.field,!B)continue;$=g.result}R=n.get(B),O=R.encoder,"string"!=typeof(g=d.get(O))&&(g=O.encode(t),d.set(O,g));for(let t=0;t<$.length;t++){var m=$[t].doc;if(!m)continue;if(!(m=tf(m,B)))continue;var y=m.trim().split(/\s+/);if(!y.length)continue;m="";var b=[];let e=[];for(var x=-1,v=-1,w=0,k=0;k<y.length;k++){var _=y[k],C=O.encode(_);let t;if((C=C.length>1?C.join(" "):C[0])&&_){for(var M=_.length,S=(O.split?_.replace(O.split,""):_).length-C.length,A="",D=0,T=0;T<g.length;T++){var P=g[T];if(P){var E=P.length;E+=S<0?0:S,D&&E<=D||(P=C.indexOf(P))>-1&&(A=(P?_.substring(0,P):"")+s+_.substring(P,P+E)+a+(P+E<M?_.substring(P+E):""),D=E,t=!0)}}A&&(l&&(x<0&&(x=m.length+(m?1:0)),v=m.length+(m?1:0)+A.length,w+=M,e.push(b.length),b.push({match:A})),m+=(m?" ":"")+A)}if(t){if(l&&w>=l)break}else m+=(m?" ":"")+(_=y[k]),l&&b.push({text:_})}if(w=e.length*(o.length-2),f||p||l&&m.length-w>l)if(k=v-x,f>0&&(k+=f),p>0&&(k+=p),k<=(w=l+w-2*h))y=f?x-(f>0?f:0):x-((w-k)/2|0),b=p?v+(p>0?p:0):y+w,c||(y>0&&" "!==m.charAt(y)&&" "!==m.charAt(y-1)&&((y=m.indexOf(" ",y))<0&&(y=0)),b<m.length&&" "!==m.charAt(b-1)&&" "!==m.charAt(b)&&((b=m.lastIndexOf(" ",b))<v?b=v:++b)),m=(y?i:"")+m.substring(y,b)+(b<m.length?i:"");else{for(v=[],x={},w={},k={},_={},C={},A=S=M=0,T=D=1;;){var L=void 0;for(let t,n=0;n<e.length;n++){if(t=e[n],A)if(S!==A){if(k[n+1])continue;if(t+=A,x[t]){M-=h,w[n+1]=1,k[n+1]=1;continue}if(t>=b.length-1){if(t>=b.length){k[n+1]=1,t>=y.length&&(w[n+1]=1);continue}M-=h}if(m=b[t].text,E=p&&C[n]){if(!(E>0)){k[n+1]=1;continue}if(m.length>E){if(k[n+1]=1,!c)continue;m=m.substring(0,E)}(E-=m.length)||(E=-1),C[n]=E}if(M+m.length+1<=l)m=" "+m,v[n]+=m;else{if(!c){k[n+1]=1;continue}(L=l-M-1)>0&&(m=" "+m.substring(0,L),v[n]+=m),k[n+1]=1}}else{if(k[n])continue;if(t-=S,x[t]){M-=h,k[n]=1,w[n]=1;continue}if(t<=0){if(t<0){k[n]=1,w[n]=1;continue}M-=h}if(m=b[t].text,E=f&&_[n]){if(!(E>0)){k[n]=1;continue}if(m.length>E){if(k[n]=1,!c)continue;m=m.substring(m.length-E)}(E-=m.length)||(E=-1),_[n]=E}if(M+m.length+1<=l)m+=" ",v[n]=m+v[n];else{if(!c){k[n]=1;continue}(L=m.length+1-(l-M))>=0&&L<m.length&&(m=m.substring(L)+" ",v[n]=m+v[n]),k[n]=1}}else{let e;if(m=b[t].match,f&&(_[n]=f),p&&(C[n]=p),n&&M++,t?!n&&h&&(M+=h):(w[n]=1,k[n]=1),t>=y.length-1||t<b.length-1&&b[t+1].match?e=1:h&&(M+=h),M-=o.length-2,n&&!(M+m.length<=l)){L=D=T=w[n]=0;break}v[n]=m,e&&(w[n+1]=1,k[n+1]=1)}M+=m.length,L=x[t]=1}if(L)S===A?A++:S++;else{if(S===A?D=0:T=0,!D&&!T)break;D?A=++S:A++}}m="";for(let t,e=0;e<v.length;e++)t=(w[e]?e?" ":"":(e&&!i?" ":"")+i)+v[e],m+=t;i&&!w[v.length]&&(m+=i)}u&&(m=m.replace(u," ")),$[t].highlight=m}if(r)break}return e}function Uf(t,e){if(!this||this.constructor!==Uf)return new Uf(t,e);let n,r,i,o,s,a,l=0;if(t&&t.index){const n=t;if(e=n.index,l=n.boost||0,r=n.query){i=n.field||n.pluck,o=n.highlight;const r=n.resolve;t=n.async||n.queue,n.resolve=!1,n.index=null,t=t?e.searchAsync(n):e.search(n),n.resolve=r,n.index=e,t=t.result||t}else t=[]}if(t&&t.then){const e=this;n=[t=t.then(function(t){e.C[0]=e.result=t.result||t,Kf(e)})],t=[],s=new Promise(function(t){a=t})}this.index=e||null,this.result=t||[],this.h=l,this.C=n||[],this.await=s||null,this.return=a||null,this.highlight=o||null,this.query=r||"",this.field=i||""}function Kf(t,e){let n=t.result;var r=t.await;t.await=null;for(let e,i=0;i<t.C.length;i++)if(e=t.C[i])if("function"==typeof e)n=e(),t.C[i]=n=n.result||n,i--;else if(e.h)n=e.h(),t.C[i]=n=n.result||n,i--;else if(e.then)return t.await=r;return r=t.return,t.C=[],t.return=null,e||r(n),n}function Yf(t,e,n,r,i,o,s){const a=t.length;let l,c,u=[];l=Xh();for(let d,h,f,p,g=0;g<e;g++)for(let e=0;e<a;e++)if(f=t[e],g<f.length&&(d=f[g]))for(let t=0;t<d.length;t++){if(h=d[t],(c=l[h])?l[h]++:(c=0,l[h]=1),p=u[c]||(u[c]=[]),!s){let t=g+(e||!i?0:o||0);p=p[t]||(p[t]=[])}if(p.push(h),s&&n&&c===a-1&&p.length-r===n)return r?p.slice(r):p}if(t=u.length)if(i)u=u.length>1?Qf(u,n,r,s,o):(u=u[0])&&n&&u.length>n||r?u.slice(r,n+r):u;else{if(t<a)return[];if(u=u[t-1],n||r)if(s)(u.length>n||r)&&(u=u.slice(r,n+r));else{i=[];for(let t,e=0;e<u.length;e++)if(t=u[e])if(r&&t.length>r)r-=t.length;else if((n&&t.length>n||r)&&(t=t.slice(r,n+r),n-=t.length,r&&(r-=t.length)),i.push(t),!n)break;u=i}}return u}function Qf(t,e,n,r,i){const o=[],s=Xh();let a;var l=t.length;let c;if(r){for(i=l-1;i>=0;i--)if(c=(r=t[i])&&r.length)for(l=0;l<c;l++)if(a=r[l],!s[a])if(s[a]=1,n)n--;else if(o.push(a),o.length===e)return o}else for(let u,d=l-1,h=0;d>=0;d--){u=t[d];for(let t=0;t<u.length;t++)if(c=(r=u[t])&&r.length)for(let u=0;u<c;u++)if(a=r[u],!s[a])if(s[a]=1,n)n--;else{let n=(t+(d<l-1&&i||0))/(d+1)|0;if((o[n]||(o[n]=[])).push(a),++h===e)return o}}return o}function Jf(t,e,n,r,i){const o=Xh(),s=[];for(let t,n=0;n<e.length;n++){t=e[n];for(let e=0;e<t.length;e++)o[t[e]]=1}if(i){for(let e,i=0;i<t.length;i++)if(e=t[i],o[e])if(r)r--;else if(s.push(e),o[e]=0,n&&0===--n)break}else for(let n,r,i=0;i<t.result.length;i++)for(n=t.result[i],e=0;e<n.length;e++)r=n[e],o[r]&&((s[i]||(s[i]=[])).push(r),o[r]=0);return s}function Xf(t){const e=[],n=Xh(),r=Xh();for(let i,o,s,a,l,c,u,d=0;d<t.length;d++){i=t[d],o=i.field,s=i.result;for(let t=0;t<s.length;t++)l=s[t],"object"!=typeof l?l={id:a=l}:a=l.id,(c=n[a])?c.push(o):(l.field=n[a]=[o],e.push(l)),(u=l.highlight)&&(c=r[a],c||(r[a]=c={},l.highlight=c),c[o]=u)}return e}function Gf(t,e,n,r,i){return(t=this.tag.get(t))&&(t=t.get(e))?((e=t.length-r)>0&&((n&&e>n||r)&&(t=t.slice(r,r+n)),i&&(t=Zf.call(this,t))),t):[]}function Zf(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);const e=Array(t.length);for(let n,r=0;r<t.length;r++)n=t[r],e[r]={id:n,doc:this.store.get(n)};return e}function tp(t){if(!this||this.constructor!==tp)return new tp(t);const e=t.document||t.doc||t;let n,r;if(this.B=[],this.field=[],this.D=[],this.key=(n=e.key||e.id)&&np(n,this.D)||"id",(r=t.keystore||0)&&(this.keystore=r),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?r?new wf(r):new Set:r?new vf(r):new Map,this.h=(n=e.store||null)&&n&&!0!==n&&[],this.store=n?r?new vf(r):new Map:null,this.cache=(n=t.cache||null)&&new uf(n),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=ep.call(this,t,e),this.tag=null,(n=e.tag)&&("string"==typeof n&&(n=[n]),n.length)){this.tag=new Map,this.A=[],this.F=[];for(let t,e,r=0;r<n.length;r++){if(t=n[r],e=t.field||t,!e)throw Error("The tag field from the document descriptor is undefined.");t.custom?this.A[r]=t.custom:(this.A[r]=np(e,this.D),t.filter&&("string"==typeof this.A[r]&&(this.A[r]=new String(this.A[r])),this.A[r].G=t.filter)),this.F[r]=e,this.tag.set(e,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const e of this.index.values())e.then&&t.push(e);if(t.length){const e=this;return Promise.all(t).then(function(t){let n=0;for(const r of e.index.entries()){const i=r[0];let o=r[1];o.then&&(o=t[n],e.index.set(i,o),n++)}return e})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}function ep(t,e){const n=new Map;let r=e.index||e.field||e;Gh(r)&&(r=[r]);for(let e,o,s=0;s<r.length;s++){if(e=r[s],Gh(e)||(o=e,e=e.field),o=Zh(o)?Object.assign({},t,o):t,this.worker){var i=void 0;i=new Rf(o,i=(i=o.encoder)&&i.encode?i:new af("string"==typeof i?yf[i]:i||{})),n.set(e,i)}this.worker||n.set(e,new xp(o,this.reg)),o.custom?this.B[s]=o.custom:(this.B[s]=np(e,this.D),o.filter&&("string"==typeof this.B[s]&&(this.B[s]=new String(this.B[s])),this.B[s].G=o.filter)),this.field[s]=e}if(this.h){Gh(t=e.store)&&(t=[t]);for(let e,n,r=0;r<t.length;r++)e=t[r],n=e.field||e,e.custom?(this.h[r]=e.custom,e.custom.O=n):(this.h[r]=np(n,this.D),e.filter&&("string"==typeof this.h[r]&&(this.h[r]=new String(this.h[r])),this.h[r].G=e.filter))}return n}function np(t,e){const n=t.split(":");let r=0;for(let i=0;i<n.length;i++)"]"===(t=n[i])[t.length-1]&&(t=t.substring(0,t.length-2))&&(e[r]=!0),t&&(n[r++]=t);return r<n.length&&(n.length=r),r>1?n:n[0]}function rp(t,e=0){let n=[],r=[];e&&(e=25e4/e*5e3|0);for(const i of t.entries())r.push(i),r.length===e&&(n.push(r),r=[]);return r.length&&n.push(r),n}function ip(t,e){e||(e=new Map);for(let n,r=0;r<t.length;r++)n=t[r],e.set(n[0],n[1]);return e}function op(t,e=0){let n=[],r=[];e&&(e=25e4/e*1e3|0);for(const i of t.entries())r.push([i[0],rp(i[1])[0]||[]]),r.length===e&&(n.push(r),r=[]);return r.length&&n.push(r),n}function sp(t,e){e||(e=new Map);for(let n,r,i=0;i<t.length;i++)n=t[i],r=e.get(n[0]),e.set(n[0],ip(n[1],r));return e}function ap(t){let e=[],n=[];for(const r of t.keys())n.push(r),25e4===n.length&&(e.push(n),n=[]);return n.length&&e.push(n),e}function lp(t,e){e||(e=new Set);for(let n=0;n<t.length;n++)e.add(t[n]);return e}function cp(t,e,n,r,i,o,s=0){const a=r&&r.constructor===Array;var l=a?r.shift():r;if(!l)return this.export(t,e,i,o+1);if((l=t((e?e+".":"")+(s+1)+"."+n,JSON.stringify(l)))&&l.then){const c=this;return l.then(function(){return cp.call(c,t,e,n,a?r:null,i,o,s+1)})}return cp.call(this,t,e,n,a?r:null,i,o,s+1)}function up(t,e){let n="";for(const r of t.entries()){t=r[0];const i=r[1];let o="";for(let t,n=0;n<i.length;n++){t=i[n]||[""];let r="";for(let n=0;n<t.length;n++)r+=(r?",":"")+("string"===e?'"'+t[n]+'"':t[n]);r="["+r+"]",o+=(o?",":"")+r}o='["'+t+'",['+o+"]]",n+=(n?",":"")+o}return n}function dp(t,e){let n=0;var r=void 0===e;if(t.constructor===Array){for(let i,o,s,a=0;a<t.length;a++)if((i=t[a])&&i.length){if(r)return 1;if(o=i.indexOf(e),o>=0){if(i.length>1)return i.splice(o,1),1;if(delete t[a],n)return 1;s=1}else{if(s)return 1;n++}}}else for(let i of t.entries())r=i[0],dp(i[1],e)?n++:t.delete(r);return n}Bf("add"),Bf("append"),Bf("search"),Bf("update"),Bf("remove"),Bf("clear"),Bf("export"),Bf("import"),Rf.prototype.searchCache=cf,Pf(Rf.prototype),tp.prototype.add=function(t,e,n){if(Zh(t)&&(t=tf(e=t,this.key)),e&&(t||0===t)){if(!n&&this.reg.has(t))return this.update(t,e);for(let o,s=0;s<this.field.length;s++){o=this.B[s];var r=this.index.get(this.field[s]);if("function"==typeof o){var i=o(e);i&&r.add(t,i,n,!0)}else(!(i=o.G)||i(e))&&(o.constructor===String?o=[""+o]:Gh(o)&&(o=[o]),$f(e,o,this.D,0,r,t,o[0],n))}if(this.tag)for(r=0;r<this.A.length;r++){var o=this.A[r];i=this.tag.get(this.F[r]);let a=Xh();if("function"==typeof o){if(!(o=o(e)))continue}else{var s=o.G;if(s&&!s(e))continue;o.constructor===String&&(o=""+o),o=tf(e,o)}if(i&&o){Gh(o)&&(o=[o]);for(let e,r,l=0;l<o.length;l++)if(e=o[l],!a[e]&&(a[e]=1,(s=i.get(e))?r=s:i.set(e,r=[]),!n||!r.includes(t))){if(r.length===2**31-1){if(s=new xf(r),this.fastupdate)for(let t of this.reg.values())t.includes(r)&&(t[t.indexOf(r)]=s);i.set(e,r=s)}r.push(t),this.fastupdate&&((s=this.reg.get(t))?s.push(r):this.reg.set(t,[r]))}}}if(this.store&&(!n||!this.store.has(t))){let r;if(this.h){r=Xh();for(let t,i=0;i<this.h.length;i++){if(t=this.h[i],(n=t.G)&&!n(e))continue;let o;if("function"==typeof t){if(o=t(e),!o)continue;t=[t.O]}else if(Gh(t)||t.constructor===String){r[t]=e[t];continue}jf(e,r,t,0,t[0],o)}}this.store.set(t,r||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this},Uf.prototype.or=function(){return zf(this,"or",Nf,arguments)},Uf.prototype.and=function(){return zf(this,"and",Wf,arguments)},Uf.prototype.xor=function(){return zf(this,"xor",Hf,arguments)},Uf.prototype.not=function(){return zf(this,"not",Vf,arguments)},(Yh=Uf.prototype).limit=function(t){if(this.await){const e=this;this.C.push(function(){return e.limit(t).result})}else if(this.result.length){const e=[];for(let n,r=0;r<this.result.length;r++)if(n=this.result[r]){if(!(n.length<=t)){e[r]=n.slice(0,t);break}if(e[r]=n,!(t-=n.length))break}this.result=e}return this},Yh.offset=function(t){if(this.await){const e=this;this.C.push(function(){return e.offset(t).result})}else if(this.result.length){const e=[];for(let n,r=0;r<this.result.length;r++)(n=this.result[r])&&(n.length<=t?t-=n.length:(e[r]=n.slice(t),t=0));this.result=e}return this},Yh.boost=function(t){if(this.await){const e=this;this.C.push(function(){return e.boost(t).result})}else this.h+=t;return this},Yh.resolve=function(t,e,n,r,i){let o=this.await?Kf(this,!0):this.result;if(o.then){const s=this;return o.then(function(){return s.resolve(t,e,n,r,i)})}return o.length&&("object"==typeof t?(r=t.highlight||this.highlight,n=!!r||t.enrich,e=t.offset,t=t.limit):(r=r||this.highlight,n=!!r||n),o=i?n?Zf.call(this.index,o):o:If.call(this.index,o,t||100,e,n)),this.finalize(o,r)},Yh.finalize=function(t,e){if(t.then){const n=this;return t.then(function(t){return n.finalize(t,e)})}e&&t.length&&this.query&&(t=qf(this.query,t,this.index.index,this.field,e));const n=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",n&&n(t),t},tp.prototype.search=function(t,e,n,r){n||(!e&&Zh(t)?(n=t,t=""):Zh(e)&&(n=e,e=0));let i=[];var o=[];let s,a,l,c,u,d,h,f,p=0,g=!0;if(n){n.constructor===Array&&(n={index:n}),t=n.query||t,s=n.pluck,a=n.merge,c=n.boost,d=s||n.field||(d=n.index)&&(d.index?null:d);var m=this.tag&&n.tag;l=n.suggest,g=!1!==n.resolve,u=n.cache,h=g&&this.store&&n.highlight;var y=!!h||g&&this.store&&n.enrich;e=n.limit||e;var b=n.offset||0;if(e||(e=g?100:0),m&&(!this.db||!r)){m.constructor!==Array&&(m=[m]);var x=[];for(let t,e=0;e<m.length;e++)if(t=m[e],t.field&&t.tag){var v=t.tag;if(v.constructor===Array)for(var w=0;w<v.length;w++)x.push(t.field,v[w]);else x.push(t.field,v)}else{v=Object.keys(t);for(let e,n,r=0;r<v.length;r++)if(e=v[r],n=t[e],n.constructor===Array)for(w=0;w<n.length;w++)x.push(e,n[w]);else x.push(e,n)}if(m=x,!t){if(o=[],x.length)for(m=0;m<x.length;m+=2){if(this.db){if(!(r=this.index.get(x[m])))continue;o.push(r=r.db.tag(x[m+1],e,b,y))}else r=Gf.call(this,x[m],x[m+1],e,b,y);i.push(g?{field:x[m],tag:x[m+1],result:r}:[r])}if(o.length){const t=this;return Promise.all(o).then(function(e){for(let t=0;t<e.length;t++)g?i[t].result=e[t]:i[t]=e[t];return g?i:new Uf(i.length>1?Yf(i,1,0,0,l,c):i[0],t)})}return g?i:new Uf(i.length>1?Yf(i,1,0,0,l,c):i[0],this)}}g||s||!(d=d||this.field)||(Gh(d)?s=d:(d.constructor===Array&&1===d.length&&(d=d[0]),s=d.field||d.index)),d&&d.constructor!==Array&&(d=[d])}d||(d=this.field),x=(this.worker||this.db)&&!r&&[];for(let s,a,c,_=0;_<d.length;_++){if(a=d[_],this.db&&this.tag&&!this.B[_])continue;let C;if(Gh(a)||(C=a,a=C.field,t=C.query||t,e=Jh(C.limit,e),b=Jh(C.offset,b),l=Jh(C.suggest,l),h=g&&this.store&&Jh(C.highlight,h),y=!!h||g&&this.store&&Jh(C.enrich,y),u=Jh(C.cache,u)),r)s=r[_];else{w=(v=C||n||{}).enrich;var k=this.index.get(a);if(m&&(this.db&&(v.tag=m,v.field=d,f=k.db.support_tag_search),!f&&w&&(v.enrich=!1),f||(v.limit=0,v.offset=0)),s=u?k.searchCache(t,m&&!f?0:e,v):k.search(t,m&&!f?0:e,v),m&&!f&&(v.limit=e,v.offset=b),w&&(v.enrich=w),x){x[_]=s;continue}}if(c=(s=s.result||s)&&s.length,m&&c){if(v=[],w=0,this.db&&r){if(!f)for(k=d.length;k<r.length;k++){let t=r[k];if(t&&t.length)w++,v.push(t);else if(!l)return g?i:new Uf(i,this)}}else for(let t,e,n=0;n<m.length;n+=2){if(t=this.tag.get(m[n]),!t){if(l)continue;return g?i:new Uf(i,this)}if(e=(t=t&&t.get(m[n+1]))&&t.length)w++,v.push(t);else if(!l)return g?i:new Uf(i,this)}if(w){if(s=Jf(s,v,e,b,g),c=s.length,!c&&!l)return g?s:new Uf(s,this);w--}}if(c)o[p]=a,i.push(s),p++;else if(1===d.length)return g?i:new Uf(i,this)}if(x){if(this.db&&m&&m.length&&!f)for(y=0;y<m.length;y+=2){if(!(o=this.index.get(m[y]))){if(l)continue;return g?i:new Uf(i,this)}x.push(o.db.tag(m[y+1],e,b,!1))}const r=this;return Promise.all(x).then(function(i){return n&&(n.resolve=g),i.length&&(i=r.search(t,e,n,i)),i})}if(!p)return g?i:new Uf(i,this);if(s&&(!y||!this.store))return i=i[0],g?i:new Uf(i,this);for(x=[],b=0;b<o.length;b++){if(m=i[b],y&&m.length&&void 0===m[0].doc&&(this.db?x.push(m=this.index.get(this.field[0]).db.enrich(m)):m=Zf.call(this,m)),s)return g?h?qf(t,m,this.index,s,h):m:new Uf(m,this);i[b]={field:o[b],result:m}}if(y&&this.db&&x.length){const e=this;return Promise.all(x).then(function(n){for(let t=0;t<n.length;t++)i[t].result=n[t];return h&&(i=qf(t,i,e.index,s,h)),a?Xf(i):i})}return h&&(i=qf(t,i,this.index,s,h)),a?Xf(i):i},(Yh=tp.prototype).mount=function(t){let e=this.field;if(this.tag)for(let t,r=0;r<this.F.length;r++){t=this.F[r];var n=void 0;this.index.set(t,n=new xp({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(t),n.tag=this.tag.get(t)}n=[];const r={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let i,o,s=0;s<e.length;s++){r.field=o=e[s],i=this.index.get(o);const a=new t.constructor(t.id,r);a.id=t.id,n[s]=a.mount(i),i.document=!0,s?i.bypass=!0:i.store=this.store}const i=this;return this.db=Promise.all(n).then(function(){i.db=!0})},Yh.commit=async function(){const t=[];for(const e of this.index.values())t.push(e.commit());await Promise.all(t),this.reg.clear()},Yh.destroy=function(){const t=[];for(const e of this.index.values())t.push(e.destroy());return Promise.all(t)},Yh.append=function(t,e){return this.add(t,e,!0)},Yh.update=function(t,e){return this.remove(t).add(t,e)},Yh.remove=function(t){for(var e of(Zh(t)&&(t=tf(t,this.key)),this.index.values()))e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let r of n){e=r[0];const i=r[1],o=i.indexOf(t);o>-1&&(i.length>1?i.splice(o,1):n.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this},Yh.clear=function(){const t=[];for(const e of this.index.values()){const n=e.clear();n.then&&t.push(n)}if(this.tag)for(const t of this.tag.values())t.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this},Yh.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)},Yh.cleanup=function(){for(const t of this.index.values())t.cleanup();return this},Yh.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(t){return t[0]&&t[0].doc||null}):this.store.get(t)||null},Yh.set=function(t,e){return"object"==typeof t&&(t=tf(e=t,this.key)),this.store.set(t,e),this},Yh.searchCache=cf,Yh.export=function(t,e,n=0,r=0){if(n<this.field.length){const i=this.field[n];if((e=this.index.get(i).export(t,i,n,r=1))&&e.then){const r=this;return e.then(function(){return r.export(t,i,n+1)})}return this.export(t,i,n+1)}let i,o;switch(r){case 0:i="reg",o=ap(this.reg),e=null;break;case 1:i="tag",o=this.tag&&op(this.tag,this.reg.size),e=null;break;case 2:i="doc",o=this.store&&rp(this.store),e=null;break;default:return}return cp.call(this,t,e,i,o||null,n,r)},Yh.import=function(t,e){var n=t.split(".");"json"===n[n.length-1]&&n.pop();const r=n.length>2?n[0]:"";if(n=n.length>2?n[2]:n[1],this.worker&&r)return this.index.get(r).import(t);if(e){if("string"==typeof e&&(e=JSON.parse(e)),r)return this.index.get(r).import(n,e);switch(n){case"reg":this.fastupdate=!1,this.reg=lp(e,this.reg);for(let t,e=0;e<this.field.length;e++)t=this.index.get(this.field[e]),t.fastupdate=!1,t.reg=this.reg;if(this.worker){e=[];for(const n of this.index.values())e.push(n.import(t));return Promise.all(e)}break;case"tag":this.tag=sp(e,this.tag);break;case"doc":this.store=ip(e,this.store)}}},Pf(tp.prototype),xp.prototype.remove=function(t,e){const n=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(n){if(this.fastupdate){for(let e,r,i=0;i<n.length;i++)if((e=n[i])&&(r=e.length))if(e[r-1]===t)e.pop();else{const n=e.indexOf(t);n>=0&&e.splice(n,1)}}else dp(this.map,t),this.depth&&dp(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&vp(this)),this.cache&&this.cache.remove(t),this};const hp={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};function fp(t,e,n,r,i,o,s){let a,l;if(!(a=e[n])||s&&!a[s]){if(s?((e=a||(e[n]=Xh()))[s]=1,l=t.ctx,(a=l.get(s))?l=a:l.set(s,l=t.keystore?new vf(t.keystore):new Map)):(l=t.map,e[n]=1),(a=l.get(n))?l=a:l.set(n,l=a=[]),o)for(let n,o=0;o<a.length;o++)if((n=a[o])&&n.includes(i)){if(o<=r)return;n.splice(n.indexOf(i),1),t.fastupdate&&(e=t.reg.get(i))&&e.splice(e.indexOf(n),1);break}if(l=l[r]||(l[r]=[]),l.push(i),l.length===2**31-1){if(e=new xf(l),t.fastupdate)for(let n of t.reg.values())n.includes(l)&&(n[n.indexOf(l)]=e);a[r]=l=e}t.fastupdate&&((r=t.reg.get(i))?r.push(l):t.reg.set(i,[l]))}}function pp(t,e,n,r,i){return n&&t>1?e+(r||0)<=t?n+(i||0):(t-1)/(e+(r||0))*(n+(i||0))+1|0:0}function gp(t,e,n,r,i,o,s){let a=t.length,l=t;if(a>1)l=Yf(t,e,n,r,i,o,s);else if(1===a)return s?If.call(null,t[0],n,r):new Uf(t[0],this);return s?l:new Uf(l,this)}function mp(t,e,n,r,i,o,s){return t=bp(this,t,e,n,r,i,o,s),this.db?t.then(function(t){return i?t||[]:new Uf(t,this)}):t&&t.length?i?If.call(this,t,n,r):new Uf(t,this):i?[]:new Uf([],this)}function yp(t,e,n,r){let i=[];if(t&&t.length){if(t.length<=r)return void e.push(t);for(let e,n=0;n<r;n++)(e=t[n])&&(i[n]=e);if(i.length)return void e.push(i)}if(!n)return i}function bp(t,e,n,r,i,o,s,a){let l;return n&&(l=t.bidirectional&&e>n)&&(l=n,n=e,e=l),t.db?t.db.get(e,n,r,i,o,s,a):t=n?(t=t.ctx.get(n))&&t.get(e):t.map.get(e)}function xp(t,e){if(!this||this.constructor!==xp)return new xp(t);if(t){var n=Gh(t)?t:t.preset;n&&(t=Object.assign({},hp[n],t))}else t={};const r=!0===(n=t.context)?{depth:1}:n||{},i=Gh(t.encoder)?yf[t.encoder]:t.encode||t.encoder||{};this.encoder=i.encode?i:"object"==typeof i?new af(i):{encode:i},this.resolution=t.resolution||9,this.tokenize=n=(n=t.tokenize)&&"default"!==n&&"exact"!==n&&n||"strict",this.depth="strict"===n&&r.depth||0,this.bidirectional=!1!==r.bidirectional,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(n=t.keystore||0)&&(this.keystore=n),this.map=n?new vf(n):new Map,this.ctx=n?new vf(n):new Map,this.reg=e||(this.fastupdate?n?new vf(n):new Map:n?new wf(n):new Set),this.N=r.resolution||3,this.rtl=i.rtl||t.rtl||!1,this.cache=(n=t.cache||null)&&new uf(n),this.resolve=!1!==t.resolve,(n=t.db)&&(this.db=this.mount(n)),this.M=!1!==t.commit,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}function vp(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}xp.prototype.add=function(t,e,n,r){if(e&&(t||0===t)){if(!r&&!n&&this.reg.has(t))return this.update(t,e);r=this.depth;const c=(e=this.encoder.encode(e,!r)).length;if(c){const u=Xh(),d=Xh(),h=this.resolution;for(let f=0;f<c;f++){let p=e[this.rtl?c-1-f:f];var i=p.length;if(i&&(r||!d[p])){var o=this.score?this.score(e,p,f,null,0):pp(h,c,f),s="";switch(this.tokenize){case"tolerant":if(fp(this,d,p,o,t,n),i>2){for(let e,r,a,l,c=1;c<i-1;c++)e=p.charAt(c),r=p.charAt(c+1),a=p.substring(0,c)+r,l=p.substring(c+2),fp(this,d,s=a+e+l,o,t,n),fp(this,d,s=a+l,o,t,n);fp(this,d,p.substring(0,p.length-1),o,t,n)}break;case"full":if(i>2){for(let r,l=0;l<i;l++)for(o=i;o>l;o--){s=p.substring(l,o),r=this.rtl?i-1-l:l;var a=this.score?this.score(e,p,f,s,r):pp(h,c,f,i,r);fp(this,d,s,a,t,n)}break}case"bidirectional":case"reverse":if(i>1){for(a=i-1;a>0;a--){s=p[this.rtl?i-1-a:a]+s;var l=this.score?this.score(e,p,f,s,a):pp(h,c,f,i,a);fp(this,d,s,l,t,n)}s=""}case"forward":if(i>1){for(a=0;a<i;a++)fp(this,d,s+=p[this.rtl?i-1-a:a],o,t,n);break}default:if(fp(this,d,p,o,t,n),r&&c>1&&f<c-1)for(i=this.N,s=p,o=Math.min(r+1,this.rtl?f+1:c-f),a=1;a<o;a++){p=e[this.rtl?c-1-f-a:f+a];fp(this,u,(l=this.bidirectional&&p>s)?s:p,this.score?this.score(e,s,f,p,a-1):pp(i+(c/2>i?0:1),c,f,o-1,a-1),t,n,l?p:s)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(n?{ins:t}:{del:t}),this.M&&vp(this)),this},xp.prototype.search=function(t,e,n){if(n||(e||"object"!=typeof t?"object"==typeof e&&(n=e,e=0):(n=t,t="")),n&&n.cache)return n.cache=!1,t=this.searchCache(t,e,n),n.cache=!0,t;let r,i,o,s,a,l,c,u,d=[],h=0;n&&(t=n.query||t,e=n.limit||e,h=n.offset||0,i=n.context,o=n.suggest,u=(s=n.resolve)&&n.enrich,l=n.boost,c=n.resolution,a=this.db&&n.tag),void 0===s&&(s=this.resolve),i=this.depth&&!1!==i;let f=this.encoder.encode(t,!i);if(r=f.length,e=e||(s?100:0),1===r)return mp.call(this,f[0],"",e,h,s,u,a);if(2===r&&i&&!o)return mp.call(this,f[1],f[0],e,h,s,u,a);let p,g=Xh(),m=0;if(i&&(p=f[0],m=1),c||0===c||(c=p?this.N:this.resolution),this.db){if(this.db.search&&!1!==(n=this.db.search(this,f,e,h,o,s,u,a)))return n;const t=this;return async function(){for(let e,n;m<r;m++){if((n=f[m])&&!g[n]){if(g[n]=1,e=await bp(t,n,p,0,0,!1,!1),e=yp(e,d,o,c)){d=e;break}p&&(o&&e&&d.length||(p=n))}o&&p&&m===r-1&&!d.length&&(c=t.resolution,p="",m=-1,g=Xh())}return gp(d,c,e,h,o,l,s)}()}for(let t,e;m<r;m++){if((e=f[m])&&!g[e]){if(g[e]=1,t=bp(this,e,p,0,0,!1,!1),t=yp(t,d,o,c)){d=t;break}p&&(o&&t&&d.length||(p=e))}o&&p&&m===r-1&&!d.length&&(c=this.resolution,p="",m=-1,g=Xh())}return gp(d,c,e,h,o,l,s)},(Yh=xp.prototype).mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)},Yh.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},Yh.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()},Yh.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},Yh.append=function(t,e){return this.add(t,e,!0)},Yh.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)},Yh.update=function(t,e){const n=this,r=this.remove(t);return r&&r.then?r.then(()=>n.add(t,e)):this.add(t,e)},Yh.cleanup=function(){return this.fastupdate?(dp(this.map),this.depth&&dp(this.ctx),this):this},Yh.searchCache=cf,Yh.export=function(t,e,n=0,r=0){let i,o;switch(r){case 0:i="reg",o=ap(this.reg);break;case 1:i="cfg",o=null;break;case 2:i="map",o=rp(this.map,this.reg.size);break;case 3:i="ctx",o=op(this.ctx,this.reg.size);break;default:return}return cp.call(this,t,e,i,o,n,r)},Yh.import=function(t,e){if(e)switch("string"==typeof e&&(e=JSON.parse(e)),t=t.split("."),"json"===t[t.length-1]&&t.pop(),3===t.length&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=lp(e,this.reg);break;case"map":this.map=ip(e,this.map);break;case"ctx":this.ctx=sp(e,this.ctx)}},Yh.serialize=function(t=!0){let e="",n="",r="";if(this.reg.size){let t;for(var i of this.reg.keys())t||(t=typeof i),e+=(e?",":"")+("string"===t?'"'+i+'"':i);e="index.reg=new Set(["+e+"]);",n=up(this.map,t),n="index.map=new Map(["+n+"]);";for(const e of this.ctx.entries()){i=e[0];let n=up(e[1],t);n="new Map(["+n+"])",n='["'+i+'",'+n+"]",r+=(r?",":"")+n}r="index.ctx=new Map(["+r+"]);"}return t?"function inject(index){"+e+n+r+"}":e+n+r},Pf(xp.prototype);const wp="undefined"!=typeof window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),kp=["map","ctx","tag","reg","cfg"],_p=Xh();function Cp(t,e,n){const r=t.value;let i,o=0;for(let t,s=0;s<r.length;s++){if(t=n?r:r[s]){for(let n,o,a=0;a<e.length;a++)if(o=e[a],n=t.indexOf(o),n>=0){if(i=1,!(t.length>1)){r[s]=[];break}t.splice(n,1)}o+=t.length}if(n)break}o?i&&t.update(r):t.delete(),t.continue()}function Mp(t,e){return new Promise((n,r)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,n(this.result)},t.onerror=t.onblocked=r,t=null})}Yh=function t(e,n={}){if(!this||this.constructor!==t)return new t(e,n);"object"==typeof e&&(n=e,e=e.name),e||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(e?":"+e.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=n.field?n.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=n.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}.prototype,Yh.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())},Yh.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),_p[t.id]||(_p[t.id]=[]),_p[t.id].push(t.field);const e=wp.open(t.id,1);return e.onupgradeneeded=function(){const e=t.db=this.result;for(let n,r=0;r<kp.length;r++){n=kp[r];for(let r,i=0;i<_p[t.id].length;i++)r=_p[t.id][i],e.objectStoreNames.contains(n+("reg"!==n&&r?":"+r:""))||e.createObjectStore(n+("reg"!==n&&r?":"+r:""))}},t.db=Mp(e,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})},Yh.close=function(){this.db&&this.db.close(),this.db=null},Yh.destroy=function(){return Mp(wp.deleteDatabase(this.id))},Yh.clear=function(){const t=[];for(let e,n=0;n<kp.length;n++){e=kp[n];for(let n,r=0;r<_p[this.id].length;r++)n=_p[this.id][r],t.push(e+("reg"!==e&&n?":"+n:""))}const e=this.db.transaction(t,"readwrite");for(let n=0;n<t.length;n++)e.objectStore(t[n]).clear();return Mp(e)},Yh.get=function(t,e,n=0,r=0,i=!0,o=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);const s=this;return Mp(t).then(function(t){let e=[];if(!t||!t.length)return e;if(i){if(!n&&!r&&1===t.length)return t[0];for(let i,o=0;o<t.length;o++)if((i=t[o])&&i.length){if(r>=i.length){r-=i.length;continue}const t=n?r+Math.min(i.length-r,n):i.length;for(let n=r;n<t;n++)e.push(i[n]);if(r=0,e.length===n)break}return o?s.enrich(e):e}return t})},Yh.tag=function(t,e=0,n=0,r=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const i=this;return Mp(t).then(function(t){return!t||!t.length||n>=t.length?[]:e||n?(t=t.slice(n,n+e),r?i.enrich(t):t):t})},Yh.enrich=function(t){"object"!=typeof t&&(t=[t]);const e=this.db.transaction("reg","readonly").objectStore("reg"),n=[];for(let r=0;r<t.length;r++)n[r]=Mp(e.get(t[r]));return Promise.all(n).then(function(e){for(let n=0;n<e.length;n++)e[n]={id:t[n],doc:e[n]?JSON.parse(e[n]):null};return e})},Yh.has=function(t){return Mp(t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t)).then(function(t){return!!t})},Yh.search=null,Yh.info=function(){},Yh.transaction=function(t,e,n){t+="reg"!==t&&this.field?":"+this.field:"";let r=this.h[t+":"+e];if(r)return n.call(this,r);let i=this.db.transaction(t,e);this.h[t+":"+e]=r=i.objectStore(t);const o=n.call(this,r);return this.h[t+":"+e]=null,Mp(i).finally(function(){return o})},Yh.commit=async function(t){let e=t.commit_task,n=[];t.commit_task=[];for(let t,r=0;r<e.length;r++)t=e[r],t.del&&n.push(t.del);n.length&&await this.remove(n),t.reg.size&&(await this.transaction("map","readwrite",function(e){for(const n of t.map){const t=n[0],r=n[1];r.length&&(e.get(t).onsuccess=function(){let n=this.result;var i;if(n&&n.length){const t=Math.max(n.length,r.length);for(let e,o,s=0;s<t;s++)if((o=r[s])&&o.length){if((e=n[s])&&e.length)for(i=0;i<o.length;i++)e.push(o[i]);else n[s]=o;i=1}}else n=r,i=1;i&&e.put(n,t)})}}),await this.transaction("ctx","readwrite",function(e){for(const n of t.ctx){const t=n[0],r=n[1];for(const n of r){const r=n[0],i=n[1];i.length&&(e.get(t+":"+r).onsuccess=function(){let n=this.result;var o;if(n&&n.length){const t=Math.max(n.length,i.length);for(let e,r,s=0;s<t;s++)if((r=i[s])&&r.length){if((e=n[s])&&e.length)for(o=0;o<r.length;o++)e.push(r[o]);else n[s]=r;o=1}}else n=i,o=1;o&&e.put(n,t+":"+r)})}}}),t.store?await this.transaction("reg","readwrite",function(e){for(const n of t.store){const t=n[0],r=n[1];e.put("object"==typeof r?JSON.stringify(r):1,t)}}):t.bypass||await this.transaction("reg","readwrite",function(e){for(const n of t.reg.keys())e.put(1,n)}),t.tag&&await this.transaction("tag","readwrite",function(e){for(const n of t.tag){const t=n[0],r=n[1];r.length&&(e.get(t).onsuccess=function(){let n=this.result;n=n&&n.length?n.concat(r):r,e.put(n,t)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())},Yh.remove=function(t){return"object"!=typeof t&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Cp(e,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Cp(e,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){const e=this.result;e&&Cp(e,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let n=0;n<t.length;n++)e.delete(t[n])})])};const Sp=tp;let Ap=null,Dp=!1;async function Tp(){return await dl()}function Pp(t,e){const{positive:n,negative:r,phrases:i,regular:o,regexPatterns:s=[]}=e,a=[t.title||"",t.url||"",t.description||"",t.domain||"",t.category||"",Array.isArray(t.keywords)?t.keywords.join(" "):""].join(" ").toLowerCase(),l=[t.title||"",t.url||"",t.description||"",t.domain||"",t.category||"",Array.isArray(t.keywords)?t.keywords.join(" "):""].join(" ");for(const t of n)if(!a.includes(t))return!1;for(const t of r)if(a.includes(t))return!1;for(const t of i)if(!a.includes(t))return!1;for(const t of s){const e=t.flags.includes("i")?a:l;if(!t.test(e))return!1}if(o.length>0){if(!o.some(t=>a.includes(t)))return!1}return!0}function Ep(t,e){const{positive:n,phrases:r,regular:i,regexPatterns:o=[]}=e;let s=0;const a=(t.title||"").toLowerCase(),l=(t.url||"").toLowerCase(),c=(t.domain||"").toLowerCase(),u=(t.description||"").toLowerCase(),d=(t.category||"").toLowerCase(),h=[...n,...r,...i];for(const t of h)a.includes(t)&&(s+=10,a.startsWith(t)&&(s+=5)),c.includes(t)&&(s+=5),d.includes(t)&&(s+=4),u.includes(t)&&(s+=2),l.includes(t)&&(s+=1);for(const e of o)e.test(t.title||"")&&(s+=8),e.test(t.url||"")&&(s+=3),e.test(t.description||"")&&(s+=2);return s}async function Lp(){if(Dp)return Ap;console.log("Initializing FlexSearch index...");const t=await yl("flexsearch_index");if(t&&t.serialized)try{Ap=new Sp({document:{id:"id",index:["title","url","description","keywords","category","domain"],store:!0},tokenize:"forward",cache:!0,optimize:!0,resolution:9,context:{depth:3,bidirectional:!0}});const e=Object.keys(t.serialized);for(const n of e)await Ap.import(n,t.serialized[n]);return Dp=!0,console.log("Loaded FlexSearch index from cache"),Ap}catch(t){console.error("Error loading cached index:",t)}return await async function(){console.log("Building FlexSearch index..."),Ap=new Sp({document:{id:"id",index:["title","url","description","keywords","category","domain"],store:!0},tokenize:"forward",cache:!0,optimize:!0,resolution:9,context:{depth:3,bidirectional:!0}});const t=await Tp();for(const e of t)await Op(e,!1);Dp=!0;try{const e={};await Ap.export((t,n)=>{e[t]=n}),await ml("flexsearch_index",{serialized:e,timestamp:Date.now()}),console.log(`Indexed ${t.length} bookmarks`)}catch(t){console.error("Error caching index:",t)}return Ap}(),Ap}async function Op(t,e=!0){Ap||await Lp();const n={id:t.id,title:t.title||"",url:t.url||"",description:t.description||"",keywords:Array.isArray(t.keywords)?t.keywords.join(" "):"",category:t.category||"",domain:t.domain||""};await Ap.add(n),e&&await async function(){if(!Ap)return;try{const t={};await Ap.export((e,n)=>{t[e]=n}),await ml("flexsearch_index",{serialized:t,timestamp:Date.now()})}catch(t){console.error("Error caching index:",t)}}()}async function Rp(t,e=null,n={}){!e||e.domains||Array.isArray(e.domains)||(n=e,e=null);const{limit:r=50,offset:i=0,computeStats:o=!1}=n;let s=await Tp();if(e){const t=Date.now()-2592e6;s=s.filter(n=>{if(e.domains&&e.domains.length>0){const t=(n.domain||"").toLowerCase();if(!e.domains.some(e=>t.includes(e.toLowerCase())))return!1}if(e.folders&&e.folders.length>0){const t=(n.folderPath||"").toLowerCase();if(!e.folders.some(e=>t.includes(e.toLowerCase())))return!1}if(e.topics&&e.topics.length>0){const t=n.topics||[];if(!e.topics.some(e=>t.some(t=>t.toLowerCase()===e.toLowerCase()||t.toLowerCase().startsWith(e.toLowerCase()+"/"))))return!1}if(e.types&&e.types.length>0){const t=(n.contentType||"").toLowerCase();if(!e.types.some(e=>t===e.toLowerCase()))return!1}if(e.creators&&e.creators.length>0){const t=`${n.platform||"other"}:${n.creator}`;if(!e.creators.some(e=>e.key===t))return!1}if(e.tags&&e.tags.length>0){if(!n.tags||!Array.isArray(n.tags))return!1;if(!e.tags.some(t=>n.tags.includes(t)))return!1}if(e.deadLinks&&!1!==n.isAlive)return!1;if(e.stale){const e=n.dateAdded<t,r=!n.accessCount||0===n.accessCount,i=!1!==n.isAlive;if(!(e&&r&&i))return!1}if(e.dateRange){const{startDate:t,endDate:r}=e.dateRange;if(n.dateAdded<t||n.dateAdded>r)return!1}if(e.readingTimeRange){const{min:t,max:r}=e.readingTimeRange,i=n.readingTime||0;if(null!=t&&i<t)return!1;if(null!=r&&i>r)return!1}if(e.qualityScoreRange){const{min:t,max:r}=e.qualityScoreRange,i=n.qualityScore||0;if(null!=t&&i<t)return!1;if(null!=r&&i>r)return!1}if(null!==e.hasPublishedDate&&void 0!==e.hasPublishedDate){const t=Boolean(n.publishedDate||n.rawMetadata?.publishedDate);if(e.hasPublishedDate!==t)return!1}return!0})}if(!t||!t.trim()){const t=Ya(n.sortBy||"date_desc"),e={results:s.sort(t).slice(i,i+r),total:s.length,hasMore:i+r<s.length,parsedQuery:null};return o&&(e.stats=Bp(s)),e}const{filters:a,remainingQuery:l}=function(t){if(!t||!t.trim())return{filters:{},remainingQuery:""};const e={};let n=t;const r=n.match(/category:(\S+)/i);r&&(e.category=r[1].toLowerCase(),n=n.replace(r[0],"").trim());const i=n.match(/domain:(\S+)/i);i&&(e.domain=i[1].toLowerCase(),n=n.replace(i[0],"").trim());const o=n.match(/platform:(\S+)/i);o&&(e.platform=o[1].toLowerCase(),n=n.replace(o[0],"").trim());const s=n.match(/channel:(@?\S+)/i);s&&(e.creator=s[1],n=n.replace(s[0],"").trim());const a=n.match(/author:(@?\S+)/i);a&&(e.creator=a[1],n=n.replace(a[0],"").trim());const l=n.match(/repo:(\S+)/i);l&&(e.repo=l[1].toLowerCase(),n=n.replace(l[0],"").trim());const c=n.match(/type:(\S+)/i);c&&(e.contentType=c[1].toLowerCase(),n=n.replace(c[0],"").trim());const u=n.match(/hasimage:(yes|no)/i);u&&(e.hasImage="yes"===u[1].toLowerCase(),n=n.replace(u[0],"").trim());const d=n.match(/playlist:(\S+)/i);d&&(e.playlist=d[1],n=n.replace(d[0],"").trim());const h=n.match(/accessed:(yes|no)/i);h&&(e.accessed="yes"===h[1].toLowerCase(),n=n.replace(h[0],"").trim());const f=n.match(/stale:(yes|no)/i);f&&(e.stale="yes"===f[1].toLowerCase(),n=n.replace(f[0],"").trim());const p=n.match(/enriched:(yes|no)/i);p&&(e.enriched="yes"===p[1].toLowerCase(),n=n.replace(p[0],"").trim());const g=n.match(/dead:(yes|no)/i);g&&(e.dead="yes"===g[1].toLowerCase(),n=n.replace(g[0],"").trim());const m=n.match(/folder:(?:"([^"]+)"|(\S+))/i);return m&&(e.folder=(m[1]||m[2]).toLowerCase(),n=n.replace(m[0],"").trim()),{filters:e,remainingQuery:n}}(t),c=function(t){if(!t||!t.trim())return{positive:[],negative:[],phrases:[],regular:[],regexPatterns:[],hasModifiers:!1};const e=[],n=[],r=[],i=[],o=[],s=/\/([^\/]+)\/([gimsuvy]*)?/g;let a,l=t;for(;null!==(a=s.exec(t));)try{const t=a[1],e=a[2]||"i",n=new RegExp(t,e);o.push(n)}catch(t){console.warn("Invalid regex pattern:",a[0],t.message)}l=l.replace(/\/[^\/]+\/[gimsuvy]*/g,"").trim();const c=/([+-]?)"([^"]+)"/g;for(;null!==(a=c.exec(l));){const t=a[1],i=a[2].toLowerCase();"+"===t?e.push(i):"-"===t?n.push(i):r.push(i)}l=l.replace(/[+-]?"[^"]+"/g,"").trim();const u=l.split(/\s+/).filter(t=>t.length>0);for(const t of u){const r=t.toLowerCase();t.startsWith("+")&&t.length>1?e.push(r.slice(1)):t.startsWith("-")&&t.length>1?n.push(r.slice(1)):i.push(r)}return{positive:e,negative:n,phrases:r,regular:i,regexPatterns:o,hasModifiers:e.length>0||n.length>0||r.length>0||o.length>0}}(l);if(Object.keys(a).length>0&&(s=function(t,e){const n=Date.now()-2592e6;return t.filter(t=>{if(e.category&&(t.category||"uncategorized").toLowerCase()!==e.category)return!1;if(e.domain&&!(t.domain||"").toLowerCase().includes(e.domain))return!1;if(void 0!==e.accessed){const n=t.accessCount&&t.accessCount>0;if(e.accessed!==n)return!1}if(e.stale){const e=t.dateAdded<n,r=!t.accessCount||0===t.accessCount,i=!1!==t.isAlive;if(!(e&&r&&i))return!1}if(void 0!==e.enriched){const n=Boolean(t.description||t.keywords&&t.keywords.length>0||t.contentSnippet);if(e.enriched!==n)return!1}if(void 0!==e.dead){const n=!1===t.isAlive;if(e.dead!==n)return!1}if(e.folder&&!(t.folderPath||"").toLowerCase().includes(e.folder))return!1;if(e.platform&&(t.platform||"other").toLowerCase()!==e.platform)return!1;if(e.creator){const n=(t.creator||"").toLowerCase(),r=e.creator.toLowerCase();if(!n.includes(r)&&!n.includes(r.replace(/^@/,""))&&!`@${n}`.includes(r))return!1}if(e.repo&&!(t.platformData?.extra?.owner&&t.platformData?.extra?.repo?`${t.platformData.extra.owner}/${t.platformData.extra.repo}`.toLowerCase():"").includes(e.repo))return!1;if(e.contentType){const n=(t.contentType||"").toLowerCase();if(!e.contentType.split("|").map(t=>t.trim()).includes(n))return!1}if(void 0!==e.hasImage){const n=Boolean(t.platformData?.extra?.thumbnail||t.rawMetadata?.openGraph?.["og:image"]||t.rawMetadata?.twitterCard?.["twitter:image"]);if(e.hasImage!==n)return!1}return!(e.playlist&&!(t.platformData?.extra?.playlistId||"").includes(e.playlist))})}(s,a)),l.trim()){if(c.regular.length>0)try{const t=await Lp(),e=c.regular.join(" "),n=await t.search(e,{limit:1e4,suggest:!0}),r=new Set;Array.isArray(n)&&n.forEach(t=>{t&&Array.isArray(t.result)&&t.result.forEach(t=>r.add(t))}),s=s.filter(t=>r.has(t.id)),s=s.filter(t=>Pp(t,c))}catch(t){console.error("FlexSearch failed, falling back to manual search:",t),s=s.filter(t=>Pp(t,c))}else s=s.filter(t=>Pp(t,c));s=s.map(t=>({...t,_searchScore:Ep(t,c)}));const t=Ya(n.sortBy||"relevance");s.sort(t)}else{const t=Ya(n.sortBy||"date_desc");s.sort(t)}const u=s.length,d={results:s.slice(i,i+r),total:u,hasMore:i+r<u,parsedQuery:c,specialFilters:a};return o&&(d.stats=Bp(s)),d}function Bp(t){const e=new Map,n=new Map,r=new Map,i=new Map,o=new Map,s=Date.now(),a=864e5,l=7*a,c=14*a,u=90*a,d=180*a,h=new Date,f=h.getFullYear(),p=new Date(f,h.getMonth(),1).getTime(),g=new Date(f,0,1).getTime();let m=0,y=0,b=0,x=0,v=0,w=0,k=0;for(const a of t){if(a.domain){const t=e.get(a.domain)||{count:0,latestDate:0};t.count++,a.dateAdded>t.latestDate&&(t.latestDate=a.dateAdded),e.set(a.domain,t)}if(a.folderPath){const t=n.get(a.folderPath)||0;n.set(a.folderPath,t+1)}const t=a.topics||[];for(const e of t)r.set(e,(r.get(e)||0)+1);if(a.creator){const t=`${a.platform||"other"}:${a.creator}`;i.has(t)||i.set(t,{creator:a.creator,platform:a.platform||"other",count:0}),i.get(t).count++}a.contentType&&o.set(a.contentType,(o.get(a.contentType)||0)+1);const h=a.dateAdded;s-h<l&&m++,s-h<c&&y++,h>=p&&b++,s-h<u&&x++,s-h<d&&v++,h>=g&&w++,h<g&&k++}return{domains:Array.from(e.entries()).map(([t,e])=>({domain:t,count:e.count,latestDate:e.latestDate})).sort((t,e)=>e.count-t.count),folders:Array.from(n.entries()).map(([t,e])=>({folder:t,count:e})).sort((t,e)=>e.count-t.count),topics:Array.from(r.entries()).map(([t,e])=>({topic:t,count:e})).sort((t,e)=>e.count-t.count),creators:Array.from(i.values()).sort((t,e)=>e.count-t.count),contentTypes:Array.from(o.entries()).map(([t,e])=>({type:t,count:e})).sort((t,e)=>e.count-t.count),dateCounts:{week:m,twoWeek:y,month:b,threeMonth:x,sixMonth:v,year:w,older:k}}}function jp(t,e){const n=t.toLowerCase().trim(),r=e.toLowerCase().trim();if(n===r)return 1;const i=Math.max(n.length,r.length);if(0===i)return 0;return 1-function(t,e){const n=t.length,r=e.length;if(0===n)return r;if(0===r)return n;const i=Array(n+1).fill(null).map(()=>Array(r+1).fill(0));for(let t=0;t<=n;t++)i[t][0]=t;for(let t=0;t<=r;t++)i[0][t]=t;for(let o=1;o<=n;o++)for(let n=1;n<=r;n++){const r=t[o-1]===e[n-1]?0:1;i[o][n]=Math.min(i[o-1][n]+1,i[o][n-1]+1,i[o-1][n-1]+r)}return i[n][r]}(n,r)/i}function $p(t,e){const n=new Set(t.toLowerCase().split(/\s+/).filter(t=>t.length>2)),r=new Set(e.toLowerCase().split(/\s+/).filter(t=>t.length>2));if(0===n.size||0===r.size)return 0;const i=[...n].filter(t=>r.has(t)).length;return i/new Set([...n,...r]).size}function Ip(t){let e=0,n=0;return t.title&&t.title.length>3&&(e+=1,n++),t.description&&t.description.length>10&&(e+=1,n++),t.keywords&&t.keywords.length>0&&(e+=1,n++),t.category&&(e+=1,n++),t.domain&&(e+=1,n++),{coverage:e,fields:n,percentage:n>0?e/5*100:0}}function zp(t,e){const n={titleFuzzy:0,titleWords:0,descriptionWords:0,keywordsOverlap:0,categoryMatch:0,domainMatch:0,urlPathSimilarity:0};if(t.title&&e.title&&(n.titleFuzzy=jp(t.title,e.title),n.titleWords=$p(t.title,e.title)),t.description&&e.description&&(n.descriptionWords=$p(t.description,e.description)),t.keywords?.length>0&&e.keywords?.length>0){const r=new Set(t.keywords.map(t=>t.toLowerCase())),i=new Set(e.keywords.map(t=>t.toLowerCase())),o=[...r].filter(t=>i.has(t)).length,s=new Set([...r,...i]).size;n.keywordsOverlap=o/s}if(t.category&&e.category&&(n.categoryMatch=t.category===e.category?1:0),t.domain&&e.domain&&(n.domainMatch=t.domain===e.domain?1:0),1===n.domainMatch)try{const r=new URL(t.url).pathname,i=new URL(e.url).pathname;n.urlPathSimilarity=jp(r,i)}catch(t){}let r;return r=1===n.domainMatch?.25*n.titleFuzzy+.2*n.titleWords+.2*n.urlPathSimilarity+.15*n.descriptionWords+.1*n.keywordsOverlap+.1*n.categoryMatch:.3*n.titleFuzzy+.25*n.titleWords+.2*n.descriptionWords+.15*n.keywordsOverlap+.1*n.categoryMatch,{combined:r,breakdown:n,sameDomain:1===n.domainMatch,sameCategory:1===n.categoryMatch}}const Fp=()=>new Promise(t=>setTimeout(t,0));async function Np(t={}){const{minSimilarity:e=.5,maxPairs:n=100,prioritizeSameDomain:r=!0,requireHighCoverage:i=!1,minCoveragePercent:o=40,useCache:s=!0,forceRefresh:a=!1}=t;try{const t=`enhanced_similar_${e}_${n}`;if(s&&!a){const e=await yl(t);if(e&&e.pairs&&Date.now()-e.timestamp<(bl.similarities||864e5))return console.log("Returning cached enhanced similar results"),{pairs:e.pairs,stats:e.stats,fromCache:!0,cachedAt:e.timestamp,cacheAge:Date.now()-e.timestamp}}const l=await async function(){return await dl()}();if(l.length<2)return{pairs:[],stats:{total:0,sameDomain:0,crossDomain:0},fromCache:!1};let c=l;i&&(c=l.filter(t=>{const{percentage:e}=Ip(t);return e>=o}));const u=new Map;c.forEach(t=>{const e=t.domain||"unknown";u.has(e)||u.set(e,[]),u.get(e).push(t)});const d=[];let h=0;const f=100;for(const[t,n]of u.entries())if(!(n.length<2))for(let t=0;t<n.length;t++)for(let r=t+1;r<n.length;r++){h++,h%f===0&&await Fp();const i=n[t],o=n[r];if(i.url===o.url)continue;const s=zp(i,o);s.combined>=e&&d.push({bookmark1:i,bookmark2:o,similarity:s.combined,breakdown:s.breakdown,sameDomain:!0,sameCategory:s.sameCategory,coverage1:Ip(i),coverage2:Ip(o)})}if(!r||d.length<n/2){const t=Math.min(200,c.length),r=c.sort(()=>Math.random()-.5).slice(0,t);for(let t=0;t<r.length;t++){for(let n=t+1;n<r.length;n++){h++,h%f===0&&await Fp();const i=r[t],o=r[n];if(i.domain===o.domain||i.url===o.url)continue;const s=zp(i,o);s.combined>=e+.1&&d.push({bookmark1:i,bookmark2:o,similarity:s.combined,breakdown:s.breakdown,sameDomain:!1,sameCategory:s.sameCategory,coverage1:Ip(i),coverage2:Ip(o)})}if(d.length>=2*n)break}}const p=d.sort((t,e)=>e.similarity-t.similarity).slice(0,n),g={total:p.length,sameDomain:p.filter(t=>t.sameDomain).length,crossDomain:p.filter(t=>!t.sameDomain).length,avgSimilarity:p.length>0?p.reduce((t,e)=>t+e.similarity,0)/p.length:0};return s&&(await ml(t,{pairs:p,stats:g,timestamp:Date.now()}),console.log("Cached enhanced similar results")),{pairs:p,stats:g,fromCache:!1}}catch(t){return console.error("Error finding similar bookmarks with fuzzy matching:",t),{pairs:[],stats:{total:0,sameDomain:0,crossDomain:0},fromCache:!1}}}const{document:Wp}=g;function Hp(t,e,n){const r=t.slice();return r[200]=e[n],r}function Vp(t,e,n){const r=t.slice();return r[200]=e[n],r}function qp(t,e,n){const r=t.slice();return r[231]=e[n],r[233]=n,r}function Up(t,e,n){const r=t.slice();return r[234]=e[n],r}function Kp(t,e,n){const r=t.slice();return r[205]=e[n],r}function Yp(t,e,n){const r=t.slice();return r[205]=e[n],r}function Qp(t,e,n){const r=t.slice();return r[205]=e[n],r}function Jp(t,e,n){const r=t.slice();return r[205]=e[n],r}function Xp(t,e,n){const r=t.slice();return r[205]=e[n],r}function Gp(t,e,n){const r=t.slice();return r[205]=e[n],r}function Zp(t,e,n){const r=t.slice();return r[253]=e[n],r[255]=n,r}function tg(t,e,n){const r=t.slice();return r[249]=e[n],r[251]=n,r}function eg(t,e,n){const r=t.slice();return r[205]=e[n],r[233]=n,r}function ng(t,e,n){const r=t.slice();return r[205]=e[n],r}function rg(t,e,n){const r=t.slice();return r[258]=e[n],r}function ig(t,e,n){const r=t.slice();return r[261]=e[n],r}function og(t,e,n){const r=t.slice();return r[264]=e[n],r}function sg(t,e,n){const r=t.slice();return r[205]=e[n],r}function ag(t,e,n){const r=t.slice();return r[205]=e[n],r}function lg(t,e,n){const r=t.slice();return r[210]=e[n],r}function cg(t,e,n){const r=t.slice();return r[213]=e[n],r}function ug(t,e,n){const r=t.slice();return r[216]=e[n],r}function dg(t,e,n){const r=t.slice();return r[219]=e[n],r}function hg(t,e,n){const r=t.slice();return r[222]=e[n],r}function fg(t,e,n){const r=t.slice();return r[225]=e[n],r}function pg(t,e,n){const r=t.slice();return r[228]=e[n],r}function gg(e){let n,r;return n=new Hd({}),{c(){at(n.$$.fragment)},m(t,e){lt(n,t,e),r=!0},p:t,i(t){r||(nt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){ct(n,t)}}}function mg(e){let n;function r(t,e){return t[4]?vg:xg}let i=r(e),o=i(e);return{c(){n=v("div"),o.c(),A(n,"class","space-y-8")},m(t,e){y(t,n,e),o.m(n,null)},p(t,e){i===(i=r(t))&&o?o.p(t,e):(o.d(1),o=i(t),o&&(o.c(),o.m(n,null)))},i:t,o:t,d(t){t&&b(n),o.d()}}}function yg(e){let n,r;return n=new Kh({}),n.$on("filterByCategory",e[63]),n.$on("filterByDomain",e[64]),n.$on("filterByAccessed",e[65]),n.$on("filterByStale",e[66]),n.$on("filterByDead",e[67]),n.$on("filterByUnenriched",e[68]),n.$on("filterByUncategorized",e[69]),n.$on("showDuplicates",e[70]),n.$on("deleteBookmarks",e[71]),n.$on("searchQuery",e[72]),{c(){at(n.$$.fragment)},m(t,e){lt(n,t,e),r=!0},p:t,i(t){r||(nt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){ct(n,t)}}}function bg(t){let e,n,r,i,o,s,a,l,c,u,d;n=new Uc({props:{value:t[2]}}),n.$on("search",t[60]);let h={searchResultStats:t[16],isSearchActive:!!t[2]};s=new zu({props:h}),t[118](s);const f=[Sy,My,Cy,_y],p=[];function g(t,e){return t[4]?0:t[5]?1:0===t[3].length?2:3}return c=g(t),u=p[c]=f[c](t),{c(){e=v("div"),at(n.$$.fragment),r=_(),i=v("div"),o=v("div"),at(s.$$.fragment),a=_(),l=v("div"),u.c(),A(e,"class","mb-4"),A(o,"class","flex-shrink-0"),A(l,"class","flex-1 min-w-0 overflow-hidden"),A(i,"class","flex gap-6 min-h-0")},m(t,u){y(t,e,u),lt(n,e,null),y(t,r,u),y(t,i,u),m(i,o),lt(s,o,null),m(i,a),m(i,l),p[c].m(l,null),d=!0},p(t,e){const r={};4&e[0]&&(r.value=t[2]),n.$set(r);const i={};65536&e[0]&&(i.searchResultStats=t[16]),4&e[0]&&(i.isSearchActive=!!t[2]),s.$set(i);let o=c;c=g(t),c===o?p[c].p(t,e):(tt(),rt(p[o],1,1,()=>{p[o]=null}),et(),u=p[c],u?u.p(t,e):(u=p[c]=f[c](t),u.c()),nt(u,1),u.m(l,null))},i(t){d||(nt(n.$$.fragment,t),nt(s.$$.fragment,t),nt(u),d=!0)},o(t){rt(n.$$.fragment,t),rt(s.$$.fragment,t),rt(u),d=!1},d(o){o&&(b(e),b(r),b(i)),ct(n),t[118](null),ct(s),p[c].d()}}}function xg(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,E,L,O,R,B,j,$,I,z,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z,tt,et,nt,rt,it,ot,st,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,yt,bt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Tt,Pt,Et,Lt,Ot,Rt,Bt,jt,$t,It,zt,Ft,Nt,Wt,Ht,Vt,qt,Ut,Kt,Yt,Qt,Jt,Xt,Gt,Zt,te,ee,ne,re,ie,oe,se,ae,le,ce,ue,de,he,fe,pe,ge,me,ye,be,xe,ve,we,ke,_e,Ce,Me,Se,Ae,De,Te,Pe,Ee,Le,Oe,Re,Be,je,$e,Ie,ze,Fe,Ne,We,He,Ve,qe,Ue,Ke,Ye,Qe,Je,Xe,Ge,Ze,tn=t[11].length+"",en=(t[39]?t[39].total:0)+"",nn=t[15]&&wg(t);function rn(t,e){return t[18]?_g:kg}let on=rn(t),sn=on(t),an=t[17]&&Cg(t);function ln(t,e){return t[24]?Ag:Sg}let cn=ln(t),un=cn(t),dn=t[24]&&Dg(),hn=t[20]&&t[18]&&Tg(t),fn=t[19]&&Eg(t);function pn(t,e){return t[21].length>0?$g:t[19]?void 0:jg}let gn=pn(t),mn=gn&&gn(t);function yn(t,e){return t[25]?Fg:zg}let bn=yn(t),xn=bn(t),vn=t[25]&&t[26]&&Ng(t);function wn(t,e){return t[27]?qg:t[25]?void 0:Vg}let kn=wn(t),_n=kn&&kn(t),Cn=!t[14]&&Yg(t),Mn=t[13].length>0&&Qg(t),Sn=t[13].length>0&&!t[52]&&tm(t),An=t[52]&&t[53]&&em(t),Dn=t[54]&&!t[52]&&rm(t);function Tn(t,e){return t[14]?am:0===t[13].length?sm:om}let Pn=Tn(t),En=Pn(t),Ln=t[40]?.fromCache&&wm(t);function On(t,e){return t[33]?_m:km}let Rn=On(t),Bn=Rn(t);function jn(t,e){return"duplicates"===t[41]?Mm:"similar"===t[41]?Cm:void 0}let $n=jn(t),In=$n&&$n(t),zn=t[43]&&Hm(t);function Fn(t,e){return t[32]?Um:t[43]&&0!==t[43].summary.total?Vm:qm}let Nn=Fn(t),Wn=Nn(t),Hn=!t[30]&&ly(t),Vn=t[12].length>0&&cy(t);function qn(t,e){return t[30]?hy:0===t[12].length?dy:uy}let Un=qn(t),Kn=Un(t);function Yn(t,e){return t[46]?gy:py}let Qn=Yn(t),Jn=Qn(t),Xn=t[49]&&my(t);function Gn(t,e){return 0===t[48].length?wy:vy}let Zn=Gn(t),tr=Zn(t);return{c(){nn&&nn.c(),e=_(),n=v("div"),i=v("div"),o=v("div"),o.innerHTML='<h3 class="text-lg font-medium text-gray-900"><svg class="w-5 h-5 inline-block mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>\n                  Bookmark Enrichment</h3> <p class="text-sm text-gray-500 mt-1">Fetch metadata (descriptions, categories, keywords) for your bookmarks</p>',s=_(),a=v("button"),sn.c(),l=_(),c=v("div"),an&&an.c(),u=_(),d=v("div"),h=v("p"),h.textContent="How it works:",f=_(),p=v("ul"),un.c(),g=_(),x=v("div"),w=v("div"),C=v("label"),S=k("Batch Size\n                    "),E=v("span"),E.textContent="(how many bookmarks to process)",L=_(),O=v("input"),R=_(),B=v("div"),j=v("label"),$=k("Concurrency\n                    "),I=v("span"),I.textContent="(parallel requests)",z=_(),F=v("input"),N=_(),W=v("p"),W.textContent="Higher = faster, but more resource intensive (recommended: 5-10)",H=_(),V=v("div"),q=v("label"),U=v("input"),K=_(),Y=v("div"),Q=v("span"),Q.textContent="Force Re-enrich",J=_(),X=v("p"),G=k("Re-fetch metadata for bookmarks even if already enriched. Bypasses the queue and processes "),Z=k(t[22]),tt=k(" bookmarks directly."),et=_(),dn&&dn.c(),nt=_(),hn&&hn.c(),rt=_(),fn&&fn.c(),it=_(),mn&&mn.c(),ot=_(),st=v("div"),at=v("div"),lt=v("div"),lt.innerHTML='<h3 class="text-lg font-medium text-gray-900"><span class="inline-block mr-2"></span>\n                  Deep Content Analysis</h3> <p class="text-sm text-gray-500 mt-1">Analyze existing metadata to extract reading time, publish date, quality score, smart tags, and topics (no network requests)</p>',ct=_(),ut=v("button"),xn.c(),dt=_(),ht=v("div"),ft=v("div"),ft.innerHTML='<p class="mb-2">Extracts intelligent insights from your bookmarks:</p> <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-2"><div class="flex items-start gap-2"><span class="text-lg"></span> <div><div class="font-medium text-gray-800">Reading Time</div> <div class="text-xs text-gray-500">Estimated time to read/watch content</div></div></div> <div class="flex items-start gap-2"><span class="text-lg"></span> <div><div class="font-medium text-gray-800">Published Date</div> <div class="text-xs text-gray-500">When the content was published</div></div></div> <div class="flex items-start gap-2"><span class="text-lg"></span> <div><div class="font-medium text-gray-800">Quality Score</div> <div class="text-xs text-gray-500">Content completeness rating (0-100)</div></div></div> <div class="flex items-start gap-2"><span class="text-lg"></span> <div><div class="font-medium text-gray-800">Smart Tags &amp; Topics</div> <div class="text-xs text-gray-500">Auto-generated keywords and topic classification</div></div></div></div>',pt=_(),vn&&vn.c(),gt=_(),_n&&_n.c(),mt=_(),yt=v("div"),bt=v("div"),xt=v("div"),vt=v("h3"),wt=k("Dead Links "),Cn&&Cn.c(),kt=_(),_t=v("p"),_t.textContent="Bookmarks detected as unreachable during enrichment",Ct=_(),Mn&&Mn.c(),Mt=_(),St=v("div"),Sn&&Sn.c(),At=_(),An&&An.c(),Dt=_(),Dn&&Dn.c(),Tt=_(),En.c(),Pt=_(),Et=v("div"),Lt=v("div"),Ot=v("div"),Rt=v("div"),Rt.innerHTML='<h3 class="text-lg font-medium text-gray-900">Duplicates &amp; Similarities</h3> <p class="text-xs text-gray-500 mt-1">Manage exact duplicates and find similar content</p>',Bt=_(),jt=v("div"),Ln&&Ln.c(),$t=_(),It=v("button"),Bn.c(),zt=_(),Ft=v("div"),Nt=v("button"),Wt=k("Exact Duplicates ("),Ht=k(tn),Vt=k(")"),Ut=_(),Kt=v("button"),Yt=k("Similar Content ("),Qt=k(en),Jt=k(")"),Gt=_(),Zt=v("div"),In&&In.c(),te=_(),ee=v("div"),ne=v("div"),re=v("h3"),ie=k(" Cleanup Candidates "),zn&&zn.c(),oe=_(),se=v("p"),se.textContent="Bookmarks that may be candidates for removal based on various criteria",ae=_(),le=v("div"),Wn.c(),ce=_(),ue=v("div"),de=v("div"),he=v("div"),fe=v("h3"),pe=k("Invalid URLs "),Hn&&Hn.c(),ge=_(),me=v("p"),me.textContent="Bookmarks with unrecognized URL schemes",ye=_(),Vn&&Vn.c(),be=_(),xe=v("div"),Kn.c(),ve=_(),we=v("div"),ke=v("div"),ke.innerHTML='<h3 class="text-lg font-medium text-gray-900"><svg class="w-5 h-5 inline-block mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg>\n                Backup &amp; Restore</h3> <p class="text-sm text-gray-500 mt-1">Protect your enrichment data - backup regularly!</p>',_e=_(),Ce=v("div"),Me=v("div"),Se=v("div"),Ae=v("h4"),Ae.textContent="Create Backup",De=_(),Te=v("p"),Te.textContent="Download a complete backup of your bookmarks including all enrichment data, categories, and metadata.",Pe=_(),Ee=v("button"),Jn.c(),Le=_(),Oe=v("div"),Re=v("h4"),Re.textContent="Restore Backup",Be=_(),je=v("p"),je.textContent="Restore from a backup file. Your current data will be auto-backed up first.",$e=_(),Ie=v("label"),ze=v("span"),ze.textContent="Choose backup file",Fe=_(),Ne=v("input"),We=_(),Xn&&Xn.c(),He=_(),Ve=v("div"),qe=v("div"),Ue=v("h4"),Ue.textContent="Auto-Backups",Ke=_(),Ye=v("button"),Ye.textContent="Refresh",Qe=_(),Je=v("p"),Je.textContent="Auto-backups are created before restore operations and enrichment runs. Last 3 are kept.",Xe=_(),tr.c(),a.disabled=t[18],A(a,"class","px-4 py-2 bg-purple-600 text-white text-sm rounded-md hover:bg-purple-700 disabled:opacity-50 flex-shrink-0"),A(i,"class","px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"),A(h,"class","font-medium mb-1"),A(p,"class","list-disc list-inside space-y-1 text-xs"),A(d,"class","mb-4 text-sm text-gray-600 bg-gray-50 p-3 rounded border border-gray-200"),A(E,"class","text-xs text-gray-500 font-normal"),A(O,"type","number"),A(O,"min","5"),A(O,"max","200"),A(O,"class","mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),O.disabled=t[18],A(C,"class","block text-sm font-medium text-gray-700 mb-1"),A(I,"class","text-xs text-gray-500 font-normal"),A(F,"type","number"),A(F,"min","1"),A(F,"max","20"),A(F,"class","mt-1 w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),F.disabled=t[18],A(j,"class","block text-sm font-medium text-gray-700 mb-1"),A(W,"class","text-xs text-gray-500 mt-1"),A(U,"type","checkbox"),A(U,"class","mt-0.5 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"),U.disabled=t[18],A(Q,"class","text-sm font-medium text-gray-700"),A(X,"class","text-xs text-gray-500 mt-0.5"),A(q,"class","flex items-start gap-2 cursor-pointer mt-2"),A(x,"class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"),A(c,"class","p-6"),A(n,"class","bg-white rounded-lg shadow"),ut.disabled=t[25],A(ut,"class","px-4 py-2 bg-indigo-600 text-white text-sm rounded-md hover:bg-indigo-700 disabled:opacity-50 flex-shrink-0"),A(at,"class","px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"),A(ft,"class","text-sm text-gray-600 mb-4"),A(ht,"class","p-6"),A(st,"class","bg-white rounded-lg shadow"),A(vt,"class","text-lg font-medium text-gray-900"),A(_t,"class","text-xs text-gray-500 mt-1"),A(bt,"class","px-6 py-4 border-b border-gray-200 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"),A(St,"class","p-6"),A(yt,"class","bg-white rounded-lg shadow"),It.disabled=t[33],A(It,"class","px-3 py-1.5 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),A(jt,"class","flex items-center gap-2"),A(Ot,"class","flex items-center justify-between flex-wrap gap-3"),A(Nt,"class",qt="pb-2 text-sm font-medium border-b-2 transition-colors "+("duplicates"===t[41]?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700")),A(Kt,"class",Xt="pb-2 text-sm font-medium border-b-2 transition-colors "+("similar"===t[41]?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700")),A(Ft,"class","flex space-x-4 mt-4 border-b border-gray-100"),A(Lt,"class","px-6 py-4 border-b border-gray-200"),A(Zt,"class","p-6"),A(Et,"class","bg-white rounded-lg shadow"),A(re,"class","text-lg font-medium text-gray-900"),A(se,"class","text-xs text-gray-500 mt-1"),A(ne,"class","px-6 py-4 border-b border-gray-200"),A(le,"class","p-6"),A(ee,"class","bg-white rounded-lg shadow"),A(fe,"class","text-lg font-medium text-gray-900"),A(me,"class","text-xs text-gray-500 mt-1"),A(de,"class","px-6 py-4 border-b border-gray-200 flex justify-between items-center"),A(xe,"class","p-6"),A(ue,"class","bg-white rounded-lg shadow"),A(ke,"class","px-6 py-4 border-b border-gray-200"),A(Ae,"class","font-medium text-gray-900 mb-3"),A(Te,"class","text-sm text-gray-600 mb-4"),Ee.disabled=t[46],A(Ee,"class","w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 flex items-center justify-center"),A(Se,"class","border border-gray-200 rounded-lg p-4"),A(Re,"class","font-medium text-gray-900 mb-3"),A(je,"class","text-sm text-gray-600 mb-4"),A(ze,"class","sr-only"),A(Ne,"type","file"),A(Ne,"accept",".json"),A(Ne,"class","block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"),A(Ie,"class","block"),A(Oe,"class","border border-gray-200 rounded-lg p-4"),A(Me,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),A(Ue,"class","font-medium text-gray-900"),A(Ye,"class","text-sm text-blue-600 hover:text-blue-800"),A(qe,"class","flex justify-between items-center mb-3"),A(Je,"class","text-sm text-gray-600 mb-3"),A(Ve,"class","mt-6 border-t border-gray-200 pt-6"),A(Ce,"class","p-6"),A(we,"class","bg-white rounded-lg shadow")},m(r,b){nn&&nn.m(r,b),y(r,e,b),y(r,n,b),m(n,i),m(i,o),m(i,s),m(i,a),sn.m(a,null),m(n,l),m(n,c),an&&an.m(c,null),m(c,u),m(c,d),m(d,h),m(d,f),m(d,p),un.m(p,null),m(c,g),m(c,x),m(x,w),m(w,C),m(C,S),m(C,E),m(C,L),m(C,O),P(O,t[22]),m(x,R),m(x,B),m(B,j),m(j,$),m(j,I),m(j,z),m(j,F),P(F,t[23]),m(B,N),m(B,W),m(x,H),m(x,V),m(V,q),m(q,U),U.checked=t[24],m(q,K),m(q,Y),m(Y,Q),m(Y,J),m(Y,X),m(X,G),m(X,Z),m(X,tt),m(Y,et),dn&&dn.m(Y,null),m(c,nt),hn&&hn.m(c,null),m(c,rt),fn&&fn.m(c,null),m(c,it),mn&&mn.m(c,null),y(r,ot,b),y(r,st,b),m(st,at),m(at,lt),m(at,ct),m(at,ut),xn.m(ut,null),m(st,dt),m(st,ht),m(ht,ft),m(ht,pt),vn&&vn.m(ht,null),m(ht,gt),_n&&_n.m(ht,null),y(r,mt,b),y(r,yt,b),m(yt,bt),m(bt,xt),m(xt,vt),m(vt,wt),Cn&&Cn.m(vt,null),m(xt,kt),m(xt,_t),m(bt,Ct),Mn&&Mn.m(bt,null),m(yt,Mt),m(yt,St),Sn&&Sn.m(St,null),m(St,At),An&&An.m(St,null),m(St,Dt),Dn&&Dn.m(St,null),m(St,Tt),En.m(St,null),y(r,Pt,b),y(r,Et,b),m(Et,Lt),m(Lt,Ot),m(Ot,Rt),m(Ot,Bt),m(Ot,jt),Ln&&Ln.m(jt,null),m(jt,$t),m(jt,It),Bn.m(It,null),m(Lt,zt),m(Lt,Ft),m(Ft,Nt),m(Nt,Wt),m(Nt,Ht),m(Nt,Vt),m(Ft,Ut),m(Ft,Kt),m(Kt,Yt),m(Kt,Qt),m(Kt,Jt),m(Et,Gt),m(Et,Zt),In&&In.m(Zt,null),y(r,te,b),y(r,ee,b),m(ee,ne),m(ne,re),m(re,ie),zn&&zn.m(re,null),m(ne,oe),m(ne,se),m(ee,ae),m(ee,le),Wn.m(le,null),y(r,ce,b),y(r,ue,b),m(ue,de),m(de,he),m(he,fe),m(fe,pe),Hn&&Hn.m(fe,null),m(he,ge),m(he,me),m(de,ye),Vn&&Vn.m(de,null),m(ue,be),m(ue,xe),Kn.m(xe,null),y(r,ve,b),y(r,we,b),m(we,ke),m(we,_e),m(we,Ce),m(Ce,Me),m(Me,Se),m(Se,Ae),m(Se,De),m(Se,Te),m(Se,Pe),m(Se,Ee),Jn.m(Ee,null),m(Me,Le),m(Me,Oe),m(Oe,Re),m(Oe,Be),m(Oe,je),m(Oe,$e),m(Oe,Ie),m(Ie,ze),m(Ie,Fe),m(Ie,Ne),m(Oe,We),Xn&&Xn.m(Oe,null),m(Ce,He),m(Ce,Ve),m(Ve,qe),m(qe,Ue),m(qe,Ke),m(qe,Ye),m(Ve,Qe),m(Ve,Je),m(Ve,Xe),tr.m(Ve,null),Ge||(Ze=[M(a,"click",t[73]),M(O,"input",t[140]),M(F,"input",t[141]),M(U,"change",t[142]),M(ut,"click",t[74]),M(It,"click",t[146]),M(Nt,"click",t[147]),M(Kt,"click",t[148]),M(Ee,"click",t[104]),M(Ne,"change",t[106]),M(Ye,"click",t[107])],Ge=!0)},p(t,n){t[15]?nn?nn.p(t,n):(nn=wg(t),nn.c(),nn.m(e.parentNode,e)):nn&&(nn.d(1),nn=null),on===(on=rn(t))&&sn?sn.p(t,n):(sn.d(1),sn=on(t),sn&&(sn.c(),sn.m(a,null))),262144&n[0]&&(a.disabled=t[18]),t[17]?an?an.p(t,n):(an=Cg(t),an.c(),an.m(c,u)):an&&(an.d(1),an=null),cn===(cn=ln(t))&&un?un.p(t,n):(un.d(1),un=cn(t),un&&(un.c(),un.m(p,null))),262144&n[0]&&(O.disabled=t[18]),4194304&n[0]&&D(O.value)!==t[22]&&P(O,t[22]),262144&n[0]&&(F.disabled=t[18]),8388608&n[0]&&D(F.value)!==t[23]&&P(F,t[23]),262144&n[0]&&(U.disabled=t[18]),16777216&n[0]&&(U.checked=t[24]),4194304&n[0]&&T(Z,t[22]),t[24]?dn||(dn=Dg(),dn.c(),dn.m(Y,null)):dn&&(dn.d(1),dn=null),t[20]&&t[18]?hn?hn.p(t,n):(hn=Tg(t),hn.c(),hn.m(c,rt)):hn&&(hn.d(1),hn=null),t[19]?fn?fn.p(t,n):(fn=Eg(t),fn.c(),fn.m(c,it)):fn&&(fn.d(1),fn=null),gn===(gn=pn(t))&&mn?mn.p(t,n):(mn&&mn.d(1),mn=gn&&gn(t),mn&&(mn.c(),mn.m(c,null))),bn!==(bn=yn(t))&&(xn.d(1),xn=bn(t),xn&&(xn.c(),xn.m(ut,null))),33554432&n[0]&&(ut.disabled=t[25]),t[25]&&t[26]?vn?vn.p(t,n):(vn=Ng(t),vn.c(),vn.m(ht,gt)):vn&&(vn.d(1),vn=null),kn===(kn=wn(t))&&_n?_n.p(t,n):(_n&&_n.d(1),_n=kn&&kn(t),_n&&(_n.c(),_n.m(ht,null))),t[14]?Cn&&(Cn.d(1),Cn=null):Cn?Cn.p(t,n):(Cn=Yg(t),Cn.c(),Cn.m(vt,null)),t[13].length>0?Mn?Mn.p(t,n):(Mn=Qg(t),Mn.c(),Mn.m(bt,null)):Mn&&(Mn.d(1),Mn=null),t[13].length>0&&!t[52]?Sn?Sn.p(t,n):(Sn=tm(t),Sn.c(),Sn.m(St,At)):Sn&&(Sn.d(1),Sn=null),t[52]&&t[53]?An?An.p(t,n):(An=em(t),An.c(),An.m(St,Dt)):An&&(An.d(1),An=null),t[54]&&!t[52]?Dn?Dn.p(t,n):(Dn=rm(t),Dn.c(),Dn.m(St,Tt)):Dn&&(Dn.d(1),Dn=null),Pn===(Pn=Tn(t))&&En?En.p(t,n):(En.d(1),En=Pn(t),En&&(En.c(),En.m(St,null))),t[40]?.fromCache?Ln?Ln.p(t,n):(Ln=wm(t),Ln.c(),Ln.m(jt,$t)):Ln&&(Ln.d(1),Ln=null),Rn!==(Rn=On(t))&&(Bn.d(1),Bn=Rn(t),Bn&&(Bn.c(),Bn.m(It,null))),4&n[1]&&(It.disabled=t[33]),2048&n[0]&&tn!==(tn=t[11].length+"")&&T(Ht,tn),1024&n[1]&&qt!==(qt="pb-2 text-sm font-medium border-b-2 transition-colors "+("duplicates"===t[41]?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"))&&A(Nt,"class",qt),256&n[1]&&en!==(en=(t[39]?t[39].total:0)+"")&&T(Qt,en),1024&n[1]&&Xt!==(Xt="pb-2 text-sm font-medium border-b-2 transition-colors "+("similar"===t[41]?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"))&&A(Kt,"class",Xt),$n===($n=jn(t))&&In?In.p(t,n):(In&&In.d(1),In=$n&&$n(t),In&&(In.c(),In.m(Zt,null))),t[43]?zn?zn.p(t,n):(zn=Hm(t),zn.c(),zn.m(re,null)):zn&&(zn.d(1),zn=null),Nn===(Nn=Fn(t))&&Wn?Wn.p(t,n):(Wn.d(1),Wn=Nn(t),Wn&&(Wn.c(),Wn.m(le,null))),t[30]?Hn&&(Hn.d(1),Hn=null):Hn?Hn.p(t,n):(Hn=ly(t),Hn.c(),Hn.m(fe,null)),t[12].length>0?Vn?Vn.p(t,n):(Vn=cy(t),Vn.c(),Vn.m(de,null)):Vn&&(Vn.d(1),Vn=null),Un===(Un=qn(t))&&Kn?Kn.p(t,n):(Kn.d(1),Kn=Un(t),Kn&&(Kn.c(),Kn.m(xe,null))),Qn!==(Qn=Yn(t))&&(Jn.d(1),Jn=Qn(t),Jn&&(Jn.c(),Jn.m(Ee,null))),32768&n[1]&&(Ee.disabled=t[46]),t[49]?Xn?Xn.p(t,n):(Xn=my(t),Xn.c(),Xn.m(Oe,null)):Xn&&(Xn.d(1),Xn=null),Zn===(Zn=Gn(t))&&tr?tr.p(t,n):(tr.d(1),tr=Zn(t),tr&&(tr.c(),tr.m(Ve,null)))},d(t){t&&(b(e),b(n),b(ot),b(st),b(mt),b(yt),b(Pt),b(Et),b(te),b(ee),b(ce),b(ue),b(ve),b(we)),nn&&nn.d(t),sn.d(),an&&an.d(),un.d(),dn&&dn.d(),hn&&hn.d(),fn&&fn.d(),mn&&mn.d(),xn.d(),vn&&vn.d(),_n&&_n.d(),Cn&&Cn.d(),Mn&&Mn.d(),Sn&&Sn.d(),An&&An.d(),Dn&&Dn.d(),En.d(),Ln&&Ln.d(),Bn.d(),In&&In.d(),zn&&zn.d(),Wn.d(),Hn&&Hn.d(),Vn&&Vn.d(),Kn.d(),Jn.d(),Xn&&Xn.d(),tr.d(),Ge=!1,r(Ze)}}}function vg(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',A(n,"class","flex items-center justify-center h-64")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function wg(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,M,S,D,P,E,L,O,R,B,j,$,I,z,F,N,W,H,V,q=t[15].total+"",U=t[15].duplicateGroups+"",K=t[15].deadLinks+"",Y=t[15].uniqueDomains+"",Q=t[15].addedThisWeek+"",J=t[15].addedThisMonth+"";return{c(){e=v("div"),n=v("div"),r=v("div"),i=k(q),o=_(),s=v("div"),s.textContent="Total Bookmarks",a=_(),l=v("div"),c=v("div"),u=k(U),d=_(),h=v("div"),h.textContent="Duplicate Groups",f=_(),p=v("div"),g=v("div"),x=k(K),w=_(),C=v("div"),C.textContent="Dead Links",M=_(),S=v("div"),D=v("div"),P=k(Y),E=_(),L=v("div"),L.textContent="Unique Domains",O=_(),R=v("div"),B=v("div"),j=k(Q),$=_(),I=v("div"),I.textContent="Added This Week",z=_(),F=v("div"),N=v("div"),W=k(J),H=_(),V=v("div"),V.textContent="Added This Month",A(r,"class","text-2xl font-bold text-blue-600"),A(s,"class","text-xs text-gray-500"),A(n,"class","bg-white p-4 rounded-lg shadow text-center"),A(c,"class","text-2xl font-bold text-red-600"),A(h,"class","text-xs text-gray-500"),A(l,"class","bg-white p-4 rounded-lg shadow text-center"),A(g,"class","text-2xl font-bold text-orange-600"),A(C,"class","text-xs text-gray-500"),A(p,"class","bg-white p-4 rounded-lg shadow text-center"),A(D,"class","text-2xl font-bold text-purple-600"),A(L,"class","text-xs text-gray-500"),A(S,"class","bg-white p-4 rounded-lg shadow text-center"),A(B,"class","text-2xl font-bold text-green-600"),A(I,"class","text-xs text-gray-500"),A(R,"class","bg-white p-4 rounded-lg shadow text-center"),A(N,"class","text-2xl font-bold text-cyan-600"),A(V,"class","text-xs text-gray-500"),A(F,"class","bg-white p-4 rounded-lg shadow text-center"),A(e,"class","grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(n,o),m(n,s),m(e,a),m(e,l),m(l,c),m(c,u),m(l,d),m(l,h),m(e,f),m(e,p),m(p,g),m(g,x),m(p,w),m(p,C),m(e,M),m(e,S),m(S,D),m(D,P),m(S,E),m(S,L),m(e,O),m(e,R),m(R,B),m(B,j),m(R,$),m(R,I),m(e,z),m(e,F),m(F,N),m(N,W),m(F,H),m(F,V)},p(t,e){32768&e[0]&&q!==(q=t[15].total+"")&&T(i,q),32768&e[0]&&U!==(U=t[15].duplicateGroups+"")&&T(u,U),32768&e[0]&&K!==(K=t[15].deadLinks+"")&&T(x,K),32768&e[0]&&Y!==(Y=t[15].uniqueDomains+"")&&T(P,Y),32768&e[0]&&Q!==(Q=t[15].addedThisWeek+"")&&T(j,Q),32768&e[0]&&J!==(J=t[15].addedThisMonth+"")&&T(W,J)},d(t){t&&b(e)}}}function kg(t){let e,n=t[24]?`Re-enrich ${t[22]} Bookmarks`:`Enrich Next ${t[22]} Pending`;return{c(){e=k(n)},m(t,n){y(t,e,n)},p(t,r){20971520&r[0]&&n!==(n=t[24]?`Re-enrich ${t[22]} Bookmarks`:`Enrich Next ${t[22]} Pending`)&&T(e,n)},d(t){t&&b(e)}}}function _g(e){let n;return{c(){n=v("span"),n.innerHTML='<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n                    Enriching...',A(n,"class","flex items-center")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Cg(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,M,S,D,P,E,L,O,R,B,j,$,I=(t[17].pendingCount||t[17].queueSize||0)+"",z=(t[17].enrichedCount||0)+"",F=(t[17].totalBookmarks||0)+"",N=t[17].enabled?"":"",W=t[17].enabled?"System Enabled":"System Disabled",H=t[17].pendingCount>0&&t[17].totalBookmarks>0&&Mg(t);return{c(){e=v("div"),n=v("div"),r=v("div"),i=v("div"),o=k(I),s=_(),a=v("div"),a.textContent="Pending Enrichment",l=_(),c=v("div"),u=v("div"),d=k(z),h=_(),f=v("div"),f.textContent="Successfully Enriched",p=_(),g=v("div"),x=v("div"),w=k(F),C=_(),M=v("div"),M.textContent="Total HTTP Bookmarks",S=_(),D=v("div"),P=v("div"),E=k(N),O=_(),R=v("div"),B=k(W),$=_(),H&&H.c(),A(i,"class","text-xl font-bold text-purple-700"),A(a,"class","text-xs text-purple-600"),A(r,"class","text-center"),A(u,"class","text-xl font-bold text-green-700"),A(f,"class","text-xs text-green-600"),A(c,"class","text-center"),A(x,"class","text-xl font-bold text-blue-700"),A(M,"class","text-xs text-blue-600"),A(g,"class","text-center"),A(P,"class",L="text-xl font-bold "+(t[17].enabled?"text-green-700":"text-gray-500")),A(R,"class",j="text-xs "+(t[17].enabled?"text-green-600":"text-gray-500")),A(D,"class","text-center"),A(n,"class","grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"),A(e,"class","mb-4 p-4 bg-purple-50 rounded-lg border border-purple-200")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(i,o),m(r,s),m(r,a),m(n,l),m(n,c),m(c,u),m(u,d),m(c,h),m(c,f),m(n,p),m(n,g),m(g,x),m(x,w),m(g,C),m(g,M),m(n,S),m(n,D),m(D,P),m(P,E),m(D,O),m(D,R),m(R,B),m(e,$),H&&H.m(e,null)},p(t,n){131072&n[0]&&I!==(I=(t[17].pendingCount||t[17].queueSize||0)+"")&&T(o,I),131072&n[0]&&z!==(z=(t[17].enrichedCount||0)+"")&&T(d,z),131072&n[0]&&F!==(F=(t[17].totalBookmarks||0)+"")&&T(w,F),131072&n[0]&&N!==(N=t[17].enabled?"":"")&&T(E,N),131072&n[0]&&L!==(L="text-xl font-bold "+(t[17].enabled?"text-green-700":"text-gray-500"))&&A(P,"class",L),131072&n[0]&&W!==(W=t[17].enabled?"System Enabled":"System Disabled")&&T(B,W),131072&n[0]&&j!==(j="text-xs "+(t[17].enabled?"text-green-600":"text-gray-500"))&&A(R,"class",j),t[17].pendingCount>0&&t[17].totalBookmarks>0?H?H.p(t,n):(H=Mg(t),H.c(),H.m(e,null)):H&&(H.d(1),H=null)},d(t){t&&b(e),H&&H.d()}}}function Mg(t){let e,n,r,i,o,s,a,l,c,u,d=(t[17].enrichedCount/t[17].totalBookmarks*100).toFixed(1)+"";return{c(){e=v("div"),n=v("div"),r=v("span"),r.textContent="Overall Coverage",i=_(),o=v("span"),s=k(d),a=k("%"),l=_(),c=v("div"),u=v("div"),A(n,"class","flex justify-between text-xs text-purple-600 mb-1"),A(u,"class","bg-purple-600 h-2 rounded-full transition-all duration-300"),E(u,"width",t[17].enrichedCount/t[17].totalBookmarks*100+"%"),A(c,"class","w-full bg-purple-200 rounded-full h-2"),A(e,"class","mt-3")},m(t,d){y(t,e,d),m(e,n),m(n,r),m(n,i),m(n,o),m(o,s),m(o,a),m(e,l),m(e,c),m(c,u)},p(t,e){131072&e[0]&&d!==(d=(t[17].enrichedCount/t[17].totalBookmarks*100).toFixed(1)+"")&&T(s,d),131072&e[0]&&E(u,"width",t[17].enrichedCount/t[17].totalBookmarks*100+"%")},d(t){t&&b(e)}}}function Sg(t){let e,n,r,i,o,s,a,l,c;return{c(){e=v("li"),n=v("strong"),n.textContent="Standard Mode:",r=k(" Will process the next "),i=k(t[22]),o=k(" bookmarks that have "),s=v("strong"),s.textContent="never",a=k(" been enriched."),l=_(),c=v("li"),c.textContent="Already enriched bookmarks are skipped to save resources."},m(t,u){y(t,e,u),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),m(e,a),y(t,l,u),y(t,c,u)},p(t,e){4194304&e[0]&&T(i,t[22])},d(t){t&&(b(e),b(l),b(c))}}}function Ag(t){let e,n,r,i,o,s,a;return{c(){e=v("li"),n=v("strong"),n.textContent="Force Mode:",r=k(" Will re-download metadata for "),i=k(t[22]),o=k(" bookmarks, starting with unenriched ones, then oldest checked."),s=_(),a=v("li"),a.textContent="Use this to refresh data or fix broken metadata."},m(t,l){y(t,e,l),m(e,n),m(e,r),m(e,i),m(e,o),y(t,s,l),y(t,a,l)},p(t,e){4194304&e[0]&&T(i,t[22])},d(t){t&&(b(e),b(s),b(a))}}}function Dg(t){let e;return{c(){e=v("p"),e.textContent=" Will process unenriched bookmarks first, then oldest enriched",A(e,"class","text-xs text-purple-600 mt-1 font-medium")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Tg(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g=(t[20].completed||t[20].current)+"",x=t[20].total+"",w=t[20].title&&Pg(t);return{c(){e=v("div"),n=v("div"),r=v("div"),i=v("span"),i.textContent="Processing...",o=_(),s=v("span"),a=k(g),l=k(" / "),c=k(x),u=k(" completed"),d=_(),h=v("div"),f=v("div"),p=_(),w&&w.c(),A(i,"class","text-sm font-medium text-blue-900"),A(s,"class","text-sm text-blue-700"),A(r,"class","flex justify-between items-center mb-2"),A(f,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),E(f,"width",(t[20].completed||t[20].current)/t[20].total*100+"%"),A(h,"class","w-full bg-blue-200 rounded-full h-2"),A(n,"class","mb-3"),A(e,"class","mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg")},m(t,g){y(t,e,g),m(e,n),m(n,r),m(r,i),m(r,o),m(r,s),m(s,a),m(s,l),m(s,c),m(s,u),m(n,d),m(n,h),m(h,f),m(e,p),w&&w.m(e,null)},p(t,n){1048576&n[0]&&g!==(g=(t[20].completed||t[20].current)+"")&&T(a,g),1048576&n[0]&&x!==(x=t[20].total+"")&&T(c,x),1048576&n[0]&&E(f,"width",(t[20].completed||t[20].current)/t[20].total*100+"%"),t[20].title?w?w.p(t,n):(w=Pg(t),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},d(t){t&&b(e),w&&w.d()}}}function Pg(t){let e,n,r,i,o,s,a,l,c,u="processing"===t[20].status?"":"completed"===t[20].status?"":"",d=t[20].title+"",h=t[20].url+"";return{c(){e=v("div"),n=v("div"),r=k(u),i=_(),o=k(d),a=_(),l=v("div"),c=k(h),A(n,"class","font-medium truncate"),A(n,"title",s=t[20].url),A(l,"class","text-blue-600 truncate text-[10px]"),A(e,"class","text-xs text-blue-800 space-y-1")},m(t,s){y(t,e,s),m(e,n),m(n,r),m(n,i),m(n,o),m(e,a),m(e,l),m(l,c)},p(t,e){1048576&e[0]&&u!==(u="processing"===t[20].status?"":"completed"===t[20].status?"":"")&&T(r,u),1048576&e[0]&&d!==(d=t[20].title+"")&&T(o,d),1048576&e[0]&&s!==(s=t[20].url)&&A(n,"title",s),1048576&e[0]&&h!==(h=t[20].url+"")&&T(c,h)},d(t){t&&b(e)}}}function Eg(t){let e,n;function r(t,e){return t[19].error?Og:Lg}let i=r(t),o=i(t);return{c(){e=v("div"),o.c(),A(e,"class",n="mt-4 p-4 rounded-lg "+(t[19].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))},m(t,n){y(t,e,n),o.m(e,null)},p(t,s){i===(i=r(t))&&o?o.p(t,s):(o.d(1),o=i(t),o&&(o.c(),o.m(e,null))),524288&s[0]&&n!==(n="mt-4 p-4 rounded-lg "+(t[19].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))&&A(e,"class",n)},d(t){t&&b(e),o.d()}}}function Lg(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p=(t[19].processed||0)+"",g=(t[19].success||0)+"",x=t[19].failed>0&&Rg(t),w=t[19].skipped>0&&Bg(t);return{c(){e=v("div"),n=v("div"),n.innerHTML="<strong>Enrichment Complete!</strong>",r=_(),i=v("div"),o=k("Processed: "),s=k(p),a=k(" bookmarks"),l=_(),c=v("div"),u=k("Successful: "),d=k(g),h=_(),x&&x.c(),f=_(),w&&w.c(),A(e,"class","text-green-700 text-sm space-y-1")},m(t,p){y(t,e,p),m(e,n),m(e,r),m(e,i),m(i,o),m(i,s),m(i,a),m(e,l),m(e,c),m(c,u),m(c,d),m(e,h),x&&x.m(e,null),m(e,f),w&&w.m(e,null)},p(t,n){524288&n[0]&&p!==(p=(t[19].processed||0)+"")&&T(s,p),524288&n[0]&&g!==(g=(t[19].success||0)+"")&&T(d,g),t[19].failed>0?x?x.p(t,n):(x=Rg(t),x.c(),x.m(e,f)):x&&(x.d(1),x=null),t[19].skipped>0?w?w.p(t,n):(w=Bg(t),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},d(t){t&&b(e),x&&x.d(),w&&w.d()}}}function Og(t){let e,n,r,i,o=t[19].error+"";return{c(){e=v("div"),n=v("strong"),n.textContent="Error:",r=_(),i=k(o),A(e,"class","text-red-700 text-sm")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i)},p(t,e){524288&e[0]&&o!==(o=t[19].error+"")&&T(i,o)},d(t){t&&b(e)}}}function Rg(t){let e,n,r,i=t[19].failed+"";return{c(){e=v("div"),n=k("Failed: "),r=k(i),A(e,"class","text-orange-600")},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){524288&e[0]&&i!==(i=t[19].failed+"")&&T(r,i)},d(t){t&&b(e)}}}function Bg(t){let e,n,r,i=t[19].skipped+"";return{c(){e=v("div"),n=k("Skipped (already enriched): "),r=k(i),A(e,"class","text-gray-600")},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){524288&e[0]&&i!==(i=t[19].skipped+"")&&T(r,i)},d(t){t&&b(e)}}}function jg(e){let n;return{c(){n=v("p"),n.textContent='Click "Run Enrichment" to fetch metadata for bookmarks that haven\'t been enriched yet. \n                  Only new bookmarks without descriptions or categories will be processed.',A(n,"class","text-gray-500 text-sm")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function $g(t){let e,n,r,i,o,s,a,l=t[21].length+"",c=it(t[21].slice().reverse()),u=[];for(let e=0;e<c.length;e+=1)u[e]=Ig(og(t,c,e));return{c(){e=v("details"),n=v("summary"),r=k("View Detailed Logs ("),i=k(l),o=k(")"),s=_(),a=v("div");for(let t=0;t<u.length;t+=1)u[t].c();A(n,"class","cursor-pointer text-sm text-gray-600 hover:text-gray-800 font-medium"),A(a,"class","mt-2 max-h-64 overflow-y-auto bg-gray-50 rounded p-3 space-y-1 text-xs font-mono"),A(e,"class","mt-4")},m(t,l){y(t,e,l),m(e,n),m(n,r),m(n,i),m(n,o),m(e,s),m(e,a);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(a,null)},p(t,e){if(2097152&e[0]&&l!==(l=t[21].length+"")&&T(i,l),2097152&e[0]){let n;for(c=it(t[21].slice().reverse()),n=0;n<c.length;n+=1){const r=og(t,c,n);u[n]?u[n].p(r,e):(u[n]=Ig(r),u[n].c(),u[n].m(a,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}},d(t){t&&b(e),x(u,t)}}}function Ig(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x=new Date(t[264].timestamp).toLocaleTimeString()+"",w=t[264].current+"",C=t[264].total+"",M="completed"===t[264].status?"":"failed"===t[264].status||"error"===t[264].status?"":"",S=(t[264].title||t[264].url)+"";return{c(){e=v("div"),n=v("span"),r=k(x),i=k(" \n                        ["),o=k(w),s=k("/"),a=k(C),l=k("] \n                        "),c=k(M),u=_(),d=v("span"),h=k(S),p=_(),A(n,"class","text-gray-400"),A(d,"class","truncate inline-block max-w-md"),A(d,"title",f=t[264].url),A(e,"class",g="completed"===t[264].status?"text-green-700":"failed"===t[264].status||"error"===t[264].status?"text-red-700":"text-gray-600")},m(t,f){y(t,e,f),m(e,n),m(n,r),m(e,i),m(e,o),m(e,s),m(e,a),m(e,l),m(e,c),m(e,u),m(e,d),m(d,h),m(e,p)},p(t,n){2097152&n[0]&&x!==(x=new Date(t[264].timestamp).toLocaleTimeString()+"")&&T(r,x),2097152&n[0]&&w!==(w=t[264].current+"")&&T(o,w),2097152&n[0]&&C!==(C=t[264].total+"")&&T(a,C),2097152&n[0]&&M!==(M="completed"===t[264].status?"":"failed"===t[264].status||"error"===t[264].status?"":"")&&T(c,M),2097152&n[0]&&S!==(S=(t[264].title||t[264].url)+"")&&T(h,S),2097152&n[0]&&f!==(f=t[264].url)&&A(d,"title",f),2097152&n[0]&&g!==(g="completed"===t[264].status?"text-green-700":"failed"===t[264].status||"error"===t[264].status?"text-red-700":"text-gray-600")&&A(e,"class",g)},d(t){t&&b(e)}}}function zg(t){let e;return{c(){e=k("Run Analysis")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Fg(t){let e;return{c(){e=v("span"),e.innerHTML='<svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>\n                    Analyzing...',A(e,"class","flex items-center")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Ng(t){let e,n,r,i,o,s,a,l,c,u,d,h,f=t[26].current+"",p=t[26].total+"",g=t[26].title&&Wg(t);return{c(){e=v("div"),n=v("div"),r=v("span"),r.textContent="Analyzing bookmarks...",i=_(),o=v("span"),s=k(f),a=k(" / "),l=k(p),c=_(),u=v("div"),d=v("div"),h=_(),g&&g.c(),A(n,"class","flex justify-between text-sm text-gray-600 mb-1"),A(d,"class","bg-indigo-600 h-2 rounded-full transition-all duration-300"),E(d,"width",t[26].current/t[26].total*100+"%"),A(u,"class","w-full bg-gray-200 rounded-full h-2 mb-2"),A(e,"class","mb-4")},m(t,f){y(t,e,f),m(e,n),m(n,r),m(n,i),m(n,o),m(o,s),m(o,a),m(o,l),m(e,c),m(e,u),m(u,d),m(e,h),g&&g.m(e,null)},p(t,n){67108864&n[0]&&f!==(f=t[26].current+"")&&T(s,f),67108864&n[0]&&p!==(p=t[26].total+"")&&T(l,p),67108864&n[0]&&E(d,"width",t[26].current/t[26].total*100+"%"),t[26].title?g?g.p(t,n):(g=Wg(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(t){t&&b(e),g&&g.d()}}}function Wg(t){let e,n,r,i,o=t[26].title+"",s=t[26].status&&Hg(t);return{c(){e=v("p"),n=k("Processing: "),r=k(o),i=_(),s&&s.c(),A(e,"class","text-xs text-gray-500 truncate")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i),s&&s.m(e,null)},p(t,n){67108864&n[0]&&o!==(o=t[26].title+"")&&T(r,o),t[26].status?s?s.p(t,n):(s=Hg(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&b(e),s&&s.d()}}}function Hg(t){let e,n,r,i=t[26].status+"";return{c(){e=v("span"),n=k(i),A(e,"class",r="ml-2 px-1.5 py-0.5 rounded text-xs "+("completed"===t[26].status?"bg-green-100 text-green-700":"")+" "+("skipped"===t[26].status?"bg-yellow-100 text-yellow-700":"")+" "+("failed"===t[26].status?"bg-red-100 text-red-700":""))},m(t,r){y(t,e,r),m(e,n)},p(t,o){67108864&o[0]&&i!==(i=t[26].status+"")&&T(n,i),67108864&o[0]&&r!==(r="ml-2 px-1.5 py-0.5 rounded text-xs "+("completed"===t[26].status?"bg-green-100 text-green-700":"")+" "+("skipped"===t[26].status?"bg-yellow-100 text-yellow-700":"")+" "+("failed"===t[26].status?"bg-red-100 text-red-700":""))&&A(e,"class",r)},d(t){t&&b(e)}}}function Vg(e){let n;return{c(){n=v("div"),n.innerHTML='<p class="text-gray-600 text-sm">Click &quot;Run Analysis&quot; to process all bookmarks that have been enriched with metadata.\n                    This will extract additional insights without making any network requests.</p> <div class="mt-3 text-xs text-gray-500 space-y-1"><div> Processes existing metadata only (very fast)</div> <div> Safe to run multiple times (idempotent)</div> <div> Enables future smart filtering features</div></div>',A(n,"class","p-4 bg-gray-50 rounded-lg border border-gray-200")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function qg(t){let e,n;function r(t,e){return t[27].error?Kg:Ug}let i=r(t),o=i(t);return{c(){e=v("div"),o.c(),A(e,"class",n="p-4 rounded-lg "+(t[27].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))},m(t,n){y(t,e,n),o.m(e,null)},p(t,s){i===(i=r(t))&&o?o.p(t,s):(o.d(1),o=i(t),o&&(o.c(),o.m(e,null))),134217728&s[0]&&n!==(n="p-4 rounded-lg "+(t[27].error?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"))&&A(e,"class",n)},d(t){t&&b(e),o.d()}}}function Ug(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,M,S,D,P,E,L,O,R,B,j,$,I=t[27].processed+"",z=t[27].analyzed+"",F=t[27].skipped+"",N=t[27].failed+"";return{c(){e=v("div"),n=v("div"),n.textContent=" Deep Analysis Complete!",r=_(),i=v("div"),o=v("div"),s=v("div"),a=k(I),l=_(),c=v("div"),c.textContent="Processed",u=_(),d=v("div"),h=v("div"),f=k(z),p=_(),g=v("div"),g.textContent="Analyzed",x=_(),w=v("div"),C=v("div"),M=k(F),S=_(),D=v("div"),D.textContent="Skipped",P=_(),E=v("div"),L=v("div"),O=k(N),R=_(),B=v("div"),B.textContent="Failed",j=_(),$=v("p"),$.textContent="Your bookmarks now have enhanced metadata for smarter filtering and insights!",A(n,"class","font-medium"),A(s,"class","text-lg font-bold text-indigo-600"),A(c,"class","text-gray-600"),A(o,"class","text-center p-2 bg-white rounded"),A(h,"class","text-lg font-bold text-green-600"),A(g,"class","text-gray-600"),A(d,"class","text-center p-2 bg-white rounded"),A(C,"class","text-lg font-bold text-yellow-600"),A(D,"class","text-gray-600"),A(w,"class","text-center p-2 bg-white rounded"),A(L,"class","text-lg font-bold text-red-600"),A(B,"class","text-gray-600"),A(E,"class","text-center p-2 bg-white rounded"),A(i,"class","grid grid-cols-2 sm:grid-cols-4 gap-4 text-xs"),A($,"class","text-xs text-green-600 mt-2"),A(e,"class","text-green-700 text-sm space-y-2")},m(t,b){y(t,e,b),m(e,n),m(e,r),m(e,i),m(i,o),m(o,s),m(s,a),m(o,l),m(o,c),m(i,u),m(i,d),m(d,h),m(h,f),m(d,p),m(d,g),m(i,x),m(i,w),m(w,C),m(C,M),m(w,S),m(w,D),m(i,P),m(i,E),m(E,L),m(L,O),m(E,R),m(E,B),m(e,j),m(e,$)},p(t,e){134217728&e[0]&&I!==(I=t[27].processed+"")&&T(a,I),134217728&e[0]&&z!==(z=t[27].analyzed+"")&&T(f,z),134217728&e[0]&&F!==(F=t[27].skipped+"")&&T(M,F),134217728&e[0]&&N!==(N=t[27].failed+"")&&T(O,N)},d(t){t&&b(e)}}}function Kg(t){let e,n,r,i,o=t[27].error+"";return{c(){e=v("div"),n=v("strong"),n.textContent="Error:",r=_(),i=k(o),A(e,"class","text-red-700 text-sm")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i)},p(t,e){134217728&e[0]&&o!==(o=t[27].error+"")&&T(i,o)},d(t){t&&b(e)}}}function Yg(t){let e,n,r,i=t[13].length+"";return{c(){e=k("("),n=k(i),r=k(")")},m(t,i){y(t,e,i),y(t,n,i),y(t,r,i)},p(t,e){8192&e[0]&&i!==(i=t[13].length+"")&&T(n,i)},d(t){t&&(b(e),b(n),b(r))}}}function Qg(t){let e,n,i,o,s,a,l,c;function u(t,e){return t[52]?Xg:Jg}let d=u(t),h=d(t);function f(t,e){return t[31]?Zg:Gg}let p=f(t),g=p(t);return{c(){e=v("div"),n=v("button"),h.c(),o=_(),s=v("button"),g.c(),n.disabled=i=t[52]||t[31],A(n,"class","px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),A(n,"title","Re-check dead links to see if they're alive again"),s.disabled=a=t[31]||t[52],A(s,"class","px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"),A(e,"class","flex gap-2 flex-shrink-0")},m(r,i){y(r,e,i),m(e,n),h.m(n,null),m(e,o),m(e,s),g.m(s,null),l||(c=[M(n,"click",t[80]),M(s,"click",t[79])],l=!0)},p(t,e){d!==(d=u(t))&&(h.d(1),h=d(t),h&&(h.c(),h.m(n,null))),2097153&e[1]&&i!==(i=t[52]||t[31])&&(n.disabled=i),p!==(p=f(t))&&(g.d(1),g=p(t),g&&(g.c(),g.m(s,null))),2097153&e[1]&&a!==(a=t[31]||t[52])&&(s.disabled=a)},d(t){t&&b(e),h.d(),g.d(),l=!1,r(c)}}}function Jg(t){let e;return{c(){e=k(" Re-check")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Xg(t){let e,n;return{c(){e=v("div"),n=k("\n                      Re-checking..."),A(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,r){y(t,e,r),y(t,n,r)},d(t){t&&(b(e),b(n))}}}function Gg(t){let e;return{c(){e=k(" Delete All")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Zg(t){let e,n;return{c(){e=v("div"),n=k("\n                      Deleting..."),A(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,r){y(t,e,r),y(t,n,r)},d(t){t&&(b(e),b(n))}}}function tm(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,E,L,O,R,B,j,$,I=(t[55]>0&&t[55]<t[13].length?t[55]:t[13].length)+"",z=t[13].length+"";return{c(){e=v("div"),n=v("h4"),n.textContent="Re-check Configuration",i=_(),o=v("div"),s=v("div"),a=v("label"),a.innerHTML='Batch Size\n                        <span class="text-xs text-gray-500 font-normal">(0 = all)</span>',l=_(),c=v("input"),d=_(),h=v("p"),f=k("Will process "),p=k(I),g=k(" of "),x=k(z),w=k(" dead links"),C=_(),S=v("div"),E=v("label"),E.innerHTML='Concurrency\n                        <span class="text-xs text-gray-500 font-normal">(parallel requests)</span>',L=_(),O=v("input"),R=_(),B=v("p"),B.textContent="Higher = faster, but more resource intensive",A(n,"class","text-sm font-medium text-gray-700 mb-3"),A(a,"for","deadLinkBatchSize"),A(a,"class","block text-sm font-medium text-gray-700 mb-1"),A(c,"id","deadLinkBatchSize"),A(c,"type","number"),A(c,"min","0"),A(c,"max",u=t[13].length),A(c,"class","w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),c.disabled=t[52],A(h,"class","text-xs text-gray-500 mt-1"),A(E,"for","deadLinkConcurrency"),A(E,"class","block text-sm font-medium text-gray-700 mb-1"),A(O,"id","deadLinkConcurrency"),A(O,"type","number"),A(O,"min","1"),A(O,"max","10"),A(O,"class","w-full px-3 py-2 border border-gray-300 rounded-md text-sm"),O.disabled=t[52],A(B,"class","text-xs text-gray-500 mt-1"),A(o,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),A(e,"class","mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200")},m(r,u){y(r,e,u),m(e,n),m(e,i),m(e,o),m(o,s),m(s,a),m(s,l),m(s,c),P(c,t[55]),m(s,d),m(s,h),m(h,f),m(h,p),m(h,g),m(h,x),m(h,w),m(o,C),m(o,S),m(S,E),m(S,L),m(S,O),P(O,t[56]),m(S,R),m(S,B),j||($=[M(c,"input",t[143]),M(O,"input",t[144])],j=!0)},p(t,e){8192&e[0]&&u!==(u=t[13].length)&&A(c,"max",u),2097152&e[1]&&(c.disabled=t[52]),16777216&e[1]&&D(c.value)!==t[55]&&P(c,t[55]),8192&e[0]|16777216&e[1]&&I!==(I=(t[55]>0&&t[55]<t[13].length?t[55]:t[13].length)+"")&&T(p,I),8192&e[0]&&z!==(z=t[13].length+"")&&T(x,z),2097152&e[1]&&(O.disabled=t[52]),33554432&e[1]&&D(O.value)!==t[56]&&P(O,t[56])},d(t){t&&b(e),j=!1,r($)}}}function em(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C=t[53].current+"",M=t[53].total+"",S=(t[53].title||t[53].url)+"",D=t[53].results&&nm(t);return{c(){e=v("div"),n=v("div"),r=v("span"),r.textContent="Re-checking dead links...",i=_(),o=v("span"),s=k(C),a=k("/"),l=k(M),c=_(),u=v("div"),d=v("div"),h=_(),f=v("div"),p=v("p"),g=k("Checking: "),x=k(S),w=_(),D&&D.c(),A(r,"class","text-sm font-medium text-blue-800"),A(o,"class","text-sm text-blue-600"),A(n,"class","flex items-center justify-between mb-2"),A(d,"class","bg-blue-600 h-2 rounded-full transition-all duration-300"),E(d,"width",t[53].current/t[53].total*100+"%"),A(u,"class","w-full bg-blue-200 rounded-full h-2 mb-2"),A(p,"class","text-xs text-blue-600 truncate flex-1"),A(f,"class","flex items-center justify-between"),A(e,"class","mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(n,i),m(n,o),m(o,s),m(o,a),m(o,l),m(e,c),m(e,u),m(u,d),m(e,h),m(e,f),m(f,p),m(p,g),m(p,x),m(f,w),D&&D.m(f,null)},p(t,e){4194304&e[1]&&C!==(C=t[53].current+"")&&T(s,C),4194304&e[1]&&M!==(M=t[53].total+"")&&T(l,M),4194304&e[1]&&E(d,"width",t[53].current/t[53].total*100+"%"),4194304&e[1]&&S!==(S=(t[53].title||t[53].url)+"")&&T(x,S),t[53].results?D?D.p(t,e):(D=nm(t),D.c(),D.m(f,null)):D&&(D.d(1),D=null)},d(t){t&&b(e),D&&D.d()}}}function nm(t){let e,n,r,i,o,s,a,l,c=t[53].results.success+"",u=t[53].results.stillDead+"";return{c(){e=v("div"),n=v("span"),r=k(" "),i=k(c),o=_(),s=v("span"),a=k(" "),l=k(u),A(n,"class","text-green-600"),A(s,"class","text-red-600"),A(e,"class","flex gap-2 text-xs text-blue-600 ml-2")},m(t,c){y(t,e,c),m(e,n),m(n,r),m(n,i),m(e,o),m(e,s),m(s,a),m(s,l)},p(t,e){4194304&e[1]&&c!==(c=t[53].results.success+"")&&T(i,c),4194304&e[1]&&u!==(u=t[53].results.stillDead+"")&&T(l,u)},d(t){t&&b(e)}}}function rm(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,M,S,D,P,E,L,O,R,B,j,$=t[54].total+"",I=t[54].success+"",z=t[54].stillDead+"",F=t[54].errors+"",N=t[54].pending>0&&im(t);return{c(){e=v("div"),n=v("h4"),n.textContent="Re-check Complete",r=_(),i=v("div"),o=v("div"),s=v("div"),a=k($),l=_(),c=v("div"),c.textContent="Checked",u=_(),d=v("div"),h=v("div"),f=k(I),p=_(),g=v("div"),g.textContent="Now Alive",x=_(),w=v("div"),C=v("div"),M=k(z),S=_(),D=v("div"),D.textContent="Still Dead",P=_(),E=v("div"),L=v("div"),O=k(F),R=_(),B=v("div"),B.textContent="Errors",j=_(),N&&N.c(),A(n,"class","text-sm font-semibold text-green-800 mb-2"),A(s,"class","text-lg font-bold text-green-700"),A(c,"class","text-xs text-green-600"),A(o,"class","text-center"),A(h,"class","text-lg font-bold text-green-700"),A(g,"class","text-xs text-green-600"),A(d,"class","text-center"),A(C,"class","text-lg font-bold text-red-700"),A(D,"class","text-xs text-red-600"),A(w,"class","text-center"),A(L,"class","text-lg font-bold text-yellow-700"),A(B,"class","text-xs text-yellow-600"),A(E,"class","text-center"),A(i,"class","grid grid-cols-2 md:grid-cols-5 gap-4 text-sm"),A(e,"class","mb-4 p-4 bg-green-50 rounded-lg border border-green-200")},m(t,b){y(t,e,b),m(e,n),m(e,r),m(e,i),m(i,o),m(o,s),m(s,a),m(o,l),m(o,c),m(i,u),m(i,d),m(d,h),m(h,f),m(d,p),m(d,g),m(i,x),m(i,w),m(w,C),m(C,M),m(w,S),m(w,D),m(i,P),m(i,E),m(E,L),m(L,O),m(E,R),m(E,B),m(i,j),N&&N.m(i,null)},p(t,e){8388608&e[1]&&$!==($=t[54].total+"")&&T(a,$),8388608&e[1]&&I!==(I=t[54].success+"")&&T(f,I),8388608&e[1]&&z!==(z=t[54].stillDead+"")&&T(M,z),8388608&e[1]&&F!==(F=t[54].errors+"")&&T(O,F),t[54].pending>0?N?N.p(t,e):(N=im(t),N.c(),N.m(i,null)):N&&(N.d(1),N=null)},d(t){t&&b(e),N&&N.d()}}}function im(t){let e,n,r,i,o,s=t[54].pending+"";return{c(){e=v("div"),n=v("div"),r=k(s),i=_(),o=v("div"),o.textContent="Remaining",A(n,"class","text-lg font-bold text-blue-700"),A(o,"class","text-xs text-blue-600"),A(e,"class","text-center")},m(t,s){y(t,e,s),m(e,n),m(n,r),m(e,i),m(e,o)},p(t,e){8388608&e[1]&&s!==(s=t[54].pending+"")&&T(r,s)},d(t){t&&b(e)}}}function om(t){let e,n,r,i,o=t[28]&&t[28].total>0&&lm(t),s=it(t[13].slice(0,t[36])),a=[];for(let e=0;e<s.length;e+=1)a[e]=xm(ng(t,s,e));let l=t[13].length>t[36]&&vm(t);return{c(){o&&o.c(),e=_(),n=v("div");for(let t=0;t<a.length;t+=1)a[t].c();r=_(),l&&l.c(),i=C(),A(n,"class","space-y-2 max-h-[32rem] overflow-y-auto")},m(t,s){o&&o.m(t,s),y(t,e,s),y(t,n,s);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(n,null);y(t,r,s),l&&l.m(t,s),y(t,i,s)},p(t,r){if(t[28]&&t[28].total>0?o?o.p(t,r):(o=lm(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),8192&r[0]|32&r[1]|65536&r[2]){let e;for(s=it(t[13].slice(0,t[36])),e=0;e<s.length;e+=1){const i=ng(t,s,e);a[e]?a[e].p(i,r):(a[e]=xm(i),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=s.length}t[13].length>t[36]?l?l.p(t,r):(l=vm(t),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){t&&(b(e),b(n),b(r),b(i)),o&&o.d(t),x(a,t),l&&l.d(t)}}}function sm(e){let n;return{c(){n=v("p"),n.textContent="No dead links detected. Run enrichment to check bookmark availability.",A(n,"class","text-gray-500")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function am(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"></div> <span class="ml-3 text-gray-500">Loading dead links...</span>',A(n,"class","flex items-center justify-center py-8")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function lm(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,M,S,D,P,E,L,O,R,B,j,$,I,z,F,N,W,H,V,q,U,K=t[28].total+"",Y=t[28].deadLinkRate+"",Q=t[28].checkedCount+"",J=t[28].byDomain.length+"",X=t[28].byAge.recent>0&&cm(t),G=t[28].byAge.moderate>0&&um(t),Z=t[28].byAge.old>0&&dm(t),tt=t[28].byAge.ancient>0&&hm(t),et=t[28].byDomain.length>0&&fm(t),nt=t[28].byCategory.length>0&&gm(t);return{c(){e=v("div"),n=v("h4"),n.textContent=" Dead Link Insights",r=_(),i=v("div"),o=v("div"),s=v("div"),a=k(K),l=_(),c=v("div"),c.textContent="Total Dead",u=_(),d=v("div"),h=v("div"),f=k(Y),p=k("%"),g=_(),x=v("div"),x.textContent="Dead Link Rate",w=_(),C=v("div"),M=v("div"),S=k(Q),D=_(),P=v("div"),P.textContent="Total Checked",E=_(),L=v("div"),O=v("div"),R=k(J),B=_(),j=v("div"),j.textContent="Affected Domains",$=_(),I=v("div"),z=v("h5"),z.textContent="By Bookmark Age",F=_(),N=v("div"),X&&X.c(),W=_(),G&&G.c(),H=_(),Z&&Z.c(),V=_(),tt&&tt.c(),q=_(),et&&et.c(),U=_(),nt&&nt.c(),A(n,"class","text-sm font-semibold text-red-800 mb-3"),A(s,"class","text-2xl font-bold text-red-700"),A(c,"class","text-xs text-red-600"),A(o,"class","text-center"),A(h,"class","text-2xl font-bold text-red-700"),A(x,"class","text-xs text-red-600"),A(d,"class","text-center"),A(M,"class","text-2xl font-bold text-red-700"),A(P,"class","text-xs text-red-600"),A(C,"class","text-center"),A(O,"class","text-2xl font-bold text-red-700"),A(j,"class","text-xs text-red-600"),A(L,"class","text-center"),A(i,"class","grid grid-cols-2 md:grid-cols-4 gap-4 mb-4"),A(z,"class","text-xs font-medium text-red-700 mb-2"),A(N,"class","flex gap-2 flex-wrap"),A(I,"class","mb-4"),A(e,"class","mb-6 p-4 bg-red-50 rounded-lg border border-red-200")},m(t,b){y(t,e,b),m(e,n),m(e,r),m(e,i),m(i,o),m(o,s),m(s,a),m(o,l),m(o,c),m(i,u),m(i,d),m(d,h),m(h,f),m(h,p),m(d,g),m(d,x),m(i,w),m(i,C),m(C,M),m(M,S),m(C,D),m(C,P),m(i,E),m(i,L),m(L,O),m(O,R),m(L,B),m(L,j),m(e,$),m(e,I),m(I,z),m(I,F),m(I,N),X&&X.m(N,null),m(N,W),G&&G.m(N,null),m(N,H),Z&&Z.m(N,null),m(N,V),tt&&tt.m(N,null),m(e,q),et&&et.m(e,null),m(e,U),nt&&nt.m(e,null)},p(t,n){268435456&n[0]&&K!==(K=t[28].total+"")&&T(a,K),268435456&n[0]&&Y!==(Y=t[28].deadLinkRate+"")&&T(f,Y),268435456&n[0]&&Q!==(Q=t[28].checkedCount+"")&&T(S,Q),268435456&n[0]&&J!==(J=t[28].byDomain.length+"")&&T(R,J),t[28].byAge.recent>0?X?X.p(t,n):(X=cm(t),X.c(),X.m(N,W)):X&&(X.d(1),X=null),t[28].byAge.moderate>0?G?G.p(t,n):(G=um(t),G.c(),G.m(N,H)):G&&(G.d(1),G=null),t[28].byAge.old>0?Z?Z.p(t,n):(Z=dm(t),Z.c(),Z.m(N,V)):Z&&(Z.d(1),Z=null),t[28].byAge.ancient>0?tt?tt.p(t,n):(tt=hm(t),tt.c(),tt.m(N,null)):tt&&(tt.d(1),tt=null),t[28].byDomain.length>0?et?et.p(t,n):(et=fm(t),et.c(),et.m(e,U)):et&&(et.d(1),et=null),t[28].byCategory.length>0?nt?nt.p(t,n):(nt=gm(t),nt.c(),nt.m(e,null)):nt&&(nt.d(1),nt=null)},d(t){t&&b(e),X&&X.d(),G&&G.d(),Z&&Z.d(),tt&&tt.d(),et&&et.d(),nt&&nt.d()}}}function cm(t){let e,n,r,i=t[28].byAge.recent+"";return{c(){e=v("span"),n=k("< 1 week: "),r=k(i),A(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){268435456&e[0]&&i!==(i=t[28].byAge.recent+"")&&T(r,i)},d(t){t&&b(e)}}}function um(t){let e,n,r,i=t[28].byAge.moderate+"";return{c(){e=v("span"),n=k("1 week - 1 month: "),r=k(i),A(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){268435456&e[0]&&i!==(i=t[28].byAge.moderate+"")&&T(r,i)},d(t){t&&b(e)}}}function dm(t){let e,n,r,i=t[28].byAge.old+"";return{c(){e=v("span"),n=k("1 month - 1 year: "),r=k(i),A(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){268435456&e[0]&&i!==(i=t[28].byAge.old+"")&&T(r,i)},d(t){t&&b(e)}}}function hm(t){let e,n,r,i=t[28].byAge.ancient+"";return{c(){e=v("span"),n=k("> 1 year: "),r=k(i),A(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){268435456&e[0]&&i!==(i=t[28].byAge.ancient+"")&&T(r,i)},d(t){t&&b(e)}}}function fm(t){let e,n,r,i,o=it(t[28].byDomain.slice(0,5)),s=[];for(let e=0;e<o.length;e+=1)s[e]=pm(ig(t,o,e));return{c(){e=v("div"),n=v("h5"),n.textContent="Top Domains with Dead Links",r=_(),i=v("div");for(let t=0;t<s.length;t+=1)s[t].c();A(n,"class","text-xs font-medium text-red-700 mb-2"),A(i,"class","flex gap-2 flex-wrap"),A(e,"class","mb-4")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(i,null)},p(t,e){if(268435456&e[0]){let n;for(o=it(t[28].byDomain.slice(0,5)),n=0;n<o.length;n+=1){const r=ig(t,o,n);s[n]?s[n].p(r,e):(s[n]=pm(r),s[n].c(),s[n].m(i,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(t){t&&b(e),x(s,t)}}}function pm(t){let e,n,r,i,o,s=t[261].domain+"",a=t[261].count+"";return{c(){e=v("span"),n=k(s),r=k(": "),i=k(a),o=_(),A(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,s){y(t,e,s),m(e,n),m(e,r),m(e,i),m(e,o)},p(t,e){268435456&e[0]&&s!==(s=t[261].domain+"")&&T(n,s),268435456&e[0]&&a!==(a=t[261].count+"")&&T(i,a)},d(t){t&&b(e)}}}function gm(t){let e,n,r,i,o=it(t[28].byCategory.slice(0,5)),s=[];for(let e=0;e<o.length;e+=1)s[e]=mm(rg(t,o,e));return{c(){e=v("div"),n=v("h5"),n.textContent="By Category",r=_(),i=v("div");for(let t=0;t<s.length;t+=1)s[t].c();A(n,"class","text-xs font-medium text-red-700 mb-2"),A(i,"class","flex gap-2 flex-wrap")},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(i,null)},p(t,e){if(268435456&e[0]){let n;for(o=it(t[28].byCategory.slice(0,5)),n=0;n<o.length;n+=1){const r=rg(t,o,n);s[n]?s[n].p(r,e):(s[n]=mm(r),s[n].c(),s[n].m(i,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}},d(t){t&&b(e),x(s,t)}}}function mm(t){let e,n,r,i,o,s=t[258].category+"",a=t[258].count+"";return{c(){e=v("span"),n=k(s),r=k(": "),i=k(a),o=_(),A(e,"class","px-2 py-1 bg-red-100 text-red-700 text-xs rounded")},m(t,s){y(t,e,s),m(e,n),m(e,r),m(e,i),m(e,o)},p(t,e){268435456&e[0]&&s!==(s=t[258].category+"")&&T(n,s),268435456&e[0]&&a!==(a=t[258].count+"")&&T(i,a)},d(t){t&&b(e)}}}function ym(t){let e,n,r,i=t[205].domain+"";return{c(){e=v("span"),n=k(" "),r=k(i),A(e,"class","text-gray-500")},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){8192&e[0]|32&e[1]&&i!==(i=t[205].domain+"")&&T(r,i)},d(t){t&&b(e)}}}function bm(t){let e,n,r,i=t[205].category+"";return{c(){e=v("span"),n=k(" "),r=k(i),A(e,"class","text-gray-500")},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){8192&e[0]|32&e[1]&&i!==(i=t[205].category+"")&&T(r,i)},d(t){t&&b(e)}}}function xm(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,P,E,L,O,R,B=t[205].title+"",j=t[205].url+"",$=(t[205].lastChecked?new Date(t[205].lastChecked).toLocaleDateString():"Unknown")+"",I=t[205].domain&&ym(t),z=t[205].category&&bm(t);function F(){return t[145](t[205])}return{c(){e=v("div"),n=v("div"),r=v("div"),i=v("div"),o=k(B),s=_(),a=v("div"),l=k(j),c=_(),u=v("div"),d=v("span"),h=k("Last checked: "),f=k($),p=_(),I&&I.c(),g=_(),z&&z.c(),x=_(),w=v("div"),C=v("a"),S=k("Try Again"),P=_(),E=v("button"),E.textContent="Delete",L=_(),A(i,"class","text-sm font-medium text-gray-800 truncate"),A(a,"class","text-xs text-gray-500 truncate"),A(u,"class","text-xs text-red-600 mt-1 flex items-center gap-3"),A(r,"class","flex-1 min-w-0"),A(C,"href",D=t[205].url),A(C,"target","_blank"),A(C,"rel","noopener noreferrer"),A(C,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300"),A(E,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(w,"class","flex gap-1 ml-2 flex-shrink-0"),A(n,"class","flex items-start justify-between"),A(e,"class","p-3 bg-red-50 rounded border border-red-200")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(i,o),m(r,s),m(r,a),m(a,l),m(r,c),m(r,u),m(u,d),m(d,h),m(d,f),m(u,p),I&&I.m(u,null),m(u,g),z&&z.m(u,null),m(n,x),m(n,w),m(w,C),m(C,S),m(w,P),m(w,E),m(e,L),O||(R=M(E,"click",F),O=!0)},p(e,n){t=e,8192&n[0]|32&n[1]&&B!==(B=t[205].title+"")&&T(o,B),8192&n[0]|32&n[1]&&j!==(j=t[205].url+"")&&T(l,j),8192&n[0]|32&n[1]&&$!==($=(t[205].lastChecked?new Date(t[205].lastChecked).toLocaleDateString():"Unknown")+"")&&T(f,$),t[205].domain?I?I.p(t,n):(I=ym(t),I.c(),I.m(u,g)):I&&(I.d(1),I=null),t[205].category?z?z.p(t,n):(z=bm(t),z.c(),z.m(u,null)):z&&(z.d(1),z=null),8192&n[0]|32&n[1]&&D!==(D=t[205].url)&&A(C,"href",D)},d(t){t&&b(e),I&&I.d(),z&&z.d(),O=!1,R()}}}function vm(t){let e,n,r,i,o,s,a,l,c,u=t[13].length+"";return{c(){e=v("div"),n=v("button"),r=k("Load More ("),i=k(t[36]),o=k(" of "),s=k(u),a=k(" shown)"),A(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),A(e,"class","mt-4 text-center")},m(u,d){y(u,e,d),m(e,n),m(n,r),m(n,i),m(n,o),m(n,s),m(n,a),l||(c=M(n,"click",t[77]),l=!0)},p(t,e){32&e[1]&&T(i,t[36]),8192&e[0]&&u!==(u=t[13].length+"")&&T(s,u)},d(t){t&&b(e),l=!1,c()}}}function wm(t){let e,n,r,i,o,s,a=Math.round((t[40].cacheAge||0)/6e4)+"";return{c(){e=v("span"),n=w("svg"),r=w("path"),i=k("\n                      Cached "),o=k(a),s=k("m ago"),A(r,"fill-rule","evenodd"),A(r,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"),A(r,"clip-rule","evenodd"),A(n,"class","w-3.5 h-3.5"),A(n,"fill","currentColor"),A(n,"viewBox","0 0 20 20"),A(e,"class","inline-flex items-center gap-1.5 px-2.5 py-1 text-xs bg-amber-50 text-amber-700 border border-amber-200 rounded-md"),A(e,"title","Loaded from cache")},m(t,a){y(t,e,a),m(e,n),m(n,r),m(e,i),m(e,o),m(e,s)},p(t,e){512&e[1]&&a!==(a=Math.round((t[40].cacheAge||0)/6e4)+"")&&T(o,a)},d(t){t&&b(e)}}}function km(t){let e;return{c(){e=k(" Scan for Similarities")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function _m(t){let e,n;return{c(){e=v("div"),n=k("\n                      Scanning..."),A(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-white")},m(t,r){y(t,e,r),y(t,n,r)},d(t){t&&(b(e),b(n))}}}function Cm(t){let e;function n(t,e){return t[33]?Tm:0!==t[38].length||t[39]?0===t[38].length?Am:Sm:Dm}let r=n(t),i=r(t);return{c(){i.c(),e=C()},m(t,n){i.m(t,n),y(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){t&&b(e),i.d(t)}}}function Mm(t){let e;function n(t,e){return t[29]?$m:0===t[11].length?jm:Bm}let r=n(t),i=r(t);return{c(){i.c(),e=C()},m(t,n){i.m(t,n),y(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){t&&b(e),i.d(t)}}}function Sm(t){let e,n,r,i,o=t[39]&&Pm(t),s=it(t[38].slice(0,t[35])),a=[];for(let e=0;e<s.length;e+=1)a[e]=Om(Zp(t,s,e));let l=t[38].length>t[35]&&Rm(t);return{c(){o&&o.c(),e=_(),n=v("div");for(let t=0;t<a.length;t+=1)a[t].c();r=_(),l&&l.c(),i=C(),A(n,"class","space-y-3 max-h-[40rem] overflow-y-auto")},m(t,s){o&&o.m(t,s),y(t,e,s),y(t,n,s);for(let t=0;t<a.length;t+=1)a[t]&&a[t].m(n,null);y(t,r,s),l&&l.m(t,s),y(t,i,s)},p(t,r){if(t[39]?o?o.p(t,r):(o=Pm(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),144&r[1]|1342177280&r[2]){let e;for(s=it(t[38].slice(0,t[35])),e=0;e<s.length;e+=1){const i=Zp(t,s,e);a[e]?a[e].p(i,r):(a[e]=Om(i),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=s.length}t[38].length>t[35]?l?l.p(t,r):(l=Rm(t),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){t&&(b(e),b(n),b(r),b(i)),o&&o.d(t),x(a,t),l&&l.d(t)}}}function Am(e){let n;return{c(){n=v("p"),n.textContent="No similar bookmarks detected with enhanced matching.",A(n,"class","text-gray-500 text-center py-8")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Dm(e){let n;return{c(){n=v("div"),n.innerHTML='<p class="text-gray-500 mb-4">Click &quot;Scan for Similarities&quot; to detect similar bookmarks using advanced fuzzy matching.</p> <p class="text-xs text-gray-400">This analysis uses title, description, keywords, and domain information to find similar content.</p>',A(n,"class","text-center py-8")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Tm(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div> <span class="ml-3 text-gray-500">Running smart similarity analysis...</span>',A(n,"class","flex items-center justify-center py-8")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Pm(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,M=t[39].sameDomain+"",S=t[39].crossDomain+"",D=(100*t[39].avgSimilarity).toFixed(0)+"";return{c(){e=v("div"),n=v("div"),r=v("span"),i=v("strong"),o=k(M),s=k(" same-domain pairs"),a=_(),l=v("span"),c=v("strong"),u=k(S),d=k(" cross-domain pairs"),h=_(),f=v("span"),p=k("Avg: "),g=v("strong"),x=k(D),w=k("%"),C=k(" similar"),A(r,"class","text-indigo-700"),A(l,"class","text-indigo-600"),A(f,"class","text-indigo-500"),A(n,"class","flex gap-4 text-sm"),A(e,"class","mb-4 p-3 bg-indigo-50 rounded-lg flex items-center justify-between")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(i,o),m(r,s),m(n,a),m(n,l),m(l,c),m(c,u),m(l,d),m(n,h),m(n,f),m(f,p),m(f,g),m(g,x),m(g,w),m(f,C)},p(t,e){256&e[1]&&M!==(M=t[39].sameDomain+"")&&T(o,M),256&e[1]&&S!==(S=t[39].crossDomain+"")&&T(u,S),256&e[1]&&D!==(D=(100*t[39].avgSimilarity).toFixed(0)+"")&&T(x,D)},d(t){t&&b(e)}}}function Em(t){let e;return{c(){e=v("span"),e.textContent="Same Domain",A(e,"class","text-xs px-2 py-1 bg-green-100 text-green-700 rounded")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Lm(t){let e;return{c(){e=v("span"),e.textContent="Same Category",A(e,"class","text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Om(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,P,E,L,O,R,B,j,$,I,z,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z,tt,et,nt,rt,it,ot,st,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,yt,bt,xt,vt,wt=Math.round(100*t[253].similarity)+"",kt=t[253].bookmark1.title+"",_t=t[253].bookmark1.url+"",Ct=t[253].coverage1.percentage.toFixed(0)+"",Mt=t[253].bookmark2.title+"",St=t[253].bookmark2.url+"",At=t[253].coverage2.percentage.toFixed(0)+"",Dt=t[253].sameDomain&&Em(),Tt=t[253].sameCategory&&Lm();function Pt(){return t[151](t[253])}function Et(){return t[152](t[253])}function Lt(){return t[153](t[253])}return{c(){e=v("div"),n=v("div"),i=v("div"),o=v("span"),s=k(wt),a=k("% match"),c=_(),Dt&&Dt.c(),u=_(),Tt&&Tt.c(),d=_(),h=v("button"),h.textContent="Compare Details",f=_(),p=v("div"),g=v("div"),x=v("div"),w=v("div"),C=v("div"),S=k(kt),P=_(),E=v("div"),L=k(_t),R=_(),B=v("div"),j=v("div"),$=k("Coverage: "),I=k(Ct),z=k("%"),F=_(),N=v("div"),W=v("a"),H=k("Open"),q=_(),U=v("button"),U.textContent="Delete",K=_(),Y=v("div"),Q=v("div"),J=v("div"),X=v("div"),G=k(Mt),tt=_(),et=v("div"),nt=k(St),it=_(),ot=v("div"),st=v("div"),at=k("Coverage: "),lt=k(At),ct=k("%"),ut=_(),dt=v("div"),ht=v("a"),ft=k("Open"),gt=_(),mt=v("button"),mt.textContent="Delete",yt=_(),A(o,"class",l="text-xs font-semibold px-2 py-1 rounded "+(t[253].sameDomain?"bg-indigo-200 text-indigo-800":"bg-purple-200 text-purple-800")),A(i,"class","flex items-center gap-2"),A(h,"class","text-xs px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50"),A(n,"class","flex justify-between items-center mb-3"),A(C,"class","text-sm font-medium text-gray-800 truncate"),A(C,"title",D=t[253].bookmark1.title),A(E,"class","text-xs text-gray-500 truncate"),A(E,"title",O=t[253].bookmark1.url),A(w,"class","flex-1 min-w-0"),A(x,"class","flex justify-between items-start mb-2"),A(j,"class","text-xs text-gray-400"),A(W,"href",V=t[253].bookmark1.url),A(W,"target","_blank"),A(W,"rel","noopener"),A(W,"class","px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200"),A(U,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(N,"class","flex gap-1"),A(B,"class","flex items-center justify-between mt-2"),A(g,"class","p-3 bg-white rounded border border-gray-200"),A(X,"class","text-sm font-medium text-gray-800 truncate"),A(X,"title",Z=t[253].bookmark2.title),A(et,"class","text-xs text-gray-500 truncate"),A(et,"title",rt=t[253].bookmark2.url),A(J,"class","flex-1 min-w-0"),A(Q,"class","flex justify-between items-start mb-2"),A(st,"class","text-xs text-gray-400"),A(ht,"href",pt=t[253].bookmark2.url),A(ht,"target","_blank"),A(ht,"rel","noopener"),A(ht,"class","px-2 py-1 text-xs bg-gray-100 rounded hover:bg-gray-200"),A(mt,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(dt,"class","flex gap-1"),A(ot,"class","flex items-center justify-between mt-2"),A(Y,"class","p-3 bg-white rounded border border-gray-200"),A(p,"class","grid grid-cols-1 md:grid-cols-2 gap-3"),A(e,"class",bt="border "+(t[253].sameDomain?"border-indigo-200 bg-indigo-50":"border-purple-200 bg-purple-50")+" rounded-lg p-4")},m(t,r){y(t,e,r),m(e,n),m(n,i),m(i,o),m(o,s),m(o,a),m(i,c),Dt&&Dt.m(i,null),m(i,u),Tt&&Tt.m(i,null),m(n,d),m(n,h),m(e,f),m(e,p),m(p,g),m(g,x),m(x,w),m(w,C),m(C,S),m(w,P),m(w,E),m(E,L),m(g,R),m(g,B),m(B,j),m(j,$),m(j,I),m(j,z),m(B,F),m(B,N),m(N,W),m(W,H),m(N,q),m(N,U),m(p,K),m(p,Y),m(Y,Q),m(Q,J),m(J,X),m(X,G),m(J,tt),m(J,et),m(et,nt),m(Y,it),m(Y,ot),m(ot,st),m(st,at),m(st,lt),m(st,ct),m(ot,ut),m(ot,dt),m(dt,ht),m(ht,ft),m(dt,gt),m(dt,mt),m(e,yt),xt||(vt=[M(h,"click",Pt),M(U,"click",Et),M(mt,"click",Lt)],xt=!0)},p(n,r){t=n,144&r[1]&&wt!==(wt=Math.round(100*t[253].similarity)+"")&&T(s,wt),144&r[1]&&l!==(l="text-xs font-semibold px-2 py-1 rounded "+(t[253].sameDomain?"bg-indigo-200 text-indigo-800":"bg-purple-200 text-purple-800"))&&A(o,"class",l),t[253].sameDomain?Dt||(Dt=Em(),Dt.c(),Dt.m(i,u)):Dt&&(Dt.d(1),Dt=null),t[253].sameCategory?Tt||(Tt=Lm(),Tt.c(),Tt.m(i,null)):Tt&&(Tt.d(1),Tt=null),144&r[1]&&kt!==(kt=t[253].bookmark1.title+"")&&T(S,kt),144&r[1]&&D!==(D=t[253].bookmark1.title)&&A(C,"title",D),144&r[1]&&_t!==(_t=t[253].bookmark1.url+"")&&T(L,_t),144&r[1]&&O!==(O=t[253].bookmark1.url)&&A(E,"title",O),144&r[1]&&Ct!==(Ct=t[253].coverage1.percentage.toFixed(0)+"")&&T(I,Ct),144&r[1]&&V!==(V=t[253].bookmark1.url)&&A(W,"href",V),144&r[1]&&Mt!==(Mt=t[253].bookmark2.title+"")&&T(G,Mt),144&r[1]&&Z!==(Z=t[253].bookmark2.title)&&A(X,"title",Z),144&r[1]&&St!==(St=t[253].bookmark2.url+"")&&T(nt,St),144&r[1]&&rt!==(rt=t[253].bookmark2.url)&&A(et,"title",rt),144&r[1]&&At!==(At=t[253].coverage2.percentage.toFixed(0)+"")&&T(lt,At),144&r[1]&&pt!==(pt=t[253].bookmark2.url)&&A(ht,"href",pt),144&r[1]&&bt!==(bt="border "+(t[253].sameDomain?"border-indigo-200 bg-indigo-50":"border-purple-200 bg-purple-50")+" rounded-lg p-4")&&A(e,"class",bt)},d(t){t&&b(e),Dt&&Dt.d(),Tt&&Tt.d(),xt=!1,r(vt)}}}function Rm(t){let e,n,r,i,o,s,a,l,c,u=t[38].length+"";return{c(){e=v("div"),n=v("button"),r=k("Load More ("),i=k(t[35]),o=k(" of "),s=k(u),a=k(" shown)"),A(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),A(e,"class","mt-4 text-center")},m(u,d){y(u,e,d),m(e,n),m(n,r),m(n,i),m(n,o),m(n,s),m(n,a),l||(c=M(n,"click",t[76]),l=!0)},p(t,e){16&e[1]&&T(i,t[35]),128&e[1]&&u!==(u=t[38].length+"")&&T(s,u)},d(t){t&&b(e),l=!1,c()}}}function Bm(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,w,S,D,P,E=t[37].size+"",L=t[37].size>0&&Im(t),O=t[37].size>0&&zm(t),R=it(t[11].slice(0,t[34])),B=[];for(let e=0;e<R.length;e+=1)B[e]=Nm(tg(t,R,e));let j=t[11].length>t[34]&&Wm(t);return{c(){e=v("div"),n=v("div"),i=v("span"),o=k(E),s=k(" selected"),a=_(),l=v("button"),l.textContent="Select All Duplicates",c=_(),L&&L.c(),u=_(),d=v("div"),O&&O.c(),h=_(),f=v("button"),f.textContent="Delete All Duplicates",p=_(),g=v("div");for(let t=0;t<B.length;t+=1)B[t].c();w=_(),j&&j.c(),S=C(),A(i,"class","text-sm text-gray-600"),A(l,"class","text-xs px-2 py-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded"),A(n,"class","flex items-center gap-3"),A(f,"class","px-3 py-1.5 text-sm bg-red-700 text-white rounded hover:bg-red-800"),A(d,"class","flex items-center gap-2"),A(e,"class","mb-4 p-3 bg-blue-50 rounded-lg flex flex-wrap items-center justify-between gap-2"),A(g,"class","space-y-6 max-h-[32rem] overflow-y-auto")},m(r,b){y(r,e,b),m(e,n),m(n,i),m(i,o),m(i,s),m(n,a),m(n,l),m(n,c),L&&L.m(n,null),m(e,u),m(e,d),O&&O.m(d,null),m(d,h),m(d,f),y(r,p,b),y(r,g,b);for(let t=0;t<B.length;t+=1)B[t]&&B[t].m(g,null);y(r,w,b),j&&j.m(r,b),y(r,S,b),D||(P=[M(l,"click",t[85]),M(f,"click",t[88])],D=!0)},p(t,e){if(64&e[1]&&E!==(E=t[37].size+"")&&T(o,E),t[37].size>0?L?L.p(t,e):(L=Im(t),L.c(),L.m(n,null)):L&&(L.d(1),L=null),t[37].size>0?O?O.p(t,e):(O=zm(t),O.c(),O.m(d,h)):O&&(O.d(1),O=null),2048&e[0]|72&e[1]|6291456&e[2]){let n;for(R=it(t[11].slice(0,t[34])),n=0;n<R.length;n+=1){const r=tg(t,R,n);B[n]?B[n].p(r,e):(B[n]=Nm(r),B[n].c(),B[n].m(g,null))}for(;n<B.length;n+=1)B[n].d(1);B.length=R.length}t[11].length>t[34]?j?j.p(t,e):(j=Wm(t),j.c(),j.m(S.parentNode,S)):j&&(j.d(1),j=null)},d(t){t&&(b(e),b(p),b(g),b(w),b(S)),L&&L.d(),O&&O.d(),x(B,t),j&&j.d(t),D=!1,r(P)}}}function jm(e){let n;return{c(){n=v("div"),n.innerHTML='<p class="text-gray-500">No exact duplicate bookmarks found. Great job!</p>',A(n,"class","text-center py-8")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function $m(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-3 text-gray-500">Finding duplicates...</span>',A(n,"class","flex items-center justify-center py-8")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Im(e){let n,r,i;return{c(){n=v("button"),n.textContent="Clear Selection",A(n,"class","text-xs px-2 py-1 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded")},m(t,o){y(t,n,o),r||(i=M(n,"click",e[86]),r=!0)},p:t,d(t){t&&b(n),r=!1,i()}}}function zm(t){let e,n,r,i,o,s,a=t[37].size+"";return{c(){e=v("button"),n=k("Delete Selected ("),r=k(a),i=k(")"),A(e,"class","px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700")},m(a,l){y(a,e,l),m(e,n),m(e,r),m(e,i),o||(s=M(e,"click",t[87]),o=!0)},p(t,e){64&e[1]&&a!==(a=t[37].size+"")&&T(r,a)},d(t){t&&b(e),o=!1,s()}}}function Fm(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D=t[205].title+"",P=(t[205].folderPath||"No folder")+"";function E(){return t[149](t[205])}let L=0===t[233]&&function(){let t;return{c(){t=v("span"),t.textContent="(oldest)",A(t,"class","text-green-600")},m(e,n){y(e,t,n)},d(e){e&&b(t)}}}();function O(){return t[150](t[205],t[251])}return{c(){e=v("div"),n=v("div"),i=v("input"),s=_(),a=v("div"),l=v("div"),c=k(D),u=_(),d=v("div"),h=k(P),f=_(),L&&L.c(),p=_(),g=v("button"),g.textContent="Delete",x=_(),A(i,"type","checkbox"),i.checked=o=t[37].has(t[205].id),A(i,"class","h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"),A(l,"class","text-sm font-medium truncate"),A(d,"class","text-xs text-gray-500"),A(a,"class","flex-1 min-w-0"),A(n,"class","flex items-center gap-3 flex-1 min-w-0"),A(g,"class","ml-4 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 flex-shrink-0"),A(e,"class",w="flex items-center justify-between p-2 bg-gray-50 rounded "+(t[37].has(t[205].id)?"ring-2 ring-blue-400 bg-blue-50":""))},m(t,r){y(t,e,r),m(e,n),m(n,i),m(n,s),m(n,a),m(a,l),m(l,c),m(a,u),m(a,d),m(d,h),m(d,f),L&&L.m(d,null),m(e,p),m(e,g),m(e,x),C||(S=[M(i,"change",E),M(g,"click",O)],C=!0)},p(n,r){t=n,2048&r[0]|72&r[1]&&o!==(o=t[37].has(t[205].id))&&(i.checked=o),2048&r[0]|8&r[1]&&D!==(D=t[205].title+"")&&T(c,D),2048&r[0]|8&r[1]&&P!==(P=(t[205].folderPath||"No folder")+"")&&T(h,P),2048&r[0]|72&r[1]&&w!==(w="flex items-center justify-between p-2 bg-gray-50 rounded "+(t[37].has(t[205].id)?"ring-2 ring-blue-400 bg-blue-50":""))&&A(e,"class",w)},d(t){t&&b(e),L&&L.d(),C=!1,r(S)}}}function Nm(t){let e,n,r,i,o,s,a,l=t[249][0].url+"",c=it(t[249]),u=[];for(let e=0;e<c.length;e+=1)u[e]=Fm(eg(t,c,e));return{c(){e=v("div"),n=v("h4"),r=k(l),o=_(),s=v("div");for(let t=0;t<u.length;t+=1)u[t].c();a=_(),A(n,"class","font-medium text-gray-900 mb-3 truncate"),A(n,"title",i=t[249][0].url),A(s,"class","space-y-2"),A(e,"class","border border-gray-200 rounded-lg p-4")},m(t,i){y(t,e,i),m(e,n),m(n,r),m(e,o),m(e,s);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(s,null);m(e,a)},p(t,e){if(2048&e[0]|8&e[1]&&l!==(l=t[249][0].url+"")&&T(r,l),2048&e[0]|8&e[1]&&i!==(i=t[249][0].url)&&A(n,"title",i),2048&e[0]|72&e[1]|6291456&e[2]){let n;for(c=it(t[249]),n=0;n<c.length;n+=1){const r=eg(t,c,n);u[n]?u[n].p(r,e):(u[n]=Fm(r),u[n].c(),u[n].m(s,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}},d(t){t&&b(e),x(u,t)}}}function Wm(t){let e,n,r,i,o,s,a,l,c,u=t[11].length+"";return{c(){e=v("div"),n=v("button"),r=k("Load More ("),i=k(t[34]),o=k(" of "),s=k(u),a=k(" shown)"),A(n,"class","px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"),A(e,"class","mt-4 text-center")},m(u,d){y(u,e,d),m(e,n),m(n,r),m(n,i),m(n,o),m(n,s),m(n,a),l||(c=M(n,"click",t[75]),l=!0)},p(t,e){8&e[1]&&T(i,t[34]),2048&e[0]&&u!==(u=t[11].length+"")&&T(s,u)},d(t){t&&b(e),l=!1,c()}}}function Hm(t){let e,n,r,i=t[43].summary.total+"";return{c(){e=k("("),n=k(i),r=k(" found)")},m(t,i){y(t,e,i),y(t,n,i),y(t,r,i)},p(t,e){4096&e[1]&&i!==(i=t[43].summary.total+"")&&T(n,i)},d(t){t&&(b(e),b(n),b(r))}}}function Vm(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,M,S,D,P,E,L,O,R,B,j,$,I,z,F,N,W,H,V,q,U=(t[43].summary.byCategory.deadLinks||0)+"",K=(t[43].summary.byCategory.oldUnused||0)+"",Y=(t[43].summary.byCategory.genericTitles||0)+"",Q=(t[43].summary.byCategory.temporaryUrls||0)+"",J=(t[43].summary.byCategory.lowScore||0)+"",X=t[43].deadLinks.length>0&&Km(t),G=t[43].oldUnused.length>0&&Jm(t),Z=t[43].genericTitles.length>0&&Zm(t),tt=t[43].temporaryUrls.length>0&&ny(t),et=t[43].lowScore.length>0&&oy(t);return{c(){e=v("div"),n=v("div"),r=v("div"),i=k(U),o=_(),s=v("div"),s.textContent="Dead Links",a=_(),l=v("div"),c=v("div"),u=k(K),d=_(),h=v("div"),h.textContent="Old & Unused",f=_(),p=v("div"),g=v("div"),x=k(Y),w=_(),M=v("div"),M.textContent="Generic Titles",S=_(),D=v("div"),P=v("div"),E=k(Q),L=_(),O=v("div"),O.textContent="Temp/Dev URLs",R=_(),B=v("div"),j=v("div"),$=k(J),I=_(),z=v("div"),z.textContent="Low Quality",F=_(),X&&X.c(),N=_(),G&&G.c(),W=_(),Z&&Z.c(),H=_(),tt&&tt.c(),V=_(),et&&et.c(),q=C(),A(r,"class","text-2xl font-bold text-red-600"),A(s,"class","text-xs text-red-500"),A(n,"class","p-3 bg-red-50 rounded-lg text-center"),A(c,"class","text-2xl font-bold text-orange-600"),A(h,"class","text-xs text-orange-500"),A(l,"class","p-3 bg-orange-50 rounded-lg text-center"),A(g,"class","text-2xl font-bold text-yellow-600"),A(M,"class","text-xs text-yellow-600"),A(p,"class","p-3 bg-yellow-50 rounded-lg text-center"),A(P,"class","text-2xl font-bold text-purple-600"),A(O,"class","text-xs text-purple-500"),A(D,"class","p-3 bg-purple-50 rounded-lg text-center"),A(j,"class","text-2xl font-bold text-gray-600"),A(z,"class","text-xs text-gray-500"),A(B,"class","p-3 bg-gray-100 rounded-lg text-center"),A(e,"class","grid grid-cols-2 md:grid-cols-5 gap-3 mb-6")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(n,o),m(n,s),m(e,a),m(e,l),m(l,c),m(c,u),m(l,d),m(l,h),m(e,f),m(e,p),m(p,g),m(g,x),m(p,w),m(p,M),m(e,S),m(e,D),m(D,P),m(P,E),m(D,L),m(D,O),m(e,R),m(e,B),m(B,j),m(j,$),m(B,I),m(B,z),y(t,F,b),X&&X.m(t,b),y(t,N,b),G&&G.m(t,b),y(t,W,b),Z&&Z.m(t,b),y(t,H,b),tt&&tt.m(t,b),y(t,V,b),et&&et.m(t,b),y(t,q,b)},p(t,e){4096&e[1]&&U!==(U=(t[43].summary.byCategory.deadLinks||0)+"")&&T(i,U),4096&e[1]&&K!==(K=(t[43].summary.byCategory.oldUnused||0)+"")&&T(u,K),4096&e[1]&&Y!==(Y=(t[43].summary.byCategory.genericTitles||0)+"")&&T(x,Y),4096&e[1]&&Q!==(Q=(t[43].summary.byCategory.temporaryUrls||0)+"")&&T(E,Q),4096&e[1]&&J!==(J=(t[43].summary.byCategory.lowScore||0)+"")&&T($,J),t[43].deadLinks.length>0?X?X.p(t,e):(X=Km(t),X.c(),X.m(N.parentNode,N)):X&&(X.d(1),X=null),t[43].oldUnused.length>0?G?G.p(t,e):(G=Jm(t),G.c(),G.m(W.parentNode,W)):G&&(G.d(1),G=null),t[43].genericTitles.length>0?Z?Z.p(t,e):(Z=Zm(t),Z.c(),Z.m(H.parentNode,H)):Z&&(Z.d(1),Z=null),t[43].temporaryUrls.length>0?tt?tt.p(t,e):(tt=ny(t),tt.c(),tt.m(V.parentNode,V)):tt&&(tt.d(1),tt=null),t[43].lowScore.length>0?et?et.p(t,e):(et=oy(t),et.c(),et.m(q.parentNode,q)):et&&(et.d(1),et=null)},d(t){t&&(b(e),b(F),b(N),b(W),b(H),b(V),b(q)),X&&X.d(t),G&&G.d(t),Z&&Z.d(t),tt&&tt.d(t),et&&et.d(t)}}}function qm(e){let n;return{c(){n=v("p"),n.textContent="No cleanup candidates found. Your bookmarks look great!",A(n,"class","text-gray-500")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Um(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"></div> <span class="ml-3 text-gray-500">Analyzing bookmarks for cleanup...</span>',A(n,"class","flex items-center justify-center py-8")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Km(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g=t[43].deadLinks.length+"",w=it(t[43].deadLinks.slice(0,t[44].deadLinks)),C=[];for(let e=0;e<w.length;e+=1)C[e]=Ym(Gp(t,w,e));let S=t[43].deadLinks.length>t[44].deadLinks&&Qm(t);return{c(){e=v("div"),n=v("div"),r=v("h4"),i=k(" Dead Links ("),o=k(g),s=k(")"),a=_(),l=v("button"),c=k("Delete All"),u=_(),d=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(r,"class","text-sm font-semibold text-red-700"),l.disabled=t[45],A(l,"class","text-xs px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50"),A(n,"class","flex items-center justify-between mb-3"),A(d,"class","space-y-2 max-h-48 overflow-y-auto"),A(e,"class","mb-6")},m(g,b){y(g,e,b),m(e,n),m(n,r),m(r,i),m(r,o),m(r,s),m(n,a),m(n,l),m(l,c),m(e,u),m(e,d);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(d,null);m(e,h),S&&S.m(e,null),f||(p=M(l,"click",t[154]),f=!0)},p(t,n){if(4096&n[1]&&g!==(g=t[43].deadLinks.length+"")&&T(o,g),16384&n[1]&&(l.disabled=t[45]),12288&n[1]|2&n[3]){let e;for(w=it(t[43].deadLinks.slice(0,t[44].deadLinks)),e=0;e<w.length;e+=1){const r=Gp(t,w,e);C[e]?C[e].p(r,n):(C[e]=Ym(r),C[e].c(),C[e].m(d,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=w.length}t[43].deadLinks.length>t[44].deadLinks?S?S.p(t,n):(S=Qm(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&b(e),x(C,t),S&&S.d(),f=!1,p()}}}function Ym(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,P,E=t[205].title+"",L=t[205].url+"",O=(t[205].lastChecked?new Date(t[205].lastChecked).toLocaleDateString():"Unknown")+"";function R(){return t[155](t[205])}return{c(){e=v("div"),n=v("div"),r=v("div"),i=k(E),o=_(),s=v("div"),a=k(L),l=_(),c=v("div"),u=k("Last checked: "),d=k(O),h=_(),f=v("div"),p=v("a"),g=k("Try"),w=_(),C=v("button"),C.textContent="Delete",S=_(),A(r,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(c,"class","text-xs text-red-600 mt-1"),A(n,"class","flex-1 min-w-0"),A(p,"href",x=t[205].url),A(p,"target","_blank"),A(p,"rel","noopener noreferrer"),A(p,"class","px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300"),A(C,"class","px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(f,"class","flex gap-1 ml-2 flex-shrink-0"),A(e,"class","p-2 bg-red-50 rounded border border-red-200 flex items-center justify-between")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(n,o),m(n,s),m(s,a),m(n,l),m(n,c),m(c,u),m(c,d),m(e,h),m(e,f),m(f,p),m(p,g),m(f,w),m(f,C),m(e,S),D||(P=M(C,"click",R),D=!0)},p(e,n){t=e,12288&n[1]&&E!==(E=t[205].title+"")&&T(i,E),12288&n[1]&&L!==(L=t[205].url+"")&&T(a,L),12288&n[1]&&O!==(O=(t[205].lastChecked?new Date(t[205].lastChecked).toLocaleDateString():"Unknown")+"")&&T(d,O),12288&n[1]&&x!==(x=t[205].url)&&A(p,"href",x)},d(t){t&&b(e),D=!1,P()}}}function Qm(t){let e,n,r,i,o,s,a,l,c=t[44].deadLinks+"",u=t[43].deadLinks.length+"";return{c(){e=v("button"),n=k("Show more ("),r=k(c),i=k(" of "),o=k(u),s=k(")"),A(e,"class","mt-2 text-xs text-red-600 hover:underline")},m(c,u){y(c,e,u),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[156]),a=!0)},p(t,e){8192&e[1]&&c!==(c=t[44].deadLinks+"")&&T(r,c),4096&e[1]&&u!==(u=t[43].deadLinks.length+"")&&T(o,u)},d(t){t&&b(e),a=!1,l()}}}function Jm(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g=t[43].oldUnused.length+"",w=it(t[43].oldUnused.slice(0,t[44].oldUnused)),C=[];for(let e=0;e<w.length;e+=1)C[e]=Xm(Xp(t,w,e));let S=t[43].oldUnused.length>t[44].oldUnused&&Gm(t);return{c(){e=v("div"),n=v("div"),r=v("h4"),i=k(" Old & Never Accessed ("),o=k(g),s=k(")"),a=_(),l=v("button"),c=k("Delete All"),u=_(),d=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(r,"class","text-sm font-semibold text-orange-700"),l.disabled=t[45],A(l,"class","text-xs px-2 py-1 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50"),A(n,"class","flex items-center justify-between mb-3"),A(d,"class","space-y-2 max-h-48 overflow-y-auto"),A(e,"class","mb-6")},m(g,b){y(g,e,b),m(e,n),m(n,r),m(r,i),m(r,o),m(r,s),m(n,a),m(n,l),m(l,c),m(e,u),m(e,d);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(d,null);m(e,h),S&&S.m(e,null),f||(p=M(l,"click",t[157]),f=!0)},p(t,n){if(4096&n[1]&&g!==(g=t[43].oldUnused.length+"")&&T(o,g),16384&n[1]&&(l.disabled=t[45]),12288&n[1]|2&n[3]){let e;for(w=it(t[43].oldUnused.slice(0,t[44].oldUnused)),e=0;e<w.length;e+=1){const r=Xp(t,w,e);C[e]?C[e].p(r,n):(C[e]=Xm(r),C[e].c(),C[e].m(d,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=w.length}t[43].oldUnused.length>t[44].oldUnused?S?S.p(t,n):(S=Gm(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&b(e),x(C,t),S&&S.d(),f=!1,p()}}}function Xm(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S=t[205].title+"",D=t[205].url+"",P=t[205].usefulnessScore+"",E=new Date(t[205].dateAdded).toLocaleDateString()+"";function L(){return t[158](t[205])}return{c(){e=v("div"),n=v("div"),r=v("div"),i=k(S),o=_(),s=v("div"),a=k(D),l=_(),c=v("div"),u=k("Score: "),d=k(P),h=k("  Created: "),f=k(E),p=_(),g=v("button"),g.textContent="Delete",x=_(),A(r,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(c,"class","text-xs text-orange-600 mt-1"),A(n,"class","flex-1 min-w-0"),A(g,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(e,"class","p-2 bg-orange-50 rounded border border-orange-200 flex items-center justify-between")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(n,o),m(n,s),m(s,a),m(n,l),m(n,c),m(c,u),m(c,d),m(c,h),m(c,f),m(e,p),m(e,g),m(e,x),w||(C=M(g,"click",L),w=!0)},p(e,n){t=e,12288&n[1]&&S!==(S=t[205].title+"")&&T(i,S),12288&n[1]&&D!==(D=t[205].url+"")&&T(a,D),12288&n[1]&&P!==(P=t[205].usefulnessScore+"")&&T(d,P),12288&n[1]&&E!==(E=new Date(t[205].dateAdded).toLocaleDateString()+"")&&T(f,E)},d(t){t&&b(e),w=!1,C()}}}function Gm(t){let e,n,r,i,o,s,a,l,c=t[44].oldUnused+"",u=t[43].oldUnused.length+"";return{c(){e=v("button"),n=k("Show more ("),r=k(c),i=k(" of "),o=k(u),s=k(")"),A(e,"class","mt-2 text-xs text-orange-600 hover:underline")},m(c,u){y(c,e,u),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[159]),a=!0)},p(t,e){8192&e[1]&&c!==(c=t[44].oldUnused+"")&&T(r,c),4096&e[1]&&u!==(u=t[43].oldUnused.length+"")&&T(o,u)},d(t){t&&b(e),a=!1,l()}}}function Zm(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g=t[43].genericTitles.length+"",w=it(t[43].genericTitles.slice(0,t[44].genericTitles)),C=[];for(let e=0;e<w.length;e+=1)C[e]=ty(Jp(t,w,e));let S=t[43].genericTitles.length>t[44].genericTitles&&ey(t);return{c(){e=v("div"),n=v("div"),r=v("h4"),i=k(" Generic/Placeholder Titles ("),o=k(g),s=k(")"),a=_(),l=v("button"),c=k("Delete All"),u=_(),d=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(r,"class","text-sm font-semibold text-yellow-700"),l.disabled=t[45],A(l,"class","text-xs px-2 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 disabled:opacity-50"),A(n,"class","flex items-center justify-between mb-3"),A(d,"class","space-y-2 max-h-48 overflow-y-auto"),A(e,"class","mb-6")},m(g,b){y(g,e,b),m(e,n),m(n,r),m(r,i),m(r,o),m(r,s),m(n,a),m(n,l),m(l,c),m(e,u),m(e,d);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(d,null);m(e,h),S&&S.m(e,null),f||(p=M(l,"click",t[160]),f=!0)},p(t,n){if(4096&n[1]&&g!==(g=t[43].genericTitles.length+"")&&T(o,g),16384&n[1]&&(l.disabled=t[45]),12288&n[1]|2&n[3]){let e;for(w=it(t[43].genericTitles.slice(0,t[44].genericTitles)),e=0;e<w.length;e+=1){const r=Jp(t,w,e);C[e]?C[e].p(r,n):(C[e]=ty(r),C[e].c(),C[e].m(d,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=w.length}t[43].genericTitles.length>t[44].genericTitles?S?S.p(t,n):(S=ey(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&b(e),x(C,t),S&&S.d(),f=!1,p()}}}function ty(t){let e,n,r,i,o,s,a,l,c,u,d,h,f=t[205].title+"",p=t[205].url+"";function g(){return t[161](t[205])}return{c(){e=v("div"),n=v("div"),r=v("div"),i=k(f),o=_(),s=v("div"),a=k(p),l=_(),c=v("button"),c.textContent="Delete",u=_(),A(r,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(n,"class","flex-1 min-w-0"),A(c,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(e,"class","p-2 bg-yellow-50 rounded border border-yellow-200 flex items-center justify-between")},m(t,f){y(t,e,f),m(e,n),m(n,r),m(r,i),m(n,o),m(n,s),m(s,a),m(e,l),m(e,c),m(e,u),d||(h=M(c,"click",g),d=!0)},p(e,n){t=e,12288&n[1]&&f!==(f=t[205].title+"")&&T(i,f),12288&n[1]&&p!==(p=t[205].url+"")&&T(a,p)},d(t){t&&b(e),d=!1,h()}}}function ey(t){let e,n,r,i,o,s,a,l,c=t[44].genericTitles+"",u=t[43].genericTitles.length+"";return{c(){e=v("button"),n=k("Show more ("),r=k(c),i=k(" of "),o=k(u),s=k(")"),A(e,"class","mt-2 text-xs text-yellow-600 hover:underline")},m(c,u){y(c,e,u),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[162]),a=!0)},p(t,e){8192&e[1]&&c!==(c=t[44].genericTitles+"")&&T(r,c),4096&e[1]&&u!==(u=t[43].genericTitles.length+"")&&T(o,u)},d(t){t&&b(e),a=!1,l()}}}function ny(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g=t[43].temporaryUrls.length+"",w=it(t[43].temporaryUrls.slice(0,t[44].temporaryUrls)),C=[];for(let e=0;e<w.length;e+=1)C[e]=ry(Qp(t,w,e));let S=t[43].temporaryUrls.length>t[44].temporaryUrls&&iy(t);return{c(){e=v("div"),n=v("div"),r=v("h4"),i=k(" Temporary/Dev URLs ("),o=k(g),s=k(")"),a=_(),l=v("button"),c=k("Delete All"),u=_(),d=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(r,"class","text-sm font-semibold text-purple-700"),l.disabled=t[45],A(l,"class","text-xs px-2 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50"),A(n,"class","flex items-center justify-between mb-3"),A(d,"class","space-y-2 max-h-48 overflow-y-auto"),A(e,"class","mb-6")},m(g,b){y(g,e,b),m(e,n),m(n,r),m(r,i),m(r,o),m(r,s),m(n,a),m(n,l),m(l,c),m(e,u),m(e,d);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(d,null);m(e,h),S&&S.m(e,null),f||(p=M(l,"click",t[163]),f=!0)},p(t,n){if(4096&n[1]&&g!==(g=t[43].temporaryUrls.length+"")&&T(o,g),16384&n[1]&&(l.disabled=t[45]),12288&n[1]|2&n[3]){let e;for(w=it(t[43].temporaryUrls.slice(0,t[44].temporaryUrls)),e=0;e<w.length;e+=1){const r=Qp(t,w,e);C[e]?C[e].p(r,n):(C[e]=ry(r),C[e].c(),C[e].m(d,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=w.length}t[43].temporaryUrls.length>t[44].temporaryUrls?S?S.p(t,n):(S=iy(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&b(e),x(C,t),S&&S.d(),f=!1,p()}}}function ry(t){let e,n,r,i,o,s,a,l,c,u,d,h,f=t[205].title+"",p=t[205].url+"";function g(){return t[164](t[205])}return{c(){e=v("div"),n=v("div"),r=v("div"),i=k(f),o=_(),s=v("div"),a=k(p),l=_(),c=v("button"),c.textContent="Delete",u=_(),A(r,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(n,"class","flex-1 min-w-0"),A(c,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(e,"class","p-2 bg-purple-50 rounded border border-purple-200 flex items-center justify-between")},m(t,f){y(t,e,f),m(e,n),m(n,r),m(r,i),m(n,o),m(n,s),m(s,a),m(e,l),m(e,c),m(e,u),d||(h=M(c,"click",g),d=!0)},p(e,n){t=e,12288&n[1]&&f!==(f=t[205].title+"")&&T(i,f),12288&n[1]&&p!==(p=t[205].url+"")&&T(a,p)},d(t){t&&b(e),d=!1,h()}}}function iy(t){let e,n,r,i,o,s,a,l,c=t[44].temporaryUrls+"",u=t[43].temporaryUrls.length+"";return{c(){e=v("button"),n=k("Show more ("),r=k(c),i=k(" of "),o=k(u),s=k(")"),A(e,"class","mt-2 text-xs text-purple-600 hover:underline")},m(c,u){y(c,e,u),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[165]),a=!0)},p(t,e){8192&e[1]&&c!==(c=t[44].temporaryUrls+"")&&T(r,c),4096&e[1]&&u!==(u=t[43].temporaryUrls.length+"")&&T(o,u)},d(t){t&&b(e),a=!1,l()}}}function oy(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g=t[43].lowScore.length+"",w=it(t[43].lowScore.slice(0,t[44].lowScore)),C=[];for(let e=0;e<w.length;e+=1)C[e]=sy(Yp(t,w,e));let S=t[43].lowScore.length>t[44].lowScore&&ay(t);return{c(){e=v("div"),n=v("div"),r=v("h4"),i=k(" Low Quality Score ("),o=k(g),s=k(")"),a=_(),l=v("button"),c=k("Delete All"),u=_(),d=v("div");for(let t=0;t<C.length;t+=1)C[t].c();h=_(),S&&S.c(),A(r,"class","text-sm font-semibold text-gray-700"),l.disabled=t[45],A(l,"class","text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 disabled:opacity-50"),A(n,"class","flex items-center justify-between mb-3"),A(d,"class","space-y-2 max-h-48 overflow-y-auto")},m(g,b){y(g,e,b),m(e,n),m(n,r),m(r,i),m(r,o),m(r,s),m(n,a),m(n,l),m(l,c),m(e,u),m(e,d);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(d,null);m(e,h),S&&S.m(e,null),f||(p=M(l,"click",t[166]),f=!0)},p(t,n){if(4096&n[1]&&g!==(g=t[43].lowScore.length+"")&&T(o,g),16384&n[1]&&(l.disabled=t[45]),12288&n[1]|2&n[3]){let e;for(w=it(t[43].lowScore.slice(0,t[44].lowScore)),e=0;e<w.length;e+=1){const r=Yp(t,w,e);C[e]?C[e].p(r,n):(C[e]=sy(r),C[e].c(),C[e].m(d,null))}for(;e<C.length;e+=1)C[e].d(1);C.length=w.length}t[43].lowScore.length>t[44].lowScore?S?S.p(t,n):(S=ay(t),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(t){t&&b(e),x(C,t),S&&S.d(),f=!1,p()}}}function sy(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S=t[205].title+"",D=t[205].url+"",P=t[205].usefulnessScore+"",E=t[205].uselessReasons?.join(", ")+"";function L(){return t[167](t[205])}return{c(){e=v("div"),n=v("div"),r=v("div"),i=k(S),o=_(),s=v("div"),a=k(D),l=_(),c=v("div"),u=k("Score: "),d=k(P),h=k("  "),f=k(E),p=_(),g=v("button"),g.textContent="Delete",x=_(),A(r,"class","text-sm truncate"),A(s,"class","text-xs text-gray-500 truncate"),A(c,"class","text-xs text-gray-400 mt-1"),A(n,"class","flex-1 min-w-0"),A(g,"class","ml-2 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(e,"class","p-2 bg-gray-50 rounded border border-gray-200 flex items-center justify-between")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(n,o),m(n,s),m(s,a),m(n,l),m(n,c),m(c,u),m(c,d),m(c,h),m(c,f),m(e,p),m(e,g),m(e,x),w||(C=M(g,"click",L),w=!0)},p(e,n){t=e,12288&n[1]&&S!==(S=t[205].title+"")&&T(i,S),12288&n[1]&&D!==(D=t[205].url+"")&&T(a,D),12288&n[1]&&P!==(P=t[205].usefulnessScore+"")&&T(d,P),12288&n[1]&&E!==(E=t[205].uselessReasons?.join(", ")+"")&&T(f,E)},d(t){t&&b(e),w=!1,C()}}}function ay(t){let e,n,r,i,o,s,a,l,c=t[44].lowScore+"",u=t[43].lowScore.length+"";return{c(){e=v("button"),n=k("Show more ("),r=k(c),i=k(" of "),o=k(u),s=k(")"),A(e,"class","mt-2 text-xs text-gray-600 hover:underline")},m(c,u){y(c,e,u),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(e,"click",t[168]),a=!0)},p(t,e){8192&e[1]&&c!==(c=t[44].lowScore+"")&&T(r,c),4096&e[1]&&u!==(u=t[43].lowScore.length+"")&&T(o,u)},d(t){t&&b(e),a=!1,l()}}}function ly(t){let e,n,r,i=t[12].length+"";return{c(){e=k("("),n=k(i),r=k(")")},m(t,i){y(t,e,i),y(t,n,i),y(t,r,i)},p(t,e){4096&e[0]&&i!==(i=t[12].length+"")&&T(n,i)},d(t){t&&(b(e),b(n),b(r))}}}function cy(t){let e,n,r,i,o,s,a=t[12].length+"";return{c(){e=v("button"),n=k("Delete All ("),r=k(a),i=k(")"),A(e,"class","px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700")},m(a,l){y(a,e,l),m(e,n),m(e,r),m(e,i),o||(s=M(e,"click",t[82]),o=!0)},p(t,e){4096&e[0]&&a!==(a=t[12].length+"")&&T(r,a)},d(t){t&&b(e),o=!1,s()}}}function uy(t){let e,n=it(t[12]),r=[];for(let e=0;e<n.length;e+=1)r[e]=fy(Kp(t,n,e));return{c(){e=v("div");for(let t=0;t<r.length;t+=1)r[t].c();A(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,n){y(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(4096&i[0]|524288&i[2]){let o;for(n=it(t[12]),o=0;o<n.length;o+=1){const s=Kp(t,n,o);r[o]?r[o].p(s,i):(r[o]=fy(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&b(e),x(r,t)}}}function dy(e){let n;return{c(){n=v("p"),n.textContent="All bookmark URLs are valid.",A(n,"class","text-gray-500")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function hy(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div> <span class="ml-3 text-gray-500">Checking URLs...</span>',A(n,"class","flex items-center justify-center py-8")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function fy(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S=t[205].title+"",D=t[205].url+"",P=(t[205].folderPath||"No folder")+"";function E(){return t[169](t[205])}return{c(){e=v("div"),n=v("div"),r=v("div"),i=v("div"),o=k(S),a=_(),l=v("div"),c=k(D),d=_(),h=v("div"),f=k(P),p=_(),g=v("button"),g.textContent="Delete",x=_(),A(i,"class","text-sm font-medium truncate"),A(i,"title",s=t[205].title),A(l,"class","text-xs text-red-600 truncate mt-1"),A(l,"title",u=t[205].url),A(h,"class","text-xs text-gray-500 mt-1"),A(r,"class","flex-1 min-w-0"),A(g,"class","flex-shrink-0 px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"),A(n,"class","flex justify-between items-start gap-2"),A(e,"class","border border-gray-200 rounded-lg p-3 bg-gray-50")},m(t,s){y(t,e,s),m(e,n),m(n,r),m(r,i),m(i,o),m(r,a),m(r,l),m(l,c),m(r,d),m(r,h),m(h,f),m(n,p),m(n,g),m(e,x),w||(C=M(g,"click",E),w=!0)},p(e,n){t=e,4096&n[0]&&S!==(S=t[205].title+"")&&T(o,S),4096&n[0]&&s!==(s=t[205].title)&&A(i,"title",s),4096&n[0]&&D!==(D=t[205].url+"")&&T(c,D),4096&n[0]&&u!==(u=t[205].url)&&A(l,"title",u),4096&n[0]&&P!==(P=(t[205].folderPath||"No folder")+"")&&T(f,P)},d(t){t&&b(e),w=!1,C()}}}function py(t){let e,n,r;return{c(){e=w("svg"),n=w("path"),r=k("\n                      Download Backup"),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"),A(e,"class","w-4 h-4 mr-2"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,i){y(t,e,i),m(e,n),y(t,r,i)},d(t){t&&(b(e),b(r))}}}function gy(t){let e,n,r,i;return{c(){e=w("svg"),n=w("circle"),r=w("path"),i=k("\n                      Creating Backup..."),A(n,"class","opacity-25"),A(n,"cx","12"),A(n,"cy","12"),A(n,"r","10"),A(n,"stroke","currentColor"),A(n,"stroke-width","4"),A(r,"class","opacity-75"),A(r,"fill","currentColor"),A(r,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),A(e,"class","animate-spin -ml-1 mr-2 h-4 w-4 text-white"),A(e,"fill","none"),A(e,"viewBox","0 0 24 24")},m(t,o){y(t,e,o),m(e,n),m(e,r),y(t,i,o)},d(t){t&&(b(e),b(i))}}}function my(t){let e,n;function r(t,e){return t[49].valid?by:yy}let i=r(t),o=i(t);return{c(){e=v("div"),o.c(),A(e,"class",n="mt-3 p-3 rounded-md "+(t[49].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))},m(t,n){y(t,e,n),o.m(e,null)},p(t,s){i===(i=r(t))&&o?o.p(t,s):(o.d(1),o=i(t),o&&(o.c(),o.m(e,null))),262144&s[1]&&n!==(n="mt-3 p-3 rounded-md "+(t[49].valid?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"))&&A(e,"class",n)},d(t){t&&b(e),o.d()}}}function yy(t){let e,n,r,i=it(t[49].issues),o=[];for(let e=0;e<i.length;e+=1)o[e]=xy(Up(t,i,e));return{c(){e=v("p"),e.textContent=" Invalid backup file",n=_(),r=v("ul");for(let t=0;t<o.length;t+=1)o[t].c();A(e,"class","text-sm text-red-800"),A(r,"class","text-xs text-red-600 mt-1")},m(t,i){y(t,e,i),y(t,n,i),y(t,r,i);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(r,null)},p(t,e){if(262144&e[1]){let n;for(i=it(t[49].issues),n=0;n<i.length;n+=1){const s=Up(t,i,n);o[n]?o[n].p(s,e):(o[n]=xy(s),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=i.length}},d(t){t&&(b(e),b(n),b(r)),x(o,t)}}}function by(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x=t[49].createdAt+"",w=(t[49].metadata?.totalBookmarks||0)+"",C=(t[49].metadata?.enrichedCount||0)+"",S=t[47]?"Restoring...":"Restore This Backup";return{c(){e=v("p"),n=k(" Valid backup from "),r=k(x),i=v("br"),o=_(),s=v("span"),a=k(w),l=k(" bookmarks, \n                            "),c=k(C),u=k(" enriched"),d=_(),h=v("button"),f=k(S),A(s,"class","text-xs text-green-600"),A(e,"class","text-sm text-green-800"),h.disabled=t[47],A(h,"class","mt-2 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 text-sm")},m(b,x){y(b,e,x),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),m(s,a),m(s,l),m(s,c),m(s,u),y(b,d,x),y(b,h,x),m(h,f),p||(g=M(h,"click",t[105]),p=!0)},p(t,e){262144&e[1]&&x!==(x=t[49].createdAt+"")&&T(r,x),262144&e[1]&&w!==(w=(t[49].metadata?.totalBookmarks||0)+"")&&T(a,w),262144&e[1]&&C!==(C=(t[49].metadata?.enrichedCount||0)+"")&&T(c,C),65536&e[1]&&S!==(S=t[47]?"Restoring...":"Restore This Backup")&&T(f,S),65536&e[1]&&(h.disabled=t[47])},d(t){t&&(b(e),b(d),b(h)),p=!1,g()}}}function xy(t){let e,n,r,i=t[234]+"";return{c(){e=v("li"),n=k(" "),r=k(i)},m(t,i){y(t,e,i),m(e,n),m(e,r)},p(t,e){262144&e[1]&&i!==(i=t[234]+"")&&T(r,i)},d(t){t&&b(e)}}}function vy(t){let e,n=it(t[48]),r=[];for(let e=0;e<n.length;e+=1)r[e]=ky(qp(t,n,e));return{c(){e=v("div");for(let t=0;t<r.length;t+=1)r[t].c();A(e,"class","space-y-2")},m(t,n){y(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(196608&i[1]|32768&i[3]){let o;for(n=it(t[48]),o=0;o<n.length;o+=1){const s=qp(t,n,o);r[o]?r[o].p(s,i):(r[o]=ky(s),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&b(e),x(r,t)}}}function wy(e){let n;return{c(){n=v("p"),n.textContent="No auto-backups yet. They will appear after your first restore or enrichment run.",A(n,"class","text-gray-500 text-sm")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function ky(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C=new Date(t[231].createdAt).toLocaleString()+"",S=(t[231].metadata?.totalBookmarks||0)+"",D=(t[231].metadata?.enrichedCount||0)+"";function P(){return t[170](t[233])}return{c(){e=v("div"),n=v("div"),r=v("span"),i=k(C),o=_(),s=v("span"),a=k("("),l=k(S),c=k(" bookmarks, "),u=k(D),d=k(" enriched)"),h=_(),f=v("button"),p=k("Restore"),g=_(),A(r,"class","text-sm font-medium text-gray-900"),A(s,"class","text-xs text-gray-500 ml-2"),f.disabled=t[47],A(f,"class","text-sm px-3 py-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded"),A(e,"class","flex justify-between items-center p-3 bg-gray-50 rounded-md")},m(t,b){y(t,e,b),m(e,n),m(n,r),m(r,i),m(n,o),m(n,s),m(s,a),m(s,l),m(s,c),m(s,u),m(s,d),m(e,h),m(e,f),m(f,p),m(e,g),x||(w=M(f,"click",P),x=!0)},p(e,n){t=e,131072&n[1]&&C!==(C=new Date(t[231].createdAt).toLocaleString()+"")&&T(i,C),131072&n[1]&&S!==(S=(t[231].metadata?.totalBookmarks||0)+"")&&T(l,S),131072&n[1]&&D!==(D=(t[231].metadata?.enrichedCount||0)+"")&&T(u,D),65536&n[1]&&(f.disabled=t[47])},d(t){t&&b(e),x=!1,w()}}}function _y(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,w,S,D,P,E,O,B,j,$,I,z,F,N,W,H,V,q,U,Y,Q,J,X,G,Z,ot,st,at,lt,ct,ut,dt,ht,ft,pt=1!==t[7]?"s":"",gt=t[3].length+"",mt=t[50]?"Cancel":"Select",yt=it(Object.values(Ka)),bt=[];for(let e=0;e<yt.length;e+=1)bt[e]=Ay(pg(t,yt,e));function xt(t,e){return"list"===t[51]?Ty:Dy}let vt=xt(t),wt=vt(t),kt=(t[1].domains.length>0||t[1].folders.length>0||t[1].dateRange||t[2]||t[1].tags.length>0||t[1].topics.length>0||t[1].types.length>0||t[1].creators.length>0||t[1].deadLinks||t[1].stale)&&Py(t),_t=t[50]&&Ny(t);const Ct=[Hy,Wy],Mt=[];function St(t,e){return"list"===t[51]?0:1}at=St(t),lt=Mt[at]=Ct[at](t);let At=t[8]&&Uy(t);return{c(){e=v("div"),n=v("div"),i=v("div"),o=v("h2"),s=k(t[7]),a=k(" bookmark"),l=k(pt),c=_(),u=v("div"),d=v("div"),h=k("Showing "),f=k(gt),p=k(" of "),g=k(t[7]),w=_(),S=v("select");for(let t=0;t<bt.length;t+=1)bt[t].c();D=_(),P=v("button"),E=k(mt),O=_(),B=v("button"),wt.c(),j=_(),kt&&kt.c(),$=_(),I=v("div"),z=v("div"),F=v("button"),F.textContent="+ Category",N=_(),W=v("button"),W.textContent="+ Domain",H=_(),V=v("button"),V.textContent="+ Folder",q=_(),U=v("button"),U.textContent="+ Platform",Y=_(),Q=v("button"),Q.textContent="+ Type",J=_(),X=v("button"),X.textContent="+ Dead Links",G=_(),Z=v("button"),Z.textContent="+ Stale",ot=_(),_t&&_t.c(),st=_(),lt.c(),ct=_(),At&&At.c(),ut=C(),A(o,"class","text-lg font-medium text-gray-900"),A(i,"class","flex items-center gap-3"),A(d,"class","text-sm text-gray-500"),A(S,"class","text-sm border border-gray-300 rounded-md px-2 py-1 bg-white"),void 0===t[0]&&K(()=>t[120].call(S)),A(P,"class","px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50"),R(P,"bg-blue-50",t[50]),R(P,"border-blue-300",t[50]),R(P,"text-blue-700",t[50]),A(B,"class","p-2 text-gray-500 hover:text-gray-700 border border-gray-300 rounded-md"),A(B,"title","Toggle view mode"),A(u,"class","flex flex-wrap items-center gap-2 sm:gap-4"),A(n,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"),A(e,"class","mb-4 flex flex-col gap-4"),A(F,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(W,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(V,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(U,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(Q,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(X,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(Z,"class","px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded border border-gray-200 transition-colors"),A(z,"class","flex flex-wrap gap-2"),A(I,"class","mb-4")},m(r,b){y(r,e,b),m(e,n),m(n,i),m(i,o),m(o,s),m(o,a),m(o,l),m(n,c),m(n,u),m(u,d),m(d,h),m(d,f),m(d,p),m(d,g),m(u,w),m(u,S);for(let t=0;t<bt.length;t+=1)bt[t]&&bt[t].m(S,null);L(S,t[0],!0),m(u,D),m(u,P),m(P,E),m(u,O),m(u,B),wt.m(B,null),m(e,j),kt&&kt.m(e,null),y(r,$,b),y(r,I,b),m(I,z),m(z,F),m(z,N),m(z,W),m(z,H),m(z,V),m(z,q),m(z,U),m(z,Y),m(z,Q),m(z,J),m(z,X),m(z,G),m(z,Z),y(r,ot,b),_t&&_t.m(r,b),y(r,st,b),Mt[at].m(r,b),y(r,ct,b),At&&At.m(r,b),y(r,ut,b),dt=!0,ht||(ft=[M(S,"change",t[120]),M(S,"change",t[121]),M(P,"click",t[96]),M(B,"click",t[103]),M(F,"click",t[133]),M(W,"click",t[134]),M(V,"click",t[135]),M(U,"click",t[136]),M(Q,"click",t[137]),M(X,"click",t[138]),M(Z,"click",t[139])],ht=!0)},p(t,n){if((!dt||128&n[0])&&T(s,t[7]),(!dt||128&n[0])&&pt!==(pt=1!==t[7]?"s":"")&&T(l,pt),(!dt||8&n[0])&&gt!==(gt=t[3].length+"")&&T(f,gt),(!dt||128&n[0])&&T(g,t[7]),0&n){let e;for(yt=it(Object.values(Ka)),e=0;e<yt.length;e+=1){const r=pg(t,yt,e);bt[e]?bt[e].p(r,n):(bt[e]=Ay(r),bt[e].c(),bt[e].m(S,null))}for(;e<bt.length;e+=1)bt[e].d(1);bt.length=yt.length}1&n[0]&&L(S,t[0]),(!dt||524288&n[1])&&mt!==(mt=t[50]?"Cancel":"Select")&&T(E,mt),(!dt||524288&n[1])&&R(P,"bg-blue-50",t[50]),(!dt||524288&n[1])&&R(P,"border-blue-300",t[50]),(!dt||524288&n[1])&&R(P,"text-blue-700",t[50]),vt!==(vt=xt(t))&&(wt.d(1),wt=vt(t),wt&&(wt.c(),wt.m(B,null))),t[1].domains.length>0||t[1].folders.length>0||t[1].dateRange||t[2]||t[1].tags.length>0||t[1].topics.length>0||t[1].types.length>0||t[1].creators.length>0||t[1].deadLinks||t[1].stale?kt?kt.p(t,n):(kt=Py(t),kt.c(),kt.m(e,null)):kt&&(kt.d(1),kt=null),t[50]?_t?_t.p(t,n):(_t=Ny(t),_t.c(),_t.m(st.parentNode,st)):_t&&(_t.d(1),_t=null);let r=at;at=St(t),at===r?Mt[at].p(t,n):(tt(),rt(Mt[r],1,1,()=>{Mt[r]=null}),et(),lt=Mt[at],lt?lt.p(t,n):(lt=Mt[at]=Ct[at](t),lt.c()),nt(lt,1),lt.m(ct.parentNode,ct)),t[8]?At?At.p(t,n):(At=Uy(t),At.c(),At.m(ut.parentNode,ut)):At&&(At.d(1),At=null)},i(t){dt||(nt(lt),dt=!0)},o(t){rt(lt),dt=!1},d(t){t&&(b(e),b($),b(I),b(ot),b(st),b(ct),b(ut)),x(bt,t),wt.d(),kt&&kt.d(),_t&&_t.d(t),Mt[at].d(t),At&&At.d(t),ht=!1,r(ft)}}}function Cy(e){let n;function r(t,e){return t[2]?Jy:Qy}let i=r(e),o=i(e);return{c(){n=v("div"),o.c(),A(n,"class","text-center text-gray-500 p-8")},m(t,e){y(t,n,e),o.m(n,null)},p(t,e){i===(i=r(t))&&o?o.p(t,e):(o.d(1),o=i(t),o&&(o.c(),o.m(n,null)))},i:t,o:t,d(t){t&&b(n),o.d()}}}function My(e){let n,r,i,o,s,a,l,c;return{c(){n=v("div"),r=v("p"),i=k("Error: "),o=k(e[5]),s=_(),a=v("button"),a.textContent="Retry",A(a,"class","mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"),A(n,"class","text-center text-red-600 p-8")},m(t,u){y(t,n,u),m(n,r),m(r,i),m(r,o),m(n,s),m(n,a),l||(c=M(a,"click",e[119]),l=!0)},p(t,e){32&e[0]&&T(o,t[5])},i:t,o:t,d(t){t&&b(n),l=!1,c()}}}function Sy(e){let n;return{c(){n=v("div"),n.innerHTML='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>',A(n,"class","flex items-center justify-center h-64")},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&b(n)}}}function Ay(e){let n,r,i=e[228].label+"";return{c(){n=v("option"),r=k(i),n.__value=e[228].key,P(n,n.__value)},m(t,e){y(t,n,e),m(n,r)},p:t,d(t){t&&b(n)}}}function Dy(t){let e,n;return{c(){e=w("svg"),n=w("path"),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M4 6h16M4 10h16M4 14h16M4 18h16"),A(e,"class","w-4 h-4"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,r){y(t,e,r),m(e,n)},d(t){t&&b(e)}}}function Ty(t){let e,n;return{c(){e=w("svg"),n=w("path"),A(n,"stroke-linecap","round"),A(n,"stroke-linejoin","round"),A(n,"stroke-width","2"),A(n,"d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"),A(e,"class","w-4 h-4"),A(e,"fill","none"),A(e,"stroke","currentColor"),A(e,"viewBox","0 0 24 24")},m(t,r){y(t,e,r),m(e,n)},d(t){t&&b(e)}}}function Py(t){let e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,w,k=t[2]&&Ey(t),C=it(t[1].domains),S=[];for(let e=0;e<C.length;e+=1)S[e]=Ly(fg(t,C,e));let D=it(t[1].folders),T=[];for(let e=0;e<D.length;e+=1)T[e]=Oy(hg(t,D,e));let P=it(t[1].topics),E=[];for(let e=0;e<P.length;e+=1)E[e]=Ry(dg(t,P,e));let L=it(t[1].types),O=[];for(let e=0;e<L.length;e+=1)O[e]=By(ug(t,L,e));let R=it(t[1].creators),B=[];for(let e=0;e<R.length;e+=1)B[e]=jy(cg(t,R,e));let j=it(t[1].tags),$=[];for(let e=0;e<j.length;e+=1)$[e]=$y(lg(t,j,e));let I=t[1].dateRange&&Iy(t),z=t[1].deadLinks&&zy(t),F=t[1].stale&&Fy(t);return{c(){e=v("div"),n=v("span"),n.textContent="Filters:",r=_(),k&&k.c(),i=_();for(let t=0;t<S.length;t+=1)S[t].c();o=_();for(let t=0;t<T.length;t+=1)T[t].c();s=_();for(let t=0;t<E.length;t+=1)E[t].c();a=_();for(let t=0;t<O.length;t+=1)O[t].c();l=_();for(let t=0;t<B.length;t+=1)B[t].c();c=_();for(let t=0;t<$.length;t+=1)$[t].c();u=_(),I&&I.c(),d=_(),z&&z.c(),h=_(),F&&F.c(),f=_(),p=v("button"),p.textContent="Clear all",A(n,"class","text-sm text-gray-500 mr-1"),A(p,"class","text-xs text-red-600 hover:text-red-800 underline ml-2"),A(e,"class","flex flex-wrap items-center gap-2")},m(b,x){y(b,e,x),m(e,n),m(e,r),k&&k.m(e,null),m(e,i);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(e,null);m(e,o);for(let t=0;t<T.length;t+=1)T[t]&&T[t].m(e,null);m(e,s);for(let t=0;t<E.length;t+=1)E[t]&&E[t].m(e,null);m(e,a);for(let t=0;t<O.length;t+=1)O[t]&&O[t].m(e,null);m(e,l);for(let t=0;t<B.length;t+=1)B[t]&&B[t].m(e,null);m(e,c);for(let t=0;t<$.length;t+=1)$[t]&&$[t].m(e,null);m(e,u),I&&I.m(e,null),m(e,d),z&&z.m(e,null),m(e,h),F&&F.m(e,null),m(e,f),m(e,p),g||(w=M(p,"click",t[132]),g=!0)},p(t,n){if(t[2]?k?k.p(t,n):(k=Ey(t),k.c(),k.m(e,i)):k&&(k.d(1),k=null),2&n[0]){let r;for(C=it(t[1].domains),r=0;r<C.length;r+=1){const i=fg(t,C,r);S[r]?S[r].p(i,n):(S[r]=Ly(i),S[r].c(),S[r].m(e,o))}for(;r<S.length;r+=1)S[r].d(1);S.length=C.length}if(2&n[0]){let r;for(D=it(t[1].folders),r=0;r<D.length;r+=1){const i=hg(t,D,r);T[r]?T[r].p(i,n):(T[r]=Oy(i),T[r].c(),T[r].m(e,s))}for(;r<T.length;r+=1)T[r].d(1);T.length=D.length}if(2&n[0]){let r;for(P=it(t[1].topics),r=0;r<P.length;r+=1){const i=dg(t,P,r);E[r]?E[r].p(i,n):(E[r]=Ry(i),E[r].c(),E[r].m(e,a))}for(;r<E.length;r+=1)E[r].d(1);E.length=P.length}if(2&n[0]){let r;for(L=it(t[1].types),r=0;r<L.length;r+=1){const i=ug(t,L,r);O[r]?O[r].p(i,n):(O[r]=By(i),O[r].c(),O[r].m(e,l))}for(;r<O.length;r+=1)O[r].d(1);O.length=L.length}if(2&n[0]){let r;for(R=it(t[1].creators),r=0;r<R.length;r+=1){const i=cg(t,R,r);B[r]?B[r].p(i,n):(B[r]=jy(i),B[r].c(),B[r].m(e,c))}for(;r<B.length;r+=1)B[r].d(1);B.length=R.length}if(2&n[0]){let r;for(j=it(t[1].tags),r=0;r<j.length;r+=1){const i=lg(t,j,r);$[r]?$[r].p(i,n):($[r]=$y(i),$[r].c(),$[r].m(e,u))}for(;r<$.length;r+=1)$[r].d(1);$.length=j.length}t[1].dateRange?I?I.p(t,n):(I=Iy(t),I.c(),I.m(e,d)):I&&(I.d(1),I=null),t[1].deadLinks?z||(z=zy(t),z.c(),z.m(e,h)):z&&(z.d(1),z=null),t[1].stale?F||(F=Fy(t),F.c(),F.m(e,f)):F&&(F.d(1),F=null)},d(t){t&&b(e),k&&k.d(),x(S,t),x(T,t),x(E,t),x(O,t),x(B,t),x($,t),I&&I.d(),z&&z.d(),F&&F.d(),g=!1,w()}}}function Ey(t){let e,n,r,i,o,s,a;return{c(){e=v("span"),n=k("Search: "),r=k(t[2]),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove search filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-blue-400 hover:text-blue-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800")},m(l,c){y(l,e,c),m(e,n),m(e,r),m(e,i),m(e,o),s||(a=M(o,"click",t[122]),s=!0)},p(t,e){4&e[0]&&T(r,t[2])},d(t){t&&b(e),s=!1,a()}}}function Ly(t){let e,n,r,i,o,s,a,l,c=t[225]+"";function u(){return t[123](t[225])}return{c(){e=v("span"),n=k("Domain: "),r=k(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove domain filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-green-400 hover:text-green-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800")},m(t,c){y(t,e,c),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",u),a=!0)},p(e,n){t=e,2&n[0]&&c!==(c=t[225]+"")&&T(r,c)},d(t){t&&b(e),a=!1,l()}}}function Oy(t){let e,n,r,i,o,s,a,l,c=t[222]+"";function u(){return t[124](t[222])}return{c(){e=v("span"),n=k("Folder: "),r=k(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove folder filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-yellow-400 hover:text-yellow-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800")},m(t,c){y(t,e,c),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",u),a=!0)},p(e,n){t=e,2&n[0]&&c!==(c=t[222]+"")&&T(r,c)},d(t){t&&b(e),a=!1,l()}}}function Ry(t){let e,n,r,i,o,s,a,l,c=t[219]+"";function u(){return t[125](t[219])}return{c(){e=v("span"),n=k("Topic: "),r=k(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove topic filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-indigo-400 hover:text-indigo-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800")},m(t,c){y(t,e,c),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",u),a=!0)},p(e,n){t=e,2&n[0]&&c!==(c=t[219]+"")&&T(r,c)},d(t){t&&b(e),a=!1,l()}}}function By(t){let e,n,r,i,o,s,a,l,c=t[216]+"";function u(){return t[126](t[216])}return{c(){e=v("span"),n=k("Type: "),r=k(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove type filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-purple-400 hover:text-purple-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800")},m(t,c){y(t,e,c),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",u),a=!0)},p(e,n){t=e,2&n[0]&&c!==(c=t[216]+"")&&T(r,c)},d(t){t&&b(e),a=!1,l()}}}function jy(t){let e,n,r,i,o,s,a,l,c=t[213].creator+"";function u(){return t[127](t[213])}return{c(){e=v("span"),n=k("Creator: "),r=k(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove creator filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-pink-400 hover:text-pink-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-800")},m(t,c){y(t,e,c),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",u),a=!0)},p(e,n){t=e,2&n[0]&&c!==(c=t[213].creator+"")&&T(r,c)},d(t){t&&b(e),a=!1,l()}}}function $y(t){let e,n,r,i,o,s,a,l,c=t[210]+"";function u(){return t[128](t[210])}return{c(){e=v("span"),n=k("Tag: "),r=k(c),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove tag filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',s=_(),A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-gray-400 hover:text-gray-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800")},m(t,c){y(t,e,c),m(e,n),m(e,r),m(e,i),m(e,o),m(e,s),a||(l=M(o,"click",u),a=!0)},p(e,n){t=e,2&n[0]&&c!==(c=t[210]+"")&&T(r,c)},d(t){t&&b(e),a=!1,l()}}}function Iy(t){let e,n,r,i,o,s,a,l="week"===t[1].dateRange.period?"This Week":"twoWeek"===t[1].dateRange.period?"This 2-Week":"month"===t[1].dateRange.period?"This Month":"threeMonth"===t[1].dateRange.period?"This 3-Month":"sixMonth"===t[1].dateRange.period?"This 6-Month":"year"===t[1].dateRange.period?"This Year":"older"===t[1].dateRange.period?"Older":"Custom Range";return{c(){e=v("span"),n=k("Date: "),r=k(l),i=_(),o=v("button"),o.innerHTML='<span class="sr-only">Remove date filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',A(o,"type","button"),A(o,"class","ml-1.5 inline-flex items-center justify-center text-blue-400 hover:text-blue-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800")},m(l,c){y(l,e,c),m(e,n),m(e,r),m(e,i),m(e,o),s||(a=M(o,"click",t[129]),s=!0)},p(t,e){2&e[0]&&l!==(l="week"===t[1].dateRange.period?"This Week":"twoWeek"===t[1].dateRange.period?"This 2-Week":"month"===t[1].dateRange.period?"This Month":"threeMonth"===t[1].dateRange.period?"This 3-Month":"sixMonth"===t[1].dateRange.period?"This 6-Month":"year"===t[1].dateRange.period?"This Year":"older"===t[1].dateRange.period?"Older":"Custom Range")&&T(r,l)},d(t){t&&b(e),s=!1,a()}}}function zy(t){let e,n,r,i,o;return{c(){e=v("span"),n=k("Dead Links\n                      "),r=v("button"),r.innerHTML='<span class="sr-only">Remove dead links filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',A(r,"type","button"),A(r,"class","ml-1.5 inline-flex items-center justify-center text-red-400 hover:text-red-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800")},m(s,a){y(s,e,a),m(e,n),m(e,r),i||(o=M(r,"click",t[130]),i=!0)},d(t){t&&b(e),i=!1,o()}}}function Fy(t){let e,n,r,i,o;return{c(){e=v("span"),n=k("Stale\n                      "),r=v("button"),r.innerHTML='<span class="sr-only">Remove stale filter</span> <svg class="h-3 w-3" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',A(r,"type","button"),A(r,"class","ml-1.5 inline-flex items-center justify-center text-orange-400 hover:text-orange-600 focus:outline-none"),A(e,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800")},m(s,a){y(s,e,a),m(e,n),m(e,r),i||(o=M(r,"click",t[131]),i=!0)},d(t){t&&b(e),i=!1,o()}}}function Ny(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,S,D,P,E,L=t[57].size+"";return{c(){e=v("div"),n=v("div"),i=v("div"),o=v("span"),s=k(L),a=k(" selected"),l=_(),c=v("button"),c.textContent="Select All",u=_(),d=v("button"),d.textContent="Deselect All",h=_(),f=v("div"),p=v("button"),g=k("Open Selected"),w=_(),C=v("button"),S=k("Delete Selected"),A(o,"class","text-sm text-blue-700"),A(c,"class","text-sm text-blue-600 hover:text-blue-800"),A(d,"class","text-sm text-blue-600 hover:text-blue-800"),A(i,"class","flex flex-wrap items-center gap-2 sm:gap-4"),p.disabled=x=0===t[57].size,A(p,"class","px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"),C.disabled=D=0===t[57].size,A(C,"class","px-4 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed"),A(f,"class","flex gap-2 self-start sm:self-auto"),A(n,"class","flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"),A(e,"class","mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md")},m(r,b){y(r,e,b),m(e,n),m(n,i),m(i,o),m(o,s),m(o,a),m(i,l),m(i,c),m(i,u),m(i,d),m(n,h),m(n,f),m(f,p),m(p,g),m(f,w),m(f,C),m(C,S),P||(E=[M(c,"click",t[97]),M(d,"click",t[98]),M(p,"click",t[99]),M(C,"click",t[100])],P=!0)},p(t,e){67108864&e[1]&&L!==(L=t[57].size+"")&&T(s,L),67108864&e[1]&&x!==(x=0===t[57].size)&&(p.disabled=x),67108864&e[1]&&D!==(D=0===t[57].size)&&(C.disabled=D)},d(t){t&&b(e),P=!1,r(E)}}}function Wy(t){let e,n,r=[],i=new Map,o=it(t[3]);const s=t=>t[205].id;for(let e=0;e<o.length;e+=1){let n=sg(t,o,e),a=s(n);i.set(a,r[e]=Vy(a,n))}return{c(){e=v("div");for(let t=0;t<r.length;t+=1)r[t].c();A(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(t,i){y(t,e,i);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null);n=!0},p(t,n){1032&n[0]&&(o=it(t[3]),tt(),r=st(r,n,s,1,t,o,i,e,ot,Vy,null,sg),et())},i(t){if(!n){for(let t=0;t<o.length;t+=1)nt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&b(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Hy(t){let e,n,r,i=[],o=new Map,s=it(t[3]);const a=t=>t[205].id;for(let e=0;e<s.length;e+=1){let n=ag(t,s,e),r=a(n);o.set(r,i[e]=qy(r,n))}return{c(){e=v("div"),n=v("div");for(let t=0;t<i.length;t+=1)i[t].c();A(n,"class","max-w-full overflow-x-auto"),A(e,"class","bg-white rounded-lg shadow overflow-hidden")},m(t,o){y(t,e,o),m(e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(n,null);r=!0},p(t,e){1032&e[0]|524288&e[1]|768&e[3]&&(s=it(t[3]),tt(),i=st(i,e,a,1,t,s,o,n,ot,qy,null,ag),et())},i(t){if(!r){for(let t=0;t<s.length;t+=1)nt(i[t]);r=!0}},o(t){for(let t=0;t<i.length;t+=1)rt(i[t]);r=!1},d(t){t&&b(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function Vy(t,e){let n,r,i;return r=new wc({props:{bookmark:e[205],parsedSearchQuery:e[10]}}),{key:t,first:null,c(){n=C(),at(r.$$.fragment),this.first=n},m(t,e){y(t,n,e),lt(r,t,e),i=!0},p(t,n){e=t;const i={};8&n[0]&&(i.bookmark=e[205]),1024&n[0]&&(i.parsedSearchQuery=e[10]),r.$set(i)},i(t){i||(nt(r.$$.fragment,t),i=!0)},o(t){rt(r.$$.fragment,t),i=!1},d(t){t&&b(n),ct(r,t)}}}function qy(t,e){let n,r,i;return r=new Ec({props:{bookmark:e[205],multiSelectMode:e[50],parsedSearchQuery:e[10]}}),r.$on("delete",e[101]),r.$on("enrich",e[102]),{key:t,first:null,c(){n=C(),at(r.$$.fragment),this.first=n},m(t,e){y(t,n,e),lt(r,t,e),i=!0},p(t,n){e=t;const i={};8&n[0]&&(i.bookmark=e[205]),524288&n[1]&&(i.multiSelectMode=e[50]),1024&n[0]&&(i.parsedSearchQuery=e[10]),r.$set(i)},i(t){i||(nt(r.$$.fragment,t),i=!0)},o(t){rt(r.$$.fragment,t),i=!1},d(t){t&&b(n),ct(r,t)}}}function Uy(t){let e,n,r,i;function o(t,e){return t[4]?Yy:Ky}let s=o(t),a=s(t);return{c(){e=v("div"),n=v("button"),a.c(),n.disabled=t[4],A(n,"class","px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"),A(e,"class","mt-8 text-center")},m(o,s){y(o,e,s),m(e,n),a.m(n,null),r||(i=M(n,"click",t[59]),r=!0)},p(t,e){s!==(s=o(t))&&(a.d(1),a=s(t),a&&(a.c(),a.m(n,null))),16&e[0]&&(n.disabled=t[4])},d(t){t&&b(e),a.d(),r=!1,i()}}}function Ky(t){let e;return{c(){e=k("Load More")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Yy(t){let e;return{c(){e=v("div"),e.innerHTML='<div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>\n                      Loading...',A(e,"class","flex items-center")},m(t,n){y(t,e,n)},d(t){t&&b(e)}}}function Qy(e){let n;return{c(){n=v("p"),n.textContent="No bookmarks found"},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Jy(t){let e,n,r,i;return{c(){e=v("p"),n=k('No bookmarks found for "'),r=k(t[2]),i=k('"')},m(t,o){y(t,e,o),m(e,n),m(e,r),m(e,i)},p(t,e){4&e[0]&&T(r,t[2])},d(t){t&&b(e)}}}function Xy(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,C,D,P,L,O,R,B,j,$,I,z,F,N,W,H,V,q,U,K,Y,Q,J,X,G,Z,tt,et,nt,rt,it,ot,st,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,yt,bt,xt,vt,wt,kt,_t,Ct,Mt,St,At,Dt,Tt,Pt,Et,Lt,Ot,Rt,Bt,jt,$t,It,zt,Ft,Nt,Wt,Ht,Vt,qt,Ut,Kt,Yt,Qt,Jt,Xt,Gt,Zt,te,ee,ne,re,ie,oe,se,ae,le,ce,ue,de,he,fe,pe,ge,me,ye,be,xe,ve,we,ke,_e,Ce,Me,Se,Ae,De,Te,Pe,Ee,Le,Oe,Re,Be,je,$e,Ie,ze,Fe,Ne,We,He,Ve,qe,Ue,Ke,Ye,Qe,Je,Xe,Ge,Ze,tn,en,nn,rn,on,sn,an,ln,cn,un,dn,hn,fn,pn,gn,mn,yn,bn,xn,vn,wn,kn,_n,Cn,Mn,Sn,An,Dn=Math.round(100*t[42].similarity)+"",Tn=Math.round(100*(t[42].breakdown?.titleFuzzy||0))+"",Pn=Math.round(100*(t[42].breakdown?.titleWords||0))+"",En=Math.round(100*(t[42].breakdown?.descriptionWords||0))+"",Ln=Math.round(100*(t[42].breakdown?.keywordsOverlap||0))+"",On=t[42].bookmark1.title+"",Rn=t[42].bookmark1.url+"",Bn=(t[42].bookmark1.domain||"N/A")+"",jn=(t[42].bookmark1.category||"Uncategorized")+"",$n=(t[42].bookmark1.description||"No description")+"",In=new Date(t[42].bookmark1.dateAdded).toLocaleDateString()+"",zn=t[42].coverage1.percentage.toFixed(0)+"",Fn=t[42].bookmark2.title+"",Nn=t[42].bookmark2.url+"",Wn=(t[42].bookmark2.domain||"N/A")+"",Hn=(t[42].bookmark2.category||"Uncategorized")+"",Vn=(t[42].bookmark2.description||"No description")+"",qn=new Date(t[42].bookmark2.dateAdded).toLocaleDateString()+"",Un=t[42].coverage2.percentage.toFixed(0)+"";function Kn(t,e){return t[42].bookmark1.keywords?.length>0?Zy:Gy}let Yn=Kn(t),Qn=Yn(t);function Jn(t,e){return t[42].bookmark2.keywords?.length>0?nb:eb}let Xn=Jn(t),Gn=Xn(t);return{c(){e=v("div"),n=v("div"),i=v("div"),o=v("h3"),o.textContent="Compare Similar Bookmarks",s=_(),a=v("button"),a.innerHTML='<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',l=_(),c=v("div"),u=v("div"),d=v("div"),h=v("span"),f=k(Dn),p=k("%"),g=_(),x=v("span"),x.textContent="Overall Similarity",w=_(),C=v("div"),D=v("h4"),D.textContent="Similarity Breakdown",P=_(),L=v("div"),O=v("div"),R=v("div"),B=k(Tn),j=k("%"),$=_(),I=v("div"),I.textContent="Title (Fuzzy)",z=_(),F=v("div"),N=v("div"),W=k(Pn),H=k("%"),V=_(),q=v("div"),q.textContent="Title (Words)",U=_(),K=v("div"),Y=v("div"),Q=k(En),J=k("%"),X=_(),G=v("div"),G.textContent="Description",Z=_(),tt=v("div"),et=v("div"),nt=k(Ln),rt=k("%"),it=_(),ot=v("div"),ot.textContent="Keywords",st=_(),at=v("div"),lt=v("div"),ct=v("div"),ct.innerHTML='<span class="text-sm font-medium text-blue-800">Bookmark 1</span>',ut=_(),dt=v("div"),ht=v("div"),ft=v("div"),ft.textContent="Title",pt=_(),gt=v("div"),mt=k(On),yt=_(),bt=v("div"),xt=v("div"),xt.textContent="URL",vt=_(),wt=v("a"),kt=k(Rn),Ct=_(),Mt=v("div"),St=v("div"),St.textContent="Domain",At=_(),Dt=v("div"),Tt=k(Bn),Pt=_(),Et=v("div"),Lt=v("div"),Lt.textContent="Category",Ot=_(),Rt=v("div"),Bt=k(jn),jt=_(),$t=v("div"),It=v("div"),It.textContent="Description",zt=_(),Ft=v("div"),Nt=k($n),Wt=_(),Ht=v("div"),Vt=v("div"),Vt.textContent="Keywords",qt=_(),Ut=v("div"),Qn.c(),Kt=_(),Yt=v("div"),Qt=v("div"),Qt.textContent="Added",Jt=_(),Xt=v("div"),Gt=k(In),Zt=_(),te=v("div"),ee=v("div"),ee.textContent="Metadata Coverage",ne=_(),re=v("div"),ie=v("div"),oe=_(),se=v("div"),ae=k(zn),le=k("%"),ce=_(),ue=v("div"),de=v("a"),he=k("Open"),pe=_(),ge=v("button"),ge.textContent="Delete This",me=_(),ye=v("div"),be=v("div"),be.innerHTML='<span class="text-sm font-medium text-green-800">Bookmark 2</span>',xe=_(),ve=v("div"),we=v("div"),ke=v("div"),ke.textContent="Title",_e=_(),Ce=v("div"),Me=k(Fn),Se=_(),Ae=v("div"),De=v("div"),De.textContent="URL",Te=_(),Pe=v("a"),Ee=k(Nn),Oe=_(),Re=v("div"),Be=v("div"),Be.textContent="Domain",je=_(),$e=v("div"),Ie=k(Wn),ze=_(),Fe=v("div"),Ne=v("div"),Ne.textContent="Category",We=_(),He=v("div"),Ve=k(Hn),qe=_(),Ue=v("div"),Ke=v("div"),Ke.textContent="Description",Ye=_(),Qe=v("div"),Je=k(Vn),Xe=_(),Ge=v("div"),Ze=v("div"),Ze.textContent="Keywords",tn=_(),en=v("div"),Gn.c(),nn=_(),rn=v("div"),on=v("div"),on.textContent="Added",sn=_(),an=v("div"),ln=k(qn),cn=_(),un=v("div"),dn=v("div"),dn.textContent="Metadata Coverage",hn=_(),fn=v("div"),pn=v("div"),gn=_(),mn=v("div"),yn=k(Un),bn=k("%"),xn=_(),vn=v("div"),wn=v("a"),kn=k("Open"),Cn=_(),Mn=v("button"),Mn.textContent="Delete This",A(o,"class","text-lg font-semibold text-gray-900"),A(a,"class","text-gray-400 hover:text-gray-600"),A(i,"class","sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center"),A(h,"class","text-2xl font-bold text-indigo-700"),A(x,"class","ml-2 text-sm text-indigo-600"),A(d,"class","inline-flex items-center px-4 py-2 bg-indigo-100 rounded-full"),A(u,"class","text-center mb-6"),A(D,"class","text-sm font-semibold text-gray-700 mb-3"),A(R,"class","text-lg font-bold text-blue-600"),A(I,"class","text-xs text-gray-500"),A(O,"class","text-center"),A(N,"class","text-lg font-bold text-green-600"),A(q,"class","text-xs text-gray-500"),A(F,"class","text-center"),A(Y,"class","text-lg font-bold text-purple-600"),A(G,"class","text-xs text-gray-500"),A(K,"class","text-center"),A(et,"class","text-lg font-bold text-orange-600"),A(ot,"class","text-xs text-gray-500"),A(tt,"class","text-center"),A(L,"class","grid grid-cols-2 md:grid-cols-4 gap-3"),A(C,"class","mb-6 p-4 bg-gray-50 rounded-lg"),A(ct,"class","bg-blue-50 px-4 py-2 border-b border-blue-200"),A(ft,"class","text-xs text-gray-500 uppercase mb-1"),A(gt,"class","text-sm font-medium"),A(xt,"class","text-xs text-gray-500 uppercase mb-1"),A(wt,"href",_t=t[42].bookmark1.url),A(wt,"target","_blank"),A(wt,"rel","noopener"),A(wt,"class","text-sm text-blue-600 hover:underline break-all"),A(St,"class","text-xs text-gray-500 uppercase mb-1"),A(Dt,"class","text-sm"),A(Lt,"class","text-xs text-gray-500 uppercase mb-1"),A(Rt,"class","text-sm"),A(It,"class","text-xs text-gray-500 uppercase mb-1"),A(Ft,"class","text-sm text-gray-600"),A(Vt,"class","text-xs text-gray-500 uppercase mb-1"),A(Ut,"class","flex flex-wrap gap-1"),A(Qt,"class","text-xs text-gray-500 uppercase mb-1"),A(Xt,"class","text-sm"),A(ee,"class","text-xs text-gray-500 uppercase mb-1"),A(ie,"class","bg-blue-600 h-2 rounded-full"),E(ie,"width",t[42].coverage1.percentage+"%"),A(re,"class","w-full bg-gray-200 rounded-full h-2"),A(se,"class","text-xs text-gray-400 mt-1"),A(de,"href",fe=t[42].bookmark1.url),A(de,"target","_blank"),A(de,"rel","noopener"),A(de,"class","flex-1 px-3 py-2 text-center text-sm bg-gray-100 rounded hover:bg-gray-200"),A(ge,"class","flex-1 px-3 py-2 text-center text-sm bg-red-600 text-white rounded hover:bg-red-700"),A(ue,"class","pt-3 border-t border-gray-200 flex gap-2"),A(dt,"class","p-4 space-y-3"),A(lt,"class","border border-gray-200 rounded-lg overflow-hidden"),A(be,"class","bg-green-50 px-4 py-2 border-b border-green-200"),A(ke,"class","text-xs text-gray-500 uppercase mb-1"),A(Ce,"class","text-sm font-medium"),A(De,"class","text-xs text-gray-500 uppercase mb-1"),A(Pe,"href",Le=t[42].bookmark2.url),A(Pe,"target","_blank"),A(Pe,"rel","noopener"),A(Pe,"class","text-sm text-blue-600 hover:underline break-all"),A(Be,"class","text-xs text-gray-500 uppercase mb-1"),A($e,"class","text-sm"),A(Ne,"class","text-xs text-gray-500 uppercase mb-1"),A(He,"class","text-sm"),A(Ke,"class","text-xs text-gray-500 uppercase mb-1"),A(Qe,"class","text-sm text-gray-600"),A(Ze,"class","text-xs text-gray-500 uppercase mb-1"),A(en,"class","flex flex-wrap gap-1"),A(on,"class","text-xs text-gray-500 uppercase mb-1"),A(an,"class","text-sm"),A(dn,"class","text-xs text-gray-500 uppercase mb-1"),A(pn,"class","bg-green-600 h-2 rounded-full"),E(pn,"width",t[42].coverage2.percentage+"%"),A(fn,"class","w-full bg-gray-200 rounded-full h-2"),A(mn,"class","text-xs text-gray-400 mt-1"),A(wn,"href",_n=t[42].bookmark2.url),A(wn,"target","_blank"),A(wn,"rel","noopener"),A(wn,"class","flex-1 px-3 py-2 text-center text-sm bg-gray-100 rounded hover:bg-gray-200"),A(Mn,"class","flex-1 px-3 py-2 text-center text-sm bg-red-600 text-white rounded hover:bg-red-700"),A(vn,"class","pt-3 border-t border-gray-200 flex gap-2"),A(ve,"class","p-4 space-y-3"),A(ye,"class","border border-gray-200 rounded-lg overflow-hidden"),A(at,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),A(c,"class","p-6"),A(n,"class","bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"),A(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4")},m(r,b){y(r,e,b),m(e,n),m(n,i),m(i,o),m(i,s),m(i,a),m(n,l),m(n,c),m(c,u),m(u,d),m(d,h),m(h,f),m(h,p),m(d,g),m(d,x),m(c,w),m(c,C),m(C,D),m(C,P),m(C,L),m(L,O),m(O,R),m(R,B),m(R,j),m(O,$),m(O,I),m(L,z),m(L,F),m(F,N),m(N,W),m(N,H),m(F,V),m(F,q),m(L,U),m(L,K),m(K,Y),m(Y,Q),m(Y,J),m(K,X),m(K,G),m(L,Z),m(L,tt),m(tt,et),m(et,nt),m(et,rt),m(tt,it),m(tt,ot),m(c,st),m(c,at),m(at,lt),m(lt,ct),m(lt,ut),m(lt,dt),m(dt,ht),m(ht,ft),m(ht,pt),m(ht,gt),m(gt,mt),m(dt,yt),m(dt,bt),m(bt,xt),m(bt,vt),m(bt,wt),m(wt,kt),m(dt,Ct),m(dt,Mt),m(Mt,St),m(Mt,At),m(Mt,Dt),m(Dt,Tt),m(dt,Pt),m(dt,Et),m(Et,Lt),m(Et,Ot),m(Et,Rt),m(Rt,Bt),m(dt,jt),m(dt,$t),m($t,It),m($t,zt),m($t,Ft),m(Ft,Nt),m(dt,Wt),m(dt,Ht),m(Ht,Vt),m(Ht,qt),m(Ht,Ut),Qn.m(Ut,null),m(dt,Kt),m(dt,Yt),m(Yt,Qt),m(Yt,Jt),m(Yt,Xt),m(Xt,Gt),m(dt,Zt),m(dt,te),m(te,ee),m(te,ne),m(te,re),m(re,ie),m(te,oe),m(te,se),m(se,ae),m(se,le),m(dt,ce),m(dt,ue),m(ue,de),m(de,he),m(ue,pe),m(ue,ge),m(at,me),m(at,ye),m(ye,be),m(ye,xe),m(ye,ve),m(ve,we),m(we,ke),m(we,_e),m(we,Ce),m(Ce,Me),m(ve,Se),m(ve,Ae),m(Ae,De),m(Ae,Te),m(Ae,Pe),m(Pe,Ee),m(ve,Oe),m(ve,Re),m(Re,Be),m(Re,je),m(Re,$e),m($e,Ie),m(ve,ze),m(ve,Fe),m(Fe,Ne),m(Fe,We),m(Fe,He),m(He,Ve),m(ve,qe),m(ve,Ue),m(Ue,Ke),m(Ue,Ye),m(Ue,Qe),m(Qe,Je),m(ve,Xe),m(ve,Ge),m(Ge,Ze),m(Ge,tn),m(Ge,en),Gn.m(en,null),m(ve,nn),m(ve,rn),m(rn,on),m(rn,sn),m(rn,an),m(an,ln),m(ve,cn),m(ve,un),m(un,dn),m(un,hn),m(un,fn),m(fn,pn),m(un,gn),m(un,mn),m(mn,yn),m(mn,bn),m(ve,xn),m(ve,vn),m(vn,wn),m(wn,kn),m(vn,Cn),m(vn,Mn),Sn||(An=[M(a,"click",t[91]),M(ge,"click",t[171]),M(Mn,"click",t[172]),M(n,"click",S(t[113])),M(e,"click",t[91])],Sn=!0)},p(t,e){2048&e[1]&&Dn!==(Dn=Math.round(100*t[42].similarity)+"")&&T(f,Dn),2048&e[1]&&Tn!==(Tn=Math.round(100*(t[42].breakdown?.titleFuzzy||0))+"")&&T(B,Tn),2048&e[1]&&Pn!==(Pn=Math.round(100*(t[42].breakdown?.titleWords||0))+"")&&T(W,Pn),2048&e[1]&&En!==(En=Math.round(100*(t[42].breakdown?.descriptionWords||0))+"")&&T(Q,En),2048&e[1]&&Ln!==(Ln=Math.round(100*(t[42].breakdown?.keywordsOverlap||0))+"")&&T(nt,Ln),2048&e[1]&&On!==(On=t[42].bookmark1.title+"")&&T(mt,On),2048&e[1]&&Rn!==(Rn=t[42].bookmark1.url+"")&&T(kt,Rn),2048&e[1]&&_t!==(_t=t[42].bookmark1.url)&&A(wt,"href",_t),2048&e[1]&&Bn!==(Bn=(t[42].bookmark1.domain||"N/A")+"")&&T(Tt,Bn),2048&e[1]&&jn!==(jn=(t[42].bookmark1.category||"Uncategorized")+"")&&T(Bt,jn),2048&e[1]&&$n!==($n=(t[42].bookmark1.description||"No description")+"")&&T(Nt,$n),Yn===(Yn=Kn(t))&&Qn?Qn.p(t,e):(Qn.d(1),Qn=Yn(t),Qn&&(Qn.c(),Qn.m(Ut,null))),2048&e[1]&&In!==(In=new Date(t[42].bookmark1.dateAdded).toLocaleDateString()+"")&&T(Gt,In),2048&e[1]&&E(ie,"width",t[42].coverage1.percentage+"%"),2048&e[1]&&zn!==(zn=t[42].coverage1.percentage.toFixed(0)+"")&&T(ae,zn),2048&e[1]&&fe!==(fe=t[42].bookmark1.url)&&A(de,"href",fe),2048&e[1]&&Fn!==(Fn=t[42].bookmark2.title+"")&&T(Me,Fn),2048&e[1]&&Nn!==(Nn=t[42].bookmark2.url+"")&&T(Ee,Nn),2048&e[1]&&Le!==(Le=t[42].bookmark2.url)&&A(Pe,"href",Le),2048&e[1]&&Wn!==(Wn=(t[42].bookmark2.domain||"N/A")+"")&&T(Ie,Wn),2048&e[1]&&Hn!==(Hn=(t[42].bookmark2.category||"Uncategorized")+"")&&T(Ve,Hn),2048&e[1]&&Vn!==(Vn=(t[42].bookmark2.description||"No description")+"")&&T(Je,Vn),Xn===(Xn=Jn(t))&&Gn?Gn.p(t,e):(Gn.d(1),Gn=Xn(t),Gn&&(Gn.c(),Gn.m(en,null))),2048&e[1]&&qn!==(qn=new Date(t[42].bookmark2.dateAdded).toLocaleDateString()+"")&&T(ln,qn),2048&e[1]&&E(pn,"width",t[42].coverage2.percentage+"%"),2048&e[1]&&Un!==(Un=t[42].coverage2.percentage.toFixed(0)+"")&&T(yn,Un),2048&e[1]&&_n!==(_n=t[42].bookmark2.url)&&A(wn,"href",_n)},d(t){t&&b(e),Qn.d(),Gn.d(),Sn=!1,r(An)}}}function Gy(e){let n;return{c(){n=v("span"),n.textContent="No keywords",A(n,"class","text-sm text-gray-400")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function Zy(t){let e,n=it(t[42].bookmark1.keywords.slice(0,5)),r=[];for(let e=0;e<n.length;e+=1)r[e]=tb(Vp(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);y(t,e,n)},p(t,i){if(2048&i[1]){let o;for(n=it(t[42].bookmark1.keywords.slice(0,5)),o=0;o<n.length;o+=1){const s=Vp(t,n,o);r[o]?r[o].p(s,i):(r[o]=tb(s),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&b(e),x(r,t)}}}function tb(t){let e,n,r=t[200]+"";return{c(){e=v("span"),n=k(r),A(e,"class","px-2 py-0.5 bg-gray-100 text-xs rounded")},m(t,r){y(t,e,r),m(e,n)},p(t,e){2048&e[1]&&r!==(r=t[200]+"")&&T(n,r)},d(t){t&&b(e)}}}function eb(e){let n;return{c(){n=v("span"),n.textContent="No keywords",A(n,"class","text-sm text-gray-400")},m(t,e){y(t,n,e)},p:t,d(t){t&&b(n)}}}function nb(t){let e,n=it(t[42].bookmark2.keywords.slice(0,5)),r=[];for(let e=0;e<n.length;e+=1)r[e]=rb(Hp(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);y(t,e,n)},p(t,i){if(2048&i[1]){let o;for(n=it(t[42].bookmark2.keywords.slice(0,5)),o=0;o<n.length;o+=1){const s=Hp(t,n,o);r[o]?r[o].p(s,i):(r[o]=rb(s),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&b(e),x(r,t)}}}function rb(t){let e,n,r=t[200]+"";return{c(){e=v("span"),n=k(r),A(e,"class","px-2 py-0.5 bg-gray-100 text-xs rounded")},m(t,r){y(t,e,r),m(e,n)},p(t,e){2048&e[1]&&r!==(r=t[200]+"")&&T(n,r)},d(t){t&&b(e)}}}function ib(t){let e,n,i,o,s,a,l,c,u,d,h,f,p,g,x,w,k,S,D,T,P,E,L,O,B,j,$;const I=[bg,yg,mg,gg],z=[];function F(t,e){return"bookmarks"===t[6]?0:"insights"===t[6]?1:"health"===t[6]?2:"dataExplorer"===t[6]?3:-1}~(P=F(t))&&(E=z[P]=I[P](t));let N=t[42]&&Xy(t);return{c(){e=_(),n=v("div"),i=v("header"),o=v("div"),s=v("div"),a=v("div"),l=v("h1"),l.textContent="Bookmark Insight",c=_(),u=v("button"),u.innerHTML='<svg class="w-4 h-4 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>\n            Export',d=_(),h=v("nav"),f=v("button"),f.textContent="Bookmarks",p=_(),g=v("button"),g.textContent="Insights",x=_(),w=v("button"),w.textContent="Health",k=_(),S=v("button"),S.textContent=" Data",D=_(),T=v("div"),E&&E.c(),L=_(),N&&N.c(),O=C(),Wp.title="Bookmark Insight Dashboard",A(l,"class","text-2xl font-bold text-gray-900"),A(u,"class","px-3 py-1 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50"),A(u,"title","Export bookmarks to JSON"),A(a,"class","flex items-center space-x-4"),A(f,"class","px-4 py-2 rounded-md text-sm font-medium"),R(f,"bg-blue-100","bookmarks"===t[6]),R(f,"text-blue-700","bookmarks"===t[6]),R(f,"text-gray-500","bookmarks"!==t[6]),R(f,"hover:text-gray-700","bookmarks"!==t[6]),A(g,"class","px-4 py-2 rounded-md text-sm font-medium"),R(g,"bg-blue-100","insights"===t[6]),R(g,"text-blue-700","insights"===t[6]),R(g,"text-gray-500","insights"!==t[6]),R(g,"hover:text-gray-700","insights"!==t[6]),A(w,"class","px-4 py-2 rounded-md text-sm font-medium"),R(w,"bg-blue-100","health"===t[6]),R(w,"text-blue-700","health"===t[6]),R(w,"text-gray-500","health"!==t[6]),R(w,"hover:text-gray-700","health"!==t[6]),A(S,"class","px-4 py-2 rounded-md text-sm font-medium"),R(S,"bg-blue-100","dataExplorer"===t[6]),R(S,"text-blue-700","dataExplorer"===t[6]),R(S,"text-gray-500","dataExplorer"!==t[6]),R(S,"hover:text-gray-700","dataExplorer"!==t[6]),A(h,"class","flex space-x-4"),A(s,"class","flex justify-between items-center py-4"),A(o,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"),A(i,"class","bg-white shadow-sm border-b border-gray-200"),A(T,"class","max-w-[96rem] mx-auto px-4 sm:px-6 lg:px-8 py-8"),A(n,"class","min-h-screen bg-gray-50")},m(r,b){y(r,e,b),y(r,n,b),m(n,i),m(i,o),m(o,s),m(s,a),m(a,l),m(a,c),m(a,u),m(s,d),m(s,h),m(h,f),m(h,p),m(h,g),m(h,x),m(h,w),m(h,k),m(h,S),m(n,D),m(n,T),~P&&z[P].m(T,null),y(r,L,b),N&&N.m(r,b),y(r,O,b),B=!0,j||($=[M(u,"click",t[109]),M(f,"click",t[114]),M(g,"click",t[115]),M(w,"click",t[116]),M(S,"click",t[117])],j=!0)},p(t,e){(!B||64&e[0])&&R(f,"bg-blue-100","bookmarks"===t[6]),(!B||64&e[0])&&R(f,"text-blue-700","bookmarks"===t[6]),(!B||64&e[0])&&R(f,"text-gray-500","bookmarks"!==t[6]),(!B||64&e[0])&&R(f,"hover:text-gray-700","bookmarks"!==t[6]),(!B||64&e[0])&&R(g,"bg-blue-100","insights"===t[6]),(!B||64&e[0])&&R(g,"text-blue-700","insights"===t[6]),(!B||64&e[0])&&R(g,"text-gray-500","insights"!==t[6]),(!B||64&e[0])&&R(g,"hover:text-gray-700","insights"!==t[6]),(!B||64&e[0])&&R(w,"bg-blue-100","health"===t[6]),(!B||64&e[0])&&R(w,"text-blue-700","health"===t[6]),(!B||64&e[0])&&R(w,"text-gray-500","health"!==t[6]),(!B||64&e[0])&&R(w,"hover:text-gray-700","health"!==t[6]),(!B||64&e[0])&&R(S,"bg-blue-100","dataExplorer"===t[6]),(!B||64&e[0])&&R(S,"text-blue-700","dataExplorer"===t[6]),(!B||64&e[0])&&R(S,"text-gray-500","dataExplorer"!==t[6]),(!B||64&e[0])&&R(S,"hover:text-gray-700","dataExplorer"!==t[6]);let n=P;P=F(t),P===n?~P&&z[P].p(t,e):(E&&(tt(),rt(z[n],1,1,()=>{z[n]=null}),et()),~P?(E=z[P],E?E.p(t,e):(E=z[P]=I[P](t),E.c()),nt(E,1),E.m(T,null)):E=null),t[42]?N?N.p(t,e):(N=Xy(t),N.c(),N.m(O.parentNode,O)):N&&(N.d(1),N=null)},i(t){B||(nt(E),B=!0)},o(t){rt(E),B=!1},d(t){t&&(b(e),b(n),b(L),b(O)),~P&&z[P].d(),N&&N.d(t),j=!1,r($)}}}function ob(){const t=window.location.hash.replace("#","");return["bookmarks","insights","health","dataExplorer"].includes(t)?t:"bookmarks"}function sb(t,e,n){let r,i,o;c(t,Gl,t=>n(57,r=t)),c(t,Jl,t=>n(1,i=t)),c(t,Xl,t=>n(2,o=t)),No.register(...Fa);let s,a=[],l=!0,u=null,d="undefined"!=typeof window?ob():"bookmarks",h=0,f=0,p=!1,g="date_desc",m=null,y=!1,b=null,x=null,v=null,w=null,k=null,_=null,C=null,M=null,S=null,A=null,T=[],P=[],E=[],L=[],R=!1,B=null,j=null,$=null,z=!1,N=null,H=null,V=[],q=50,U=5,K=!1,Y=!1,Q=null,J=null,X=[],G=[],Z=null,tt=null,et=null,nt=!1,rt=!1,it=!1,ot=!1,st=!1,at=!1,lt=10,ct=10,ut=10,dt=new Set,ht=[],ft=null,pt=null,gt="duplicates",mt=null,yt=null,bt={deadLinks:10,oldUnused:10,genericTitles:10,temporaryUrls:10,lowScore:10},xt=!1,vt=null,wt=!1,kt=!1,_t=[],Ct=!1,Mt=null,St=null,At=!1,Dt="list";I(async()=>{try{window.addEventListener("hashchange",()=>{const t=ob();t!==d&&jt(t,!1)}),window.location.hash||(window.location.hash=d),Ot(0,!1),Ql.invalidate(),"insights"===d?await $t():"health"===d&&await It()}catch(t){n(5,u=t.message)}finally{n(4,l=!1)}chrome.runtime.onMessage.addListener((t,e,r)=>{if("enrichmentProgress"===t.action&&t.progress){n(20,H=t.progress);const e={timestamp:Date.now(),...t.progress};n(21,V=[...V,e]),V.length>100&&n(21,V=V.slice(-100))}else if("bookmarksChanged"===t.action){if(y)return;Ap=null,Dp=!1,Ql.invalidate(),"bookmarks"===d&&Ot(0,!1),Pl().then(t=>n(15,B=t)),s&&s.refresh&&s.refresh()}})});const Tt=function(t,e=300){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...r)},e)}}(()=>{Ot(0,!1)},300);let Pt=o,Et=JSON.stringify(i),Lt=g;async function Ot(t,e){e||n(4,l=!0);try{const s=o||((r=i).domains.length>0||r.folders.length>0||r.topics.length>0||r.types.length>0||r.creators.length>0||r.tags&&r.tags.length>0||r.deadLinks||r.stale||null!==r.dateRange||null!==r.readingTimeRange||null!==r.qualityScoreRange||null!==r.hasPublishedDate),l={limit:50,offset:50*t,sortBy:g,computeStats:s};await new Promise(t=>requestAnimationFrame(t));const c=await Rp(o,i,l);n(3,a=e?[...a,...c.results]:c.results),n(7,f=c.total),n(8,p=c.hasMore),n(10,m=c.parsedQuery),n(16,j=s?c.stats:null)}catch(t){console.error("Error loading bookmarks:",t),n(5,u=t.message)}finally{n(4,l=!1)}var r}function Rt(t){const e=t.detail.query;Xl.set(e)}function Bt(t){n(0,g=t)}async function jt(t,e=!0){n(6,d=t),n(4,l=!0),e&&"undefined"!=typeof window&&(window.location.hash=t);try{"bookmarks"===t?(h=0,await Ot(0,!1)):"insights"===t?await $t():"health"===t&&await It()}catch(t){n(5,u=t.message)}finally{n(4,l=!1)}}async function $t(){try{const[t,e,n,r,i,o,s,a,l,c,u,d,h]=await Promise.all([pl(),gl(),Sl(),Bl(),Cl(),Ml(),jl(),$l(),Il(),eh(),nh(),rh(),ih()]);vt=a,X=c,G=u,Z=d,tt=h,setTimeout(()=>{const a=document.getElementById("domainChart");a&&(b&&b.destroy(),b=new No(a,{type:"bar",data:{labels:t.map(([t])=>t),datasets:[{label:"Bookmarks",data:t.map(([,t])=>t),backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top 10 Most Bookmarked Domains"}},scales:{y:{beginAtZero:!0}}}}));const d=document.getElementById("domainDistributionChart");d&&(M&&M.destroy(),M=new No(d,{type:"pie",data:{labels:l.map(t=>t.domain),datasets:[{data:l.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Distribution by Domain"},tooltip:{callbacks:{label(t){const e=l[t.dataIndex];return`${e.domain}: ${e.count} (${e.percentage}%)`}}}}}}));const h=document.getElementById("activityChart");h&&(x&&x.destroy(),x=new No(h,{type:"line",data:{labels:e.map(([t])=>t),datasets:[{label:"Bookmarks Added",data:e.map(([,t])=>t),fill:!1,borderColor:"rgba(34, 197, 94, 1)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Activity Timeline"}},scales:{y:{beginAtZero:!0}}}}));const f=document.getElementById("wordCloudChart");f&&(v&&v.destroy(),v=new No(f,{type:"bar",data:{labels:n.map(([t])=>t),datasets:[{label:"Frequency",data:n.map(([,t])=>t),backgroundColor:"rgba(168, 85, 247, 0.5)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:1}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Most Frequent Words in Bookmark Titles"}},scales:{x:{beginAtZero:!0}}}}));const p=document.getElementById("titlePatternsChart");p&&(w&&w.destroy(),w=new No(p,{type:"doughnut",data:{labels:r.map(([t])=>t),datasets:[{data:r.map(([,t])=>t),backgroundColor:["#F59E0B","#10B981","#3B82F6","#EF4444","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Common Title Patterns & Types"}}}}));const g=document.getElementById("ageDistributionChart");g&&(k&&k.destroy(),k=new No(g,{type:"bar",data:{labels:i.map(([t])=>t),datasets:[{label:"Bookmarks",data:i.map(([,t])=>t),backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Age Distribution"}},scales:{y:{beginAtZero:!0}}}}));const m=document.getElementById("creationPatternsChart");m&&(_&&_.destroy(),_=new No(m,{type:"radar",data:{labels:o.daily.map(([t])=>t),datasets:[{label:"Bookmarks Created",data:o.daily.map(([,t])=>t),backgroundColor:"rgba(245, 158, 11, 0.2)",borderColor:"rgba(245, 158, 11, 1)",borderWidth:2}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Creation Patterns by Day of Week"}},scales:{r:{beginAtZero:!0}}}}));const y=document.getElementById("urlPatternsChart");y&&(C&&C.destroy(),C=new No(y,{type:"bar",data:{labels:s.topLevelDomains.map(([t])=>`.${t}`),datasets:[{label:"Count",data:s.topLevelDomains.map(([,t])=>t),backgroundColor:"rgba(236, 72, 153, 0.5)",borderColor:"rgba(236, 72, 153, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top Level Domains Distribution"}},scales:{y:{beginAtZero:!0}}}}));const D=document.getElementById("domainHierarchyChart");if(D&&c.length>0){S&&S.destroy();const t=c.slice(0,15);S=new No(D,{type:"bar",data:{labels:t.map(t=>t.name),datasets:[{label:"Bookmarks",data:t.map(t=>t.count),backgroundColor:["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#6B7280","#14B8A6","#F97316","#84CC16","#06B6D4","#F43F5E","#22C55E","#A855F7","#0EA5E9"]}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Domain Hierarchy (Top 15 Domains)"},legend:{display:!1}},scales:{x:{beginAtZero:!0}}}})}const T=document.getElementById("freshnessChart");T&&u.length>0&&(A&&A.destroy(),A=new No(T,{type:"doughnut",data:{labels:u.map(t=>t.period),datasets:[{data:u.map(t=>t.count),backgroundColor:["#22C55E","#84CC16","#F59E0B","#F97316","#EF4444"]}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Bookmark Freshness"}}}}))},100)}catch(t){console.error("Error loading insights:",t)}}async function It(){n(34,lt=10),n(35,ct=10),n(36,ut=10);try{n(29,nt=!0),rt=!0,n(14,R=!0),n(30,it=!0),n(15,B=await Pl()),await zt(),Al().then(t=>{n(11,T=t),n(29,nt=!1)}).catch(t=>{console.error("Error loading duplicates:",t),n(29,nt=!1)}),zl().then(t=>{n(13,L=t),n(14,R=!1)}).catch(t=>{console.error("Error loading dead links:",t),n(14,R=!1)}),oh().then(t=>{n(28,et=t)}).catch(t=>{console.error("Error loading dead link insights:",t)}),Tl().then(t=>{n(12,P=t),n(30,it=!1)}).catch(t=>{console.error("Error loading malformed URLs:",t),n(30,it=!1)}),rt=!1,E=[],n(33,at=!0),Np({minSimilarity:.4,maxPairs:100,prioritizeSameDomain:!0,forceRefresh:!1,useCache:!0}).then(t=>{t.fromCache&&t.pairs.length>0&&(n(38,ht=t.pairs),n(39,ft=t.stats),n(40,pt={fromCache:t.fromCache,cachedAt:t.cachedAt,cacheAge:t.cacheAge})),n(33,at=!1)}).catch(t=>{console.error("Error loading cached similar pairs:",t),n(33,at=!1)}),n(32,st=!1)}catch(t){console.error("Error loading health data:",t)}}async function zt(){try{const t=await chrome.runtime.sendMessage({action:"getEnrichmentStatus"});t.success&&n(17,$=t);const e=await ul();e&&(n(22,q=e.enrichmentBatchSize||50),n(23,U=e.enrichmentConcurrency||5))}catch(t){console.error("Error loading enrichment status:",t)}}async function Ft(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted dead link: ${t}`)):console.log(`Bookmark ${t} no longer exists`),n(13,L=L.filter(e=>e.id!==t)),et&&n(28,et={...et,total:et.total-1}),await fl(t)}catch(t){console.error("Error deleting dead link:",t)}}let Nt=!1,Wt=null,Ht=null,Vt=50,qt=3;async function Ut(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0&&(await chrome.bookmarks.remove(t),console.log(`Deleted malformed URL: ${t}`)),n(12,P=P.filter(e=>e.id!==t)),await fl(t)}catch(t){console.error("Error deleting malformed URL:",t)}}async function Kt(t,e){try{const r=await chrome.bookmarks.get([t]);r&&r.length>0?(await chrome.bookmarks.remove(t),console.log(`Deleted bookmark: ${t}`)):console.log(`Bookmark ${t} no longer exists`),await fl(t),n(11,T=T.map((n,r)=>r===e?n.filter(e=>e.id!==t):n).filter(t=>t.length>1)),dt.delete(t),n(37,dt),Ql.invalidate()}catch(t){console.error("Error deleting bookmark:",t),n(29,nt=!0),Al().then(t=>{n(11,T=t),n(29,nt=!1)})}}function Yt(t){dt.has(t)?dt.delete(t):dt.add(t),n(37,dt)}async function Qt(t=!1){n(33,at=!0),n(38,ht=[]),n(39,ft=null),n(40,pt=null);try{const e=await Np({minSimilarity:.4,maxPairs:100,prioritizeSameDomain:!0,forceRefresh:t});n(38,ht=e.pairs),n(39,ft=e.stats),n(40,pt={fromCache:e.fromCache,cachedAt:e.cachedAt,cacheAge:e.cacheAge})}catch(t){console.error("Error running smart similar detection:",t)}finally{n(33,at=!1)}}function Jt(t){n(42,mt=t)}function Xt(){n(42,mt=null)}async function Gt(t){try{const e=await chrome.bookmarks.get([t]);e&&e.length>0&&await chrome.bookmarks.remove(t),await fl(t),n(38,ht=ht.filter(e=>e.bookmark1.id!==t&&e.bookmark2.id!==t)),ft&&n(39,ft={...ft,total:ht.length}),!mt||mt.bookmark1.id!==t&&mt.bookmark2.id!==t||Xt(),Ql.invalidate()}catch(t){console.error("Error deleting bookmark from comparison:",t)}}function Zt(t){n(44,bt={...bt,[t]:bt[t]+10})}async function te(t,e){try{const r=await chrome.bookmarks.get([t]);r&&r.length>0&&await chrome.bookmarks.remove(t),await fl(t),yt&&n(43,yt={...yt,[e]:yt[e].filter(e=>e.id!==t),summary:{...yt.summary,total:yt.summary.total-1,byCategory:{...yt.summary.byCategory,[e]:yt.summary.byCategory[e]-1}}})}catch(t){console.error("Error deleting useless bookmark:",t)}}async function ee(t){if(!yt||!yt[t]||0===yt[t].length)return;const e=yt[t].length;if(confirm(`Are you sure you want to delete all ${e} bookmarks in "${t}"? This action cannot be undone.`)){n(45,xt=!0),y=!0;try{const r=yt[t].map(t=>t.id);await Rl(r),n(43,yt={...yt,[t]:[],summary:{...yt.summary,total:yt.summary.total-e,byCategory:{...yt.summary.byCategory,[t]:0}}})}catch(t){console.error("Error deleting useless bookmarks:",t)}finally{n(45,xt=!1),setTimeout(()=>{y=!1},500)}}}async function ne(t){if(confirm(`Restore auto-backup from ${_t[t].createdAt}?\n\nThis will replace your current data.`)){n(47,kt=!0);try{(await Ul(t)).success&&(alert("Restore complete! Refreshing..."),window.location.reload())}catch(t){console.error("Error restoring auto-backup:",t),alert("Error: "+t.message)}finally{n(47,kt=!1)}}}return t.$$.update=()=>{if(7&t.$$.dirty[0]|917504&t.$$.dirty[3]){const t=JSON.stringify(i)!==Et,e=o!==Pt;e&&(o&&o.trim().length>0?"date_desc"===g&&n(0,g="relevance"):"relevance"===g&&n(0,g="date_desc"));(t||e||g!==Lt)&&(n(110,Pt=o),n(111,Et=JSON.stringify(i)),n(112,Lt=g),h=0,Tt())}},[g,i,o,a,l,u,d,f,p,s,m,T,P,L,R,B,j,$,z,N,H,V,q,U,K,Y,Q,J,et,nt,it,ot,st,at,lt,ct,ut,dt,ht,ft,pt,gt,mt,yt,bt,xt,wt,kt,_t,St,At,Dt,Nt,Wt,Ht,Vt,qt,r,Ot,function(){p&&!l&&(h++,Ot(h,!0))},Rt,Bt,jt,function(t){const{category:e}=t.detail;Xl.set(`category:${e}`),n(6,d="bookmarks")},function(t){const{domain:e}=t.detail;Jl.addFilter("domains",e),n(6,d="bookmarks")},async function(t){Xl.set("accessed:yes"),n(6,d="bookmarks")},async function(){Jl.setFilter("stale",!0),n(6,d="bookmarks")},async function(){n(6,d="health"),await It()},async function(){searchQuery="enriched:no",n(6,d="bookmarks"),await Rt(searchQuery)},async function(){searchQuery="category:uncategorized",n(6,d="bookmarks"),await Rt(searchQuery)},function(){n(6,d="health"),It()},async function(t){const{ids:e}=t.detail;if(e&&0!==e.length&&confirm(`Are you sure you want to delete ${e.length} bookmark(s)?`))try{y=!0,await Rl(e),await Ot(0,!1)}catch(t){console.error("Error deleting bookmarks:",t),alert("Failed to delete some bookmarks. Please try again.")}finally{setTimeout(()=>{y=!1},500)}},async function(t){const{query:e}=t.detail;Xl.set(e),n(6,d="bookmarks")},async function(){n(18,z=!0),n(19,N=null),n(20,H=null),n(21,V=[]);try{console.log("Creating auto-backup before enrichment..."),await Vl();const t=await chrome.runtime.sendMessage({action:"runEnrichment",batchSize:q,concurrency:U,force:K});t.success?(n(19,N=t.result),await zt()):n(19,N={error:t.error})}catch(t){console.error("Error running enrichment:",t),n(19,N={error:t.message})}finally{n(18,z=!1)}},async function(){n(25,Y=!0),n(26,Q=null),n(27,J=null);try{const{batchReanalyze:t}=await Promise.resolve().then(function(){return yb}),{getAllBookmarks:e}=await Promise.resolve().then(function(){return Kl}),r=await e();console.log(`Starting deep analysis on ${r.length} bookmarks`);const i=await t(r,t=>{n(26,Q={current:t.current,total:t.total,completed:t.completed,title:t.title,status:t.status})});n(27,J={processed:i.processed,analyzed:i.success,skipped:i.skipped,failed:i.failed}),console.log("Deep analysis complete:",J),await Ot(0,!1)}catch(t){console.error("Error during deep analysis:",t),n(27,J={error:t.message})}finally{n(25,Y=!1)}},function(){n(34,lt+=10)},function(){n(35,ct+=10)},function(){n(36,ut+=10)},Ft,async function(){if(0===L.length)return;if(confirm(`Are you sure you want to delete all ${L.length} dead links? This action cannot be undone.`)){n(31,ot=!0),y=!0;try{const t=L.map(t=>t.id),e=await Rl(t);console.log(`Deleted ${e.success} dead links, ${e.errors.length} errors`),n(13,L=[]),n(28,et=null),oh().then(t=>{n(28,et=t)})}catch(t){console.error("Error deleting all dead links:",t),zl().then(t=>{n(13,L=t)})}finally{n(31,ot=!1),setTimeout(()=>{y=!1},500)}}},async function(){if(0===L.length)return;const t=Vt>0&&Vt<L.length?Vt:L.length,e=L.length-t;if(!confirm(`Re-check ${t} dead links?${e>0?` (${e} will remain for next batch)`:""}\n\nThis will attempt to fetch each URL again to verify if it's still unreachable.`))return;n(52,Nt=!0),n(53,Wt=null),n(54,Ht=null);const r=t=>{"reEnrichProgress"===t.action&&t.progress&&n(53,Wt=t.progress)};chrome.runtime.onMessage.addListener(r);try{const t=await chrome.runtime.sendMessage({action:"reEnrichDeadLinks",batchSize:Vt,concurrency:qt});if(t.success){n(54,Ht=t.results);const e=await zl();n(13,L=e);const r=await oh();n(28,et=r)}else console.error("Error re-enriching dead links:",t.error),n(54,Ht={error:t.error})}catch(t){console.error("Error re-enriching dead links:",t),n(54,Ht={error:t.message})}finally{n(52,Nt=!1),chrome.runtime.onMessage.removeListener(r)}},Ut,async function(){if(0===P.length)return;if(!confirm(`Are you sure you want to delete all ${P.length} invalid URL bookmarks? This action cannot be undone.`))return;let t=0;for(const e of P)try{const n=await chrome.bookmarks.get([e.id]);n&&n.length>0&&(await chrome.bookmarks.remove(e.id),t++),await fl(e.id)}catch(t){console.error(`Error deleting malformed URL ${e.id}:`,t)}n(12,P=[]),console.log(`Deleted ${t} invalid URL bookmarks`)},Kt,Yt,function(){dt.clear(),T.forEach(t=>{t.slice(1).forEach(t=>{dt.add(t.id)})}),n(37,dt)},function(){dt.clear(),n(37,dt)},async function(){if(0===dt.size)return;const t=Array.from(dt);let e=0;for(const n of t)try{const t=await chrome.bookmarks.get([n]);t&&t.length>0&&(await chrome.bookmarks.remove(n),e++)}catch(t){console.error(`Error deleting bookmark ${n}:`,t)}n(11,T=T.map(t=>t.filter(t=>!dt.has(t.id))).filter(t=>t.length>1)),dt.clear(),n(37,dt),console.log(`Deleted ${e} duplicate bookmarks`)},async function(){let t=0;for(const e of T)for(const n of e.slice(1))try{const e=await chrome.bookmarks.get([n.id]);e&&e.length>0&&(await chrome.bookmarks.remove(n.id),t++)}catch(t){console.error(`Error deleting bookmark ${n.id}:`,t)}n(11,T=[]),dt.clear(),n(37,dt),console.log(`Deleted ${t} duplicate bookmarks`)},Qt,Jt,Xt,Gt,Zt,te,ee,function(){n(50,At=!At),At||Gl.clear()},function(){Gl.selectAll(a.map(t=>t.id))},function(){Gl.clear()},function(){if(0===r.size)return;const t=Array.from(r),e=a.filter(e=>t.includes(e.id));e.length>20&&!confirm(`You are about to open ${e.length} URLs. This may slow down your browser. Continue?`)||e.forEach((t,e)=>{const n=0===e;chrome.tabs.create({url:t.url,active:n})})},async function(){if(0!==r.size&&confirm(`Are you sure you want to delete ${r.size} bookmark(s)?`)){y=!0;try{const t=Array.from(r),e=await Rl(t);e.errors&&e.errors.length>0&&console.error("Some bookmarks could not be deleted:",e.errors),n(3,a=a.filter(e=>!t.includes(e.id)));const i=e.success?t.length:0;n(7,f=Math.max(0,f-i)),Ql.invalidate(),Gl.clear(),n(50,At=!1),s&&s.refresh&&s.refresh(),Pl().then(t=>n(15,B=t))}catch(t){console.error("Error deleting bookmarks:",t),alert("Error deleting bookmarks. Please try again.")}finally{setTimeout(()=>{y=!1},500)}}},async function(t){const{bookmarkId:e}=t.detail;if(confirm("Are you sure you want to delete this bookmark?"))try{await fl(e),n(3,a=a.filter(t=>t.id!==e)),n(7,f=Math.max(0,f-1)),Ql.invalidate(),s&&s.refresh&&s.refresh()}catch(t){console.error("Error deleting bookmark:",t),alert("Error deleting bookmark. Please try again.")}},async function(t){const{bookmarkId:e}=t.detail;try{const t=await chrome.runtime.sendMessage({action:"enrichSpecificBookmarks",ids:[e]});t.success?await Ot(h,!1):(console.error("Enrichment failed:",t.error),alert("Enrichment failed: "+t.error))}catch(t){console.error("Error enriching bookmark:",t),alert("Error enriching bookmark. Please try again.")}},function(){n(51,Dt="list"===Dt?"card":"list")},async function(){n(46,wt=!0);try{const t=await Nl();t.success&&alert(`Backup saved: ${t.filename}\n\nContains:\n- ${t.metadata.totalBookmarks} bookmarks\n- ${t.metadata.enrichedCount} enriched\n- ${t.metadata.categorizedCount} categorized`)}catch(t){console.error("Error creating backup:",t),alert("Error creating backup: "+t.message)}finally{n(46,wt=!1)}},async function(){if(Mt)if(St&&St.valid){if(confirm(`Restore backup from ${St.createdAt}?\n\nThis will replace your current data with:\n- ${St.metadata.totalBookmarks} bookmarks\n- ${St.metadata.enrichedCount} enriched\n\nYour current data will be auto-backed up first.`)){n(47,kt=!0);try{await Vl();const t=await Mt.text(),e=JSON.parse(t),r=await Wl(e);r.success&&(alert(`Restore complete!\n\n- ${r.results.bookmarksRestored} bookmarks restored\n- ${r.results.similaritiesRestored} similarities restored\n\nRefreshing...`),Ct=!1,Mt=null,n(49,St=null),window.location.reload())}catch(t){console.error("Error restoring backup:",t),alert("Error restoring backup: "+t.message)}finally{n(47,kt=!1)}}}else alert("Please select a valid backup file");else alert("Please select a backup file first")},async function(t){const e=t.target.files[0];if(e){Mt=e;try{const t=await e.text(),r=JSON.parse(t);n(49,St=Hl(r))}catch(t){n(49,St={valid:!1,issues:["Invalid JSON file"]})}}},async function(){n(48,_t=await ql())},ne,async function(){try{const t=await El(),e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`bookmarks-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}catch(t){console.error("Error exporting bookmarks:",t),alert("Error exporting bookmarks. Please try again.")}},Pt,Et,Lt,function(e){F.call(this,t,e)},()=>jt("bookmarks"),()=>jt("insights"),()=>jt("health"),()=>jt("dataExplorer"),function(t){W[t?"unshift":"push"](()=>{s=t,n(9,s)})},()=>Ot(0,!1),function(){g=O(this),n(0,g),n(1,i),n(111,Et),n(2,o),n(110,Pt),n(112,Lt)},t=>Bt(t.target.value),()=>Xl.set(""),t=>Jl.toggleFilter("domains",t),t=>Jl.toggleFilter("folders",t),t=>Jl.toggleFilter("topics",t),t=>Jl.toggleFilter("types",t),t=>Jl.toggleFilter("creators",t),t=>Jl.toggleFilter("tags",t),()=>Jl.setFilter("dateRange",null),()=>Jl.setFilter("deadLinks",!1),()=>Jl.setFilter("stale",!1),()=>{Jl.clearFilters(),Xl.set("")},()=>Xl.update(t=>(t?t+" ":"")+"category:"),()=>Xl.update(t=>(t?t+" ":"")+"domain:"),()=>Xl.update(t=>(t?t+" ":"")+"folder:"),()=>Xl.update(t=>(t?t+" ":"")+"platform:"),()=>Xl.update(t=>(t?t+" ":"")+"type:"),()=>Xl.update(t=>(t?t+" ":"")+"dead:yes"),()=>Xl.update(t=>(t?t+" ":"")+"stale:yes"),function(){q=D(this.value),n(22,q)},function(){U=D(this.value),n(23,U)},function(){K=this.checked,n(24,K)},function(){Vt=D(this.value),n(55,Vt)},function(){qt=D(this.value),n(56,qt)},t=>Ft(t.id),()=>Qt(!0),()=>n(41,gt="duplicates"),()=>n(41,gt="similar"),t=>Yt(t.id),(t,e)=>Kt(t.id,e),t=>Jt(t),t=>Gt(t.bookmark1.id),t=>Gt(t.bookmark2.id),()=>ee("deadLinks"),t=>te(t.id,"deadLinks"),()=>Zt("deadLinks"),()=>ee("oldUnused"),t=>te(t.id,"oldUnused"),()=>Zt("oldUnused"),()=>ee("genericTitles"),t=>te(t.id,"genericTitles"),()=>Zt("genericTitles"),()=>ee("temporaryUrls"),t=>te(t.id,"temporaryUrls"),()=>Zt("temporaryUrls"),()=>ee("lowScore"),t=>te(t.id,"lowScore"),()=>Zt("lowScore"),t=>Ut(t.id),t=>ne(t),()=>Gt(mt.bookmark1.id),()=>Gt(mt.bookmark2.id)]}const ab=new class extends ht{constructor(t){super(),dt(this,t,sb,ib,o,{},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1])}}({target:document.body});var lb=Object.freeze({__proto__:null,default:{}});function cb(t,e=""){if(!t)return null;if(t["og:video:duration"]){const e=parseInt(t["og:video:duration"],10);return Math.ceil(e/60)}if(t["video:duration"]){const e=parseInt(t["video:duration"],10);return Math.ceil(e/60)}if(t.schemaOrg){const e=Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg];for(const t of e)if("VideoObject"===t["@type"]&&t.duration){const e=fb(t.duration);if(e)return e}}const n=function(t,e){let n=0;if(t.schemaOrg){const e=Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg];for(const t of e)if(t.wordCount)return parseInt(t.wordCount,10)}e&&e.length>100&&(n=e.split(/\s+/).length,n*=5);const r=t.description||t["og:description"]||"";r.length>200&&0===n&&(n=r.length<500?750:r.length<1e3?1500:2500);return n}(t,e);return n>0?Math.ceil(n/225):null}function ub(t){if(!t)return null;const e=["article:published_time","datePublished","og:published_time","publication_date","publishedDate","date","og:updated_time","article:modified_time","dateModified","lastmod"];for(const n of e){const e=t[n];if(e){const t=pb(e);if(t)return t}}if(t.schemaOrg){const e=Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg];for(const t of e){const e=t.datePublished||t.dateCreated||t.dateModified;if(e){const t=pb(e);if(t)return t}}}return null}function db(t,e="",n=""){const r=new Set;if(!t)return[];if(t.keywords){("string"==typeof t.keywords?t.keywords.split(",").map(t=>t.trim()):t.keywords).forEach(t=>{t&&t.length>=3&&t.length<=30&&r.add(t.toLowerCase())})}if(t["article:tag"]){(Array.isArray(t["article:tag"])?t["article:tag"]:[t["article:tag"]]).forEach(t=>{t&&t.length>=3&&t.length<=30&&r.add(t.toLowerCase())})}if(t.schemaOrg){const e=Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg];for(const t of e)if(t.keywords){("string"==typeof t.keywords?t.keywords.split(",").map(t=>t.trim()):Array.isArray(t.keywords)?t.keywords:[]).forEach(t=>{t&&t.length>=3&&t.length<=30&&r.add(t.toLowerCase())})}}if(t["og:video:tag"]){(Array.isArray(t["og:video:tag"])?t["og:video:tag"]:[t["og:video:tag"]]).forEach(t=>{t&&t.length>=3&&t.length<=30&&r.add(t.toLowerCase())})}t["og:type"]&&r.add(t["og:type"].toLowerCase());const i=function(t){if(!t)return[];const e=new Set,n=["javascript","typescript","python","java","react","vue","angular","node","express","api","rest","graphql","sql","nosql","mongodb","docker","kubernetes","aws","azure","gcp","cloud","serverless","ml","ai","machine learning","deep learning","neural network","frontend","backend","fullstack","devops","ci/cd","testing","security","performance","optimization","design","architecture"],r=t.toLowerCase();for(const t of n)r.includes(t)&&e.add(t);return Array.from(e).slice(0,10)}(e+" "+n);return i.forEach(t=>r.add(t)),Array.from(r).slice(0,20)}function hb(t,e={}){if(!t)return 0;let n=0;if(e.title&&e.title.length>10&&(n+=10,e.title.length>30&&e.title.length<100&&(n+=10)),t.description||t["og:description"]){const e=t.description||t["og:description"];e.length>50&&(n+=10,e.length>150&&e.length<500&&(n+=10))}if((t["og:image"]||t.image||t["twitter:image"])&&(n+=10),t.schemaOrg){n+=10;(Array.isArray(t.schemaOrg)?t.schemaOrg:[t.schemaOrg]).some(t=>["Article","BlogPosting","TechArticle","VideoObject","Course"].includes(t["@type"]))&&(n+=5)}(t["article:author"]||t.author||t["og:author"])&&(n+=10),ub(t)&&(n+=10);const r=db(t,e.title,e.description);return r.length>0&&(n+=5,r.length>=5&&(n+=5)),t["og:type"]&&(n+=5),Math.min(n,100)}function fb(t){if(!t||"string"!=typeof t)return null;const e=t.match(/PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/);if(!e)return null;const n=parseInt(e[1]||"0",10),r=parseInt(e[2]||"0",10),i=parseInt(e[3]||"0",10);return 60*n+r+Math.ceil(i/60)}function pb(t){if(!t)return null;try{const e=new Date(t);if(!isNaN(e.getTime()))return e.getTime()}catch(t){}return null}function gb(t){return new Promise(e=>setTimeout(e,t))}async function mb(t){if(!t)return{success:!1,error:"No bookmark provided"};try{const e=function(t){if(!t)return null;const e=t.rawMetadata||{};return{readingTime:cb(e,t.contentSnippet),publishedDate:ub(e),contentQualityScore:hb(e,t),smartTags:db(e,t.title,t.description)}}(t);if(!e)return{success:!1,error:"No metadata to analyze",skipped:!0};if(t.readingTime=e.readingTime,t.publishedDate=e.publishedDate,t.contentQualityScore=e.contentQualityScore,t.smartTags=e.smartTags,t.topics=function(t){if(!t)return[];const e=new Set,n=new Map,r=(t.title||"").toLowerCase(),i=(t.description||"").toLowerCase(),o=(t.domain||"").toLowerCase();(t.url||"").toLowerCase();const s=(t.category||"").toLowerCase(),a=(t.contentSnippet||"").toLowerCase(),l=Array.isArray(t.keywords)?t.keywords.map(t=>t.toLowerCase()).join(" "):"",c=(t.folderPath||"").toLowerCase(),u=`${r} ${i} ${l} ${a} ${c}`;let d="";if(t.rawMetadata){const e=t.rawMetadata.meta||{},n=t.rawMetadata.openGraph||{};(e["article:section"]||"").toLowerCase(),(e["article:tag"]||"").toLowerCase(),d=(n["og:type"]||"").toLowerCase()}const h=(t,e)=>{const r=n.get(t)||0;n.set(t,r+e)};for(const[t,e]of Object.entries(Kc)){if(e.domains)for(const t of e.domains)if(o.includes(t.replace("www.",""))){h(e.id,10);break}if(e.keywords)for(const t of e.keywords){const n=t.toLowerCase(),o=new RegExp(`\\b${Qc(n)}\\b`,"i");o.test(r)&&h(e.id,5),o.test(i)&&h(e.id,3),o.test(a)&&h(e.id,2),o.test(c)&&h(e.id,2)}if(e.subtopics)for(const[t,n]of Object.entries(e.subtopics)){if(n.domains)for(const t of n.domains)if(o.includes(t.replace("www.",""))){h(n.id,10),h(e.id,5);break}if(n.keywords)for(const t of n.keywords){const o=t.toLowerCase(),s=new RegExp(`\\b${Qc(o)}\\b`,"i");s.test(r)&&(h(n.id,5),h(e.id,2.5)),s.test(i)&&(h(n.id,3),h(e.id,1.5)),s.test(u)&&h(n.id,2)}}}("video"===s||d.includes("video"))&&h("videos",10),"blog"!==s&&"article"!==d||h("blogs",5);for(const[t,r]of n.entries())r>=3&&e.add(t);return Array.from(e).sort((t,e)=>(n.get(e)||0)-(n.get(t)||0)).slice(0,5)}(t),t.rawMetadata&&t.platformData){const e=function(t,e){if(!e||!e.schemaOrg||!t)return t;const n=Array.isArray(e.schemaOrg)?e.schemaOrg:[e.schemaOrg];for(const e of n){switch(e["@type"]){case"TechArticle":t.type="tech-article",t.subtype="technical";break;case"BlogPosting":t.type="blog-post",t.subtype="blog";break;case"NewsArticle":t.type="news-article",t.subtype="news";break;case"ScholarlyArticle":t.type="scholarly-article",t.subtype="academic";break;case"VideoObject":"video"!==t.type&&(t.type="video"),t.subtype="video-content";break;case"Course":t.type="course",t.subtype="education";break;case"HowTo":t.type="tutorial",t.subtype="how-to";break;case"FAQPage":t.type="faq",t.subtype="reference";break;case"SoftwareApplication":t.type="software",t.subtype="tool";break;case"APIReference":t.type="api-docs",t.subtype="documentation"}e.author&&!t.creator&&("object"==typeof e.author?t.creator=e.author.name||e.author["@id"]:t.creator=e.author)}return t}(t.platformData,t.rawMetadata);e&&(t.platformData=e,t.contentType=e.type)}return await hl(t),console.log(`Re-analyzed bookmark: ${t.title} - Quality: ${e.contentQualityScore}, Topics: ${t.topics?.length||0}, Reading time: ${e.readingTime||"N/A"} min`),{success:!0,readingTime:e.readingTime,publishedDate:e.publishedDate,contentQualityScore:e.contentQualityScore,smartTagsCount:e.smartTags?.length||0,topicsCount:t.topics?.length||0}}catch(e){return console.error(`Error re-analyzing bookmark ${t.id}:`,e),{success:!1,error:e.message}}}var yb=Object.freeze({__proto__:null,batchReanalyze:async function(t,e=null){if(!t||0===t.length)return{processed:0,success:0,failed:0,skipped:0};console.log(`Starting batch re-analysis of ${t.length} bookmarks...`);let n=0,r=0,i=0,o=0;for(let s=0;s<t.length;s+=50){const a=t.slice(s,s+50);for(let l=0;l<a.length;l++){const c=a[l],u=s+l;try{if(!c.rawMetadata||0===Object.keys(c.rawMetadata).length){i++,o++,e&&e({current:u+1,total:t.length,completed:o,bookmarkId:c.id,title:c.title,status:"skipped",reason:"No metadata to analyze"});continue}const s=await mb(c);s.success?n++:s.skipped?i++:r++,o++,e&&e({current:u+1,total:t.length,completed:o,bookmarkId:c.id,title:c.title,status:s.success?"completed":s.skipped?"skipped":"failed",result:s})}catch(n){console.error(`Error re-analyzing bookmark ${c.id}:`,n),r++,o++,e&&e({current:u+1,total:t.length,completed:o,bookmarkId:c.id,title:c.title,status:"error",error:n.message})}}s+50<t.length&&await gb(100)}return console.log(`Re-analysis complete: ${n} analyzed, ${r} failed, ${i} skipped`),{processed:t.length,success:n,failed:r,skipped:i}},reanalyzeBookmark:mb});export{ab as default};
