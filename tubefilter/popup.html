<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TubeFilter</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-left">
        <h1>üé¨ TubeFilter</h1>
      </div>
      <div class="header-right">
        <span class="url-indicator" id="urlIndicator" title="Current page"></span>
      </div>
    </div>

    <!-- Collapsible Filter Sections -->
    <div class="section" data-section="views">
      <div class="section-header" data-toggle="views">
        <h3><span class="section-icon">üëÅÔ∏è</span> Views</h3>
        <span class="toggle-icon">‚ñº</span>
      </div>
      <div class="section-content" id="views-content">
        <div class="filter-chips">
          <label class="chip" data-type="none">
            <input type="radio" name="viewFilter" value="none" checked>
            <span>Off</span>
          </label>
          <label class="chip">
            <input type="radio" name="viewFilter" value="greater">
            <span>&gt;</span>
            <input type="text" id="viewMin" placeholder="10k" disabled>
          </label>
          <label class="chip">
            <input type="radio" name="viewFilter" value="less">
            <span>&lt;</span>
            <input type="text" id="viewMax" placeholder="100k" disabled>
          </label>
          <label class="chip range-chip">
            <input type="radio" name="viewFilter" value="between">
            <input type="text" id="viewBetweenMin" placeholder="1k" disabled>
            <span>‚Äì</span>
            <input type="text" id="viewBetweenMax" placeholder="10k" disabled>
          </label>
        </div>
      </div>
    </div>

    <div class="section" data-section="duration">
      <div class="section-header" data-toggle="duration">
        <h3><span class="section-icon">‚è±Ô∏è</span> Duration</h3>
        <span class="toggle-icon">‚ñº</span>
      </div>
      <div class="section-content" id="duration-content">
        <div class="filter-chips">
          <label class="chip" data-type="none">
            <input type="radio" name="durationFilter" value="none" checked>
            <span>Off</span>
          </label>
          <label class="chip">
            <input type="radio" name="durationFilter" value="less">
            <span>&lt;</span>
            <input type="text" id="durationLess" placeholder="5m or 5:00" disabled>
          </label>
          <label class="chip">
            <input type="radio" name="durationFilter" value="greater">
            <span>&gt;</span>
            <input type="text" id="durationGreater" placeholder="10m or 10:00" disabled>
          </label>
          <label class="chip range-chip">
            <input type="radio" name="durationFilter" value="custom">
            <input type="text" id="durationMin" placeholder="2m" disabled>
            <span>‚Äì</span>
            <input type="text" id="durationMax" placeholder="1h or 60:00" disabled>
          </label>
        </div>
      </div>
    </div>

    <div class="section" data-section="time">
      <div class="section-header" data-toggle="time">
        <h3><span class="section-icon">üìÖ</span> Upload Date</h3>
        <span class="toggle-icon">‚ñº</span>
      </div>
      <div class="section-content" id="time-content">
        <div class="filter-chips vertical">
          <label class="chip" data-type="none">
            <input type="radio" name="timeFilter" value="none" checked>
            <span>Off</span>
          </label>
          <label class="chip time-chip">
            <input type="radio" name="timeFilter" value="less">
            <span>Newer than</span>
            <input type="number" id="timeLess" placeholder="7" min="1" disabled>
            <select id="timeLessUnit" disabled>
              <option value="hours">hrs</option>
              <option value="days">days</option>
              <option value="weeks">wks</option>
              <option value="months">mos</option>
              <option value="years">yrs</option>
            </select>
          </label>
          <label class="chip time-chip">
            <input type="radio" name="timeFilter" value="greater">
            <span>Older than</span>
            <input type="number" id="timeGreater" placeholder="30" min="1" disabled>
            <select id="timeGreaterUnit" disabled>
              <option value="hours">hrs</option>
              <option value="days" selected>days</option>
              <option value="weeks">wks</option>
              <option value="months">mos</option>
              <option value="years">yrs</option>
            </select>
          </label>
          <label class="chip time-range-chip">
            <input type="radio" name="timeFilter" value="between">
            <span>Between</span>
            <div class="time-range-inputs">
              <div class="time-range-row">
                <input type="number" id="timeBetweenMin" placeholder="7" min="1" disabled>
                <select id="timeBetweenMinUnit" disabled>
                  <option value="hours">hrs</option>
                  <option value="days" selected>days</option>
                  <option value="weeks">wks</option>
                  <option value="years">yrs</option>
                </select>
              </div>
              <span class="range-sep">to</span>
              <div class="time-range-row">
                <input type="number" id="timeBetweenMax" placeholder="30" min="1" disabled>
                <select id="timeBetweenMaxUnit" disabled>
                  <option value="hours">hrs</option>
                  <option value="days" selected>days</option>
                  <option value="weeks">wks</option>
                  <option value="years">yrs</option>
                </select>
              </div>
            </div>
          </label>
        </div>
      </div>
    </div>

    <div class="section" data-section="keywords">
      <div class="section-header" data-toggle="keywords">
        <h3><span class="section-icon">üîç</span> Keywords</h3>
        <span class="toggle-icon">‚ñº</span>
      </div>
      <div class="section-content" id="keywords-content">
        <div class="keyword-input-wrapper">
          <textarea id="titleKeywords" placeholder="music, +tutorial, -shorts (use + to include, - to exclude)" rows="2"></textarea>
          <div class="keyword-options">
            <div class="option-group">
              <label class="toggle-pill">
                <input type="checkbox" id="useRegex">
                <span>Regex</span>
              </label>
              <button type="button" class="help-btn" id="regexHelpBtn" title="Regex Guide">?</button>
            </div>
            <div class="option-group mode-options" id="keywordLogicGroup">
              <label class="mini-chip"><input type="radio" name="keywordLogic" value="AND" checked><span>ALL</span></label>
              <label class="mini-chip"><input type="radio" name="keywordLogic" value="OR"><span>ANY</span></label>
            </div>
            <div class="option-group mode-options">
              <label class="mini-chip include"><input type="radio" name="keywordMode" value="include" checked><span>Include</span></label>
              <label class="mini-chip exclude"><input type="radio" name="keywordMode" value="exclude"><span>Exclude</span></label>
            </div>
          </div>
          <div id="keyword-preview" class="keyword-preview" style="display:none;"></div>
        </div>
      </div>
    </div>

    <!-- Regex Help Panel (hidden by default) -->
    <div class="regex-guide" id="regexGuide" style="display:none;">
      <div class="regex-guide-header">
        <h4>üìò Regex Quick Guide</h4>
        <button type="button" class="close-btn" id="closeRegexGuide">√ó</button>
      </div>
      <div class="regex-guide-content">
        <div class="regex-section">
          <strong>Basics</strong>
          <div class="regex-example"><code>tutorial</code> ‚Äî Match "tutorial" anywhere</div>
          <div class="regex-example"><code>^How</code> ‚Äî Starts with "How"</div>
          <div class="regex-example"><code>2024$</code> ‚Äî Ends with "2024"</div>
        </div>
        <div class="regex-section">
          <strong>Character Classes</strong>
          <div class="regex-example"><code>[aeiou]</code> ‚Äî Any vowel</div>
          <div class="regex-example"><code>[0-9]</code> ‚Äî Any digit</div>
          <div class="regex-example"><code>\d</code> ‚Äî Digit (same as [0-9])</div>
          <div class="regex-example"><code>\w</code> ‚Äî Word character [a-zA-Z0-9_]</div>
          <div class="regex-example"><code>\s</code> ‚Äî Whitespace</div>
        </div>
        <div class="regex-section">
          <strong>Quantifiers</strong>
          <div class="regex-example"><code>a*</code> ‚Äî Zero or more "a"</div>
          <div class="regex-example"><code>a+</code> ‚Äî One or more "a"</div>
          <div class="regex-example"><code>a?</code> ‚Äî Zero or one "a"</div>
          <div class="regex-example"><code>a{3}</code> ‚Äî Exactly 3 "a"s</div>
          <div class="regex-example"><code>a{2,5}</code> ‚Äî 2 to 5 "a"s</div>
        </div>
        <div class="regex-section">
          <strong>Special</strong>
          <div class="regex-example"><code>.</code> ‚Äî Any character</div>
          <div class="regex-example"><code>.*</code> ‚Äî Any characters (greedy)</div>
          <div class="regex-example"><code>cat|dog</code> ‚Äî "cat" OR "dog"</div>
          <div class="regex-example"><code>(music|song)</code> ‚Äî Group alternatives</div>
          <div class="regex-example"><code>(?i)test</code> ‚Äî Case insensitive</div>
        </div>
        <div class="regex-section">
          <strong>Common Examples</strong>
          <div class="regex-example"><code>^(How|What|Why)</code> ‚Äî Questions</div>
          <div class="regex-example"><code>(?i)(react|vue|angular)</code> ‚Äî JS frameworks</div>
          <div class="regex-example"><code>ep(isode)?\s*\d+</code> ‚Äî Episode numbers</div>
          <div class="regex-example"><code>\b(2023|2024)\b</code> ‚Äî Year mentions</div>
          <div class="regex-example"><code>^(?!.*shorts).*$</code> ‚Äî Exclude "shorts"</div>
        </div>
      </div>
    </div>

    <div class="controls">
      <button id="applyFilters" class="btn-primary">
        <span class="btn-icon">‚úì</span> Apply
      </button>
      <button id="clearFilters" class="btn-secondary">
        <span class="btn-icon">‚úï</span> Clear
      </button>
    </div>

    <div class="status" id="status"></div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
